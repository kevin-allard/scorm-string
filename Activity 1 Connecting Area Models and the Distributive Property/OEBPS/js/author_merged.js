/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/
(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default;try{s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2]}catch(err){parser = new DOMParser(), htmlDoc = parser.parseFromString(c[1]+o.replace(vt,"<$1></$2>")+c[2], 'text/html'), el = jQuery(htmlDoc).contents()[0].childNodes[1].childNodes[0],s.append(el)};i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
var closeAllModals;
var click, savesuspendData, gradableInterval = 0;
var customKeyboardLanguageData = [
  {subject:"FRA",french:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},
  {subject:"ESP",spanish:["","","","","","","","","","","","","","","",""]},
  {subject:"GER", german:["","","","","","","",""]}
]
var aggregatedDataGlossaryList = [];
var tempScopeActiveKeyboardLanguage = [];
var certificateUserData = {
  "userFirstName": "",
  "userLastName": "",
  "courseName": "",
  "courseCompletionDate": "",
  "courseCompletionTime": "",
  "isGradaOrPercentage": "percentage",
  "courseCompletionScore": "",
  "certificateStyle": "certificate-style1",
  "clientId": "",
  "userToken":"",
  "passingStatus":""
}
$(function () {

  let landscapeTrigger = setInterval(() => {
    if (typeof window.isLandScapeActivity != "undefined" && window.localeJson) {
      let message = {
        "nextBtnText": window.localeJson.nextBtnText ? window.localeJson.nextBtnText : "Next",
        "previousBtnTxt": window.localeJson.previousBtnTxt ? window.localeJson.previousBtnTxt : "Back",
        "StartCourseText": window.localeJson.StartCourseText ? window.localeJson.StartCourseText : "Start Course",
        "endBtnText": window.localeJson.endBtnText ? window.localeJson.endBtnText : "Finish",
        "isLandscapeActivity": window.isLandScapeActivity ? window.isLandScapeActivity : false
      }

      if (document.referrer) {
          const parentOrigin = new URL(document.referrer).origin;
          window.parent.postMessage(message, parentOrigin);
      }
      clearInterval(landscapeTrigger);
    }
  }, 100);

  $('.paragraph-selectPrv').addClass('component-holder');
  $('.sample-layer-marker').addClass('hide');

  $('video').each(function (index, video) {
    if ($(video).find('track').length) {
      let div = document.createElement('div');
      div.classList.add('tracksPreloadDiv');
      div.style.display = "none";
      $(div).append($(video).find('track'));
      $(div).insertBefore(video);
    }
  });

  try {
    if (window.client == 'CL' || window.parent.client == 'CL') {
      $('.submit-btn').addClass('hide');
      $('.prevNextBtns').addClass('invisible');
    }
  } catch (error) {
    if (error instanceof DOMException) {
      console.log('Cross-origin access blocked:', error);
      // If cross-origin access is blocked, check only the local client
      if (window.client == 'CL') {
        $('.submit-btn').addClass('hide');
      }
    } else {
      // Handle other potential errors
      console.error('An unexpected error occurred:', error);
    }
  }

  //auto shuffling text divs
  $(".questionShuffleEnable.question-container-box").each(function () {
    let randomNumber = Math.random();
    let divs = $(this).find('.question-container');
    for (const div of divs) $(div).remove();
    // the fisher yates algorithm, from http://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array
    var i = divs.length;
    if (i == 0) return false;
    while (--i) {
      let j = Math.floor(randomNumber * (i + 1));
      var tempi = divs[i];
      var tempj = divs[j];
      divs[i] = tempj;
      divs[j] = tempi;
    }
    for (var i = 0; i < divs.length; i++) {
      var x = i;
      $(divs[i]).appendTo($(this));
      $(divs[i]).attr("question-index", i);
      $(divs[i]).find(".question-number").text(x + 1);
    }
  });
  $(".highLighted").removeClass(".highLighted");
  var srollTop, srollTopBody, height;
  console.log("in player")
  $('.audio-source').each(function (idx, audioSource) {
    if ($(audioSource).find('figcaption').text() == "") {
      $(audioSource).find('figcaption').hide();
      $(audioSource).find('figure').css('background-color', '');
    }
    if ($(audioSource).find("audio").attr("data-audiosrc") == "#") {
      $(audioSource).css("display", "none");
    }
    if ($(audioSource).attr("selectedskin") == "style2") {
      $(audioSource).find('.audioBorder').css('border', 'none !important');
    }
  });

  setTimeout(function () {
    $('.prevNextBtns').addClass('invisible');
    $('div.shortAnsText').each(function (index, inx) {
      $(inx).html('')
    })
  },100)
  let mathLiveLoadRetryTimeout;

  function loadJSForMathFields(src, onSuccess, onError) {
    if (!document.querySelector(`script[src="${src}"]`)) {
      var script = document.createElement('script');
      script.src = src;
      script.onload = onSuccess;
      script.onerror = onError;
      document.head.appendChild(script);
    }
  }

  function ensureMathLiveAndInitializeMathFields() {
    if (typeof MathLive !== "undefined") {
      // initializeMathFields();
    } else {
      const mathLiveJsURL = 'https://cdn.jsdelivr.net/npm/mathlive/mathlive.min.js';
      loadJSForMathFields(mathLiveJsURL);

      mathLiveLoadRetryTimeout = setInterval(() => {
        if (typeof MathLive !== "undefined") {
          clearInterval(mathLiveLoadRetryTimeout);
          // initializeMathFields();
        } else {
          console.log('MathLive still not loaded for MathFields, retrying...');
        }
      }, 1000);
    }
  }

  // Example: Call this on page load or when needed.
  setTimeout(() => {
    ensureMathLiveAndInitializeMathFields();
  }, 1000);

  function initializeMathFields() {    
    // Safely initialize math fields without innerHTML manipulation
    $('.auth-mathfield-holder').each(function (index, element) {
      try {
        const $element = $(element);
        const latexExpression = $element.attr('data-equation-latex');
        
        if (latexExpression) {
          // Find or create math-field element
          let mathField = $element.find('math-field')[0];
          
          if (!mathField) {
            // Create math-field programmatically instead of using innerHTML
            mathField = document.createElement('math-field');
            mathField.className = 'mathFieldEq';
            mathField.id = `mathEq${index}`;
            mathField.style.cssText = 'border-width: 0px; background: transparent; outline: none; display: inline-flex; overflow-x: auto; overflow-y: hidden;';
            
            // Clear existing content and append new math field
            $element.empty().append(mathField);
          }
          
          // Safely set the LaTeX value
          if (mathField && typeof mathField.setValue === 'function') {
            // Clean the LaTeX expression to avoid XML issues
            const cleanLatex = latexExpression
              .replace(/&lt;/g, '<')
              .replace(/&gt;/g, '>')
              .replace(/&amp;/g, '&')
              .replace(/&quot;/g, '"')
              .replace(/&#39;/g, "'");
            
            mathField.setValue(cleanLatex);
            
            // Set MathLive properties directly (no setOptions)
            mathField.mathVirtualKeyboardPolicy = "auto";
            mathField.virtualKeyboardTargetOrigin = "*";
			      mathField.mathModeSpace = '\\:';
            
            mathField.smartMode = true;
            mathField.smartFence = true;
            mathField.smartSuperscript = true;
          }
        }
      } catch (error) {
        console.error('Error initializing math field:', error);
        // Fallback: clear the problematic element
        $(element).empty();
      }
    });
  }
  if ($("[data-type*='multiple-choice-template']").length > 0) {
    $('.icheck').iCheck();
  }
  if ($("[data-type*='true-false-template']").length > 0) {
    $('.icheck').iCheck();
  }
  $(".htmlStyleSet img[data-link-src]").each(function () {
    if ($(this).attr("src") == "") {
      $(this).attr("src", $(this).attr("data-link-src"));
    }
  });
  if ($("[data-type*='fill-in-the-blank']").length > 0) {
    $("select.inputbox-selected.js-input option[value]").each(function () {
      var valueText = $(this).attr("value").replace(/>/g, "&gt;").replace(/</g, "&lt;");
      $(this).attr("value", valueText);
      var parser = new DOMParser();
      var el = parser.parseFromString(valueText, "text/html");
      var elem = $(el).contents()[0].childNodes[1].childNodes[0];
      $(this).html(elem);

    });
    $(".js-form-row.fib-without-option div.inputbox-selected[data-correct-answer]").each(function () {
      var valueText = $(this).attr("data-correct-answer").replace(/>/g, "&gt;").replace(/</g, "&lt;");
      $(this).attr("data-correct-answer", valueText);
    });
    // $('.fib select').easyDropDown({
    //     wrapperClass: 'selectbox'
    // });

  }
  // submitAllActivityBasedOnReaderPostMessage(event);

  $('audio, video').attr('preload', 'auto');

  $('.shortLongAnsComponent .questionText').attr('contenteditable', 'false');
  $('.shortLongAnsComponent .shortAnsText, .shortLongAnsComponent .longAnsText').attr('placeholder', 'Your Answer').removeAttr('disabled');

  $('.identifyTheClipComponent .questionText').attr('contenteditable', 'false');
  $('.identifyTheClipComponent .shortAnsText, .identifyTheClipComponent .longAnsText').attr('placeholder', 'Your Answer').removeAttr('disabled');

  var submitBtns = $(".submit-btn"),
    resetBtns = $(".reset-btn .resetTooltipText"),
    showMeBtns = $(".showme-btn .showmeTooltipText"),
    tryAgainBtns = $(".tryagn-btn");

  /*$('.mcq-submit').html('');
  $('.mcq-reset').html('');
  $('.mcq-show-me').html('');
  $('.mcq-try-again').html('');

  $('.imgLabel-submit').html('');
  $('.imgLabel-reset').html('');
  $('.imgLabel-show-me').html('');
  $('.imgLabel-try-again').html('');

  $('.fib-submit').html('');
  $('.fib-reset').html('');
  $('.fib-show-me').html('');
  $('.fib-try-again').html('');

  $('.highLight-submit').html('');
  $('.highLight-reset').html('');
  $('.highLight-show-me').html('');
  $('.highLight-try-again').html('');

  $('.correction-submit').html('');
  $('.correction-reset').html('');
  $('.correction-show-me').html('');
  $('.correction-try-again').html('');

  $('.sorting-submit').html('');
  $('.sorting-reset').html('');
  $('.sorting-show-me').html('');
  $('.sorting-try-again').html('');

  $('.mtp-submit').html('');
  $('.mtp-reset').html('');
  $('.mtp-show-me').html('');
  $('.mtp-try-again').html('');*/

  if (submitBtns.length > 0 || resetBtns.length > 0 || showMeBtns.length > 0 || tryAgainBtns.length > 0) {
    for (var i = 0; i < submitBtns.length; i++) {
      $(submitBtns[i]).html('');
    }

    for (var i = 0; i < resetBtns.length; i++) {
      $(resetBtns[i]).html('');
    }

    for (var i = 0; i < showMeBtns.length; i++) {
      $(showMeBtns[i]).html('');
    }

    for (var i = 0; i < tryAgainBtns.length; i++) {
      $(tryAgainBtns[i]).html('');
    }
  }

  var onLocalizationLoad = function () {

    // This below code is commented puposly against the ticket of https://hurixpdg.atlassian.net/browse/S50I-1754
    // this will only be uncomment if Nidhi can add a dynamic class in list view preview.

    // if(window.pageMargin){
    //   if($('.preview-row-container').length){
    //     $('.preview-row-container > div').each(function(index, item){
    //       var newItem = document.createElement('article');
    //       newItem.innerHTML = item.innerHTML;          
    //       item.parentNode.replaceChild(newItem, item);
    //     });
    //   }else{
    //     $('body > div').each(function(index,item){
    //       var newItem = document.createElement('article');
    //       newItem.innerHTML = item.innerHTML;          
    //       item.parentNode.replaceChild(newItem, item);
    //     });
    //   }      
    //   $('.customClass:not([data-type="image"], [data-type="video"])').attr('data-pagemargin', 'narrow');
    //   $('.customClass[data-type="chapter-headingNew-h1"]').attr('data-pagemargin', 'fullwidth');
    //   $('.customClass[data-type="header"], .customClass[data-type="paragraph"]').attr('data-pagemargin', window.pageMargin);
    // }

    // if(window.defaultFontName){
    //   $(":root")[0].style.setProperty('--defaultFont',window.defaultFontName);
    // 	$('body').addClass('defaultFontName');
    // }

    var submitBtns = $(".submit-btn"),
      resetBtns = $(".reset-btn .resetTooltipText"),
      showMeBtns = $(".showme-btn .showmeTooltipText"),
      tryAgainBtns = $(".tryagn-btn");
    if (window.localeJson) {
      if ($('.fib-with-option .dropdownbtn').length > 0) {
        $.each($('.fib-with-option .dropdownbtn'), function (index, obj) {
          var tempText = $($(obj).find('span.chosenAns')[0]).text();
          if (tempText == "Select Answer" && window.localeJson && window.localeJson['select_answer']) {
            $($(obj).find('span.chosenAns')[0]).text(window.localeJson['select_answer']);
          }

          // $($(obj).parents('.fib-with-option').find('ul li')[0]).text(window.localeJson['select_answer']);
        });
      }

      if ($('[data-type="shortLongAns"]').length > 0 && typeof window.localeJson['your_answer'] != "undefined") {
        $('[data-type="shortLongAns"]').find('input, textarea').attr('placeholder', window.localeJson['your_answer']);
      }
      if ($('[data-type="identify-the-clip"]').length > 0 && typeof window.localeJson['your_answer'] != "undefined") {
        $('[data-type="identify-the-clip"]').find('input, textarea').attr('placeholder', window.localeJson['your_answer']);
      }
      if ($('[data-type="multiple-choice-template"]').length > 0 && typeof window.localeJson['mcq_ind_corr'] != "undefined" && typeof window.localeJson['mcq_ind_incorr'] != "undefined") {
        $('[data-type="multiple-choice-template"]').find('.multiple-choice .individual-feedback .correct').text(window.localeJson['mcq_ind_corr']);
        $('[data-type="multiple-choice-template"]').find('.multiple-choice .individual-feedback .incorrect').text(window.localeJson['mcq_ind_incorr']);
      }
      if ($('[data-type="true-false-template"]').length > 0 && typeof window.localeJson['mcq_ind_corr'] != "undefined" && typeof window.localeJson['mcq_ind_incorr'] != "undefined") {
        $('[data-type="true-false-template"]').find('.multiple-choice .individual-feedback .correct').text(window.localeJson['mcq_ind_corr']);
        $('[data-type="true-false-template"]').find('.multiple-choice .individual-feedback .incorrect').text(window.localeJson['mcq_ind_incorr']);
      }

      if ($('[data-type="group-interactivity-template"]').length > 0 && typeof window.localeJson['attempted_message'] != "undefined" && typeof window.localeJson['correct_answers'] != "undefined" && typeof window.localeJson['incorrect_answers'] != "undefined" && typeof window.localeJson['partially_correct_answers'] != "undefined") {
        $('[data-type="group-interactivity-template"]').find('[data-localize="attempted_message"]').text(window.localeJson['attempted_message']);
        $('[data-type="group-interactivity-template"]').find('[data-localize="correct_answers"]').text(window.localeJson['correct_answers']);
        $('[data-type="group-interactivity-template"]').find('[data-localize="incorrect_answers"]').text(window.localeJson['incorrect_answers']);
        $('[data-type="group-interactivity-template"]').find('[data-localize="partially_correct_answers"]').text(window.localeJson['partially_correct_answers']);
        $('[data-type="group-interactivity-template"]').find('[data-localize="nextBtnText"]').text(window.localeJson['nextBtnText']);
        $('[data-type="group-interactivity-template"]').find('[data-localize="previousBtnTxt"]').text(window.localeJson['previousBtnTxt']);
      }

      if ($('[data-localize="of"]').length) {
        $('[data-localize="of"]').text(window.localeJson['of']);
      }

      if ($('[data-type="wordsearch"]').length > 0 && typeof window.localeJson['wordsearch_words'] != "undefined") {
        $('[data-type="wordsearch"]').find('.wordsearch .lbl-words').text(window.localeJson['wordsearch_words']);
      }

      /*$('.mcq-submit').attr('data-localize','submit');
      $('.mcq-reset').attr('data-localize','reset_me');
      $('.mcq-show-me').attr('data-localize','show_me');
      $('.mcq-try-again').attr('data-localize','try_again');
      

      $('.imgLabel-submit').attr('data-localize','submit');
      $('.imgLabel-reset').attr('data-localize','reset_me');
      $('.imgLabel-show-me').attr('data-localize','show_me');
      $('.imgLabel-try-again').attr('data-localize','try_again');

      $('.fib-submit').attr('data-localize','submit');
      $('.fib-reset').attr('data-localize','reset_me');
      $('.fib-show-me').attr('data-localize','show_me');
      $('.fib-try-again').attr('data-localize','try_again');

      $('.highLight-submit').attr('data-localize','submit');
      $('.highLight-reset').attr('data-localize','reset_me');
      $('.highLight-show-me').attr('data-localize','show_me');
      $('.highLight-try-again').attr('data-localize','try_again');

      $('.correction-submit').attr('data-localize','submit');
      $('.correction-reset').attr('data-localize','reset_me');
      $('.correction-show-me').attr('data-localize','show_me');
      $('.correction-try-again').attr('data-localize','try_again');

      $('.sorting-submit').attr('data-localize','submit');
      $('.sorting-reset').attr('data-localize','reset_me');
      $('.sorting-show-me').attr('data-localize','show_me');
      $('.sorting-try-again').attr('data-localize','try_again');

      $('.mtp-submit').attr('data-localize','submit');
      $('.mtp-reset').attr('data-localize','reset_me');
      $('.mtp-show-me').attr('data-localize','show_me');
      $('.mtp-try-again').attr('data-localize','try_again');
*/



      if (submitBtns.length > 0 || resetBtns.length > 0 || showMeBtns.length > 0 || tryAgainBtns.length > 0) {
        for (var i = 0; i < submitBtns.length; i++) {
          $(submitBtns[i]).attr('data-localize', 'submit').attr('title', window.localeJson['submit']).html(window.localeJson['submit']);
        }

        for (var i = 0; i < resetBtns.length; i++) {
          $(resetBtns[i]).attr('data-localize', 'reset_me').attr('title', window.localeJson['reset_me']).html(window.localeJson['reset_me']);
        }

        for (var i = 0; i < showMeBtns.length; i++) {
          $(showMeBtns[i]).attr('data-localize', 'show_me').attr('title', window.localeJson['show_me']).html(window.localeJson['show_me']);
        }

        for (var i = 0; i < tryAgainBtns.length; i++) {
          $(tryAgainBtns[i]).attr('data-localize', 'try_again').attr('title', window.localeJson['try_again']).html(window.localeJson['try_again']);
        }
      }



      // $("[data-localize=submit]").attr('title',window.localeJson['submit']).html(window.localeJson['submit']);
      /* $("[data-localize=reset_me]").attr('title',window.localeJson['reset_me']);
       $("[data-localize=reset_me]").html(window.localeJson['reset_me']);*/
      // $("[data-localize=show_me]").attr('title',window.localeJson['show_me']).html(window.localeJson['show_me']);
      // $("[data-localize=try_again]").attr('title',window.localeJson['try_again']).html(window.localeJson['try_again']);
      $('.correction-Strik').attr('title', window.localeJson['strike']);

      /* $('.submit-btn').attr('title',window.localeJson['submit']);
       $('.reset-btn').attr('title',window.localeJson['reset_me']);
       $('.showme-btn').attr('title',window.localeJson['show_me']);
       $('.tryagn-btn').attr('title',window.localeJson['try_again']);
       $('.correction-Strik').attr('title',window.localeJson['strike']);*/
    } else {
      /*$('.mcq-submit').html('Submit');
    $('.mcq-reset').html('Reset');
    $('.mcq-show-me').html('Show Me');
    $('.mcq-try-again').html('Try Again');

    $('.imgLabel-submit').html('Submit');
    $('.imgLabel-reset').html('Reset');
    $('.imgLabel-show-me').html('Show Me');
    $('.imgLabel-try-again').html('Try Again');

    $('.fib-submit').html('Submit');
    $('.fib-reset').html('Reset');
    $('.fib-show-me').html('Show Me');
    $('.fib-try-again').html('Try Again');

    $('.highLight-submit').html('Submit');
    $('.highLight-reset').html('Reset');
    $('.highLight-show-me').html('Show Me');
    $('.highLight-try-again').html('Try Again');

    $('.correction-submit').html('Submit');
    $('.correction-reset').html('Reset');
    $('.correction-show-me').html('Show Me');
    $('.correction-try-again').html('Try Again');

    $('.sorting-submit').html('Submit');
    $('.sorting-reset').html('Reset');
    $('.sorting-show-me').html('Show Me');
    $('.sorting-try-again').html('Try Again');

    $('.mtp-submit').html('Submit');
    $('.mtp-reset').html('Reset');
    $('.mtp-show-me').html('Show Me');
    $('.mtp-try-again').html('Try Again');*/

      if (submitBtns.length > 0 || resetBtns.length > 0 || showMeBtns.length > 0 || tryAgainBtns.length > 0) {
        for (var i = 0; i < submitBtns.length; i++) {
          $(submitBtns[i]).html('Submit');
        }

        for (var i = 0; i < resetBtns.length; i++) {
          $(resetBtns[i]).html('Reset');
        }

        for (var i = 0; i < showMeBtns.length; i++) {
          $(showMeBtns[i]).html('Show Me');
        }

        for (var i = 0; i < tryAgainBtns.length; i++) {
          $(tryAgainBtns[i]).html('Try Again');
        }
      }
    }
  };
  setTimeout(function () {
    onLocalizationLoad();
  }, 500);

  var videoPreload = function () {
    /*****Set height to video as per resolution as not preloaded*******/
    $('video').each(function () {
      if ($(this).attr('data-resolution') && !$(this).attr('data-setup').match(/(width|height)/)) {
        $(this).parent().css('height', $(this).width() / $(this).attr('data-resolution'));
      }

    });
  }
  var audiovideoREsourcing = function () {
    $('video').each(function () {
      $(this).parent().removeClass('vjs-controls-disabled').css({
        'z-index': '99'
      });
      if ($(this).attr('src') == 'undefined' || $(this).attr('src') === undefined || $(this).attr('src') == "") {
        var temp = $(this).attr('data-Correct') || $(this).attr('data-videosrc');
        $(this).attr('src', temp);
        $(this).find('source').attr('src', temp);
      }
    });
    $('audio').each(function () {
      if ($(this).attr('src') == 'undefined' || $(this).attr('src') === undefined || $(this).attr('src') == "") {
        var temp = $(this).parents('.audio-source').attr('data-Correct') || $(this).attr('data-audiosrc');
        $(this).attr('src', temp);
        $(this).find('source').attr('src', temp);
      }
    });
    if ($('audio').length) {
      audiojs.events.ready(function () {
        var as = audiojs.createAll();
      });
    }
    setTimeout(() => {
      $('.auth-equation-holder').each(function (i) {
        $(this).empty();
        setLatexData(this, $(this).attr('data-equation-latex'));
        if ($(this).parents(".component-holder") && $(this).parents(".component-holder").hasClass("drag-and-drop")) {
          setTimeout(() => {
            let hgt = $(this).height() + 20;
            let wdt = $(this).width() + 20;
            $(this).parents('.form-control-wrap').height(hgt).css('min-width', wdt);
            if ($(this).parents('.form-control-wrap').attr('datadragwidth') !== undefined) {
              $(this).parents('.form-control-wrap').css('width', $(this).parents('.form-control-wrap').attr('datadragwidth'))
            } else {
              $(this).parents('.form-control-wrap').css('width', 'auto')
            }
          }, 1000);
        }
      });
    }, 1000);
  }

  function setLatexData(mathHolder, encodedString) {
    decodedLatex = JSON.parse(decodeURIComponent(encodedString)).latex;
    $(mathHolder).text(decodedLatex);
    temml.render(decodedLatex, mathHolder);
  }
  if (navigator.userAgent.match(/(iPad)/i)) {
    /****Do not preload videos to fix loader not disappearing issue in kitaboo/docketzoom readers in ios9*******/
    setTimeout(function () {
      videoPreload()
    })
  } else {
    $('video').attr('preload', 'auto');
  }
  /***********layout media query fix in two page mode Readium *******************/
  var loadHtmlCss = setInterval(function () {
    // audiovideoREsourcing();
    if ($('html').css('column-count') === '2') {
      $('html').addClass('readium-multiple-column');
      clearInterval(loadHtmlCss);
    }
  }, 100);
  setTimeout(function () {
    clearInterval(loadHtmlCss);
    // audiovideoREsourcing();
  }, 3000);
  /***********layout media query fix in two page mode Readium *******************/
  var zoomEnabledImages = $('img + .color-box-icon').prev('img');
  $('.color-box-icon').remove();
  zoomEnabledImages.addClass('color-box-icon');
  if ($('.container-fluid').length === 0) {
    $('script[type="math/mml"]').contents().unwrap();
  }

  // $('.mcq-submit').off('click').click(function(event){
  //   event.preventDefault();
  //   var $eventTarget = $(event.target),
  //     $form = $eventTarget.parents('form'),
  //     attempts = $eventTarget.data('attempts'),
  //     isCustom = false,
  //     isAllCorrectIncluded = false,
  //     totalAttempts = $eventTarget.data('no-of-attempts') ? Number($eventTarget.data('no-of-attempts')): 1;
  //   attempts ? attempts++ : attempts = 1;

  //   if($form.find('input[iscorrect=true]').length === $form.find('.checked input[iscorrect=true]').length){
  //     attempts = totalAttempts;
  //     isAllCorrectIncluded = true;
  //   }
  //   isCustom = $form.find('.mcq-try-again:visible').length;
  //   if(attempts === totalAttempts || isCustom) {
  //     // $form.find('.checked').parents('.form-row').find(".individual-feedback").css({'display':'block'});
  //     $form.find('.checked').parents('.form-row').removeClass('green-border').addClass('red-border');
  //     $form.find('.checked input[iscorrect=true]').parents('.form-row').removeClass('red-border').addClass('green-border');
  //     $form.find('input').prop('disabled',true);
  //     $form.find('ins').css('cursor', 'default');
  //     // $form.find(".mcq-show-me").removeClass('disabled');
  //     if($form.find('.red-border').length !== 0 && $eventTarget.data('no-of-attempts') && !isCustom && totalAttempts!==1 && !isAllCorrectIncluded) {
  //       Example.show("That's incorrect, this was your last attempt.", '', $form,'incorrect_last_try');

  //     }
  //     if($form.find('.green-border').length !== 0) {
  //       // Example.show("That's incorrect, this was your last attempt.", '', $form,'incorrect_last_try');
  //       Example.show('This is correct','',$form,'correct');
  //     }
  //     if($form.find('.red-border').length !== 0 && isCustom == true) {
  //       Example.show('Please try again', '', $form, 'incorrect_message');
  //     }
  //   }else{
  //     var correctInput = $form.find('.checked input[iscorrect=true]');
  //     $form.trigger('reset');
  //     $form.find('input').iCheck('update');
  //     $(correctInput).iCheck('check').parents('.form-row').addClass('green-border');
  //     $(correctInput).prop('disabled',true);
  //     $form.find('.checked').find('ins').css('cursor', 'default');
  //     // $form.find('.checked').parents('.form-row').find(".individual-feedback").css({'display':'block'});
  //     Example.show('Please try again', '', $form, 'incorrect_message');

  //   }
  //   $form.find('.mcq-try-again').removeClass('disabled');
  //   $eventTarget.data('attempts',attempts).addClass('disabled');
  //   $form.find(".reset").addClass('disabled');



  // });
  // $('.mcq-show-me').off('click').click(function(event){
  //   event.preventDefault();
  //   var $form = $(event.target).parents('form');
  //   $form.find('input').prop('disabled',false);
  //   $form.find('input').prop("checked",false);
  //   $form.find('input').removeAttr('checked').iCheck('update');

  //   $form.find('input[iscorrect=true]').prop( "checked", true );
  //   $form.find('input[iscorrect=true]').iCheck('update');
  //   $form.find('input[iscorrect=true]').iCheck('check');

  //   $form.find('input').prop('disabled',true);
  //   $form.find('.mcq-submit,.mcq-try-again,.mcq-show-me,.reset').addClass('disabled');
  //   $form.find('.green-border').removeClass('green-border');
  //   $form.find('input[iscorrect=true]').parents('.form-row').addClass('green-border');
  //   $form.find(".individual-feedback").css({'display':'none'});
  //   // $form.find('.green-border').find(".individual-feedback").css({'display':'block'});
  //   // $form.find('.red-border').find(".individual-feedback").css({'display':'none'});
  //   Example.show('This is correct','',$form,'correct');
  //   $form.find('.red-border').removeClass('red-border');
  //   //$form.find('.mcq-options').removeClass('mcq-options');
  // });
  // $('.mcq-try-again').off('click').click(function(event){
  //   event.preventDefault();
  //   var $form = $(event.target).parents('form');
  //   $form.trigger('reset');
  //   $form.find('input').prop('disabled',false);
  //   $form.find('input').iCheck('update');
  //   $form.find('.mcq-body').removeClass('add-individual-feedback');
  //   $form.find('.form-row').find(".individual-feedback").css({'display':'none'});
  //   $form.find('.mcq-submit,.mcq-try-again').addClass('disabled');
  //   $form.find('.mcq-submit').data('attempts', '');
  //   $form.find('.red-border,.green-border').removeClass('red-border green-border');
  //   $form.find('ins').css('cursor', 'pointer');
  // });

  // $('.mcq-submit,.fib-submit,.mtp-try-again,.mtp-submit,.highLight-try-again,.reset,.highLight-reset,.correction-reset,.sorting-reset,.imgLabel-reset,.mtp-reset').addClass('disabled');



  // $('.fib-show-me').off('click').click(function(event){
  //   event.preventDefault();
  //   var $form = $(event.target).parents('form');
  //   $form.find('input,select').prop('disabled',true);
  //   $form.find('select').easyDropDown('disable');
  //   $form.find('.fib-submit,.fib-try-again,.fib-show-me,.reset').addClass('disabled');
  //   var rows = $form.find('.form-row'),
  //           blanks,
  //           rowCounter,
  //           correctAnswer,
  //           blankCounter;
  //       for (rowCounter = 0; rowCounter < rows.length; rowCounter++) {
  //           blanks = $(rows[rowCounter]).find('.js-form-row');
  //           for(blankCounter = 0; blankCounter < blanks.length; blankCounter++) {
  //             if($form.find('.fib-body').hasClass('with-option-body')) {
  //                 correctAnswer = $(blanks[blankCounter]).find('select').data('correctoption-index');
  //                 $(blanks[blankCounter]).find('select')[0].selectedIndex = correctAnswer + 1;
  //                 $(blanks[blankCounter]).find('select').easyDropDown('select' , correctAnswer + 1);
  //                 $(blanks[blankCounter]).find('select,.selected').removeClass('incorrect').addClass('correct').prop('disabled',true);
  //                 $(blanks[blankCounter]).find('.incorrect-tick').removeClass('incorrect-tick icon-Close').addClass('correct-tick icon-Check');
  //                 //$(blanks[blankCounter]).find('.hide-carat').removeClass('hide-carat');
  //               } else {
  //                 correctAnswer = String($(blanks[blankCounter]).find('input').data('correct-answer'));
  //                 $(blanks[blankCounter]).find('input').val(correctAnswer);
  //                 $(blanks[blankCounter]).find('input').removeClass('incorrect').addClass('correct').prop('disabled',true);
  //                 $(blanks[blankCounter]).find('.form-control-wrap').removeClass('incorrect-attempt').addClass('correct-attempt');
  //                 $(blanks[blankCounter]).find('.incorrect-tick').removeClass('incorrect-tick icon-Close').addClass('correct-tick icon-Check');
  //               }
  //           } 
  //       }
  // });
  // $('.fib-try-again').off('click').click(function(event){
  //   event.preventDefault();
  //   var $form = $(event.target).parents('form');
  //   $form.trigger('reset');
  //   $form.find('input,select').prop('disabled',false);
  //   $form.find('.hide-carat').removeClass('hide-carat');
  //   $form.find('select').easyDropDown('enable');
  //   $form.find('input,select').prop('disabled',false);
  //   $form.find('.selectbox li').removeClass('active');
  //   $form.find('.fib-submit,.fib-try-again').addClass('disabled');
  //   $form.find('.fib-submit').data('attempts', '');
  //   $form.find('.correct,.incorrect').removeClass('correct incorrect');
  //   $form.find('.correct-tick,.incorrect-tick').remove();
  //   $form.find('.correct-attempt,.incorrect-attempt').removeClass('correct-attempt incorrect-attempt');
  //   if(window.localeJson){
  //         if($('.fib-with-option .selectbox').length > 0) {
  //           $.each($('.fib-with-option .selectbox'),function(index, obj){
  //             $($(obj).find('span.selected')[0]).text(window.localeJson['select_answer']);
  //             $($(obj).find('ul li')[0]).text(window.localeJson['select_answer']);
  //           });
  //         }
  //       }
  // });

  // $('.fib-submit').off('click').click(function(event){
  //   click=true;
  //   event.preventDefault();
  //   var $eventTarget = $(event.target),
  //     $form = $eventTarget.parents('form'),
  //     attempts = $eventTarget.data('attempts'),
  //     isCustom = false,
  //     isAllCorrectIncluded = false,
  //     totalAttempts = $eventTarget.data('no-of-attempts') ? Number($eventTarget.data('no-of-attempts')): 1;
  //   attempts ? attempts++ : attempts = 1;

  //   isCustom = $form.find('.fib-try-again:visible').length;
  //   $form.find('.correct,.incorrect').removeClass('correct incorrect');
  //   $form.find('.correct-tick,.incorrect-tick').remove();
  //     var rows = $form.find('.form-row'),
  //           blanks,
  //           rowCounter,
  //           correctAnswer,
  //           blankCounter,
  //           currenrAnswer,
  //           isWithOption = false,
  //           selector;
  //   if($form.find('.fib-body').hasClass('with-option-body')) {
  //     isWithOption = true;
  //     selector = 'select,.selected';
  //   } else {
  //     selector = 'input';
  //   }
  //   for (rowCounter = 0; rowCounter < rows.length; rowCounter++) {
  //           blanks = $(rows[rowCounter]).find('.js-form-row');
  //           for(blankCounter = 0; blankCounter < blanks.length; blankCounter++) {
  //             if(isWithOption) {
  //               correctAnswer = $(blanks[blankCounter]).find(selector).data('correctoption-index') + 1;
  //               currenrAnswer = $(blanks[blankCounter]).find(selector)[0].selectedIndex;
  //             } else {
  //               correctAnswer = String($(blanks[blankCounter]).find(selector).data('correct-answer'));
  //               correctAnswer = correctAnswer.trim();
  //               currenrAnswer = $(blanks[blankCounter]).find(selector).val();
  //             }
  //               $(blanks[blankCounter]).find('.carat').addClass('hide-carat');
  //               if(correctAnswer === currenrAnswer) {
  //                   $(blanks[blankCounter]).find(selector).addClass('correct').prop('disabled',true);
  //                   $(blanks[blankCounter]).find('select').easyDropDown('disable');
  //                   $(blanks[blankCounter]).find('.form-control-wrap').append('<span class="correct-tick icon-Check" style="position:absolute;"></span>').addClass('correct-attempt');
  //               } 
  //               else {
  //                   if(isWithOption) {
  //                     if(correctAnswer !== currenrAnswer){
  //                       $(blanks[blankCounter]).find(selector).addClass('incorrect');
  //                       $(blanks[blankCounter]).find('.form-control-wrap').append('<span class="incorrect-tick icon-Close" style="position:absolute;"></span>').addClass('incorrect-attempt');
  //                     }
  //                   }else{
  //                       var temp1=true;
  //                       if(currenrAnswer.split("/;").length>1){
  //                         var temp=correctAnswer.split("/;");
  //                         var ans=temp[0].trim();
  //                         temp.forEach(function(val, key) {
  //                           if(key>0){
  //                             temp[key]=val.trim();
  //                             ans=ans+'/;'+temp[key];
  //                           }
  //                         });

  //                         var tempp=currenrAnswer.split("/;");
  //                         var ans1=tempp[0].trim();
  //                         tempp.forEach(function(val, key) {
  //                           if(key>0){
  //                             ans1=ans1+'/;'+val.trim();
  //                           }
  //                         });
  //                         if(ans===ans1 && temp1===true){
  //                           temp1=false;
  //                           $(blanks[blankCounter]).find(selector).addClass('correct').prop('disabled',true);
  //                           $(blanks[blankCounter]).find('select').easyDropDown('disable');
  //                           $(blanks[blankCounter]).find('.form-control-wrap').append('<span class="correct-tick icon-Check" style="position:absolute;"></span>').addClass('correct-attempt');
  //                         }
  //                       }
  //                       var temp=correctAnswer.split("/;");
  //                       temp.forEach(function(val, key) {
  //                         if(val.trim()===currenrAnswer.trim() && temp1===true){
  //                             temp1=false;
  //                             $(blanks[blankCounter]).find(selector).addClass('correct').prop('disabled',true);
  //                             $(blanks[blankCounter]).find('select').easyDropDown('disable');
  //                             $(blanks[blankCounter]).find('.form-control-wrap').append('<span class="correct-tick icon-Check" style="position:absolute;"></span>').addClass('correct-attempt');
  //                         }

  //                       });
  //                       if(correctAnswer !== currenrAnswer && temp1===true){
  //                           $(blanks[blankCounter]).find(selector).addClass('incorrect');
  //                           $(blanks[blankCounter]).find('.form-control-wrap').append('<span class="incorrect-tick icon-Close" style="position:absolute;"></span>').addClass('incorrect-attempt');
  //                       }
  //                       temp1=true;
  //                   }

  //               }

  //           }
  //       }
  //   if($form.find('.incorrect').length === 0) {
  //     attempts = totalAttempts;
  //     isAllCorrectIncluded = true;
  //     $form.find('.reset').addClass('disabled');
  //   }
  //   if(attempts === totalAttempts || isCustom) {
  //     $form.find(selector).prop('disabled',true);
  //     $form.find('select').easyDropDown('disable');
  //     $form.find('.fib-submit').addClass("disabled");
  //     // $form.find('.fib-show-me').removeClass('disabled');

  //     if($form.find('.incorrect').length !== 0 && $eventTarget.data('no-of-attempts') && !isCustom && totalAttempts!==1 && !isAllCorrectIncluded) {
  //       Example.show("That's incorrect, this was your last attempt.", '', $form,'incorrect_last_try');
  //     }
  //   } else {
  //     Example.show('Please try again', '', $form, 'incorrect_message');
  //   }
  //   $form.find('.fib-try-again').removeClass("disabled");
  //   $form.find('.reset').removeClass("disabled");
  //   $eventTarget.data('attempts',attempts).addClass('disabled');
  //   $form.find('.reset').addClass('disabled'); 

  // });
  //   $('.form-row .icheck').on('ifChecked', function(event) {
  //   var $form = $(event.target).parents('form');
  //   var color=$(event.target).parents('.component-holder').css('border-color');
  //   if($(event.target).parents('.component-holder').hasClass('mcq_full_bleed_style2')){
  //      var color = color.replace(")", ",5%)");
  //    $(event.target).parents('.form-row').css('background-color', color);
  //   }else if($(event.target).parents('.component-holder').hasClass('card-style2')||$(event.target).parents('.component-holder').hasClass('mcq_full_bleed_style1')){
  //    $(event.target).parents('.form-row').css({'border-color': color ,'box-shadow':'0px 0px 3px'});
  //   }
  //   });
  // $('.form-row .icheck').on('ifUnchecked', function(event) {
  //   var $form = $(event.target).parents('form');
  //    $(event.target).parents('.form-row').css({'background-color': "" , 'box-shadow':'','border-color': ''});
  // });
  // setTimeout(function() {
  //   $('.fib .form-row input').removeAttr('disabled');
  // }, 1000);
  // $('.fib .form-row input').on('keyup', function(event) {
  //   if(event.keycode==13){
  //     event.preventDefault();
  //   }
  //   var $eventTarget = $(event.target),
  //     $form = $eventTarget.parents('form'),
  //     $inputs = $form.find('input');
  //   $form.find('.incorrect-tick').remove();
  //   $form.find('.incorrect-attempt').removeClass('incorrect-attempt');
  //   for(var i = 0; i < $inputs.length; i++) {
  //     if($($inputs[i]).val().trim() === '') {
  //       $form.find('.fib-submit').addClass('disabled');
  //       $form.find('.reset').removeClass('disabled');
  //       return;
  //     }
  //   }
  //   $form.find('.fib-submit').removeClass('disabled');
  //   $form.find('.reset').removeClass('disabled');

  // });
  //   $('.fib .form-row select').on('change', function(event) {
  //     var $eventTarget = $(event.target),
  //       $form = $eventTarget.parents('form'),
  //       $inputs = $form.find('select');
  //     if($eventTarget.prop('disabled')) {
  //       return;
  //     }
  //     $form.find('.incorrect-tick').parents('.form-control-wrap').find('.hide-carat').removeClass('hide-carat');
  //     $form.find('.incorrect-tick').remove();
  // if(event.currentTarget.selectedIndex == 0) {
  //     if(window.localeJson)
  //     $($(event.currentTarget).parents('.selectbox').find('span.selected')[0]).text(window.localeJson['select_answer']);
  //     else{
  //       $($(event.currentTarget).parents('.selectbox').find('span.selected')[0]).text("Select Answer");
  //     }
  // }
  //     for(var i = 0; i < $inputs.length; i++) {
  //       if($($inputs[i])[0].selectedIndex === 0) {
  //         $form.find('.fib-submit').addClass('disabled');
  //         $form.find('.reset').removeClass('disabled');

  //         return;
  //       }
  //     }
  //     $form.find('.fib-submit').removeClass('disabled');
  //     $form.find('.reset').removeClass('disabled');

  //   });
  var compareTwoArrays = function (array1, array2) {
    if (array1.length !== array2.length) {
      return false;
    }
    for (var i = 0; i < array1.length; i++) {
      if (array1[i] !== array2[i]) {
        return false;
      }
    }
    return true;
  };

  var getCurrentAnswerArray = function (currentElement) {
    var currArray = [];
    currentElement.find('.checked').each(function (index, value) {
      currArray.push($(value).parents('.form-row').find('.mcq-options').html());
    });
    return currArray;
  };

  var getCorrectAnswerArray = function ($form) {
    if (typeof $form.parents('.col-sm-12').data('mcq-answers') === 'number') {
      return ($form.parents('.col-sm-12').data('mcq-answers') + '').split(',');
    } else {
      return $form.parents('.col-sm-12').data('mcq-answers').split(',');
    }
  };

  var slider_pager_width = function (isResize) {
    setTimeout(function () {
      resizeSlideHeight();
      $(".youtube-padding").each(function (i) {
        const iframe = $(this)[0];
        if (iframe.src) {
            const targetOrigin = new URL(iframe.src).origin;
            iframe.contentWindow.postMessage(
                JSON.stringify({
                    event: "command",
                    func: "pauseVideo",
                    args: ""
                }),
                targetOrigin
            );
        }
      });
    });
   
    var slideshowTemplates = $('.slideshow , .flashcard');
    $.each(slideshowTemplates, function (index, value) {
      var pager_width = $(value).find('.bx-pager').width(),
        pager_length = $(value).find('.bx-pager .bx-pager-item').length,
        pager_item_width = Math.floor(pager_width / pager_length);
      if (isResize && sliders[index]) {
        sliders[index].settings.startSlide = sliders[index].slider.getCurrentSlide();
        sliders[index].slider.reloadSlider(sliders[index].settings);
        // $(value).find('.bx-controls-direction div').css('position','absolute').attr('href', '#/');
        $(value).find('.bx-controls-direction div').css('position', 'absolute');
      }
      $(value).find('.bx-pager-item').css('width', pager_item_width);
    });
  };

  var highlightOptions = function (currentElement, correctAnswer) {
    currentElement.find('.checked').parents('.form-row').removeClass('green-border').addClass('red-border');
    currentElement.find('.checked input[data-iscorrect=true]').parents('.form-row').removeClass('red-border').addClass('green-border');
  };

  $('.bxslider-container').addClass('previewSlider');

  // $('.slider ul').css('padding','0');
  var sliders = [];

  function initSliders(targetSlider, targetPager, index, customOptionsAutoSlide, customOptionsPauseDuration) {
    if (typeof customOptionsAutoSlide == "undefined") {
      customOptionsAutoSlide = false;
    } else {
      customOptionsAutoSlide = (customOptionsAutoSlide == 'true')
    }
    if (typeof customOptionsPauseDuration == "undefined") {
      customOptionsPauseDuration = 3;
    } else {
      customOptionsPauseDuration = parseInt(customOptionsPauseDuration);
    }
    if ($(targetSlider).parents(".slideShowFullBleed").length > 0) {
      $(targetSlider).parents(".customClass").addClass("full-bleed");
    }
    $(targetPager).css("display", "block");
    sliders[index] = {};
    sliders[index].settings = {
      infiniteLoop: customOptionsAutoSlide ? true : false,
      hideControlOnEnd: true,
      pager: true,
      mode: 'horizontal',
      useCSS: false,
      speed: 500,
      auto: customOptionsAutoSlide,
      pause: customOptionsPauseDuration * 1000,
      nextText: '',
      prevText: '',
      pagerType: 'short',
      ariaLive: true,
      ariaHidden: true,
      adaptiveHeight: true,
      onSlideAfter: function () {
        $(this).parents(".component-holder.slideshow").find('.bx-controls-direction').removeClass("pointerEventNone");
      },
      onSlideBefore: function ($slideElement, oldIndex, newIndex) {

        var cardlength = $(this).parents('.customClass').find('.card').length;
        var width = (100 / cardlength) * (newIndex + 1);
        $(this).parents('.customClass').find('.Style2Progress').css('width', width + '%');
        if (width == 100) {
          $(this).parents('.customClass').find('.Style2Progress').css('border-top-right-radius', '10px');
        } else {
          $(this).parents('.customClass').find('.Style2Progress').css('border-top-right-radius', '0');
        }

        $(this).parents(".component-holder.slideshow").find('.bx-controls-direction').addClass("pointerEventNone");
        $slideElement.parents('.bxslider').find('video').trigger('pause');
        $slideElement.parents('.bxslider').find(".youtube-padding").each(function (i) {
          if (typeof $(this)[i] != "undefined" && typeof $(this)[i].contentWindow != "undefined") {
            const iframe = this;
            if (iframe?.contentWindow) {
                    const targetOrigin = new URL(iframe.src).origin;
                    iframe.contentWindow.postMessage(
                        JSON.stringify({
                            event: "command",
                            func: "pauseVideo",
                            args: ""
                        }),
                        targetOrigin
                    );
            } 
          }
        });
      },
      onSliderLoad: function () {
        slider_pager_width();
        $('.slider .bx-viewport').css({
          'overflow': ''
        });

        var arrData = $('.slider .bx-viewport');
        $.each(arrData, function (index, obj) {
          var bxViewportHt = $(obj).height() - 50;
          // $(obj).find('.video-js').css('max-height','unset');
          // $(obj).find('.video-js').find('video').css('max-height','unset');
          // $(obj).find('.video-js').find('video').css('min-height','412px');
          // $(obj).css('min-height','412px');
          // $(obj).find('.video-js').css('min-height','412px');
          $(obj).find('.video-js').css('font-size', 'x-small');
        });
        // $('.slider .bx-viewport .video-js').css('max-height',$('.slider .bx-viewport').height() - 50);
        $(window).load(function () {
          //console.log("Window load");

          $(window).trigger('resize');

        });
        // $('.slideshow[data-asset-color]').each(function(index, value) {
        //  var assetcolor=$(this).attr('data-asset-color');
        //   if($(".component-holder").hasClass("slideshow-style-2")){
        //        $(this).find('.bx-pager').css('background-color',assetcolor);  
        //        $(this).find('.bx-controls-direction').find('.bx-prev.disabled').css('color', '#cccccc'); 
        //        $(this).find('.bx-controls-direction').find('.bx-next').css('color','white'); 
        //        }
        //        else{
        //         $(this).find('.bx-controls-direction').find('.bx-prev').css('color',assetcolor);  
        //         $(this).find('.bx-controls-direction').find('.bx-next').css('color',assetcolor); 
        //       }
        // });
        var assetcolor = $(targetSlider).parents(".customClass").find(".slideshow").attr('data-asset-color');
        if ($(targetSlider).parents(".customClass").find(".slideshow").hasClass("style-1")) {
          $(targetSlider).parents(".customClass").find('.bx-pager.bx-default-pager').css('background-color', "");
          $(targetSlider).parents(".customClass").find('.bx-controls-direction').find('.bx-prev, .bx-next').css('color', assetcolor);
          if (assetcolor == "transparent") {
            $(targetSlider).parents(".customClass").find('.bx-controls-direction').find('.bx-prev, .bx-next').css('color', "");
          }
        } else if ($(targetSlider).parents(".customClass").find(".slideshow").hasClass("style-2")) {
          $(targetSlider).parents(".customClass").find('.bx-pager.bx-default-pager').css('background-color', assetcolor);
          $(targetSlider).parents(".customClass").find('.bx-controls-direction').find('.bx-prev, .bx-next').css('color', "");
        } else if ($(targetSlider).parents(".customClass").find(".slideshow").hasClass("style-3")) {
          $(targetSlider).parents(".customClass").find('.bx-pager.bx-default-pager').css('background-color', "");
          $(targetSlider).parents(".customClass").find('.bx-controls-direction').find('.bx-prev, .bx-next').css('color', assetcolor);
          if (assetcolor == "transparent") {
            $(targetSlider).parents(".customClass").find('.bx-controls-direction').find('.bx-prev, .bx-next').css('color', "");
          }
        }
      }
    };
    // $(targetSlider).destroySlider();
    sliders[index].slider = $(targetSlider).bxSlider(sliders[index].settings);
    if (sliders[index].slider && typeof sliders[index].slider.redrawSlider === 'function') {
      sliders[index].slider.redrawSlider();
    }
    //sliders[index].slider.redrawSlider();

  }

  $('[data-type="slideshow"] .slider').each(function (index, value) {
    var targetSlider = "#" + $(this).find('.bxslider').attr('id');
    var targetPager = "#" + $(this).parent().find('.bx-pager-custom').attr('id');
    $(targetSlider).bxSlider = "";
    $(targetPager).bxSlider = "";
    $(targetPager).addClass('bx-pager')
    //console.log(targetSlider, targetPager, $(this));
    initSliders(targetSlider, targetPager, index, $(this).attr('data-options-autoslide'), $(this).attr('data-options-pauseduration'));
  });

  $('[data-type="flashcard"] .slider').each(function (index, value) {
    var targetSlider = "#" + $(this).find('.bxslider').attr('id');
    var targetPager = "#" + $(this).parent().find('.bx-pager-custom').attr('id');
    $(targetSlider).bxSlider = "";
    $(targetPager).bxSlider = "";
    $(targetPager).addClass('bx-pager')
    //console.log(targetSlider, targetPager, $(this));
    initSliders(targetSlider, targetPager, index, $(this).attr('data-options-autoSlide'), $(this).attr('data-options-pauseDuration'));
  });

  // $('.bx-controls-direction div').css('position','absolute').attr('href', '#/');
  $('.bx-controls-direction div').css('position', 'absolute');


  slider_pager_width();

  var Example = (function () {
    "use strict";

    var that = {};

    that.show = function (text, className, parent, localized_name) {
      var elem = $.parseHTML('<div class="inline-alert"><span>' + text + '</span></div>');
      $(parent).append(elem);
      $(parent).find('.inline-alert span').attr('data-localize', '["' + localized_name + '"]');
      if (window.localeJson) {
        $(parent).find('.inline-alert span').text(window.localeJson[localized_name]);
      }
      $(elem).delay(200).fadeIn().delay(1500).fadeOut(function () {
        $(elem).remove()
      });
    };

    return that;
  }());

  var adjustHeroheaderHeight = function () {
    $('[chapter-heading-template]').each(function (index, value) {
      if ($(value).hasClass('image-masked')) {
        var height = $(value).width() / $(value).find('.chapter-heading-h1').attr('data-mask-ratio'),
          bgSize = '100%';
        $(value).css({
          'min-height': height,
          'height': height
        });
        if ($(value).find('.chapter-heading-h1').height() > height) {
          $("<img>").attr("src", $(value).find('.chapter-heading-h1').css('background-image').replace('url(', '').replace(')', '').replace(/"/g, '')).load(function () {
            var originalBgY = $(value).width() * (this.height / this.width);
            var newBgy = originalBgY * ($(value).height() / height);
            $(value).find('.chapter-heading-h1').css('background-size', bgSize + ' ' + newBgy + 'px');
          })
        } else {
          $(value).find('.chapter-heading-h1').css('background-size', bgSize);
        }
        return;
      }
      // if(!$(value).attr('data-max-width')) {
      //  $(value).attr('data-max-width', $(value).height()); 
      // }
      if ($(value).find('.chapter-heading-h1').css('background-image') !== 'none') {
        $("<img>").attr("src", $(value).find('.chapter-heading-h1').css('background-image').replace('url(', '').replace(')', '').replace(/"/g, '')).load(function () {
          var height,
            widthPerc;
          if ($(value).find('.chapter-heading-h1').css('background-size') !== '100% 100%') {
            widthPerc = $(value).width() * Number($(value).find('.chapter-heading-h1').css('background-size').replace('%', '')) / 100;
          } else {
            widthPerc = $(value).width();
          }
          height = widthPerc * this.height / this.width;
          // if($(value).attr('data-max-width')) {
          //  height > $(value).attr('data-max-width') ? height = $(value).attr('data-max-width'): '';
          // }
          $(value).css({
            'min-height': height,
            'height': height
          });
        });
      }
    });
  }
  var adjustInlineHtmlPayerSize = function () {
    var inlinePlayContainer,
      htmldefaultContent;
    $('.html-interactivity').each(function (index, value) {
      inlinePlayContainer = $(value).find('.inline-play-container');
      htmldefaultContent = $(value).find('.html-interactive-content');
      if (inlinePlayContainer.length !== 0 && !inlinePlayContainer.hasClass('hide-img')) {
        htmldefaultContent.removeClass('hide-img');
        inlinePlayContainer.addClass('hide-img');
        inlinePlayContainer.css('width', htmldefaultContent.css('width'));
        inlinePlayContainer.css('height', htmldefaultContent.css('height'));
        htmldefaultContent.addClass('hide-img');
        inlinePlayContainer.removeClass('hide-img');
      }
    });
  }
  var defaultSidebarView = function () {
    // $('.asidebar input').prop('checked', false);
    $('.asidebar').each(function (index, value) {
      if ($(value).find('.toggle-box + label + p').css('visibility') !== 'visible') {
          if ($(value).find('input').prop('checked')) {
              $(value).find('input').prop('checked', true);
          }
      }
    });
  }
  // adjustHeroheaderHeight();
  defaultSidebarView();

  function iframeMessage(event) {
    if(window.origin !== event.origin) {
      return;
    }
    if (typeof event.data == "object") {
      var objData = {
        'submit': '.submit-btn',
        'reset': '.reset-btn',
        'show_me': '.showme-btn',
        'try_again': '.tryagn-btn'
      }
      if (event.data.buttonData != undefined) {
        $.each(event.data.buttonData, function (index, element) {
          if (objData.hasOwnProperty(index)) {
            if (element) {
              $(objData[index]).attr("style", "display: inline-block !important");
            } else {
              $(objData[index]).attr("style", "display: none !important");
            }
          }
        });
      }
      $(window).trigger("resize");
      savesuspendData = event.data.sccomData;
    }
    $('.white_center_bg_main').css('overflow', 'hidden !important');
  }

  window.addEventListener("message", receiveMessage, false);

  function receiveMessage(event) {  
    
    const allowedOrigins = [window.location.origin]; // Replace with your allowed origins
    if (!allowedOrigins.includes(event.origin)) {
        console.warn("Blocked message from unauthorized origin:", event.origin);
        return; // Stop processing if origin is not allowed
    }

    if(isValidJSON(event.data)){
        if (typeof event.data == "string" && !(JSON.parse(event.data).event == 'infoDelivery' || JSON.parse(event.data).event == 'apiInfoDelivery')) {
          setTimeout(function () {
            slider_pager_width(true);
            if (navigator.userAgent.match(/(iPad)/i)) {
              videoPreload();
            }
            // audiovideoREsourcing();
          });

          var debounced = check.debounce(50);
          $(window).on('scroll', debounced);
          // adjustHeroheaderHeight();
          adjustInlineHtmlPayerSize();
          defaultSidebarView();
      }
    }
    else if(event.data.message === "SampleAnswersLayer") {
      document.querySelectorAll('[data-sampletaginfo]').forEach(el => {
          console.log(el);
          try {
              let data = JSON.parse(el.getAttribute('data-sampletaginfo').replace(/&quot;/g, '"'));
              
              if (data.Sample_Answers && data.Sample_Answers.includes("On")) {
                  console.log("Found matching element:", el);
                  
                  let $questionContainer = $(el).closest('.question-container');
                  let identifire = $($questionContainer).find('.customClass').attr('data-type');
                  if(event.data.enableSampleAnswers) {
                    findTemplateForSampleLayerSupport(identifire,$questionContainer);
                      $questionContainer.show();
                  }else {
                    if( identifire=='multiple-choice-template'){
                      RemoveSampleLayerFromTemplate(identifire,$questionContainer);
                    }
                    else{
                      $questionContainer.hide();
                    }
                      
                  }
              }
          } catch (error) {
              console.error("Error parsing data-sampletaginfo:", error);
          }
      });
    }
  
    else if(event.data.message == "tigEnable"){
      console.log("tig Enable --",event.data);
    }
  }

  function isValidJSON(data) {
    try {
        JSON.parse(data);
        return true;
    } catch (e) {
        return false;
    }
}

  
  try {
    if (window.client == 'CL' || window.parent.client == 'CL') {
      window.parent.addEventListener("message", receiveMessageFromIFream, false);
    }
  } catch (error) {
    if (error instanceof DOMException) {
      console.log('Cross-origin access blocked:', error);
      // If cross-origin access is blocked, check only the local client
      if (window.client == 'CL') {
        window.parent.addEventListener("message", receiveMessageFromIFream, false);
      }
    } else {
      // Handle other potential errors
      console.error('An unexpected error occurred:', error);
    }
  }

  function receiveMessageFromIFream(event) {
    // Verify the origin of the received message
    const allowedOrigins = [window.location.origin]; // Add other allowed origins if needed
    if (!allowedOrigins.includes(event.origin)) {
      console.warn("Blocked message from unauthorized origin:", event.origin);
      return; // Stop processing if origin is not allowed
    }

    if (typeof event.data == "string") {
      if (event.data != undefined && event.data === 'ifremStepChange') {
        $('audio').each(function (index, item) {
          item.pause();
          item.currentTime = 0;  
          $(item).removeClass('playing').parents('.playing').removeClass('playing');
        });
        $('video').each(function (index, item) {
          item.pause(); 
          item.currentTime = 0;
        });
        $('.video-iframe-container').each(function () {
          const src = $(this)[0].getAttribute('src');
          if (src && src.indexOf('youtube.com/embed') != -1) {
            const iframe = $(this)[0];
            if (iframe.src && iframe.contentWindow) {
              const targetOrigin = new URL(iframe.src).origin;
              iframe.contentWindow.postMessage(
                JSON.stringify({
                  event: "command",
                  func: "stopVideo",
                  args: ""
                }),
                targetOrigin
              );
            }
          }
        });
      }
    }
    else if(event.data.message === "SampleAnswersLayer") {
      document.querySelectorAll('[data-sampletaginfo]').forEach(el => {
          console.log(el);
          try {
              let data = JSON.parse(el.getAttribute('data-sampletaginfo').replace(/&quot;/g, '"'));
              
              if (data.Sample_Answers && data.Sample_Answers.includes("On")) {
                  console.log("Found matching element:", el);
                  
                  let $questionContainer = $(el).closest('.question-container');
                  let identifire = $($questionContainer).find('.customClass').attr('data-type');
                  if(event.data.enableSampleAnswers) {
                    
                    findTemplateForSampleLayerSupport(identifire,$questionContainer);
                      $questionContainer.show();
                  } else {
                    if( identifire=='multiple-choice-template'){
                      RemoveSampleLayerFromTemplate(identifire,$questionContainer);
                    }
                    else{
                      $questionContainer.hide();
                    }
                      
                  }
              }
          } catch (error) {
              console.error("Error parsing data-sampletaginfo:", error);
          }
      });
    }
    else if(event.data.message == "tigEnable"){
      console.log("tig Enable --",event.data);
    }
  }

  //*************************************************************** */
  //*************************************************************** */
  //*******************Sample Layer logic**************** */
  //*************************************************************** */
  //*************************************************************** */

  function findTemplateForSampleLayerSupport(identifire,template){
    switch(identifire){
      case 'multiple-choice-template':
        MCQSampleLayer(template)
        break;
      case 'match-the-pairs':
        MTPSingleLayerSupport(template)
        break;
    }
  }

  function MCQSampleLayer(element){
    let isMcqSingle = $(element).find('.question-select-wrap').hasClass('single-questions');
    $(element).find('input[type="radio"], input[type="checkbox"]').prop('checked', false);
    $(element).find('.form-row').removeAttr('style');
    $(element).find('.checkmark').removeAttr('style');
    $(element).find('.checkboxmark').removeAttr('style');
    $(element).find('.icheckbox').removeClass('checked');
    $(element).find('input').parent().removeAttr('style');
    $(element).find('input[data-iscorrect]').each(function (index,inputElement) {
      const encoded = $(this).attr('data-iscorrect');
      try {
        const decoded = atob(encoded);
        if (decoded === 'true') {
          $(inputElement).parents('.form-row').addClass('sampleAnswerActive-MCQ');
          $(inputElement).parents('.form-row').attr("style", "border-color: #C91CA5 !important;");
          
          if(isMcqSingle){
            $($(inputElement)).parent().find('.checkmark').addClass('sampleAnsCheckBox');
            if($(element).find('.card-style3').length){
              $(inputElement).parent().find('input').parent().attr("style", "background-color: #C91CA5 !important;");
            }
          }else{
            let temp = $($(inputElement)).parent().find('input');
            $(temp).parent().addClass('checked')
            $($(inputElement)).parent().find('.checkboxmark').addClass('sampleAnsCheckBoxMultiple');
            $(inputElement).parent().find('input').parent().attr("style", "background-color: #C91CA5 !important;");
          }
        }
        else{
          $(inputElement).parents('.form-row').css({
            'pointer-events': 'none'
          })
        }
      } catch (e) {
        console.warn('Invalid base64 in data-iscorrect:', encoded);
      }
    });
  }

  function MTPSingleLayerSupport(element){
     $(element).find('.mtp-single .showme-btn').click();
     setTimeout(() => {
      $(element).find('.mtp-correct-pair').addClass('sampleLayerMTPCorrectAns');
      $(element).find('.sampleLayerMTPCorrectAns').removeClass('mtp-correct-pair');
      $(element).find('.mtp-pair2 .icon-Check').addClass('icon-Check-color');
      $(element).find('.mtp-pair1-block').css('border-color','#C91CA5');
      $(element).find('.circle-half').css('background-color','#C91CA5');
      $(element).find('.circle-wrap.circle').css('opacity','1');
      $(element).find('path').attr('stroke', '#C91CA5');
     }, 500);
  }

  function RemoveSampleLayerFromTemplate(identifier,template){
    switch(identifier){
      case 'multiple-choice-template':
        removeSampleLayerFromMcq(template)
        break;
    }
  }

  function removeSampleLayerFromMcq(element){
    $(element).find('input[type="radio"], input[type="checkbox"]').prop('checked', false);
    $(element).find('.form-row').removeClass('sampleAnswerActive-MCQ');
    $(element).find('.checkmark').removeClass('sampleAnsCheckBox');
    $(element).find('.icheckbox').removeClass('checked');
    $(element).find('.form-row').removeAttr('style');
    $(element).find('.form-row').css('pointer-events','auto');
    $(element).find('.checkboxmark').removeClass('sampleAnsCheckBoxMultiple');
    $(element).parent().find('input').parent().css('background-color', 'rgba(17, 62, 154, 0.3)');
    
  }

  //*************************************************************** */
  //*************************************************************** */
  //***********************Reader Functionality Settings Start******************/
  //*************************************************************** */
  //*************************************************************** */

  window.readerMargin = $('.customClass[data-type="paragraph"], .customClass[data-type="header"], .customClass[data-type="tablesNew"]').eq(0).attr('data-pagemargin');
  if (window.readerMargin == "" || window.readerMargin == undefined || window.readerMargin == null || window.readerMargin == "null") {
    window.readerMargin = "narrow";
    setTimeout(() => {
      window.kitabooMarginChange(window.readerMargin);
    }, 0);
  }
  
  


  window.readerExistingJson = {};
  // This is default reader Margin Sample, Do Not Un-comment;

  // window.readerJson = { 
  //   "font":"open_sans",
  //   "fontSize":"small", 
  //   "align":"left", 
  //   "lineSpacing":"small",
  //   "margin":"narrow", 
  //   "modeBackground":"#ffffff",    
  //   "modeForeground":"#000000",    
  //   "readingMode":"day"
  // }

  window.kitabooReaderCommonFunction = function (readerJson) {
    var intialState = false;
    if (Object.keys(window.readerExistingJson).length == 0) {
      intialState = true;
      window.readerExistingJson = readerJson;
    }
    if (readerJson.font != undefined && (window.readerExistingJson.font != readerJson.font || intialState)) {
      window.kitaboosetFontFamily(readerJson.font, readerJson);
    }
    if (readerJson.fontSize != undefined && (window.readerExistingJson.fontSize != readerJson.fontSize || intialState)) {
      window.kitabooTexFontChange(readerJson.fontSize, readerJson);
    }
    if (readerJson.align != undefined && (window.readerExistingJson.align != readerJson.align || intialState)) {
      window.kitabooTextAlignChange(readerJson.align, readerJson);
    }
    if (readerJson.lineSpacing != undefined && (window.readerExistingJson.lineSpacing != readerJson.lineSpacing || intialState)) {
      window.kitaboosetLineHeight(readerJson.lineSpacing, readerJson);
    }
    if (readerJson.margin != undefined && (window.readerExistingJson.margin != readerJson.margin || intialState)) {
      window.kitabooMarginChange(readerJson.margin, readerJson);
    }
    if (readerJson.readingMode != undefined && (window.readerExistingJson.readingMode != readerJson.readingMode || intialState)) {
      window.kitabooSwitchDayNightMode(readerJson.readingMode, readerJson);
    }
    window.readerExistingJson = readerJson;
  }


  window.kitabooMarginChange = function (option, json) {
    if (option == "default") {
      if (typeof window.readerMargin != "string" || window.readerMargin == undefined) {
        window.readerMargin = "narrow"
      }
      $('.customClass[data-type="header"], .customClass[data-type="paragraph"], .customClass[data-type="tablesNew"]').attr('data-pagemargin', window.readerMargin);
    } else {
      $('.customClass[data-type="header"], .customClass[data-type="paragraph"], .customClass[data-type="tablesNew"]').attr('data-pagemargin', option);
    }
  }

  window.kitaboosetLineHeight = function (readerlineheight, json) {
    switch (readerlineheight) {
      case 'small':
        $(":root")[0].style.setProperty('--readerLineheight', 1.4);
        break;

      case 'medium':
        $(":root")[0].style.setProperty('--readerLineheight', 1.6);
        break;

      case 'large':
        $(":root")[0].style.setProperty('--readerLineheight', 1.8);
        break;
    }
    $('body').addClass('readerLineheight');
    if ($('[data-type="match-the-pairs"]').length) {
      mtpResize();
    }
    if (readerlineheight == 'default') {
      $("body").removeClass('readerLineheight');
    }
  }
  window.kitaboosetFontFamily = function (fontfamily, json) {
    $(":root")[0].style.setProperty('--readerfontFamily', fontfamily);
    $('body').addClass('readerfontFamily');
    if ($('[data-type="match-the-pairs"]').length) {
      mtpResize();
    }
    if (fontfamily == 'default') {
      $("body").removeClass('readerfontFamily');
    }
  }

  window.kitabooSwitchMode = function (mode, modeBackground, modeForeground) {
    $(":root")[0].style.setProperty("--dayNightMode-background-color", modeBackground);
    $(":root")[0].style.setProperty("--dayNightMode-color", modeForeground);
  }
  window.kitabooSwitchDayNightMode = function (mode, json) {
    console.log("mode");
    if (json != undefined && json.modeBackground != undefined && json.modeForeground != undefined) {
      var modeBackground = json.modeBackground;
      var modeForeground = json.modeForeground;
    } else {
      var modeBackground = "";
      var modeForeground = "";

      switch (mode) {
        case 'night':
          modeBackground = "#000000";
          modeForeground = "#FEFEFE";
          break;

        case 'day':
          modeBackground = "#FFFFFF";
          modeForeground = "#333333";
          break;

        case 'sepia':
          modeBackground = "#EEE9D7";
          modeForeground = "#804715";
          break;
      }
    }
    window.kitabooSwitchMode(mode, modeBackground, modeForeground);
    $("body").addClass('dayNightMode');
    if (mode == 'default') {
      $("body").removeClass('dayNightMode');
    }
  }
  window.kitabooTextAlignChange = function (option, json) {
    console.log(option);
    $(":root")[0].style.setProperty("--text_align", option);
    $("body").addClass('reader_text-align');
    if ($('[data-type="match-the-pairs"]').length) {
      mtpResize();
    }
    if (option == 'default') {
      $("body").removeClass('reader_text-align');
    }
  }

  window.kitabooTexFontChange = function (font_size, json) {
    $(":root")[0].style.setProperty("--font_size", font_size);
    $("body").addClass('reader_font-size');
    if ($('[data-type="match-the-pairs"]').length) {
      mtpResize();
    }
    if (font_size == 'default') {
      $("body").removeClass('reader_font-size');
    }
    if (font_size == 'xx-large') {
      $('.reader_font-size .sc-button-holder').addClass('reader_font_pading');
      $('.reader_font-size .correction .inputbox-selected').addClass('reader_font_pading');
      $('.reader_font-size .paragraph-container.blockquote').addClass('reader_font_pading');
    } else {
      $('.reader_font-size .sc-button-holder').removeClass('reader_font_pading');
      $('.reader_font-size .correction .inputbox-selected').removeClass('reader_font_pading');
      $('.reader_font-size .paragraph-container.blockquote').removeClass('reader_font_pading');
    }
  }

  window.kitabooTexFontSizeChange = function (font_size, json) {
    console.log(font_size);
    var tempFontSize = ""
    switch (font_size) {
      case "1":
        tempFontSize = "small"
        break;
      case "2":
        tempFontSize = "medium"
        break;
      case "3":
        tempFontSize = "large"
        break;
      case "4":
        tempFontSize = "x-large"
        break;
      case "5":
        tempFontSize = "xx-large"
        break;
    }
    window.kitabooTexFontChange(tempFontSize, '');
  }
  window.kitabooResetReaderSetting = function () {
    $("body").removeClass('dayNightMode');
    $("body").removeClass('readerLineheight');
    $("body").removeClass('readerfontFamily');
    $("body").removeClass('reader_text-align');
    $("body").removeClass('reader_font-size');
    $(".reader_font_pading").removeClass('reader_font_pading');
    window.kitabooMarginChange('narrow');
    if ($('[data-type="match-the-pairs"]').length) {
      mtpResize();
    }
  }

  //*************************************************************** */
  //**************************Reader Functionality Settings End***********/
  //*************************************************************** */

  $(window).bind('resize', function () {
    setTimeout(function () {
      // slider_pager_width(true);
      if (navigator.userAgent.match(/(iPad)/i)) {
        videoPreload();
      }
      // audiovideoREsourcing();
    });
    // adjustHeroheaderHeight();
    adjustInlineHtmlPayerSize();
    resizeSlideHeight();
    // defaultSidebarView();
  });
  // $('body').on('click tap touchstart', '.video-js', function(e){
  //   var $video = $(e.currentTarget).find('video');
  //   $video.removeClass('hide-controls');
  //   if($(e.currentTarget).find('.vjs-big-play-button').css('display') === 'block') {
  //     $video.addClass('hide-opacity');
  //     setTimeout(function() {
  //       $video.addClass('hide-controls');
  //       $video.removeClass('hide-opacity');
  //       audiovideoREsourcing();
  //     },500)
  //   }
  // });
  // if ibooks then disable colorbox popup
  if (window.location.href.indexOf('ibooks') === -1) {
    var timeout;
    var lastTap = 0;
    $('.color-box-icon').on('touchend', function (event) {
      var currentTime = new Date().getTime();
      var tapLength = currentTime - lastTap;
      clearTimeout(timeout);
      if (tapLength < 500 && tapLength > 0) {
        if ($(event.currentTarget).parents().hasClass('slider')) {
          sliderZoomClick(event);
        } else {
          colorboxImageClick(event, $(this).attr('src'));
        }
      }
      lastTap = currentTime;
    });
    $('.color-box-icon').on('dblclick', function (e) {
      if ($(e.currentTarget).parents().hasClass('slider')) {
        sliderZoomClick(e);
      } else {
        colorboxImageClick(e, $(this).attr('src'));
      }

    });
    if (!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)/i)) {
      $('.previewSlider .slider').hover(function (e) {
        $(e.currentTarget).addClass('hover');
      }, function (e) {
        $(e.currentTarget).removeClass('hover');
      })
    }
    if (!navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)/i)) {
      $(".video-js").css('font-size', '16px');
    }

    var colorboxImageClick = function (e, imageSrc) {
      e.preventDefault();
      var a = $(e.currentTarget).next()[0].outerHTML;
      $("<img>").attr("src", imageSrc).load(function () {
        var width, height, iskitabooReader = true,
          colorboxHtml;
        width = this.width;
        height = this.height;
        if (window.location.href.indexOf('BOOKS') === -1) {
          iskitabooReader = false;
          colorboxHtml = '<div style="height:' + height + 'px;width:' + width + 'px;"><img src="' + imageSrc + '" class="cboxPhoto" alt="Image"></div>' + $(a)[0].outerHTML;
        } else {
          colorboxHtml = '<img src="' + imageSrc + '" class="cboxPhoto" alt="Image">' + $(a)[0].outerHTML;
        }
        $.colorbox({
          html: colorboxHtml,
          onComplete: function () {
            var resizedWidth,
              resizedHeight,
              imgHeight;
            $('.cboxPhoto').unbind().click($.colorbox.close);
            if (!iskitabooReader) {
              $('#cboxLoadedContent img').parent().css({
                'width': $('#cboxLoadedContent').css('width'),
                'height': $('#cboxLoadedContent').css('height')
              })
            }
            $('#cboxLoadedContent img').load(function () {
              imgHeight = $('#cboxLoadedContent img')[0].height - $('#cboxLoadedContent figcaption').height();
              resizedWidth = (width / height) * (imgHeight);
              resizedHeight = $('#cboxLoadedContent figcaption').height();
              $('#cboxLoadedContent figcaption').css('max-width', resizedWidth + 'px');
              if (resizedHeight !== $('#cboxLoadedContent figcaption').height()) {
                imgHeight = $('#cboxLoadedContent img')[0].height - $('#cboxLoadedContent figcaption').height();
                resizedWidth = (width / height) * (imgHeight);
              }
              $.colorbox.resize({
                innerWidth: resizedWidth,
                innerHeight: $('#cboxLoadedContent img').height()
              })
              if (!iskitabooReader) {
                $('#cboxLoadedContent img').unwrap();
                $('#cboxLoadedContent img').wrap('<div></div>');
                $('#cboxLoadedContent img').parent().css({
                  'width': resizedWidth,
                  'height': imgHeight + 'px'
                })
              }
            })
          },
          maxWidth: '98%',
          maxHeight: '98%',
          transition: 'none',
          onOpen: function () {
            $('html').css({
              overflow: 'hidden'
            });
          },
          onClosed: function () {
            $('html').css({
              overflow: ''
            });
            $('#cboxContent figcaption').remove();
          }
        });
      });
    }
  }

  var sliderZoomClick = function (e) {
    var slide = $(e.currentTarget).parents('.bxslider').find('>li:not(".bx-clone")'),
      data = [],
      mediaSrc,
      sliderParent = $(e.currentTarget).parents('.slider-parent'),
      currentSlideIndex = slide.index($(e.currentTarget).parents('li'));
    $(slide).each(function (index, element) {
      if ($(element).find('img').length === 0) {
        if ($(element).find('video').length === 0) {
          mediaSrc = $(element).find('iframe').attr('src');
        } else {
          mediaSrc = $(element).find('video').parent().attr('src');
        }
      } else {
        mediaSrc = $(element).find('img').attr('src');
      }

      var figcaption = $(element).find('figcaption').html(),
        thumbData = {},
        div;
      thumbData.src = mediaSrc;
      thumbData.thumb = $(sliderParent.find('.custom-pager')[index]).find('img').attr('src');
      thumbData.subHtml = figcaption;
      if ($(element).find('video').length !== 0) {
        div = document.createElement('div');
        $(div).append($(element).find('video').clone())
        $(div).find('video').addClass('lg-html5').addClass('video-js vjs-default-skin vjs-big-play-centered').removeClass('vjs-tech').removeAttr('src');
        $(div).find(".video-js").css('font-size', 'x-small');
        thumbData.html = $(div).html()
      }
      data.push(thumbData);
    });

    $(e.currentTarget).lightGallery({
      selector: '.lightSlider li',
      loop: false,
      counter: false,
      download: false,
      autoplayControls: false,
      progressBar: false,
      pullCaptionUp: true,
      showThumbByDefault: true,
      thumbnail: true,
      toogleThumb: false,
      thumbWidth: 45,
      thumbContHeight: 50,
      thumbMargin: 1,
      currentPagerPosition: 'middel',
      fullScreen: false,
      zoom: false,
      subHtmlSelectorRelative: true,
      controls: false,
      dynamic: true,
      dynamicEl: data,
      videojs: true,
      imagejs: true,
      index: currentSlideIndex
    });
  }

  document.addEventListener('play', function (e) {

    $('video').not(e.target).trigger('pause');
    $('audio').not(e.target).each(function() {
      $(this)
        .trigger('pause')                               
        .removeClass('playing')                         
        .find('.playing').removeClass('playing')  
        .end()
        .parents('.playing').removeClass('playing');  
    });

  }, true);
  if ($('.container-fluid').length !== 0) {
    window.parent.$('#loader').hide();
    $('#preventFluctuateDiv').show();
    // $('#loader').show();
    $('body').css('overflow', 'hidden');
    $(window).load(function () {
      $('#loader').hide();
      $('body').css('overflow', '');
      $("body").scrollTop(window.parent.scrollPosition);
    });
  }

  /* activate pause for lightbulb video if scrolled out of viewport */
  var check = function () {
    $('audio').each(function () {
      //$(this)[0].pause(); // Stop playing
    });

    $('video').each(function () {
      var visible = $(this).isOnScreen(0.5, 0.5);
      if (visible) {
        //$(this)[0].play(); // uncommet this line to start auto playing of videos
      } else {
        $(this)[0].pause();
      }
    });

    /* fixed for youtube pause video when scroll */
    $('.video-iframe-container').each(function () {
      let visible = $(this).isOnScreen(0.5, 0.5);
      const src = $(this)[0].getAttribute('src');
      if (src && src.indexOf('youtube.com/embed') != -1 && !visible) {
         const iframe = $(this)[0];
            if (iframe.src && iframe.contentWindow) {
              const targetOrigin = new URL(iframe.src).origin;
              iframe.contentWindow.postMessage(
                JSON.stringify({
                  event: "command",
                  func: "stopVideo",
                  args: ""
                }),
                targetOrigin
              );
            }
      }
    });
  }

  $(window).on('scroll', function () {
    $('.audiojs').each(function () {
      //$(this)[0].pause(); // Stop playing
      let visible = $(this).isOnScreen(0.5, 0.5);
      if (!visible) {
        let attr = $(this).find('audio').parents('.customClass').find('.component-holder').attr("playinbackground");
        if (attr && !JSON.parse(attr)) {
          // if ($(this).parents(".ITCForm").length >= 1) {
            $(this).find('audio')[0].pause();
            $(this).removeClass('playing').find('.playing').removeClass('playing');
          // } else {
          //   $(this).find('audio')[0].pause();
          // }
        }
      }
    });

    $('video').each(function () {
      var visible = $(this).isOnScreen(0.5, 0.5);
      if (!visible) {
        $(this)[0].pause();
      }
    });

    /* fixed for youtube pause video when scroll */
    $('.video-iframe-container').each(function () {
      var visible = $(this).isOnScreen(0.5, 0.5);
      var src = $(this)[0].getAttribute('src');
      if (src && src.indexOf('youtube.com/embed') != -1 && !visible) {
        const iframe = $(this)[0];
        if (iframe.src && iframe.contentWindow) {
          const targetOrigin = new URL(iframe.src).origin;
          iframe.contentWindow.postMessage(
            JSON.stringify({
              event: "command",
              func: "pauseVideo",
              args: ""
            }),
            targetOrigin
          );
        }
      }
    });
  });

  /*var debounced = check.debounce(50);
  $(window).on('scroll', debounced);*/
  if ($('.container-fluid').length !== 0) {
    var getQueryVariable = function getQueryVariable(variable, query) {
      var query = (!query) ? window.location.search.substring(1) : query,
        i, pair,
        vars = query.split("&");
      for (i = 0; i < vars.length; i++) {
        if (variable == 'courseId') {
          pair = vars[i].split("courseId=");
          return pair[1];
        } else if (variable == 'userToken') {
          pair = vars[i + 1].split("userToken=");
          return pair[1];
        } else if (variable == 'mode') {
          if (vars.length > 2) {
            pair = vars[i + 2].split("mode=");
            return pair[1];
          } else {
            return undefined;
          }
        }
      }
    }

    var host = window.parent.host,
      courseId = getQueryVariable('courseId'),
      userToken = getQueryVariable('userToken'),
      fetchPageUrl = '/services/htmlEditorServices/fetchPage/courseId/pageId/userToken',
      fetchTOCUrl = '/services/htmlEditorServices/fetchTOC/courseId/userToken',
      pages,
      currentIndex = $('.page-end').length - 1;


    fetchPageUrl = fetchPageUrl.replace('courseId', courseId).replace('userToken', userToken);
    fetchTOCUrl = fetchTOCUrl.replace('courseId', courseId).replace('userToken', userToken);

    // $.ajax({
    //   method:'GET',
    //   url: host + fetchTOCUrl,
    //   success: function(response)
    //   {
    //     pages = response;
    //   },
    //   error: function(data)
    //   {

    //   }
    // });
    $(document).ajaxStart(function () {
      $('#loader').css('display', 'block');
      $('body').css('overflow', 'hidden');
    });
    $(document).ajaxStop(function () {
      setTimeout(function () {
        $('#loader').css('display', 'none');
        $('body').css('overflow', '');
        $("#html-interactivity-valid").modal('hide');
      }, 1000);
    });
    var frame = window.parent.$('.previewed-html')[0],
      iframedoc = frame.contentDocument || frame.contentWindow.document,
      orgIframe = window.parent.$('.orginal-html').contents().find('.row-fluid');
    var loadPageContentOnScroll = function loadPageContentOnScroll() {
      var wrap = $('.preview-container')[0],
        dataContainer = $('.preview-container .row-fluid')[0],
        contentHeight = wrap.offsetHeight,
        y = window.pageYOffset + window.innerHeight,
        startString = "<body class='white_center_bg_main' tabindex='0' style='-ms-user-select:text;'>";
      if (y >= contentHeight) {
        return;
        // Ajax call to get more dynamic data goes here
        // currentIndex++;
        // if(currentIndex >= pages.length) {
        // }
        // // window.parent.$('#loader').show();
        // $.ajax({
        //   url: host + fetchPageUrl.replace('pageId', pages[currentIndex].pageId),
        //   type: "GET",
        //   cache: false,
        //   async: false,
        //   processData:false,
        //   success: function(data)
        //   {
        //     var scrollPosition = $("body").scrollTop(),
        //       previewHtml;
        //     if(data.previewHtml.indexOf(startString) !== -1) {
        //       previewHtml = data.previewHtml.slice(data.previewHtml.indexOf(startString) + startString.length, data.previewHtml.indexOf("</body>"));
        //     } else {
        //       previewHtml = data.previewHtml;
        //     }
        //     orgIframe.text(orgIframe.text() + previewHtml + '<div class="clearfix page-end" style="margin:0px; padding:0px"></div><hr>');

        //     iframedoc.open();
        //       iframedoc.writeln(window.parent.tillBody + '<div class="container-fluid preview-container"><div class="row-fluid">' + orgIframe.text() + '</div></div>' + window.parent.afteBody);
        //       iframedoc.close();

        //       window.parent.scrollPosition = scrollPosition;
        //   },
        //   error: function(data)
        //   {
        //     window.parent.$('#loader').hide();
        //   }
        // });
      }
    }
    $(window).on('scroll', loadPageContentOnScroll);
  } else {
    // $('.slideshow img').attr('src', function(){
    //  return this.src + '?isKitaboo=true';
    // })
  }
  $('.image-source').parents('.flex-container').not($('.video-source').parents('.flex-container')).addClass('flexible');

  window.stopAudioVideo = function () {
    console.log('stopAudioVideostopAudioVideostopAudioVideostopAudioVideostopAudioVideostopAudioVideo');
    
    $('audio').each(function (index, item) {
      this.pause(); // Stop playing
      item.currentTime = 0;  
      $(item).removeClass('playing').parents('.playing').removeClass('playing');
    });
    $('video').each(function (index, item) {
      item.currentTime = 0;  
      this.pause(); // Stop playing
    });
    
    $('.video-iframe-container').each(function () {
			let src = $(this)[0].getAttribute('src');
			if (src && src.indexOf('youtube.com/embed') != -1) {
        const iframe = $(this)[0];
          if (iframe.src) {
              const targetOrigin = new URL(iframe.src).origin;
              iframe.contentWindow.postMessage(
                  JSON.stringify({
                      event: "command",
                      func: "stopVideo",
                      args: ""
                  }),
                  targetOrigin
              );
        }
			}
		});

  };

  let closeAllModals = function () {
    $.colorbox.close();
    $('.external-html-template [data-dismiss="modal"]').click();
    $('.lg-close').click();
  }
  //comment for font stye
  // $('[style]').each(function(index, value) {
  //   var styleAttr = $(value).attr('style');


  //   if(styleAttr.indexOf('font-size') !== -1) {

  //     $(value).css('font-size', 'inherit');
  //     // if($(value).hasClass("video-js")){$(value).css('font-size', 'inherit !important');}
  //     //set vedio progress bar for video dimension changes
  //       var style=$("figure").css("width");
  //       if(style >= "200px"){
  //       $(value).css('font-size', 'x-small');
  //     }
  //     if(Number($(value).css('font-size').replace('px','')) >= 32) {
  //               $(value).css('line-height', 1.2);
  //           } else {
  //               $(value).css('line-height', 1.5);
  //           }
  //   }
  //   if(styleAttr.indexOf('line-height') !== -1) {
  //     if(Number($(value).css('font-size').replace('px','')) >= 32) {
  //               $(value).css('line-height', 1.2);
  //           } else {
  //               $(value).css('line-height', 1.5);
  //           }
  //   }
  // });

  var changeInlineHtmlPayerLink = function () {
    
    $('.html-interactivity').each(function (index, value) {

      var a = $(value).attr('data-link'),
        b,
        kitaboo_authoring = 'kitaboo_authoring',
        kitaboo_authoring_index = a.indexOf('kitaboo_authoring') + kitaboo_authoring.length;
      var checked = a.substring(kitaboo_authoring_index + 1, a.length);
      var partial = checked.substring(checked.indexOf('/'), a.length);

      var getQueryVariable = function getQueryVariable(variable, query) {
        var query = (!query) ? window.location.search.substring(1) : query,
          i, pair,
          vars = query.split("&");
        // for (i=0;i<vars.length;i++) {
        //     pair = vars[i].split("=");
        //     if (pair[0] == variable) {
        //         return pair[1];
        //     }
        // }
        for (i = 0; i < vars.length; i++) {
          if (variable == 'courseId') {
            pair = vars[i].split("courseId=");
            return pair[1];
          } else if (variable == 'userToken') {
            pair = vars[i + 1].split("userToken=");
            return pair[1];
          } else if (variable == 'mode') {
            if (vars.length > 2) {
              pair = vars[i + 2].split("mode=");
              return pair[1];
            } else {
              return undefined;
            }
          }
        }
      }

      if (window.location.search == "" || window.parent.client == 'CL') {
        b = a;
      } else {
        b = a.substring(0, kitaboo_authoring_index + 1) + getQueryVariable('userToken') + partial;
      }

      // if (window.location.search == "" || window.parent.client == 'CL' || getQueryVariable('userToken') !== undefined )  {
          $(value).attr('data-link', b);
      // }

      if ($(value).find('object').length !== 0) {
        // $(value).find('object').attr('data', $(value).attr("data-link"));
        var url = $(value).attr("data-link");
        var clone = $(value).find('object').clone();
        var parent = $(value).find('object').parent();
        clone.attr('data', url);
        clone.attr('data-htmlurl', url);
        $(value).find('object').remove();
        parent.append(clone);
      }



    });
  }
  changeInlineHtmlPayerLink();
  if (navigator.userAgent.match(/iPad/i) || navigator.platform.match(/iPhone/i)) {
    $('.external-html-template .modal-body').css('overflow', 'auto');
  }
  $('.inline-play-container .modal-header .icon-Close').on('click touch', function (event) {
    event.stopPropagation();
    $(event.currentTarget).parents('.html-interactivity').find('.inline-play-container').addClass('hide-img');
    $(event.currentTarget).parents('.html-interactivity').find('.html-interactive-content').removeClass('hide-img');
  });

  if (navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)/i)) {
    $('[data-link]').each(function (index, value) {
      if ($(value).find('object').length === 0) {
        $(value).find('.html-interactive-content').append('<a href="' + $(value).attr("data-link") + '"></a>');
      } else {
        //?isKitaboo=true -- avoid default popup from appearing in kitaboo reader
        $(value).find('object').attr('data', $(value).attr("data-link"));
      }
      $(value).removeAttr('data-link');
    });
    $('.htmlStyleSet').each(function (index, item) {
      if ($(this).find('object').length > 0) {
        $(this).find('.html-interactive-content').hide();
      }
    });
    $('.htmlStyleSet').click(function (event) {
      if ($(event.currentTarget).find('object').length === 0) {
        /* passing parameter to iphone, ipad, ipod, andriod for activity animation */
        // $(event.currentTarget).find('.html-interactive-content a')[0].click();
        srollTop = $(window.frameElement).parents('#scrolled-content-frame').scrollTop();
        srollTopBody = $(window.frameElement).parents('#maincontainer').scrollTop();
        height = $(window.frameElement).css('height');
        /***end**/
        $($(window.frameElement).parents('#myController').find('header')[0]).children('#second_menu').children().find('.device-holder').children('span').addClass('frominteractivity');
        $($(window.frameElement).parents('#myController').find('header')[0]).children('#second_menu').children().find('.device-holder').children('button').addClass('frominteractivity');

        $('#html-loader').show();
        //?isKitaboo=true -- avoid default popup from appearing in kitaboo reader
        var htmlIntLink = $(event.currentTarget).find('.html-interactivity').data('link');
        if (typeof htmlIntLink == "undefined") {
          htmlIntLink = $(event.currentTarget).find('.html-interactivity').find('a').attr('href')
        }
        $('#external-html-template iframe').attr('src', htmlIntLink);
        $('.external-html-template .icon-Collapse').removeClass('icon-Collapse').addClass('icon-Expand');
        $('.external-html-template .modal-dialog').removeClass('default-modal-dim').addClass('full-modal-dim');

        $(window.frameElement).parents('#scrolled-content-frame').scrollTop(0).css('overflow-y', 'hidden');
        /***end**/
        $('#external-html-template').modal('show');
        $('#html-loader').hide();
      } else {
        if ($(event.currentTarget).find('.html-interactive-content').hasClass('hide-img')) {
          return;
        }
        // $(event.currentTarget).find('.inline-play-container').css('width', $(event.currentTarget).find('.html-interactive-content').css('width'));
        $(event.currentTarget).find('.inline-play-container').css('height', $(event.currentTarget).find('.html-interactive-content').css('height'));
        $(event.currentTarget).find('.inline-play-container').css('min-height', '500px');
        $(event.currentTarget).find('.inline-play-container').removeClass('hide-img');
        $(event.currentTarget).find('.html-interactive-content').addClass('hide-img');
      }
      $('.html-inline-loader').hide();
    });
  } else {
    $('.htmlStyleSet').each(function (index, item) {
      if ($(this).find('object').length > 0) {
        $(this).find('.html-interactive-content').hide();
      }
    });
    $('.htmlStyleSet').click(function (event) {
      // $('.attempts-message').text('Please try again');
      if ($(event.currentTarget).find('object').length === 0) {
        /***Save scrolltop of scrolled-content-frame for readium***/
        /***Save scrolltop of maincontainer for kitaboo reader***/
        srollTop = $(window.frameElement).parents('#scrolled-content-frame').scrollTop();
        srollTopBody = $(window.frameElement).parents('#maincontainer').scrollTop();
        height = $(window.frameElement).css('height');
        /***end**/
        $($(window.frameElement).parents('#myController').find('header')[0]).children('#second_menu').children().find('.device-holder').children('span').addClass('frominteractivity');
        $($(window.frameElement).parents('#myController').find('header')[0]).children('#second_menu').children().find('.device-holder').children('button').addClass('frominteractivity');

        $('#html-loader').show();
        //?isKitaboo=true -- avoid default popup from appearing in kitaboo reader
        $('#external-html-template iframe').attr('src', $(event.currentTarget).find('.html-interactivity').data('link'));
        $('.external-html-template .icon-Collapse').removeClass('icon-Collapse').addClass('icon-Expand');
        $('.external-html-template .modal-dialog').removeClass('default-modal-dim').addClass('full-modal-dim');
        /***Set iframe height to 100vh and scrolled-content-frame scroll top to zero***/
        // if($(window.frameElement).parents('#preview').hasClass('tablet-port')){
        //    $(window.frameElement).css({
        //   'height': '95vh'
        //     }); 
        // }
        // else if($(window.frameElement).parents('#preview').hasClass('tablet-land')){
        //   $(window.frameElement).css({
        //   'height': '100vh'
        //     });
        // }
        // else if($(window.frameElement).parents('#preview').hasClass('mobile-port')){
        //   $(window.frameElement).css({
        //   'height': '90vh'
        //     });
        // }
        // else if($(window.frameElement).parents('#preview').hasClass('mobile-land')){
        //   $(window.frameElement).css({
        //   'height': '59vh'
        //     });
        //     }
        //   else{
        //     $(window.frameElement).css({
        //   'height': '100vh'
        //     });
        //   }

        $(window.frameElement).parents('#scrolled-content-frame').scrollTop(0).css('overflow-y', 'hidden');
        /***end**/
        $('#external-html-template').modal('show');
        $('#html-loader').hide();
        $('.html-inline-loader').hide();
      } else {
        if ($(event.currentTarget).find('.html-interactive-content').hasClass('hide-img')) {
          return;
        }
        $('.html-inline-loader').hide();
        $('#html-loader').hide();
        // $(event.currentTarget).find('.html-inline-loader').show();
        $(event.currentTarget).find('.inline-play-container').css('width', '100%');
        $(event.currentTarget).find('.inline-play-container').css('height', $(event.currentTarget).find('.html-interactive-content').css('height'));
        $(event.currentTarget).find('.inline-play-container').css('min-height', '500px');
        $(event.currentTarget).find('.inline-play-container').removeClass('hide-img');
        $(event.currentTarget).find('.html-interactive-content').addClass('hide-img');
      }
      $('.html-inline-loader').hide();
      $(event.currentTarget).parents('.row-fluid.row-fluid-margin').css('margin', '0');
      $(event.currentTarget).parents('.row-fluid.row-fluid-margin').find('.customClass').css('display', 'none');
      $(window.frameElement).parents('#myController').find('.components-panel.newTocPanel').hide();
    });

    $('#external-html-template').on('hidden.bs.modal', function () {
      $('#external-html-template iframe').attr('src', 'about:blank');
      /***Set iframe height to original height and scrolled-content-frame & maincontainer scroll top to original position***/
      // $(window.frameElement).parents('#scrolled-content-frame').scrollTop(srollTop).css('overflow-y',''),
      //     $(window.frameElement).css({
      //   'height': ''
      //     }),
      // $(window.frameElement).parents('#maincontainer').scrollTop(srollTopBody);
      /***end**/
    });
    $('.external-html-template .icon-Expand').off('click touch').click(function (event) {

      if ($(event.currentTarget).hasClass('icon-Expand')) {

        $('.external-html-template .modal-dialog').removeClass('default-modal-dim').addClass('full-modal-dim');
        $(event.currentTarget).removeClass('icon-Expand').addClass('icon-Collapse');
      } else {

        $('.external-html-template .modal-dialog').removeClass('full-modal-dim').addClass('default-modal-dim');
        $(event.currentTarget).removeClass('icon-Collapse').addClass('icon-Expand');
      }
    });
    $('.external-html-template .icon-Close').on('click touch', function () {
      $($(window.frameElement).parents('#myController').find('header')[0]).children('#second_menu').children().find('.device-holder').children('span,button').removeClass('frominteractivity');
      $(event.currentTarget).parents('.row-fluid.row-fluid-margin').css('margin', '');
      $(event.currentTarget).parents('.row-fluid.row-fluid-margin').find('.customClass').css('display', 'block');
      $(window.frameElement).parents('#myController').find('.components-panel.newTocPanel').show();
    })
  }
  window.addEventListener('load', function () {
    var debounced = check.debounce(50);
    $(window).on('scroll', debounced);
    resizeSlideHeight();
  });
  // window.addEventListener('load',function(){
  window.addEventListener("message", iframeMessage, false);
  onLocalizationLoad();


  $(".authoring-div").each(function () {
    var temp = $(this).find('.reset'),
      corr = $(this).find('.correction-reset'),
      fib = $(this).find('.fib-reset'),
      highlght = $(this).find('.highLight-reset'),
      imgLbl = $(this).find('.imgLabel-reset'),
      mtp = $(this).find('.mtp-reset'),
      mcq = $(this).find('.mcq-reset'),
      srtng = $(this).find('.sorting-reset'),
      dataType = $(this).attr('data-type'),
      booleanChk = false,
      objData = '';

    switch (dataType) {
      case 'fill-in-the-blank':
        booleanChk = fib.length;
        objData = fib;
        break;
      case 'multiple-choice-template':
        booleanChk = mcq.length;
        objData = mcq;
        break;
      case 'true-false-template':
        booleanChk = mcq.length;
        objData = mcq;
        break;
      case 'correction':
        booleanChk = corr.length;
        objData = corr;
        break;
      case 'imagelabelling':
        booleanChk = imgLbl.length;
        objData = imgLbl;
        break;
      case 'highlight':
        booleanChk = highlght.length;
        objData = highlght;
        break;
      case 'sorting':
        booleanChk = srtng.length;
        objData = srtng;
        break;
      case 'match-the-pairs':
        booleanChk = mtp.length;
        objData = mtp;
        break;
      default:
        booleanChk = 0;
        objData = '';
    }

    // onLocalizationLoad();

    // if(temp!==undefined && temp.length==0){
    //   if(booleanChk == 0) {
    //     var div=document.createElement('div');
    //     $(div).addClass('resetButton btn reset reset-btn');
    //     $(div).html('Reset');
    //     $(div).attr('data-localize','reset_me');
    //     if(window.localeJson){
    //       $(div).html(window.localeJson['reset_me']);
    //       $(div).attr('title',window.localeJson['reset_me']);
    //       onLocalizationLoad();
    //     }
    //     $(this).find('.btns').prepend(div);
    //   }
    //   else{ 
    //     objData.remove();
    //     var div=document.createElement('div');
    //     $(div).addClass('resetButton btn reset reset-btn');
    //     $(div).html('Reset');
    //     $(div).attr('data-localize','reset_me');
    //     if(window.localeJson){
    //       $(div).html(window.localeJson['reset_me']);
    //       $(div).attr('title',window.localeJson['reset_me']);
    //       onLocalizationLoad();
    //     }
    //     $(this).find('.btns').prepend(div);
    //   }
    // }
    $(".video-js").css("font-size", "x-small");
    $('.kaltura-youtube-container').parents('.slide_img_editor').css('display', 'contents');
  });
  // attempt issue after reload
  $(".authoring-div").each(function () {
    var attemptissue = $(this).find('.submit-btn');
    var attemptissue1 = $(attemptissue).attr('data-no-of-attempts');
    if (attemptissue1 == undefined) {
      $(this).find('.submit-btn').attr('data-no-of-attempts', '3');
    }
  });
  // reset function for mcq
  // $('.multiple-choice .reset').off('click').click(function(event){
  //   event.preventDefault();
  //   var $form = $(event.target).parents('form');
  //   $form.trigger('reset');
  //   $form.find('.mcq-body').find(".iradio").removeClass('checked');
  //   if($form.find(".mcq-options").prev().hasClass("checked")){    
  //      $form.find(".mcq-options").prev().removeClass("checked");   
  //     }
  // });
  //  // reset function for fib
  // $('.fib .reset').off('click').click(function(event){

  //   event.preventDefault();
  //   var $form = $(event.target).parents('form');
  //   if(click==true){
  //     $form.find('input').each(function(e){
  //         if(!$(this).hasClass('correct')){
  //          $(this).val('');
  //         }
  //     })
  //     $form.find("select").each(function(e){
  //         if(!$(this).hasClass('correct')){
  //           this.selectedIndex = 0;
  //           $(this).easyDropDown('select',0);
  //           $($(this).parents('.selectbox').find('span.selected')[0]).text(window.localeJson['select_answer']);
  //         }
  //     });   

  //   }else{
  //     $form.trigger('reset');
  //     $form.find("select").each(function(e){
  //         if(!$(this).hasClass('correct')){
  //           this.selectedIndex = 0;
  //           $(this).easyDropDown('select',0);
  //           if(window.localeJson)
  //           $($(this).parents('.selectbox').find('span.selected')[0]).text(window.localeJson['select_answer']);
  //           else
  //           $($(this).parents('.selectbox').find('span.selected')[0]).text("Select Answer");

  //         }
  //     });
  //     // if(window.localeJson){
  //     //   if($('.fib-with-option .selectbox').length > 0) {
  //     //     $.each($('.fib-with-option .selectbox'),function(index, obj){
  //     //       $($(obj).find('span.selected')[0]).text(window.localeJson['select_answer']);
  //     //       $($(obj).find('ul li')[0]).text(window.localeJson['select_answer']);
  //     //     });
  //     //   }
  //     // }
  //   }
  //   $form.find('.incorrect').removeClass('incorrect');
  //   $form.find('.incorrect-tick').remove();

  // }); 
  //reset function for mtp
  // $('.mtp .reset').off('click').click(function(event){
  //    event.preventDefault();
  //    var $form = $(event.target).parents('form');
  //    $form.find('.mtp-submit').addClass('disabled');
  //    $form.trigger('reset');


  //    $.each($form.find('.block1:not(.e1correct)').find('.sort-drag').find('input:hidden'), function(index, elem) {
  //        var inputVal = $form.find(elem).val(),
  //            mappedData = inputVal.split('_');

  //        var obj = {
  //            'inputVal': inputVal
  //        };
  //        // if (mappedData[0] !== mappedData[1]) {
  //            $form.find(elem).val(mappedData[0]);
  //                // Getter
  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");

  //                $form.find('#drag-' + mappedData[0]).draggable({
  //                    'disabled': false
  //                }).css('opacity', 1);
  //                $form.find('#drop-' + mappedData[1]).droppable({
  //                    'disabled': false
  //                });
  //                $form.find('#drop-' + mappedData[1]).removeClass('dropped');
  //                $form.find('#drop-' + mappedData[1] + ' .circle-half').css('opacity', 0);
  //                $('#' + inputVal).remove();


  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");
  //                var tempId=$form.find('#drop-' + mappedData[0]).attr("id");
  //                $form.find('path').each(function(){
  //                        var tempPath= $form.find(this).attr("pathid");
  //                      if(tempId===tempPath){
  //                      $form.find(this).remove();

  //                    }

  //                }); 
  //            // }
  //        });
  //    $.each($form.find('.block2:not(.e2correct)').find('.sort-drag').find('input:hidden'), function(index, elem) {
  //        var inputVal = $form.find(elem).val(),
  //            mappedData = inputVal.split('_');

  //        var obj = {
  //            'inputVal': inputVal
  //        };
  //        // if (mappedData[0] !== mappedData[1]) {
  //            $form.find(elem).val(mappedData[0]);
  //                // Getter
  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");

  //                $form.find('#drag-' + mappedData[0]).draggable({
  //                    'disabled': false
  //                }).css('opacity', 1);
  //                $form.find('#drop-' + mappedData[1]).droppable({
  //                    'disabled': false
  //                });
  //                $form.find('#drop-' + mappedData[1]).removeClass('dropped');
  //                $form.find('#drop-' + mappedData[1] + ' .circle-half').css('opacity', 0);
  //                $('#' + inputVal).remove();


  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");
  //                var tempId=$form.find('#drop-' + mappedData[0]).attr("id");
  //                $form.find('path').each(function(){
  //                        var tempPath= $form.find(this).attr("pathid");
  //                      if(tempId===tempPath){
  //                      $form.find(this).remove();

  //                    }

  //                }); 
  //            // }
  //        });
  //    $.each($form.find('.img1 .img11:not(.e1correctbox)').parent().find('.sort-drag').find('input:hidden'), function(index, elem) {
  //        var inputVal = $form.find(elem).val(),
  //            mappedData = inputVal.split('_');

  //        var obj = {
  //            'inputVal': inputVal
  //        };
  //        // if (mappedData[0] !== mappedData[1]) {
  //            $form.find(elem).val(mappedData[0]);
  //                // Getter
  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");

  //                $form.find('#drag-' + mappedData[0]).draggable({
  //                    'disabled': false
  //                }).css('opacity', 1);
  //                $form.find('#drop-' + mappedData[1]).droppable({
  //                    'disabled': false
  //                });
  //                $form.find('#drop-' + mappedData[1]).removeClass('dropped');
  //                $form.find('#drop-' + mappedData[1] + ' .circle-half').css('opacity', 0);
  //                $('#' + inputVal).remove();


  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");
  //                var tempId=$form.find('#drop-' + mappedData[0]).attr("id");
  //                $form.find('path').each(function(){
  //                        var tempPath= $form.find(this).attr("pathid");
  //                      if(tempId===tempPath){
  //                      $form.find(this).remove();

  //                    }

  //                }); 
  //            // }
  //        });
  //    $.each($form.find('.img2 .img22:not(.e2correctbox)').parent().find('.sort-drag').find('input:hidden'), function(index, elem) {
  //        var inputVal = $form.find(elem).val(),
  //            mappedData = inputVal.split('_');

  //        var obj = {
  //            'inputVal': inputVal
  //        };
  //        // if (mappedData[0] !== mappedData[1]) {
  //            $form.find(elem).val(mappedData[0]);
  //                // Getter
  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");

  //                $form.find('#drag-' + mappedData[0]).draggable({
  //                    'disabled': false
  //                }).css('opacity', 1);
  //                $form.find('#drop-' + mappedData[1]).droppable({
  //                    'disabled': false
  //                });
  //                $form.find('#drop-' + mappedData[1]).removeClass('dropped');
  //                $form.find('#drop-' + mappedData[1] + ' .circle-half').css('opacity', 0);
  //                $('#' + inputVal).remove();


  //                var disabled = $form.find('#drag-' + mappedData[0]).draggable("option", "disabled");
  //                var tempId=$form.find('#drop-' + mappedData[0]).attr("id");
  //                $form.find('path').each(function(){
  //                        var tempPath= $form.find(this).attr("pathid");
  //                      if(tempId===tempPath){
  //                      $form.find(this).remove();

  //                    }

  //                }); 
  //        });
  // }) 
  // reset function for Correction
  // $(".correction .reset").off('click').click(function(event){
  //     event.preventDefault();
  //     var $form = $(this).parents('.correction-editor');
  //     $form.find(".strikeWord").each(function(i){
  //         $(this).find('span').each(function(i){
  //                 var cnt = $(this).contents();
  //                     $(this).replaceWith(cnt);
  //             });
  //         var strikeContent=$(this).html();
  //         var temp=$(this).parents(".selectedStrikeWord").children(".correctionText").children().children().hasClass("myWords");
  //         if(temp==false){
  //         $(this).replaceWith(strikeContent);
  //        }
  //     });
  //     $form.find(".inputbox-selected").each(function(i){
  //         var x= $(this).parents(".correctionText");
  //         var y= $(this).parents(".correctionText").parent().children();
  //         if($(this).hasClass("myWords")===false){
  //            $(x).remove(); 
  //            $(y).removeClass('strikeWord');

  //         }    
  //     })     
  // }); 
  // reset function for sorting
  // $('.sorting .reset').off('click').click(function(event){
  //     event.preventDefault();
  //     counter = 0;
  //     var $eventTarget = $(event.target),
  //     $form = $(event.target).parents('form');
  //       if($(this).attr('click',true)){
  //         $form.find(".sort-select").each(function(i){
  //         correctAnswer = $form.find(this).attr('data-id');
  //         currenrAnswer = $form.find(this).next().attr('data-id');
  //               if( $form.find(this).next().hasClass('sort-correct')) {
  //                  $form.find(this).css('opacity', '0.5');

  //               } else {
  //                  $form.find(this).next().remove();
  //                  $form.find(this).parents().removeClass("dropped");
  //                  $form.find(this).parents().css('height','unset');
  //                 $(".added").each(function(i) {
  //                   dragId = $(this).attr('data-id');
  //                   if(correctAnswer === dragId){
  //                   $form.find(this).css('opacity', '1');
  //                   $(this).draggable('enable');
  //                   $form.find(this).addClass("draggable-div ui-draggable");
  //                   $form.find(this).removeClass("added");
  //                   } 
  //                 })

  //               }
  //         })

  //       }else{
  //          $form.find( ".sort-with-row" ).each(function(i){
  //          $(this).find('.draggable-div').remove();
  //          $(this).removeClass("dropped");
  //          $form.find('.preview-sort .inputbox-selected').css('opacity', '1');
  //          $form.find('.preview-sort .inputbox-selected').addClass("draggable-div ui-draggable");
  //          $form.find('.preview-sort .added').draggable('enable');
  //          $form.find('.preview-sort .inputbox-selected').removeClass("added");


  //         })

  //       }
  //    }); 
  // reset function for IL
  // $('.imageLabelling .reset').off('click').click(function(event){
  //   event.preventDefault();
  //       var $eventTarget = $(event.target),
  //       $form = $eventTarget.parents('.image-labelling-form');
  //       if($(this).attr('click',true)){
  //           $form.find(".tag-number,.square-tag-number").each(function(i){

  //               if($(this).hasClass("labelCorrect")==false){

  //                 var x=$(this).attr("id");
  //                 $(this).parent().removeClass("dropped");
  //                     $(".imageLabelling .labelPreview").css('border', '1px solid #000');
  //             var y=$(event.currentTarget).parents(".imageLabelling").find('#'+x+'placeholder');
  //             $(y).append(this);
  //             $(this).removeClass("labelCorrect");
  //             $(this).removeClass("labelInCorrect");                
  //               }

  //               $(this).draggable('enable');
  //             });
  //             $form.find(".Text-Container,.square-Text-Container").each(function(i){  

  //               if($(this).hasClass("labelCorrect")==false){

  //                 $(this).parent().removeClass("dropped");
  //             var x=$(this).attr("id");
  //             var y=$(event.currentTarget).parents(".imageLabelling").find('#'+x+'placeholder1');
  //             $(y).prepend(this);
  //             $(this).removeClass("labelCorrect");
  //             $(this).removeClass("labelInCorrect");  
  //               }

  //               $(this).draggable('enable');

  //             });
  //       }else{
  //         $form.find(".tag-number,.square-tag-number").each(function(i){
  //           var x=$(this).attr("id");
  //           var y=$(event.currentTarget).parents(".imageLabelling").find('#'+x+'placeholder');
  //           $(y).append(this);
  //           $(this).removeClass("labelCorrect");
  //           $(this).removeClass("labelInCorrect"); 
  //               $form.find(".dropped").css('border', '1px solid #000');
  //               $(this).draggable('enable');
  //           $form.find(".dropped").removeClass("dropped");
  //         });
  //         $form.find(".Text-Container,.square-Text-Container").each(function(i){  
  //           $(this).removeClass("labelInCorrect");
  //           var x=$(this).attr("id");
  //           var y=$(event.currentTarget).parents(".imageLabelling").find('#'+x+'placeholder1');
  //           $(y).prepend(this);
  //           $(this).removeClass("labelCorrect");
  //           $(this).removeClass("labelInCorrect"); 
  //           $(this).draggable('enable');
  //           $form.find(".dropped").removeClass("dropped");


  //             });
  //       }
  //   }); 
  $(document).on('click touch', '#vjs-settings-btn', function (event) {

    var isFullScreen = videojs($(event.target).parents('.customClass').find('video')[0]).isFullscreen();

    if (isFullScreen) {
      var source = $(event.target).parents('.customClass').find('.videoSettingPanelOverlay')
      var destination = $(event.target).parents('.customClass').find('.video-js')
      source.detach().appendTo(destination);
    } else {
      var source = $(event.target).parents('.customClass').find('.videoSettingPanelOverlay')
      var destination = $(event.target).parents('.customClass').find('figure')
      source.detach().appendTo(destination);
    }

    if ($(event.target).parents('.customClass').find('#transcript:visible').length) {
      if ($(event.target).parents('.customClass[data-type="clickToReveal"]').length > 0) {
        var videoHeight = $(event.target).parents('.customClass').find('.video-source').height();
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', videoHeight - 240 + 'px');
        var descriptionHeight = $(event.target).parents('.customClass').find('.description-text').height();
        $(event.target).parents('.customClass').find('.aboveText .videoSettingPanelOverlay').css('top', descriptionHeight + 40 + 'px');
      } else {
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', 'calc(100% - 250px)');
      }
    } else {
      if ($(event.target).parents('.customClass[data-type="clickToReveal"]').length > 0) {
        var videoHeight = $(event.target).parents('.customClass').find('.video-source').height();
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', videoHeight - 40 + 'px');
        // $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', 'calc(100% - 90px)');
      } else {
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', 'calc(100% - 50px)');
      }
    }

    if ($(event.target).parents('.customClass').find('.videoSettingPanelOverlay:visible').length) {
      $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').hide();
    } else {
      $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').show();
    }
  });
  $(document).on('click touch', '.videoSettingPanelOverlayCloseBtn', function (event) {
    $(event.target).parents('.videoSettingPanelOverlay').hide();
  });

  $(document).on('click touch', '.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li', function (event) {
    var trackId = $(event.target).attr('data-trackId');
    if (trackId == undefined) {
      trackId = $(event.target).parents('[data-trackId]').attr('data-trackId');
    }
    var tracks = $(event.target).parents('.customClass').find('video')[0].textTracks;
    for (var i = 0; i < tracks.length; i++) {
      tracks[i].mode = 'hidden';
    }
    tracks[trackId].mode = "showing";
    if (tracks[trackId].label == "Arabic") {
      $(event.target).parents('.customClass').find('#transcript').addClass('rtl');
    } else {
      $(event.target).parents('.customClass').find('#transcript').removeClass('rtl');
    }
    $(event.target).parents('.videoTacksList').find('li').each(function (index, item) {
      $(item).find('span').removeClass('icon-Check');
    });
    $(event.target).parents('.videoTacksList').find('li').eq(trackId).find('span').addClass('icon-Check');

    var video = $(event.target).parents('.customClass').find('video')[0];
    var cues = tracks[trackId].cues;
    var cuesLength = cues.length;
    var trackHTML = '';

    for (var i = 0; i < cuesLength; i++) {
      var dataBegin = cues[i].startTime;
      var cueTime = secondsToTime(cues[i].startTime);
      var cueText = cues[i].text;
      trackHTML += '<div class="transcript-line" data-begin="' + dataBegin + '"> <span class="transcript-timestamp">' + cueTime + '</span> <span class="transcript-text">' + cueText + '</span> </div> '
    }
    var transcriptContent = '<div class="transcript-body">' + trackHTML + '</div>';
    $(video).parents('.customClass').find('#transcript').html('');
    $(video).parents('.customClass').find('#transcript').append(transcriptContent);

  });

  $(document).on('click touch', '.videoSettingsToggleSection .transcripToggle .slider', function (event) {
    if ($(event.target).parents('.customClass[data-type="clickToReveal"]').length > 0) {
      if ($(event.target).siblings('input')[0].checked) {
        $(event.target).parents('.customClass').find('#transcript').hide();
        var videoHeight = $(event.target).parents('.customClass').find('.video-source').height();
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', videoHeight - 40 + 'px');
        // $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', 'calc(100% - 90px)');
      } else {
        $(event.target).parents('.customClass').find('#transcript').removeClass('nghidedata').show();
        var videoHeight = $(event.target).parents('.customClass').find('.video-source').height();
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', videoHeight - 240 + 'px');
        var descriptionHeight = $(event.target).parents('.customClass').find('.description-text').height();
        $(event.target).parents('.customClass').find('.aboveText .videoSettingPanelOverlay').css('top', descriptionHeight + 40 + 'px');
        // $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', 'calc(100% - 290px)');
      }
    } else {
      if ($(event.target).siblings('input')[0].checked) {
        $(event.target).parents('.customClass').find('#transcript').hide();
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', 'calc(100% - 50px)');
      } else {
        $(event.target).parents('.customClass').find('#transcript').removeClass('nghidedata').show();
        $(event.target).parents('.customClass').find('.videoSettingPanelOverlay').css('height', 'calc(100% - 250px)');
      }
    }
  });

  $(document).on('click touch', '.videoSettingsToggleSection .captionToggle .slider', function (event) {
    var video = $(event.target).parents('.customClass').find('video')[0];

    if ($(event.target).siblings('input')[0].checked) {
      for (var i = 0; i < video.textTracks.length; i++) {
        video.textTracks[i].mode = 'hidden';
      }
      var idx = $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li .icon-Check').parent().index();
      $(video).attr('data-resumeCC', idx);
    } else {
      var idx = $(video).attr('data-resumeCC');
      if (idx == undefined) {
        idx = video.textTracks.length - 1;
      }
      for (var i = 0; i < video.textTracks.length; i++) {
        if (i == idx) {
          video.textTracks[i].mode = 'showing';
          // $(event.target).parents('.customClass').find('#transcript').removeClass('rtl');
          $(event.target).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li .icon-Check').removeClass('icon-Check');
          $(event.target).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li span').eq(i).addClass('icon-Check');
        } else {
          video.textTracks[i].mode = 'hidden';
        }
      }
    }
  });

  $(document).on('click', '#transcript .transcript-line', function (event) {
    var video = $(event.target).parents('.customClass').find('video')[0];
    var cueTime = $(event.currentTarget).attr('data-begin');
    videojs(video).player().currentTime(cueTime);
  });

  var getQueryVariable = function getQueryVariable(variable, query) {
    var query = (!query) ? window.location.search.substring(1) : query,
      i, pair,
      vars = query.split("&");
    for (i = 0; i < vars.length; i++) {
      if (variable == 'courseId') {
        pair = vars[i].split("courseId=");
        return pair[1];
      } else if (variable == 'userToken') {
        pair = vars[i + 1].split("userToken=");
        return pair[1];
      } else if (variable == 'mode') {
        if (vars.length > 2) {
          pair = vars[i + 2].split("mode=");
          return pair[1];
        } else {
          return undefined;
        }
      }
    }
  }

  if ($(document).find('.preview-row-container', '.white_center_bg_main').length > 0) {
    if ($("[data-type*='audio']").length > 0 || $("[data-type*='multiple-choice-template']").length > 0 || $("[data-type*='true-false-template']").length > 0 || $("[data-type*='flashcard']").length > 0 || $("[data-type*='clickToReveal']").length > 0) {
      audiojs.events.ready(function () {
        var as = audiojs.createAll();
        audiovideoREsourcing();
      });
      $('audio').each(function (index, item) {
        if ($(item).attr('data-audiosrc') == '#' || $(item).attr('data-audiosrc') == undefined) {
          $(item).parents('.audiojs').find('.play-pause, .scrubber').addClass('blank-audio');
        }
      });
    }

    if ($("[data-type*='video']").length > 0 || $("[data-type*='multiple-choice-template']").length > 0 || $("[data-type*='true-false-template']").length > 0 || $("[data-type*='slideshow']").length > 0 || $("[data-type*='flashcard']").length > 0 || $("[data-type*='clickToReveal']").length > 0) {
      $('.video-js').each(function (index, video) {

        if (video.nodeName == "DIV") {
          var value = video;
          if ($(value).find('video').length !== 0) {
            poster = $(value).find('video').attr('poster') ? $(value).find('video').attr('poster') : '';
            $video = $(value).find('video').addClass('video-js vjs-16-9 vjs-default-skin vjs-big-play-centered').removeClass('vjs-tech').attr({
              'data-setup': '{}',
              'poster': poster
            }).removeAttr('src').attr('controls', 'controls');
            $videoSource = $video.attr('data-correct');
            $video.find('source').attr('src', $videoSource);
            $(value).children().eq(0).remove();
            $(value).prepend($video);
          }
        }
        if (video.nodeName != "DIV") {
          if ($(video).parents('.customClass').find('track').length) {
            // preloadVideoTracks(video);
            var captionEnable = $(video).attr('data-caption-enable') == "true" ? true : false;
            var transcriptEnable = $(video).attr('data-transcript-enable') == "true" ? true : false;
            var trackMainList = $(video).parents('.customClass').find('.tracksPreloadDiv track').clone();
            var transcriptContainer = $(video).parents('.customClass').find('#transcript');

            videojs(video).src($(video).attr('data-videosrc'));
            var player = videojs(video);
            player.on('fullscreenchange', function (e) {
              var isFullScreen = this.isFullscreen_;
              if (isFullScreen) {
                var source = $(this.el_).parents('.customClass').find('.videoSettingPanelOverlay');
                var destination = $(this.el_).parents('.customClass').find('.video-js');
                source.detach().appendTo(destination);
              } else {
                var source = $(this.el_).parents('.customClass').find('.videoSettingPanelOverlay');
                var destination = $(this.el_).parents('.customClass').find('figure');
                source.detach().appendTo(destination);
              }
            });
            player.ready(function () {

              // var video = element.find('video')[0];
              $(video).find('track').remove();
              // var trackMainList = $(video).scope().fieldData.settings.tracks;

              for (var t = 0; t < trackMainList.length; t++) {
                track = document.createElement("track");
                track.kind = "captions";
                track.label = trackMainList[t].label;
                track.dataset.src = trackMainList[t].dataset.src;

                var a = trackMainList[t].dataset.ogSrc;
                var splitArr = a.split('/');
                splitArr[8] = getQueryVariable('userToken');
                var resourceUrl = splitArr.join('/');

                track.src = resourceUrl;
                track.dataset.ogSrc = trackMainList[t].dataset.ogSrc;
                track.dataset.text = trackMainList[t].dataset.text;
                if (t == 0) {
                  track.default = true;
                } else {
                  track.default = false;
                }
                track.addEventListener("load", trackLoaded);
                track.addEventListener("cuechange", trackCueChange);
                video.appendChild(track);
              }

              if (!transcriptEnable) {
                $(transcriptContainer).hide();
              }
              $(video).parents('.customClass').find('.videoSettingsToggleSection .transcripToggle input')[0].checked = transcriptEnable;
              if (captionEnable) {
                for (var i = 0; i < video.textTracks.length; i++) {
                  if (i == video.textTracks.length - 1) {
                    video.textTracks[i].mode = 'showing';
                  } else {
                    video.textTracks[i].mode = 'hidden';
                  }
                }
              } else {
                for (var i = 0; i < video.textTracks.length; i++) {
                  video.textTracks[i].mode = 'hidden';
                }
                $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li span').eq(video.textTracks.length - 1).addClass('icon-Check')
              }
              $(video).parents('.customClass').find('.videoSettingsToggleSection .captionToggle input')[0].checked = captionEnable;
              var trackList = '';
              var tracks = video.textTracks
              for (var i = 0; i < tracks.length; i++) {
                if (tracks[i].mode == "showing") {
                  var span = '<span class="icon-Check"></span>';
                } else {
                  var span = '<span class=""></span>';
                }
                trackList += '<li data-trackId="' + i + '"><p>' + tracks[i].label + '</p>' + span + '</li>';
              }
              $(video).parents('.customClass').find('.videoSettingPanelOverlay').hide();
              $(video).parents('.customClass').find('.videoSettingPanelOverlay').append('<a class="videoSettingPanelOverlayCloseBtn"><span class="icon-Close"></span></a>')
              $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList').html('');
              $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList').append(trackList);
              $(video).parents('.customClass').find('.vjs-settings-button').remove();

              var settingIconTarget = $(video).parents('.customClass').find('.vjs-control-bar .vjs-fullscreen-control');
              $('<div id="vjs-settings-btn" class="vjs-settings-button vjs-control vjs-menu-button icon-Settings"></div>').insertBefore(settingIconTarget);

              // $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoTacksList li').eq(0).trigger('click');
            });


          } else {
            videojs(video).src($(video).attr('data-videosrc'));
            $(video).parents('.customClass').find('.videoSettingPanelOverlay').hide();
            $(video).parents('.customClass').find('#transcript').html('');
            $(video).parents('.customClass').find('.vjs-settings-button').remove();
          }
        }
      });
    }
    audiovideoREsourcing();
  } else {
    audiovideoREsourcing();
  }

  if ($("[data-type*='slideshow']").length > 0) {
    resizeSlideHeight();
  }
  if (window.isGradableActivity) {
    if ($('.style2NavigationBtns').length) {
      $('.style2NavigationBtns').addClass('style2NavBtnsPadding');
    }
  } else {
    if ($('.style2NavigationBtns').length) {
      if ($('.style2NavigationBtns').hasClass('style2NavBtnsPadding')) {
        $('.style2NavigationBtns').removeClass('style2NavBtnsPadding')
      }
    }
  }


});
$(document).ready(function () {
      setTimeout(function () {
        // Helper to load CSS
        function loadCSS(href) {
            var link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = href;
            document.head.appendChild(link);
        }

        // Helper to load JS
        function loadJS(src, onSuccess, onError) {
            var script = document.createElement('script');
            script.src = src;
            script.onload = onSuccess;
            script.onerror = onError;
            document.head.appendChild(script);
        }

        // Paths
        const basePath = './assets/externalModules/LiteracySEJodit050625/';
        const joditCSS = basePath + 'jodit.min.css';
        const joditJS = basePath + 'jodit.min.js';
        const mathLiveJs = 'https://cdn.jsdelivr.net/npm/mathlive/mathlive.min.js';
        const speechCSS = basePath + 'plugins/speech-recognize/speech-recognize.min.css';
        const speechJS = basePath + 'plugins/speech-recognize/speech-recognize.min.js';

        // Load Jodit CSS and Speech Recognize CSS
        loadCSS(joditCSS);
        loadCSS(speechCSS);
        loadJS(mathLiveJs);

        // Load Jodit JS first, then Speech Recognize JS after it's loaded
        loadJS(
            joditJS,
            function () {
                if (typeof Jodit === 'function') {
                    console.log(' Jodit loaded successfully');

                    // Now load speech-recognize plugin
                    loadJS(
                        speechJS,
                        function () {
                            console.log(' Speech Recognize plugin loaded');
                        },
                        function () {
                            console.error(' Failed to load Speech Recognize JS');
                        }
                    );
                } else {
                    console.error(' Jodit is not defined after loading');
                }
            },
            function () {
                console.error(' Failed to load Jodit JS');
            }
        );
    }, 0);

  // window.parent.postMessage({
  //   'player': 'ready'
  // }, '*');

   if (document.referrer) {
      const parentOrigin = new URL(document.referrer).origin;
      window.parent.postMessage({
        'player': 'ready'
      }, parentOrigin);
    }

  $('.group-interactivity-container.style2 .question-container-box').each((index, item) => {
    let len = $(item).find('.question-container').length;
    $(item).width(len * 100 + "%");
    $(item).css('display','');
    $(item).attr('activeSlide', 1);
    $(item).find('.question-container').css('min-width', 'calc(100% / ' + len + ')').css('max-width', 'calc(100% / ' + len + ')');
    $(item).parents('.group-interactivity-container').find('.style2NavigationBtns .numbersContainer .number').eq(0).addClass('active');
  });

  var customClassObjects = [].slice.call(document.querySelectorAll(".preview-row-container .customClass .headerTitle, .preview-row-container .customClass .header-data"));
  let customClassScrollObserver = new IntersectionObserver(function (entries, observer) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        // var pageNo = parseInt($(entry.target).parents('.customClass').attr('data-saved-index').split('-')[1]);
        // var uiid = 'ui-id-' + $(entry.target).parents('.customClass').attr('data-saved-index').split('ui-id-')[1];
        var dataTocUid = $(entry.target).parents('.customClass').attr('data-saved-index');
        if ($(entry.target).parents('.customClass').attr('data-type') == 'chapter-headingNew-h1' || $(entry.target).parents('.customClass').attr('data-type') == 'header') {
          // console.log(dataTocUid);
          $(window.parent.document.body).find('.pageSubContent li').removeClass('activeTocItem');
          $(window.parent.document.body).find('.pageSubContent li[data-toc-uid=' + dataTocUid + ']').addClass('activeTocItem');

                // $(window.parent.document.body).find('.pageSubContent').removeClass('active');
                // $(window.parent.document.body).find('.pageSubContent li[data-toc-uid='+dataTocUid+']').parents('.pageSubContent').addClass('active');
              }		    
            }
          });
        });
      customClassObjects.forEach(function(customClass) {
        customClassScrollObserver.observe(customClass);
      });
      setTimeout(() => {
        if($('.preview-row-container').length){
          $(window.parent.document.body).find('.pageSubContent li').removeClass('activeTocItem');
          $(window.parent.document.body).find('.pageSubContent li').eq(0).addClass('activeTocItem');
        }
        if($('#applyToAllStyleSetting').length){
          var applyAllStyleSettingJson = JSON.parse($('#applyToAllStyleSetting').html());
          processOfflineApplyToAllStyleSetting(applyAllStyleSettingJson);
        }else if(window.applyAllStyleSettingJson != undefined || window.parent.applyAllStyleSettingJson != undefined){
          if(window.applyAllStyleSettingJson != undefined){
            processOfflineApplyToAllStyleSetting(window.applyAllStyleSettingJson);
          }else if(window.parent.applyAllStyleSettingJson != undefined){
            processOfflineApplyToAllStyleSetting(window.parent.applyAllStyleSettingJson);
          }
        }
        if(window.defaultFontName){
          $(":root")[0].style.setProperty('--defaultFont', window.defaultFontName);
          $('body article').addClass('defaultFontName');
        }
        if(window.applyAllStyleSettingJson && window.applyAllStyleSettingJson.defaultFontName){
          $(":root")[0].style.setProperty('--defaultFont', window.applyAllStyleSettingJson.defaultFontName);
          $('body article').addClass('defaultFontName');
        }
        $('.customClass[data-type="multiple-choice-template"] .component-holder.card-style3 .form-row').each(function(idx, itm){
          let color = $(itm).find('label.mcq-options').css('background-color');
          $(itm).css('background-color', color);
          $(itm).find('label.mcq-options').css('background-color', '');
        })
        $('.customClass[data-type="true-false-template"] .component-holder.card-style3 .form-row').each(function(idx, itm){
          let color = $(itm).find('label.mcq-options').css('background-color');
          $(itm).css('background-color', color);
          $(itm).find('label.mcq-options').css('background-color', '');
        })
      }, 500);	
      selectionFix();
      if (window.isGradableActivity) {
        if ($('.customClass[data-type="group-interactivity-template"]').length) {
          $('.customClass[data-type="group-interactivity-template"]').find('.group-interactivity-btn .showMeReset_container').empty();
        }
      }
      if($('body article').parents('.preview-row-container').length){
        $('body article').removeClass('hide');
        $('body .authoringLoader').addClass('hide');
      }
      if (!window.isGradableActivity) {
        $('body article').removeClass('hide');
        $('body .authoringLoader').addClass('hide');
      }
      if (typeof apiHandle != "undefined" && apiHandle == null) {
        $('body article').removeClass('hide');
        $('body .authoringLoader').addClass('hide');
      }
      if (window.gradableActivitySettingsJSON && !window.gradableActivitySettingsJSON.durationEnable) {
        $('body article').find('.groupActivityAssessmentTimingContainer').css('display', 'none');
      }
});     

window.initGradableScreen = function(){
  if(apiHandle && window.isGradableActivity && $('.customClass[data-type="group-interactivity-template"]').length > 0){
    $('body article').hide();
    $('body article').removeClass('hide');
    $('body .authoringLoader').addClass('hide');
    if(!window.gradableActivitySettingsJSON.durationEnable){
      window.gradableActivitySettingsJSON.durationMin = 0;
      window.gradableActivitySettingsJSON.durationSec = 0;
      window.gradableActivitySettingsJSON.ogTime = "0:0";
    }
    let gradableJSON = window.gradableActivitySettingsJSON;
    let mcqCount = $('.customClass[data-type="multiple-choice-template"]').length;
    let fibCount = $('.customClass[data-type="fill-in-the-blank"] .fib-questions .form-row').length;
    let mtpCount = $('.customClass[data-type="match-the-pairs"]').length;
    let ILCount = $('.customClass[data-type="imagelabelling"]').length;
    let highlightCount = $('.customClass[data-type="highlight"] .highLight-questions .form-row').length;
    let ShortLongCount = $('.customClass[data-type="shortLongAns"]').length;
    let identifyTheClipCount = $('.customClass[data-type="identify-the-clip"]').length;
    let correctionCount = $('.customClass[data-type="correction"] .correction-questions .form-row').length;
    let categorizeCount = $('.customClass[data-type="Categorize"]').length;
    let questionCount = mcqCount + fibCount + mtpCount + ILCount + highlightCount + ShortLongCount + correctionCount + identifyTheClipCount + categorizeCount;
    let appendingContainer;

    // $('.group-interactivity-container .group-interactivity-btn .sc-submit.submit-btn').addClass('gradableActivitySubmitBtn');

    if (!gradableJSON.points) {
      gradableJSON['points'] = 0;
    }
    if ($('.preview-row-container').length > 0) {
      appendingContainer = $('.preview-row-container');
    } else {
      appendingContainer = $('body');
    }
    let durationHtml = '';
    if (window.gradableActivitySettingsJSON.durationEnable) {
      durationHtml = `and ` + gradableJSON.durationMin + `.` + gradableJSON.durationSec + ` minutes`
    }
    var parser = new DOMParser();
    var appendhtml = `
    <div class="gradableActivitySummaryContainer">
      <div class="gradableHeaderSection">
        <h3>` + gradableJSON.courseName + `</h3>
        <p>You have 1 attempt ` + durationHtml + ` to complete 
        the assessment.</p>
      </div>
      <div class="gradableBodySection">
        <div class="gradableBox">
          <div class="gradableScoringDetails">
            <div class="pointsItem"><span class="header-kitaboo-icon icon-Feedback"></span><span class="itemDetail"><span class="highlight">` + questionCount + `</span><br />Questions</span></div>
            <div class="pointsItem"><span class="header-kitaboo-icon icon-Total"></span><span class="itemDetail"><span class="highlight">` + gradableJSON.points + `</span> Points<br />Per Question</span></div>
          </div>
          <div class="gradableScoringDetails">
            <div class="pointsItem gradableDuration"><span class="header-kitaboo-icon icon-Duration"></span><span class="itemDetail"><span class="highlight">` + gradableJSON.durationMin + `:` + gradableJSON.durationSec + `</span> min<br />Duration</span></div>
            <div class="pointsItem"><span class="header-kitaboo-icon icon-Total"></span><span class="itemDetail"><span class="highlight">` + (questionCount * gradableJSON.points) + `</span> Points<br />Total Points</span></div>
          </div>
        </div>
        <div class="gradableStartBtnContainer">
          <button class="startGradableActivity">Start Assessment</button>
        </div>
      </div>
    </div>
    `;
    var el = parser.parseFromString(appendhtml, "text/html");
    appendingContainer.append($(el).contents()[0].childNodes[1].childNodes[0]);

    if (!window.gradableActivitySettingsJSON.durationEnable) {
      $('.gradableBox').css("display", "flex");
      $('.gradableBox').css("margin-top", "5%");
      $('.gradableDuration').css("display", "none");
      $('.groupActivityAssessmentTimingContainer').css("display", "none");
      $('.gradableActivitySummaryContainer .gradableBodySection .gradableScoringDetails:nth-child(1)').css("border", "none");
      $('.gradableActivitySummaryContainer .gradableBodySection .gradableScoringDetails:nth-child(2)').css("border-left", "1px solid #D8D8D8");
    }

    $(document).on('click', '.startGradableActivity', function (event) {
      $('body article').show();
      $('.gradableActivitySummaryContainer').remove();
      window.gradableMins = window.gradableActivitySettingsJSON.durationMin;
      window.gradableSec = window.gradableActivitySettingsJSON.durationSec;
      $('.groupActivityAssessmentTimingContainer .minutes').html(window.gradableMins);
      $('.groupActivityAssessmentTimingContainer .seconds').html(window.gradableSec);
      let d = new Date();
      let tm = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
      // $('.customClass').attr('activityStartTime', tm);
      // $('.customClass').attr('latencyTime', tm);
      $('.customClass').each(function (index, item) {
        if (!$(item).attr('activityStartTime')) {
          $(item).attr('activityStartTime', tm);
        }
        if (!$(item).attr('latencyTime')) {
          $(item).attr('latencyTime', tm);
        }
      });
      gradableTimingFunction();
      if ($('[data-type="match-the-pairs"]').length) {
        mtpResize();
      }
      if ($('[data-type="fill-in-the-blank"]').length) {
        fibDragDropResizing();
      }
      $(window).trigger('resize');
      setTimeout(() => {
        $("[data-type='flashcard']").each(function () {
          var width = $(this).width();
          $(this).find('.bxslider .slideshowContainer').css('width', (width - 30) + 'px');
        });
      }, 500);
      if($('.customClass[data-type="group-interactivity-template"]').eq(0).find('.group-interactivity-container').hasClass('style2')){
        $('.customClass[data-type="group-interactivity-template"]').eq(0).attr('id', 'activeAssessment');
      }
    });

    // send message to player for Gradable Activity mode  
    if (window.isGradableActivity) {
      var message = {
        "isGradableActivity": window.isGradableActivity ? window.isGradableActivity : false
      }
     // window.parent.postMessage(message, "*");
      if (document.referrer) {
          const parentOrigin = new URL(document.referrer).origin;
          window.parent.postMessage(message, parentOrigin);
      }
    }
    
  } else {
    $('body article').removeClass('hide');
    $('body .authoringLoader').addClass('hide');
  }
}

window.gradableAssessmentComplete = function(scoObj){
  let appendingContainer;
  let gradableJSON = window.gradableActivitySettingsJSON;
  
  let startTime = window.gradableActivitySettingsJSON.durationMin +":"+ window.gradableActivitySettingsJSON.durationSec;
  let endTime = window.gradableActivitySettingsJSON.ogTime
  if(window.gradableActivitySettingsJSON.durationEnable){
      endTime = window.gradableMins+":"+ window.gradableSec;
  }
  // let endTime = window.gradableMins+":"+ window.gradableSec;
  let finalTime = window.timeDiff(startTime, endTime);
  let totalMarks = Number(scoObj.marks.correct + scoObj.marks.incorrect + scoObj.marks.partialCorrect + scoObj.marks.unanticipated) * window.gradableActivitySettingsJSON.points;
  let subTitle = "You have attempted the asessment in "+ finalTime +" minutes."
  let totalPoints = Math.round(+(window.gradableActivitySettingsJSON.points * scoObj.marks.marks)) +`/`+totalMarks;

  let score = scoObj.marks.correct * scoObj.gradableActivitySettingsJSON.points;
  let maxScore = scoObj.marks.total * scoObj.gradableActivitySettingsJSON.points;
  let passingPercentage = window.gradableActivitySettingsJSON.passingPercentage;
  let percent = +((scoObj.gradableActivitySettingsJSON.points * scoObj.marks.marks)/maxScore) * 100;
  let passingStatus = "failed";
  if(percent >= passingPercentage){
    passingStatus = 'passed';
  }

  let resultObj = {};
  resultObj.courseName = gradableJSON.courseName;
  resultObj.subTitle = subTitle;
  resultObj.correct = scoObj.marks.correct;
  resultObj.incorrect = scoObj.marks.incorrect;
  resultObj.partialCorrect = scoObj.marks.partialCorrect;
  resultObj.unanticipated = scoObj.marks.unanticipated;
  resultObj.finalTime = finalTime;
  resultObj.totalPoints = totalPoints;
  resultObj.showAnswer = gradableJSON.showAnswer;
  resultObj.passingStatus = passingStatus;
  resultObj.correctFeedback = gradableJSON.correctFeedback;
  resultObj.incorrectFeedback = gradableJSON.incorrectFeedback;
  resultObj.manualFeedback = gradableJSON.manualFeedback;
  resultObj.showViewAssessmentBtn = true;
  resultObj.source = 'player';

  window.showGradableResult(resultObj);
  window.clearGradableInterval();
  if (window.isCertificateEnableForCourse) {
    window.createAssessmentCertificate(resultObj, certificateTemplate[certificateTemplate.length-1]);
  }
}

window.createAssessmentCertificate = function (resultObj, certificateObj) {
  var baseUrl = "https://qawidgets.kitaboo.com/";
  if($('body article').data("platform") == 'prod' && $('body article').data("lang") == 'en_US'){
    baseUrl = "https://widgets.kitaboo.com/";
  }else if($('body article').data("platform") == 'prod' && $('body article').data("lang") == 'en_EU'){
    baseUrl = "https://widget.kitaboo.eu/";
  }
  var urlParams = "CAPS/kwidget/services/assessment/certificate";
  var certJSON = JSON.parse(certificateObj.metadata);
  var totalMarks = resultObj.totalPoints.split('/')[1];
  var marksObtained = resultObj.totalPoints.split('/')[0];
  var percentObtained = (marksObtained / totalMarks) * 100;
  var score = Math.round(percentObtained) + '%';
  certificateUserData.passingStatus = resultObj.passingStatus;
  if (certJSON.settings.scoreType == 'cert-grade') {
    var floorScore = Math.round(percentObtained);
    switch (true) {
      case floorScore >= 90 && floorScore <= 100:
        score = 'A+';
        break;
      case floorScore >= 85 && floorScore <= 89:
        score = 'A';
        break;
      case floorScore >= 80 && floorScore <= 84:
        score = 'A-';
        break;
      case floorScore >= 75 && floorScore <= 79:
        score = 'B+';
        break;
      case floorScore >= 70 && floorScore <= 74:
        score = 'B';
        break;
      case floorScore >= 65 && floorScore <= 69:
        score = 'B-';
        break;
      case floorScore >= 60 && floorScore <= 64:
        score = 'C+';
        break;
      case floorScore >= 55 && floorScore <= 59:
        score = 'C';
        break;
      case floorScore >= 50 && floorScore <= 54:
        score = 'C-';
        break;
      case floorScore >= 40 && floorScore <= 49:
        score = 'D';
        break;
      case floorScore >= 0 && floorScore <= 39:
        score = 'F';
        break;
      default:
        score = Math.round(percentObtained) + '%';
        break;
    }
  }
  var date = new Date();
  var data = {
    "courseId": certificateObj.courseID.toString(),
    "courseName": certificateObj.courseName,
    "userFirstName": certificateUserData.userFirstName,
    "userLastName": "",
    "isGradaOrPercentage": certJSON.settings.scoreType == "cert-percentage" ? "percentage" : "grade",
    "courseCompletionScore": score,
    "certificateStyle": certJSON.activeStyle,
    "courseCompletionDate": date.getDate() + ' ' + date.toLocaleString('default', {'month': 'long'}) + ' ' + date.getFullYear(),
    "courseCompletionTime": (date.getHours() < 10? '0':'')+ date.getHours() + ':' + (date.getMinutes() < 10? '0':'')+ date.getMinutes()
  };
  certificateUserData.courseName = certificateObj.courseName;
  certificateUserData.courseCompletionDate = date.getDate() + ' ' + date.toLocaleString('default', {'month': 'long'}) + ' ' + date.getFullYear();
  certificateUserData.courseCompletionTime = (date.getHours() < 10? '0':'')+ date.getHours() + ':' + (date.getMinutes() < 10? '0':'')+ date.getMinutes();
  certificateUserData.isGradaOrPercentage = certJSON.settings.scoreType == "cert-percentage" ? "percentage" : "grade";
  certificateUserData.courseCompletionScore = score;
  certificateUserData.certificateStyle = certJSON.activeStyle;
  certificateUserData.clientId = certificateObj.clientID;
  $.ajax({
    url: baseUrl + urlParams,
    type: 'POST',
    contentType: 'application/json',
    headers: {
      'userToken': certificateUserData.userToken,
      "apiKey": "ActivitySchedularAPIKey"
    },
    data: JSON.stringify(data),

    success: function (responseData) {
      console.log(responseData);
      var resp = responseData.assessmentCertificateList[responseData.assessmentCertificateList.length - 1];
      if (certificateUserData.passingStatus == "passed") {
        $('.viewCertificate').removeClass('hideCertificate');
      } else if (certificateUserData.passingStatus == "failed") {
        if (!(window.gradableActivitySettingsJSON.points && window.gradableActivitySettingsJSON.passingPercentage)) {
          $('.viewCertificate').removeClass('hideCertificate');
        }
      }
    },
    error: function (error) {
      console.log(error);
    }
  });
}

window.getCertificateData = function (resultObj) {
  var baseUrl = "https://qawidgets.kitaboo.com/";
  if($('body article').data("platform") == 'prod' && $('body article').data("lang") == 'en_US'){
    baseUrl = "https://widgets.kitaboo.com/";
  }else if($('body article').data("platform") == 'prod' && $('body article').data("lang") == 'en_EU'){
    baseUrl = "https://widget.kitaboo.eu/";
  }
  var urlParams = "CAPS/kwidget/services/assessment/certificate";
  var certJSON = JSON.parse(window.certificateTemplate[1].metadata) ;
  var totalMarks = resultObj.totalPoints.split('/')[1];
  var marksObtained = resultObj.totalPoints.split('/')[0];
  var percentObtained = (marksObtained / totalMarks) * 100;
  var score = Math.round(percentObtained) + '%';
  certificateUserData.passingStatus = resultObj.passingStatus;
  if (certJSON.settings.scoreType == 'cert-grade') {
    var floorScore = Math.round(percentObtained);
    switch (true) {
      case floorScore >= 90 && floorScore <= 100:
        score = 'A+';
        break;
      case floorScore >= 85 && floorScore <= 89:
        score = 'A';
        break;
      case floorScore >= 80 && floorScore <= 84:
        score = 'A-';
        break;
      case floorScore >= 75 && floorScore <= 79:
        score = 'B+';
        break;
      case floorScore >= 70 && floorScore <= 74:
        score = 'B';
        break;
      case floorScore >= 65 && floorScore <= 69:
        score = 'B-';
        break;
      case floorScore >= 60 && floorScore <= 64:
        score = 'C+';
        break;
      case floorScore >= 55 && floorScore <= 59:
        score = 'C';
        break;
      case floorScore >= 50 && floorScore <= 54:
        score = 'C-';
        break;
      case floorScore >= 40 && floorScore <= 49:
        score = 'D';
        break;
      case floorScore >= 0 && floorScore <= 39:
        score = 'F';
        break;
      default:
        score = Math.round(percentObtained) + '%';
        break;
    }
  }
  certificateUserData.courseCompletionScore = score;
  $.ajax({
    url: baseUrl + urlParams,
    type: 'GET',
    contentType: 'application/json',
    headers: {
      'userToken': certificateUserData.userToken,
      "courseId": window.certificateTemplate[window.certificateTemplate.length - 1].courseID,
      "apiKey": "ActivitySchedularAPIKey"
    },
    success: function (responseData) {
      console.log(responseData);
      var resp = responseData.assessmentCertificateList[responseData.assessmentCertificateList.length - 1];
      certificateUserData.courseName = resp.courseName;
      certificateUserData.courseCompletionDate = resp.courseCompletionDate;
      certificateUserData.courseCompletionTime = resp.courseCompletionTime;
      certificateUserData.isGradaOrPercentage = resp.isGradaOrPercentage;
      certificateUserData.certificateStyle = resp.certificateStyle
      certificateUserData.clientId = resp.clientId;
      certificateUserData.userFirstName = resp.userFirstName;
      if (certificateUserData.passingStatus == "passed") {
        $('.viewCertificate').removeClass('hideCertificate');
      } else if (certificateUserData.passingStatus == "failed") {
        if (!(window.gradableActivitySettingsJSON.points && window.gradableActivitySettingsJSON.passingPercentage)) {
          $('.viewCertificate').removeClass('hideCertificate');
        }
      }
    },
    error: function (error) {
      console.log(error);
    }
  });
}

window.showGradableResult = function (resultObj) {
  window.stopAudioVideo();
  $('.gradableActivitySummaryContainer').remove();
  $('body article').hide();
  if ($('.preview-row-container').length > 0) {
    appendingContainer = $('.preview-row-container');
  } else {
    appendingContainer = $('body');
  }

  let tempTime = window.gradableActivitySettingsJSON.durationMin + ":" + window.gradableActivitySettingsJSON.durationSec;
  let timeTaken2 = tempTime;
  if (tempTime != window.gradableActivitySettingsJSON.ogTime) {
    if (resultObj.source == 'player') {
      let temp = window.timeDiff(tempTime, resultObj.finalTime)
      timeTaken2 = window.timeDiff(window.gradableActivitySettingsJSON.ogTime, temp);
    } else {
      timeTaken2 = window.timeDiff(window.gradableActivitySettingsJSON.ogTime, tempTime);
    }
  } else {
    if (resultObj.remainingTime) {
      timeTaken2 = window.timeDiff(window.gradableActivitySettingsJSON.ogTime, resultObj.remainingTime);
    } else {
      timeTaken2 = resultObj.finalTime;
    }
  }
  if (resultObj.showAnswer == "auto") {
    let showUnanticipated = "";
    let minWidth = '';

    if ($('.customClass[data-type="shortLongAns"]').length) {
      minWidth = '25%';
      showUnanticipated = `<div class="pointsItem" style="min-width: ` + minWidth + `; border-right: 1px solid #D8D8D8;"><span class="header-kitaboo-icon icon-partial-Marking"></span><span class="itemDetail"><span class="highlight">` + resultObj.partialCorrect + `</span><br />Partial</span></div>
      <div class="pointsItem" style="min-width: ` + minWidth + `"><span class="header-kitaboo-icon icon-unanticipated"></span><span class="itemDetail"><span class="highlight">` + resultObj.unanticipated + `</span><br />Unanticipated</span></div>`;
    } else {
      minWidth = '33%';
      showUnanticipated = `<div class="pointsItem" style="min-width: ` + minWidth + `"><span class="header-kitaboo-icon icon-partial-Marking"></span><span class="itemDetail"><span class="highlight">` + resultObj.partialCorrect + `</span><br />Partial</span></div>`;
    }
    var parser = new DOMParser();
    var appendhtml = `
    <div class="gradableActivitySummaryContainer">
    <div class="gradableHeaderSection">
      <h3>` + resultObj.courseName + `</h3>
    </div>
    <div class="gradableBodySection">
      <div class="gradableScoringDetails gradableScoringAfterSubmit">
        <div class="pointsItem" style="min-width: ` + minWidth + `"><span class="header-kitaboo-icon icon-Check"></span><span class="itemDetail"><span class="highlight">` + resultObj.correct + `</span><br />Correct</span></div>
        <div class="pointsItem" style="min-width: ` + minWidth + `; border-right: 1px solid #D8D8D8;"><span class="header-kitaboo-icon icon-Close"></span><span class="itemDetail"><span class="highlight">` + resultObj.incorrect + `</span><br />Incorrect</span></div> 
        ` + showUnanticipated + ` 
        <div class="pointsItem gradableDuration" style="min-width: ` + minWidth + `"><span class="header-kitaboo-icon icon-Duration"></span><span class="itemDetail"><span class="highlight">` + timeTaken2 + `</span> min<br />Time Taken</span></div>
        <div class="pointsItem" style="min-width: ` + minWidth + `"><span class="header-kitaboo-icon icon-Total"></span><span class="itemDetail"><span class="highlight">` + resultObj.totalPoints + `</span><br />Your Score/Total Points</span></div>
      </div>
      <div class="gradableStartBtnContainer">
        <!-- <button class="startGradableActivity">Start Assessment</button> -->
      </div>
    </div>
  </div>
  `;
    var el = parser.parseFromString(appendhtml, "text/html");
    appendingContainer.append($(el).contents()[0].childNodes[1].childNodes[0]);
    if (!window.gradableActivitySettingsJSON.durationEnable) {
      $('.gradableScoringAfterSubmit').css("width", "740px");
      $('.gradableBox').css("margin-top", "5%");
      $('.gradableDuration').css("display", "none");
      //  $('.gradableScoringAfterSubmit .pointsItem:nth-child(2)').css("border-right","none");
      //  $('.gradableScoringAfterSubmit .pointsItem:nth-child(3)').css({"border-bottom":"none","margin-left":"2px"});
    }
    if (resultObj.passingStatus == 'failed') {
      if (resultObj.incorrectFeedback == "" && resultObj.totalPoints != '0/0') {
        resultObj.incorrectFeedback = "You have failed the assessment."
        appendingContainer.find(".gradableBodySection .gradableStartBtnContainer").append(`
          <div class="passingFeedback" style="color: red;">` + resultObj.incorrectFeedback + `</div>
        `);
      }
      if (resultObj.totalPoints == '0/0') {
        resultObj.correctFeedback = "You have successfully completed the assessment activity."
        appendingContainer.find(".gradableBodySection .gradableStartBtnContainer").append(`
          <div class="passingFeedback" style="color: green;">` + resultObj.correctFeedback + `</div>
        `);
      }
      // appendingContainer.find(".gradableBodySection .gradableStartBtnContainer").append(`
      //   <div class="passingFeedback" style="color: red;">` + resultObj.incorrectFeedback + `</div>
      // `);
    } else {
      if (resultObj.correctFeedback == "") {
        resultObj.correctFeedback = "You have passed the assessment."
      }
      appendingContainer.find(".gradableBodySection .gradableStartBtnContainer").append(`
        <div class="passingFeedback" style="color: green;">` + resultObj.correctFeedback + `</div>
      `);
    }
    // let showHideCertificateBtn = "";
    // if(window.isCertificateEnableForCourse){
    //   showHideCertificateBtn = "";
    // }else{
    //   showHideCertificateBtn = "style='display: none;'";
    // }
    if (resultObj.showViewAssessmentBtn) {
      appendingContainer.find(".gradableBodySection .gradableStartBtnContainer").append(`
          <button class="viewGradableActivityResult">View Assessment</button>
          <button class="viewCertificate hideCertificate">View Certificate</button>
      `);
    }
  } else {
    if (resultObj.manualFeedback == "") {
      resultObj.manualFeedback = "Thank you for submitting the assessment. <br/> You have successfully submitted your assignment. The teacher will review your assignment and provide the result shortly."
    }
    var parser = new DOMParser();
    var appendhtml = `
    <div class="gradableActivitySummaryContainer" id="manualFeedbackSummaryContainer">
    <div class="gradableBodySection">
      <img src="./images/assesmentSubmitted.png" alt="assessment-submitted" class="gradableAssesmentImage" />
      <div class="gradableMessageSection">
          <p>` + resultObj.manualFeedback + `</p>
      </div>
    </div>
  </div>
    `;
    var el = parser.parseFromString(appendhtml, "text/html");
    appendingContainer.append($(el).contents()[0].childNodes[1].childNodes[0]);
  }

  $(window).scrollTop(0);
  $(document).on('click', '.viewGradableActivityResult', function (event) {
    $('.gradableActivitySummaryContainer').remove();
    $('body article').show();
    if ($('[data-type="match-the-pairs"]').length) {
      mtpResize();
    }
    if ($('[data-type="fill-in-the-blank"]').length) {
      fibDragDropResizing();
    }
    if ($('[data-type="flashcard"]').length) {
      setTimeout(() => {
        $("[data-type='flashcard']").each(function () {
          var width = $(this).width();
          $(this).find('.bxslider .slideshowContainer').css('width', (width - 30) + 'px');
        });
      }, 500);
    }
    if($('.customClass[data-type="group-interactivity-template"]').eq(0).find('.group-interactivity-container').hasClass('style2')){
      $('.customClass[data-type="group-interactivity-template"]').eq(0).attr('id', 'activeAssessment');
    }
    setTimeout(() => {
      $('.auth-equation-holder').each(function (i) {
        $(this).empty();
        setLatexData(this, $(this).attr('data-equation-latex'));
        if ($(this).parents(".component-holder") && $(this).parents(".component-holder").hasClass("drag-and-drop")) {
          setTimeout(() => {
            let hgt = $(this).height() + 20;
            let wdt = $(this).width() + 20;
            $(this).parents('.form-control-wrap').height(hgt).css('min-width', wdt);
            if ($(this).parents('.form-control-wrap').attr('datadragwidth') !== undefined) {
              $(this).parents('.form-control-wrap').css('width', $(this).parents('.form-control-wrap').attr('datadragwidth'))
            } else {
              $(this).parents('.form-control-wrap').css('width', 'auto')
            }
          }, 1000);
        }
      });
    }, 1000);
  });
  $(document).on('click', '.viewCertificate', function (event) {
    $('.gradableActivitySummaryContainer').hide();
    window.showCertificate();
  });
  $(document).on('click', '.certificateControlContainer .backbtncontainer', function (event) {
    $('.certificateContainer').remove();
    $('.gradableActivitySummaryContainer').show();
  });
  // $(document).on('click', '.certificateControlContainer .printcertificate', function (event) {
  //   event.preventDefault();
  //   event.stopPropagation();
  //   event.stopImmediatePropagation();

  //   var HTML_Width = $(".certificate-mainPage").width();
  //   var HTML_Height = $(".certificate-mainPage").height();
  //   var top_left_margin = 0;
  //   var PDF_Width = HTML_Width + (top_left_margin * 2);
  //   var PDF_Height = HTML_Height + (top_left_margin * 2);
  //   var canvas_image_width = HTML_Width;
  //   var canvas_image_height = HTML_Height;

  //   html2canvas(document.querySelector(".certificate-mainPage"), {quality: 2, scale: 2}).then(canvas => {
  //     var img = canvas.toDataURL("image/png");
  //     var pdf = new jsPDF('l', 'pt', [PDF_Width, PDF_Height]);
  //     pdf.addImage(img, 'PNG', top_left_margin, top_left_margin, canvas_image_width, canvas_image_height);
  //     pdf.autoPrint();
  //     window.open(pdf.output("bloburl", { filename: "certificate.pdf" }),"_blank");
  //   });
  // });
  $(document).on('click', '.certificateControlContainer .downloadcertificate', function (event) {
    event.preventDefault();
    event.stopPropagation();
    event.stopImmediatePropagation();
    $(this).attr('disabled', 'disabled');
    $(this).text('Downloading...');
    var HTML_Width = $(".certificate-mainPage").width();
    var HTML_Height = $(".certificate-mainPage").height();
    var top_left_margin = 0;
    var PDF_Width = HTML_Width + (top_left_margin * 2);
    var PDF_Height = HTML_Height + (top_left_margin * 2);
    var canvas_image_width = HTML_Width;
    var canvas_image_height = HTML_Height;

    html2canvas(document.querySelector(".certificate-mainPage"), {quality: 2, scale: 2}).then(canvas => {
      var img = canvas.toDataURL("image/png");
      var pdf = new jsPDF('l', 'pt', [PDF_Width, PDF_Height]);
      pdf.addImage(img, 'PNG', top_left_margin, top_left_margin, canvas_image_width, canvas_image_height);
      let devicetype = sessionStorage.getItem('devicetype');
      if(devicetype){
        pdf.save("certificate.pdf");
        $('.certificateControlContainer .downloadcertificate').removeAttr('disabled').text('Download');
      }else{
        var fd = new FormData();
        fd.append('file', new Blob([pdf.output('arraybuffer')], {type: "application/pdf"}));
        var baseUrl = "https://qawidgets.kitaboo.com/";
        if($('body article').data("platform") == 'prod' && $('body article').data("lang") == 'en_US'){
          baseUrl = "https://widgets.kitaboo.com/";
        }else if($('body article').data("platform") == 'prod' && $('body article').data("lang") == 'en_EU'){
          baseUrl = "https://widget.kitaboo.eu/";
        }
        var urlParams = "CAPS/kwidget/services/assessment/uploadCertificate";
        const url = baseUrl + urlParams;
        const method = 'post';
        const xhr = new XMLHttpRequest();  
        xhr.open(method, url);
        xhr.setRequestHeader('userToken', certificateUserData.userToken);
        xhr.setRequestHeader('courseId', window.certificateTemplate[window.certificateTemplate.length - 1].courseID);
        xhr.setRequestHeader('apiKey', "ActivitySchedularAPIKey");
        xhr.send(fd);
        xhr.addEventListener('loadend', () => {
          if (xhr.status === 200) {
            var urlParams1 = "CAPS/kwidget/services/assessment/certificate"
            $.ajax({
              url: baseUrl + urlParams1,
              type: 'GET',
              contentType: 'application/json',
              headers: {
                'userToken': certificateUserData.userToken,
                "courseId": window.certificateTemplate[window.certificateTemplate.length - 1].courseID,
                "apiKey": "ActivitySchedularAPIKey"
              },
              success: function (responseData) {
                console.log(responseData.certificateUrl);
                var link = document.createElement("a");
                link.setAttribute('download', 'Certificate.pdf');
                link.href = responseData.certificateUrl;
                document.body.appendChild(link);
                link.click();
                link.remove();
                $('.certificateControlContainer .downloadcertificate').removeAttr('disabled').text('Download');
              },
              error: function (error) {
                console.log('Error Fetching Certificate');
                $('.certificateControlContainer .downloadcertificate').removeAttr('disabled').text('Download');
              }
            });
          } else {
            console.log('Error Uploading Certificate');
            $('.certificateControlContainer .downloadcertificate').removeAttr('disabled').text('Download');
          }
        });
      }
    });
  }); 
}

window.showCertificate = function(){
  $('.certificateContainer').remove();
  let appendingContainer;
  if ($('.preview-row-container').length > 0) {
    appendingContainer = $('.preview-row-container');
  } else {
    appendingContainer = $('body');
  }
  var parser = new DOMParser();
  let appendhtml =  window.certificateTemplate[window.certificateTemplate.length - 1].template;
  // <div class="langdropdowncontainer"><span class="icon-Language langdropdowncontainerIcon"></span><select class="certificateLanguageSelect"><option>English</option></select></div>
  // <div class="printcontainer">
  // <span class="icon-Print printcontainerIcon"></span>
  // <button class="printcertificate">Print</button></div>
  let template = `
  <div class="certificateContainer">
    <div class="certificateControlContainer">
      <div class="backandlangcontainer">
        
        <div class="backbtncontainer">
        <span class="icon-back-arrow certBackIcon"></span>
        <button class="certificateback">Back</button></div>
        
      </div>
      <div class="printdownloadcontainer">
        <div class="downloadcontainer">
        <span class="icon-Download downloadcontainerIcon"></span>
        <button class="downloadcertificate">Download</button></div>
      </div>
    </div>
    <div class="certificateContentContainer">`+appendhtml+`</div>
  </div>
  `;
  var el = parser.parseFromString(template, "text/html");
  appendingContainer.append($(el).contents()[0].childNodes[1].childNodes[0]);
  $('.certificate-mainPage').find('.certificate-studentname').text(certificateUserData.userFirstName);
  $('.certificate-mainPage').find('.certificate-courseName').text(certificateUserData.courseName);
  $('.certificate-mainPage').find('.certificate-date').text(certificateUserData.courseCompletionDate);
  $('.certificate-mainPage').find('.certificate-time').text(certificateUserData.courseCompletionTime);
  $('.certificate-mainPage').find('.certificate-score').text(certificateUserData.courseCompletionScore);
  if(typeof JSConfetti != 'undefined'){
    var jsConfetti = new JSConfetti();
    jsConfetti.addConfetti({
      confettiColors: [
        "#ffbe0b","#fb5607","#ff006e","#8338ec","#3a86ff","#9b5de5","#f15bb5","#fee440","#00bbf9","#00f5d4"
      ],
    });    
    var applause = new Audio('images/applause.mp3');
    applause.loop = false;
    applause.play();
  }
}

window.timeAddition = function (startTime, endTime) {

  let startMin = startTime.split(':')[0];
  let startSec = startTime.split(':')[1];

  let endMin = endTime.split(':')[0];
  let endSec = endTime.split(':')[1];

  let totalMin = Number(startMin * 60) + Number(endMin * 60);
  let totalSec = Number(startSec) + Number(endSec);

  let finalTime = totalMin + totalSec;

  let finalMin = Math.floor(finalTime / 60);
  let finalSec = finalTime % 60;

  return finalMin + ':' + finalSec;
}

window.timeDiff = function (startTime, endTime) {
  let count = startTime.split(':').length;
  if (count == 2) {
    let startMin = startTime.split(':')[0];
    let startSec = startTime.split(':')[1];
    let endMin = endTime.split(':')[0];
    let endSec = endTime.split(':')[1];
    let totalStart = Number(startMin * 60) + Number(startSec);
    let totalEnd = Number(endMin * 60) + Number(endSec);
    let finalTime = totalStart - totalEnd;
    let finalMin = Math.floor(finalTime / 60);
    let finalSec = finalTime % 60;
    return finalMin + ':' + finalSec;
  } else if (count == 3) {
    let startHr = startTime.split(':')[0];
    let startMin = startTime.split(':')[1];
    let startSec = startTime.split(':')[2];
    let endHr = endTime.split(':')[0];
    let endMin = endTime.split(':')[1];
    let endSec = endTime.split(':')[2];
    let totalStart = Number(startHr * 3600) + Number(startMin * 60) + Number(startSec);
    let totalEnd = Number(endHr * 3600) + Number(endMin * 60) + Number(endSec);
    let finalTime = totalEnd - totalStart;
    let finalHr = Math.floor(finalTime / 3600);
    finalTime = finalTime - (finalHr * 3600);
    let finalMin = Math.floor(finalTime / 60);
    let finalSec = finalTime % 60;
    return finalHr + ':' + finalMin + ':' + finalSec;
  }
}

window.clearGradableInterval = function (data = 'normal') {
  if (gradableInterval != 0) {
    window.clearInterval(gradableInterval);
    gradableInterval = 0;
    window.gradableMins = 0;
    window.gradableSec = 0;
  }
  if (data == 'timeout') {
    if (window.gradableActivitySettingsJSON.durationEnable) {
      window.gradableActivitySettingsJSON.incorrectFeedback = "Session Timed Out!";
      let gradableJSON = window.gradableActivitySettingsJSON;
      let finalTime = window.gradableActivitySettingsJSON.durationMin + ":" + window.gradableActivitySettingsJSON.durationSec;
      let subTitle = "You have attempted the asessment in " + finalTime + " minutes.";
      let mcqCount = $('.customClass[data-type="multiple-choice-template"]').length;
      let fibCount = $('.customClass[data-type="fill-in-the-blank"] .fib-questions .form-row').length;
      let questionCount = mcqCount + fibCount;
      let startTime = gradableJSON.durationMin + ":" + gradableJSON.durationSec;
      let totalMarks = Number(questionCount) * window.gradableActivitySettingsJSON.points;
      let totalPoints = 0 + "/" + totalMarks;
      let passingStatus = "failed";

      let resultObj = {};
      resultObj.courseName = gradableJSON.courseName;
      resultObj.subTitle = subTitle;
      resultObj.correct = 0;
      resultObj.incorrect = 0;
      resultObj.partialCorrect = 0;
      resultObj.finalTime = startTime;
      resultObj.totalPoints = totalPoints;
      resultObj.showAnswer = gradableJSON.showAnswer;
      resultObj.passingStatus = passingStatus;
      resultObj.correctFeedback = gradableJSON.correctFeedback;
      resultObj.incorrectFeedback = gradableJSON.incorrectFeedback;
      resultObj.manualFeedback = gradableJSON.manualFeedback;

      resultObj.showViewAssessmentBtn = false;
      resultObj.source = 'player';

      window.showGradableResult(resultObj);

      LMSCommunicator.setLessonStatus('incomplete');
      LMSCommunicator.setScore(0);
      LMSCommunicator.setMaximumScore(totalMarks);
      LMSCommunicator.setMinimumScore(0);

      let pageNo = $('.customClass[data-type="group-interactivity-template"]').eq(0).attr('data-page-no');
      let componentkey = $('.customClass[data-type="group-interactivity-template"]').eq(0).attr('data-saved-index');
      let scoObj = {};
      scoObj.remainingTime = "0:0";
      scoObj.lessonStatus = 'incomplete';
      scoObj.pageId = pageNo;
      scoObj.componentkey = componentkey;
      saveAction(event, scoObj);
    }
  }
}

function gradableTimingFunction() {
  if (gradableInterval == 0) {
    gradableInterval = setInterval(() => {
      if (window.gradableSec == 0) {
        if (window.gradableMins == 0) {
          console.log('Assessment Time Completed, Please submit Assessment.');
          window.clearGradableInterval('timeout');
        } else {
          window.gradableMins = window.gradableMins - 1;
          window.gradableSec = 59;
        }
      } else {
        window.gradableSec = window.gradableSec - 1;
        if (apiHandle) {
          let pageNo = $('.customClass[data-type="group-interactivity-template"]').eq(0).attr('data-page-no');
          let componentkey = $('.customClass[data-type="group-interactivity-template"]').eq(0).attr('data-saved-index');
          let time = window.gradableMins + ":" + window.gradableSec;
          let scoObj = {};
          scoObj.remainingTime = time;
          scoObj.pageId = pageNo;
          scoObj.componentkey = componentkey;
          saveAction(event, scoObj);
        }
      }
      var addedMins = "";
      var addedSecs = "";
      if (window.gradableMins < 10) {
        addedMins = "0"
      } else {
        addedMins = ""
      }
      if (window.gradableSec < 10) {
        addedSecs = "0"
      } else {
        addedSecs = ""
      }
      $('.groupActivityAssessmentTimingContainer .minutes').html(addedMins + window.gradableMins);
      $('.groupActivityAssessmentTimingContainer .seconds').html(addedSecs + window.gradableSec);
      if ($('.groupActivityAssessmentTimingContainer .timePieChart').length) {
        let ogTime = (parseInt(window.gradableActivitySettingsJSON.ogTime.split(':')[0]) * 60) + (parseInt(window.gradableActivitySettingsJSON.ogTime.split(':')[1]));
        let spendTime = (parseInt(window.gradableMins) * 60) + (parseInt(window.gradableSec));
        let spendPercentage = (100 - ((spendTime / ogTime) * 100)).toFixed(2);
        $('.groupActivityAssessmentTimingContainer .timePieChart').css("background-image", "conic-gradient(#3E5274 " + spendPercentage + "%, #FFFFFF 0%)");
      }
    }, 1000);
  }
}

$("[data-type='flashcard'] .style-2").each(function () {
  var maxHeight = $(this).height();
  $(this).find('.style-2').find('.bx-prev, .bx-next').each(function () {
    $(this).find('.style-2').find('.bx-prev').addClass('style2Templateprev');
    $(this).find('.style-2').find('.bx-next').addClass('style2Templatenext');
    $(this).css("max-height", maxHeight);
  });
});

function processOfflineApplyToAllStyleSetting(data) {
  console.log(data);
  for (const [key, value] of Object.entries(data)) {
    if (key == "chapter-headingNew-h1") {
      if (value.styleSettingFlag) {
        console.log(value.styleSettingJson);
        $('[data-type="chapter-headingNew-h1"] .chapter-heading[data-applyall="accept"]').each(function (i, item) {
          // var pageNo = $(item).parents('.customClass').attr('data-page-no');
          // var uniqueId = $(item).parents('.customClass').attr('data-saved-index');			
          var className = value.styleSettingJson.styleClass;
          var bgColor = value.styleSettingJson.settings.bgColor;
          var opacityLevel = value.styleSettingJson.settings.opacityColortitle;
          var dividerColor = value.styleSettingJson.settings.dividerColor;
          var isImageAvailable = value.styleSettingJson.settings.imgOrColorBoolean;
          var imageUrl = value.styleSettingJson.settings.imageUrl;
          var isChapterNumberContainer = value.styleSettingJson.settings.labeltext;
          var isAuthorNameAllowed = value.styleSettingJson.settings.allowAuthorName;
          var isDividerAllowed = value.styleSettingJson.settings.allowDivider;
          var activeStyleLabelText = value.styleSettingJson.settings.activeStyleLabelText;

          if (isImageAvailable == "bg-image") {
            $(item).find('.overlay').before('<div class=""><img data-imgsrc="' + imageUrl + '" alt="" class="croppingImg bg-image" data-og-img="' + imageUrl + '" src="' + imageUrl + '" /></div>')
          } else {
            $(item).find('.croppingImg').css('opacity', '0');
          }
          $(item).removeClass('card-style-1 card-style-2 card-style-3 card-style-4 full-bleed-1 full-bleed-2 chapter-14').addClass(className);
          $(item).css('background-color', bgColor);
          $(item).find('.overlay').css('opacity', opacityLevel);
          if (className == "card-style-1" || className == "card-style-3") {
            $(item).find('.chapterContainer').css('background-color', '#f77664').css('opacity', '1');
            if ($(item).find('.chapterName').length == 0 && $(item).find('.chapterNumber').length == 0) {
              $(item).find('.chapterContainer').append('<div class="chapterName">Chapter</div><div class="chapterNumber">01</div>');
            }
            // $(item).find('.titleAuthorName').hide();
          } else if (className == "card-style-2" || className == "full-bleed-1") {
            // $(item).find('.titleAuthorName').hide();
          } else if (className == "card-style-4") {
            $(item).find('.chapterContainer').css('opacity', '1');
            if ($(item).find('.chapterName').length == 0 && $(item).find('.chapterNumber').length == 0) {
              $(item).find('.chapterContainer').append('<div class="chapterName">Chapter</div><div class="chapterNumber">01</div>');
            }
            if ($(item).find('.titleAuthorName').length == 0) {
              $(item).find('.titleTextContent').append('<div class="titleAuthorName"></div>');
            }
            $(item).find('.titleTextContent hr').remove();
            $(item).find('.titleAuthorName').before('<hr class="" style="border-color: ' + dividerColor + '" />');
          } else if (className == "full-bleed-2") {
            var bgColorpanel = value.styleSettingJson.settings.bgColorpanel
            $(item).find('.chapterContainer').css('background-color', bgColorpanel).css('opacity', '1');
            if ($(item).find('.chapterName').length == 0 && $(item).find('.chapterNumber').length == 0) {
              $(item).find('.chapterContainer').append('<div class="chapterName">Chapter</div><div class="chapterNumber">01</div>');
            }
            if ($(item).find('.titleAuthorName').length == 0) {
              $(item).find('.titleTextContent').append('<div class="titleAuthorName"></div>');
            }
          }
          $(item).find('span').removeAttr('style');

          var overlayBgcolor = value.styleSettingJson.settings.bgColortitle
          var overlayOpacity = value.styleSettingJson.settings.opacityColortitle
          $(item).find('.overlay').css('background-color', overlayBgcolor).css('opacity', overlayOpacity);

          if (activeStyleLabelText != undefined) {
            $(item).removeClass('labeltext1 labeltext2 labeltext3 labeltext4').addClass(activeStyleLabelText);
          }

          if (!isChapterNumberContainer) {
            $(item).find('.chapterContainer').hide();
          }

          if (!isAuthorNameAllowed) {
            $(item).find('.titleAuthorName').hide();
          }

          if (!isDividerAllowed) {
            $(item).find('hr').hide();
          }
        });
      }
    } else if (key == "h2-style" || key == "h3-style" || key == "h4-style" || key == "h5-style" || key == "h6-style") {
      if (value.styleSettingFlag) {
        $('[data-type="header"] [data-applyall="accept"] .' + key).each(function (i, item) {
          var className = value.styleSettingJson.settings.styleClass;
          var iconClass = value.styleSettingJson.settings.iconClass;
          var componentColor = value.styleSettingJson.settings.componentColor
          var fontSize = parseFloat($(item).css('font-size').slice(0, -2)) / 16 + 'rem';
          var nodeName = $(item)[0].nodeName.toLocaleLowerCase();

          $(item).css('border-color', componentColor);
          $(item).removeClass('card-style-1 card-style-2 card-style-3 card-style-4').addClass(className);
          $(item).siblings('.header-icon-image').remove();
          if (className == 'card-style-4') {
            $(item).before('<span class="header-icon-image ' + iconClass + ' ' + nodeName + '-style-icon" style="color: ' + componentColor + ';font-size: ' + fontSize + ';"></span>');
          }
        });
      }
    } else if (key == "paragraph") {
      if (value.styleSettingFlag) {
        $('[data-type="paragraph"] [data-applyall="accept"] .paragraph-container').each(function (i, item) {
          if ($(item).find('span:not(#asideInlineText, #InlineImage, #inline-image-caption)').length == 0) {
            var html = $(item).html();
            var newHtml = '<span>' + html + '</span>';
            $(item).html(newHtml);
          }
          var customClass = value.styleSettingJson.customClass;
          $(item).removeClass('defaultText blockTextParagraph blockquote dropCapflag emphasisText buttontext buttonBorderText').addClass(customClass);

          if (customClass == 'blockquote' && $(item).siblings('.authorName').length == 0) {
            $(item).after('<div class="authorName">Author</div>');
          }

          if (customClass != 'blockquote') {
            $(item).siblings('.authorName').remove();
          }
        });
      }
    }
  }
}

function secondsToTime(timeInSeconds) {
  var hour = Math.floor(timeInSeconds / 3600);
  var min = Math.floor(timeInSeconds % 3600 / 60);
  var sec = Math.floor(timeInSeconds % 60);
  sec = (sec < 10) ? '0' + sec : sec;
  min = (hour > 0 && min < 10) ? '0' + min : min;
  if (hour > 0) {
    return hour + ':' + min + ':' + sec;
  }
  return min + ':' + sec;
}

function trackCueChange(event) {
  var video = event.target.parentElement;
  var cueTime = event.target.track.activeCues[0].startTime;
  var transcriptBody = $(video).parents('.customClass').find('#transcript .transcript-body')[0];
  var activeCue = $(video).parents('.customClass').find('#transcript [data-begin=' + cueTime + ']')[0];
  $(transcriptBody).find('.transcript-line').removeClass('is-active');
  $(activeCue).addClass('is-active');
  transcriptBody.scrollTop = activeCue.offsetTop;
}

function trackLoaded(event) {
  var video = event.target.parentElement;
  var cues = event.target.track.cues;
  var cuesLength = cues.length;
  var trackHTML = '';

  for (var i = 0; i < cuesLength; i++) {
    var dataBegin = cues[i].startTime;
    var cueTime = secondsToTime(cues[i].startTime);
    var cueText = cues[i].text;
    trackHTML += '<div class="transcript-line" data-begin="' + dataBegin + '"> <span class="transcript-timestamp">' + cueTime + '</span> <span class="transcript-text">' + cueText + '</span> </div> '
  }
  if (this.label == "Arabic") {
    $(video).parents('.customClass').find('#transcript').addClass('rtl');
  } else {
    $(video).parents('.customClass').find('#transcript').removeClass('rtl');
  }
  var transcriptContent = '<div class="transcript-body">' + trackHTML + '</div>';
  $(video).parents('.customClass').find('#transcript').html('');
  $(video).parents('.customClass').find('#transcript').append(transcriptContent);

  var trackindex = $(video).find('track').index(this);
  $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li span').removeClass('icon-Check');
  $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li span').eq(trackindex).addClass('icon-Check');
}

async function preloadVideoTracks(video) {
  var isPreview = $(document).find('.preview-row-container').length;
  $(video).find('track').each(function (index, item) {
    if (isPreview) {
      var getQueryVariable = function getQueryVariable(variable, query) {
        var query = (!query) ? window.location.search.substring(1) : query,
          i, pair,
          vars = query.split("&");
        for (i = 0; i < vars.length; i++) {
          if (variable == 'courseId') {
            pair = vars[i].split("courseId=");
            return pair[1];
          } else if (variable == 'userToken') {
            pair = vars[i + 1].split("userToken=");
            return pair[1];
          } else if (variable == 'mode') {
            if (vars.length > 2) {
              pair = vars[i + 2].split("mode=");
              return pair[1];
            } else {
              return undefined;
            }
          }
        }
      }
      var a = $(item).attr('data-og-src');
      var splitArr = a.split('/');
      splitArr[8] = getQueryVariable('userToken');
      var resourceUrl = splitArr.join('/');
      // $(item).attr('src', URL.createObjectURL(trackBlob));
      $(item).attr('src', resourceUrl);
      // $(item).attr('data-text', text);
      item.addEventListener("load", trackLoaded);
      item.addEventListener("cuechange", trackCueChange);
      // return Promise.resolve(true);
      // fetch(resourceUrl)
      //   .then(function(response) {
      //       response.text().then(function(text) {
      //           const trackBlob = new Blob([text], {
      //               type:"text/plain;charset=utf-8"
      //           });						
      //           $(item).attr('src', URL.createObjectURL(trackBlob));
      //           $(item).attr('data-text', text);
      //           item.addEventListener("load", trackLoaded);
      //           item.addEventListener("cuechange", trackCueChange);
      //           return Promise.resolve(true);

      //       });
      //   });
    } else {
      item.addEventListener("load", trackLoaded);
      item.addEventListener("cuechange", trackCueChange);
      $(item).attr('src', item.dataset.src);
      // return Promise.resolve(true);
    }

  });
}

function revertVideojsStructure() {
  $('.video-js').each(function (index, video) {
    if (video.nodeName == "DIV" || video.nodeName == "div") {
      var value = video;
      if ($(value).find('video').length !== 0) {
        poster = $(value).find('video').attr('poster') ? $(value).find('video').attr('poster') : '';
        $video = $(value).find('video').addClass('video-js vjs-16-9 vjs-default-skin vjs-big-play-centered').removeClass('vjs-tech').attr({
          'data-setup': '{}',
          'poster': poster
        }).removeAttr('src').attr('controls', 'controls');
        $(value).children().eq(0).remove();
        $(value).prepend($video);
      }
    }
  });
}

$.fn.isOnScreen = function (x, y) {

  if (x == null || typeof x == 'undefined') x = 1;
  if (y == null || typeof y == 'undefined') y = 1;

  var win = $(window);

  var viewport = {
    top: win.scrollTop(),
    left: win.scrollLeft()
  };
  viewport.right = viewport.left + win.width();
  viewport.bottom = viewport.top + win.height();

  var height = this.outerHeight();
  var width = this.outerWidth();

  if (!width || !height) {
    return false;
  }

  var bounds = this.offset();
  bounds.right = bounds.left + width;
  bounds.bottom = bounds.top + height;

  var visible = (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));

  if (!visible) {
    return false;
  }

  var deltas = {
    top: Math.min(1, (bounds.bottom - viewport.top) / height),
    bottom: Math.min(1, (viewport.bottom - bounds.top) / height),
    left: Math.min(1, (bounds.right - viewport.left) / width),
    right: Math.min(1, (viewport.right - bounds.left) / width)
  };

  //console.log(deltas);

  return (deltas.left * deltas.right) >= x && (deltas.top * deltas.bottom) >= y;

};

$('.shortLongAnsComponent .longAnsText').on('input', function (e) {
  $(this).css('height', 'auto');
  var scrollHeight = $(this)[0].scrollHeight;
  $(this).css('height', scrollHeight + 'px');
});
$('.identifyTheClipComponent .longAnsText').on('input', function (e) {
  $(this).css('height', 'auto');
  var scrollHeight = $(this)[0].scrollHeight;
  $(this).css('height', scrollHeight + 'px');
});

// $(document).on('mouseover', 'a.custmtitle', function(e){
//   $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.tooltippop').remove();
//   $(window.parent.$('.previewed-html')[0].contentDocument.body).append('<div class="col-md-12 tooltippop" style="display: block;"><div class="col-md-2 internalpopicon"><span class="internalpopIcon"></span></div><div class="col-md-6 internaltextData"><span class="tooltiptextdata"></span></div><div class="col-md-2 internalEditIcon"><span class="icon-Edit editiconinternal" ng-click="addEditHyperLink()"></span></div><div class="col-md-2 internalUnlinktIcon"><span class="icon-Unlink" ng-click="unlinkinternalurl()"></span></div></div>');
//     // tooltippop.css("display", "block");
//     $("span.tooltiptextdata").text(e.currentTarget.dataset.tooltipText);
//     $("span.internalpopIcon").attr("data-nodename", e.currentTarget.dataset.nodename);

//         var x = e.clientX,
//         y = e.clientY;
//         $('.tooltippop').css('top',(y + 3) + 'px');
//         $('.tooltippop').css('left',(x + 20) + 'px');
//         $('.tooltippop').css("display", "block");
//   });
//   $(document).on('mouseover', 'div.tooltippop', function(){
//     $('.tooltippop').css("display", "block");
//   });
//     $(document).on('mouseout', 'a.custmtitle', function(){
//         $('.tooltippop').css("display", "none");
//       });
//   $(document).on('mouseout', 'div.tooltippop', function(){
//     $('.tooltippop').css("display", "none");
//   });

// $('video').each(function(index, video){
//   if($(video).find('track').length){
//     var div = document.createElement('div');
//     div.classList.add('tracksPreloadDiv');
//     div.style.display = "none";
//     $(div).append($(video).find('track'));
//     $(div).insertBefore(video);
//   }
// });

document.addEventListener("DOMContentLoaded", function () {
  if ($('.preview-row-container').length == 0) {
    revertVideojsStructure();
  }
  var lazy = [].slice.call(document.querySelectorAll("img, video, object"));
  if ("IntersectionObserver" in window) {
    let lazyObserver = new IntersectionObserver(function (entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          if (entry.target.nodeName.toLowerCase() == "img") {
            let lazyImage = entry.target;
            // lazyImage.src = lazyImage.dataset.imgsrc;
            if (lazyImage.dataset.imgsrc != undefined && !lazyImage.dataset.imgsrc.includes('undefined')) {
              lazyImage.src = lazyImage.dataset.imgsrc;
            }
            // lazyImage.srcset = lazyImage.dataset.srcset;
            lazyImage.classList.remove("lazy");
            lazyObserver.unobserve(lazyImage);
          } else if (entry.target.nodeName.toLowerCase() == "video") {
            if ($('.preview-row-container').length == 0) {
              let lazyVideo = entry.target;
              lazyVideo.src = lazyVideo.dataset.videosrc;
              $(lazyVideo).find('source').attr('src', lazyVideo.dataset.videosrc);
              $(lazyVideo).find('track').each(function (idx, track) {
                $(track).attr('src', $(track).attr('data-tracksrc'));
              });
              lazyVideo.classList.remove("lazy");
              lazyObserver.unobserve(lazyVideo);
              if ($(lazyVideo).parents('.customClass').find('track').length || $(lazyVideo).parents('.customClass').find('.tracksPreloadDiv').length) {
                var captionEnable = $(lazyVideo).attr('data-caption-enable') == "true" ? true : false;
                var transcriptEnable = $(lazyVideo).attr('data-transcript-enable') == "true" ? true : false;
                if ($(lazyVideo).parents('.customClass').find('.tracksPreloadDiv').length) {
                  var preloadTracks = $(lazyVideo).parents('.customClass').find('.tracksPreloadDiv track');
                  $(lazyVideo).append(preloadTracks);
                }
                preloadVideoTracks(lazyVideo);

                videojs(lazyVideo).src($(lazyVideo).attr('data-videosrc'));
                var player = videojs(lazyVideo);
                player.on('fullscreenchange', function (e) {
                  var isFullScreen = this.isFullscreen_;
                  if (isFullScreen) {
                    var source = $(this.el_).parents('.customClass').find('.videoSettingPanelOverlay');
                    var destination = $(this.el_).parents('.customClass').find('.video-js');
                    source.detach().appendTo(destination);
                  } else {
                    var source = $(this.el_).parents('.customClass').find('.videoSettingPanelOverlay');
                    var destination = $(this.el_).parents('.customClass').find('figure');
                    source.detach().appendTo(destination);
                  }
                });
                player.ready(function () {

                  var video = lazyVideo;

                  $(video).removeAttr('controls');

                  if (!transcriptEnable) {
                    $(transcriptContainer).hide();
                  }
                  $(video).parents('.customClass').find('.videoSettingsToggleSection .transcripToggle input')[0].checked = transcriptEnable;
                  if (captionEnable) {
                    for (var i = 0; i < video.textTracks.length; i++) {
                      if (i == video.textTracks.length - 1) {
                        video.textTracks[i].mode = 'showing';
                      } else {
                        video.textTracks[i].mode = 'hidden';
                      }
                    }
                  } else {
                    for (var i = 0; i < video.textTracks.length; i++) {
                      video.textTracks[i].mode = 'hidden';
                    }
                    $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList li span').eq(video.textTracks.length - 1).addClass('icon-Check')
                  }
                  $(video).parents('.customClass').find('.videoSettingsToggleSection .captionToggle input')[0].checked = captionEnable;
                  var trackList = '';
                  var tracks = video.textTracks
                  for (var i = 0; i < tracks.length; i++) {
                    if (tracks[i].mode == "showing") {
                      var span = '<span class="icon-Check"></span>';
                    } else {
                      var span = '<span class=""></span>';
                    }
                    trackList += '<li data-trackId="' + i + '"><p>' + tracks[i].label + '</p>' + span + '</li>';
                  }
                  $(video).parents('.customClass').find('.videoSettingPanelOverlay').hide();
                  $(video).parents('.customClass').find('.videoSettingPanelOverlay').append('<a class="videoSettingPanelOverlayCloseBtn"><span class="icon-Close"></span></a>')
                  $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList').html('');
                  $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoLanguageSelectorSection .videoTacksList').append(trackList);
                  $(video).parents('.customClass').find('.vjs-settings-button').remove();

                  var settingIconTarget = $(video).parents('.customClass').find('.vjs-control-bar .vjs-fullscreen-control');
                  $('<div id="vjs-settings-btn" class="vjs-settings-button vjs-control vjs-menu-button icon-Settings"></div>').insertBefore(settingIconTarget);

                  // $(video).parents('.customClass').find('.videoSettingPanelOverlay .videoTacksList li').eq(0).trigger('click');
                });
              } else {
                videojs(lazyVideo).src($(lazyVideo).attr('data-videosrc'));
                var player = videojs(lazyVideo);
                player.on('fullscreenchange', function (e) {
                  var isFullScreen = this.isFullscreen_;
                  if (isFullScreen) {
                    var source = $(this.el_).parents('.customClass').find('.videoSettingPanelOverlay');
                    var destination = $(this.el_).parents('.customClass').find('.video-js');
                    source.detach().appendTo(destination);
                    if (($(this.el_).parents('.customClass')).attr('data-type') == "slideshow") {
                      $(this.el_).parents('.customClass').find('.video-js').addClass("SlideshowVideoFullScreen");
                      $(this.el_).parents('.customClass').find('.video-js').css('max-height', 'unset!important');
                      $(this.el_).parents('.customClass').find('.bx-viewport .video-js .vjs-tech').css('max-height', 'unset!important');
                    }
                  } else {
                    var source = $(this.el_).parents('.customClass').find('.videoSettingPanelOverlay');
                    var destination = $(this.el_).parents('.customClass').find('figure');
                    source.detach().appendTo(destination);
                    if (($(this.el_).parents('.customClass')).attr('data-type') == "slideshow") {
                      $(this.el_).parents('.customClass').find('.video-js').removeClass("SlideshowVideoFullScreen");
                      $(this.el_).parents('.customClass').find('.video-js').css('max-height', '350px');
                      $(this.el_).parents('.customClass').find('.bx-viewport .video-js .vjs-tech').css('max-height', '350px');
                    }
                  }
                });

                $(lazyVideo).parents('.customClass').find('.videoSettingPanelOverlay').hide();
                $(lazyVideo).parents('.customClass').find('#transcript').html('');
                $(lazyVideo).parents('.customClass').find('.vjs-settings-button').remove();
                $(lazyVideo).removeAttr('controls');
                // $(video).removeAttr('controls');
              }
            }

          } else if ($(entry.target).hasClass('audio-source')) {
            let audioSrc = entry.target.dataset.correct
            let lazyAudio = $(entry.target).find('audio')[0];
            if (!audioSrc) {
              audioSrc = lazyAudio.dataset.correct || lazyAudio.dataset.audiosrc
            }
            lazyAudio.src = audioSrc
            if ($(lazyAudio).hasClass('lazy')) {
              lazyAudio.src = audioSrc;
              $(lazyAudio).find('source').attr('src', audioSrc);
              // lazyAudio.src = lazyAudio.dataset.audiosrc;
              // $(lazyAudio).find('source').attr('src', lazyAudio.dataset.audiosrc);
              // lazyImage.srcset = lazyImage.dataset.srcset;
              lazyAudio.classList.remove("lazy");
            }
            lazyObserver.unobserve(entry.target);
            $('audio').each(function (index, audio) {

              var audioParent = $(audio).parents('.audiojs')[0];
              if (audioParent) {
                $(audioParent).replaceWith(audio);
              }


            });

            audiojs.events.ready(function () {
              var as = audiojs.createAll();
            });
            $('audio').each(function (index, item) {
              if ($(item).attr('data-audiosrc') == '#' || $(item).attr('data-audiosrc') == undefined) {
                $(item).parents('.audiojs').find('.play-pause, .scrubber').addClass('blank-audio');
              }
            });
          } else if (entry.target.nodeName.toLowerCase() == "object") {
            let lazyObject = entry.target;
            lazyObject.classList.remove("lazy");
            lazyObserver.unobserve(lazyObject);

            var url = $(lazyObject).attr('data-htmlurl')
            var clone = $(lazyObject).clone();
            var parent = $(lazyObject).parent();
            clone.attr('data', url);
            $(lazyObject).remove();
            parent.append(clone);
          }
        }
      });
    });
    lazy.forEach(function (lazy) {
      lazyObserver.observe(lazy);
    });
    if ($.isFunction($.fn.localize)) {
      var opts = {
        language: "en",
        pathPrefix: "localization/"
      };
      $("[data-localize]").localize("player", opts);
    }
  } else {
    // Possibly fall back to a more compatible method here
    console.log('Intersection Observer Not Supported');
  }
});

(function ($) {
  $.fn.hasScrollBar = function () {
    var e = this.get(0);
    return {
      vertical: e.scrollHeight > e.clientHeight,
      horizontal: e.scrollWidth > e.clientWidth
    };
  }


})(jQuery);



Function.prototype.debounce = function (threshold) {
  var callback = this;
  var timeout;
  return function () {
    var context = this,
      params = arguments;
    window.clearTimeout(timeout);
    timeout = window.setTimeout(function () {
      callback.apply(context, params);
    }, threshold);
  };
};


//when the word selected for highlight is not in a span
function wrapSelectedText() {
  var Selected = window.getSelection().anchorNode.parentElement;
  var selection = window.getSelection().getRangeAt(0);
  var selectedText = selection.extractContents();
  var span = document.createElement("span");
  $(span).addClass('selectedDiv highlighted');
  span.appendChild(selectedText);
  selection.insertNode(span);
  $('#tooltip1').hide();
}

function DeleteSelectedText() {
  var clear = window.getSelection().anchorNode.parentElement;
  if ($(clear).hasClass('selectedText')) {
    $(clear).removeClass('highlighted');
    $('#tooltip1').hide();
  } else {
    $(clear).contents().unwrap();
    $('#tooltip1').hide();
  }
}


function resizeSlideHeight() {
  //console.log("IN");
  // $("[data-type='slideshow']").each(function(index, item){
  //   // var slideshowTarget = $("#target").closest(".sd-item").find(".slide-show");
  //   var slideshowTarget = $(item).find(".slide-show");
  //   var maxHeight = $(slideshowTarget.find(".bxslider li")[0]).find(".slide_img_editor").height();
  //   for(var i = 1; i<slideshowTarget.find(".bxslider li").length; i++){
  //     var tempHeight = $(slideshowTarget.find(".bxslider li")[i]).find(".slide_img_editor").height();
  //     if(maxHeight > tempHeight)
  //     {
  //       tempHeight=maxHeight;
  //     }else{
  //       maxHeight=tempHeight;
  //     }
  //   }
  //   slideshowTarget.find(".bxslider li").css('height',maxHeight);
  //   slideshowTarget.find(".bxslider").css('height',maxHeight);
  //   slideshowTarget.find(".bx-viewport").css('height',maxHeight);
  //   var slideWidth = $("#target .slider").width();
  //   $("#target .bxslider li").css('width',slideWidth);
  //   $(".bxslider li").css('width',slideWidth);
  // });

  //   setTimeout(function(){
  //   $("[data-type='slideshow']").each(function(index, item){
  //       $(this).find(".slideshowContainer").each(function(){
  //           $(this).css("height","");
  //       });
  //       var slideHeight = $(this).find(".bx-viewport").height();
  //       $(this).find(".slideshowContainer").each(function(){
  //           $(this).css("height",slideHeight);
  //       });
  //     });
  // }, 500);
  setTimeout(function () {
    $("[data-type='slideshow'] .slideMediaContainer").each(function () {
      var maxHeight = $(this).height();
      $(this).find(".image-style, .video-iframe-container.youtube-padding").each(function () {
        $(this).css("max-height", maxHeight);
      });
      $(this).find(".video-js .vjs-tech").each(function () {
        // $(this).css("max-height","inherit");
      });
    });
    $("[data-type='flashcard'] .style-2").each(function () {
      $(this).find('.bx-prev').addClass('style2PreviewTemplateprev');
      $(this).find('.bx-next').addClass('style2PreviewTemplatenext');
    });
    $("[data-type='slideshow'] .bxslider").each(function (index, item) {
      let len = $(this).find('.slideshowContainer').length;
      let width = (100 * len) + "%";
      $(this).css('width', width);
      let slideWidth = 100 / len + "%";
      $(this).find('.slideshowContainer').css('width', slideWidth);
    });
    $("[data-type='slideshow']").each(function (index, item) {
      var activeSlideNum = $("[data-type='slideshow'] .slideshowContainer[aria-hidden='false']").index();
      var slideParentWidth = $(item).find('.bxslider').width();
      var slideCount = $(item).find('.slideshowContainer').length;
      var scrolltoSlideWidth = "-" + ((slideParentWidth / slideCount) * activeSlideNum) + 'px';
      $(item).find('.bxslider').css('left', scrolltoSlideWidth)
    });
  }, 100);
}


function selectionFix() {

  var lastSelEvent = null;
  var lastSelInputEvent = null;
  var lastDblClickEvent = null;
  var selchangeModTs = null;
  var tripleclickFixBound = false;
  var selStartTimout = null;

  $(document).on('selectstart selectionchange', function (e) //non-inputs
    {
      fixEventTS(e);
      lastSelEvent = e;

      if ((selchangeModTs != null) && (new Date().getTime() - selchangeModTs < 50)) //ie11+ fix otherwise get self-loop with our selection changes generating this event
        return;

      handleSelEvent(e);
    });

  if ('onselect' in document.documentElement) {
    $(document).on('select', function (e) //input/textarea
      {
        fixEventTS(e);
        lastSelInputEvent = e;
        handleSelEvent(e);
      });
  }

  $(document).on('click', function (e) {
    if (typeof e.originalEvent !== 'undefined' && typeof e.originalEvent.detail !== 'undefined') {
      multiclickHandlerfunction(e);
    } else {
      fixEventTS(e);
      if (!tripleclickFixBound) {

        $(document).on('dblclick', function (e) {
          fixEventTS(e);
          selchangeModTs = null;
          lastDblClickEvent = e;
          handleSelEvent(e);
        });
        tripleclickFixBound = true;
      }
      if ((lastDblClickEvent != null) && (e.timeStamp - lastDblClickEvent.timeStamp < 300)) {
        lastDblClickEvent = e;
        selchangeModTs = null;
        handleSelEvent(e);
      }
    }

  });

  function multiclickHandlerfunction(e) {
    if (e.originalEvent.detail === 2 || e.originalEvent.detail === 3) {
      fixEventTS(e);
      selchangeModTs = null;
      lastDblClickEvent = e;
      handleSelEvent(e);
    }
  }

  function fixEventTS(e) {
    if (typeof e.timeStamp == 'undefined') //IE 8
    {
      e.timeStamp = new Date().getTime();
    }
  }

  function handleSelEvent(e) {
    if (lastDblClickEvent === null)
      return;

    if (((e.type === 'selectstart') || (e.type === 'selectionchange') || (e.type === 'dblclick') || (e.type === 'click')) && (lastSelEvent != null) && (Math.abs(lastDblClickEvent.timeStamp - lastSelEvent.timeStamp) < 1000)) // different order of events in different browsers...
    {
      switch (lastSelEvent.type) {
        case 'selectstart':
        case 'selectionchange':
          clearTimeout(selStartTimout);
          selStartTimout = setTimeout(handleSelChange, (/msie\s|trident\/|edge\//i.test(window.navigator.userAgent) ? 150 : 0));
          break;
      }
    }

    if (((e.type === 'select') || (e.type === 'dblclick') || (e.type === 'click')) && (lastSelInputEvent != null) && (Math.abs(lastDblClickEvent.timeStamp - lastSelInputEvent.timeStamp) < 1000)) {
      handleSel(lastSelInputEvent);
    }
  }

  function handleSel(e) {
    if (typeof (e.target.selectionEnd) != 'undefined') {
      //left whitespace
      while (/\s$/.test(e.target.value.substr(e.target.selectionEnd - 1, 1)) && e.target.selectionEnd > 0) {
        e.target.selectionEnd -= 1;
      }
      //right whitespace
      while (/^s/.test(e.target.value.substr(e.target.selectionStart - 1, 1)) && e.target.selectionStart > 0) {
        e.target.selectionStart += 1;
      }
    }
  }

  function handleSelChange() {
    if (rangy) {
      var sel = rangy.getSelection();
    }
    if (sel && !sel.isCollapsed) {
      selchangeModTs = new Date().getTime();
      sel.trim();
    } else if (typeof document.selection != 'undefined') //IE 10- input/textArea case
    {
      var range = document.selection.createRange();

      if (range && range.text && range.text.toString()) {
        while ((range.text != '') && /[\s\S]+\s$/.test(range.text.toString())) {
          selchangeModTs = new Date().getTime();
          range.moveEnd('character', -1);
          range.select();
        }
        while ((range.text != '') && /^\s[\s\S]+/.test(range.text.toString())) {
          selchangeModTs = new Date().getTime();
          range.moveStart('character', 1);
          range.select();
        }
      }
    }
  }

}

// $(document).ready(function(){
//   $("a.custmtitle").each(function(){
//       if($(this).parents().hasClass('preview-row-container')){
//           $(this).removeAttr("href");
//           $(this).removeAttr("target");
//       }
//   });
// });
$(document).on('mouseover', 'a.custmtitle', function (e) {
  if ($(window.parent.$('.directPreview')).length > 0) {
    $("a.custmtitle").each(function () {
      if ($(this).hasClass('custmtitle')) {
        $(this).removeClass('elementActive');
      }
    });
    $("span.tooltiptextdata").text(e.currentTarget.dataset.tooltipText);
    $("span.internalpopIcon").attr("data-nodename", e.currentTarget.dataset.nodename);
    $("span.internalpopIcon").attr("data-widgeticon", e.currentTarget.dataset.widgeticon);

    var lineheight = parseInt($(event.target).parent().css('line-height').slice(0, -2));
    var p = $(this);
    var offset = p.offset();

    $('.tooltippop').css('top', (offset.top + lineheight - 15) + 'px');
    $('.tooltippop').css('left', (offset.left + 30) + 'px');
    $('.tooltippop').css("display", "block");
  }
});
$(document).on('mouseover', 'div.tooltippop', function () {
  $('.tooltippop').css("display", "block");
});
$(document).on('mouseout', 'a.custmtitle', function () {
  $('.tooltippop').css("display", "none");
});
$(document).on('mouseout', 'div.tooltippop', function () {
  $('.tooltippop').css("display", "none");
});

$(document).on('click touch', 'a.custmtitle', function (e) {
  if ($(window.parent.$('.directPreview')).length > 0) {
    // $("a.custmtitle").each(function(){
    if ($(window.parent.$('.directPreview')).length > 0) {
      $(this).removeAttr("href");
      $(this).removeAttr("target");
      var uid = e.currentTarget.dataset.hashvalue;
      if (uid != undefined) {
        $("[data-saved-index=" + uid + "]")[0].scrollIntoView({
          behavior: 'smooth'
        });
      }
    }
  }
});

$("a.custmtitle").on('click touch', function (e) {
  if ($(this).parents().hasClass('preview-row-container')) {
    $(this).removeAttr("href");
    $(this).removeAttr("target");
    var uid = e.currentTarget.dataset.hashvalue;
    if (uid != undefined) {
      $("[data-saved-index=" + uid + "]")[0].scrollIntoView({
        behavior: 'smooth'
      });
    }
  } else if ($(this).parents().hasClass('epubviewer')) {
    $(this).removeAttr("target");

  }
});

// $("a.custmtitle").mouseover(function(event) {
//   if($(this).parents().hasClass('white_center_bg_main')){
//         $(this).removeAttr("target");
//          $('.white_center_bg_main').find('.tooltippop').remove();
//       $('.white_center_bg_main').append('<div class="col-md-12 tooltippop" style="display: none;"><div class="col-md-2 internalpopicon"><span class="internalpopIcon"></span></div><div class="col-md-6 internaltextData"><span class="tooltiptextdata"></span></div><div class="col-md-2 internalEditIcon"><span class="icon-Edit editiconinternal" ng-click="addEditHyperLink()"></span></div><div class="col-md-2 internalUnlinktIcon"><span class="icon-Unlink" ng-click="unlinkinternalurl()"></span></div></div>');

//     }
//     else{
//     $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.tooltippop').remove();
//     $(window.parent.$('.previewed-html')[0].contentDocument.body).append('<div class="col-md-12 tooltippop" style="display: none;"><div class="col-md-2 internalpopicon"><span class="internalpopIcon"></span></div><div class="col-md-6 internaltextData"><span class="tooltiptextdata"></span></div><div class="col-md-2 internalEditIcon"><span class="icon-Edit editiconinternal" ng-click="addEditHyperLink()"></span></div><div class="col-md-2 internalUnlinktIcon"><span class="icon-Unlink" ng-click="unlinkinternalurl()"></span></div></div>');
//     // tooltippop.css("display", "block");
//     }
//     $("span.tooltiptextdata").text(event.currentTarget.dataset.tooltipText);
//     $("span.internalpopIcon").attr("data-nodename", event.currentTarget.dataset.nodename);
//     $("span.internalpopIcon").attr("data-widgeticon", event.currentTarget.dataset.widgeticon);

//         var lineheight = parseInt($(event.target).parent().css('line-height').slice(0,-2));
//         var p = $(this);
//         var offset = p.offset();
//         if($(this).parents().hasClass('row-fluid-margin-for-mobile-port') || $(this).parents().hasClass('row-fluid-margin-for-mobile-land') || $(this).parents().hasClass('row-fluid-margin-for-tablet-port') || $(this).parents().hasClass('row-fluid-margin-for-tablet-land')){
//           $('.tooltippop').addClass('tooltippopDevice')
//         }
//         else{
//           $(".tooltippopDevice").removeClass("tooltippopDevice");
//         }
//         $('.tooltippop').css('top',(offset.top + lineheight - 15) + 'px');
//         $('.tooltippop').css('left',(offset.left+30) + 'px');
//         $('.tooltippop').css("display", "block");

// });

// $( "a.custmtitle").mouseout(function(e) {  

//     $('.tooltippop').css("display", "none");

// });

$(document).on('click touch', 'a.glossary-element', function (event) {
  event.preventDefault();
  event.stopPropagation();
  if ($(window.parent.$('.directPreview')).length > 0) {
    $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.preview-row-container').find('.glossarytooltippop').remove();
    // $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.glossarytooltippop')[1].remove();
    $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.preview-row-container').append('<div class="col-md-12 glossarytooltippop"><div class="col-md-12 glossaryimgdiv" style="padding: 0 !important;"><img class="glossaryImage" style="margin: 10px 0px;"></div><div class="col-md-12" style=""><span class="glossaryPopTerm pull-left" style="font-size: 14px; font-weight: bold;"></span></div><div class="col-md-12" style="padding-right: 10px;"><span class="glossaryPopDefinition pull-left" style="text-align: justify; font-size: 12px;"></span></div></div>');

    var id = parseInt(event.currentTarget.dataset.glossaryId);
    var glossarydata = window.glosseryListForSearch;
    for (let index = 0; index < glossarydata.length; index++) {
      if (glossarydata[index].id === id) {
        if (glossarydata[index].imagePath != "") {
          $(".glossaryImage").attr("src", glossarydata[index].imagePath);
          // document.getElementsByClassName("glossaryImage").src = "images/mt-15.jpg";
          // con.glossaryListforSearch[index].imagePath;
          // con.Glossary.PopImage = con.glossaryListforSearch[index].imagePath;
        } else {
          $(".glossaryImage").attr("src", "");
          $(".glossaryImage").parents('.glossaryimgdiv').hide();
        }
        if ($(".glossaryImage").attr("src") != "") {
          $(".glossaryImage").css({
            'height': '100%',
            'margin': '0 auto'
          });
          // $(".glossaryImage").css({'max-height':'200px', 'margin':'0 auto'});
          $(".glossaryimgdiv").css({
            'background-color': '#E8F1F6'
          });
          $(".glossaryImage").parents('.glossaryimgdiv').show();
        } else {
          // $(".glossaryImage").css({'height':'unset', 'width':''});
          $(".glossaryImage").parents('.glossaryimgdiv').hide();
        }
        $("span.glossaryPopTerm").text(glossarydata[index].term);
        $("span.glossaryPopDefinition").text(glossarydata[index].definition);
      }
    }

    var lineheight = parseInt($(event.target).parent().css('line-height').slice(0, -2));
    var p = $(this);
    var offset = p.offset();
    if ($(this).parents().hasClass('row-fluid-margin')) {
      $('.preview-row-container').find('.glossarytooltippop').addClass('tooltippopDevicedesktopPort');
    } else {
      $(".tooltippopDevice").removeClass("tooltippopDevicedesktopPort");
    }
    if ($(this).parents().hasClass('row-fluid-margin-for-tablet-port')) {
      $('.preview-row-container').find('.glossarytooltippop').addClass('tooltippopDeviceTabPort');
    } else {
      $(".tooltippopDevice").removeClass("tooltippopDeviceTabPort");
    }
    if ($(this).parents().hasClass('row-fluid-margin-for-tablet-land')) {
      $('.preview-row-container').find('.glossarytooltippop').addClass('tooltippopDeviceTabLand');
    } else {
      $(".tooltippopDevice").removeClass("tooltippopDeviceTabLand");
    }
    if ($(this).parents().hasClass('row-fluid-margin-for-mobile-port') || $(this).parents().hasClass('row-fluid-margin-for-mobile-land')) {
      $('.preview-row-container').find('.glossarytooltippop').addClass('tooltippopDeviceMobilePort')
    } else {
      $(".tooltippopDeviceMobile").removeClass("tooltippopDeviceMobilePort");
    }
    if ($(this).parents().hasClass('row-fluid-margin-for-mobile-land')) {
      $('.preview-row-container').find('.glossarytooltippop').addClass('tooltippopDeviceMobileLand')
    } else {
      $(".tooltippopDeviceMobile").removeClass("tooltippopDeviceMobileLand");
    }
    var offsettop = offset.top + $('.preview-row-container').scrollTop() + 20;
    $('.preview-row-container').find('.glossarytooltippop').css('top', offsettop + 'px');

    var articlewidth = $('.preview-row-container').eq(0).width();
    var popupwidth = $('.glossarytooltippop').width();
    var rowfluidmargin = parseInt($('.row-fluid').css('margin-left').slice(0, -2));
    if (offset.left - rowfluidmargin > articlewidth - popupwidth) {
      var offsetleft = articlewidth - popupwidth;
    } else {
      var offsetleft = offset.left - rowfluidmargin;
    }
    $('.preview-row-container').find('.glossarytooltippop').css('left', offsetleft + 'px');
    $('.preview-row-container').find('.glossarytooltippop').css("display", "block");
  } else {

    $('.white_center_bg_main').find('.glossarytooltippop').remove();

    var parser = new DOMParser();
    var appendglossary = '<div class="col-md-12 glossarytooltippop"><div class="col-md-12 glossaryimgdiv" style="padding: 0 !important;"><img class="glossaryImage" style="margin: 10px 0px;"></div><div class="col-md-12" style=""><span class="glossaryPopTerm pull-left" style="font-size: 14px; font-weight: bold;"></span></div><div class="col-md-12" style="padding-right: 10px;"><span class="glossaryPopDefinition pull-left" style="text-align: justify; font-size: 12px;"></span></div></div>';

    var el = parser.parseFromString(appendglossary, "text/html");
    $('.white_center_bg_main').append($(el).contents()[0].childNodes[1].childNodes[0]);

    //   var lineheight = parseInt($(event.target).parent().css('line-height').slice(0,-2));
    //     var p = $(this);
    //     var offset = p.offset();

    //     $('.glossarytooltippop').css('top',(offset.top + lineheight - 15) + 'px');
    //     $('.glossarytooltippop').css('left',(offset.left+30) + 'px');
    // $('.glossarytooltippop').css("display", "block");

    var id = parseInt(event.currentTarget.dataset.glossaryId);
    // var idx= window.glossaryListforSearch.findIndex(x => x.glossaryTermId == id);

    for (let index = 0; index < window.glossaryListforSearch.length; index++) {
      if (window.glossaryListforSearch[index].glossaryTermId === id) {
        if (window.glossaryListforSearch[index].imagePath != "") {
          $(".glossaryImage").attr("src", window.glossaryListforSearch[index].imagePath);
          // document.getElementsByClassName("glossaryImage").src = "images/mt-15.jpg";
          // con.glossaryListforSearch[index].imagePath;
          // con.Glossary.PopImage = con.glossaryListforSearch[index].imagePath;
        }
        if ($(".glossaryImage").attr("src") == undefined) {
          // $(".glossaryImage").css({'height':'unset', 'width':''});
          $(".glossaryImage").parents(".glossaryimgdiv").hide();

        } else {
          $(".glossaryImage").css({
            'height': '100%',
            'margin': '0 auto',
            'margin-top': '10px;'
          });
          $(".glossaryimgdiv").css({
            'background-color': '#E8F1F6'
          });
          $(".glossaryImage").parents(".glossaryimgdiv").show();
        }
        $("span.glossaryPopTerm").text(window.glossaryListforSearch[index].term);
        $("span.glossaryPopDefinition").text(window.glossaryListforSearch[index].definition);
      }
    }


    //  $('.white_center_bg_main').find('.glossarytooltippop').remove();
    // $('.white_center_bg_main').append('<div class="col-md-12 glossarytooltippop"><div class="col-md-12 glossaryimgdiv" style="padding: 0 !important;"><img class="glossaryImage" style="margin: 10px 0px;"></div><div class="col-md-12" style=""><span class="glossaryPopTerm pull-left" style="font-size: 14px; font-weight: bold;"></span></div><div class="col-md-12" style=""><span class="glossaryPopDefinition pull-left" style="text-align: justify; font-size: 12px;"></span></div></div>');

    // $('.white_center_bg_main').append('<div class="col-md-12 glossarytooltippop"><div class="col-md-12 glossaryimgdiv" style="padding: 0 !important;"><img class="glossaryImage" style="margin: 10px 0px;"></div><div class="col-md-12" style=""><span class="glossaryPopTerm pull-left" style="font-size: 14px; font-weight: bold;"></span></div><div class="col-md-12" style=""><span class="glossaryPopDefinition pull-left" style="text-align: justify; font-size: 12px;"></span></div></div>');

    //    var parser = new DOMParser();
    //    var appendglossary = '<div class="col-md-12 glossarytooltippop"><div class="col-md-12 glossaryimgdiv" style="padding: 0 !important;"><img class="glossaryImage" style="margin: 10px 0px;"></div><div class="col-md-12" style=""><span class="glossaryPopTerm pull-left" style="font-size: 14px; font-weight: bold;"></span></div><div class="col-md-12" style=""><span class="glossaryPopDefinition pull-left" style="text-align: justify; font-size: 12px;"></span></div></div>';

    //    var el = parser.parseFromString(appendglossary, "text/html");
    //    $('.white_center_bg_main').append($(el).contents()[0].childNodes[1].childNodes[0]);

    var lineheight = parseInt($(event.target).parent().css('line-height').slice(0, -2));
    var p = $(this);
    var offset = p.offset();
    var offsetleft = 0;
    if (offset.left < 70) {
      offsetleft = 70;
    } else if (offset.left > window.innerWidth - 500) {
      offsetleft = window.innerWidth - 500;
    } else {
      offsetleft = offset.left;
    }

    $('.glossarytooltippop').css('top', (offset.top + lineheight + 10) + 'px');
    $('.glossarytooltippop').css('left', offsetleft + 'px');
    $('.glossarytooltippop').css("display", "block");

  }

});


// $("a.glossary-element").click(function(event) {

//   if($(this).parents().hasClass('white_center_bg_main')){
//    var id = parseInt(event.currentTarget.dataset.glossaryId);
//       var idx= window.glossaryListforSearch.findIndex(x => x.glossaryTermId == id);
//         $(this).removeAttr("target");
//          $('.white_center_bg_main').find('.glossarytooltippop').remove();
//       $('.white_center_bg_main').append('<div class="col-md-12 glossarytooltippop"><div class="col-md-12 glossaryimgdiv" style="padding: 0 !important;"><img class="glossaryImage" style="margin: 10px 0px;"></div><div class="col-md-12" style=""><span class="glossaryPopTerm pull-left" style="font-size: 14px; font-weight: bold;"></span></div><div class="col-md-12" style=""><span class="glossaryPopDefinition pull-left" style="text-align: justify; font-size: 12px;"></span></div></div>');

//       var lineheight = parseInt($(event.target).parent().css('line-height').slice(0,-2));
//         var p = $(this);
//         var offset = p.offset();

//         $('.glossarytooltippop').css('top',(offset.top + lineheight - 15) + 'px');
//         $('.glossarytooltippop').css('left',(offset.left+30) + 'px');
//         $('.glossarytooltippop').css("display", "block");
//     }
//     else{
//     var glossarydata = window.parent.$('.previewed-html')[0].contentWindow.glossaryListforSearch;
//     $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.glossarytooltippop').remove();
//     $(window.parent.$('.previewed-html')[0].contentDocument.body).append('<div class="col-md-12 glossarytooltippop"><div class="col-md-12 glossaryimgdiv" style="padding: 0 !important;"><img class="glossaryImage" style="margin: 10px 0px;"></div><div class="col-md-12" style=""><span class="glossaryPopTerm pull-left" style="font-size: 14px; font-weight: bold;"></span></div><div class="col-md-12" style=""><span class="glossaryPopDefinition pull-left" style="text-align: justify; font-size: 12px;"></span></div></div>');


//      var id = parseInt(event.currentTarget.dataset.glossaryId);
//         for (let index = 0; index < glossarydata.length; index++) {
//           if (glossarydata[index].id === id) {
//             if (glossarydata[index].imagePath != "") {
//               $(".glossaryImage").attr("src", glossarydata[index].imagePath);
//               // document.getElementsByClassName("glossaryImage").src = "images/mt-15.jpg";
//               // con.glossaryListforSearch[index].imagePath;
//               // con.Glossary.PopImage = con.glossaryListforSearch[index].imagePath;
//             }
//             if($(".glossaryImage").attr("src")==undefined){
//               $(".glossaryImage").css({'height':'unset', 'width':''});
//             }
//             else{
//               $(".glossaryImage").css({'max-height':'300px', 'width':'300px', 'margin':'0 auto'});
//               $(".glossaryimgdiv").css({'background-color':'#E8F1F6'});

//             }
//             $("span.glossaryPopTerm").text(glossarydata[index].term);
//             $("span.glossaryPopDefinition").text(glossarydata[index].definition);
//           }
//         }

//         var lineheight = parseInt($(event.target).parent().css('line-height').slice(0,-2));
//         var p = $(this);
//         var offset = p.offset();
//         if($(this).parents().hasClass('row-fluid-margin-for-mobile-port') || $(this).parents().hasClass('row-fluid-margin-for-mobile-land') || $(this).parents().hasClass('row-fluid-margin-for-tablet-port') || $(this).parents().hasClass('row-fluid-margin-for-tablet-land')){
//           $('.glossarytooltippop').addClass('tooltippopDevice')
//         }
//         else{
//           $(".tooltippopDevice").removeClass("tooltippopDevice");
//         }
//         $('.glossarytooltippop').css('top',(offset.top + lineheight - 15) + 'px');
//         $('.glossarytooltippop').css('left',(offset.left+30) + 'px');
//         $('.glossarytooltippop').css("display", "block");
//     }

// });
var activeGllasryAudio, glossaryAssetsList, videoPlayer;
$("a.glossary-element").on('click touch', function (e) {
  e.preventDefault();
  e.stopImmediatePropagation();
  var event = e;
  var glossarydata = window.glossaryListforSearch ? window.glossaryListforSearch : window.parent.glossaryListforSearch;
  let tempAggregatedDataGlossaryList = getAggregatedDataGlossaryList(glossarydata);
  var isGlossaryTermIdRepeated = 0;
  var langList = [];
  console.log(tempAggregatedDataGlossaryList);

  if ($(this).parents().hasClass('white_center_bg_main')) {
    $(".elementActive").removeClass("elementActive");
    $('.white_center_bg_main').find('.glossarytooltippop').remove();
    var parser = new DOMParser();
    var appendglossary = '<div class="col-md-12 glossarytooltippop"><div class="glossary__tab"><span class="icon-Image glossary__tab__btn glossary_media_active_tab" title="Image"></span><span class="icon-audio glossary__tab__btn" title="Audio"></span><span class="icon-Video glossary__tab__btn" title="Video"></span> <span class="icon-Link glossary__tab__btn" title="Url"></span></div> <div class="glossary_media-container"><div class="img-container col-md-12 glossaryimgdiv"><img  class="glossaryImage" src=""></div><div class="audio-container col-md-12 hide"><div class="audio-player"> <div class="controls" id="glossaryAudio_player"><div class="play-container"><div class="toggle-play play"></div></div><div class="timeline"><div class="progress"></div></div><div class="time"> <div class="current">0:00</div><div class="divider">/</div> <div class="length">0:00</div></div> <div class="volume-container"><div class="volume-button"><div class="volume icono-volumeMedium"><i class="fas fa-volume-up"></i></div><span style="color: blue;font-size: 14px;margin-left: 7px;display:none">1X</span></div><div class="volume-slider"><div class="volume-percentage"></div></div></div> </div> </div> </div><div class="video-container col-md-12 hide"><video id="glossary_video_palyer" primary-video video-js vjs-default-skin vjs-big-play-centered awesome_video_class authoring-div tag no-border item-border" title="Video" controls="controls"><source class="glossary_video_palyer"  src="" type="video/mp4">Your browser does not support the video tag.</video></div><div class="url-container col-md-12 hide"><span style="background-color: #dbe3fe;padding: 7px;color: blue;display: flex;word-break: break-all;white-space: break-spaces;"></span></div><div class="col-md-12 glossary__trem" style=""><span class="glossaryPopTerm pull-left" style="font-size: 1.25rem; font-weight: bold;"></span> </div><div class="col-md-12 glossary__def" style="padding-right: 10px;"><span class="glossaryPopDefinition pull-left" style="text-align: left; font-size: 1.125rem;"></span></div><div class="glossary__dropdown col-md-12" style="padding: 0px 20px 20px;"> <div class="gl_label col-md-4" style="padding: 0px 27px 0px 0px;font-size:1.2rem;">Language:</div> <div class="gl-dropdown col-md-8" style="padding: 0px; display: flex;align-items: center;"><select class ="glossary_lang"  id="glossary_lang"> </select><span class="icon-Down" style="position: relative;right: 22px;width: 0%;"></span></div> </div></div></div>';
    var el = parser.parseFromString(appendglossary, "text/html");
    $('.glossary_lang').html('');
    $('.white_center_bg_main').append($(el).contents()[0].childNodes[1].childNodes[0]);
    var id = parseInt(e.currentTarget.dataset.glossaryId);
    for (let index = 0; index < window.glossaryListforSearch.length; index++) {
      if (window.glossaryListforSearch[index].glossaryTermId === id && isGlossaryTermIdRepeated != id) {
        isGlossaryTermIdRepeated = id;
        aggregatedDataGlossaryList = tempAggregatedDataGlossaryList[glossarydata[index].term];
        $(".glossary_audio_track").attr("src", glossarydata[index].audioPath ? glossarydata[index].audioPath : '');
        $(".glossary_video_palyer").attr("src", glossarydata[index].videoPath ? glossarydata[index].videoPath : "");
        $(".url-container span").text(glossarydata[index].url);
        activeGllasryAudio = glossarydata[index].audioPath;
        if (glossarydata[index].imagePath != "") {
          $(".glossaryImage").attr("src", glossarydata[index].imagePath);
        }
        if ($(".glossaryImage").attr("src") != undefined && $(".glossaryImage").attr("src") != '') {
          $(".glossaryImage").css({
            'height': '100%',
            'margin': '0 auto'
          });
          $(".glossaryimgdiv").css({
            'background-color': '#E8F1F6'
          });
          $(".glossaryImage").parents('.glossaryimgdiv').show();

        } else {
          $(".glossaryImage").parents('.glossaryimgdiv').hide();
        }
        if (aggregatedDataGlossaryList.length > 1) {
          aggregatedDataGlossaryList.forEach((value, index) => {
            // ad filter for lang
            if (!langList.includes(value.lang)) {
              langList.push(value.lang)
              // var data = "<option value='" + value.lang + "'>" + value.lang + "</option>";
              // $('.glossary_lang').append(data);
            }
          });
          if (langList.length > 1) {
            langList.forEach((value, index) => {
              // ad filter for lang
              $('.glossary__dropdown').css('display', 'flex');
              var data = "<option value='" + value + "'>" + value + "</option>";
              $('.glossary_lang').append(data);

            });
          } else {
            $('.glossary__dropdown').css('display', 'none');
          }
          document.getElementById('glossary_lang').value = glossarydata[index].lang;
        } else {
          $('.glossary__dropdown').css('display', 'none');
        }
        $("span.glossaryPopTerm").text(window.glossaryListforSearch[index].term);
        $("span.glossaryPopDefinition").text(glossarydata[index].definition);
        $(this).addClass('elementActive');
        data = glossarydata[index];
        hideGlossaryTab(data, false);
      }
    }


    var lineheight = parseInt($(event.target).parent().css('line-height').slice(0, -2));
    var p = $(this);
    var offset = p.offset();
    var offsetleft = 0;
    if (offset.left < 70) {
      offsetleft = 70;
    } else if (offset.left > window.innerWidth - 448) {
      offsetleft = window.innerWidth - 448;
    } else {
      offsetleft = offset.left;
    }
    $('.glossarytooltippop').css('top', (offset.top + lineheight + 15) + 'px');
    $('.glossarytooltippop').css('left', offsetleft + 'px');
    $('.glossarytooltippop').css("display", "block");
    var mediaContainer = document.querySelector('.glossary_media-container');
    if (mediaContainer) {
      mediaContainer.scrollTop = 0;
    }

    // checkPopupSpaceforOpen(event);
  } else {
    $(".elementActive").removeClass("elementActive");
    var glossarydata = window.parent.$('.previewed-html')[0].contentWindow.glossaryListforSearch;
    $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.preview-row-container').find('.glossarytooltippop').remove();
    $(window.parent.$('.previewed-html')[0].contentDocument.body).find('.preview-row-container').append(`
      <div class="col-md-12 glossarytooltippop">
          <div class="glossary__tab">
              <span class="icon-Image glossary__tab__btn glossary_media_active_tab" title="Image"></span>
              <span class="icon-audio glossary__tab__btn" title="Audio"></span>
              <span class="icon-Video glossary__tab__btn" title="Video"></span>
              <span class="icon-Link glossary__tab__btn" title="Url"></span>
          </div> 
          <div class="glossary_media-container">
              <div class="img-container col-md-12 glossaryimgdiv">
                  <img class="glossaryImage" src="">
              </div>
              <div class="audio-container col-md-12 hide">
                  <div class="audio-player"> 
                      <div class="controls" id="glossaryAudio_player">
                          <div class="play-container">
                              <div class="toggle-play play"></div>
                          </div>
                          <div class="timeline">
                              <div class="progress"></div>
                          </div>
                          <div class="time"> 
                              <div class="current">0:00</div>
                              <div class="divider">/</div> 
                              <div class="length">0:00</div>
                          </div>
                          <div class="volume-container">
                              <div class="volume-button">
                                  <div class="volume icono-volumeMedium">
                                      <i class="fas fa-volume-up"></i>
                                  </div>
                                  <span style="color: blue; font-size: 14px; margin-left: 7px; display: none">1X</span>
                              </div>
                              <div class="volume-slider">
                                  <div class="volume-percentage"></div>
                              </div>
                          </div> 
                      </div> 
                  </div>
              </div>
              <div class="video-container col-md-12 hide">
                  <video id="glossary_video_palyer" class="primary-video video-js vjs-default-skin vjs-big-play-centered awesome_video_class authoring-div tag no-border item-border" title="Video" controls>
                      <source class="glossary_video_palyer" src="" type="video/mp4">Your browser does not support the video tag.
                  </video>
              </div>
              <div class="url-container col-md-12 hide">
                  <span style="background-color: #dbe3fe; padding: 7px; color: blue; display: flex; word-break: break-all; white-space: break-spaces;"></span>
              </div>
              <div class="col-md-12 glossary__trem">
                  <span class="glossaryPopTerm pull-left" style="font-size: 1.25rem; font-weight: bold;"></span> 
              </div>
              <div class="col-md-12 glossary__def" style="padding-right: 10px;">
                  <span class="glossaryPopDefinition pull-left" style="text-align: left; font-size: 1.125rem;"></span>
              </div>
              <div class="glossary__dropdown col-md-12" style="padding: 0px 20px 20px;">
                  <div class="gl_label col-md-4" style="padding: 0px 27px 0px 0px; font-size: 1.2rem;">Language:</div>
                  <div class="gl-dropdown col-md-8" style="padding: 0px; display: flex;align-items: center;">
                      <select class="glossary_lang" id="glossary_lang"></select>
                       <span class="icon-Down" style="position: relative;right: 22px;width: 0%;"></span>
                  </div>
              </div>
          </div>
      </div>
  `);
    $('.glossary_lang').html('');
    if ($(".glossaryImage").attr("src") != undefined) {
      // $(".glossaryImage").css({'max-height':'200px', 'margin':'0 auto'});
      $(".glossaryImage").css({
        'height': '100%',
        'margin': '0 auto'
      });
      $(".glossaryimgdiv").css({
        'background-color': '#E8F1F6'
      });
      $(".glossaryImage").parents('.glossaryimgdiv').show();
    } else {
      $(".glossaryImage").parents('.glossaryimgdiv').hide();
    }
    var id = parseInt(event.currentTarget.dataset.glossaryId);
    var data = "";
    for (let index = 0; index < glossarydata.length; index++) {
      if (glossarydata[index].id === id || glossarydata[index].glossaryTermId == id) {
        console.log(tempAggregatedDataGlossaryList);
        aggregatedDataGlossaryList = tempAggregatedDataGlossaryList[glossarydata[index].term];
        let isPreview = $(document).find('.preview-row-container').length;
        if ((aggregatedDataGlossaryList[0].imagePath || aggregatedDataGlossaryList[0].videoPath || aggregatedDataGlossaryList[0].audioPath) && isPreview) {
          let resData = [];
          hideGlossaryTab(aggregatedDataGlossaryList[0], false);
          if (aggregatedDataGlossaryList[0].imagePath) {
            resData.push(aggregatedDataGlossaryList[0].imagePath)
          }
          if (aggregatedDataGlossaryList[0].videoPath) {
            resData.push(aggregatedDataGlossaryList[0].videoPath)
          }
          if (aggregatedDataGlossaryList[0].audioPath) {
            resData.push(aggregatedDataGlossaryList[0].audioPath)
          }

          fetchGlossaryAssetDetailsById(resData,
            function (responseData) {
              if (glossarydata[index].imagePath != "") {
                $(".glossaryImage").attr("src", getAssetsUrl(glossarydata[index].imagePath));
              }
              $(".glossary_audio_track").attr("src", glossarydata[index].audioPath ? getAssetsUrl(glossarydata[index].audioPath) : '');
              $(".glossary_video_palyer").attr("src", glossarydata[index].videoPath ? getAssetsUrl(glossarydata[index].videoPath) : "");
              setTimeout(function () {
                var video = document.getElementById('glossary_video_palyer');
                if (video) {
                  videoPlayer = videojs(video);
                  videoPlayer.src({
                    type: 'video/mp4',
                    src: getAssetsUrl(glossarydata[index].videoPath)
                  });
                } else {
                  console.error("Video element not found or ID is incorrect.");
                }
              }, 500);
              activeGllasryAudio = glossarydata[index].audioPath ? getAssetsUrl(glossarydata[index].audioPath) : "";
              if ($(".glossaryImage").attr("src") == undefined || glossarydata[index].imagePath == "") {
                // $(".glossaryImage").css({'height':'unset', 'width':''});
                $(".glossaryImage").parents(".glossaryimgdiv").hide();
              } else {
                //  $(".glossaryImage").css({'max-height':'200px', 'margin':'0 auto', 'margin-top': '10px;'});
                $(".glossaryImage").css({
                  'height': '100% !imp',
                  'margin': '0 auto',
                  'margin-top': '10px;'
                });
                $(".glossaryimgdiv").css({
                  'background-color': '#E8F1F6',
                  'display': 'block'
                });
                $(".glossaryImage").parents(".glossaryimgdiv").show();
              }

              $("span.glossaryPopTerm").text(glossarydata[index].term);

              if (aggregatedDataGlossaryList.length > 1) {
                $('.glossary__dropdown').css('display', 'flex');
                aggregatedDataGlossaryList.forEach((value, index) => {
                  var data = "<option value='" + value.lang + "'>" + value.lang + "</option>";
                  $('.glossary_lang').append(data);
                });
              } else {
                $('.glossary__dropdown').css('display', 'none');
              }
              $(".url-container span").text(glossarydata[index].url)
              data = glossarydata[index];
              hideGlossaryTab(data, false);
              // checkPopupSpaceforOpen(event);
            },
            function (statusCode, textStatus, errorThrown) {
              console.error('Error:', statusCode, textStatus, errorThrown);
              // Handle errors here
            });
        } else {
          data = glossarydata[index];
          $('.img-container').addClass('hide');
          $('.glossary__dropdown').css('display', 'none');
          hideGlossaryTab(data, false);
        }
        $("span.glossaryPopTerm").text(glossarydata[index].term);
        $("span.glossaryPopDefinition").text(glossarydata[index].definition);
      }
    }
    var mediaContainer = document.querySelector('.glossary_media-container');
    if (mediaContainer) {
      mediaContainer.scrollTop = 0;
    }
  }

  if (audio) {
    const audioPlayer = document.querySelector(".audio-player");
    const playBtn = audioPlayer.querySelector(".controls .toggle-play");
    playBtn.classList.remove("pause");
    playBtn.classList.add("play");
    audio.pause();
  }
  if (videoPlayer) {
    videoPlayer.pause();
  } else if (document.getElementById('glossary_video_palyer')) {
    document.getElementById('glossary_video_palyer').pause();
  }
  var lineheight = parseInt($(event.target).parent().css('line-height').slice(0, -2));
  var p = $(this);
  var offset = p.offset();
  if ($(this).parents().hasClass('row-fluid-margin')) {
    $('.glossarytooltippop').addClass('tooltippopDevicedesktopPort');
  } else {
    $(".tooltippopDevice").removeClass("tooltippopDevicedesktopPort");
  }
  if ($(this).parents().hasClass('row-fluid-margin-for-tablet-port')) {
    $('.glossarytooltippop').addClass('tooltippopDeviceTabPort');
  } else {
    $(".tooltippopDevice").removeClass("tooltippopDeviceTabPort");
  }
  if ($(this).parents().hasClass('row-fluid-margin-for-tablet-land')) {
    $('.glossarytooltippop').addClass('tooltippopDeviceTabLand');
  } else {
    $(".tooltippopDevice").removeClass("tooltippopDeviceTabLand");
  }
  if ($(this).parents().hasClass('row-fluid-margin-for-mobile-port') || $(this).parents().hasClass('row-fluid-margin-for-mobile-land')) {
    $('.glossarytooltippop').addClass('tooltippopDeviceMobilePort')
  } else {
    $(".tooltippopDeviceMobile").removeClass("tooltippopDeviceMobilePort");
  }
  if ($(this).parents().hasClass('row-fluid-margin-for-mobile-land')) {
    $('.glossarytooltippop').addClass('tooltippopDeviceMobileLand')
  } else {
    $(".tooltippopDeviceMobile").removeClass("tooltippopDeviceMobileLand");
  }
  var offsettop = offset.top + $('.preview-row-container').scrollTop();
  // $('.glossarytooltippop').css('top',offsettop+ 'px');
  if ($(this).parents().hasClass('white_center_bg_main')) {
    $('.glossarytooltippop').css('top', (offsettop + lineheight) + 'px');
  } else {
    $('.glossarytooltippop').css('top', ((offsettop - 10) + lineheight) + 'px');
  }

  var articlewidth = $('.preview-row-container').eq(0).width();
  var popupwidth = 448 //$('.glossarytooltippop').width();
  var rowfluidmargin = parseInt($('.row-fluid').css('margin-left').slice(0, -2));
  if (offset.left - rowfluidmargin > articlewidth - popupwidth) {
    var offsetleft = articlewidth - popupwidth;
  } else {
    var offsetleft = offset.left - rowfluidmargin;
  }
  var isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1;
  if (isSafari) {
    if ($('.row-fluid').hasClass('row-fluid-margin')) {
      offsetleft = offsetleft + rowfluidmargin;
    }
  }
  $('.glossarytooltippop').css('left', offsetleft + 'px');
  $('.glossarytooltippop').css("display", "block");


});

function getAggregatedDataGlossaryList(glossaryData) {
  var tempLangList = {};
  glossaryData.forEach(item => {
    const key = item.term;
    var value = {};
    value["audioPath"] = item.audioPath;
    value["definition"] = item.definition;
    value["id"] = item.id ? item.id : item.glossaryTermId;
    value["imagePath"] = item.imagePath;
    value["lang"] = item.lang == "" || item.lang == undefined ? "Unkown" : item.lang;
    value["pronunciation"] = item.pronunciation;
    value["term"] = item.translation;
    value["url"] = item.url;
    value["videoPath"] = item.videoPath;
    value["videoTracks"] = item.videoTracks;
    if (tempLangList[key]) {
      // If key exists, push the value to the array
      tempLangList[key].push(value);
    } else {
      // If key doesn't exist, create a new array with the value
      tempLangList[key] = [value];
    }

  });
  return tempLangList;
  // aggregatedDataGlossaryList = tempLangList[glossaryData[index].term];
}

function getUserToken(variable, query) {
  var query = (!query) ? window.location.search.substring(1) : query,
    i, pair,
    vars = query.split("&");
  for (i = 0; i < vars.length; i++) {
    if (variable == 'courseId') {
      pair = vars[i].split("courseId=");
      return pair[1];
    } else if (variable == 'userToken') {
      pair = vars[i + 1].split("userToken=");
      return pair[1];
    } else if (variable == 'mode') {
      if (vars.length > 2) {
        pair = vars[i + 2].split("mode=");
        return pair[1];
      } else {
        return undefined;
      }
    }
  }
}

function fetchGlossaryAssetDetailsById(data, successCallback, errorCallback) {
  var baseUrl = window.platform == "prod" ? "https://microservices.kitaboo.com" : "https://stagmicro.kitaboo.com"
  $.ajax({
    url: baseUrl + "/v1/glossarymanager/auth/glossaryServices/fetchGlossaryAssetDetails",
    type: 'POST',
    contentType: 'application/json',
    headers: {
      'userToken': getUserToken('userToken')
    },
    data: JSON.stringify({
      keys: data
    }),
    success: function (responseData) {
      glossaryAssetsList = responseData.glossaryPaths;
      successCallback(responseData);
    },
    error: function (jqXHR, textStatus, errorThrown) {
      errorCallback(jqXHR.status, textStatus, errorThrown);
    }
  });
}

function getAssetsUrl(id) {
  if (id) {
    return glossaryAssetsList[id]
  }
}


function hideGlossaryTab(data, isDropdown) {
  if (data.imagePath) {
    $('.icon-Image').removeClass('hide');
  } else {
    $('.icon-Image').addClass('hide');
  }
  if (data.audioPath) {
    $('.icon-audio').removeClass('hide');
  } else {
    $('.icon-audio').addClass('hide');
  }
  if (data.videoPath) {
    $('.icon-Video').removeClass('hide');
  } else {
    $('.icon-Video').addClass('hide');
  }
  if (data.url) {
    $('.icon-Link').removeClass('hide');
  } else {
    $('.icon-Link').addClass('hide');
  }
  if (isDropdown) {
    showMediaOnDropdownChange();
  }

}

function showMediaOnDropdownChange() {
  let parent = $('.glossary__tab');
  let chlds = parent.children()
  let isActiveClassSet = false;
  $(".img-container").css({
    'display': 'none'
  });
  // $(chlds).each(function(index, element) {
  for (let i = 0; i < chlds.length; i++) {
    $('.icon-Image, .icon-audio, .icon-Video, .icon-Link').removeClass('glossary_media_active_tab');
    $('.img-container,.audio-container, .video-container, .url-container').addClass('hide');
    if ($(chlds[i]).hasClass('icon-Image') && !$(chlds[i]).hasClass('hide') && !isActiveClassSet) {
      isActiveClassSet = true;
      $('.icon-Image').addClass('glossary_media_active_tab');
      $(".img-container").css({
        'display': 'block'
      });
      $('.img-container').removeClass('hide');
      break;
    } else if ($(chlds[i]).hasClass('icon-audio') && !$(chlds[i]).hasClass('hide') && !isActiveClassSet) {
      isActiveClassSet = true;
      $('.icon-audio').addClass('glossary_media_active_tab');
      $('.audio-container').removeClass('hide');
      break;
    } else if ($(chlds[i]).hasClass('icon-Video') && !$(chlds[i]).hasClass('hide') && !isActiveClassSet) {
      isActiveClassSet = true;
      $('.icon-Video').addClass('glossary_media_active_tab');
      $('.video-container').removeClass('hide');
      break;
    } else if ($(chlds[i]).hasClass('icon-Link') && !$(chlds[i]).hasClass('hide') && !isActiveClassSet) {
      isActiveClassSet = true;
      $('.icon-Link').addClass('glossary_media_active_tab');
      $('.url-container').removeClass('hide');
      break;
    }
  }
  // });
}
// $( "a.glossary-element").mouseout(function(e) {  

//     $('.glossarytooltippop').css("display", "none");

// });
// $( "a.glossary-element").touchend(function(e) {  

//   $('.glossarytooltippop').css("display", "none");

// });
$('.preview-row-container').on('click touch', function (e) {
  if ($(e.target).parents('.glossarytooltippop').length == 0) {
    if (audio) {
      const audioPlayer = document.querySelector(".audio-player");
      const playBtn = audioPlayer.querySelector(".controls .toggle-play");
      playBtn.classList.remove("pause");
      playBtn.classList.add("play");
      audio.pause();
    }
    if (videoPlayer) {
      videoPlayer.pause();
    } else if (document.getElementById('glossary_video_palyer')) {
      document.getElementById('glossary_video_palyer').pause();
    }
    $('.glossarytooltippop').css("display", "none");
    if (audio) {
      const audioPlayer = document.querySelector(".audio-player");
      const playBtn = audioPlayer.querySelector(".controls .toggle-play");
      playBtn.classList.remove("pause");
      playBtn.classList.add("play");
      audio.pause();
    }
    if (videoPlayer) {
      videoPlayer.pause();
    } else if (document.getElementById('glossary_video_palyer')) {
      document.getElementById('glossary_video_palyer').pause();
    }
  }
});
$(document).on('click touch', '.preview-row-container', function (e) {
  if ($(e.target).parents('.glossarytooltippop').length == 0) {

    $('.glossarytooltippop').css("display", "none");
  }
});

$('.white_center_bg_main').on('click touch', function (e) {
  if ($(e.target).parents('.glossarytooltippop').length == 0) {
    if (audio) {
      const audioPlayer = document.querySelector(".audio-player");
      const playBtn = audioPlayer.querySelector(".controls .toggle-play");
      playBtn.classList.remove("pause");
      playBtn.classList.add("play");
      audio.pause();
    }
    if (videoPlayer) {
      videoPlayer.pause();
    } else if (document.getElementById('glossary_video_palyer')) {
      document.getElementById('glossary_video_palyer').pause();
    }
    $('.glossarytooltippop').css("display", "none");
  }
});

$(document).on('click touch', '.white_center_bg_main', function (e) {
  if ($(e.target).parents('.glossarytooltippop').length == 0) {
    $('.glossarytooltippop').css("display", "none");
  }
});

$('.preview-row-container').scroll(function () {
  if ($('.glossarytooltippop:visible').length > 0 && $('.row-fluid').hasClass('row-fluid-margin')) {
    var p = $("a.glossary-element.elementActive");
    var offset = p.offset();
    $('.glossarytooltippop').css('top', (offset.top + 20) + 'px');
  }
});

var tapped = false
$(document).on('click tap', '.inputbox-selected.sort-text-selected.sort-in.draggable-div.ui-draggable', function (e) {
  $(".inputbox-selected.SortOptionView").each(function (i) {
    $(this).removeClass("SortOptionView");
  });
  if (!tapped) {
    tapped = setTimeout(function () {
      tapped = null;
      $(document).find('.inputbox-selected.SortOptionView').removeClass("SortOptionView");
    }, 500);
  } else {
    // $(".inputbox-selected.SortOptionView").each(function(i) {
    //   // $(this).parent('.form-control-wrap').css('height', '30px');
    //   $(this).removeClass("SortOptionView");
    // });
    clearTimeout(tapped);
    tapped = null;
    if ($(this)[0].innerText.length > 25) {
      $(this).addClass('SortOptionView');
    }
  }
});

$(document).off('click').on('click', '.keyboard_btn', function (e) {
  e.preventDefault()
  e.stopPropagation();
  $('.close__custom__keyBoard').addClass('hide');
  $('.open__custom__keyBoard').removeClass('hide');
  var currentKeyboardEle = $($(e.currentTarget).siblings()[0]);
  if ($(currentKeyboardEle).hasClass('hide')) {
    $('.keyboard-parent').addClass('hide');
    $($(e.currentTarget).siblings()).find('.keyboard-parent').removeClass('hide')
    $(e.currentTarget).find('.close__custom__keyBoard').removeClass('hide');
    $(e.currentTarget).find('.open__custom__keyBoard').addClass('hide');
    $('.keyboard-parent').addClass('hide');
    $(currentKeyboardEle).removeClass('hide');
      // tempScopeActiveKeyboardLanguage = customKeyboardLanguageData['spanish'];
      // bindKeybordBtn(customKeyboardLanguageData['spanish']);
      let userSubjectLang = localStorage.getItem("userSubjectLang")? localStorage.getItem("userSubjectLang") : window.parent.userSubjectLang.trim()
      ;
      let SelectLang = customKeyboardLanguageData.filter(item => item.subject === userSubjectLang);
      if(SelectLang.length){
        tempScopeActiveKeyboardLanguage = SelectLang[0][Object.keys(SelectLang[0])[1]]//con.customKeyboardLanguageData['spanish'];
        $('.custom-keyboardTabName').text(Object.keys(SelectLang[0])[1].toUpperCase())
      }
      bindKeybordBtn(tempScopeActiveKeyboardLanguage);
      // $('.tab-text').removeClass('active-Tab');
      // $('.'+userSubjectLang).addClass('active-Tab');

      // $('.tab-text').removeClass('active-Tab');
      // $('.spanish').addClass('active-Tab');
  } else {
    $('.close__custom__keyBoard').addClass('hide');
    $('.open__custom__keyBoard').removeClass('hide');
    $('.keyboard-parent').addClass('hide');
  }
});

function bindKeybordBtn(btnList) {
  $('.keys').html('');
  for (let i = 0; i < btnList.length; i++) {
    let data = '<div data-key="65" class="key__button" >' + btnList[i] + '</div>';
    $('.keys').append(data);
  }
}

function checkPopupSpaceforOpen(event) {
  const button = event.currentTarget //document.getElementsByClassName('glossary-element elementActive')[0];
  const popup = document.getElementsByClassName('glossarytooltippop')[0];
  // Get button position
  var rect = button.getBoundingClientRect();
  var buttonTop = rect.top;
  var buttonHeight = rect.height;

  // Get popup height
  var popupHeight = popup.offsetHeight;

  // Calculate space available above and below the button
  var spaceAbove = buttonTop;
  var spaceBelow = window.innerHeight - (buttonTop + buttonHeight);

  if (spaceBelow >= popupHeight) {
    // Enough space below, open the popup below the button
    popup.style.top = buttonTop + buttonHeight + 'px';
  } else if (spaceAbove >= popupHeight) {
    // Enough space above, open the popup above the button
    popup.style.top = buttonTop - popupHeight + 'px';
  } else {
    // Not enough space both above and below, open below by default
    popup.style.top = buttonTop + buttonHeight + 'px';
  }

  popup.style.display = 'block';
}

function submitAllActivityBasedOnReaderPostMessage(event){
  const iframes = window.parent.document.querySelectorAll('iframe')//document.querySelectorAll('iframe');
  iframes.forEach(iframe => {
      // Try to access iframe content (this works if same-origin policy allows it)
      try {
          const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
          
          // Find all submit buttons in the iframe
          const submitButtons = iframeDocument.querySelectorAll('.submit-btn');
          
          submitButtons.forEach(button => {
            button.click();
            console.log('Found submit button in iframe:', iframe.src);
            console.log(button);
          });
         
      } catch (e) {
          console.error('Could not access iframe content:', iframe.src);
      }
  });
  event.source.postMessage('All submition done', iframe.src);
}

$(document).on('click', '.tab-text',function(e){
  if(e){
    $('.tab-text').removeClass('active-Tab');
    $(e.currentTarget).addClass('active-Tab')
  }
  var tabName = e.currentTarget.textContent
  tempScopeActiveKeyboardLanguage = customKeyboardLanguageData[tabName.toLocaleLowerCase()];
  bindKeybordBtn(customKeyboardLanguageData[tabName.toLocaleLowerCase()]);
});

$(document).on('click', '.key__button', function (e) {
  e.preventDefault();
  e.stopPropagation();
  if($(e.target).parents('.customClass[data-type="fill-in-the-blank"]').length){
    let ele = $('.active_fib_input')
    // if (ele.length) {
    //   ele[0].value += e.currentTarget.textContent;
    // } else {
    //   document.execCommand('insertText', false, e.currentTarget.textContent);
    // }
    document.execCommand('insertText', false, e.currentTarget.textContent);
  }
  
  if ($(e.currentTarget.parentNode.parentNode.parentNode.parentNode).attr('data-type') == 'shortLongAns' ||
   $(e.currentTarget.parentNode.parentNode.parentNode.parentNode).hasClass('ITCForm') ) {
    return
  } else {

    var $eventTarget = $(e.target),
      $form = $eventTarget.parents('form'),
      $inputs = $form.find('input');
    $form.find('.incorrect-attempt').removeClass('incorrect-attempt');
    $form.find(".alert.fib-pop-up").css('display', 'none');
    if (!$form.find('div.inputbox-selected.FIB_style_inputbox').attr('disabled') && $form.find('div.inputbox-selected.FIB_style_inputbox:focus').length) {
      $form.find('.submit-btn').removeClass('disabled');
      $form.find('.reset').removeClass('disabled');
      $form.find('.incorrect-tick').remove();
    }
    var isFibAttempted = false;
    $form.find('input').each(function (idx, itm) {
      if (itm.value != "") {
        isFibAttempted = true;
      }
    });
    if (isFibAttempted) {
      $form.addClass("attempted-question");
    } else {
      $form.removeClass("attempted-question");
    }
    if (!$form.parents('.customClass').attr('latencyTime') || $form.parents('.customClass').attr('activityStartTime') == $form.parents('.customClass').attr('latencyTime')) {
      let d = new Date();
      let tm = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
      $form.parents('.customClass').attr('latencyTime', tm);
    }
    if ($form.parents(".group-interactivity-container").find("form.attempted-question").length == $form.parents(".group-interactivity-container").find("form").length) {
      $form.parents(".group-interactivity-container").addClass("enableSubmit");
    }
    for (var i = 0; i < $inputs.length; i++) {
      if ($($inputs[i]).val().trim() === '') {
        $form.find('.fib-submit').addClass('disabled');
      }
    }
    
    // if ((typeof apiHandle != "undefined") && $($form).parent('.fib').length > 0) {
    //   stateMainatainFIB(e);
    // }
  }


  // var ele = $(document.activeElement).find('input.inputbox-selected');
  // $(ele).keyup();
  // setTimeout(() => {
  //   $(document.activeElement).find('input.inputbox-selected').keyup();
  // }, 100);

})

$(document).on('click', '.glossary__tab__btn', function (event) {
  console.log(event);
  if (audio) {
    const audioPlayer = document.querySelector(".audio-player");
    const playBtn = audioPlayer.querySelector(".controls .toggle-play");
    playBtn.classList.remove("pause");
    playBtn.classList.add("play");
    audio.pause();
  }
  if (videoPlayer) {
    videoPlayer.pause();
  } else if (document.getElementById('glossary_video_palyer')) {
    document.getElementById('glossary_video_palyer').pause();
  }
  // document.getElementById('glossary_audio_palyer').pause();
  $('.glossary__tab__btn').removeClass('glossary_media_active_tab');
  $(event.currentTarget).addClass('glossary_media_active_tab');
  var mediaParent = $(event.currentTarget).parents('.glossarytooltippop').find('.glossary_media-container');
  $(mediaParent).find('.img-container, .audio-container, .video-container, .url-container').addClass('hide');
  if ($(event.currentTarget).hasClass('icon-Image')) {
    $(".img-container").css({
      'display': 'block'
    });
    $(mediaParent).find('.img-container').removeClass('hide');
  } else if ($(event.currentTarget).hasClass('icon-audio')) {
    initAudioPlayer();
    $(mediaParent).find('.audio-container').removeClass('hide');
    $(".img-container").css({
      'display': 'none'
    });
  } else if ($(event.currentTarget).hasClass('icon-Video')) {
    $(mediaParent).find('.video-container').removeClass('hide');
    $(".img-container").css({
      'display': 'none'
    });
  } else if ($(event.currentTarget).hasClass('icon-Link')) {
    $(mediaParent).find('.url-container').removeClass('hide');
    $(".img-container").css({
      'display': 'none'
    });
  }
  var mediaContainer = document.querySelector('.glossary_media-container');
  if (mediaContainer) {
    mediaContainer.scrollTop = 0;
  }
});

// Possible improvements:
// - Change timeline and volume slider into input sliders, reskinned
// - Change into Vue or React component
// - Be able to grab a custom title instead of "Music Song"
// - Hover over sliders to see preview of timestamp/volume change
var audio;
var audioPlayer;

function initAudioPlayer() {
  audioPlayer = document.querySelector(".audio-player");
  audio = null;
  audio = new Audio(
    activeGllasryAudio
  );
  audio.addEventListener(
    "loadeddata",
    () => {
      audioPlayer.querySelector(".time .length").textContent = getTimeCodeFromNum(
        audio.duration
      );
      audio.volume = 0.75;
    },
    false
  );


  //click on timeline to skip around
  const timeline = audioPlayer.querySelector(".timeline");
  timeline.addEventListener(
    "click",
    (e) => {
      const timelineWidth = window.getComputedStyle(timeline).width;
      const timeToSeek = (e.offsetX / parseInt(timelineWidth)) * audio.duration;
      audio.currentTime = timeToSeek;
    },
    false
  );

  //click volume slider to change volume
  const volumeSlider = audioPlayer.querySelector(".controls .volume-slider");
  volumeSlider.addEventListener(
    "click",
    (e) => {
      const sliderWidth = window.getComputedStyle(volumeSlider).width;
      const newVolume = e.offsetX / parseInt(sliderWidth);
      audio.volume = newVolume;
      audioPlayer.querySelector(".controls .volume-percentage").style.width =
        newVolume * 100 + "%";
    },
    false
  );

  //check audio percentage and update time accordingly
  setInterval(() => {
    const progressBar = audioPlayer.querySelector(".progress");
    progressBar.style.width = (audio.currentTime / audio.duration) * 100 + "%";
    if (progressBar.style.width == "100%") {
      const playBtn = audioPlayer.querySelector(".controls .toggle-play");
      playBtn.classList.remove("pause");
      playBtn.classList.add("play");
    }
    audioPlayer.querySelector(".time .current").textContent = getTimeCodeFromNum(
      audio.currentTime
    );
  }, 500);

  //toggle between playing and pausing on button click
  const playBtn = audioPlayer.querySelector(".controls .toggle-play");
  // playBtn.addEventListener(
  //   "click",
  //   (event) => {
  //     event.preventDefault();
  //     if (audio.paused) {
  //       playBtn.classList.remove("play");
  //       playBtn.classList.add("pause");
  //       audio.play();
  //     } else {
  //       playBtn.classList.remove("pause");
  //       playBtn.classList.add("play");
  //       audio.pause();
  //     }
  //   },
  //   false
  // );

  audioPlayer.querySelector(".volume-button").addEventListener("click", () => {
    const volumeEl = audioPlayer.querySelector(".volume-container .volume");
    audio.muted = !audio.muted;
    if (audio.muted) {
      volumeEl.classList.remove("icono-volumeMedium");
      volumeEl.classList.add("icono-volumeMute");
    } else {
      volumeEl.classList.add("icono-volumeMedium");
      volumeEl.classList.remove("icono-volumeMute");
    }
  });
}

//turn 128 seconds into 2:08
function getTimeCodeFromNum(num) {
  let seconds = parseInt(num);
  let minutes = parseInt(seconds / 60);
  seconds -= minutes * 60;
  const hours = parseInt(minutes / 60);
  minutes -= hours * 60;

  if (hours === 0) return `${minutes}:${String(seconds % 60).padStart(2, 0)}`;
  return `${String(hours).padStart(2, 0)}:${minutes}:${String(
    seconds % 60
  ).padStart(2, 0)}`;
}

$(document).on('click', ".controls .toggle-play", function (event) {
  const audioPlayer = document.querySelector(".audio-player");
  // const audio = audioPlayer.querySelector("audio");
  const playBtn = audioPlayer.querySelector(".controls .toggle-play");
  if (audio) {
    if (audio.paused) {
      playBtn.classList.remove("play");
      playBtn.classList.add("pause");
      audio.play();
    } else {
      playBtn.classList.remove("pause");
      playBtn.classList.add("play");
      audio.pause();
    }
  }

})

function changeGlossaryLanguage(event) {
  console.log(event);
}


$(document.body).on('change', '.glossary_lang', function (event) {
  let selectedLang = aggregatedDataGlossaryList.filter(item => item.lang == event.currentTarget.value)[0];
  if ($('.preview-row-container').length) {
    let resData = [];
    if (selectedLang.imagePath) {
      resData.push(selectedLang.imagePath)
    }
    if (selectedLang.videoPath) {
      resData.push(selectedLang.videoPath)
    }
    if (selectedLang.audioPath) {
      resData.push(selectedLang.audioPath)
    }
    fetchGlossaryAssetDetailsById(resData,
      function (responseData) {
        var videoJs = videojs;
        glossaryAssetsList = responseData.glossaryPaths;
        $(".glossaryImage").attr("src", selectedLang.audioPath ? getAssetsUrl(selectedLang.imagePath) : '');
        $(".glossary_audio_track").attr("src", selectedLang.audioPath ? getAssetsUrl(selectedLang.audioPath) : '');
        $(".glossary_video_palyer").attr("src", selectedLang.videoPath ? getAssetsUrl(selectedLang.videoPath) : "");
        $(".url-container span").text(selectedLang.url)
        $("span.glossaryPopDefinition").text(selectedLang.definition);
        setTimeout(function () {
          var video = document.getElementById('glossary_video_palyer');
          if (video) {
            videoPlayer = videoJs(video);
            videoPlayer.src({
              type: 'video/mp4',
              src: getAssetsUrl(selectedLang.videoPath)
            });
          } else {
            console.error("Video element not found or ID is incorrect.");
          }
        }, 500);
        if (selectedLang.audioPath) {
          activeGllasryAudio = getAssetsUrl(selectedLang.audioPath);
          if (audio) {
            const audioPlayer = document.querySelector(".audio-player");
            const playBtn = audioPlayer.querySelector(".controls .toggle-play");
            playBtn.classList.remove("pause");
            playBtn.classList.add("play");
            audio.pause();
          }
          initAudioPlayer();
        }
        hideGlossaryTab(selectedLang, true);
        var mediaContainer = document.querySelector('.glossary_media-container');
        if (mediaContainer) {
          mediaContainer.scrollTop = 0;
        }
      },
      function (statusCode, textStatus, errorThrown) {
        console.error('Error:', statusCode, textStatus, errorThrown);
        // Handle errors here
      });
  } else {
    $(".glossaryImage").attr("src", selectedLang.imagePath);
    $(".glossary_audio_track").attr("src", selectedLang.audioPath);
    $(".url-container span").text(selectedLang.url)
    $("span.glossaryPopDefinition").text(selectedLang.definition);
    activeGllasryAudio = selectedLang.audioPath;
    if (activeGllasryAudio) {
      if (audio) {
        const audioPlayer = document.querySelector(".audio-player");
        const playBtn = audioPlayer.querySelector(".controls .toggle-play");
        playBtn.classList.remove("pause");
        playBtn.classList.add("play");
        audio.pause();
        initAudioPlayer();
      }
    }
    var videoUrl = selectedLang.videoPath;
    var video = document.getElementById("glossary_video_palyer");

    video.src = videoUrl;
    video.load();
    var mediaContainer = document.querySelector('.glossary_media-container');
    if (mediaContainer) {
      mediaContainer.scrollTop = 0;
    }
    hideGlossaryTab(selectedLang, true)
  }

});

$(document).on('click', ".url-container", function (event) {
  event.preventDefault();
  window.open(event.currentTarget.textContent);
});

$(document).on('click', ".fib_input_click", function (event) {
  $('.fib_input_click').removeClass('active_fib_input');
  $(event.currentTarget).addClass('active_fib_input');
});

$(document).ready(function(){
  if(typeof getAPIHandle != "undefined"){
    var apiHandle = getAPIHandle();
    var isSafari = /iPhone|Macintosh|iPad/g.test(navigator.userAgent);
    if(apiHandle && isSafari){
      setTimeout(() => {
        setDataOnload(); 
        initializelmsonLoad();
      }, 0);
    }
  }
});
$(window).load(function () { 
  if(typeof getAPIHandle != "undefined"){
    var apiHandle = getAPIHandle();
    var isSafari = /iPhone|Macintosh|iPad/g.test(navigator.userAgent);
    if(apiHandle && !isSafari){
      setTimeout(() => {
        setDataOnload(); 
        initializelmsonLoad();
      }, 200);
    }
  }
});
$(window).unload(function () { 
  if(typeof getAPIHandle != "undefined"){
    var apiHandle = getAPIHandle();
    if(apiHandle){
      if(typeof savesuspendData == "object" && Object.keys(savesuspendData).length == 0){ 
        let existingData = LMSCommunicator.getSuspendData(); 
        if(existingData != "" && existingData != "{}"){ 
          savesuspendData = JSON.parse(existingData); 
        } 
      } 
      LMSCommunicator.setSuspendData(JSON.stringify(savesuspendData)); 
      LMSCommunicator.finish(); 
    }
  }
});
setTimeout(function(){
  // Logic for play/pause YouTube video starts
	var allVideoList = [];
	var allAudioList = [];
	var alliframeMediaList = [];

	function createMediaList(element) {
		var allVideoElementList = [];
		var allAudioElementList = [];
		var allIframeList = [];

		// Collect video elements
		var videos = $(element).find('video');
		videos.each(function (index, video) {
			if (document.body.contains(video)) {
				allVideoElementList.push($(video));
			}
			handleVideoControls(video);
		});

		// Collect audio elements
		var audios = $(element).find('audio');
		audios.each(function (index, audio) {
			if (document.body.contains(audio)) {
				allAudioElementList.push($(audio));
			}
			handleAudioControls(audio);
		});

		// Collect iframe elements
		var iframes = $(element).find('iframe.video-iframe-container');
		iframes.each(function (index, iframe) {
			if (document.body.contains(iframe)) {
				allIframeList.push($(iframe));
			}
		});

		// Ensure each list contains only unique elements
		allVideoList = getUniqueMedia(allVideoElementList);
		allAudioList = getUniqueMedia(allAudioElementList);
		alliframeMediaList = getUniqueMedia(allIframeList);
	};

	function getUniqueMedia(mediaList) {
		var uniqueMedia = [];

		mediaList.forEach(function (element) {
			var parent = element.eq(0).parents('.customClass')[0];

			// Check if the element is present in the DOM
			if (!document.body.contains(element[0])) {
				return; // Skip this element if it's not in the DOM
			}

			// Check if the parent is already in the uniqueMedia array
			var isDuplicate = false;
			for (var i = 0; i < uniqueMedia.length; i++) {
				if (uniqueMedia[i].eq(0).parents('.customClass')[0] === parent) {
					isDuplicate = true;
					break;
				}
			}

			// Add the element to uniqueMedia if the parent is not a duplicate
			if (!isDuplicate) {
				uniqueMedia.push(element);
			}
		});

		return uniqueMedia;
	}

	function handleVideoControls(element) {
		allVideoList.forEach(function (videoElement) {
			var videoPlayer = videojs(videoElement[0]);
			if (videoPlayer) {
				// Listen for the 'pause' event
				videoPlayer.on('pause', function () {
					console.log('The video has been paused using Video.js!');
					// Add any other logic you need when the video is paused
				});
				// Optionally listen for the 'play' event
				videoPlayer.on('play', function () {
					console.log('The video is playing using Video.js!');
					pauseYTVideo();
				});
			}
		});
	};

	function handleAudioControls (element) {
		allAudioList.forEach(function (audioElement) {
			var audio = audioElement[0];
			if (audio) {
				audio.addEventListener('play', function () {
					console.log('Audio has been played!');
					pauseYTVideo();
				});
				// Listen for the 'pause' event
				audio.addEventListener('pause', function () {
					console.log('Audio has been paused!');
					if ($(this).parent('.audiojs').hasClass('playing')) {
						$(this).parent('.audiojs').removeClass('playing');
					}
				});
			}
		});
	};

	function pauseYTVideo() {
		$('.video-iframe-container').each(function () {
			var src = $(this)[0].getAttribute('src');
			if (src && src.indexOf('youtube.com/embed') !== -1) {
				const iframe = $(this)[0];
        if (iframe.src) {
            const targetOrigin = new URL(iframe.src).origin;
            iframe.contentWindow.postMessage(
                JSON.stringify({
                    event: "command",
                    func: "stopVideo",
                    args: ""
                }),
                targetOrigin
            );
        }
			}
		});
	};

	// Check the state of YouTube videos
	function monitorYouTubeVideos() {
		createMediaList(document.getElementsByClassName('preview-container')[0] ? document.getElementsByClassName('preview-container')[0] : document.querySelector("article"));
		// createMediaList(document.querySelector("article"));


		alliframeMediaList.forEach(function (iframeElement) {
			var iframe = iframeElement[0];
			var src = iframe.getAttribute('src');
			if (src && src.indexOf('youtube.com/embed') !== -1) {
				// Request the current state of the YouTube video
        const iframe = $(this)[0];
        if (iframe.src) {
            const targetOrigin = new URL(iframe.src).origin;
            iframe.contentWindow.postMessage(
                JSON.stringify({
                    event: "listening",
                }),
                targetOrigin
            );
        }
				//iframe.contentWindow.postMessage('{"event":"listening"}', '*');
			}
		});
	}

	// Listen for YouTube state responses
	window.addEventListener('message', function (event) {
  		if (event.origin.indexOf('youtube.com') !== -1 && event.data) {
			try {
				var data = JSON.parse(event.data);
				if (
					data.event === 'infoDelivery' &&
					data.info &&
					data.info.playerState !== undefined
				) {
					if (data.info.playerState === 1) {
						// 1 = Playing
						console.log('YouTube video is playing!');
						// Pause Video.js player if playing
						allVideoList.forEach(function (videoElement) {
							var videoPlayer = videojs(videoElement[0]);
							if (videoPlayer && !videoPlayer.paused()) {
								videoPlayer.pause();
								console.log('Video.js player paused!');
							}
						});
						// Pause audio element if playing
						allAudioList.forEach(function (audioElement) {
							var audio = audioElement[0];
							if (audio && !audio.paused) {
								audio.pause();
								console.log('Audio element paused!');
							}
						});
					} else if (data.info.playerState === 2) {
						// 2 = Paused
						console.log('YouTube video has been paused!');
					}else{
            console.log("Invalid state",data.info.playerState);
            
          }
				}
			} catch (e) {
				// Ignore non-JSON messages
        console.log("Error",e);
			}
		}
    // event.stopImmediatePropagation();
	});

	setInterval(monitorYouTubeVideos, 2000);

	// Logic for play/pause youtube video ends
},1000)

if (typeof window.activityLocked !== 'undefined') {
  window.isActivityInprogress = window.activityLocked;
} else {
  window.isActivityInprogress = window.parent.activityLocked;
}
if (window.isActivityInprogress) {
  $('.customKeybord-cantsiner').addClass('disabledInput'); 
  $('.customKeybord-cantsiner').css('opacity', '0.5'); 
}

window.addEventListener("message", (event) => {
    console.log("Received message from iframe:", event.data);
    if(window.origin !== event.origin) {
        return;
    }
    var mathfield = $('math-field');
    if (mathfield.length > 0) {
        mathfield.each(function (index, value) {
            // Updated property assignments (no more setOptions)
            value.mathVirtualKeyboardPolicy = "sandboxed";
            value.virtualKeyboardTargetOrigin = window.location.origin;
			      value.mathModeSpace = '\\:';
            
            // Set other properties directly instead of using setOptions
            value.smartMode = true;
            value.smartFence = true;
            value.smartSuperscript = true;
        });
    }
}, false);

(function () {
    const joditToolbars = {
        ELA: [
            'bold', 'italic', 'underline', 'strikethrough',
            'eraser', 'ul', 'ol', 'font', 'fontsize', 'paragraph',
            'lineHeight', 'spellcheck', 'speechRecognize',
            'indent', 'outdent', 'align', 'brush', 'superscript', 'subscript',
            'cut', 'copy', 'paste', 'selectall', 'hr', 'table',
            'link', 'symbols', 'find', 'fullsize', 'preview', 'print', 'undo', 'redo'
        ],
        Math: [
            'bold', 'italic', 'underline', 'strikethrough',
            'eraser', 'ul', 'ol', 'font', 'fontsize', 'paragraph',
            'lineHeight', 'spellcheck', 'speechRecognize',
            'indent', 'outdent', 'align', 'brush', 'superscript', 'subscript',
            'cut', 'copy', 'paste', 'selectall', 'hr','table',
            'link', 'symbols', 'find', 'fullsize', 'preview', 'print', 'undo', 'redo',
            'customMathField'
        ],
        WL: [],
        Notes: []
    };

    function parseJoditConfig(jsonStr) {
        jsonStr = atob(jsonStr)
        try {
            return JSON.parse(jsonStr);
        } catch (e) {
            console.warn('Invalid JSON in data-jodit attribute:', jsonStr);
            return {};
        }
    }

    function initJoditEditor(el) {
        const configData = parseJoditConfig(el.getAttribute('data-jodit') || '{}');

        let buttons = [];

        if (Array.isArray(configData.buttons)) {
            buttons = configData.buttons;
        } else if (typeof configData.buttons === 'string' && joditToolbars[configData.buttons]) {
            buttons = joditToolbars[configData.buttons];
        } else {
            buttons = joditToolbars.ELA; // fallback
        }

        configData.customStyle['fontFamily'] = configData.customStyle['fontFamily'] || 'Arial, sans-serif';
        const customStyle = configData.customStyle || {};
        var isTextarea = el.tagName.toLowerCase() === 'textarea';
        const editor = new Jodit(el, {
            buttons: buttons,
            extraPlugins: ['speechRecognize'],
            iframe:true,
            toolbarAdaptive: false,
            toolbarSticky: false,
            toolbarButtonSize: 'medium',
            showXPathInStatusbar: false,
            showCharsCounter: false,
            showWordsCounter: false,
            showStatusbar: false,
            placeholder: '',
            style: customStyle,
            removeButtons: configData.removeButtons || [],
             // Add these configurations for self-closing BR tags
            enter: "BR",
            enterBlock: false,
            // Configure HTML output to use self-closing tags
            cleanHTML: {
                replaceNBSP: true,
                fillEmptyParagraph: false,
                removeEmptyElements: false
            },
            events: {
                afterInit: function (editorInstance) {
                    editorInstance.editor.style.maxHeight = '150px';
                    editorInstance.editor.style.overflowY = 'auto';
                    // Configure the editor to use self-closing BR tags
                //   if (editorInstance.editor) {
                //       // Override the BR insertion behavior
                //       editorInstance.editor.addEventListener('keydown', function(e) {
                //           if (e.key === 'Enter') {
                //               e.preventDefault();
                //               editorInstance.s.insertHTML('<br />');
                //           }
                //       });
                //   }
                },
                change: function (value) {
                      // Replace <br> with <br /> in the output
                //    value = value.replace(/<br(?!\s*\/)([^>]*)>/gi, '<br$1 />');
                    if (isTextarea) {
                        el.value = value;
                    } else {
                        el.innerHTML = value;
                    }
                    el.dispatchEvent(new Event('input', {
                        bubbles: true
                    }));
                },
            }
        });
        var form = el.closest('form');
        $(form).data('joditEditor', editor); // Store the editor instance in the form data 
        el._joditInstance = editor;

    }

    function destroyAllJodits(root) {
        root = root && root[0] ? root[0] : document;
        const nodes = root.querySelectorAll('[data-jodit]');
        for (let i = 0; i < nodes.length; i++) {
            const el = nodes[i];
            if (el._joditInstance && typeof el._joditInstance.destruct === 'function') {
                el._joditInstance.destruct();
                el._joditInstance = null;
            }
            // const form = el.closest('form');
            // if (form) $(form).removeData('joditEditor');
        }
    }

    function initAllJodits(root) {
         root = root ? root : document; // default to document if no root provided
        var nodes = root.querySelectorAll('[data-jodit]');
        for (var i = 0; i < nodes.length; i++) {
            // Initialize new Jodit instance
            initJoditEditor(nodes[i]);
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        // initAllJodits();

        // var observer = new MutationObserver(function () {
        //     initAllJodits();
        // });

        // observer.observe(document.body, {
        //     childList: true,
        //     subtree: true
        // });
    });

    // Expose to global scope
    window.parent.JoditInitializer = {
        init: initJoditEditor,
        initAll: initAllJodits,
        destroyAll: destroyAllJodits
    };

})();
/*!
 * Bootstrap v3.3.2 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.2",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.2",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.2",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a(this.options.trigger).filter('[href="#'+b.id+'"], [data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.2",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":a.extend({},e.data(),{trigger:this});c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.2",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.2",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.options.backdrop&&d.adjustBackdrop(),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$element.find(".modal-dialog").one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},c.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.2",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.2",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.2",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.2",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()
}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.2",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a("body").height();"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);





!function(t,e){"use strict";if("undefined"!=typeof module&&module.exports){var n="undefined"!=typeof process,o=n&&"electron"in process.versions;o?t.BootstrapDialog=e(t.jQuery):module.exports=e(require("jquery"),require("bootstrap"))}else"function"==typeof define&&define.amd?define("bootstrap-dialog",["jquery","bootstrap"],function(t){return e(t)}):t.BootstrapDialog=e(t.jQuery)}(this,function(t){"use strict";var e=t.fn.modal.Constructor,n=function(t,n){e.call(this,t,n)};n.getModalVersion=function(){var e=null;return e="undefined"==typeof t.fn.modal.Constructor.VERSION?"v3.1":/3\.2\.\d+/.test(t.fn.modal.Constructor.VERSION)?"v3.2":/3\.3\.[1,2]/.test(t.fn.modal.Constructor.VERSION)?"v3.3":"v3.3.4"},n.ORIGINAL_BODY_PADDING=parseInt(t("body").css("padding-right")||0,10),n.METHODS_TO_OVERRIDE={},n.METHODS_TO_OVERRIDE["v3.1"]={},n.METHODS_TO_OVERRIDE["v3.2"]={hide:function(e){if(e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()){this.isShown=!1;var n=this.getGlobalOpenedDialogs();0===n.length&&this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}}},n.METHODS_TO_OVERRIDE["v3.3"]={setScrollbar:function(){var t=n.ORIGINAL_BODY_PADDING;this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},resetScrollbar:function(){var t=this.getGlobalOpenedDialogs();0===t.length&&this.$body.css("padding-right",n.ORIGINAL_BODY_PADDING)},hideModal:function(){this.$element.hide(),this.backdrop(t.proxy(function(){var t=this.getGlobalOpenedDialogs();0===t.length&&this.$body.removeClass("modal-open"),this.resetAdjustments(),this.resetScrollbar(),this.$element.trigger("hidden.bs.modal")},this))}},n.METHODS_TO_OVERRIDE["v3.3.4"]=t.extend({},n.METHODS_TO_OVERRIDE["v3.3"]),n.prototype={constructor:n,getGlobalOpenedDialogs:function(){var e=[];return t.each(o.dialogs,function(t,n){n.isRealized()&&n.isOpened()&&e.push(n)}),e}},n.prototype=t.extend(n.prototype,e.prototype,n.METHODS_TO_OVERRIDE[n.getModalVersion()]);var o=function(e){this.defaultOptions=t.extend(!0,{id:o.newGuid(),buttons:[],data:{},onshow:null,onshown:null,onhide:null,onhidden:null},o.defaultOptions),this.indexedButtons={},this.registeredButtonHotkeys={},this.draggableData={isMouseDown:!1,mouseOffset:{}},this.realized=!1,this.opened=!1,this.initOptions(e),this.holdThisInstance()};return o.BootstrapDialogModal=n,o.NAMESPACE="bootstrap-dialog",o.TYPE_DEFAULT="type-default",o.TYPE_INFO="type-info",o.TYPE_PRIMARY="type-primary",o.TYPE_SUCCESS="type-success",o.TYPE_WARNING="type-warning",o.TYPE_DANGER="type-danger",o.DEFAULT_TEXTS={},o.DEFAULT_TEXTS[o.TYPE_DEFAULT]="Information",o.DEFAULT_TEXTS[o.TYPE_INFO]="Information",o.DEFAULT_TEXTS[o.TYPE_PRIMARY]="Information",o.DEFAULT_TEXTS[o.TYPE_SUCCESS]="Success",o.DEFAULT_TEXTS[o.TYPE_WARNING]="Warning",o.DEFAULT_TEXTS[o.TYPE_DANGER]="Danger",o.DEFAULT_TEXTS.OK="OK",o.DEFAULT_TEXTS.CANCEL="Cancel",o.DEFAULT_TEXTS.CONFIRM="Confirmation",o.SIZE_NORMAL="size-normal",o.SIZE_SMALL="size-small",o.SIZE_WIDE="size-wide",o.SIZE_LARGE="size-large",o.BUTTON_SIZES={},o.BUTTON_SIZES[o.SIZE_NORMAL]="",o.BUTTON_SIZES[o.SIZE_SMALL]="",o.BUTTON_SIZES[o.SIZE_WIDE]="",o.BUTTON_SIZES[o.SIZE_LARGE]="btn-lg",o.ICON_SPINNER="glyphicon glyphicon-asterisk",o.defaultOptions={type:o.TYPE_PRIMARY,size:o.SIZE_NORMAL,cssClass:"",title:null,message:null,nl2br:!0,closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,spinicon:o.ICON_SPINNER,autodestroy:!0,draggable:!1,animate:!0,description:"",tabindex:-1},o.configDefaultOptions=function(e){o.defaultOptions=t.extend(!0,o.defaultOptions,e)},o.dialogs={},o.openAll=function(){t.each(o.dialogs,function(t,e){e.open()})},o.closeAll=function(){t.each(o.dialogs,function(t,e){e.close()})},o.getDialog=function(t){var e=null;return"undefined"!=typeof o.dialogs[t]&&(e=o.dialogs[t]),e},o.setDialog=function(t){return o.dialogs[t.getId()]=t,t},o.addDialog=function(t){return o.setDialog(t)},o.moveFocus=function(){var e=null;t.each(o.dialogs,function(t,n){e=n}),null!==e&&e.isRealized()&&e.getModal().focus()},o.METHODS_TO_OVERRIDE={},o.METHODS_TO_OVERRIDE["v3.1"]={handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(t){t.target===this&&t.data.dialog.isClosable()&&t.data.dialog.canCloseByBackdrop()&&t.data.dialog.close()}),this},updateZIndex:function(){var e=1040,n=1050,i=0;t.each(o.dialogs,function(t,e){i++});var s=this.getModal(),a=s.data("bs.modal").$backdrop;return s.css("z-index",n+20*(i-1)),a.css("z-index",e+20*(i-1)),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this.updateZIndex(),this}},o.METHODS_TO_OVERRIDE["v3.2"]={handleModalBackdropEvent:o.METHODS_TO_OVERRIDE["v3.1"].handleModalBackdropEvent,updateZIndex:o.METHODS_TO_OVERRIDE["v3.1"].updateZIndex,open:o.METHODS_TO_OVERRIDE["v3.1"].open},o.METHODS_TO_OVERRIDE["v3.3"]={},o.METHODS_TO_OVERRIDE["v3.3.4"]=t.extend({},o.METHODS_TO_OVERRIDE["v3.1"]),o.prototype={constructor:o,initOptions:function(e){return this.options=t.extend(!0,this.defaultOptions,e),this},holdThisInstance:function(){return o.addDialog(this),this},initModalStuff:function(){return this.setModal(this.createModal()).setModalDialog(this.createModalDialog()).setModalContent(this.createModalContent()).setModalHeader(this.createModalHeader()).setModalBody(this.createModalBody()).setModalFooter(this.createModalFooter()),this.getModal().append(this.getModalDialog()),this.getModalDialog().append(this.getModalContent()),this.getModalContent().append(this.getModalHeader()).append(this.getModalBody()).append(this.getModalFooter()),this},createModal:function(){var e=t('<div class="modal" role="dialog" aria-hidden="true"></div>');return e.prop("id",this.getId()),e.attr("aria-labelledby",this.getId()+"_title"),e},getModal:function(){return this.$modal},setModal:function(t){return this.$modal=t,this},createModalDialog:function(){return t('<div class="modal-dialog"></div>')},getModalDialog:function(){return this.$modalDialog},setModalDialog:function(t){return this.$modalDialog=t,this},createModalContent:function(){return t('<div class="modal-content"></div>')},getModalContent:function(){return this.$modalContent},setModalContent:function(t){return this.$modalContent=t,this},createModalHeader:function(){return t('<div class="modal-header"></div>')},getModalHeader:function(){return this.$modalHeader},setModalHeader:function(t){return this.$modalHeader=t,this},createModalBody:function(){return t('<div class="modal-body"></div>')},getModalBody:function(){return this.$modalBody},setModalBody:function(t){return this.$modalBody=t,this},createModalFooter:function(){return t('<div class="modal-footer"></div>')},getModalFooter:function(){return this.$modalFooter},setModalFooter:function(t){return this.$modalFooter=t,this},createDynamicContent:function(t){var e=null;return e="function"==typeof t?t.call(t,this):t,"string"==typeof e&&(e=this.formatStringContent(e)),e},formatStringContent:function(t){return this.options.nl2br?t.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />"):t},setData:function(t,e){return this.options.data[t]=e,this},getData:function(t){return this.options.data[t]},setId:function(t){return this.options.id=t,this},getId:function(){return this.options.id},getType:function(){return this.options.type},setType:function(t){return this.options.type=t,this.updateType(),this},updateType:function(){if(this.isRealized()){var t=[o.TYPE_DEFAULT,o.TYPE_INFO,o.TYPE_PRIMARY,o.TYPE_SUCCESS,o.TYPE_WARNING,o.TYPE_DANGER];this.getModal().removeClass(t.join(" ")).addClass(this.getType())}return this},getSize:function(){return this.options.size},setSize:function(t){return this.options.size=t,this.updateSize(),this},updateSize:function(){if(this.isRealized()){var e=this;this.getModal().removeClass(o.SIZE_NORMAL).removeClass(o.SIZE_SMALL).removeClass(o.SIZE_WIDE).removeClass(o.SIZE_LARGE),this.getModal().addClass(this.getSize()),this.getModalDialog().removeClass("modal-sm"),this.getSize()===o.SIZE_SMALL&&this.getModalDialog().addClass("modal-sm"),this.getModalDialog().removeClass("modal-lg"),this.getSize()===o.SIZE_WIDE&&this.getModalDialog().addClass("modal-lg"),t.each(this.options.buttons,function(n,o){var i=e.getButton(o.id),s=["btn-lg","btn-sm","btn-xs"],a=!1;if("string"==typeof o.cssClass){var d=o.cssClass.split(" ");t.each(d,function(e,n){-1!==t.inArray(n,s)&&(a=!0)})}a||(i.removeClass(s.join(" ")),i.addClass(e.getButtonSize()))})}return this},getCssClass:function(){return this.options.cssClass},setCssClass:function(t){return this.options.cssClass=t,this},getTitle:function(){return this.options.title},setTitle:function(t){return this.options.title=t,this.updateTitle(),this},updateTitle:function(){if(this.isRealized()){var t=null!==this.getTitle()?this.createDynamicContent(this.getTitle()):this.getDefaultText();this.getModalHeader().find("."+this.getNamespace("title")).html("").append(t).prop("id",this.getId()+"_title")}return this},getMessage:function(){return this.options.message},setMessage:function(t){return this.options.message=t,this.updateMessage(),this},updateMessage:function(){if(this.isRealized()){var t=this.createDynamicContent(this.getMessage());this.getModalBody().find("."+this.getNamespace("message")).html("").append(t)}return this},isClosable:function(){return this.options.closable},setClosable:function(t){return this.options.closable=t,this.updateClosable(),this},setCloseByBackdrop:function(t){return this.options.closeByBackdrop=t,this},canCloseByBackdrop:function(){return this.options.closeByBackdrop},setCloseByKeyboard:function(t){return this.options.closeByKeyboard=t,this},canCloseByKeyboard:function(){return this.options.closeByKeyboard},isAnimate:function(){return this.options.animate},setAnimate:function(t){return this.options.animate=t,this},updateAnimate:function(){return this.isRealized()&&this.getModal().toggleClass("fade",this.isAnimate()),this},getSpinicon:function(){return this.options.spinicon},setSpinicon:function(t){return this.options.spinicon=t,this},addButton:function(t){return this.options.buttons.push(t),this},addButtons:function(e){var n=this;return t.each(e,function(t,e){n.addButton(e)}),this},getButtons:function(){return this.options.buttons},setButtons:function(t){return this.options.buttons=t,this.updateButtons(),this},getButton:function(t){return"undefined"!=typeof this.indexedButtons[t]?this.indexedButtons[t]:null},getButtonSize:function(){return"undefined"!=typeof o.BUTTON_SIZES[this.getSize()]?o.BUTTON_SIZES[this.getSize()]:""},updateButtons:function(){return this.isRealized()&&(0===this.getButtons().length?this.getModalFooter().hide():this.getModalFooter().show().find("."+this.getNamespace("footer")).html("").append(this.createFooterButtons())),this},isAutodestroy:function(){return this.options.autodestroy},setAutodestroy:function(t){this.options.autodestroy=t},getDescription:function(){return this.options.description},setDescription:function(t){return this.options.description=t,this},setTabindex:function(t){return this.options.tabindex=t,this},getTabindex:function(){return this.options.tabindex},updateTabindex:function(){return this.isRealized()&&this.getModal().attr("tabindex",this.getTabindex()),this},getDefaultText:function(){return o.DEFAULT_TEXTS[this.getType()]},getNamespace:function(t){return o.NAMESPACE+"-"+t},createHeaderContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("header")),e.append(this.createTitleContent()),e.prepend(this.createCloseButton()),e},createTitleContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("title")),e},createCloseButton:function(){var e=t("<div></div>");e.addClass(this.getNamespace("close-button"));var n=t('<button class="close">&times;</button>');return e.append(n),e.on("click",{dialog:this},function(t){t.data.dialog.close()}),e},createBodyContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("body")),e.append(this.createMessageContent()),e},createMessageContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("message")),e},createFooterContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("footer")),e},createFooterButtons:function(){var e=this,n=t("<div></div>");return n.addClass(this.getNamespace("footer-buttons")),this.indexedButtons={},t.each(this.options.buttons,function(t,i){i.id||(i.id=o.newGuid());var s=e.createButton(i);e.indexedButtons[i.id]=s,n.append(s)}),n},createButton:function(e){var n=t('<button class="btn"></button>');return n.prop("id",e.id),n.data("button",e),"undefined"!=typeof e.icon&&""!==t.trim(e.icon)&&n.append(this.createButtonIcon(e.icon)),"undefined"!=typeof e.label&&n.append(e.label),n.addClass("undefined"!=typeof e.cssClass&&""!==t.trim(e.cssClass)?e.cssClass:"btn-default"),"undefined"!=typeof e.hotkey&&(this.registeredButtonHotkeys[e.hotkey]=n),n.on("click",{dialog:this,$button:n,button:e},function(t){var e=t.data.dialog,n=t.data.$button,o=n.data("button");"function"==typeof o.action&&o.action.call(n,e,t),o.autospin&&n.toggleSpin(!0)}),this.enhanceButton(n),"undefined"!=typeof e.enabled&&n.toggleEnable(e.enabled),n},enhanceButton:function(t){return t.dialog=this,t.toggleEnable=function(t){var e=this;return"undefined"!=typeof t?e.prop("disabled",!t).toggleClass("disabled",!t):e.prop("disabled",!e.prop("disabled")),e},t.enable=function(){var t=this;return t.toggleEnable(!0),t},t.disable=function(){var t=this;return t.toggleEnable(!1),t},t.toggleSpin=function(e){var n=this,o=n.dialog,i=n.find("."+o.getNamespace("button-icon"));return"undefined"==typeof e&&(e=!(t.find(".icon-spin").length>0)),e?(i.hide(),t.prepend(o.createButtonIcon(o.getSpinicon()).addClass("icon-spin"))):(i.show(),t.find(".icon-spin").remove()),n},t.spin=function(){var t=this;return t.toggleSpin(!0),t},t.stopSpin=function(){var t=this;return t.toggleSpin(!1),t},this},createButtonIcon:function(e){var n=t("<span></span>");return n.addClass(this.getNamespace("button-icon")).addClass(e),n},enableButtons:function(e){return t.each(this.indexedButtons,function(t,n){n.toggleEnable(e)}),this},updateClosable:function(){return this.isRealized()&&this.getModalHeader().find("."+this.getNamespace("close-button")).toggle(this.isClosable()),this},onShow:function(t){return this.options.onshow=t,this},onShown:function(t){return this.options.onshown=t,this},onHide:function(t){return this.options.onhide=t,this},onHidden:function(t){return this.options.onhidden=t,this},isRealized:function(){return this.realized},setRealized:function(t){return this.realized=t,this},isOpened:function(){return this.opened},setOpened:function(t){return this.opened=t,this},handleModalEvents:function(){return this.getModal().on("show.bs.modal",{dialog:this},function(t){var e=t.data.dialog;if(e.setOpened(!0),e.isModalEvent(t)&&"function"==typeof e.options.onshow){var n=e.options.onshow(e);return n===!1&&e.setOpened(!1),n}}),this.getModal().on("shown.bs.modal",{dialog:this},function(t){var e=t.data.dialog;e.isModalEvent(t)&&"function"==typeof e.options.onshown&&e.options.onshown(e)}),this.getModal().on("hide.bs.modal",{dialog:this},function(t){var e=t.data.dialog;if(e.setOpened(!1),e.isModalEvent(t)&&"function"==typeof e.options.onhide){var n=e.options.onhide(e);return n===!1&&e.setOpened(!0),n}}),this.getModal().on("hidden.bs.modal",{dialog:this},function(e){var n=e.data.dialog;n.isModalEvent(e)&&"function"==typeof n.options.onhidden&&n.options.onhidden(n),n.isAutodestroy()&&(delete o.dialogs[n.getId()],t(this).remove()),o.moveFocus()}),this.handleModalBackdropEvent(),this.getModal().on("keyup",{dialog:this},function(t){27===t.which&&t.data.dialog.isClosable()&&t.data.dialog.canCloseByKeyboard()&&t.data.dialog.close()}),this.getModal().on("keyup",{dialog:this},function(e){var n=e.data.dialog;if("undefined"!=typeof n.registeredButtonHotkeys[e.which]){var o=t(n.registeredButtonHotkeys[e.which]);!o.prop("disabled")&&o.focus().trigger("click")}}),this},handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(e){t(e.target).hasClass("modal-backdrop")&&e.data.dialog.isClosable()&&e.data.dialog.canCloseByBackdrop()&&e.data.dialog.close()}),this},isModalEvent:function(t){return"undefined"!=typeof t.namespace&&"bs.modal"===t.namespace},makeModalDraggable:function(){return this.options.draggable&&(this.getModalHeader().addClass(this.getNamespace("draggable")).on("mousedown",{dialog:this},function(t){var e=t.data.dialog;e.draggableData.isMouseDown=!0;var n=e.getModalDialog().offset();e.draggableData.mouseOffset={top:t.clientY-n.top,left:t.clientX-n.left}}),this.getModal().on("mouseup mouseleave",{dialog:this},function(t){t.data.dialog.draggableData.isMouseDown=!1}),t("body").on("mousemove",{dialog:this},function(t){var e=t.data.dialog;e.draggableData.isMouseDown&&e.getModalDialog().offset({top:t.clientY-e.draggableData.mouseOffset.top,left:t.clientX-e.draggableData.mouseOffset.left})})),this},realize:function(){return this.initModalStuff(),this.getModal().addClass(o.NAMESPACE).addClass(this.getCssClass()),this.updateSize(),this.getDescription()&&this.getModal().attr("aria-describedby",this.getDescription()),this.getModalFooter().append(this.createFooterContent()),this.getModalHeader().append(this.createHeaderContent()),this.getModalBody().append(this.createBodyContent()),this.getModal().data("bs.modal",new n(this.getModal(),{backdrop:"static",keyboard:!1,show:!1})),this.makeModalDraggable(),this.handleModalEvents(),this.setRealized(!0),this.updateButtons(),this.updateType(),this.updateTitle(),this.updateMessage(),this.updateClosable(),this.updateAnimate(),this.updateSize(),this.updateTabindex(),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this},close:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("hide"),this}},o.prototype=t.extend(o.prototype,o.METHODS_TO_OVERRIDE[n.getModalVersion()]),o.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},o.show=function(t){return new o(t).open()},o.alert=function(){var e={},n={type:o.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,buttonLabel:o.DEFAULT_TEXTS.OK,callback:null};return e="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?t.extend(!0,n,arguments[0]):t.extend(!0,n,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),new o({type:e.type,title:e.title,message:e.message,closable:e.closable,draggable:e.draggable,data:{callback:e.callback},onhide:function(t){!t.getData("btnClicked")&&t.isClosable()&&"function"==typeof t.getData("callback")&&t.getData("callback")(!1)},buttons:[{label:e.buttonLabel,action:function(t){t.setData("btnClicked",!0),"function"==typeof t.getData("callback")&&t.getData("callback")(!0),t.close()}}]}).open()},o.confirm=function(){var e={},n={type:o.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,btnCancelLabel:o.DEFAULT_TEXTS.CANCEL,btnOKLabel:o.DEFAULT_TEXTS.OK,btnOKClass:null,callback:null};return e="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?t.extend(!0,n,arguments[0]):t.extend(!0,n,{message:arguments[0],closable:!1,buttonLabel:o.DEFAULT_TEXTS.OK,callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),null===e.btnOKClass&&(e.btnOKClass=["btn",e.type.split("-")[1]].join("-")),new o({type:e.type,title:e.title,message:e.message,closable:e.closable,draggable:e.draggable,data:{callback:e.callback},buttons:[{label:e.btnCancelLabel,action:function(t){"function"==typeof t.getData("callback")&&t.getData("callback")(!1),t.close()}},{label:e.btnOKLabel,cssClass:e.btnOKClass,action:function(t){"function"==typeof t.getData("callback")&&t.getData("callback")(!0),t.close()}}]}).open()},o.warning=function(t,e){return new o({type:o.TYPE_WARNING,message:t}).open()},o.danger=function(t,e){return new o({type:o.TYPE_DANGER,message:t}).open()},o.success=function(t,e){return new o({type:o.TYPE_SUCCESS,message:t}).open()},o});
/* Modernizr 2.6.2 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-fontface-backgroundsize-borderimage-borderradius-boxshadow-flexbox-flexbox_legacy-hsla-multiplebgs-opacity-rgba-textshadow-cssanimations-csscolumns-generatedcontent-cssgradients-cssreflections-csstransforms-csstransforms3d-csstransitions-applicationcache-canvas-canvastext-draganddrop-audio-video-input-inputtypes-localstorage-sessionstorage-geolocation-inlinesvg-smil-svg-svgclippaths-touch-webgl-shiv-mq-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function D(a){j.cssText=a}function E(a,b){return D(n.join(a+";")+(b||""))}function F(a,b){return typeof a===b}function G(a,b){return!!~(""+a).indexOf(b)}function H(a,b){for(var d in a){var e=a[d];if(!G(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function I(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:F(f,"function")?f.bind(d||b):f}return!1}function J(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return F(b,"string")||F(b,"undefined")?H(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),I(e,b,c))}function K(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,x,y=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},z=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return y("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},A=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=F(e[d],"function"),F(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),B={}.hasOwnProperty,C;!F(B,"undefined")&&!F(B.call,"undefined")?C=function(a,b){return B.call(a,b)}:C=function(a,b){return b in a&&F(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e}),s.flexbox=function(){return J("flexWrap")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!F(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},s.geolocation=function(){return"geolocation"in navigator},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.rgba=function(){return D("background-color:rgba(150,255,150,.5)"),G(j.backgroundColor,"rgba")},s.hsla=function(){return D("background-color:hsla(120,40%,100%,.5)"),G(j.backgroundColor,"rgba")||G(j.backgroundColor,"hsla")},s.multiplebgs=function(){return D("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return J("backgroundSize")},s.borderimage=function(){return J("borderImage")},s.borderradius=function(){return J("borderRadius")},s.boxshadow=function(){return J("boxShadow")},s.textshadow=function(){return b.createElement("div").style.textShadow===""},s.opacity=function(){return E("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return J("animationName")},s.csscolumns=function(){return J("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return D((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),G(j.backgroundImage,"gradient")},s.cssreflections=function(){return J("boxReflect")},s.csstransforms=function(){return!!J("transform")},s.csstransforms3d=function(){var a=!!J("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},s.csstransitions=function(){return J("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&g.indexOf(d.split(" ")[0])===0}),a},s.generatedcontent=function(){var a;return y(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var L in s)C(s,L)&&(x=L.toLowerCase(),e[x]=s[L](),v.push((e[x]?"":"no-")+x));return e.input||K(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)C(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},D(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.mq=z,e.hasEvent=A,e.testProp=function(a){return H([a])},e.testAllProps=J,e.testStyles=y,e.prefixed=function(a,b,c){return b?J(a,b,c):J(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+v.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
// Generated by CoffeeScript 1.3.3
(function() {
  var $, normaliseLang;

  $ = jQuery;

  normaliseLang = function(lang) {
    lang = lang.replace(/_/, '-').toLowerCase();
    if (lang.length > 3) {
      lang = lang.substring(0, 3) + lang.substring(3).toUpperCase();
    }
    return lang;
  };

  $.defaultLanguage = normaliseLang(navigator.language || navigator.userLanguage);

  $.localize = function(pkg, options) {
    let defaultCallback, fileExtension, intermediateLangData, jsonCall, lang, loadLanguage, localizeElement, localizeForSpecialKeys, localizeImageElement, localizeInputElement, localizeOptgroupElement, notifyDelegateLanguageLoaded, regexify, setAttrFromValueForKey, setTextFromValueForKey, valueForKey, wrappedSet;
    if (options == null) {
      options = {};
    }
    wrappedSet = this;
    intermediateLangData = {};
    fileExtension = options.fileExtension || "json";
    loadLanguage = function(pkg, lang, level) {
      let file;
      if (level == null) {
        level = 1;
      }
      switch (level) {
        case 1:
          intermediateLangData = {};
          if (options.loadBase) {
            file = pkg + ("." + fileExtension);
            return jsonCall(file, pkg, lang, level);
          } else {
            return loadLanguage(pkg, lang, 2);
          }
        case 2:
          if (lang.length >= 2) {
            file = "" + pkg + "-" + (lang.substring(0, 2)) + "." + fileExtension;
            return jsonCall(file, pkg, lang, level);
          }
        case 3:
          if (lang.length >= 5) {
            file = "" + pkg + "-" + (lang.substring(0, 5)) + "." + fileExtension;
            return jsonCall(file, pkg, lang, level);
          }
      }
    };
    jsonCall = function(file, pkg, lang, level) {
      let ajaxOptions, successFunc;
      if (options.pathPrefix != null) {
        file = "" + options.pathPrefix + "/" + file;
      }
      successFunc = function() {
        $.extend(intermediateLangData, window.localeJson);
        notifyDelegateLanguageLoaded(intermediateLangData);
        return loadLanguage(pkg, lang, level + 1);
      };
      ajaxOptions = {
        nope: file+"?"+new Date().getTime(),
        complete: successFunc
      };
     
      return Modernizr.load(ajaxOptions);
    };
    notifyDelegateLanguageLoaded = function(data) {
      if (options.callback != null) {
        return options.callback(data, defaultCallback);
      } else {
        return defaultCallback(data);
      }
    };
    defaultCallback = function(data) {
      $.localize.data[pkg] = data;
      return wrappedSet.each(function() {
        var elem, key, value;
        elem = $(this);
        key = elem.data("localize");
        key || (key = elem.attr("rel").match(/localize\[(.*?)\]/)[1]);
        value = valueForKey(key, data);
        return localizeElement(elem, key, value);
      });
    };
    localizeElement = function(elem, key, value) {
      if (elem.is('input')) {
        localizeInputElement(elem, key, value);
      } else if (elem.is('img')) {
        localizeImageElement(elem, key, value);
      } else if (elem.is('optgroup')) {
        localizeOptgroupElement(elem, key, value);
      }else if($(elem).attr('titleLocale')){
		$(elem).attr('title',value);
	  }else if (!$.isPlainObject(value)) {
        elem.html(value);
      }
      if ($.isPlainObject(value)) {
        return localizeForSpecialKeys(elem, value);
      }
    };
    localizeInputElement = function(elem, key, value) {
      if (elem.is("[placeholder]")) {
        return elem.attr("placeholder", value);
      } else {
        return elem.val(value);
      }
    };
    localizeForSpecialKeys = function(elem, value) {
      setAttrFromValueForKey(elem, "title", value);
      return setTextFromValueForKey(elem, "text", value);
    };
    localizeOptgroupElement = function(elem, key, value) {
      return elem.attr("label", value);
    };
    localizeImageElement = function(elem, key, value) {
      setAttrFromValueForKey(elem, "alt", value);
      return setAttrFromValueForKey(elem, "src", value);
    };
    valueForKey = function(key, data) {
      let keys, value, _i, _len;
      keys = key.split(/\./);
      value = data;
      for (_i = 0, _len = keys.length; _i < _len; _i++) {
        key = keys[_i];
        value = value != null ? value[key] : null;
      }
      return value;
    };
    setAttrFromValueForKey = function(elem, key, value) {
      value = valueForKey(key, value);
      if (value != null) {
        return elem.attr(key, value);
      }
    };
    setTextFromValueForKey = function(elem, key, value) {
      value = valueForKey(key, value);
      if (value != null) {
        return elem.text(value);
      }
    };
    regexify = function(string_or_regex_or_array) {
      let thing;
      if (typeof string_or_regex_or_array === "string") {
        return "^" + string_or_regex_or_array + "$";
      } else if (string_or_regex_or_array.length != null) {
        return ((function() {
          let _i, _len, _results;
          _results = [];
          for (_i = 0, _len = string_or_regex_or_array.length; _i < _len; _i++) {
            thing = string_or_regex_or_array[_i];
            _results.push(regexify(thing));
          }
          return _results;
        })()).join("|");
      } else {
        return string_or_regex_or_array;
      }
    };
    lang = normaliseLang(options.language ? options.language : $.defaultLanguage);
    if (!(options.skipLanguage && lang.match(regexify(options.skipLanguage)))) {
      loadLanguage(pkg, lang, 1);
    }
    return wrappedSet;
  };

  $.fn.localize = $.localize;

  $.localize.data = {};

}).call(this);

/*!
 * jodit - Jodit is an awesome and useful wysiwyg editor with filebrowser
 * Author: Chupurnov <chupurnov@gmail.com> (https://xdsoft.net/jodit/)
 * Version: v4.6.2
 * Url: https://xdsoft.net/jodit/
 * License(s): MIT
 */


! function (t, e) {
    if ("object" == typeof exports && "object" == typeof module) module.exports = e(require("{}"));
    else if ("function" == typeof define && define.amd) define(["{}"], e);
    else {
        var n = "object" == typeof exports ? e(require("{}")) : e(t["{}"]);
        for (var o in n)("object" == typeof exports ? exports : t)[o] = n[o]
    }
}(self, (function (t) {
    return function () {
        var e, n, o, r = {
                140: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        V: function () {
                            return w
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(17352),
                        s = n(22664),
                        a = n(66927),
                        u = n(50025),
                        c = n(65147),
                        l = n(63915),
                        f = n(58597),
                        d = n(14961),
                        p = n(36115),
                        h = (n(70265), n(9979)),
                        v = n(31859),
                        g = n(62994),
                        m = n(18043),
                        y = n(80004),
                        b = n(75889),
                        _ = n(83797),
                        C = n(10274),
                        w = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                n.browser = n.c.div(n.componentName), n.status_line = n.c.div(n.getFullElName("status")), n.tree = new C.V(n), n.files = new C.Q(n), n.state = (0, u.sH)({
                                    currentPath: "",
                                    currentSource: b.o,
                                    currentBaseUrl: "",
                                    activeElements: [],
                                    elements: [],
                                    sources: [],
                                    view: "tiles",
                                    sortBy: "changed-desc",
                                    filterWord: "",
                                    onlyImages: !1
                                }), n.errorHandler = function (t) {
                                    (0, c.isAbortError)(t) || (t instanceof Error ? n.status(n.i18n(t.message)) : n.status(n.dataProvider.getMessage(t)))
                                }, n.close = function () {
                                    n._dialog.close()
                                }, n.__prevButtons = [], n.attachEvents(e);
                                var o = n;
                                o.options = (0, c.ConfigProto)(e || {}, p.T.defaultOptions.filebrowser), o.browser.component = n, o.container = o.browser, o.o.showFoldersPanel && o.browser.appendChild(o.tree.container), o.browser.appendChild(o.files.container), o.browser.appendChild(o.status_line), m.c.call(o), g.nW.call(o), y.r.call(o), ["getLocalFileByUrl", "crop", "resize", "create", "fileMove", "folderMove", "fileRename", "folderRename", "fileRemove", "folderRemove", "folder", "items", "permissions"].forEach((function (t) {
                                    null != n.options[t] && (n.options[t] = (0, c.ConfigProto)(n.options[t], n.o.ajax))
                                }));
                                var i = n.o.saveStateInStorage || {
                                        storeLastOpenedFolder: !1,
                                        storeView: !1,
                                        storeSortBy: !1
                                    },
                                    s = i.storeSortBy,
                                    a = i.storeLastOpenedFolder,
                                    l = i.storeView && n.storage.get("view");
                                o.state.view = l && null == n.o.view ? "list" === l ? "list" : "tiles" : "list" === o.o.view ? "list" : "tiles", o.files.setMod("view", o.state.view);
                                var f = s && o.storage.get("sortBy");
                                if (f) {
                                    var d = f.split("-");
                                    o.state.sortBy = ["changed", "name", "size"].includes(d[0]) ? f : "changed-desc"
                                } else o.state.sortBy = o.o.sortBy || "changed-desc";
                                if (a) {
                                    var h = o.storage.get("currentPath"),
                                        v = o.storage.get("currentSource");
                                    o.state.currentPath = null != h ? h : "", o.state.currentSource = null != v ? v : ""
                                }
                                return o.initUploader(o), o.setStatus(r.f.ready), n
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "FileBrowser"
                            }, Object.defineProperty(e.prototype, "dataProvider", {
                                get: function () {
                                    return (0, _.S)(this, this.options)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.onSelect = function (t) {
                                var e = this;
                                return function () {
                                    if (e.state.activeElements.length) {
                                        var n = [],
                                            o = [];
                                        e.state.activeElements.forEach((function (t) {
                                            var e = t.fileURL;
                                            e && (n.push(e), o.push(t.isImage || !1))
                                        })), e.close();
                                        var r = {
                                            baseurl: "",
                                            files: n,
                                            isImages: o
                                        };
                                        (0, c.isFunction)(t) && t(r), e.close()
                                    }
                                    return !1
                                }
                            }, Object.defineProperty(e.prototype, "_dialog", {
                                get: function () {
                                    var t, e = this,
                                        n = this.dlg({
                                            minWidth: Math.min(700, screen.width),
                                            minHeight: 300,
                                            buttons: null !== (t = this.o.headerButtons) && void 0 !== t ? t : ["fullsize", "dialog.close"]
                                        });
                                    return ["beforeClose", "afterClose", "beforeOpen"].forEach((function (t) {
                                        return n.events.on(n, t, (function () {
                                            return e.e.fire(t)
                                        }))
                                    })), n.setSize(this.o.width, this.o.height), n
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "storage", {
                                get: function () {
                                    return l.wc.makeStorage(Boolean(this.o.saveStateInStorage), this.componentName)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "isOpened", {
                                get: function () {
                                    return this._dialog.isOpened && "none" !== this.browser.style.display
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.status = function (t, e) {
                                t && !(0, c.isAbortError)(t) && ((0, c.isString)(t) || (t = t.message), (0, c.isString)(t) && (0, c.trim)(t).length && this.message.message(t, e ? "success" : "error", this.o.howLongShowMsg))
                            }, e.prototype.open = function (t, e) {
                                var n = this;
                                return void 0 === t && (t = this.o.defaultCallback), void 0 === e && (e = !1), this.state.onlyImages = e, this.async.promise((function (e, o) {
                                    var r;
                                    if (!n.o.items || !n.o.items.url) throw (0, c.error)("Need set options.filebrowser.ajax.url");
                                    var s = 0;
                                    n.e.off(n.files.container, "dblclick").on(n.files.container, "dblclick", n.onSelect(t)).on(n.files.container, "touchstart", (function () {
                                        var e = (new Date).getTime();
                                        i.EMULATE_DBLCLICK_TIMEOUT > e - s && n.onSelect(t)(), s = e
                                    })).off("select.filebrowser").on("select.filebrowser", n.onSelect(t));
                                    var a = n.c.div();
                                    null === (r = n.toolbar) || void 0 === r || r.appendTo(a), n.__updateToolbarButtons(), n._dialog.open(n.browser, a), n.e.fire("sort.filebrowser", n.state.sortBy), (0, v.r)(n).then(e, o).finally((function () {
                                        var t;
                                        n.isInDestruct || null === (t = null == n ? void 0 : n.e) || void 0 === t || t.fire("fileBrowserReady.filebrowser")
                                    }))
                                })).catch((function (t) {
                                    if (!(0, c.isAbortError)(t) && !i.IS_PROD) throw t
                                }))
                            }, e.prototype.__getButtons = function () {
                                var t, e = this;
                                return (null !== (t = this.o.buttons) && void 0 !== t ? t : []).filter((function (t) {
                                    if (!(0, c.isString)(t)) return !0;
                                    switch (t) {
                                        case "filebrowser.upload":
                                            return e.dataProvider.canI("FileUpload");
                                        case "filebrowser.edit":
                                            return e.dataProvider.canI("ImageResize") || e.dataProvider.canI("ImageCrop");
                                        case "filebrowser.remove":
                                            return e.dataProvider.canI("FileRemove")
                                    }
                                    return !0
                                }))
                            }, e.prototype.initUploader = function (t) {
                                var e, n = this,
                                    o = this,
                                    r = null === (e = null == t ? void 0 : t.options) || void 0 === e ? void 0 : e.uploader,
                                    i = (0, c.ConfigProto)(r || {}, p.T.defaultOptions.uploader),
                                    s = function () {
                                        return (0, h.f)(n)
                                    };
                                o.uploader = o.getInstance("Uploader", i), o.uploader.setPath(o.state.currentPath).setSource(o.state.currentSource).bind(o.browser, s, o.errorHandler), this.state.on(["change.currentPath", "change.currentSource"], (function () {
                                    n.uploader.setPath(n.state.currentPath).setSource(n.state.currentSource)
                                })), o.e.on("bindUploader.filebrowser", (function (t) {
                                    o.uploader.bind(t, s, o.errorHandler)
                                }))
                            }, e.prototype.destruct = function () {
                                var e;
                                this.isInDestruct || (null === (e = (0, s.cached)(this, "_dialog")) || void 0 === e || e.destruct(), t.prototype.destruct.call(this), this.events && this.e.off(".filebrowser"), this.uploader && this.uploader.destruct())
                            }, e.prototype.__updateToolbarButtons = function () {
                                var t, e = this.__getButtons();
                                (function (t, e) {
                                    if (t.length !== e.length) return !1;
                                    for (var n = 0; t.length > n; n++)
                                        if (t[n] !== e[n]) return !1;
                                    return !0
                                })(this.__prevButtons, e) || (this.__prevButtons = e, null === (t = this.toolbar) || void 0 === t || t.build(e))
                            }, (0, o.Cg)([s.cache], e.prototype, "dataProvider", null), (0, o.Cg)([s.cache], e.prototype, "_dialog", null), (0, o.Cg)([s.cache], e.prototype, "storage", null), (0, o.Cg)([s.autobind], e.prototype, "status", null), (0, o.Cg)([s.autobind], e.prototype, "open", null), (0, o.Cg)([(0, a.w)("dataProvider:changePermissions")], e.prototype, "__updateToolbarButtons", null), (0, o.Cg)([(0, s.derive)(f.z)], e)
                        }(d.T)
                },
                223: function (t) {
                    t.exports = '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M5.09668 6.99707H7.17358L4.17358 3.99707L1.17358 6.99707H3.09668V17.0031H1.15881L4.15881 20.0031L7.15881 17.0031H5.09668V6.99707Z"/> <path d="M22.8412 7H8.84119V5H22.8412V7Z"/> <path d="M22.8412 11H8.84119V9H22.8412V11Z"/> <path d="M8.84119 15H22.8412V13H8.84119V15Z"/> <path d="M22.8412 19H8.84119V17H22.8412V19Z"/> </svg>'
                },
                225: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(71274),
                        c = n(26150),
                        l = n(38322),
                        f = n(29866);
                    n(50248);
                    var d = function (t) {
                        function e() {
                            var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                            return e.addNativeListeners = function () {
                                e.j.e.off(e.j.editor, "input.placeholder keydown.placeholder").on(e.j.editor, "input.placeholder keydown.placeholder", e.toggle)
                            }, e.addEvents = function () {
                                var t = e.j;
                                t.o.useInputsPlaceholder && t.element.hasAttribute("placeholder") && (e.placeholderElm.innerHTML = (0, c.C)(t.element, "placeholder") || ""), t.e.fire("placeholder", e.placeholderElm.innerHTML), t.e.off(".placeholder").on("changePlace.placeholder", e.addNativeListeners).on("change.placeholder focus.placeholder keyup.placeholder mouseup.placeholder keydown.placeholder mousedown.placeholder afterSetMode.placeholder changePlace.placeholder", e.toggle).on(window, "load", e.toggle), e.addNativeListeners(), e.toggle()
                            }, e
                        }
                        return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                            var e = this;
                            t.o.showPlaceholder && (this.placeholderElm = t.c.fromHTML('<span data-ref="placeholder" style="display: none;" class="jodit-placeholder">'.concat(t.i18n(t.o.placeholder), "</span>")), "rtl" === t.o.direction && (this.placeholderElm.style.right = "0px", this.placeholderElm.style.direction = "rtl"), t.e.on("readonly", (function (t) {
                                t ? e.hide() : e.toggle()
                            })).on("changePlace", this.addEvents), this.addEvents())
                        }, e.prototype.show = function () {
                            var t = this.j;
                            if (!t.o.readonly) {
                                var e = 0,
                                    n = 0,
                                    o = t.s.current(),
                                    r = o && s.J.closest(o, s.J.isBlock, t.editor) || t.editor,
                                    i = t.ew.getComputedStyle(r),
                                    a = t.ew.getComputedStyle(t.editor);
                                t.workplace.appendChild(this.placeholderElm);
                                var c = t.editor.firstChild;
                                if (s.J.isElement(c) && !(0, u.r)(c)) {
                                    var f = t.ew.getComputedStyle(c);
                                    e = parseInt(f.getPropertyValue("margin-top"), 10), n = parseInt(f.getPropertyValue("margin-left"), 10), this.placeholderElm.style.fontSize = parseInt(f.getPropertyValue("font-size"), 10) + "px", this.placeholderElm.style.lineHeight = f.getPropertyValue("line-height")
                                } else this.placeholderElm.style.fontSize = parseInt(i.getPropertyValue("font-size"), 10) + "px", this.placeholderElm.style.lineHeight = i.getPropertyValue("line-height");
                                (0, l.A)(this.placeholderElm, {
                                    display: "block",
                                    textAlign: i.getPropertyValue("text-align"),
                                    paddingTop: parseInt(a.paddingTop, 10) + "px",
                                    paddingLeft: parseInt(a.paddingLeft, 10) + "px",
                                    paddingRight: parseInt(a.paddingRight, 10) + "px",
                                    marginTop: Math.max(parseInt(i.getPropertyValue("margin-top"), 10), e),
                                    marginLeft: Math.max(parseInt(i.getPropertyValue("margin-left"), 10), n)
                                })
                            }
                        }, e.prototype.hide = function () {
                            s.J.safeRemove(this.placeholderElm)
                        }, e.prototype.toggle = function () {
                            var t = this.j;
                            t.editor && !t.isInDestruct && (t.getRealMode() === r.MODE_WYSIWYG && function (t) {
                                var e;
                                if (!t.firstChild) return !0;
                                var n = t.firstChild;
                                if (r.INSEPARABLE_TAGS.has(null === (e = n.nodeName) || void 0 === e ? void 0 : e.toLowerCase()) || /^(TABLE)$/i.test(n.nodeName)) return !1;
                                var o = s.J.next(n, (function (t) {
                                    return t && !s.J.isEmptyTextNode(t)
                                }), t);
                                return s.J.isText(n) && !o ? s.J.isEmptyTextNode(n) : !o && s.J.each(n, (function (t) {
                                    return !(s.J.isLeaf(t) || s.J.isList(t)) && (s.J.isEmpty(t) || s.J.isTag(t, "br"))
                                }))
                            }(t.editor) ? this.show() : this.hide())
                        }, e.prototype.beforeDestruct = function (t) {
                            this.hide(), t.e.off(".placeholder").off(window, "load", this.toggle)
                        }, (0, o.Cg)([(0, i.debounce)((function (t) {
                            return t.defaultTimeout / 10
                        }), !0)], e.prototype, "toggle", null), e
                    }(f.k);
                    a.fg.add("placeholder", d)
                },
                449: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        N: function () {
                            return r
                        },
                        k: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                            return t.replace(/([A-Z])([A-Z])([a-z])/g, "$1-$2$3").replace(/([a-z])([A-Z])/g, "$1-$2").replace(/[\s_]+/g, "-").toLowerCase()
                        },
                        r = function (t) {
                            return t.replace(/([A-Z])([A-Z])([a-z])/g, "$1-$2$3").replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase()
                        }
                },
                641: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $: function () {
                            return i
                        },
                        l: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n) {
                        for (var o = t.getBoundingClientRect(), r = t, i = o.top, s = o.height; r && r !== e && r.parentNode;) {
                            if ((o = (r = r.parentNode).getBoundingClientRect()).bottom < i) return !1;
                            if (o.top >= i + s) return !1
                        }
                        return (n.documentElement && n.documentElement.clientHeight || 0) >= i
                    }

                    function i(t, e, n) {
                        o.J.isHTMLElement(t) && !r(t, e, n) && (e.clientHeight !== e.scrollHeight && (e.scrollTop = t.offsetTop), r(t, e, n) || t.scrollIntoView())
                    }
                },
                926: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        r: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n, r, i, s) {
                        return o.J.isText(e) && !e.nodeValue ? (e === s && t.s.isCollapsed() && t.s.setCursorAfter(e), o.J.safeRemove(e), !0) : n
                    }
                },
                928: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M621 1280h595v-595zm-45-45l595-595h-595v595zm1152 77v192q0 14-9 23t-23 9h-224v224q0 14-9 23t-23 9h-192q-14 0-23-9t-9-23v-224h-864q-14 0-23-9t-9-23v-864h-224q-14 0-23-9t-9-23v-192q0-14 9-23t23-9h224v-224q0-14 9-23t23-9h192q14 0 23 9t9 23v224h851l246-247q10-9 23-9t23 9q9 10 9 23t-9 23l-247 246v851h224q14 0 23 9t9 23z"/> </svg>'
                },
                931: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        I: function () {
                            return i
                        }
                    }), n(17352);
                    var o = n(65147),
                        r = n(38322),
                        i = function () {
                            function t() {}
                            return t.getIcon = function (e) {
                                return /<svg/i.test(e) ? e : t.icons[e] || t.icons[e.replace(/-/g, "_")] || t.icons[e.replace(/_/g, "-")] || t.icons[(0, o.camelCase)(e)] || t.icons[(0, o.kebabCase)(e)] || t.icons[e.toLowerCase()]
                            }, t.exists = function (t) {
                                return void 0 !== this.getIcon(t)
                            }, t.get = function (t, e) {
                                return void 0 === e && (e = "<span></span>"), this.getIcon(t) || e
                            }, t.set = function (t, e) {
                                return this.icons[t.replace("_", "-")] = e, this
                            }, t.makeIcon = function (e, n) {
                                var o, i, s, a;
                                if (n) {
                                    var u, c, l = n.name,
                                        f = n.iconURL,
                                        d = n.fill,
                                        p = l.replace(/[^a-zA-Z0-9]/g, "_");
                                    /<svg/.test(l) || (c = null === (i = (o = e.o).getIcon) || void 0 === i ? void 0 : i.call(o, l, p));
                                    var h = "".concat(l).concat(f).concat(d).concat(null != c ? c : "");
                                    if (e.o.cache && this.__cache.has(h)) return null === (s = this.__cache.get(h)) || void 0 === s ? void 0 : s.cloneNode(!0);
                                    if (f) u = e.c.span(), (0, r.A)(u, "backgroundImage", "url(" + f.replace("{basePath}", (null == e ? void 0 : e.basePath) || "") + ")");
                                    else {
                                        var v = c || t.get(l, "") || (null === (a = e.o.extraIcons) || void 0 === a ? void 0 : a[l]);
                                        v && (u = e.c.fromHTML(v.trim()), /^<svg/i.test(l) || u.classList.add("jodit-icon_" + p))
                                    }
                                    return u && (u.classList.add("jodit-icon"), u.style.fill = d, e.o.cache && this.__cache.set(h, u.cloneNode(!0))), u
                                }
                            }, t.icons = {}, t.__cache = new Map, t
                        }()
                },
                1239: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(56298),
                        s = n(71005),
                        a = (n(20797), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.buttons = [{
                                    name: "ul",
                                    group: "list"
                                }, {
                                    name: "ol",
                                    group: "list"
                                }], e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                t.registerCommand("insertUnorderedList", this.onCommand).registerCommand("insertOrderedList", this.onCommand)
                            }, e.prototype.onCommand = function (t, e, n) {
                                return this.jodit.s.commitStyle({
                                    element: "insertunorderedlist" === t ? "ul" : "ol",
                                    attributes: {
                                        style: {
                                            listStyleType: null != n ? n : null
                                        }
                                    }
                                }), this.jodit.synchronizeValues(), !1
                            }, e.prototype.beforeDestruct = function (t) {}, (0, o.Cg)([r.autobind], e.prototype, "onCommand", null), e
                        }(s.k));
                    i.fg.add("orderedList", a)
                },
                1540: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = n(26150),
                        s = n(69198),
                        a = n(84103),
                        u = function (t) {
                            function e(e, r) {
                                var i = t.call(this, e, r) || this;
                                return i.state = (0, o.Cl)({}, n.defaultState), Object.assign(i.state, r), i
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                                return "UISelect"
                            }, e.prototype.createContainer = function (e) {
                                var n, o = t.prototype.createContainer.call(this, e),
                                    r = this.j,
                                    s = this.nativeInput,
                                    a = function () {
                                        return r.create.element("option")
                                    };
                                if (void 0 !== e.placeholder) {
                                    var u = a();
                                    u.value = "", u.text = r.i18n(e.placeholder), s.add(u)
                                }
                                return null === (n = e.options) || void 0 === n || n.forEach((function (t) {
                                    var e = a();
                                    e.value = t.value.toString(), e.text = r.i18n(t.text), s.add(e)
                                })), e.size && e.size > 0 && (0, i.C)(s, "size", e.size), e.multiple && (0, i.C)(s, "multiple", ""), o
                            }, e.prototype.createNativeInput = function () {
                                return this.j.create.element("select")
                            }, e.prototype.updateValidators = function () {
                                t.prototype.updateValidators.call(this), this.state.required && (this.validators.delete(a.O.required), this.validators.add(a.U.m))
                            }, e.defaultState = (0, o.Cl)((0, o.Cl)({}, s.t.defaultState), {
                                options: [],
                                size: 1,
                                multiple: !1
                            }), n = (0, o.Cg)([r.s], e)
                        }(s.t)
                },
                1677: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = n(29866),
                        l = (n(63400), !r.IS_ES_NEXT && r.IS_IE),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.__isToolbarStuck = !1, e.__createDummy = function (t) {
                                    e.__dummyBox = e.j.c.div(), e.__dummyBox.classList.add("jodit_sticky-dummy_toolbar"), e.j.container.insertBefore(e.__dummyBox, t)
                                }, e.addSticky = function (t) {
                                    e.__isToolbarStuck || (l && !e.__dummyBox && e.__createDummy(t), e.j.container.classList.add("jodit_sticky"), e.__isToolbarStuck = !0), (0, u.css)(t, {
                                        top: e.j.o.toolbarStickyOffset || null,
                                        width: e.j.container.offsetWidth - 2
                                    }), e.__dummyBox && (0, u.css)(e.__dummyBox, {
                                        height: t.offsetHeight
                                    })
                                }, e.removeSticky = function (t) {
                                    e.__isToolbarStuck && ((0, u.css)(t, {
                                        width: "",
                                        top: ""
                                    }), e.j.container.classList.remove("jodit_sticky"), e.__isToolbarStuck = !1)
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.e.on(t.ow, "scroll.sticky wheel.sticky mousewheel.sticky resize.sticky", this.__onScroll).on("getStickyState.sticky", (function () {
                                    return e.__isToolbarStuck
                                }))
                            }, e.prototype.__onScroll = function () {
                                var t = this.jodit;
                                if (t.o.toolbarSticky && t.o.toolbar) {
                                    var e = t.ow.pageYOffset || t.od.documentElement && t.od.documentElement.scrollTop || 0,
                                        n = (0, u.offset)(t.container, t, t.od, !0),
                                        o = t.getMode() === r.MODE_WYSIWYG && e + t.o.toolbarStickyOffset > n.top && n.top + n.height > e + t.o.toolbarStickyOffset && !(t.o.toolbarDisableStickyForMobile && this.__isMobile());
                                    if (this.__isToolbarStuck !== o) {
                                        var i = t.toolbarContainer;
                                        i && (o ? this.addSticky(i) : this.removeSticky(i)), t.e.fire("toggleSticky", o)
                                    }
                                }
                            }, e.prototype.__isMobile = function () {
                                var t = this.j;
                                return t && t.options && t.container && t.options.sizeSM >= t.container.offsetWidth
                            }, e.prototype.beforeDestruct = function (t) {
                                s.J.safeRemove(this.__dummyBox), t.e.off(t.ow, "scroll.sticky wheel.sticky mousewheel.sticky resize.sticky", this.__onScroll).off(".sticky")
                            }, (0, o.Cg)([(0, i.throttle)()], e.prototype, "__onScroll", null), e
                        }(c.k);
                    a.fg.add("sticky", f)
                },
                1963: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(69052);

                    function i() {
                        for (var t = [], e = 0; arguments.length > e; e++) t[e] = arguments[e];
                        return function (e) {
                            for (var n = e.prototype, i = 0; t.length > i; i++)
                                for (var s = t[i], a = Object.getOwnPropertyNames(s.prototype), u = function (t) {
                                        var e = a[t],
                                            i = Object.getOwnPropertyDescriptor(s.prototype, e);
                                        null != i && (0, r.T)(i.value) && !(0, r.T)(n[e]) && Object.defineProperty(n, e, {
                                            enumerable: !0,
                                            configurable: !0,
                                            writable: !0,
                                            value: function () {
                                                for (var t, e = [], n = 0; arguments.length > n; n++) e[n] = arguments[n];
                                                return (t = i.value).call.apply(t, (0, o.fX)([this], (0, o.zs)(e), !1))
                                            }
                                        })
                                    }, c = 0; a.length > c; c++) u(c)
                        }
                    }
                },
                1992: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        b: function () {
                            return i
                        }
                    });
                    var o = n(65147),
                        r = n(76134);

                    function i(t, e, n, i, s) {
                        var a;
                        if ((0, o.isFunction)(t)) a = t(e);
                        else switch (t) {
                            case "ace":
                                if (!e.o.shadowRoot) {
                                    a = new r.p(e, n, i, s);
                                    break
                                }
                                default:
                                    a = new r.S(e, n, i, s)
                        }
                        return a.init(e), a.onReadyAlways((function () {
                            a.setReadOnly(e.o.readonly)
                        })), a
                    }
                },
                2461: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return "number" == typeof t && !isNaN(t) && isFinite(t)
                    }
                    n.d(e, {
                        E: function () {
                            return o
                        }
                    })
                },
                2533: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(55186),
                        s = n(56298),
                        a = n(65147),
                        u = n(11648),
                        c = new Set([r.KEY_TAB, r.KEY_LEFT, r.KEY_RIGHT, r.KEY_UP, r.KEY_DOWN]);
                    s.fg.add("tableKeyboardNavigation", (function (t) {
                        t.e.off(".tableKeyboardNavigation").on("keydown.tableKeyboardNavigation", (function (e) {
                            var n = e.key,
                                s = function (t, e) {
                                    if (c.has(e)) {
                                        var n = t.s.current();
                                        if (n) {
                                            var o = i.J.up(n, i.J.isCell, t.editor);
                                            if (o) {
                                                var s = t.s.range;
                                                if (e !== r.KEY_TAB && n !== o) {
                                                    var u = e === r.KEY_RIGHT || e === r.KEY_DOWN,
                                                        l = (0, a.call)(u ? i.J.next : i.J.prev, n, (function (t) {
                                                            return e === r.KEY_UP || e === r.KEY_DOWN ? i.J.isTag(t, "br") : Boolean(t)
                                                        }), o);
                                                    if (!u && (l || e !== r.KEY_UP && i.J.isText(n) && 0 !== s.startOffset) || u && (l || e !== r.KEY_DOWN && i.J.isText(n) && n.nodeValue && s.startOffset !== n.nodeValue.length)) return
                                                }
                                                return o
                                            }
                                        }
                                    }
                                }(t, n);
                            if (s) {
                                var l = t.getInstance(u.X, t.o),
                                    f = i.J.closest(s, "table", t.editor),
                                    d = null,
                                    p = n === r.KEY_LEFT || e.shiftKey,
                                    h = function () {
                                        return (0, a.call)(p ? i.J.prev : i.J.next, s, i.J.isCell, f)
                                    };
                                switch (n) {
                                    case r.KEY_TAB:
                                    case r.KEY_LEFT:
                                        (d = h()) || (l.appendRow(f, !!p && f.querySelector("tr"), !p), d = h());
                                        break;
                                    case r.KEY_UP:
                                    case r.KEY_DOWN:
                                        var v = l.formalMatrix(f),
                                            g = (0, o.zs)(l.formalCoordinate(f, s), 2),
                                            m = g[0],
                                            y = g[1];
                                        n === r.KEY_UP ? void 0 !== v[m - 1] && (d = v[m - 1][y]) : void 0 !== v[m + 1] && (d = v[m + 1][y])
                                }
                                if (d) {
                                    if (t.e.fire("hidePopup hideResizer"), d.firstChild) n === r.KEY_TAB ? t.s.select(d, !0) : t.s.setCursorIn(d, n === r.KEY_RIGHT || n === r.KEY_DOWN);
                                    else {
                                        var b = t.createInside.element("br");
                                        d.appendChild(b), t.s.setCursorBefore(b)
                                    }
                                    return t.synchronizeValues(), !1
                                }
                            }
                        }))
                    }))
                },
                2788: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        M: function () {
                            return o
                        }
                    });
                    var o = function () {
                        function t() {
                            this.data = new Map
                        }
                        return t.prototype.set = function (t, e) {
                            return this.data.set(t, e), this
                        }, t.prototype.delete = function (t) {
                            return this.data.delete(t), this
                        }, t.prototype.get = function (t) {
                            return this.data.get(t)
                        }, t.prototype.exists = function (t) {
                            return this.data.has(t)
                        }, t.prototype.clear = function () {
                            return this.data.clear(), this
                        }, t
                    }()
                },
                2805: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.wrapNodes = {
                        exclude: new Set(["hr", "style", "br"]),
                        emptyBlockAfterInit: !0
                    }
                },
                3006: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        c: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(55186),
                        s = n(69198),
                        a = function (t) {
                            function e(e, r) {
                                var i = t.call(this, e, (0, o.Cl)((0, o.Cl)({}, r), {
                                    type: "checkbox"
                                })) || this;
                                return i.state = (0, o.Cl)({}, n.defaultState), Object.assign(i.state, r), i
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                                return "UICheckbox"
                            }, e.prototype.render = function () {
                                return this.j.c.element("label", {
                                    className: this.componentName
                                })
                            }, e.prototype.onChangeChecked = function () {
                                this.value = this.state.checked.toString(), this.nativeInput.checked = this.state.checked, this.setMod("checked", this.state.checked)
                            }, e.prototype.onChangeNativeCheckBox = function () {
                                this.state.checked = this.nativeInput.checked
                            }, e.prototype.onChangeSwitch = function () {
                                this.setMod("switch", this.state.switch);
                                var t = this.getElm("switch-slider");
                                this.state.switch ? (t || (t = this.j.c.div(this.getFullElName("switch-slider"))), i.J.after(this.nativeInput, t)) : i.J.safeRemove(t)
                            }, e.defaultState = (0, o.Cl)((0, o.Cl)({}, s.t.defaultState), {
                                checked: !1,
                                switch: !1
                            }), (0, o.Cg)([(0, r.watch)("state.checked"), (0, r.hook)("ready")], e.prototype, "onChangeChecked", null), (0, o.Cg)([(0, r.watch)("nativeInput:change")], e.prototype, "onChangeNativeCheckBox", null), (0, o.Cg)([(0, r.watch)("state.switch"), (0, r.hook)("ready")], e.prototype, "onChangeSwitch", null), n = (0, o.Cg)([r.component], e)
                        }(s.t)
                },
                3101: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        L: function () {
                            return a
                        }
                    });
                    var o = n(71842),
                        r = n(26150),
                        i = n(61001),
                        s = n(80394);

                    function a(t, e, n) {
                        var a = function (t, e, n) {
                            return t.elementIsBlock ? o.J.up(e, (function (t) {
                                return o.J.isBlock(t) && !o.J.isTag(t, u)
                            }), n.editor) || (0, s.Y)(t, e, n) : ((0, r.C)(e, "size", null), e)
                        }(t, e, n);
                        return t.elementIsList ? (0, i.z)(t, a, n) : o.J.replace(a, t.element, n.createInside, !0)
                    }
                    var u = new Set(["td", "th", "tr", "tbody", "table", "li", "ul", "ol"])
                },
                3258: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        I: function () {
                            return h
                        }
                    });
                    var o = n(31635),
                        r = n(64567),
                        i = n(22664),
                        s = n(71842),
                        a = n(65147),
                        u = n(35265),
                        c = n(57023),
                        l = n(931),
                        f = n(80071),
                        d = n(97394),
                        p = n(8809),
                        h = function (t) {
                            function e(e, n, i) {
                                void 0 === i && (i = null);
                                var s = t.call(this, e) || this;
                                s.control = n, s.target = i, s.state = (0, o.Cl)((0, o.Cl)({}, (0, u.ue)()), {
                                    theme: "toolbar",
                                    currentValue: "",
                                    hasTrigger: !1
                                }), s.openedPopup = null;
                                var a = s.getElm("button");
                                s.button = a, Object.defineProperty(a, "component", {
                                    value: s,
                                    configurable: !0
                                });
                                var c = s.getElm("trigger");
                                return s.trigger = c, c.remove(), e.e.on([s.button, s.trigger], "mousedown", (function (t) {
                                    return t.preventDefault()
                                })), s.onAction(s.onClick), s.hookStatus(r.f.ready, (function () {
                                    s.__initFromControl(), s.update()
                                })), n.mods && Object.keys(n.mods).forEach((function (t) {
                                    n.mods && s.setMod(t, n.mods[t])
                                })), s
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "ToolbarButton"
                            }, Object.defineProperty(e.prototype, "toolbar", {
                                get: function () {
                                    return this.closest(d.Q)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.update = function () {
                                var t, e, n = this.control,
                                    o = this.state,
                                    r = this.closest(d.Q);
                                if (r) {
                                    var i = null === (t = n.value) || void 0 === t ? void 0 : t.call(n, r.jodit, this);
                                    void 0 !== i && (o.value = i), o.disabled = this.__calculateDisabledStatus(r), o.activated = this.__calculateActivatedStatus(r), null === (e = n.update) || void 0 === e || e.call(n, r.jodit, this)
                                }
                            }, e.prototype.__calculateActivatedStatus = function (t) {
                                var e, n;
                                return !((0, a.isJoditObject)(this.j) && !this.j.editorIsActive) && (!!(null === (n = (e = this.control).isActive) || void 0 === n ? void 0 : n.call(e, this.j, this)) || Boolean(t && t.shouldBeActive(this)))
                            }, e.prototype.__calculateDisabledStatus = function (t) {
                                var e, n;
                                return !!this.j.o.disabled || !(!this.j.o.readonly || this.j.o.activeButtonsInReadOnly && this.j.o.activeButtonsInReadOnly.includes(this.control.name)) || !!(null === (n = (e = this.control).isDisabled) || void 0 === n ? void 0 : n.call(e, this.j, this)) || Boolean(t && t.shouldBeDisabled(this))
                            }, e.prototype.onChangeActivated = function () {
                                (0, a.attr)(this.button, "aria-pressed", this.state.activated), t.prototype.onChangeActivated.call(this)
                            }, e.prototype.onChangeText = function () {
                                (0, a.isFunction)(this.control.template) ? this.text.innerHTML = this.control.template(this.j, this.control.name, this.j.i18n(this.state.text)): t.prototype.onChangeText.call(this), this.setMod("text-icons", Boolean(this.text.innerText.trim().length))
                            }, e.prototype.onChangeTabIndex = function () {
                                (0, a.attr)(this.button, "tabindex", this.state.tabIndex)
                            }, e.prototype.createContainer = function () {
                                var e = this.componentName,
                                    n = this.j.c.span(e),
                                    o = t.prototype.createContainer.call(this);
                                (0, a.attr)(n, "role", "listitem"), o.classList.remove(e), o.classList.add(e + "__button"), Object.defineProperty(o, "component", {
                                    value: this
                                }), n.appendChild(o);
                                var r = this.j.c.fromHTML('<span role="trigger" class="'.concat(e, '__trigger">').concat(l.I.get("chevron"), "</span>"));
                                return o.appendChild(r), n
                            }, e.prototype.focus = function () {
                                var t;
                                null === (t = this.container.querySelector("button")) || void 0 === t || t.focus()
                            }, e.prototype.onChangeHasTrigger = function () {
                                this.state.hasTrigger ? this.container.appendChild(this.trigger) : s.J.safeRemove(this.trigger), this.setMod("with-trigger", this.state.hasTrigger || null)
                            }, e.prototype.onChangeDisabled = function () {
                                var t = this.state.disabled ? "disabled" : null;
                                (0, a.attr)(this.trigger, "disabled", t), (0, a.attr)(this.button, "disabled", t), (0, a.attr)(this.container, "disabled", t)
                            }, e.prototype.__initFromControl = function () {
                                var t, e = this.control,
                                    n = this.state;
                                this.updateSize(), n.name = e.name;
                                var o = this.j.o.textIcons;
                                if (!0 === o || (0, a.isFunction)(o) && o(e.name) || e.template) n.icon = (0, u.ue)().icon, n.text = e.text || e.name;
                                else {
                                    if (e.iconURL) n.icon.iconURL = e.iconURL;
                                    else {
                                        var r = e.icon || e.name;
                                        n.icon.name = l.I.exists(r) || (null === (t = this.j.o.extraIcons) || void 0 === t ? void 0 : t[r]) ? r : ""
                                    }
                                    e.iconURL || n.icon.name || (n.text = e.text || e.name)
                                }
                                e.tooltip && (n.tooltip = this.j.i18n((0, a.isFunction)(e.tooltip) ? e.tooltip(this.j, e, this) : e.tooltip)), n.hasTrigger = Boolean(e.list || e.popup && e.exec)
                            }, e.prototype.onTriggerClick = function (t) {
                                var e, n, o, r = this;
                                if (this.openedPopup) this.__closePopup();
                                else {
                                    var i = this.control;
                                    if (t.buffer = {
                                            actionTrigger: this
                                        }, i.list) return this.__openControlList(i);
                                    if ((0, a.isFunction)(i.popup)) {
                                        var s = this.openPopup();
                                        s.parentElement = this;
                                        try {
                                            if (!1 !== this.j.e.fire((0, a.camelCase)("before-".concat(i.name, "-open-popup")), this.target, i, s)) {
                                                var u = null !== (o = null !== (n = null === (e = this.toolbar) || void 0 === e ? void 0 : e.getTarget(this)) && void 0 !== n ? n : this.target) && void 0 !== o ? o : null,
                                                    c = i.popup(this.j, u, this.__closePopup, this);
                                                c ? s.setContent((0, a.isString)(c) ? this.j.c.fromHTML(c) : c).open((function () {
                                                    return (0, a.position)(r.container)
                                                }), !1, this.j.o.allowTabNavigation ? this.container : void 0) : this.__closePopup()
                                            }
                                        } catch (t) {
                                            throw this.__closePopup(), t
                                        }
                                        this.j.e.fire((0, a.camelCase)("after-".concat(i.name, "-open-popup")), s.container)
                                    }
                                }
                            }, e.prototype.__openControlList = function (t) {
                                var e, n = this,
                                    r = null !== (e = this.jodit.options.controls) && void 0 !== e ? e : {},
                                    i = function (t) {
                                        return (0, c.x)(t, r)
                                    },
                                    s = t.list,
                                    u = this.openPopup(),
                                    l = (0, p.$K)(this.j);
                                u.parentElement = this, l.parentElement = u, l.mode = "vertical";
                                var f = function (e, r) {
                                    if ((0, a.isString)(r) && i(r)) return (0, o.Cl)({
                                        name: r.toString()
                                    }, i(r));
                                    if ((0, a.isString)(e) && i(e)) return (0, o.Cl)((0, o.Cl)({
                                        name: e.toString()
                                    }, i(e)), "object" == typeof r ? r : {});
                                    (function (t) {
                                        return (0, a.isPlainObject)(t) && "title" in t && "value" in t
                                    })(e) && (r = e.value, e = e.title);
                                    var s = t.childTemplate,
                                        u = {
                                            name: e.toString(),
                                            template: s && function (t, e, o) {
                                                return s(t, e, o, n)
                                            },
                                            exec: t.childExec ? function (e, n, r) {
                                                var i;
                                                return null === (i = t.childExec) || void 0 === i ? void 0 : i.call(t, e, n, (0, o.Cl)((0, o.Cl)({}, r), {
                                                    parentControl: t
                                                }))
                                            } : t.exec,
                                            data: t.data,
                                            command: t.command,
                                            isActive: t.isChildActive,
                                            value: t.value,
                                            isDisabled: t.isChildDisabled,
                                            mode: t.mode,
                                            args: (0, o.fX)((0, o.fX)([], (0, o.zs)(t.args ? t.args : []), !1), [e, r], !1)
                                        };
                                    return (0, a.isString)(r) && (u.text = r), u
                                };
                                l.build((0, a.isArray)(s) ? s.map(f) : (0, a.keys)(s, !1).map((function (t) {
                                    return f(t, s[t])
                                })), this.target), u.setContent(l).open((function () {
                                    return (0, a.position)(n.container)
                                }), !1, this.j.o.allowTabNavigation ? this.container : void 0), this.state.activated = !0
                            }, e.prototype.onOutsideClick = function (t) {
                                this.openedPopup && (t && s.J.isNode(t.target) && (s.J.isOrContains(this.container, t.target) || this.openedPopup.isOwnClick(t)) || this.__closePopup())
                            }, e.prototype.openPopup = function () {
                                return this.__closePopup(), this.openedPopup = new f.z(this.j, !1), this.j.e.on(this.ow, "mousedown touchstart", this.onOutsideClick).on("escape closeAllPopups", this.onOutsideClick), this.openedPopup
                            }, e.prototype.__closePopup = function () {
                                this.openedPopup && (this.j.e.off(this.ow, "mousedown touchstart", this.onOutsideClick).off("escape closeAllPopups", this.onOutsideClick), this.state.activated = !1, this.openedPopup.close(), this.openedPopup.destruct(), this.openedPopup = null)
                            }, e.prototype.onClick = function (t) {
                                var e, n, o, r, i, s, u, c = this.control;
                                if ((0, a.isFunction)(c.exec)) {
                                    var l = null !== (o = null !== (n = null === (e = this.toolbar) || void 0 === e ? void 0 : e.getTarget(this)) && void 0 !== n ? n : this.target) && void 0 !== o ? o : null,
                                        f = c.exec(this.j, l, {
                                            control: c,
                                            originalEvent: t,
                                            button: this
                                        });
                                    if (!1 !== f && !0 !== f && (null === (i = null === (r = this.j) || void 0 === r ? void 0 : r.e) || void 0 === i || i.fire("synchro"), this.parentElement && this.parentElement.update(), null === (u = null === (s = this.j) || void 0 === s ? void 0 : s.e) || void 0 === u || u.fire("closeAllPopups afterExec")), !1 !== f) return
                                }
                                return c.list ? this.__openControlList(c) : (0, a.isFunction)(c.popup) ? this.onTriggerClick(t) : void((c.command || c.name) && ((0, a.call)((0, a.isJoditObject)(this.j) ? this.j.execCommand.bind(this.j) : this.j.od.execCommand.bind(this.j.od), c.command || c.name, !1, c.args && c.args[0]), this.j.e.fire("closeAllPopups")))
                            }, e.prototype.destruct = function () {
                                return this.__closePopup(), t.prototype.destruct.call(this)
                            }, (0, o.Cg)([i.cacheHTML], e.prototype, "createContainer", null), (0, o.Cg)([(0, i.watch)("state.hasTrigger", {
                                immediately: !1
                            })], e.prototype, "onChangeHasTrigger", null), (0, o.Cg)([(0, i.watch)("trigger:click")], e.prototype, "onTriggerClick", null), (0, o.Cg)([i.autobind], e.prototype, "onOutsideClick", null), (0, o.Cg)([i.autobind], e.prototype, "__closePopup", null), (0, o.Cg)([i.component], e)
                        }(u.lD)
                },
                3392: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        i: function () {
                            return r
                        }
                    });
                    var o = n(55186),
                        r = function (t, e) {
                            return "".concat(o.J.isCell(e) ? "padding" : "margin").concat("rtl" === t ? "Right" : "Left")
                        }
                },
                3593: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        allowAttributes: function () {
                            return o.f
                        },
                        fillEmptyParagraph: function () {
                            return r.f
                        },
                        removeEmptyTextNode: function () {
                            return i.r
                        },
                        removeInvTextNodes: function () {
                            return s.u
                        },
                        replaceOldTags: function () {
                            return a.H
                        },
                        sanitizeAttributes: function () {
                            return u.L
                        },
                        tryRemoveNode: function () {
                            return c.k
                        }
                    });
                    var o = n(5232),
                        r = n(63443),
                        i = n(926),
                        s = n(67431),
                        a = n(81199),
                        u = n(32782),
                        c = n(32014)
                },
                3843: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 16 16"> <path stroke-width="0" d="M16 9v-6h-3v-1c0-0.55-0.45-1-1-1h-11c-0.55 0-1 0.45-1 1v3c0 0.55 0.45 1 1 1h11c0.55 0 1-0.45 1-1v-1h2v4h-9v2h-0.5c-0.276 0-0.5 0.224-0.5 0.5v5c0 0.276 0.224 0.5 0.5 0.5h2c0.276 0 0.5-0.224 0.5-0.5v-5c0-0.276-0.224-0.5-0.5-0.5h-0.5v-1h9zM12 3h-11v-1h11v1z"/> </svg>'
                },
                3947: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        E: function () {
                            return i
                        }
                    });
                    var o = n(12461),
                        r = n(98253);

                    function i(t) {
                        return (0, r.K)(t) && (0, o.k)(t) && (t = parseFloat(t)), "number" == typeof t && Number.isFinite(t) && !(t % 1)
                    }
                },
                4909: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Z: function () {
                            return u
                        }
                    });
                    var o = n(77753),
                        r = n(55186),
                        i = n(69052),
                        s = n(26150),
                        a = n(53048),
                        u = function (t, e, n) {
                            var u = t.c.div("jodit-tabs"),
                                c = t.c.div("jodit-tabs__wrapper"),
                                l = t.c.div("jodit-tabs__buttons");
                            (0, s.C)(l, {
                                role: "tablist",
                                "aria-orientation": "horizontal"
                            });
                            var f = {},
                                d = [],
                                p = "";
                            u.appendChild(l), u.appendChild(c);
                            var h = function (t) {
                                f[t] && (d.forEach((function (t) {
                                    t.state.activated = !1
                                })), Object.values(f).forEach((function (t) {
                                    return t.tab.classList.remove("jodit-tab_active")
                                })), f[t].button.state.activated = !0, f[t].tab.classList.add("jodit-tab_active"))
                            };
                            if (e.forEach((function (u) {
                                    var v = u.icon,
                                        g = u.name,
                                        m = u.content,
                                        y = t.c.div("jodit-tab");
                                    (0, s.C)(y, {
                                        role: "tabpanel"
                                    });
                                    var b = (0, a.$n)(t, v || g, g);
                                    b.state.role = "tab", t.e.on(b.container, "pointerdown", (function (t) {
                                        return t.preventDefault()
                                    })), p || (p = g), l.appendChild(b.container), d.push(b), b.container.classList.add("jodit-tabs__button", "jodit-tabs__button_columns_" + e.length), (0, i.T)(m) ? y.appendChild(t.c.div("jodit-tab_empty")) : y.appendChild(o.uA.isInstanceOf(m, a.D$) ? m.container : m), c.appendChild(y), b.onAction((function () {
                                        return h(g), (0, i.T)(m) && !r.J.isElement(m) && m.call(t), n && (n.activeTab = g), !1
                                    })), f[g] = {
                                        button: b,
                                        tab: y
                                    }
                                })), Object.values(f).forEach((function (t) {
                                    t.button.container.style.width = (100 / e.length).toFixed(10) + "%"
                                })), h(n && n.activeTab && f[n.activeTab] ? n.activeTab : p), n) {
                                var v = n.activeTab;
                                Object.defineProperty(n, "activeTab", {
                                    configurable: !0,
                                    enumerable: !1,
                                    get: function () {
                                        return v
                                    },
                                    set: function (t) {
                                        v = t, h(t)
                                    }
                                })
                            }
                            return u
                        }
                },
                4960: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        G: function () {
                            return r
                        }
                    });
                    var o = n(17352);

                    function r(t) {
                        var e = o.globalDocument.createElement("div");
                        return e.textContent = t, e.innerHTML
                    }
                },
                5232: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        f: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n, r) {
                        if (r && o.J.isElement(e) && !0 !== r[e.nodeName]) {
                            var i = e.attributes;
                            if (i && i.length) {
                                for (var s = [], a = 0; i.length > a; a += 1) {
                                    var u = r[e.nodeName][i[a].name];
                                    (!u || !0 !== u && u !== i[a].value) && s.push(i[a].name)
                                }
                                s.length && (n = !0), s.forEach((function (t) {
                                    e.removeAttribute(t)
                                }))
                            }
                        }
                        return n
                    }
                },
                5298: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        W: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(55186);

                    function i(t, e, n) {
                        for (var i = r.J.findSibling(e, n), s = r.J.findSibling(e, !n); r.J.isElement(i) && !r.J.isTag(i, o.INSEPARABLE_TAGS) && r.J.isContentEditable(i, t.editor) && (!s || !r.J.closest(e, r.J.isElement, t.editor));) n || !i.firstChild ? i.appendChild(e) : r.J.before(i.firstChild, e), i = r.J.sibling(e, n), s = r.J.sibling(e, !n)
                    }
                },
                5454: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        F: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(24767),
                        s = n(69198),
                        a = function (t) {
                            function e(e, r) {
                                var i = t.call(this, e, r) || this;
                                return i.state = (0, o.Cl)({}, n.defaultState), Object.assign(i.state, r), !1 === i.state.resizable && (i.nativeInput.style.resize = "none"), i
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                                return "UITextArea"
                            }, e.prototype.createNativeInput = function (t) {
                                return this.j.create.element("textarea")
                            }, e.prototype.onChangeStateSize = function () {
                                var t = this.state,
                                    e = t.size;
                                this.nativeInput.style.resize = t.resizable ? "auto" : "none", this.nativeInput.rows = null != e ? e : 5
                            }, e.defaultState = (0, o.Cl)((0, o.Cl)({}, s.t.defaultState), {
                                size: 5,
                                resizable: !0
                            }), (0, o.Cg)([(0, r.watch)(["state.size", "state.resizable"])], e.prototype, "onChangeStateSize", null), n = (0, o.Cg)([i.s], e)
                        }(s.t)
                },
                5533: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        p: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(65147),
                        s = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.className = "jodit_ace_editor", e.proxyOnBlur = function (t) {
                                    e.j.e.fire("blur", t)
                                }, e.proxyOnFocus = function (t) {
                                    e.j.e.fire("focus", t)
                                }, e.proxyOnMouseDown = function (t) {
                                    e.j.e.fire("mousedown", t)
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.aceExists = function () {
                                return void 0 !== this.j.ow.ace
                            }, e.prototype.getLastColumnIndex = function (t) {
                                return this.instance.session.getLine(t).length
                            }, e.prototype.getLastColumnIndices = function () {
                                for (var t = this.instance.session.getLength(), e = [], n = 0, o = 0; t > o; o++) n += this.getLastColumnIndex(o), o > 0 && (n += 1), e[o] = n;
                                return e
                            }, e.prototype.getRowColumnIndices = function (t) {
                                var e = this.getLastColumnIndices();
                                if (e[0] >= t) return {
                                    row: 0,
                                    column: t
                                };
                                for (var n = 1, o = 1; e.length > o; o++) t > e[o] && (n = o + 1);
                                return {
                                    row: n,
                                    column: t - e[n - 1] - 1
                                }
                            }, e.prototype.setSelectionRangeIndices = function (t, e) {
                                var n = this.getRowColumnIndices(t),
                                    o = this.getRowColumnIndices(e);
                                this.instance.getSelection().setSelectionRange({
                                    start: n,
                                    end: o
                                })
                            }, e.prototype.getIndexByRowColumn = function (t, e) {
                                return this.getLastColumnIndices()[t] - this.getLastColumnIndex(t) + e
                            }, e.prototype.init = function (t) {
                                var e = this,
                                    n = function () {
                                        if (void 0 === e.instance && e.aceExists()) {
                                            var n = e.j.c.div("jodit-source__mirror-fake");
                                            e.container.appendChild(n), e.instance = t.ow.ace.edit(n), "rtl" === t.o.direction && (e.instance.setOption("rtlText", !0), e.instance.setOption("rtl", !0)), e.instance.setTheme(t.o.sourceEditorNativeOptions.theme), e.instance.renderer.setShowGutter(t.o.sourceEditorNativeOptions.showGutter), e.instance.getSession().setMode(t.o.sourceEditorNativeOptions.mode), e.instance.setHighlightActiveLine(t.o.sourceEditorNativeOptions.highlightActiveLine), e.instance.getSession().setUseWrapMode(!0), e.instance.setOption("indentedSoftWrap", !1), e.instance.setOption("wrap", t.o.sourceEditorNativeOptions.wrap), e.instance.getSession().setUseWorker(!1), e.instance.$blockScrolling = 1 / 0, e.instance.on("change", e.toWYSIWYG), e.instance.on("focus", e.proxyOnFocus), e.instance.on("mousedown", e.proxyOnMouseDown), e.instance.on("blur", e.proxyOnBlur), t.getRealMode() !== r.MODE_WYSIWYG && e.setValue(e.getValue());
                                            var o = e.j.async.throttle((function () {
                                                if (!t.isInDestruct && t.getMode() !== r.MODE_WYSIWYG) {
                                                    var n = e.instance.isFocused();
                                                    e.instance.setOption("maxLines", "auto" !== t.o.height ? t.workplace.offsetHeight / e.instance.renderer.lineHeight : 1 / 0), e.instance.resize(), n && e.focus()
                                                }
                                            }), 2 * e.j.defaultTimeout);
                                            t.e.on(t, "resize", o).on("afterResize afterSetMode", o), o(), e.onReady()
                                        }
                                    };
                                t.e.on("afterSetMode", (function () {
                                    t.getRealMode() !== r.MODE_SOURCE && t.getMode() !== r.MODE_SPLIT || (e.fromWYSIWYG(), n())
                                })), n(), this.aceExists() || (0, i.loadNext)(t, t.o.sourceEditorCDNUrlsJS).then((function () {
                                    t.isInDestruct || n()
                                })).catch((function () {
                                    return null
                                }))
                            }, e.prototype.destruct = function () {
                                var t, e;
                                this.instance.off("change", this.toWYSIWYG), this.instance.off("focus", this.proxyOnFocus), this.instance.off("mousedown", this.proxyOnMouseDown), this.instance.destroy(), null === (e = null === (t = this.j) || void 0 === t ? void 0 : t.events) || void 0 === e || e.off("aceInited.source")
                            }, e.prototype.setValue = function (t) {
                                if (!this.j.o.editHTMLDocumentMode && this.j.o.beautifyHTML) {
                                    var e = this.j.e.fire("beautifyHTML", t);
                                    (0, i.isString)(e) && (t = e)
                                }
                                this.instance.setValue(t), this.instance.clearSelection()
                            }, e.prototype.getValue = function () {
                                return this.instance.getValue()
                            }, e.prototype.setReadOnly = function (t) {
                                this.instance.setReadOnly(t)
                            }, Object.defineProperty(e.prototype, "isFocused", {
                                get: function () {
                                    return this.instance.isFocused()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.focus = function () {
                                this.instance.container.focus(), this.instance.focus()
                            }, e.prototype.blur = function () {
                                this.instance.blur()
                            }, e.prototype.getSelectionStart = function () {
                                var t = this.instance.selection.getRange();
                                return this.getIndexByRowColumn(t.start.row, t.start.column)
                            }, e.prototype.getSelectionEnd = function () {
                                var t = this.instance.selection.getRange();
                                return this.getIndexByRowColumn(t.end.row, t.end.column)
                            }, e.prototype.selectAll = function () {
                                this.instance.selection.selectAll()
                            }, e.prototype.insertRaw = function (t) {
                                var e = this.instance.selection.getCursor(),
                                    n = this.instance.session.insert(e, t);
                                this.instance.selection.setRange({
                                    start: e,
                                    end: n
                                }, !1)
                            }, e.prototype.setSelectionRange = function (t, e) {
                                this.setSelectionRangeIndices(t, e)
                            }, e.prototype.setPlaceHolder = function (t) {}, e.prototype.replaceUndoManager = function () {
                                var t = this.jodit.history;
                                this.instance.commands.addCommand({
                                    name: "Undo",
                                    bindKey: {
                                        win: "Ctrl-Z",
                                        mac: "Command-Z"
                                    },
                                    exec: function () {
                                        t.undo()
                                    }
                                }), this.instance.commands.addCommand({
                                    name: "Redo",
                                    bindKey: {
                                        win: "Ctrl-Shift-Z",
                                        mac: "Command-Shift-Z"
                                    },
                                    exec: function () {
                                        t.redo()
                                    }
                                })
                            }, e
                        }(n(53380).F)
                },
                5549: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        U: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(26150),
                        i = n(74260),
                        s = n(33201),
                        a = n(85079),
                        u = n(17880);

                    function c(t, e) {
                        return (0, o.sH)(this, void 0, Promise, (function () {
                            var n, c;
                            return (0, o.YH)(this, (function (o) {
                                return (0, i.g)(n = e.sourceImage, c = e.values), c.borderRadius = parseInt(n.style.borderRadius || "0", 10) || 0, c.id = (0, r.C)(n, "id") || "", c.imageTitle = (0, r.C)(n, "title") || "", c.imageAlt = (0, r.C)(n, "alt") || "", c.style = (0, r.C)(n, "style") || "", c.classes = ((0, r.C)(n, "class") || "").replace(/jodit_focused_image[\s]*/, ""), (0, a.E)(n, c, e), (0, s.X)(e, t, c), c.imageSrc = (0, r.C)(n, "src") || "", [2, (0, u.P)(n, c, e)]
                            }))
                        }))
                    }
                },
                5832: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        IB: function () {
                            return o.I
                        },
                        P1: function () {
                            return r.P
                        },
                        q4: function () {
                            return i.q
                        }
                    });
                    var o = n(3258),
                        r = n(49405),
                        i = n(48053)
                },
                5854: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        F: function () {
                            return u
                        }
                    });
                    var o = n(55186),
                        r = n(82317),
                        i = n(69052),
                        s = n(92032),
                        a = n(58006);

                    function u(t, e, n, u) {
                        void 0 === u && (u = "jodit-dialog_alert"), (0, i.T)(e) && (n = e, e = void 0);
                        var c = this instanceof a.l ? this : new a.l({
                                closeOnClickOverlay: !0
                            }),
                            l = c.c.div(u),
                            f = (0, s.$n)(c, "ok", "Ok");
                        return (0, r._)(t).forEach((function (t) {
                            l.appendChild(o.J.isNode(t) ? t : c.c.fromHTML(t))
                        })), f.onAction((function () {
                            n && (0, i.T)(n) && !1 === n(c) || c.close()
                        })), c.setFooter([f]), c.open(l, e || "&nbsp;", !0, !0), f.focus(), c
                    }
                },
                5929: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(71842),
                        i = n(56298),
                        s = n(65147),
                        a = n(59101),
                        u = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.e.on("afterCommand.delete", (function (t) {
                                    "delete" === t && e.__afterDeleteCommand()
                                })), t.registerCommand("delete", {
                                    exec: this.__onDeleteCommand.bind(this)
                                }, {
                                    stopPropagation: !1
                                })
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off("afterCommand.delete")
                            }, e.prototype.__afterDeleteCommand = function () {
                                var t = this.j,
                                    e = t.s.current();
                                if (e && r.J.isTag(e.firstChild, "br") && t.s.removeNode(e.firstChild), !((0, a.Bq)(t.editor.textContent || "") || t.editor.querySelector("img,table,jodit,iframe,hr") || e && r.J.closest(e, "table", t.editor))) {
                                    t.editor.innerHTML = "";
                                    var n = t.s.setCursorIn(t.editor);
                                    t.s.removeNode(n)
                                }
                            }, e.prototype.__onDeleteCommand = function () {
                                var t = this.jodit;
                                if (!t.s.isCollapsed()) {
                                    t.s.expandSelection();
                                    var e = t.s.range;
                                    e.deleteContents();
                                    var n = t.createInside.fake();
                                    e.insertNode(n);
                                    var o = r.J.findSibling(n, !0),
                                        i = r.J.findSibling(n, !1);
                                    return this.__moveContentInLeftSibling(n, o, i), e.setStartBefore(n), e.collapse(!0), this.__moveCursorInEditableSibling(t, o, n, e), this.__addBrInEmptyBlock(n, i, e), r.J.safeRemove(n), t.s.selectRange(e), !1
                                }
                            }, e.prototype.__moveContentInLeftSibling = function (t, e, n) {
                                e = this.__defineRightLeftBox(e), !r.J.isList(n) && !r.J.isTag(n, "table") && r.J.isBlock(n) && r.J.isBlock(e) && (r.J.append(e, t), r.J.moveContent(n, e), r.J.safeRemove(n)), r.J.isList(n) && r.J.isLeaf(n.firstElementChild) && r.J.isEmpty(n.firstElementChild) && r.J.safeRemove(n.firstElementChild)
                            }, e.prototype.__defineRightLeftBox = function (t) {
                                if (!r.J.isList(t)) return t;
                                var e = t.lastElementChild;
                                return r.J.isLeaf(e) || (e = this.j.createInside.element("li"), r.J.append(t, e)), e
                            }, e.prototype.__addBrInEmptyBlock = function (t, e, n) {
                                var o = this.j;
                                if (t.isConnected && r.J.isBlock(t.parentNode) && !t.nextSibling && !t.previousSibling) {
                                    var i = o.createInside.element("br");
                                    r.J.after(t, i), n.setStartBefore(i), n.collapse(!0)
                                }
                                if (r.J.isTag(e, "table")) {
                                    var a = (0, s.$$)("td,th", e).shift();
                                    r.J.isCell(a) && r.J.isEmpty(a) && r.J.append(a, o.createInside.element("br"))
                                }
                            }, e.prototype.__moveCursorInEditableSibling = function (t, e, n, o) {
                                var i;
                                if (!e || !r.J.isText(e)) {
                                    var s = null !== (i = r.J.closest(n, r.J.isBlock, t.editor)) && void 0 !== i ? i : t.editor,
                                        a = r.J.prev(n, r.J.isText, s);
                                    a && (o.setStartAfter(a), o.collapse(!0), r.J.safeRemove(n))
                                }
                            }, e.requires = ["backspace"], e
                        }(n(71005).k);
                    i.fg.add("deleteCommand", u)
                },
                6110: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        l: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(641);

                    function s(t, e, n) {
                        var s = Boolean(r.J.closest(t, ["pre", "blockquote"], e.editor)),
                            u = !s && r.J.closest(t, ["td", "th"], e.editor);
                        if (e.o.enter.toLowerCase() === o.BR.toLowerCase() || u || n && !s || !n && s) {
                            if (s && function (t) {
                                    var e = a(a(t));
                                    return !!e && (r.J.safeRemove(a(t)), r.J.safeRemove(e), !0)
                                }(t)) return !1;
                            var c = e.createInside.element("br");
                            if (r.J.before(t, c), !r.J.findNotEmptySibling(c, !1)) {
                                var l = c.cloneNode();
                                r.J.after(c, l), r.J.before(l, t)
                            }
                            return (0, i.$)(c, e.editor, e.ed), !0
                        }
                        return !1
                    }

                    function a(t) {
                        if (!t) return !1;
                        var e = r.J.findSibling(t, !0);
                        return !(!e || !r.J.isTag(e, "br")) && e
                    }
                },
                6455: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        U: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(37474),
                        i = n(22664),
                        s = n(55186),
                        a = n(65147),
                        u = (n(28712), function (t) {
                            function e(e, n, o) {
                                var r = t.call(this, e, o) || this;
                                return r.options = o, r.syncMod = !1, r.elements = [], r.buttonSize = "middle", null == n || n.forEach((function (t) {
                                    return t && r.append(t)
                                })), (null == o ? void 0 : o.name) && (r.name = o.name), r
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                                return "UIGroup"
                            }, Object.defineProperty(e.prototype, "allChildren", {
                                get: function () {
                                    for (var t = [], e = (0, o.fX)([], (0, o.zs)(this.elements), !1); e.length;) {
                                        var i = e.shift();
                                        (0, a.isArray)(i) ? e.push.apply(e, (0, o.fX)([], (0, o.zs)(i), !1)): r.u.isInstanceOf(i, n) ? e.push.apply(e, (0, o.fX)([], (0, o.zs)(i.elements), !1)) : i && t.push(i)
                                    }
                                    return t
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.update = function () {
                                this.elements.forEach((function (t) {
                                    return t.update()
                                })), this.setMod("size", this.buttonSize)
                            }, e.prototype.append = function (t, e) {
                                var n = this;
                                return (0, a.isArray)(t) ? (t.forEach((function (t) {
                                    return n.append(t, e)
                                })), this) : (this.elements.push(t), t.name && t.container.classList.add(this.getFullElName(t.name)), e ? this.getElm(e).appendChild(t.container) : this.appendChildToContainer(t.container), t.parentElement = this, this)
                            }, e.prototype.afterSetMod = function (t, e) {
                                this.syncMod && this.elements.forEach((function (n) {
                                    return n.setMod(t, e)
                                }))
                            }, e.prototype.appendChildToContainer = function (t) {
                                this.container.appendChild(t)
                            }, e.prototype.remove = function (t) {
                                var e = this.elements.indexOf(t);
                                return -1 !== e && (this.elements.splice(e, 1), s.J.safeRemove(t.container), t.parentElement = null), this
                            }, e.prototype.clear = function () {
                                return this.elements.forEach((function (t) {
                                    return t.destruct()
                                })), this.elements.length = 0, this
                            }, e.prototype.destruct = function () {
                                return this.clear(), t.prototype.destruct.call(this)
                            }, (0, o.Cg)([(0, i.watch)("buttonSize")], e.prototype, "update", null), n = (0, o.Cg)([i.component], e)
                        }(n(29780).D))
                },
                6589: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        As: function () {
                            return a.A
                        },
                        Bq: function () {
                            return u.Bq
                        },
                        Gd: function () {
                            return u.Gd
                        },
                        Hp: function () {
                            return r.H
                        },
                        N: function () {
                            return s.N
                        },
                        Ru: function () {
                            return i.R
                        },
                        Z2: function () {
                            return c.Z
                        },
                        gj: function () {
                            return u.gj
                        },
                        kW: function () {
                            return s.k
                        },
                        nv: function () {
                            return i.n
                        },
                        xQ: function () {
                            return o.x
                        }
                    });
                    var o = n(83260),
                        r = n(67975),
                        i = n(91093),
                        s = n(449),
                        a = n(28616),
                        u = n(59101),
                        c = n(10467)
                },
                6857: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = n(29866),
                        l = (n(69505), "__jodit-resizer_binded"),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.LOCK_KEY = "resizer", e.element = null, e.isResizeMode = !1, e.isShown = !1, e.startX = 0, e.startY = 0, e.width = 0, e.height = 0, e.ratio = 0, e.rect = e.j.c.fromHTML('<div title="'.concat(e.j.i18n("Press Alt for custom resizing"), '" class="jodit-resizer">\n\t\t\t\t<div class="jodit-resizer__top-left"></div>\n\t\t\t\t<div class="jodit-resizer__top-right"></div>\n\t\t\t\t<div class="jodit-resizer__bottom-right"></div>\n\t\t\t\t<div class="jodit-resizer__bottom-left"></div>\n\t\t\t\t<span>100x100</span>\n\t\t\t</div>')), e.sizeViewer = e.rect.getElementsByTagName("span")[0], e.pointerX = 0, e.pointerY = 0, e.isAltMode = !1, e.onClickElement = function (t) {
                                    e.isResizeMode || e.element === t && e.isShown || (e.element = t, e.show(), s.J.isTag(e.element, "img") && !e.element.complete && e.j.e.one(e.element, "load", e.updateSize))
                                }, e.updateSize = function () {
                                    if (!e.isInDestruct && e.isShown && e.element && e.rect) {
                                        var t = e.getWorkplacePosition(),
                                            n = (0, u.offset)(e.element, e.j, e.j.ed),
                                            o = parseInt(e.rect.style.left || "0", 10),
                                            r = parseInt(e.rect.style.top || "0", 10),
                                            i = n.top - t.top,
                                            s = n.left - t.left;
                                        r === i && o === s && e.rect.offsetWidth === e.element.offsetWidth && e.rect.offsetHeight === e.element.offsetHeight || ((0, u.css)(e.rect, {
                                            top: i,
                                            left: s,
                                            width: e.element.offsetWidth,
                                            height: e.element.offsetHeight
                                        }), e.j.events && (e.j.e.fire(e.element, "changesize"), isNaN(o) || e.j.e.fire("resize")))
                                    }
                                }, e.hideSizeViewer = function () {
                                    e.sizeViewer.style.opacity = "0"
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                (0, u.$$)("div", this.rect).forEach((function (n) {
                                    t.e.on(n, "mousedown.resizer touchstart.resizer", e.onStartResizing.bind(e, n))
                                })), a.RR.on("hideHelpers", this.hide), t.e.on("readonly", (function (t) {
                                    t && e.hide()
                                })).on("afterInit changePlace", this.addEventListeners.bind(this)).on("afterGetValueFromEditor.resizer", (function (t) {
                                    var e = /<jodit[^>]+data-jodit_iframe_wrapper[^>]+>(.*?<iframe[^>]*>.*?<\/iframe>.*?)<\/jodit>/gi;
                                    e.test(t.value) && (t.value = t.value.replace(e, "$1"))
                                })), this.addEventListeners(), this.__onChangeEditor()
                            }, e.prototype.onEditorClick = function (t) {
                                for (var e = t.target, n = this.j, o = n.editor, r = n.options.allowResizeTags; e && e !== o;) {
                                    if (s.J.isTag(e, r)) return this.__bind(e), void this.onClickElement(e);
                                    e = e.parentNode
                                }
                            }, e.prototype.__afterInsertImage = function (t) {
                                if (!this.j.o.resizer.forImageChangeAttributes) {
                                    var e = (0, u.attr)(t, "width");
                                    e && !(0, u.css)(t, "width", !0) && ((0, u.css)(t, "width", e), (0, u.attr)(t, "width", null))
                                }
                            }, e.prototype.addEventListeners = function () {
                                var t = this,
                                    e = this.j;
                                e.e.off(e.editor, ".resizer").off(e.ow, ".resizer").on(e.editor, "keydown.resizer", (function (e) {
                                    t.isShown && e.key === r.KEY_DELETE && t.element && !s.J.isTag(t.element, "table") && t.onDelete(e)
                                })).on(e.ow, "resize.resizer", this.updateSize).on("resize.resizer", this.updateSize).on([e.ow, e.editor], "scroll.resizer", (function () {
                                    t.isShown && !t.isResizeMode && t.hide()
                                })).on(e.ow, "keydown.resizer", this.onKeyDown).on(e.ow, "keyup.resizer", this.onKeyUp).on(e.ow, "mouseup.resizer touchend.resizer", this.onClickOutside)
                            }, e.prototype.onStartResizing = function (t, e) {
                                if (!this.element || !this.element.parentNode) return this.hide(), !1;
                                this.handle = t, e.cancelable && e.preventDefault(), e.stopImmediatePropagation(), this.width = this.element.offsetWidth, this.height = this.element.offsetHeight, this.ratio = this.width / this.height, this.isResizeMode = !0, this.startX = e.clientX, this.startY = e.clientY, this.pointerX = e.clientX, this.pointerY = e.clientY;
                                var n = this.j;
                                n.e.fire("hidePopup"), n.lock(this.LOCK_KEY), n.e.on(n.ow, "mousemove.resizer touchmove.resizer", this.onResize)
                            }, e.prototype.onEndResizing = function () {
                                var t = this.j;
                                t.unlock(), this.isResizeMode = !1, this.isAltMode = !1, t.synchronizeValues(), t.e.off(t.ow, "mousemove.resizer touchmove.resizer", this.onResize)
                            }, e.prototype.onResize = function (t) {
                                if (this.isResizeMode) {
                                    if (!this.element) return;
                                    this.pointerX = t.clientX, this.pointerY = t.clientY;
                                    var e = void 0,
                                        n = void 0;
                                    if (this.j.options.iframe) {
                                        var o = this.getWorkplacePosition();
                                        e = t.clientX + o.left - this.startX, n = t.clientY + o.top - this.startY
                                    } else e = this.pointerX - this.startX, n = this.pointerY - this.startY;
                                    var r = this.handle.className,
                                        i = 0,
                                        a = 0,
                                        c = this.j.o.resizer.useAspectRatio;
                                    !this.isAltMode && (!0 === c || c && s.J.isTag(this.element, c)) ? (e ? (i = this.width + (r.match(/left/) ? -1 : 1) * e, a = Math.round(i / this.ratio)) : (a = this.height + (r.match(/top/) ? -1 : 1) * n, i = Math.round(a * this.ratio)), i > (0, u.innerWidth)(this.j.editor, this.j.ow) && (i = (0, u.innerWidth)(this.j.editor, this.j.ow), a = Math.round(i / this.ratio))) : (i = this.width + (r.match(/left/) ? -1 : 1) * e, a = this.height + (r.match(/top/) ? -1 : 1) * n), i > this.j.o.resizer.min_width && this.applySize(this.element, "width", this.rect.parentNode.offsetWidth > i ? i : "100%"), a > this.j.o.resizer.min_height && this.applySize(this.element, "height", a), this.updateSize(), this.showSizeViewer(this.element.offsetWidth, this.element.offsetHeight), t.stopImmediatePropagation()
                                }
                            }, e.prototype.onKeyDown = function (t) {
                                this.isAltMode = t.key === r.KEY_ALT, !this.isAltMode && this.isResizeMode && this.onEndResizing()
                            }, e.prototype.onKeyUp = function () {
                                this.isAltMode && this.isResizeMode && this.element && (this.width = this.element.offsetWidth, this.height = this.element.offsetHeight, this.ratio = this.width / this.height, this.startX = this.pointerX, this.startY = this.pointerY), this.isAltMode = !1
                            }, e.prototype.onClickOutside = function (t) {
                                if (this.isShown) {
                                    if (!this.isResizeMode) return this.hide();
                                    t.stopImmediatePropagation(), this.onEndResizing()
                                }
                            }, e.prototype.getWorkplacePosition = function () {
                                return (0, u.offset)(this.rect.parentNode || this.j.od.documentElement, this.j, this.j.od, !0)
                            }, e.prototype.applySize = function (t, e, n) {
                                var o = s.J.isImage(t) && this.j.o.resizer.forImageChangeAttributes;
                                o && (0, u.attr)(t, e, n), o && !t.style[e] || (0, u.css)(t, e, n)
                            }, e.prototype.onDelete = function (t) {
                                this.element && ("JODIT" !== this.element.tagName ? this.j.s.select(this.element) : (s.J.safeRemove(this.element), this.hide(), t.preventDefault()))
                            }, e.prototype.__onChangeEditor = function () {
                                this.isShown && (this.element && this.element.parentNode ? this.updateSize() : this.hide()), (0, u.$$)("iframe", this.j.editor).forEach(this.__bind)
                            }, e.prototype.__bind = function (t) {
                                var e = this;
                                if (s.J.isHTMLElement(t) && this.j.o.allowResizeTags.has(t.tagName.toLowerCase()) && !(0, u.dataBind)(t, l)) {
                                    var n;
                                    if ((0, u.dataBind)(t, l, !0), s.J.isTag(t, "iframe")) {
                                        var o = t;
                                        s.J.isHTMLElement(t.parentNode) && (0, u.attr)(t.parentNode, "-jodit_iframe_wrapper") ? t = t.parentNode : (n = this.j.createInside.element("jodit", {
                                            "data-jodit-temp": 1,
                                            contenteditable: !1,
                                            draggable: !0,
                                            "data-jodit_iframe_wrapper": 1
                                        }), (0, u.attr)(n, "style", (0, u.attr)(t, "style")), (0, u.css)(n, {
                                            display: "inline-block" === t.style.display ? "inline-block" : "block",
                                            width: t.offsetWidth,
                                            height: t.offsetHeight
                                        }), t.parentNode && t.parentNode.insertBefore(n, t), n.appendChild(t), this.j.e.on(n, "click", (function () {
                                            (0, u.attr)(n, "data-jodit-wrapper_active", !0)
                                        })), t = n), this.j.e.off(t, "mousedown.select touchstart.select").on(t, "mousedown.select touchstart.select", (function () {
                                            e.j.s.select(t)
                                        })).off(t, "changesize").on(t, "changesize", (function () {
                                            o.setAttribute("width", t.offsetWidth + "px"), o.setAttribute("height", t.offsetHeight + "px")
                                        }))
                                    }
                                    this.j.e.on(t, "dragstart", this.hide), !r.IS_ES_NEXT && r.IS_IE && this.j.e.on(t, "mousedown", (function (e) {
                                        s.J.isTag(t, "img") && e.preventDefault()
                                    }))
                                }
                            }, e.prototype.showSizeViewer = function (t, e) {
                                this.j.o.resizer.showSize && (this.sizeViewer.offsetWidth > t || this.sizeViewer.offsetHeight > e ? this.hideSizeViewer() : (this.sizeViewer.style.opacity = "1", this.sizeViewer.textContent = "".concat(t, " x ").concat(e), this.j.async.setTimeout(this.hideSizeViewer, {
                                    timeout: this.j.o.resizer.hideSizeTimeout,
                                    label: "hideSizeViewer"
                                })))
                            }, e.prototype.show = function () {
                                this.j.o.readonly || this.isShown || (this.isShown = !0, this.rect.parentNode || ((0, u.markOwner)(this.j, this.rect), this.j.workplace.appendChild(this.rect)), this.j.isFullSize && (this.rect.style.zIndex = (0, u.css)(this.j.container, "zIndex").toString()), this.updateSize())
                            }, e.prototype.hide = function () {
                                this.isResizeMode || (this.isResizeMode = !1, this.isShown = !1, this.element = null, s.J.safeRemove(this.rect), (0, u.$$)("[data-jodit-wrapper_active='true']", this.j.editor).forEach((function (t) {
                                    return (0, u.attr)(t, "data-jodit-wrapper_active", !1)
                                })))
                            }, e.prototype.beforeDestruct = function (t) {
                                this.hide(), a.RR.off("hideHelpers", this.hide), t.e.off(this.j.ow, ".resizer").off(".resizer")
                            }, (0, o.Cg)([(0, i.watch)(":click")], e.prototype, "onEditorClick", null), (0, o.Cg)([(0, i.watch)(":afterInsertImage")], e.prototype, "__afterInsertImage", null), (0, o.Cg)([i.autobind], e.prototype, "onStartResizing", null), (0, o.Cg)([i.autobind], e.prototype, "onEndResizing", null), (0, o.Cg)([i.autobind], e.prototype, "onResize", null), (0, o.Cg)([i.autobind], e.prototype, "onKeyDown", null), (0, o.Cg)([i.autobind], e.prototype, "onKeyUp", null), (0, o.Cg)([i.autobind], e.prototype, "onClickOutside", null), (0, o.Cg)([(0, i.watch)(":change")], e.prototype, "__onChangeEditor", null), (0, o.Cg)([i.autobind], e.prototype, "__bind", null), (0, o.Cg)([i.autobind, (0, i.watch)(":hideResizer")], e.prototype, "hide", null), e
                        }(c.k);
                    a.fg.add("resizer", f)
                },
                6939: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        m: function () {
                            return r
                        }
                    });
                    var o = n(17352);

                    function r(t) {
                        if (t.includes(" ")) return !1;
                        if ("undefined" != typeof URL) try {
                            var e = new URL(t);
                            return ["https:", "http:", "ftp:", "file:", "rtmp:"].includes(e.protocol)
                        } catch (t) {
                            return !1
                        }
                        var n = o.globalDocument.createElement("a");
                        return n.href = t, Boolean(n.hostname)
                    }
                },
                7920: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        r: function () {
                            return o
                        }
                    });
                    var o = function (t, e) {
                        return /^[0-9]+$/.test(t.toString()) ? t + e : t.toString()
                    }
                },
                7982: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        v: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = function (t) {
                            function e(e) {
                                var n = t.call(this) || this;
                                return n.setParentView(e), n
                            }
                            return (0, o.C6)(e, t), Object.defineProperty(e.prototype, "j", {
                                get: function () {
                                    return this.jodit
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "defaultTimeout", {
                                get: function () {
                                    return this.j.defaultTimeout
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.i18n = function (t) {
                                for (var e, n = [], r = 1; arguments.length > r; r++) n[r - 1] = arguments[r];
                                return (e = this.j).i18n.apply(e, (0, o.fX)([t], (0, o.zs)(n), !1))
                            }, e.prototype.setParentView = function (t) {
                                return this.jodit = t, t.components.add(this), this
                            }, e.prototype.destruct = function () {
                                return this.j.components.delete(this), t.prototype.destruct.call(this)
                            }, e
                        }(n(37474).u)
                },
                8136: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"/> </svg>'
                },
                8453: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        p: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(55186),
                        s = function (t) {
                            function e(e, n) {
                                void 0 === n && (n = {});
                                var o = t.call(this) || this;
                                return o.async = e, o.options = n, o.workNodes = null, o.hadAffect = !1, o.isWorked = !1, o.isFinished = !1, o.idleId = 0, o.__schedulerController = null, o
                            }
                            return (0, o.C6)(e, t), e.prototype.setWork = function (t) {
                                return this.isWorked && this.break(), this.workNodes = i.J.eachGen(t, !this.options.reverse), this.isFinished = !1, this._requestStarting(), this
                            }, e.prototype._requestStarting = function () {
                                this.__schedulerController = new AbortController, this.async.schedulerPostTask(this.__workPerform, {
                                    delay: this.options.timeout,
                                    signal: this.__schedulerController.signal
                                }).catch((function () {
                                    return null
                                }))
                            }, e.prototype.break = function (t) {
                                this.isWorked && (this.stop(), this.emit("break", t))
                            }, e.prototype.end = function () {
                                this.isWorked && (this.stop(), this.emit("end", this.hadAffect), this.hadAffect = !1)
                            }, e.prototype.stop = function () {
                                this.isWorked = !1, this.isFinished = !0, this.workNodes = null, this.async.cancelIdleCallback(this.idleId)
                            }, e.prototype.destruct = function () {
                                t.prototype.destruct.call(this), this.stop()
                            }, e.prototype.__workPerform = function () {
                                var t;
                                if (this.workNodes) {
                                    this.isWorked = !0;
                                    for (var e = 0, n = null !== (t = this.options.timeoutChunkSize) && void 0 !== t ? t : 50; !this.isFinished && n >= e;) {
                                        var o = this.workNodes.next();
                                        if (e += 1, this.visitNode(o.value) && (this.hadAffect = !0), o.done) return void this.end()
                                    }
                                } else this.end();
                                this.isFinished || this._requestStarting()
                            }, e.prototype.visitNode = function (t) {
                                var e;
                                return !(!t || void 0 !== this.options.whatToShow && t.nodeType !== this.options.whatToShow) && null !== (e = this.emit("visit", t)) && void 0 !== e && e
                            }, (0, o.Cg)([r.autobind], e.prototype, "__workPerform", null), e
                        }(n(43431).h)
                },
                8757: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        x: function () {
                            return a
                        }
                    });
                    var o = n(17352),
                        r = n(83260),
                        i = n(12043),
                        s = n(10494),
                        a = function () {
                            function t(t) {
                                this.options = t, this.__applyMap = new WeakMap
                            }
                            return t.prototype.isApplied = function (t, e) {
                                var n = this.__applyMap.get(t);
                                return !!n && n[e]
                            }, t.prototype.setApplied = function (t, e) {
                                var n, o = null !== (n = this.__applyMap.get(t)) && void 0 !== n ? n : {};
                                o[e] = !0, this.__applyMap.set(t, o)
                            }, Object.defineProperty(t.prototype, "elementIsList", {
                                get: function () {
                                    return Boolean(this.options.element && o.LIST_TAGS.has(this.options.element))
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "element", {
                                get: function () {
                                    return this.options.element || this.defaultTag
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "elementIsBlock", {
                                get: function () {
                                    return Boolean(this.options.element && o.IS_BLOCK.test(this.options.element))
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "isElementCommit", {
                                get: function () {
                                    return Boolean(this.options.element && this.options.element !== this.options.defaultTag)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "defaultTag", {
                                get: function () {
                                    return this.options.defaultTag ? this.options.defaultTag : this.elementIsBlock ? "p" : "span"
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "elementIsDefault", {
                                get: function () {
                                    return this.element === this.defaultTag
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.apply = function (t) {
                                var e = this.options.hooks,
                                    n = e ? Object.keys(e) : [];
                                try {
                                    n.forEach((function (n) {
                                        t.e.on((0, r.x)(i.ar + "_" + n), e[n])
                                    })), (0, s.O)(t, this)
                                } finally {
                                    n.forEach((function (n) {
                                        t.e.off((0, r.x)(i.ar + "_" + n), e[n])
                                    })), this.__applyMap = new WeakMap
                                }
                                t.synchronizeValues(), t.e.fire("afterCommitStyle", this)
                            }, t
                        }()
                },
                8809: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $K: function () {
                            return c
                        },
                        BJ: function () {
                            return l
                        },
                        RR: function () {
                            return f
                        }
                    });
                    var o = n(65147),
                        r = n(3258),
                        i = n(49405),
                        s = n(48053),
                        a = n(97394),
                        u = n(90428);

                    function c(t, e) {
                        var n = (0, o.isJoditObject)(t) ? new u.b(t) : new a.Q(t);
                        return t.o.textIcons && n.container.classList.add("jodit_text_icons"), e && (n.parentElement = e), t.o.toolbarButtonSize && (n.buttonSize = t.o.toolbarButtonSize), n
                    }

                    function l(t, e, n) {
                        if (void 0 === n && (n = null), (0, o.isFunction)(e.getContent)) return new i.P(t, e, n);
                        var s = new r.I(t, e, n);
                        return s.state.tabIndex = t.o.allowTabNavigation ? 0 : -1, s
                    }

                    function f(t, e, n) {
                        return void 0 === n && (n = null), new s.q(t, e, n)
                    }
                },
                9103: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M553 1399l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23t-10 23l-393 393 393 393q10 10 10 23t-10 23zm591-1067l-373 1291q-4 13-15.5 19.5t-23.5 2.5l-62-17q-13-4-19.5-15.5t-2.5-24.5l373-1291q4-13 15.5-19.5t23.5-2.5l62 17q13 4 19.5 15.5t2.5 24.5zm657 651l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23t-10 23z"/> </svg>'
                },
                9117: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(56298),
                        a = n(71005),
                        u = (n(87238), function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this,
                                    n = t.o;
                                if (t && (n.limitWords || n.limitChars)) {
                                    var o = null;
                                    t.e.off(".limit").on("beforePaste.limit", (function () {
                                        o = t.history.snapshot.make()
                                    })).on("keydown.limit keyup.limit beforeEnter.limit", this.checkPreventKeyPressOrPaste).on("change.limit", this.checkPreventChanging).on("afterPaste.limit", (function () {
                                        if (e.__shouldDenyInput(!0) && o) return t.history.snapshot.restore(o), t.e.fire("denyPaste.limit"), !1
                                    }))
                                }
                            }, e.prototype.shouldPreventInsertHTML = function (t) {
                                return (!t || !(r.COMMAND_KEYS.includes(t.key) || t.ctrlKey || t.metaKey)) && this.__shouldDenyInput(!1)
                            }, e.prototype.__shouldDenyInput = function (t) {
                                var e = this.jodit,
                                    n = e.o,
                                    o = n.limitWords,
                                    r = n.limitChars,
                                    i = this.__splitWords(e.o.limitHTML ? e.value : e.text);
                                if (o && c(i.length, o, t)) return e.e.fire("denyWords.limit limit.limit"), !0;
                                var s = Boolean(r && c(i.join("").length, r, t));
                                return s && e.e.fire("denyChars.limit limit.limit"), s
                            }, e.prototype.checkPreventKeyPressOrPaste = function (t) {
                                if (this.shouldPreventInsertHTML(t)) return !1
                            }, e.prototype.checkPreventChanging = function (t, e) {
                                var n = this.jodit;
                                this.__shouldDenyInput(!0) && (n.value = e)
                            }, e.prototype.__splitWords = function (t) {
                                return t.replace((0, r.INVISIBLE_SPACE_REG_EXP)(), "").split((0, r.SPACE_REG_EXP)()).filter((function (t) {
                                    return t.length
                                }))
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off(".limit")
                            }, (0, o.Cg)([i.autobind], e.prototype, "checkPreventKeyPressOrPaste", null), (0, o.Cg)([i.autobind], e.prototype, "checkPreventChanging", null), e
                        }(a.k));

                    function c(t, e, n) {
                        return n ? t > e : t >= e
                    }
                    s.fg.add("limit", u)
                },
                9443: function (t, e, n) {
                    "use strict";
                    var o = n(56298),
                        r = n(83044),
                        i = n(38322),
                        s = (n(70061), new Set);
                    o.fg.add("fullsize", (function (t) {
                        t.registerButton({
                            name: "fullsize"
                        });
                        var e = !1,
                            n = 0,
                            o = 0,
                            a = !1,
                            u = function () {
                                var r = t.container;
                                t.events && (e ? (n = (0, i.A)(r, "height", !0), o = (0, i.A)(r, "width", !0), (0, i.A)(r, {
                                    height: t.ow.innerHeight,
                                    width: t.ow.innerWidth
                                }), a = !0) : a && (0, i.A)(r, {
                                    height: n || "auto",
                                    width: o || "auto"
                                }))
                            },
                            c = function (n) {
                                var o, a = t.container,
                                    c = t.events;
                                if (a) {
                                    if (void 0 === n && (n = !a.classList.contains("jodit_fullsize")), t.setMod("fullsize", n), t.o.fullsize = n, e = n, a.classList.toggle("jodit_fullsize", n), t.toolbar && ((0, r.y)(t) && (null === (o = t.toolbarContainer) || void 0 === o || o.appendChild(t.toolbar.container)), (0, i.A)(t.toolbar.container, "width", "auto")), n ? s.add(a) : s.delete(a), t.o.globalFullSize && (1 === s.size && n || 0 === s.size && !n)) {
                                        for (var l = a.parentNode; l && l.nodeType !== Node.DOCUMENT_NODE && l.nodeType !== Node.DOCUMENT_FRAGMENT_NODE;) l.classList.toggle("jodit_fullsize-box_true", n), l = l.parentNode;
                                        u()
                                    }
                                    c.fire("afterResize")
                                }
                            };
                        t.o.globalFullSize && t.e.on(t.ow, "resize", u), t.e.on("afterInit afterOpen", (function () {
                            var e;
                            t.toggleFullSize(null === (e = null == t ? void 0 : t.options) || void 0 === e ? void 0 : e.fullsize)
                        })).on("toggleFullSize", c).on("beforeDestruct", (function () {
                            e && c(!1)
                        })).on("beforeDestruct", (function () {
                            t.events && t.e.off(t.ow, "resize", u)
                        }))
                    }))
                },
                9645: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        G: function () {
                            return i
                        },
                        n: function () {
                            return s
                        }
                    });
                    var o = n(2461),
                        r = n(59101),
                        i = function (t) {
                            return /^[-+]?[0-9.]+(px)?$/.test(t.toString()) ? parseFloat(t.toString()) : t
                        },
                        s = function (t) {
                            return (0, o.E)(t) ? t ? t + "px" : t.toString() : (t = (0, r.Bq)(t), /^[0-9]+$/.test(t) ? t + "px" : t)
                        }
                },
                9810: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return "boolean" == typeof t
                    }
                    n.d(e, {
                        L: function () {
                            return o
                        }
                    })
                },
                9823: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        AH: function () {
                            return c.A
                        },
                        Bo: function () {
                            return w.B
                        },
                        CE: function () {
                            return l.C
                        },
                        E6: function () {
                            return d.E
                        },
                        Et: function () {
                            return m.E
                        },
                        Gp: function () {
                            return f.n4
                        },
                        Kg: function () {
                            return w.K
                        },
                        Lm: function () {
                            return s.L
                        },
                        Mj: function () {
                            return h.M
                        },
                        P5: function () {
                            return a.P
                        },
                        Qd: function () {
                            return b.Q
                        },
                        Rd: function () {
                            return I.R
                        },
                        Tn: function () {
                            return u.T
                        },
                        a3: function () {
                            return g.a
                        },
                        cy: function () {
                            return i.c
                        },
                        hH: function () {
                            return T.h
                        },
                        kC: function () {
                            return o.k
                        },
                        kO: function () {
                            return f.kO
                        },
                        kf: function () {
                            return y.k
                        },
                        l6: function () {
                            return j.l
                        },
                        mv: function () {
                            return S.m
                        },
                        n4: function () {
                            return a.n
                        },
                        pV: function () {
                            return f.pV
                        },
                        rg: function () {
                            return v.r
                        },
                        uV: function () {
                            return E.u
                        },
                        vM: function () {
                            return C.v
                        },
                        y0: function () {
                            return p.y
                        },
                        yL: function () {
                            return _.y
                        },
                        zf: function () {
                            return r.z
                        }
                    });
                    var o = n(78479),
                        r = n(99951),
                        i = n(37923),
                        s = n(9810),
                        a = n(69810),
                        u = n(69052),
                        c = n(53701),
                        l = n(21811),
                        f = n(10058),
                        d = n(3947),
                        p = n(83044),
                        h = n(82201),
                        v = n(71274),
                        g = n(34796),
                        m = n(2461),
                        y = n(12461),
                        b = n(25376),
                        _ = n(92039),
                        C = n(53470),
                        w = n(98253),
                        S = n(6939),
                        E = n(59082),
                        T = n(12041),
                        I = n(35642),
                        j = n(76776)
                },
                9979: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return t.files.setMod("active", !0), t.files.setMod("loading", !0), t.dataProvider.items(t.state.currentPath, t.state.currentSource, {
                            sortBy: t.state.sortBy,
                            onlyImages: t.state.onlyImages,
                            filterWord: t.state.filterWord
                        }).then((function (e) {
                            e && (t.state.elements = e, t.state.activeElements = [])
                        })).catch(t.status).finally((function () {
                            return t.files.setMod("loading", !1)
                        }))
                    }
                    n.d(e, {
                        f: function () {
                            return o
                        }
                    })
                },
                10004: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return r
                        },
                        d: function () {
                            return i
                        }
                    });
                    var o = n(42448),
                        r = (n(28712), "JoditEventDefaultNamespace"),
                        i = function () {
                            function t() {
                                this.__store = new Map
                            }
                            return t.prototype.get = function (t, e) {
                                if (this.__store.has(e)) return this.__store.get(e)[t]
                            }, t.prototype.indexOf = function (t, e, n) {
                                var o = this.get(t, e);
                                if (o)
                                    for (var r = 0; o.length > r; r += 1)
                                        if (o[r].originalCallback === n) return r;
                                return !1
                            }, t.prototype.namespaces = function (t) {
                                void 0 === t && (t = !1);
                                var e = (0, o.$)(this.__store.keys());
                                return t ? e.filter((function (t) {
                                    return t !== r
                                })) : e
                            }, t.prototype.events = function (t) {
                                var e = this.__store.get(t);
                                return e ? Object.keys(e) : []
                            }, t.prototype.set = function (t, e, n, o) {
                                void 0 === o && (o = !1);
                                var r = this.__store.get(e);
                                r || this.__store.set(e, r = {}), void 0 === r[t] && (r[t] = []), o ? r[t].unshift(n) : r[t].push(n)
                            }, t.prototype.clear = function () {
                                this.__store.clear()
                            }, t.prototype.clearEvents = function (t, e) {
                                var n = this.__store.get(t);
                                n && n[e] && (delete n[e], Object.keys(n).length || this.__store.delete(t))
                            }, t.prototype.isEmpty = function () {
                                return 0 === this.__store.size
                            }, t
                        }()
                },
                10025: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return t.replace(/\r\n|\r|\n/g, "<br/>")
                    }
                    n.d(e, {
                        H: function () {
                            return o
                        }
                    })
                },
                10058: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        kO: function () {
                            return u
                        },
                        n4: function () {
                            return s
                        },
                        pV: function () {
                            return a
                        }
                    });
                    var o = n(55186),
                        r = n(69052),
                        i = n(35642);

                    function s(t) {
                        return !(0, i.R)(t) && (0, r.T)(t.init)
                    }

                    function a(t) {
                        return !(0, i.R)(t) && (0, r.T)(t.destruct)
                    }

                    function u(t) {
                        return !(0, i.R)(t) && o.J.isElement(t.container)
                    }
                },
                10067: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return a
                        }
                    });
                    var o = n(55186),
                        r = n(65147),
                        i = n(53048),
                        s = n(4909),
                        a = function (t, e, n, a, c) {
                            var l;
                            void 0 === c && (c = !0);
                            var f = [];
                            if (e.upload && t.o.uploader && (t.o.uploader.url || t.o.uploader.insertImageAsBase64URI)) {
                                var d = t.c.fromHTML('<div class="jodit-drag-and-drop__file-box">' + "<strong>".concat(t.i18n(c ? "Drop image" : "Drop file"), "</strong>") + "<span><br>".concat(t.i18n("or click"), "</span>") + '<input type="file" accept="'.concat(c ? "image/*" : "*", '" tabindex="-1" dir="auto" multiple=""/>') + "</div>");
                                t.uploader.bind(d, (function (n) {
                                    var o = (0, r.isFunction)(e.upload) ? e.upload : t.o.uploader.defaultHandlerSuccess;
                                    (0, r.isFunction)(o) && o.call(t, n), t.e.fire("closeAllPopups")
                                }), (function (e) {
                                    t.message.error(e.message), t.e.fire("closeAllPopups")
                                })), f.push({
                                    icon: "upload",
                                    name: "Upload",
                                    content: d
                                })
                            }
                            if (e.filebrowser && (t.o.filebrowser.ajax.url || t.o.filebrowser.items.url) && f.push({
                                    icon: "folder",
                                    name: "Browse",
                                    content: function () {
                                        a && a(), e.filebrowser && t.filebrowser.open(e.filebrowser, c)
                                    }
                                }), e.url) {
                                var p = new i.lD(t, {
                                        type: "submit",
                                        variant: "primary",
                                        text: "Insert"
                                    }),
                                    h = new i.XV(t, [new i.tS(t, {
                                        required: !0,
                                        label: "URL",
                                        name: "url",
                                        type: "text",
                                        placeholder: "https://"
                                    }), new i.tS(t, {
                                        name: "text",
                                        label: "Alternative text"
                                    }), new i.Yh(t, [p])]);
                                l = null, !n || o.J.isText(n) || o.J.isComment(n) || !o.J.isTag(n, "img") && !(0, r.$$)("img", n).length || (l = "IMG" === n.tagName ? n : (0, r.$$)("img", n)[0], u(h.container, "input[name=url]", (0, r.attr)(l, "src")), u(h.container, "input[name=text]", (0, r.attr)(l, "alt")), p.state.text = "Update"), n && o.J.isTag(n, "a") && (u(h.container, "input[name=url]", (0, r.attr)(n, "href")), u(h.container, "input[name=text]", (0, r.attr)(n, "title")), p.state.text = "Update"), h.onSubmit((function (n) {
                                    (0, r.isFunction)(e.url) && e.url.call(t, n.url, n.text)
                                })), f.push({
                                    icon: "link",
                                    name: "URL",
                                    content: h.container
                                })
                            }
                            return (0, s.Z)(t, f)
                        };

                    function u(t, e, n) {
                        var o = t.querySelector(e);
                        return o ? (n && (o.value = n), o.value) : ""
                    }
                },
                10274: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Q: function () {
                            return o.Q
                        },
                        V: function () {
                            return r.V
                        }
                    });
                    var o = n(96025),
                        r = n(73307)
                },
                10466: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        E: function () {
                            return o
                        }
                    }), n(17352), n(28712);
                    var o = function () {
                        function t(t, e) {
                            this.transitions = e, this.silent = !0, this.__previewsStates = new Set, this.setState(t)
                        }
                        return t.prototype.setState = function (t) {
                            this.__previewsStates.add(t), this.__state = t
                        }, t.prototype.getState = function () {
                            return this.__state
                        }, t.prototype.disableSilent = function () {
                            this.silent = !1
                        }, t.prototype.dispatch = function (t, e) {
                            var n = this.transitions[this.getState()][t];
                            if (n) {
                                var o = n.call(this, e);
                                return this.setState(o.next), o
                            }
                            throw new Error("invalid action: ".concat(this.getState(), ".").concat(t.toString()))
                        }, t
                    }()
                },
                10467: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return t.length ? t[0].toUpperCase() + t.substring(1) : ""
                    }
                    n.d(e, {
                        Z: function () {
                            return o
                        }
                    })
                },
                10494: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        O: function () {
                            return s
                        }
                    });
                    var o = n(97621),
                        r = n(12043),
                        i = n(37649);

                    function s(t, e) {
                        var n, s = t.s;
                        null === (n = t.editor.firstChild) || void 0 === n || n.normalize();
                        var a = s.fakes(),
                            u = t.s.wrapInTagGen(a),
                            c = u.next();
                        if (!c.done) {
                            for (var l = {
                                    collapsed: s.isCollapsed(),
                                    mode: r.DI,
                                    element: c.value,
                                    next: i.x.START,
                                    jodit: t,
                                    style: e
                                }; c && !c.done;) {
                                var f = new o.EF(i.x.START, i.g);
                                for (l.element = c.value; f.getState() !== i.x.END;) l = f.dispatch("exec", l);
                                c = u.next()
                            }
                            s.restoreFakes(a)
                        }
                    }
                },
                11131: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Y: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(42448);

                    function i(t) {
                        var e = function (t, e) {
                                return void 0 === e && (e = t.ownerDocument.styleSheets), (0, r.$)(e).map((function (t) {
                                    try {
                                        return (0, r.$)(t.cssRules)
                                    } catch (t) {}
                                    return []
                                })).flat().filter((function (e) {
                                    try {
                                        return Boolean(e && t.matches(e.selectorText))
                                    } catch (t) {}
                                    return !1
                                }))
                            },
                            n = function () {
                                function n(n, r, i) {
                                    var s = this;
                                    this.css = {};
                                    var a = i || {},
                                        u = function (e) {
                                            var n = e.selectorText.split(",").map((function (t) {
                                                return t.trim()
                                            })).sort().join(",");
                                            !1 === Boolean(s.css[n]) && (s.css[n] = {});
                                            for (var r = e.style.cssText.split(/;(?![A-Za-z0-9])/), i = 0; r.length > i; i++)
                                                if (r[i]) {
                                                    var a = r[i].split(":");
                                                    a[0] = a[0].trim(), a[1] = a[1].trim(), s.css[n][a[0]] = a[1].replace(/var\(([^)]+)\)/g, (function (e, n) {
                                                        var r = (0, o.zs)(n.split(","), 2),
                                                            i = r[0],
                                                            s = r[1];
                                                        return (t.ew.getComputedStyle(t.editor).getPropertyValue(i.trim()) || s || e).trim()
                                                    }))
                                                }
                                        };
                                    ! function () {
                                        for (var o = n.innerHeight, i = r.createTreeWalker(t.editor, NodeFilter.SHOW_ELEMENT, (function () {
                                                return NodeFilter.FILTER_ACCEPT
                                            })); i.nextNode();) {
                                            var s = i.currentNode;
                                            if (o > s.getBoundingClientRect().top || a.scanFullPage) {
                                                var c = e(s);
                                                if (c)
                                                    for (var l = 0; c.length > l; l++) u(c[l])
                                            }
                                        }
                                    }()
                                }
                                return n.prototype.generateCSS = function () {
                                    var t = "";
                                    for (var e in this.css)
                                        if (!/:not\(/.test(e)) {
                                            for (var n in t += e + " { ", this.css[e]) t += n + ": " + this.css[e][n] + "; ";
                                            t += "}\n"
                                        } return t
                                }, n
                            }();
                        try {
                            return new n(t.ew, t.ed, {
                                scanFullPage: !0
                            }).generateCSS()
                        } catch (t) {}
                        return ""
                    }
                },
                11133: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        u: function () {
                            return r
                        }
                    });
                    var o = n(65147),
                        r = function () {
                            function t(t) {
                                var e = this;
                                this.data = t, Object.keys(t).forEach((function (n) {
                                    e[n] = t[n]
                                }))
                            }
                            return t.create = function (e) {
                                return e instanceof t ? e : new t(e)
                            }, Object.defineProperty(t.prototype, "path", {
                                get: function () {
                                    return (0, o.normalizePath)(this.data.source.path ? this.data.source.path + "/" : "/")
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "imageURL", {
                                get: function () {
                                    var t = this.time || (new Date).getTime().toString(),
                                        e = this.data,
                                        n = e.source,
                                        r = e.thumb || e.file;
                                    return e.thumbIsAbsolute && r ? r : (0, o.normalizeUrl)(n.baseurl, n.path, r || "") + "?_tmst=" + encodeURIComponent(t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "fileURL", {
                                get: function () {
                                    var t = this.data.name,
                                        e = this.data,
                                        n = e.file,
                                        r = e.source;
                                    return void 0 !== n && (t = n), e.fileIsAbsolute && t ? t : (0, o.normalizeUrl)(r.baseurl, r.path, t || "")
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "time", {
                                get: function () {
                                    var t = this.data.changed;
                                    return t && ("number" == typeof t ? new Date(t).toLocaleString() : t) || ""
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "uniqueHashKey", {
                                get: function () {
                                    var t = this.data;
                                    return [t.sourceName, t.name, t.file, this.time, t.thumb].join("_").toLowerCase().replace(/[^0-9a-z\-.]/g, "-")
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.toJSON = function () {
                                return this.data
                            }, t
                        }()
                },
                11648: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(17352),
                        s = n(22664),
                        a = n(71842),
                        u = n(56298),
                        c = n(65147),
                        l = new WeakMap,
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.selected = new Set, e
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "Table"
                            }, e.prototype.__recalculateStyles = function () {
                                var t = (0, u.My)(this.j, e, "style", !0),
                                    n = [];
                                this.selected.forEach((function (t) {
                                    var e = (0, c.cssPath)(t);
                                    e && n.push(e)
                                })), t.innerHTML = n.length ? n.join(",") + "{".concat(this.jodit.options.table.selectionCellStyle, "}") : ""
                            }, e.prototype.addSelection = function (t) {
                                this.selected.add(t), this.__recalculateStyles();
                                var n = a.J.closest(t, "table", this.j.editor);
                                if (n) {
                                    var o = e.__selectedByTable.get(n) || new Set;
                                    o.add(t), e.__selectedByTable.set(n, o)
                                }
                            }, e.prototype.removeSelection = function (t) {
                                this.selected.delete(t), this.__recalculateStyles();
                                var n = a.J.closest(t, "table", this.j.editor);
                                if (n) {
                                    var o = e.__selectedByTable.get(n);
                                    o && (o.delete(t), o.size || e.__selectedByTable.delete(n))
                                }
                            }, e.prototype.getAllSelectedCells = function () {
                                return (0, c.toArray)(this.selected)
                            }, e.__getSelectedCellsByTable = function (t) {
                                var n = e.__selectedByTable.get(t);
                                return n ? (0, c.toArray)(n) : []
                            }, e.prototype.destruct = function () {
                                return this.selected.clear(), t.prototype.destruct.call(this)
                            }, e.__getRowsCount = function (t) {
                                return t.rows.length
                            }, e.prototype.getRowsCount = function (t) {
                                return e.__getRowsCount(t)
                            }, e.__getColumnsCount = function (t) {
                                return e.__formalMatrix(t).reduce((function (t, e) {
                                    return Math.max(t, e.length)
                                }), 0)
                            }, e.prototype.getColumnsCount = function (t) {
                                return e.__getColumnsCount(t)
                            }, e.__formalMatrix = function (t, e) {
                                for (var n = [
                                        []
                                    ], o = (0, c.toArray)(t.rows), r = function (t, o) {
                                        void 0 === n[o] && (n[o] = []);
                                        for (var r, i, s = t.colSpan, a = t.rowSpan, u = 0; n[o][u];) u += 1;
                                        for (i = 0; a > i; i += 1)
                                            for (r = 0; s > r; r += 1) {
                                                if (void 0 === n[o + i] && (n[o + i] = []), e && !1 === e(t, o + i, u + r, s, a)) return !1;
                                                n[o + i][u + r] = t
                                            }
                                    }, i = 0; o.length > i; i += 1)
                                    for (var s = (0, c.toArray)(o[i].cells), a = 0; s.length > a; a += 1)
                                        if (!1 === r(s[a], i)) return n;
                                return n
                            }, e.prototype.formalMatrix = function (t, n) {
                                return e.__formalMatrix(t, n)
                            }, e.__formalCoordinate = function (t, n, o) {
                                void 0 === o && (o = !1);
                                var r = 0,
                                    i = 0,
                                    s = 1,
                                    a = 1;
                                return e.__formalMatrix(t, (function (t, e, u, c, l) {
                                    if (n === t) return r = e, i = u, s = c || 1, a = l || 1, o && (i += (c || 1) - 1, r += (l || 1) - 1), !1
                                })), [r, i, s, a]
                            }, e.prototype.formalCoordinate = function (t, n, o) {
                                return void 0 === o && (o = !1), e.__formalCoordinate(t, n, o)
                            }, e.__appendRow = function (t, n, o, r) {
                                var i, s;
                                if (n) s = n.cloneNode(!0), (0, c.$$)("td,th", n).forEach((function (t) {
                                    var e = (0, c.attr)(t, "rowspan");
                                    if (e && parseInt(e, 10) > 1) {
                                        var n = parseInt(e, 10) - 1;
                                        (0, c.attr)(t, "rowspan", n > 1 ? n : null)
                                    }
                                })), (0, c.$$)("td,th", s).forEach((function (t) {
                                    t.innerHTML = ""
                                }));
                                else {
                                    var a = e.__getColumnsCount(t);
                                    s = r.element("tr");
                                    for (var u = 0; a > u; u += 1) s.appendChild(r.element("td"))
                                }
                                o && n && n.nextSibling ? n.parentNode && n.parentNode.insertBefore(s, n.nextSibling) : !o && n ? n.parentNode && n.parentNode.insertBefore(s, n) : ((null === (i = t.getElementsByTagName("tbody")) || void 0 === i ? void 0 : i[0]) || t).appendChild(s)
                            }, e.prototype.appendRow = function (t, n, o) {
                                return e.__appendRow(t, n, o, this.j.createInside)
                            }, e.__removeRow = function (t, n) {
                                var o, r = e.__formalMatrix(t),
                                    i = t.rows[n];
                                r[n].forEach((function (e, s) {
                                    if (o = !1, 0 > n - 1 || r[n - 1][s] !== e)
                                        if (r[n + 1] && r[n + 1][s] === e) {
                                            if (e.parentNode === i && e.parentNode.nextSibling) {
                                                o = !0;
                                                for (var u = s + 1; r[n + 1][u] === e;) u += 1;
                                                var l = a.J.next(e.parentNode, (function (t) {
                                                    return a.J.isTag(t, "tr")
                                                }), t);
                                                l && (r[n + 1][u] ? l.insertBefore(e, r[n + 1][u]) : l.appendChild(e))
                                            }
                                        } else a.J.safeRemove(e);
                                    else o = !0;
                                    if (o && (e.parentNode === i || e !== r[n][s - 1])) {
                                        var f = e.rowSpan;
                                        (0, c.attr)(e, "rowspan", f - 1 > 1 ? f - 1 : null)
                                    }
                                })), a.J.safeRemove(i)
                            }, e.prototype.removeRow = function (t, n) {
                                return e.__removeRow(t, n)
                            }, e.prototype.appendColumn = function (t, n, o) {
                                void 0 === o && (o = !0);
                                var r = e.__formalMatrix(t);
                                if (!o && a.J.isCell(n.previousElementSibling)) return this.appendColumn(t, n.previousElementSibling, !0);
                                for (var i = o ? n.cellIndex + ((n.colSpan || 1) - 1) : n.cellIndex, s = o ? i + 1 : i, u = 0; r.length > u;) {
                                    var c = r[u];
                                    if (c[i] !== c[s] || i === s) {
                                        var l = this.j.createInside.element("td");
                                        o ? a.J.after(c[i], l) : a.J.before(c[i], l), c[i].rowSpan > 1 && (l.rowSpan = c[i].rowSpan)
                                    } else c[i].colSpan += 1;
                                    u += c[i].rowSpan || 1
                                }
                            }, e.__removeColumn = function (t, n) {
                                var o, r = e.__formalMatrix(t);
                                r.forEach((function (t, e) {
                                    var i = t[n];
                                    if (o = !1, 0 > n - 1 || r[e][n - 1] !== i ? t.length > n + 1 && r[e][n + 1] === i ? o = !0 : a.J.safeRemove(i) : o = !0, o && (0 > e - 1 || i !== r[e - 1][n])) {
                                        var s = i.colSpan;
                                        (0, c.attr)(i, "colspan", s - 1 > 1 ? (s - 1).toString() : null)
                                    }
                                }))
                            }, e.prototype.removeColumn = function (t, n) {
                                return e.__removeColumn(t, n)
                            }, e.__getSelectedBound = function (t, n) {
                                var o, r, i, s = [
                                        [1 / 0, 1 / 0],
                                        [0, 0]
                                    ],
                                    a = e.__formalMatrix(t);
                                for (o = 0; a.length > o; o += 1)
                                    for (r = 0; a[o] && a[o].length > r; r += 1) n.includes(a[o][r]) && (s[0][0] = Math.min(o, s[0][0]), s[0][1] = Math.min(r, s[0][1]), s[1][0] = Math.max(o, s[1][0]), s[1][1] = Math.max(r, s[1][1]));
                                for (o = s[0][0]; s[1][0] >= o; o += 1)
                                    for (i = 1, r = s[0][1]; s[1][1] >= r; r += 1) {
                                        for (; a[o] && a[o][r - i] && a[o][r] === a[o][r - i];) s[0][1] = Math.min(r - i, s[0][1]), s[1][1] = Math.max(r - i, s[1][1]), i += 1;
                                        for (i = 1; a[o] && a[o][r + i] && a[o][r] === a[o][r + i];) s[0][1] = Math.min(r + i, s[0][1]), s[1][1] = Math.max(r + i, s[1][1]), i += 1;
                                        for (i = 1; a[o - i] && a[o][r] === a[o - i][r];) s[0][0] = Math.min(o - i, s[0][0]), s[1][0] = Math.max(o - i, s[1][0]), i += 1;
                                        for (i = 1; a[o + i] && a[o][r] === a[o + i][r];) s[0][0] = Math.min(o + i, s[0][0]), s[1][0] = Math.max(o + i, s[1][0]), i += 1
                                    }
                                return s
                            }, e.prototype.getSelectedBound = function (t, n) {
                                return e.__getSelectedBound(t, n)
                            }, e.__normalizeTable = function (t) {
                                var n = [],
                                    o = e.__formalMatrix(t);
                                e.__removeExtraColspans(o, n), e.__removeExtraRowspans(o, n);
                                for (var r = 0; o.length > r; r += 1)
                                    for (var i = 0; o[r].length > i; i += 1) void 0 !== o[r][i] && (o[r][i].hasAttribute("rowspan") && 1 === o[r][i].rowSpan && (0, c.attr)(o[r][i], "rowspan", null), o[r][i].hasAttribute("colspan") && 1 === o[r][i].colSpan && (0, c.attr)(o[r][i], "colspan", null), o[r][i].hasAttribute("class") && !(0, c.attr)(o[r][i], "class") && (0, c.attr)(o[r][i], "class", null));
                                e.__unmark(n)
                            }, e.__removeExtraColspans = function (t, n) {
                                for (var o = 0; t[0].length > o; o += 1) {
                                    for (var r = 1e6, i = !1, s = 0; t.length > s; s += 1)
                                        if (void 0 !== t[s][o]) {
                                            if (2 > t[s][o].colSpan) {
                                                i = !0;
                                                break
                                            }
                                            r = Math.min(r, t[s][o].colSpan)
                                        } if (!i)
                                        for (s = 0; t.length > s; s += 1) void 0 !== t[s][o] && e.__mark(t[s][o], "colspan", t[s][o].colSpan - r + 1, n)
                                }
                            }, e.__removeExtraRowspans = function (t, n) {
                                var o = 0,
                                    r = 0;
                                for (o = 0; t.length > o; o += 1) {
                                    var i = 1e6,
                                        s = !1;
                                    for (r = 0; t[o].length > r; r += 1)
                                        if (void 0 !== t[o][r]) {
                                            if (2 > t[o][r].rowSpan) {
                                                s = !0;
                                                break
                                            }
                                            i = Math.min(i, t[o][r].rowSpan)
                                        } if (!s)
                                        for (r = 0; t[o].length > r; r += 1) void 0 !== t[o][r] && e.__mark(t[o][r], "rowspan", t[o][r].rowSpan - i + 1, n)
                                }
                            }, e.prototype.normalizeTable = function (t) {
                                return e.__normalizeTable(t)
                            }, e.__mergeSelected = function (t, n) {
                                var o, r = [],
                                    s = e.__getSelectedBound(t, e.__getSelectedCellsByTable(t)),
                                    u = 0,
                                    l = null,
                                    f = 0,
                                    p = 0,
                                    h = 0,
                                    v = new Set,
                                    g = [];
                                s && (s[0][0] - s[1][0] || s[0][1] - s[1][1]) && (e.__formalMatrix(t, (function (t, i, a, m, y) {
                                    if (!(s[0][0] > i || i > s[1][0] || s[0][1] > a || a > s[1][1])) {
                                        if (v.has(o = t)) return;
                                        v.add(o), i === s[0][0] && o.style.width && (u += o.offsetWidth), "" !== (0, c.trim)(t.innerHTML.replace(/<br(\/)?>/g, "")) && r.push(t.innerHTML), m > 1 && (p += m - 1), y > 1 && (h += y - 1), l ? (e.__mark(o, "remove", 1, g), d(n).removeSelection(o)) : (l = t, f = a)
                                    }
                                })), p = s[1][1] - s[0][1] + 1, h = s[1][0] - s[0][0] + 1, l && (p > 1 && e.__mark(l, "colspan", p, g), h > 1 && e.__mark(l, "rowspan", h, g), u && (e.__mark(l, "width", (u / t.offsetWidth * 100).toFixed(i.ACCURACY) + "%", g), f && e.__setColumnWidthByDelta(t, f, 0, !0, g)), l.innerHTML = r.join("<br/>"), d(n).addSelection(l), v.delete(l), e.__unmark(g), e.__normalizeTable(t), (0, c.toArray)(t.rows).forEach((function (t) {
                                    t.cells.length || a.J.safeRemove(t)
                                }))))
                            }, e.prototype.mergeSelected = function (t) {
                                return e.__mergeSelected(t, this.j)
                            }, e.__splitHorizontal = function (t, n) {
                                var o, r, i, s, u, c = [];
                                e.__getSelectedCellsByTable(t).forEach((function (l) {
                                    (r = n.createInside.element("td")).appendChild(n.createInside.element("br")), i = n.createInside.element("tr"), o = e.__formalCoordinate(t, l), 2 > l.rowSpan ? (e.__formalMatrix(t, (function (t, n, r) {
                                        o[0] === n && o[1] !== r && t !== l && e.__mark(t, "rowspan", t.rowSpan + 1, c)
                                    })), a.J.after(a.J.closest(l, "tr", t), i), i.appendChild(r)) : (e.__mark(l, "rowspan", l.rowSpan - 1, c), e.__formalMatrix(t, (function (e, n, r) {
                                        n > o[0] && o[0] + l.rowSpan > n && o[1] > r && e.parentNode.rowIndex === n && (u = e), n > o[0] && e === l && (s = t.rows[n])
                                    })), u ? a.J.after(u, r) : s.insertBefore(r, s.firstChild)), l.colSpan > 1 && e.__mark(r, "colspan", l.colSpan, c), e.__unmark(c), d(n).removeSelection(l)
                                })), this.__normalizeTable(t)
                            }, e.prototype.splitHorizontal = function (t) {
                                return e.__splitHorizontal(t, this.j)
                            }, e.__splitVertical = function (t, n) {
                                var o, r, s, u = [];
                                e.__getSelectedCellsByTable(t).forEach((function (c) {
                                    o = e.__formalCoordinate(t, c), 2 > c.colSpan ? e.__formalMatrix(t, (function (t, n, r) {
                                        o[1] === r && o[0] !== n && t !== c && e.__mark(t, "colspan", t.colSpan + 1, u)
                                    })) : e.__mark(c, "colspan", c.colSpan - 1, u), (r = n.createInside.element("td")).appendChild(n.createInside.element("br")), c.rowSpan > 1 && e.__mark(r, "rowspan", c.rowSpan, u);
                                    var l = c.offsetWidth;
                                    a.J.after(c, r), e.__mark(c, "width", (100 * (s = l / t.offsetWidth / 2)).toFixed(i.ACCURACY) + "%", u), e.__mark(r, "width", (100 * s).toFixed(i.ACCURACY) + "%", u), e.__unmark(u), d(n).removeSelection(c)
                                })), e.__normalizeTable(t)
                            }, e.prototype.splitVertical = function (t) {
                                return e.__splitVertical(t, this.j)
                            }, e.__setColumnWidthByDelta = function (t, n, o, r, s) {
                                for (var a = e.__formalMatrix(t), u = 0, c = 0; a.length > c; c += 1)
                                    if (1 >= (l = a[c][n]).colSpan || 1 >= a.length) {
                                        e.__mark(l, "width", ((l.offsetWidth + o) / t.offsetWidth * 100).toFixed(i.ACCURACY) + "%", s), u = c;
                                        break
                                    } for (c = u + 1; a.length > c; c += 1) {
                                    var l;
                                    e.__mark(l = a[c][n], "width", null, s)
                                }
                                r || e.__unmark(s)
                            }, e.prototype.setColumnWidthByDelta = function (t, n, o, r, i) {
                                return e.__setColumnWidthByDelta(t, n, o, r, i)
                            }, e.__mark = function (t, e, n, o) {
                                var r;
                                o.push(t);
                                var i = null !== (r = l.get(t)) && void 0 !== r ? r : {};
                                i[e] = void 0 === n ? 1 : n, l.set(t, i)
                            }, e.__unmark = function (t) {
                                t.forEach((function (t) {
                                    var e = l.get(t);
                                    e && (Object.keys(e).forEach((function (n) {
                                        var o = e[n];
                                        switch (n) {
                                            case "remove":
                                                a.J.safeRemove(t);
                                                break;
                                            case "rowspan":
                                                (0, c.attr)(t, "rowspan", (0, c.isNumber)(o) && o > 1 ? o : null);
                                                break;
                                            case "colspan":
                                                (0, c.attr)(t, "colspan", (0, c.isNumber)(o) && o > 1 ? o : null);
                                                break;
                                            case "width":
                                                null == o ? (t.style.removeProperty("width"), (0, c.attr)(t, "style") || (0, c.attr)(t, "style", null)) : t.style.width = o.toString()
                                        }
                                        delete e[n]
                                    })), l.delete(t))
                                }))
                            }, e.__selectedByTable = new WeakMap, (0, o.Cg)([(0, s.debounce)()], e.prototype, "__recalculateStyles", null), e
                        }(r.vG),
                        d = function (t) {
                            return t.getInstance("Table", t.o)
                        }
                },
                11961: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        d: function () {
                            return o.Ay
                        }
                    });
                    var o = n(52201)
                },
                11995: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        ar: function () {
                            return o
                        },
                        cs_cz: function () {
                            return o
                        },
                        de: function () {
                            return o
                        },
                        es: function () {
                            return r
                        },
                        fa: function () {
                            return o
                        },
                        fi: function () {
                            return o
                        },
                        fr: function () {
                            return o
                        },
                        he: function () {
                            return o
                        },
                        hu: function () {
                            return o
                        },
                        id: function () {
                            return o
                        },
                        it: function () {
                            return o
                        },
                        ja: function () {
                            return o
                        },
                        ko: function () {
                            return o
                        },
                        mn: function () {
                            return o
                        },
                        nl: function () {
                            return o
                        },
                        no: function () {
                            return o
                        },
                        pl: function () {
                            return o
                        },
                        pt_br: function () {
                            return o
                        },
                        ru: function () {
                            return o
                        },
                        tr: function () {
                            return o
                        },
                        ua: function () {
                            return o
                        },
                        zh_cn: function () {
                            return o
                        },
                        zh_tw: function () {
                            return o
                        }
                    });
                    var o = n(41324),
                        r = n(82333)
                },
                12041: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        h: function () {
                            return r
                        }
                    });
                    var o = n(69052);

                    function r(t) {
                        return Boolean(t && t instanceof Object && (0, o.T)(t.constructor) && t.isView)
                    }
                },
                12043: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Ag: function () {
                            return s
                        },
                        DI: function () {
                            return a
                        },
                        OJ: function () {
                            return r
                        },
                        PL: function () {
                            return i
                        },
                        Zk: function () {
                            return o
                        },
                        ar: function () {
                            return c
                        },
                        dj: function () {
                            return u
                        }
                    });
                    var o = "wrap",
                        r = "unwrap",
                        i = "change",
                        s = "unset",
                        a = "initial",
                        u = "replace",
                        c = "commitStyle"
                },
                12461: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return r
                        }
                    });
                    var o = n(98253);

                    function r(t) {
                        if ((0, o.K)(t)) {
                            if (!t.match(/^([+-])?[0-9]+(\.?)([0-9]+)?(e[0-9]+)?$/)) return !1;
                            t = parseFloat(t)
                        }
                        return "number" == typeof t && !isNaN(t) && isFinite(t)
                    }
                },
                13265: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        V: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                        return t.split("/").reduce((function (t, e) {
                            switch (e) {
                                case "":
                                case ".":
                                    break;
                                case "..":
                                    t.pop();
                                    break;
                                default:
                                    t.push(e)
                            }
                            return t
                        }), []).join("/") + (t.endsWith("/") ? "/" : "")
                    }
                },
                13405: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(9810),
                        c = n(29866),
                        l = n(81781),
                        f = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this,
                                    n = t.o.enter.toLowerCase(),
                                    o = n === r.BR.toLowerCase();
                                t.o.enterBlock || (t.o.enterBlock = o ? r.PARAGRAPH : n), t.registerCommand("enter", (function (t, n, o) {
                                    return void 0 === o && (o = {}), e.onEnter(o)
                                }))
                            }, e.prototype.onEnterKeyDown = function (t) {
                                if (t.key === r.KEY_ENTER) {
                                    var e = this.j,
                                        n = e.e.fire("beforeEnter", t);
                                    return void 0 !== n ? n : (e.s.isCollapsed() || e.execCommand("Delete"), e.s.focus(), this.onEnter(t), e.e.fire("afterEnter", t), e.synchronizeValues(), !1)
                                }
                            }, e.prototype.onEnter = function (t) {
                                var e = this.jodit,
                                    n = e.createInside.fake();
                                try {
                                    s.J.safeInsertNode(e.s.range, n), (0, l.Mt)(e, n, ["a"]);
                                    var o = (0, l.Dk)(n, e),
                                        r = s.J.isLeaf(o);
                                    if ((!r || (null == t ? void 0 : t.shiftKey)) && (0, l.lN)(n, e, null == t ? void 0 : t.shiftKey)) return !1;
                                    if (o || (0, l.tX)(n, e) || (o = (0, l.C1)(n, e)), !o) return (0, l.yh)(n, e, r ? "li" : e.o.enter), !1;
                                    if (!(0, l.bD)(n, e, o)) return !1;
                                    if (r && this.__isEmptyListLeaf(o)) return (0, l.cf)(n, e, o), !1;
                                    (0, l.HS)(n, e, o)
                                } finally {
                                    n.isConnected && e.s.setCursorBefore(n), s.J.safeRemove(n)
                                }
                            }, e.prototype.__isEmptyListLeaf = function (t) {
                                var e = this.j.e.fire("enterIsEmptyListLeaf", t);
                                return (0, u.L)(e) ? e : s.J.isEmpty(t)
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off("keydown.enter")
                            }, (0, o.Cg)([(0, i.watch)(":keydown.enter")], e.prototype, "onEnterKeyDown", null), e
                        }(c.k);
                    a.fg.add("enter", f)
                },
                13642: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        b: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UISpacer"
                            }, (0, o.Cg)([r.s], e)
                        }(n(29780).D)
                },
                13676: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        D: function () {
                            return a
                        },
                        M: function () {
                            return s
                        }
                    });
                    var o = n(95350),
                        r = n(97369),
                        i = (n(28712), n(70592));

                    function s(t, e) {
                        return !t.attributes.length && !(0, o.E)(e) || !(0, o.E)(e) || Object.keys(e).every((function (n) {
                            return "class" === n || "className" === n ? t.classList.contains(e[n]) : "style" === n ? (0, i.g)(t, e[n]) : (0, r.attr)(t, n) === e[n]
                        }))
                    }

                    function a(t, e) {
                        return t.attributes.length === e.attributes.length && Array.from(t.attributes).every((function (t) {
                            return e.hasAttribute(t.name) && e.getAttribute(t.name) === t.value
                        }))
                    }
                },
                13861: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = n(29866),
                        l = (n(70674), n(90823)),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.pasteStack = new u.LimitedStack(20), e._isDialogOpened = !1, e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.e.on("paste.paste", this.onPaste).on("pasteStack.paste", (function (t) {
                                    return e.pasteStack.push(t)
                                })), t.o.nl2brInPlainText && this.j.e.on("processPaste.paste", this.onProcessPasteReplaceNl2Br)
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off("paste.paste", this.onPaste).off("processPaste.paste", this.onProcessPasteReplaceNl2Br).off(".paste")
                            }, e.prototype.onPaste = function (t) {
                                try {
                                    if (!1 === this.customPasteProcess(t) || !1 === this.j.e.fire("beforePaste", t)) return t.preventDefault(), !1;
                                    this.defaultPasteProcess(t)
                                } finally {
                                    this.j.e.fire("afterPaste", t)
                                }
                            }, e.prototype.customPasteProcess = function (t) {
                                var e, n;
                                if (this.j.o.processPasteHTML) {
                                    var i = (0, u.getDataTransfer)(t),
                                        s = [null == i ? void 0 : i.getData(r.TEXT_PLAIN), null == i ? void 0 : i.getData(r.TEXT_HTML), null == i ? void 0 : i.getData(r.TEXT_RTF)];
                                    try {
                                        for (var a = (0, o.Ju)(s), c = a.next(); !c.done; c = a.next()) {
                                            var l = c.value;
                                            if ((0, u.isHTML)(l) && (this.j.e.fire("processHTML", t, l, {
                                                    plain: s[0],
                                                    html: s[1],
                                                    rtf: s[2]
                                                }) || this.processHTML(t, l))) return !1
                                        }
                                    } catch (t) {
                                        e = {
                                            error: t
                                        }
                                    } finally {
                                        try {
                                            c && !c.done && (n = a.return) && n.call(a)
                                        } finally {
                                            if (e) throw e.error
                                        }
                                    }
                                }
                            }, e.prototype.defaultPasteProcess = function (t) {
                                var e = (0, u.getDataTransfer)(t),
                                    n = (null == e ? void 0 : e.getData(r.TEXT_HTML)) || (null == e ? void 0 : e.getData(r.TEXT_PLAIN));
                                if (e && n && "" !== (0, u.trim)(n)) {
                                    var o = this.j.e.fire("processPaste", t, n, (0, l.DI)(e));
                                    void 0 !== o && (n = o), ((0, u.isString)(n) || s.J.isNode(n)) && this.__insertByType(t, n, this.j.o.defaultActionOnPaste), t.preventDefault(), t.stopPropagation()
                                }
                            }, e.prototype.processHTML = function (t, e) {
                                var n = this;
                                if (!this.j.o.askBeforePasteHTML) return !1;
                                if (this.j.o.memorizeChoiceWhenPasteFragment) {
                                    var o = this.pasteStack.find((function (t) {
                                        return t.html === e
                                    }));
                                    if (o) return this.__insertByType(t, e, o.action || this.j.o.defaultActionOnPaste), !0
                                }
                                if (this._isDialogOpened) return !0;
                                var r = (0, l.PU)(this.j, "Your code is similar to HTML. Keep as HTML?", "Paste as HTML", (function (o) {
                                    n._isDialogOpened = !1, n.__insertByType(t, e, o)
                                }), this.j.o.pasteHTMLActionList);
                                return r && (this._isDialogOpened = !0, r.e.on("beforeClose", (function () {
                                    n._isDialogOpened = !1
                                }))), !0
                            }, e.prototype.__insertByType = function (t, e, n) {
                                if (this.pasteStack.push({
                                        html: e,
                                        action: n
                                    }), (0, u.isString)(e)) switch (this.j.buffer.set(r.CLIPBOARD_ID, e), n) {
                                    case r.INSERT_CLEAR_HTML:
                                        e = (0, u.cleanFromWord)(e);
                                        break;
                                    case r.INSERT_ONLY_TEXT:
                                        e = (0, u.stripTags)(e, this.j.ed, new Set(this.j.o.pasteExcludeStripTags));
                                        break;
                                    case r.INSERT_AS_TEXT:
                                        e = (0, u.htmlspecialchars)(e);
                                        break;
                                    default:
                                        var o = this.j.e.fire("onCustomPasteHTMLOption", n, e, t);
                                        "string" == typeof o && (e = o)
                                }(0, l.sX)(t, this.j, e)
                            }, e.prototype.onProcessPasteReplaceNl2Br = function (t, e, n) {
                                if (n === r.TEXT_PLAIN + ";" && !(0, u.isHTML)(e)) return (0, u.nl2br)(e)
                            }, (0, o.Cg)([i.autobind], e.prototype, "onPaste", null), (0, o.Cg)([i.autobind], e.prototype, "onProcessPasteReplaceNl2Br", null), e
                        }(c.k);
                    a.fg.add("paste", f)
                },
                13917: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(71842),
                        s = n(56298),
                        a = n(69052),
                        u = n(71005),
                        c = n(46602),
                        l = (n(81982), n(90084)),
                        f = n(89832),
                        d = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.registerCommand("deleteButton", {
                                    exec: function () {
                                        return e.onDelete(!1)
                                    },
                                    hotkeys: t.o.delete.hotkeys.delete
                                }, {
                                    stopPropagation: !1
                                }).registerCommand("backspaceButton", {
                                    exec: function () {
                                        return e.onDelete(!0)
                                    },
                                    hotkeys: t.o.delete.hotkeys.backspace
                                }, {
                                    stopPropagation: !1
                                }).registerCommand("deleteWordButton", {
                                    exec: function () {
                                        return e.onDelete(!1, "word")
                                    },
                                    hotkeys: t.o.delete.hotkeys.deleteWord
                                }).registerCommand("backspaceWordButton", {
                                    exec: function () {
                                        return e.onDelete(!0, "word")
                                    },
                                    hotkeys: t.o.delete.hotkeys.backspaceWord
                                }).registerCommand("deleteSentenceButton", {
                                    exec: function () {
                                        return e.onDelete(!1, "sentence")
                                    },
                                    hotkeys: t.o.delete.hotkeys.deleteSentence
                                }).registerCommand("backspaceSentenceButton", {
                                    exec: function () {
                                        return e.onDelete(!0, "sentence")
                                    },
                                    hotkeys: t.o.delete.hotkeys.backspaceSentence
                                })
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off("afterCommand.delete")
                            }, e.prototype.onDelete = function (t, e) {
                                void 0 === e && (e = "char");
                                var n = this.j,
                                    o = n.selection;
                                if (o.isFocused() || o.focus(), (0, l.L)(n)) return !1;
                                var s = o.range,
                                    u = n.createInside.text(r.INVISIBLE_SPACE);
                                try {
                                    if (i.J.safeInsertNode(s, u), !i.J.isOrContains(n.editor, u)) return;
                                    if (n.e.fire("backSpaceBeforeCases", t, u)) return !1;
                                    if ((0, c.W8)(n, u, t), f.C.some((function (o) {
                                            if ((0, a.T)(o) && o(n, u, t, e)) return !0
                                        }))) return !1
                                } catch (t) {
                                    throw t
                                } finally {
                                    n.e.fire("backSpaceAfterDelete", t, u), this.safeRemoveEmptyNode(u)
                                }
                                return !1
                            }, e.prototype.safeRemoveEmptyNode = function (t) {
                                var e, n, o = this.j.s.range;
                                o.startContainer === t && (t.previousSibling ? i.J.isText(t.previousSibling) ? o.setStart(t.previousSibling, null !== (n = null === (e = t.previousSibling.nodeValue) || void 0 === e ? void 0 : e.length) && void 0 !== n ? n : 0) : o.setStartAfter(t.previousSibling) : t.nextSibling && (i.J.isText(t.nextSibling) ? o.setStart(t.nextSibling, 0) : o.setStartBefore(t.nextSibling)), o.collapse(!0), this.j.s.selectRange(o)), i.J.safeRemove(t)
                            }, e.requires = ["hotkeys"], e
                        }(u.k);
                    s.fg.add("backspace", d)
                },
                14006: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1216 320q0 26-19 45t-45 19h-128v1024h128q26 0 45 19t19 45-19 45l-256 256q-19 19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-1024h-128q-26 0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45z"/> </svg>'
                },
                14017: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M384 544v576q0 13-9.5 22.5t-22.5 9.5q-14 0-23-9l-288-288q-9-9-9-23t9-23l288-288q9-9 23-9 13 0 22.5 9.5t9.5 22.5zm1408 768v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z"/> </svg>'
                },
                14305: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/> </svg>'
                },
                14367: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(71842),
                        s = n(56298),
                        a = n(98253),
                        u = n(71005),
                        c = (n(2805), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.isSuitableStart = function (t) {
                                    var n;
                                    return i.J.isText(t) && (0, a.K)(t.nodeValue) && (/[^\s]/.test(t.nodeValue) || (null === (n = t.parentNode) || void 0 === n ? void 0 : n.firstChild) === t && e.isSuitable(t.nextSibling)) || e.isNotWrapped(t) && !i.J.isTemporary(t)
                                }, e.isSuitable = function (t) {
                                    return i.J.isText(t) || e.isNotWrapped(t)
                                }, e.isNotWrapped = function (t) {
                                    return i.J.isElement(t) && !(i.J.isBlock(t) || i.J.isTag(t, e.j.o.wrapNodes.exclude))
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                "br" !== t.o.enter.toLowerCase() && t.e.on("drop.wtn focus.wtn keydown.wtn mousedown.wtn afterInit.wtn backSpaceAfterDelete.wtn", this.preprocessInput, {
                                    top: !0
                                }).on("afterInit.wtn postProcessSetEditorValue.wtn afterCommitStyle.wtn backSpaceAfterDelete.wtn", this.postProcessSetEditorValue)
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off(".wtn")
                            }, e.prototype.postProcessSetEditorValue = function () {
                                var t = this.jodit;
                                if (t.isEditorMode()) {
                                    for (var e = t.editor.firstChild, n = !1; e;) {
                                        if (e = l(e, t), this.isSuitableStart(e)) {
                                            n || t.s.save(), n = !0;
                                            var o = t.createInside.element(t.o.enter);
                                            for (i.J.before(e, o); e && this.isSuitable(e);) {
                                                var r = e.nextSibling;
                                                o.appendChild(e), e = r
                                            }
                                            o.normalize(), e = o
                                        }
                                        e = e && e.nextSibling
                                    }
                                    n && (t.s.restore(), "afterInit" === t.e.current && t.e.fire("internalChange"))
                                }
                            }, e.prototype.preprocessInput = function () {
                                var t = this.jodit,
                                    e = "afterInit" === t.e.current;
                                if (t.isEditorMode() && !t.editor.firstChild && (t.o.wrapNodes.emptyBlockAfterInit || !e)) {
                                    var n = t.createInside.element(t.o.enter),
                                        o = t.createInside.element("br");
                                    i.J.append(n, o), i.J.append(t.editor, n), t.s.isFocused() && t.s.setCursorBefore(o), t.e.fire("internalChange")
                                }
                            }, (0, o.Cg)([r.autobind], e.prototype, "postProcessSetEditorValue", null), (0, o.Cg)([r.autobind], e.prototype, "preprocessInput", null), e
                        }(u.k));

                    function l(t, e) {
                        var n = t,
                            o = t;
                        do {
                            if (!i.J.isElement(o) || !i.J.isLeaf(o) || i.J.isList(o.parentElement)) break;
                            var r = i.J.findNotEmptySibling(o, !1);
                            i.J.isTag(n, "ul") ? n.appendChild(o) : n = i.J.wrap(o, "ul", e.createInside), o = r
                        } while (o);
                        return n
                    }
                    s.fg.add("wrapNodes", c)
                },
                14961: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        T: function () {
                            return v
                        }
                    });
                    var o = n(31635),
                        r = n(64567),
                        i = n(52201),
                        s = n(66927),
                        a = n(55186),
                        u = n(32709),
                        c = n(98253),
                        l = n(58720),
                        f = n(53048),
                        d = n(39611),
                        p = n(77782),
                        h = n(8809),
                        v = function (t) {
                            function e(e, n) {
                                void 0 === n && (n = !1);
                                var o = t.call(this, e, n) || this;
                                return o.toolbar = (0, h.$K)(o), o.__defaultToolbarContainer = o.c.div("jodit-toolbar__box"), o.registeredButtons = new Set, o.groupToButtons = {}, o.isJodit = !1, o.__tooltip = new f.SB(o), o.isJodit = n, o.e.on("beforeToolbarBuild", o.beforeToolbarBuild), o
                            }
                            return (0, o.C6)(e, t), Object.defineProperty(e.prototype, "toolbarContainer", {
                                get: function () {
                                    return this.o.fullsize || !(0, c.K)(this.o.toolbar) && !a.J.isHTMLElement(this.o.toolbar) ? (this.o.toolbar && a.J.appendChildFirst(this.container, this.__defaultToolbarContainer), this.__defaultToolbarContainer) : (0, l.tI)(this.o.toolbar, this.o.shadowRoot || this.od)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.setPanel = function (t) {
                                this.o.toolbar = t, this.buildToolbar()
                            }, e.prototype.buildToolbar = function () {
                                var t;
                                if (this.o.toolbar) {
                                    var e = this.o.buttons ? (0, u.uM)(this.o.buttons) : [];
                                    null === (t = this.toolbar) || void 0 === t || t.setRemoveButtons(this.o.removeButtons).build(e.concat(this.o.extraButtons || [])).appendTo(this.toolbarContainer)
                                }
                            }, e.prototype.getRegisteredButtonGroups = function () {
                                return this.groupToButtons
                            }, e.prototype.registerButton = function (t) {
                                var e;
                                this.registeredButtons.add(t);
                                var n = null !== (e = t.group) && void 0 !== e ? e : "other";
                                return this.groupToButtons[n] || (this.groupToButtons[n] = []), null != t.position ? this.groupToButtons[n][t.position] = t.name : this.groupToButtons[n].push(t.name), this
                            }, e.prototype.unregisterButton = function (t) {
                                var e;
                                this.registeredButtons.delete(t);
                                var n = null !== (e = t.group) && void 0 !== e ? e : "other",
                                    o = this.groupToButtons[n];
                                if (o) {
                                    var r = o.indexOf(t.name); - 1 !== r && o.splice(r, 1), 0 === o.length && delete this.groupToButtons[n]
                                }
                                return this
                            }, e.prototype.beforeToolbarBuild = function (t) {
                                var e = this;
                                if (Object.keys(this.groupToButtons).length) return t.map((function (t) {
                                    return (0, d.i)(t) && t.group && e.groupToButtons[t.group] ? {
                                        group: t.group,
                                        buttons: (0, o.fX)((0, o.fX)([], (0, o.zs)(t.buttons), !1), (0, o.zs)(e.groupToButtons[t.group]), !1)
                                    } : t
                                }))
                            }, e.prototype.destruct = function () {
                                this.isDestructed || (this.setStatus(r.f.beforeDestruct), this.e.off("beforeToolbarBuild", this.beforeToolbarBuild), this.__tooltip.destruct(), this.toolbar.destruct(), this.toolbar = void 0, t.prototype.destruct.call(this))
                            }, (0, o.Cg)([(0, s.w)(":rebuildToolbar")], e.prototype, "buildToolbar", null), (0, o.Cg)([i.Ay], e.prototype, "beforeToolbarBuild", null), e
                        }(p.S)
                },
                15396: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Zd: function () {
                            return o.Z
                        },
                        eZ: function () {
                            return s.e
                        },
                        hk: function () {
                            return i.h
                        },
                        w5: function () {
                            return r.w
                        }
                    });
                    var o = n(60549),
                        r = n(30526),
                        i = n(20646),
                        s = n(52306)
                },
                16113: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Gq: function () {
                            return i.G
                        },
                        HA: function () {
                            return s.H
                        },
                        Kq: function () {
                            return u.K
                        },
                        ZM: function () {
                            return o.Z
                        },
                        t_: function () {
                            return a.t
                        },
                        vn: function () {
                            return a.v
                        },
                        wE: function () {
                            return r.w
                        }
                    });
                    var o = n(56176),
                        r = n(94450),
                        i = n(4960),
                        s = n(10025),
                        a = n(26328),
                        u = n(61793)
                },
                16116: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Kn: function () {
                            return o.K
                        },
                        Zg: function () {
                            return i.Z
                        },
                        kG: function () {
                            return r.k
                        }
                    });
                    var o = n(19633),
                        r = n(10067),
                        i = n(4909)
                },
                16841: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        J: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(98253),
                        i = n(35642);

                    function s(t, e) {
                        var n, s;
                        if (!(0, r.K)(t) || !t.length) return null;
                        var a = t.split("."),
                            u = e;
                        try {
                            try {
                                for (var c = (0, o.Ju)(a), l = c.next(); !l.done; l = c.next()) {
                                    var f = l.value;
                                    if ((0, i.R)(u[f])) return null;
                                    u = u[f]
                                }
                            } catch (t) {
                                n = {
                                    error: t
                                }
                            } finally {
                                try {
                                    l && !l.done && (s = c.return) && s.call(c)
                                } finally {
                                    if (n) throw n.error
                                }
                            }
                        } catch (t) {
                            return null
                        }
                        return (0, i.R)(u) ? null : u
                    }
                },
                17343: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = (n(17352), n(22664)),
                        i = n(71842),
                        s = n(56298),
                        a = n(65147),
                        u = n(71005),
                        c = (n(78593), n(78817)),
                        l = n(63064),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.buttons = [{
                                    name: "find",
                                    group: "search"
                                }], e.previousQuery = "", e.drawPromise = null, e.walker = null, e.walkerCount = null, e.cache = {}, e.wrapFrameRequest = 0, e
                            }
                            return (0, o.C6)(e, t), Object.defineProperty(e.prototype, "ui", {
                                get: function () {
                                    return new l.F(this.j)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.updateCounters = function () {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var t;
                                    return (0, o.YH)(this, (function (e) {
                                        switch (e.label) {
                                            case 0:
                                                return this.ui.isOpened ? (t = this.ui, [4, this.calcCounts(this.ui.query)]) : [2];
                                            case 1:
                                                return t.count = e.sent(), [2]
                                        }
                                    }))
                                }))
                            }, e.prototype.onPressReplaceButton = function () {
                                this.findAndReplace(this.ui.query), this.updateCounters()
                            }, e.prototype.tryScrollToElement = function (t) {
                                var e = i.J.closest(t, i.J.isElement, this.j.editor);
                                e || (e = i.J.prev(t, i.J.isElement, this.j.editor)), e && e !== this.j.editor && (0, a.scrollIntoViewIfNeeded)(e, this.j.editor, this.j.ed)
                            }, e.prototype.calcCounts = function (t) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    return (0, o.YH)(this, (function (e) {
                                        switch (e.label) {
                                            case 0:
                                                return [4, this.findQueryBounds(t, "walkerCount")];
                                            case 1:
                                                return [2, e.sent().length]
                                        }
                                    }))
                                }))
                            }, e.prototype.findQueryBounds = function (t, e) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var n;
                                    return (0, o.YH)(this, (function (o) {
                                        return (n = this[e]) && n.break(), n = new i.p(this.j.async, {
                                            timeout: this.j.o.search.lazyIdleTimeout
                                        }), this[e] = n, [2, this.find(n, t).catch((function (t) {
                                            return []
                                        }))]
                                    }))
                                }))
                            }, e.prototype.findAndReplace = function (t) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var e, n, r, s, a;
                                    return (0, o.YH)(this, (function (o) {
                                        switch (o.label) {
                                            case 0:
                                                return [4, this.findQueryBounds(t, "walker")];
                                            case 1:
                                                if (!(e = o.sent()).length) return [2, !1];
                                                if (-1 === (n = this.findCurrentIndexInRanges(e, this.j.s.range)) && (n = 0), !(r = e[n])) return [3, 6];
                                                o.label = 2;
                                            case 2:
                                                return o.trys.push([2, , 4, 5]), (s = this.j.ed.createRange()).setStart(r.startContainer, r.startOffset), s.setEnd(r.endContainer, r.endOffset), s.deleteContents(), a = this.j.createInside.text(this.ui.replace), i.J.safeInsertNode(s, a), (0, c.IJ)(this.j), this.j.s.setCursorAfter(a), this.tryScrollToElement(a), this.cache = {}, this.ui.currentIndex = n, [4, this.findAndSelect(t, !0).catch((function (t) {
                                                    return null
                                                }))];
                                            case 3:
                                                return o.sent(), [3, 5];
                                            case 4:
                                                return this.j.synchronizeValues(), [7];
                                            case 5:
                                                return this.j.e.fire("afterFindAndReplace"), [2, !0];
                                            case 6:
                                                return [2, !1]
                                        }
                                    }))
                                }))
                            }, e.prototype.findAndSelect = function (t, e) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var n, r, i, s, a;
                                    return (0, o.YH)(this, (function (o) {
                                        switch (o.label) {
                                            case 0:
                                                return [4, this.findQueryBounds(t, "walker")];
                                            case 1:
                                                if (!(n = o.sent()).length) return [2, !1];
                                                if (this.previousQuery === t && (0, c.zy)(this.j.editor).length || (null === (a = this.drawPromise) || void 0 === a || a.rejectCallback(), this.j.async.cancelAnimationFrame(this.wrapFrameRequest), (0, c.IJ)(this.j), this.drawPromise = this.__drawSelectionRanges(n)), this.previousQuery = t, this.ui.currentIndex = (r = -1 == (r = this.ui.currentIndex - 1) ? 0 : e ? r === n.length - 1 ? 0 : r + 1 : 0 === r ? n.length - 1 : r - 1) + 1, !(i = n[r])) return [3, 4];
                                                s = this.j.ed.createRange();
                                                try {
                                                    s.setStart(i.startContainer, i.startOffset), s.setEnd(i.endContainer, i.endOffset), this.j.s.selectRange(s)
                                                } catch (t) {}
                                                return this.tryScrollToElement(i.startContainer), [4, this.updateCounters()];
                                            case 2:
                                                return o.sent(), [4, this.drawPromise];
                                            case 3:
                                                return o.sent(), this.j.e.fire("afterFindAndSelect"), [2, !0];
                                            case 4:
                                                return [2, !1]
                                        }
                                    }))
                                }))
                            }, e.prototype.findCurrentIndexInRanges = function (t, e) {
                                return t.findIndex((function (t) {
                                    return t.startContainer === e.startContainer && t.startOffset === e.startOffset && t.endContainer === e.startContainer && t.endOffset === e.endOffset
                                }))
                            }, e.prototype.isValidCache = function (t) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    return (0, o.YH)(this, (function (e) {
                                        switch (e.label) {
                                            case 0:
                                                return [4, t];
                                            case 1:
                                                return [2, e.sent().every((function (t) {
                                                    var e, n, o, r;
                                                    return t.startContainer.isConnected && t.startOffset <= (null !== (n = null === (e = t.startContainer.nodeValue) || void 0 === e ? void 0 : e.length) && void 0 !== n ? n : 0) && t.endContainer.isConnected && t.endOffset <= (null !== (r = null === (o = t.endContainer.nodeValue) || void 0 === o ? void 0 : o.length) && void 0 !== r ? r : 0)
                                                }))]
                                        }
                                    }))
                                }))
                            }, e.prototype.find = function (t, e) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var n, r, s = this;
                                    return (0, o.YH)(this, (function (o) {
                                        switch (o.label) {
                                            case 0:
                                                return e.length ? (r = n = this.cache[e]) ? [4, this.isValidCache(n)] : [3, 2] : [2, []];
                                            case 1:
                                                r = o.sent(), o.label = 2;
                                            case 2:
                                                return r ? [2, n] : (this.cache[e] = this.j.async.promise((function (n) {
                                                    var o = new c.QN(s.j.o.search.fuzzySearch);
                                                    t.on("break", (function () {
                                                        n([])
                                                    })).on("visit", (function (t) {
                                                        return i.J.isText(t) && o.add(t), !1
                                                    })).on("end", (function () {
                                                        var t;
                                                        n(null !== (t = o.ranges(e)) && void 0 !== t ? t : [])
                                                    })).setWork(s.j.editor)
                                                })), [2, this.cache[e]])
                                        }
                                    }))
                                }))
                            }, e.prototype.__drawSelectionRanges = function (t) {
                                var e = this,
                                    n = this.j,
                                    r = n.async,
                                    i = n.createInside,
                                    s = n.editor;
                                r.cancelAnimationFrame(this.wrapFrameRequest);
                                var a, u = (0, o.fX)([], (0, o.zs)(t), !1),
                                    l = 0;
                                return r.promise((function (t) {
                                    var n = function () {
                                        do {
                                            (a = u.shift()) && (0, c._B)(e.j, a, u, i, s), l += 1
                                        } while (a && 5 >= l);
                                        u.length ? e.wrapFrameRequest = r.requestAnimationFrame(n) : t()
                                    };
                                    n()
                                }))
                            }, e.prototype.onAfterGetValueFromEditor = function (t) {
                                t.value = (0, c.Tz)(t.value)
                            }, e.prototype.afterInit = function (t) {
                                var e = this;
                                if (t.o.useSearch) {
                                    var n = this;
                                    t.e.on("beforeSetMode.search", (function () {
                                        e.ui.close()
                                    })).on(this.ui, "afterClose", (function () {
                                        (0, c.IJ)(t), e.ui.currentIndex = 0, e.ui.count = 0, e.cache = {}, t.focus()
                                    })).on("click", (function () {
                                        e.ui.currentIndex = 0, (0, c.IJ)(t)
                                    })).on("change.search", (function () {
                                        e.cache = {}
                                    })).on("keydown.search mousedown.search", t.async.debounce((function () {
                                        e.ui.selInfo && (t.s.removeMarkers(), e.ui.selInfo = null), e.ui.isOpened && e.updateCounters()
                                    }), t.defaultTimeout)).on("searchNext.search searchPrevious.search", (function () {
                                        return e.ui.isOpened || e.ui.open(), n.findAndSelect(n.ui.query, "searchNext" === t.e.current).catch((function (t) {}))
                                    })).on("search.search", (function (t, o) {
                                        return void 0 === o && (o = !0), e.ui.currentIndex = 0, n.findAndSelect(t || "", o).catch((function (t) {}))
                                    })), t.registerCommand("search", {
                                        exec: function (t, e, o) {
                                            return void 0 === o && (o = !0), e && n.findAndSelect(e, o).catch((function (t) {})), !1
                                        }
                                    }).registerCommand("openSearchDialog", {
                                        exec: function (t, e) {
                                            return n.ui.open(e), !1
                                        },
                                        hotkeys: ["ctrl+f", "cmd+f"]
                                    }).registerCommand("openReplaceDialog", {
                                        exec: function (e, o, r) {
                                            return t.o.readonly || n.ui.open(o, r, !0), !1
                                        },
                                        hotkeys: ["ctrl+h", "cmd+h"]
                                    })
                                }
                            }, e.prototype.beforeDestruct = function (t) {
                                var e;
                                null === (e = (0, r.cached)(this, "ui")) || void 0 === e || e.destruct(), t.e.off(".search")
                            }, (0, o.Cg)([r.cache], e.prototype, "ui", null), (0, o.Cg)([(0, r.watch)("ui:needUpdateCounters")], e.prototype, "updateCounters", null), (0, o.Cg)([(0, r.watch)("ui:pressReplaceButton")], e.prototype, "onPressReplaceButton", null), (0, o.Cg)([r.autobind], e.prototype, "findQueryBounds", null), (0, o.Cg)([r.autobind], e.prototype, "findAndReplace", null), (0, o.Cg)([r.autobind], e.prototype, "findAndSelect", null), (0, o.Cg)([r.autobind], e.prototype, "find", null), (0, o.Cg)([(0, r.watch)(":afterGetValueFromEditor")], e.prototype, "onAfterGetValueFromEditor", null), e
                        }(u.k);
                    s.fg.add("search", f)
                },
                17352: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        ACCURACY: function () {
                            return W
                        },
                        APP_VERSION: function () {
                            return r
                        },
                        BASE_PATH: function () {
                            return dt
                        },
                        BASE_PATH_IS_MIN: function () {
                            return pt
                        },
                        BR: function () {
                            return Y
                        },
                        CLIPBOARD_ID: function () {
                            return gt
                        },
                        COMMAND_KEYS: function () {
                            return V
                        },
                        EMULATE_DBLCLICK_TIMEOUT: function () {
                            return nt
                        },
                        ES: function () {
                            return i
                        },
                        FAT_MODE: function () {
                            return l
                        },
                        HOMEPAGE: function () {
                            return f
                        },
                        INSEPARABLE_TAGS: function () {
                            return k
                        },
                        INSERT_AS_HTML: function () {
                            return ot
                        },
                        INSERT_AS_TEXT: function () {
                            return it
                        },
                        INSERT_CLEAR_HTML: function () {
                            return rt
                        },
                        INSERT_ONLY_TEXT: function () {
                            return st
                        },
                        INVISIBLE_SPACE: function () {
                            return h
                        },
                        INVISIBLE_SPACE_REG_EXP: function () {
                            return g
                        },
                        INVISIBLE_SPACE_REG_EXP_END: function () {
                            return m
                        },
                        INVISIBLE_SPACE_REG_EXP_START: function () {
                            return y
                        },
                        IS_BLOCK: function () {
                            return E
                        },
                        IS_ES_MODERN: function () {
                            return s
                        },
                        IS_ES_NEXT: function () {
                            return a
                        },
                        IS_IE: function () {
                            return $
                        },
                        IS_INLINE: function () {
                            return T
                        },
                        IS_MAC: function () {
                            return ut
                        },
                        IS_PROD: function () {
                            return u
                        },
                        IS_TEST: function () {
                            return c
                        },
                        KEY_ALIASES: function () {
                            return ct
                        },
                        KEY_ALT: function () {
                            return R
                        },
                        KEY_BACKSPACE: function () {
                            return P
                        },
                        KEY_DELETE: function () {
                            return J
                        },
                        KEY_DOWN: function () {
                            return D
                        },
                        KEY_ENTER: function () {
                            return M
                        },
                        KEY_ESC: function () {
                            return A
                        },
                        KEY_F3: function () {
                            return H
                        },
                        KEY_LEFT: function () {
                            return N
                        },
                        KEY_META: function () {
                            return L
                        },
                        KEY_RIGHT: function () {
                            return B
                        },
                        KEY_SPACE: function () {
                            return q
                        },
                        KEY_TAB: function () {
                            return z
                        },
                        KEY_UP: function () {
                            return O
                        },
                        LIST_TAGS: function () {
                            return I
                        },
                        MARKER_CLASS: function () {
                            return et
                        },
                        MODE_SOURCE: function () {
                            return G
                        },
                        MODE_SPLIT: function () {
                            return K
                        },
                        MODE_WYSIWYG: function () {
                            return X
                        },
                        NBSP_SPACE: function () {
                            return v
                        },
                        NEARBY: function () {
                            return F
                        },
                        NO_EMPTY_TAGS: function () {
                            return x
                        },
                        PARAGRAPH: function () {
                            return U
                        },
                        PASSIVE_EVENTS: function () {
                            return yt
                        },
                        SAFE_COUNT_CHANGE_CALL: function () {
                            return at
                        },
                        SET_TEST: function () {
                            return d
                        },
                        SOURCE_CONSUMER: function () {
                            return mt
                        },
                        SPACE_REG_EXP: function () {
                            return b
                        },
                        SPACE_REG_EXP_END: function () {
                            return C
                        },
                        SPACE_REG_EXP_START: function () {
                            return _
                        },
                        TEMP_ATTR: function () {
                            return ht
                        },
                        TEXT_HTML: function () {
                            return Q
                        },
                        TEXT_PLAIN: function () {
                            return Z
                        },
                        TEXT_RTF: function () {
                            return tt
                        },
                        TOKENS: function () {
                            return p
                        },
                        globalDocument: function () {
                            return S
                        },
                        globalWindow: function () {
                            return w
                        },
                        lang: function () {
                            return vt
                        }
                    });
                    var o = n(31635),
                        r = "4.6.2",
                        i = "es5",
                        s = !1,
                        a = !1,
                        u = !0,
                        c = !1,
                        l = !1,
                        f = "https://xdsoft.net/jodit/",
                        d = function () {
                            return c = !0
                        },
                        p = {},
                        h = "\ufeff",
                        v = "",
                        g = function () {
                            return /[\uFEFF]/g
                        },
                        m = function () {
                            return /[\uFEFF]+$/g
                        },
                        y = function () {
                            return /^[\uFEFF]+/g
                        },
                        b = function () {
                            return /[\s\n\t\r\uFEFF\u200b]+/g
                        },
                        _ = function () {
                            return /^[\s\n\t\r\uFEFF\u200b]+/g
                        },
                        C = function () {
                            return /[\s\n\t\r\uFEFF\u200b]+$/g
                        },
                        w = "undefined" != typeof window ? window : void 0,
                        S = "undefined" != typeof document ? document : void 0,
                        E = /^(ADDRESS|ARTICLE|ASIDE|BLOCKQUOTE|CANVAS|DD|DFN|DIV|DL|DT|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|H[1-6]|HEADER|HGROUP|HR|LI|MAIN|NAV|NOSCRIPT|OUTPUT|P|PRE|RUBY|SCRIPT|STYLE|OBJECT|OL|SECTION|IFRAME|JODIT|JODIT-MEDIA|UL|TR|TD|TH|TBODY|THEAD|TFOOT|TABLE|BODY|HTML|VIDEO)$/i,
                        T = /^(STRONG|SPAN|I|EM|B|SUP|SUB|A|U)$/i,
                        I = new Set(["ul", "ol"]),
                        j = ["img", "video", "svg", "iframe", "script", "input", "textarea", "link", "jodit", "jodit-media"],
                        k = new Set((0, o.fX)((0, o.fX)([], (0, o.zs)(j), !1), ["br", "hr"], !1)),
                        x = new Set(j),
                        L = "Meta",
                        P = "Backspace",
                        z = "Tab",
                        M = "Enter",
                        A = "Escape",
                        R = "Alt",
                        N = "ArrowLeft",
                        O = "ArrowUp",
                        B = "ArrowRight",
                        D = "ArrowDown",
                        q = "Space",
                        J = "Delete",
                        H = "F3",
                        F = 5,
                        W = 10,
                        V = [L, P, J, O, D, B, N, M, A, H, z],
                        Y = "br",
                        U = "p",
                        X = 1,
                        G = 2,
                        K = 3,
                        $ = "undefined" != typeof navigator && (-1 !== navigator.userAgent.indexOf("MSIE") || /rv:11.0/i.test(navigator.userAgent)),
                        Z = $ ? "text" : "text/plain",
                        Q = $ ? "html" : "text/html",
                        tt = $ ? "rtf" : "text/rtf",
                        et = "jodit-selection_marker",
                        nt = 300,
                        ot = "insert_as_html",
                        rt = "insert_clear_html",
                        it = "insert_as_text",
                        st = "insert_only_text",
                        at = 10,
                        ut = void 0 !== w && /Mac|iPod|iPhone|iPad/.test(w.navigator.platform),
                        ct = {
                            add: "+",
                            break: "pause",
                            cmd: "meta",
                            command: "meta",
                            ctl: "control",
                            ctrl: "control",
                            del: "delete",
                            down: "arrowdown",
                            esc: "escape",
                            ins: "insert",
                            left: "arrowleft",
                            mod: ut ? "meta" : "control",
                            opt: "alt",
                            option: "alt",
                            return: "enter",
                            right: "arrowright",
                            space: "space",
                            spacebar: "space",
                            up: "arrowup",
                            win: "meta",
                            windows: "meta"
                        },
                        lt = function (t) {
                            var e = t.split("/"),
                                n = !0;
                            return /\.js/.test(e[e.length - 1]) ? {
                                basePath: e.slice(0, e.length - 1).join("/") + "/",
                                isMin: n
                            } : {
                                basePath: t,
                                isMin: n
                            }
                        },
                        ft = function () {
                            if ("undefined" == typeof document) return {
                                basePath: "",
                                isMin: Boolean(!0)
                            };
                            var t = S.currentScript;
                            if (t) return lt(t.src);
                            var e = S.querySelectorAll("script[src]");
                            return lt(e && e.length ? e[e.length - 1].src : w.location.href)
                        }(),
                        dt = ft.basePath,
                        pt = ft.isMin,
                        ht = "data-jodit-temp",
                        vt = {},
                        gt = "clipboard",
                        mt = "source-consumer",
                        yt = new Set(["touchstart", "touchend", "scroll", "mousewheel", "mousemove", "touchmove"])
                },
                17527: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        e: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(98253),
                        i = function (t, e) {
                            return void 0 === e && (e = "en"), "auto" !== t && (0, r.K)(t) ? t : o.globalDocument.documentElement && o.globalDocument.documentElement.lang ? o.globalDocument.documentElement.lang : navigator.language ? navigator.language.substring(0, 2) : e
                        }
                },
                17800: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        I: function () {
                            return r
                        },
                        O: function () {
                            return i
                        }
                    });
                    var o, r = function () {
                            return void 0 === o && (o = function () {
                                var t = "___Jodit___" + Math.random().toString();
                                try {
                                    localStorage.setItem(t, "1");
                                    var e = "1" === localStorage.getItem(t);
                                    return localStorage.removeItem(t), e
                                } catch (t) {}
                                return !1
                            }()), o
                        },
                        i = function () {
                            function t(t) {
                                this.rootKey = t
                            }
                            return t.prototype.set = function (t, e) {
                                try {
                                    var n = localStorage.getItem(this.rootKey),
                                        o = n ? JSON.parse(n) : {};
                                    o[t] = e, localStorage.setItem(this.rootKey, JSON.stringify(o))
                                } catch (t) {}
                                return this
                            }, t.prototype.delete = function (t) {
                                try {
                                    localStorage.removeItem(this.rootKey)
                                } catch (t) {}
                                return this
                            }, t.prototype.get = function (t) {
                                try {
                                    var e = localStorage.getItem(this.rootKey),
                                        n = e ? JSON.parse(e) : {};
                                    return void 0 !== n[t] ? n[t] : void 0
                                } catch (t) {}
                            }, t.prototype.exists = function (t) {
                                return null != this.get(t)
                            }, t.prototype.clear = function () {
                                try {
                                    localStorage.removeItem(this.rootKey)
                                } catch (t) {}
                                return this
                            }, t
                        }()
                },
                17880: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        P: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(12461),
                        i = n(26150),
                        s = n(38322),
                        a = n(9645);

                    function u(t, e, n) {
                        return (0, o.sH)(this, void 0, Promise, (function () {
                            var u, c, l, f, d, p;
                            return (0, o.YH)(this, (function (o) {
                                switch (o.label) {
                                    case 0:
                                        return [4, t.decode()];
                                    case 1:
                                        return o.sent(), u = (0, s.A)(t, "width", !0) || (0, i.C)(t, "width") || !1, c = (0, s.A)(t, "height", !0) || (0, i.C)(t, "height") || !1, e.imageWidth = !1 !== u ? (0, a.G)(u) : t.offsetWidth || t.naturalWidth, e.imageHeight = (0, r.k)(e.imageWidth) ? !1 !== c ? (0, a.G)(c) : t.offsetHeight || t.naturalHeight : c || "", l = e.imageWidth, f = e.imageHeight, d = parseFloat(l.toString()), (0, r.k)(l) && (0, r.k)(f) ? !1 === c ? (e.imageHeight = Math.round(d / n.ratio), n.sizeIsLocked = !0, [2]) : (p = parseFloat(f.toString()), n.sizeIsLocked = 1 > Math.abs(d - p * n.ratio), [2]) : (n.sizeIsLocked = !1, [2])
                                }
                            }))
                        }))
                    }
                },
                18043: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        c: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(65147),
                        i = n(9823),
                        s = n(75889),
                        a = n(97324),
                        u = n(9979),
                        c = n(31859),
                        l = n(53804);

                    function f() {
                        var t = this,
                            e = this.state,
                            n = this.dataProvider,
                            f = this;
                        f.e.on("view.filebrowser", (function (t) {
                            t !== e.view && (e.view = t)
                        })).on("sort.filebrowser", (function (t) {
                            t !== e.sortBy && (e.sortBy = t, (0, u.f)(f))
                        })).on("filter.filebrowser", (function (t) {
                            t !== e.filterWord && (e.filterWord = t, (0, u.f)(f))
                        })).on("openFolder.filebrowser", (function (t) {
                            var e;
                            e = ".." === t.name ? t.path.split("/").filter((function (t) {
                                return t.length
                            })).slice(0, -1).join("/") : (0, r.normalizePath)(t.path, t.name), f.state.currentPath = e, f.state.currentSource = "." === t.name ? s.o : t.source
                        })).on("removeFolder.filebrowser", (function (t) {
                            f.confirm("Are you sure?", "Delete", (function (e) {
                                e && n.folderRemove(t.path, t.name, t.source).then((function (t) {
                                    return f.status(t, !0), (0, c.r)(f)
                                })).catch(f.status)
                            }))
                        })).on("renameFolder.filebrowser", (function (t) {
                            f.prompt("Enter new name", "Rename", (function (e) {
                                if (!(0, i.uV)(e)) return f.status(f.i18n("Enter new name")), !1;
                                n.folderRename(t.path, t.name, e, t.source).then((function (t) {
                                    return f.state.activeElements = [], f.status(t, !0), (0, c.r)(f)
                                })).catch(f.status)
                            }), "type name", t.name)
                        })).on("addFolder.filebrowser", (function (t) {
                            f.prompt("Enter Directory name", "Create directory", (function (e) {
                                n.createFolder(e, t.path, t.source).then((function () {
                                    return (0, c.r)(f)
                                })).catch(f.status)
                            }), "type name")
                        })).on("fileRemove.filebrowser", (function () {
                            f.state.activeElements.length && f.confirm("Are you sure?", "", (function (t) {
                                if (t) {
                                    var e = [];
                                    f.state.activeElements.forEach((function (t) {
                                        e.push((0, a.W)(f, t.file || t.name || "", t.sourceName))
                                    })), f.state.activeElements = [], Promise.all(e).then((function () {
                                        return (0, c.r)(f).catch(f.status)
                                    }), f.status)
                                }
                            }))
                        })).on("edit.filebrowser", (function () {
                            if (1 === f.state.activeElements.length) {
                                var e = (0, o.zs)(t.state.activeElements, 1)[0];
                                l.B.call(f, e.fileURL, e.file || "", e.path, e.sourceName)
                            }
                        })).on("fileRename.filebrowser", (function (t, e, o) {
                            1 === f.state.activeElements.length && f.prompt("Enter new name", "Rename", (function (r) {
                                if (!(0, i.uV)(r)) return f.status(f.i18n("Enter new name")), !1;
                                n.fileRename(e, t, r, o).then((function (t) {
                                    f.state.activeElements = [], f.status(t, !0), (0, u.f)(f)
                                })).catch(f.status)
                            }), "type name", t)
                        })).on("update.filebrowser", (function () {
                            (0, c.r)(t).then(t.status, t.status)
                        }))
                    }
                },
                18605: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1025 1369v167h-248l-159-252-24-42q-8-9-11-21h-3l-9 21q-10 20-25 44l-155 250h-258v-167h128l197-291-185-272h-137v-168h276l139 228q2 4 23 42 8 9 11 21h3q3-9 11-21l25-42 140-228h257v168h-125l-184 267 204 296h109zm637-679v206h-514l-3-27q-4-28-4-46 0-64 26-117t65-86.5 84-65 84-54.5 65-54 26-64q0-38-29.5-62.5t-70.5-24.5q-51 0-97 39-14 11-36 38l-105-92q26-37 63-66 83-65 188-65 110 0 178 59.5t68 158.5q0 56-24.5 103t-62 76.5-81.5 58.5-82 50.5-65.5 51.5-30.5 63h232v-80h126z"/> </svg>'
                },
                19085: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(55186),
                        s = n(56298),
                        a = n(65147),
                        u = n(29866),
                        c = n(35265),
                        l = (n(24654), n(31970)),
                        f = n(80778),
                        d = n(33733),
                        p = n(5549),
                        h = n(30393),
                        v = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.state = {
                                    image: new Image,
                                    sourceImage: new Image,
                                    get ratio() {
                                        var t = this.image;
                                        return t.naturalWidth / t.naturalHeight || 1
                                    },
                                    sizeIsLocked: !0,
                                    marginIsLocked: !0,
                                    values: {
                                        style: "",
                                        imageSrc: "",
                                        borderRadius: 0,
                                        imageTitle: "",
                                        imageAlt: "",
                                        imageLink: "",
                                        imageLinkOpenInNewTab: !1,
                                        imageWidth: 0,
                                        imageHeight: 0,
                                        marginTop: 0,
                                        marginRight: 0,
                                        marginBottom: 0,
                                        marginLeft: 0,
                                        classes: "",
                                        id: "",
                                        align: ""
                                    }
                                }, e.activeTabState = {
                                    activeTab: "Image"
                                }, e
                            }
                            return (0, o.C6)(e, t), Object.defineProperty(e.prototype, "form", {
                                get: function () {
                                    var t = this;
                                    return new l.l(this.j, this.state, this.activeTabState, {
                                        openImageEditor: function () {
                                            return (0, f.v)(t.j, t.state)
                                        },
                                        openImagePopup: function (e) {
                                            return (0, d.q)(t.j, t.dialog, t.state, e)
                                        }
                                    })
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "dialog", {
                                get: function () {
                                    var t = this,
                                        e = this.j,
                                        n = e.dlg({
                                            minWidth: Math.min(400, screen.width),
                                            minHeight: 590,
                                            buttons: ["fullsize", "dialog.close"]
                                        }),
                                        o = this.__buttons;
                                    return o.check.onAction((function () {
                                        (0, h.j)(e, t.state, t.state.sourceImage), e.synchronizeValues(), n.close()
                                    })), o.remove.onAction((function () {
                                        e.s.removeNode(t.state.sourceImage), n.close()
                                    })), o.cancel.onAction((function () {
                                        n.close()
                                    })), n.setHeader(e.i18n("Image properties")), n.setContent(this.form), n.setFooter([
                                        [o.cancel, o.remove], o.check
                                    ]), e.e.on(n, "afterClose", (function () {
                                        t.state.image.parentNode && e.o.image.selectImageAfterClose && e.s.select(t.state.sourceImage)
                                    })), n.setSize(e.o.image.dialogWidth), (0, a.markOwner)(e, n.container), n
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "__buttons", {
                                get: function () {
                                    var t = this.j;
                                    return {
                                        check: (0, c.$n)(t, "ok", "Apply", "primary"),
                                        remove: (0, c.$n)(t, "bin", "Delete"),
                                        cancel: (0, c.$n)(t, "cancel", "Cancel")
                                    }
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.open = function () {
                                var t = this;
                                return this.activeTabState.activeTab = "Image", this.__lock(), this.dialog.open().setModal(!0).setPosition(), this.async.promise((function (e, n) {
                                    return (0, p.U)(t.j, t.state).then(e, n)
                                })).catch((function (e) {
                                    (0, a.isAbortError)(e) || t.dialog.message.error(e.message)
                                })).finally((function () {
                                    return t.__unlock()
                                })), !1
                            }, e.prototype.__lock = function () {
                                this.dialog.lock(), this.form.setMod("lock", !0), Object.values(this.__buttons).forEach((function (t) {
                                    return t.state.disabled = !0
                                }))
                            }, e.prototype.__unlock = function () {
                                this.dialog.unlock(), this.form.setMod("lock", !1), Object.values(this.__buttons).forEach((function (t) {
                                    return t.state.disabled = !1
                                }))
                            }, e.prototype.afterInit = function (t) {
                                var e = this,
                                    n = this;
                                t.e.on("afterConstructor changePlace", (function () {
                                    t.e.off(t.editor, ".imageproperties").on(t.editor, "dblclick.imageproperties", (function (o) {
                                        var r = o.target;
                                        if (i.J.isTag(r, "img"))
                                            if (t.o.image.openOnDblClick) {
                                                if (!1 === e.j.e.fire("openOnDblClick", r)) return;
                                                n.state.sourceImage = r, n.state.image = r.cloneNode(!0), t.o.readonly || (o.stopImmediatePropagation(), o.preventDefault(), n.open())
                                            } else o.stopImmediatePropagation(), t.s.select(r)
                                    }))
                                })).on("openImageProperties.imageproperties", (function (t) {
                                    n.state.sourceImage = t, e.state.image = t.cloneNode(!0), e.open()
                                }))
                            }, e.prototype.onStateValuesImageSrcChange = function () {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var t, e, n, r, i;
                                    return (0, o.YH)(this, (function (o) {
                                        switch (o.label) {
                                            case 0:
                                                if (n = (t = this.state).values, !(e = t.image).src) return [2];
                                                o.label = 1;
                                            case 1:
                                                return o.trys.push([1, 3, 4, 5]), this.__lock(), [4, e.decode()];
                                            case 2:
                                                return o.sent(), this.state.sizeIsLocked && (0, a.isNumeric)(n.imageWidth) && (r = parseFloat(n.imageWidth.toString()), n.imageHeight = Math.round(r / this.state.ratio)), this.j.e.fire("updateImageProperties.imageproperties", e), [3, 5];
                                            case 3:
                                                return i = o.sent(), this.j.alert(i.message), [3, 5];
                                            case 4:
                                                return this.__unlock(), [7];
                                            case 5:
                                                return [2]
                                        }
                                    }))
                                }))
                            }, e.prototype.beforeDestruct = function (t) {
                                var e, n, o;
                                Object.values(null !== (e = (0, r.cached)(this, "__buttons")) && void 0 !== e ? e : {}).forEach((function (t) {
                                    return t.destruct()
                                })), null === (n = (0, r.cached)(this, "dialog")) || void 0 === n || n.destruct(), null === (o = (0, r.cached)(this, "form")) || void 0 === o || o.destruct(), t.e.off(t.editor, ".imageproperties").off(".imageproperties")
                            }, (0, o.Cg)([r.cache], e.prototype, "form", null), (0, o.Cg)([r.cache], e.prototype, "dialog", null), (0, o.Cg)([r.cache], e.prototype, "__buttons", null), (0, o.Cg)([(0, r.watch)("state.image")], e.prototype, "onStateValuesImageSrcChange", null), e
                        }(u.k);
                    s.fg.add("imageProperties", v)
                },
                19627: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        V: function () {
                            return o.V
                        }
                    });
                    var o = n(140)
                },
                19633: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        K: function () {
                            return a
                        }
                    });
                    var o = n(71842),
                        r = n(65147),
                        i = n(53048),
                        s = n(54522);
                    i.In.set("palette", n.n(s)());
                    var a = function (t, e, n) {
                        var s = "jodit-color-picker",
                            a = (0, r.normalizeColor)(n),
                            u = t.c.div(s),
                            c = t.o.textIcons ? "<span>".concat(t.i18n("palette"), "</span>") : i.In.get("palette"),
                            l = function (t) {
                                var e = [];
                                return (0, r.isPlainObject)(t) ? Object.keys(t).forEach((function (n) {
                                    e.push('<div class="'.concat(s, "__group ").concat(s, "__group-").concat(n, '">')), e.push(l(t[n])), e.push("</div>")
                                })) : (0, r.isArray)(t) && t.forEach((function (t) {
                                    e.push("<span class='".concat(s, "__color-item ").concat(a === t ? s + "__color-item_active_true" : "", "' title=\"").concat(t, '" style="background-color:').concat(t, '" data-color="').concat(t, '"></span>'))
                                })), e.join("")
                            };
                        u.appendChild(t.c.fromHTML('<div class="'.concat(s, '__groups">').concat(l(t.o.colors), "</div>"))), u.appendChild(t.c.fromHTML('<div data-ref="extra" class="'.concat(s, '__extra"></div>')));
                        var f = (0, r.refs)(u).extra;
                        return t.o.showBrowserColorPicker && (0, r.hasBrowserColorPicker)() && (f.appendChild(t.c.fromHTML('<div class="'.concat(s, '__native">').concat(c, '<input type="color" value="#ffffff"/></div>'))), t.e.on(u, "change", (function (t) {
                            t.stopPropagation();
                            var n = t.target;
                            if (n && n.tagName && o.J.isTag(n, "input")) {
                                var i = n.value || "";
                                (0, r.isFunction)(e) && e(i), t.preventDefault()
                            }
                        }))), t.e.on(u, "mousedown touchend", (function (n) {
                            n.stopPropagation(), n.preventDefault();
                            var i = n.target;
                            if (i && i.tagName && !o.J.isTag(i, "svg") && !o.J.isTag(i, "path") || !i.parentNode || (i = o.J.closest(i.parentNode, "span", t.editor)), o.J.isTag(i, "span") && i.classList.contains(s + "__color-item")) {
                                var a = (0, r.attr)(i, "-color") || "";
                                e && (0, r.isFunction)(e) && e(a)
                            }
                        })), t.e.fire("afterGenerateColorPicker", u, f, e, a), u
                    }
                },
                20222: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Rc: function () {
                            return r.R
                        },
                        ZW: function () {
                            return i.Z
                        },
                        h2: function () {
                            return o.h
                        },
                        rV: function () {
                            return o.r
                        }
                    });
                    var o = n(21567),
                        r = n(30495),
                        i = n(34899)
                },
                20384: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        y: function () {
                            return a
                        }
                    });
                    var o = n(55186),
                        r = n(71274),
                        i = n(59101),
                        s = n(84976);

                    function a(t, e, n) {
                        var o = n.s.createRange(),
                            i = (0, r.r)(e.previousSibling) ? e.previousSibling : e;
                        o.setStartBefore(t), o.setEndBefore(i), u(t, o, !0);
                        var s = (0, r.r)(e.nextSibling) ? e.nextSibling : e;
                        o.setStartAfter(s), o.setEndAfter(t), u(t, o, !1)
                    }

                    function u(t, e, n) {
                        var r = e.extractContents();
                        r.textContent && (0, i.Bq)(r.textContent).length || !r.firstChild || o.J.unwrap(r.firstChild), t.parentNode && (0, s.T1)(n ? o.J.before : o.J.after, t, r)
                    }
                },
                20646: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        h: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(97369),
                        i = n(30526);

                    function s(t) {
                        var e = t.s,
                            n = t.editor,
                            s = t.createInside,
                            a = e.range,
                            u = a.cloneRange(),
                            c = a.cloneRange(),
                            l = s.fake(),
                            f = s.fake();
                        u.collapse(!0), c.collapse(!1), o.J.safeInsertNode(u, l), o.J.safeInsertNode(c, f), a.setStartBefore(l), a.collapse(!0), e.selectRange(a), (0, i.w)(t, l), a.setEndAfter(f), a.collapse(!1), e.selectRange(a), (0, i.w)(t, f);
                        var d = [];
                        o.J.between(l, f, (function (t) {
                            (0, i.D)(t) && !o.J.isTag(t, "a") && d.push(t), o.J.isElement(t) && (0, r.attr)(t, "style") && (0, r.attr)(t, "style", null)
                        })), d.forEach((function (t) {
                            return o.J.unwrap(t)
                        }));
                        var p = function (t, e) {
                            if (!o.J.findNotEmptySibling(t, e)) {
                                var i = t.parentNode;
                                if (i && i !== n && (0, r.attr)(i, "style")) return (0, r.attr)(i, "style", null), p(i, e), !0
                            }
                        };
                        p(l, !0) && p(f, !1), a.setStartAfter(l), a.setEndBefore(f), e.selectRange(a), o.J.safeRemove(l), o.J.safeRemove(f)
                    }
                },
                20703: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $6: function () {
                            return i.$6
                        },
                        F0: function () {
                            return i.F0
                        },
                        XV: function () {
                            return r.X
                        },
                        Yh: function () {
                            return o.Y
                        },
                        cY: function () {
                            return i.cY
                        },
                        nE: function () {
                            return i.nE
                        },
                        tS: function () {
                            return i.tS
                        }
                    });
                    var o = n(68752),
                        r = n(28709),
                        i = n(47165)
                },
                20784: function (t) {
                    t.exports = '<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"> <path stroke="null" d="m42.276011,26.302547c0.098397,-0.76605 0.172194,-1.54407 0.172194,-2.33406s-0.073797,-1.56801 -0.172194,-2.33406l5.202718,-3.961917c0.467384,-0.359086 0.602679,-1.005441 0.29519,-1.532101l-4.919828,-8.29489c-0.307489,-0.51469 -0.947067,-0.730142 -1.500548,-0.51469l-6.125186,2.405877c-1.266856,-0.945594 -2.656707,-1.747553 -4.157255,-2.357999l-0.922468,-6.343855c-0.110696,-0.562568 -0.614979,-1.005441 -1.229957,-1.005441l-9.839656,0c-0.614979,0 -1.119261,0.442873 -1.217657,1.005441l-0.922468,6.343855c-1.500548,0.610446 -2.890399,1.400436 -4.157255,2.357999l-6.125186,-2.405877c-0.553481,-0.203482 -1.193058,0 -1.500548,0.51469l-4.919828,8.29489c-0.307489,0.51469 -0.172194,1.161045 0.29519,1.532101l5.190419,3.961917c-0.098397,0.76605 -0.172194,1.54407 -0.172194,2.33406s0.073797,1.56801 0.172194,2.33406l-5.190419,3.961917c-0.467384,0.359086 -0.602679,1.005441 -0.29519,1.532101l4.919828,8.29489c0.307489,0.51469 0.947067,0.730142 1.500548,0.51469l6.125186,-2.405877c1.266856,0.945594 2.656707,1.747553 4.157255,2.357999l0.922468,6.343855c0.098397,0.562568 0.602679,1.005441 1.217657,1.005441l9.839656,0c0.614979,0 1.119261,-0.442873 1.217657,-1.005441l0.922468,-6.343855c1.500548,-0.610446 2.890399,-1.400436 4.157255,-2.357999l6.125186,2.405877c0.553481,0.203482 1.193058,0 1.500548,-0.51469l4.919828,-8.29489c0.307489,-0.51469 0.172194,-1.161045 -0.29519,-1.532101l-5.190419,-3.961917zm-18.277162,6.044617c-4.759934,0 -8.609699,-3.746465 -8.609699,-8.378677s3.849766,-8.378677 8.609699,-8.378677s8.609699,3.746465 8.609699,8.378677s-3.849766,8.378677 -8.609699,8.378677z"/> </svg>'
                },
                20797: function (t, e, n) {
                    "use strict";
                    var o = n(72197),
                        r = n(931),
                        i = n(36115),
                        s = n(40037),
                        a = n.n(s),
                        u = n(83207),
                        c = n.n(u),
                        l = function (t, e, n) {
                            var r, i = n.control,
                                s = "button".concat(i.command),
                                a = null !== (r = i.args && i.args[0]) && void 0 !== r ? r : (0, o.m)(t, s);
                            (0, o.m)(t, s, a), t.execCommand(i.command, !1, "default" === a ? null : a)
                        };
                    r.I.set("ol", a()).set("ul", c()), i.T.prototype.controls.ul = {
                        command: "insertUnorderedList",
                        tags: ["ul"],
                        tooltip: "Insert Unordered List",
                        list: {
                            default: "Default",
                            circle: "Circle",
                            disc: "Dot",
                            square: "Quadrate"
                        },
                        exec: l
                    }, i.T.prototype.controls.ol = {
                        command: "insertOrderedList",
                        tags: ["ol"],
                        tooltip: "Insert Ordered List",
                        list: {
                            default: "Default",
                            "lower-alpha": "Lower Alpha",
                            "lower-greek": "Lower Greek",
                            "lower-roman": "Lower Roman",
                            "upper-alpha": "Upper Alpha",
                            "upper-roman": "Upper Roman"
                        },
                        exec: l
                    }
                },
                21329: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        B: function () {
                            return i
                        }
                    });
                    var o = n(35265),
                        r = n(20703),
                        i = function (t) {
                            var e = t.o.link,
                                n = e.openInNewTabCheckbox,
                                i = e.noFollowCheckbox,
                                s = e.modeClassName,
                                a = e.selectSizeClassName,
                                u = e.selectMultipleClassName,
                                c = e.selectOptionsClassName;
                            return new r.XV(t, [new r.Yh(t, [new r.tS(t, {
                                name: "url",
                                type: "text",
                                ref: "url_input",
                                label: "URL",
                                placeholder: "http://",
                                required: !0
                            })]), new r.Yh(t, [new r.tS(t, {
                                name: "content",
                                ref: "content_input",
                                label: "Text"
                            })], {
                                ref: "content_input_box"
                            }), s ? new r.Yh(t, ["input" === s ? new r.tS(t, {
                                name: "className",
                                ref: "className_input",
                                label: "Class name"
                            }) : "select" === s ? new r.$6(t, {
                                name: "className",
                                ref: "className_select",
                                label: "Class name",
                                size: a,
                                multiple: u,
                                options: c
                            }) : null]) : null, n ? new r.cY(t, {
                                name: "target",
                                ref: "target_checkbox",
                                label: "Open in new tab"
                            }) : null, i ? new r.cY(t, {
                                name: "nofollow",
                                ref: "nofollow_checkbox",
                                label: "No follow"
                            }) : null, new r.Yh(t, [new o.lD(t, {
                                name: "unlink",
                                variant: "default",
                                text: "Unlink"
                            }), new o.lD(t, {
                                name: "insert",
                                type: "submit",
                                variant: "primary",
                                text: "Insert"
                            })], {
                                align: "full"
                            })])
                        }
                },
                21567: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return void 0 === t && (t = "Aborted"), new DOMException(t, "AbortError")
                    }
                    n.d(e, {
                        h: function () {
                            return o
                        },
                        r: function () {
                            return r
                        }
                    });
                    var r = n(99951).z
                },
                21811: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return -1 !== t.search(/<meta.*?Microsoft Excel\s[\d].*?>/) || -1 !== t.search(/<meta.*?Microsoft Word\s[\d].*?>/) || -1 !== t.search(/style="[^"]*mso-/) && -1 !== t.search(/<font/)
                    }
                    n.d(e, {
                        C: function () {
                            return o
                        }
                    })
                },
                21917: function (t) {
                    t.exports = '<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"> <path clip-rule="evenodd" d="M306.39,154.09c19.628,4.543,35.244,21.259,39.787,39.523 c1.551,8.54,8.998,14.989,17.904,14.989c9.991,0,18.168-8.175,18.168-18.17c0-13.083-10.991-32.98-25.985-47.881 c-14.719-14.537-32.252-24.802-46.695-24.802c-9.991,0-18.172,8.45-18.172,18.446C291.396,145.094,297.847,152.546,306.39,154.09z M56.629,392.312c-14.09,14.08-14.09,36.979,0,51.059c14.08,14.092,36.981,14.092,50.965,0l104.392-104.303 c24.347,15.181,53.062,23.991,83.953,23.991c87.857,0,158.995-71.142,158.995-158.999c0-87.854-71.138-158.995-158.995-158.995 c-87.856,0-158.995,71.141-158.995,158.995c0,30.802,8.819,59.606,23.992,83.953L56.629,392.312z M182.371,204.06 c0-62.687,50.875-113.568,113.568-113.568s113.569,50.881,113.569,113.568c0,62.694-50.876,113.569-113.569,113.569 S182.371,266.754,182.371,204.06z" fill-rule="evenodd"/> </svg>'
                },
                22664: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        autobind: function () {
                            return o.d
                        },
                        cache: function () {
                            return r.PP
                        },
                        cacheHTML: function () {
                            return r.OK
                        },
                        cached: function () {
                            return r.PO
                        },
                        component: function () {
                            return i.s
                        },
                        debounce: function () {
                            return s.s
                        },
                        derive: function () {
                            return a.C
                        },
                        getPropertyDescriptor: function () {
                            return p.N
                        },
                        hook: function () {
                            return u.A
                        },
                        idle: function () {
                            return c.N
                        },
                        nonenumerable: function () {
                            return l.m
                        },
                        persistent: function () {
                            return f.y
                        },
                        throttle: function () {
                            return s.n
                        },
                        wait: function () {
                            return d.u
                        },
                        watch: function () {
                            return p.w
                        }
                    });
                    var o = n(11961),
                        r = n(87875),
                        i = n(24767),
                        s = n(37075),
                        a = n(1963),
                        u = n(71151),
                        c = n(86285),
                        l = n(48791),
                        f = n(33087),
                        d = n(48647),
                        p = n(66927)
                },
                23132: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        p: function () {
                            return s
                        }
                    });
                    var o = n(69052),
                        r = n(92032),
                        i = n(58006);

                    function s(t, e, n) {
                        var s = this instanceof i.l ? this : new i.l({
                                closeOnClickOverlay: !0
                            }),
                            a = s.c.fromHTML('<form class="jodit-dialog_prompt"></form>'),
                            u = s.c.element("label");
                        (0, o.T)(e) && (n = e, e = void 0), u.appendChild(s.c.fromHTML(t)), a.appendChild(u);
                        var c = function (t) {
                                return function () {
                                    n && !1 === n(t) || s.close()
                                }
                            },
                            l = (0, r.$n)(s, "cancel", "Cancel"),
                            f = (0, r.$n)(s, "ok", "Yes");
                        return l.onAction(c(!1)), f.onAction(c(!0)), s.e.on(a, "submit", (function () {
                            return c(!0)(), !1
                        })), s.setFooter([f, l]), s.open(a, e || "&nbsp;", !0, !0), f.focus(), s
                    }
                },
                23602: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M960 896q26 0 45 19t19 45-19 45-45 19-45-19-19-45 19-45 45-19zm300 64l507 398q28 20 25 56-5 35-35 51l-128 64q-13 7-29 7-17 0-31-8l-690-387-110 66q-8 4-12 5 14 49 10 97-7 77-56 147.5t-132 123.5q-132 84-277 84-136 0-222-78-90-84-79-207 7-76 56-147t131-124q132-84 278-84 83 0 151 31 9-13 22-22l122-73-122-73q-13-9-22-22-68 31-151 31-146 0-278-84-82-53-131-124t-56-147q-5-59 15.5-113t63.5-93q85-79 222-79 145 0 277 84 83 52 132 123t56 148q4 48-10 97 4 1 12 5l110 66 690-387q14-8 31-8 16 0 29 7l128 64q30 16 35 51 3 36-25 56zm-681-260q46-42 21-108t-106-117q-92-59-192-59-74 0-113 36-46 42-21 108t106 117q92 59 192 59 74 0 113-36zm-85 745q81-51 106-117t-21-108q-39-36-113-36-100 0-192 59-81 51-106 117t21 108q39 36 113 36 100 0 192-59zm178-613l96 58v-11q0-36 33-56l14-8-79-47-26 26q-3 3-10 11t-12 12q-2 2-4 3.5t-3 2.5zm224 224l96 32 736-576-128-64-768 431v113l-160 96 9 8q2 2 7 6 4 4 11 12t11 12l26 26zm704 416l128-64-520-408-177 138q-2 3-13 7z"/> </svg>'
                },
                24103: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.mediaFakeTag = "jodit-media", o.T.prototype.mediaInFakeBlock = !0, o.T.prototype.mediaBlocks = ["video", "audio"]
                },
                24593: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(87875),
                        i = n(56298),
                        s = n(65147),
                        a = (n(51329), function () {
                            function t() {
                                this.buttons = [{
                                    name: "cut",
                                    group: "clipboard"
                                }, {
                                    name: "copy",
                                    group: "clipboard"
                                }, {
                                    name: "paste",
                                    group: "clipboard"
                                }, {
                                    name: "selectall",
                                    group: "clipboard"
                                }]
                            }
                            return t.prototype.init = function (t) {
                                var e;
                                null === (e = this.buttons) || void 0 === e || e.forEach((function (e) {
                                    return t.registerButton(e)
                                })), t.e.off("copy.".concat(o.CLIPBOARD_ID, " cut.").concat(o.CLIPBOARD_ID)).on("copy.".concat(o.CLIPBOARD_ID, " cut.").concat(o.CLIPBOARD_ID), (function (e) {
                                    var n, r = t.s.html,
                                        i = (0, s.getDataTransfer)(e) || (0, s.getDataTransfer)(t.ew) || (0, s.getDataTransfer)(e.originalEvent);
                                    i && (i.setData(o.TEXT_PLAIN, (0, s.stripTags)(r)), i.setData(o.TEXT_HTML, r)), t.buffer.set(o.CLIPBOARD_ID, r), t.e.fire("pasteStack", {
                                        html: r,
                                        action: t.o.defaultActionOnPaste || o.INSERT_AS_HTML
                                    }), "cut" === e.type && (t.s.remove(), t.s.focus()), e.preventDefault(), null === (n = null == t ? void 0 : t.events) || void 0 === n || n.fire("afterCopy", r)
                                }))
                            }, t.prototype.destruct = function (t) {
                                var e, n;
                                null === (e = (0, r.PO)(t, "buffer")) || void 0 === e || e.set(o.CLIPBOARD_ID, ""), null === (n = null == t ? void 0 : t.events) || void 0 === n || n.off("." + o.CLIPBOARD_ID)
                            }, t
                        }());
                    i.fg.add("clipboard", a)
                },
                24654: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.image = {
                        dialogWidth: 600,
                        openOnDblClick: !0,
                        editSrc: !0,
                        useImageEditor: !0,
                        editTitle: !0,
                        editAlt: !0,
                        editLink: !0,
                        editSize: !0,
                        editBorderRadius: !0,
                        editMargins: !0,
                        editClass: !0,
                        availableClasses: [],
                        editStyle: !0,
                        editId: !0,
                        editAlign: !0,
                        showPreview: !0,
                        selectImageAfterClose: !0
                    }
                },
                24767: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        s: function () {
                            return r
                        }
                    });
                    var o = n(31635);

                    function r(t) {
                        var e = function (t) {
                            function e() {
                                for (var n = [], r = 0; arguments.length > r; r++) n[r] = arguments[r];
                                var i = t.apply(this, (0, o.fX)([], (0, o.zs)(n), !1)) || this;
                                return i.constructor === e && (i instanceof e || Object.setPrototypeOf(i, e.prototype), i.setStatus("ready")), i
                            }
                            return (0, o.C6)(e, t), e
                        }(t);
                        return e
                    }
                },
                24772: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 24 24"> <path stroke-width="0" d="M22,20.6L3.4,2H8V0H0v8h2V3.4L20.6,22H16v2h8v-8h-2V20.6z M16,0v2h4.7l-6.3,6.3l1.4,1.4L22,3.5V8h2V0H16z M8.3,14.3L2,20.6V16H0v8h8v-2H3.5l6.3-6.3L8.3,14.3z"/> </svg>'
                },
                24834: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        w: function () {
                            return a
                        }
                    });
                    var o = n(83260),
                        r = n(17800),
                        i = n(2788),
                        s = "Jodit_",
                        a = function () {
                            function t(t, e) {
                                this.provider = t, this.prefix = s, e && (this.prefix += e)
                            }
                            return t.prototype.set = function (t, e) {
                                return this.provider.set((0, o.x)(this.prefix + t), e), this
                            }, t.prototype.delete = function (t) {
                                return this.provider.delete((0, o.x)(this.prefix + t)), this
                            }, t.prototype.get = function (t) {
                                return this.provider.get((0, o.x)(this.prefix + t))
                            }, t.prototype.exists = function (t) {
                                return this.provider.exists((0, o.x)(this.prefix + t))
                            }, t.prototype.clear = function () {
                                return this.provider.clear(), this
                            }, t.makeStorage = function (e, n) {
                                var o;
                                return void 0 === e && (e = !1), e && (0, r.I)() && (o = new r.O(s + n)), o || (o = new i.M), new t(o, n)
                            }, t
                        }()
                },
                24863: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Z: function () {
                            return a
                        }
                    });
                    var o = n(53048),
                        r = "jodit-image-editor",
                        i = o.In.get.bind(o.In),
                        s = function (t, e) {
                            return void 0 === e && (e = "jodti-image-editor_active"), t ? e : ""
                        },
                        a = function (t, e) {
                            var n = t.i18n.bind(t),
                                o = function (t, e, o) {
                                    return void 0 === o && (o = !0), '<div class="jodit-form__group">\n\t\t\t<label class="jodit-switcher-wrapper">\n\t\t\t\t<span class=\'jodit-switcher\'>\n\t\t\t\t\t<input '.concat(s(o, "checked"), ' data-ref="').concat(e, '" type="checkbox"/>\n\t\t\t\t\t<span class="jodit-switcher__slider"></span>\n\t\t\t\t</span>\n\t\t\t\t<span>').concat(n(t), "</span>\n\t\t\t</label>\n\t</div>")
                                };
                            return t.create.fromHTML('<form class="'.concat(r, ' jodit-properties">\n\t\t<div class="jodit-grid jodit-grid_xs-column">\n\t\t\t<div class="jodit_col-lg-3-4 jodit_col-sm-5-5">\n\t\t\t').concat(e.resize ? '<div class="'.concat(r, "__area ").concat(r, "__area_resize ").concat(r, '_active">\n\t\t\t\t\t\t\t<div data-ref="resizeBox" class="').concat(r, '__box"></div>\n\t\t\t\t\t\t\t<div class="').concat(r, '__resizer">\n\t\t\t\t\t\t\t\t<i class="jodit_bottomright"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>') : "", "\n\t\t\t").concat(e.crop ? '<div class="'.concat(r, "__area ").concat(r, "__area_crop ").concat(s(!e.resize), '">\n\t\t\t\t\t\t\t<div data-ref="cropBox" class="').concat(r, '__box">\n\t\t\t\t\t\t\t\t<div class="').concat(r, '__croper">\n\t\t\t\t\t\t\t\t\t<i class="jodit_bottomright"></i>\n\t\t\t\t\t\t\t\t\t<i class="').concat(r, '__sizes"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>') : "", '\n\t\t\t</div>\n\t\t\t<div class="jodit_col-lg-1-4 jodit_col-sm-5-5">\n\t\t\t').concat(e.resize ? '<div data-area="resize" class="'.concat(r, "__slider ").concat(r, '_active">\n\t\t\t\t\t\t\t<div class="').concat(r, '__slider-title">\n\t\t\t\t\t\t\t\t').concat(i("resize"), "\n\t\t\t\t\t\t\t\t").concat(n("Resize"), '\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="').concat(r, '__slider-content">\n\t\t\t\t\t\t\t\t<div class="jodit-form__group">\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t').concat(n("Width"), '\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input type="number" data-ref="widthInput" class="jodit-input"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="jodit-form__group">\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t').concat(n("Height"), '\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input type="number" data-ref="heightInput" class="jodit-input"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t').concat(o("Keep Aspect Ratio", "keepAspectRatioResize"), "\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>") : "", "\n\t\t\t").concat(e.crop ? '<div data-area="crop" class="'.concat(r, "__slider ").concat(s(!e.resize), '\'">\n\t\t\t\t\t\t\t<div class="').concat(r, '__slider-title">\n\t\t\t\t\t\t\t\t').concat(i("crop"), "\n\t\t\t\t\t\t\t\t").concat(n("Crop"), '\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="').concat(r, '__slider-content">\n\t\t\t\t\t\t\t\t').concat(o("Keep Aspect Ratio", "keepAspectRatioCrop"), "\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>") : "", "\n\t\t\t</div>\n\t\t</div>\n\t</form>"))
                        }
                },
                25376: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Q: function () {
                            return r
                        }
                    });
                    var o = n(76776);

                    function r(t) {
                        return !(!t || "object" != typeof t || t.nodeType || (0, o.l)(t) || t.constructor && !{}.hasOwnProperty.call(t.constructor.prototype, "isPrototypeOf"))
                    }
                },
                25501: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1744 1408q33 0 42 18.5t-11 44.5l-126 162q-20 26-49 26t-49-26l-126-162q-20-26-11-44.5t42-18.5h80v-1024h-80q-33 0-42-18.5t11-44.5l126-162q20-26 49-26t49 26l126 162q20 26 11 44.5t-42 18.5h-80v1024h80zm-1663-1279l54 27q12 5 211 5 44 0 132-2t132-2q36 0 107.5.5t107.5.5h293q6 0 21 .5t20.5 0 16-3 17.5-9 15-17.5l42-1q4 0 14 .5t14 .5q2 112 2 336 0 80-5 109-39 14-68 18-25-44-54-128-3-9-11-48t-14.5-73.5-7.5-35.5q-6-8-12-12.5t-15.5-6-13-2.5-18-.5-16.5.5q-17 0-66.5-.5t-74.5-.5-64 2-71 6q-9 81-8 136 0 94 2 388t2 455q0 16-2.5 71.5t0 91.5 12.5 69q40 21 124 42.5t120 37.5q5 40 5 50 0 14-3 29l-34 1q-76 2-218-8t-207-10q-50 0-151 9t-152 9q-3-51-3-52v-9q17-27 61.5-43t98.5-29 78-27q19-42 19-383 0-101-3-303t-3-303v-117q0-2 .5-15.5t.5-25-1-25.5-3-24-5-14q-11-12-162-12-33 0-93 12t-80 26q-19 13-34 72.5t-31.5 111-42.5 53.5q-42-26-56-44v-383z"/> </svg>'
                },
                26150: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C: function () {
                            return s
                        }
                    });
                    var o = n(9823),
                        r = n(449),
                        i = n(38322);

                    function s(t, e, n) {
                        if (!t || !(0, o.Tn)(t.getAttribute)) return null;
                        if (!(0, o.Kg)(e)) return Object.keys(e).forEach((function (n) {
                            var r = e[n];
                            (0, o.Qd)(r) && "style" === n ? (0, i.A)(t, r) : ("className" === n && (n = "class"), s(t, n, r))
                        })), null;
                        var a = (0, r.N)(e);
                        if (/^-/.test(a)) {
                            var u = s(t, "data".concat(a));
                            if (u) return u;
                            a = a.substr(1)
                        }
                        if (void 0 !== n) {
                            if (null != n) {
                                var c = n.toString();
                                return "IMG" !== t.nodeName || "width" !== a && "height" !== a || (c = c.replace("px", "")), t.setAttribute(a, c), c
                            }
                            t.hasAttribute(a) && t.removeAttribute(a)
                        }
                        return t.getAttribute(a)
                    }
                },
                26328: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        t: function () {
                            return i
                        },
                        v: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(97369);

                    function i(t, e) {
                        (o.J.isElement(t) || o.J.isFragment(t)) && (e.removeOnError && (s(t), (0, r.$$)("[onerror]", t).forEach((function (t) {
                            return s(t, e)
                        }))), e.safeJavaScriptLink && (s(t), (0, r.$$)('a[href^="javascript"]', t).forEach((function (t) {
                            return s(t, e)
                        }))))
                    }

                    function s(t, e) {
                        var n = void 0 === e ? {
                                safeJavaScriptLink: !0,
                                removeOnError: !0
                            } : e,
                            i = n.safeJavaScriptLink,
                            s = n.removeOnError;
                        if (!o.J.isElement(t)) return !1;
                        var a = !1;
                        s && t.hasAttribute("onerror") && ((0, r.attr)(t, "onerror", null), a = !0);
                        var u = t.getAttribute("href");
                        return i && u && 0 === u.trim().indexOf("javascript") && ((0, r.attr)(t, "href", location.protocol + "//" + u), a = !0), a
                    }
                },
                26421: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(56298),
                        i = n(97369);
                    n(24103), r.fg.add("media", (function (t) {
                        var e = "jodit_fake_wrapper",
                            n = t.options,
                            r = n.mediaFakeTag,
                            s = n.mediaBlocks;
                        n.mediaInFakeBlock && t.e.on("afterGetValueFromEditor", (function (t) {
                            var n = new RegExp("<".concat(r, "[^>]+data-").concat(e, "[^>]+>([^]+?)</").concat(r, ">"), "ig");
                            n.test(t.value) && (t.value = t.value.replace(n, "$1"))
                        })).on("change afterInit afterSetMode changePlace", t.async.debounce((function () {
                            t.isDestructed || t.getMode() === o.MODE_SOURCE || (0, i.$$)(s.join(","), t.editor).forEach((function (n) {
                                (0, i.dataBind)(n, e) || ((0, i.dataBind)(n, e, !0), function (n) {
                                    var o;
                                    if (n.parentNode && (0, i.attr)(n.parentNode, "data-jodit_iframe_wrapper")) n = n.parentNode;
                                    else {
                                        var s = t.createInside.element(r, ((o = {
                                            "data-jodit-temp": 1,
                                            contenteditable: !1,
                                            draggable: !0
                                        })["data-".concat(e)] = 1, o));
                                        (0, i.attr)(s, "style", (0, i.attr)(n, "style")), s.style.display = "inline-block" === n.style.display ? "inline-block" : "block", s.style.width = n.offsetWidth + "px", s.style.height = n.offsetHeight + "px", n.parentNode && n.parentNode.insertBefore(s, n), s.appendChild(n), n = s
                                    }
                                    t.e.off(n, "mousedown.select touchstart.select").on(n, "mousedown.select touchstart.select", (function () {
                                        t.s.setCursorAfter(n)
                                    }))
                                }(n))
                            }))
                        }), t.defaultTimeout))
                    }))
                },
                26495: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(56298),
                        i = n(65147);
                    n(99689), r.fg.add("iframe", (function (t) {
                        var e = t.options;
                        t.e.on("afterSetMode", (function () {
                            t.isEditorMode() && t.s.focus()
                        })).on("generateDocumentStructure.iframe", (function (t, n) {
                            var o = t || n.iframe.contentWindow.document;
                            if (o.open(), o.write(e.iframeDoctype + '<html dir="'.concat(e.direction, '" class="jodit" lang="').concat((0, i.defaultLanguage)(e.language), '">') + "<head>" + "<title>".concat(e.iframeTitle, "</title>") + (e.iframeBaseUrl ? '<base href="'.concat(e.iframeBaseUrl, '"/>') : "") + '</head><body class="jodit-wysiwyg"></body></html>'), o.close(), e.iframeCSSLinks && e.iframeCSSLinks.forEach((function (t) {
                                    var e = o.createElement("link");
                                    e.setAttribute("rel", "stylesheet"), e.setAttribute("href", t), o.head && o.head.appendChild(e)
                                })), e.iframeStyle) {
                                var r = o.createElement("style");
                                r.innerHTML = e.iframeStyle, o.head && o.head.appendChild(r)
                            }
                        })).on("createEditor", (function () {
                            if (e.iframe) {
                                var n = t.c.element("iframe");
                                n.style.display = "block", n.src = "about:blank", n.className = "jodit-wysiwyg_iframe", n.setAttribute("allowtransparency", "true"), n.setAttribute("tabindex", e.tabIndex.toString()), n.setAttribute("frameborder", "0"), null != e.iframeSandbox && n.setAttribute("sandbox", e.iframeSandbox), t.workplace.appendChild(n), t.iframe = n;
                                var r = t.e.fire("generateDocumentStructure.iframe", null, t);
                                return (0, i.callPromise)(r, (function () {
                                    if (!t.iframe) return !1;
                                    var n = t.iframe.contentWindow.document;
                                    t.editorWindow = t.iframe.contentWindow;
                                    var r = function () {
                                            (0, i.attr)(n.body, "contenteditable", t.getMode() !== o.MODE_SOURCE && !t.getReadOnly() || null)
                                        },
                                        s = function (t) {
                                            var e = /<body.*<\/body>/im,
                                                n = "{%%BODY%%}",
                                                o = e.exec(t);
                                            return o && (t = t.replace(e, n).replace(/<span([^>]*?)>(.*?)<\/span>/gim, "").replace(/&lt;span([^&]*?)&gt;(.*?)&lt;\/span&gt;/gim, "").replace(n, o[0].replace(/(<body[^>]+?)min-height["'\s]*:[\s"']*[0-9]+(px|%)/im, "$1").replace(/(<body[^>]+?)([\s]*["'])?contenteditable["'\s]*=[\s"']*true["']?/im, "$1").replace(/<(style|script|span)[^>]+jodit[^>]+>.*?<\/\1>/g, "")).replace(/(class\s*=\s*)(['"])([^"']*)(jodit-wysiwyg|jodit)([^"']*\2)/g, "$1$2$3$5").replace(/(<[^<]+?)\sclass="[\s]*"/gim, "$1").replace(/(<[^<]+?)\sstyle="[\s;]*"/gim, "$1").replace(/(<[^<]+?)\sdir="[\s]*"/gim, "$1")), t
                                        };
                                    if (e.editHTMLDocumentMode) {
                                        var a = t.element.tagName;
                                        if ("TEXTAREA" !== a && "INPUT" !== a) throw (0, i.error)("If enable `editHTMLDocumentMode` - source element should be INPUT or TEXTAREA");
                                        t.e.on("beforeGetNativeEditorValue", (function () {
                                            return s(t.o.iframeDoctype + n.documentElement.outerHTML)
                                        })).on("beforeSetNativeEditorValue", (function (e) {
                                            var o = e.value;
                                            return !t.isLocked && (/<(html|body)/i.test(o) ? s(n.documentElement.outerHTML) !== s(o) && (n.open(), n.write(t.o.iframeDoctype + s(o)), n.close(), t.editor = n.body, t.e.fire("safeHTML", t.editor), r(), t.e.fire("prepareWYSIWYGEditor"), t.e.stopPropagation("beforeSetNativeEditorValue")) : n.body.innerHTML = o, !0)
                                        }), {
                                            top: !0
                                        })
                                    }
                                    if (t.editor = n.body, t.e.on("afterSetMode afterInit afterAddPlace", r), "auto" === e.height) {
                                        n.documentElement && (n.documentElement.style.overflowY = "hidden");
                                        var u = t.async.throttle((function () {
                                            for (var n = [], o = 0; arguments.length > o; o++) n[o] = arguments[o];
                                            t.async.requestAnimationFrame((function () {
                                                if (t.editor && t.iframe && "auto" === e.height) {
                                                    var n = t.ew.getComputedStyle(t.editor),
                                                        o = parseInt(n.marginTop || "0", 10) + parseInt(n.marginBottom || "0", 10);
                                                    (0, i.css)(t.iframe, "height", t.editor.offsetHeight + o)
                                                }
                                            }))
                                        }), t.defaultTimeout / 2);
                                        if (t.e.on("change afterInit afterSetMode resize", u).on([t.iframe, t.ew, n.documentElement], "load", u).on(n, "readystatechange DOMContentLoaded", u), "function" == typeof ResizeObserver) {
                                            var c = new ResizeObserver(u);
                                            c.observe(n.body), t.e.on("beforeDestruct", (function () {
                                                c.disconnect()
                                            }))
                                        }
                                    }
                                    return n.documentElement && t.e.on(n.documentElement, "mousedown touchend", (function () {
                                        t.s.isFocused() || (t.s.focus(), t.editor === n.body && t.s.setCursorIn(n.body))
                                    })).on(t.ew, "mousedown touchstart keydown keyup touchend click mouseup mousemove scroll", (function (e) {
                                        var n;
                                        null === (n = t.events) || void 0 === n || n.fire(t.ow, e)
                                    })), !1
                                }))
                            }
                        }))
                    }))
                },
                26538: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        d: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(17352),
                        s = n(65147),
                        a = n(36115),
                        u = n(74340),
                        c = (n(77334), function (t) {
                            function e(e, n) {
                                var o = t.call(this, e) || this;
                                return o.path = "", o.source = "default", o.options = (0, s.ConfigProto)(n || {}, (0, s.ConfigProto)(a.T.defaultOptions.uploader, (0, s.isJoditObject)(e) ? e.o.uploader : {})), o
                            }
                            return (0, o.C6)(e, t), Object.defineProperty(e.prototype, "j", {
                                get: function () {
                                    return this.jodit
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.className = function () {
                                return "Uploader"
                            }, Object.defineProperty(e.prototype, "o", {
                                get: function () {
                                    return this.options
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.setPath = function (t) {
                                return this.path = t, this
                            }, e.prototype.setSource = function (t) {
                                return this.source = t, this
                            }, e.prototype.bind = function (t, e, n) {
                                var o = function () {
                                        t.classList.remove("jodit_drag_hover")
                                    },
                                    r = this,
                                    s = function (t) {
                                        var s, a, c, l = t.clipboardData,
                                            f = function (t) {
                                                a && (t.append("extension", c), t.append("mimetype", a.type))
                                            };
                                        if (!i.IS_IE && (0, u.YQ)(l)) return (0, u._9)(r, l.files, e, n).finally(o), !1;
                                        if (i.IS_IE && !i.IS_ES_NEXT) return (0, u.dT)(r, l, e, n, o);
                                        if ((0, u.Pb)(l)) {
                                            var d = l.items;
                                            for (s = 0; d.length > s; s += 1)
                                                if ("file" === d[s].kind && "image/png" === d[s].type) {
                                                    if (a = d[s].getAsFile()) {
                                                        var p = a.type.match(/\/([a-z0-9]+)/i);
                                                        c = p[1] ? p[1].toLowerCase() : "", (0, u._9)(r, [a], e, n, f).finally(o)
                                                    }
                                                    t.preventDefault();
                                                    break
                                                }
                                        }
                                    };
                                r.j && r.j.editor !== t ? r.j.e.on(t, "paste", s) : r.j.e.on("beforePaste", s), this.attachEvents(t, e, n, o)
                            }, e.prototype.attachEvents = function (t, e, n, o) {
                                var r = this;
                                r.j.e.on(t, "dragend dragover dragenter dragleave drop", (function (t) {
                                    t.preventDefault()
                                })).on(t, "dragover", (function (e) {
                                    ((0, u.YQ)(e.dataTransfer) || (0, u.Pb)(e.dataTransfer)) && (t.classList.add("jodit_drag_hover"), e.preventDefault())
                                })).on(t, "dragend dragleave", (function (e) {
                                    t.classList.remove("jodit_drag_hover"), (0, u.YQ)(e.dataTransfer) && e.preventDefault()
                                })).on(t, "drop", (function (i) {
                                    t.classList.remove("jodit_drag_hover"), (0, u.YQ)(i.dataTransfer) && (i.preventDefault(), i.stopImmediatePropagation(), (0, u._9)(r, i.dataTransfer.files, e, n).finally(o))
                                }));
                                var i = t.querySelector("input[type=file]");
                                i && r.j.e.on(i, "change", (function () {
                                    (0, u._9)(r, i.files, e, n).then((function () {
                                        i.value = "", /safari/i.test(navigator.userAgent) || (i.type = "", i.type = "file")
                                    })).finally(o)
                                }))
                            }, e.prototype.uploadRemoteImage = function (t, e, n) {
                                var o = this,
                                    r = o.o,
                                    i = (0, s.isFunction)(n) ? n : r.defaultHandlerError;
                                (0, u.tN)(o, {
                                    action: "fileUploadRemote",
                                    url: t
                                }).then((function (t) {
                                    r.isSuccess.call(o, t) ? ((0, s.isFunction)(e) ? e : r.defaultHandlerSuccess).call(o, r.process.call(o, t)) : i.call(o, (0, s.error)(r.getMessage.call(o, t)))
                                })).catch((function (t) {
                                    return i.call(o, t)
                                }))
                            }, e.prototype.destruct = function () {
                                this.setStatus(r.f.beforeDestruct);
                                var e = u.$j.get(this);
                                e && (e.forEach((function (t) {
                                    try {
                                        t.destruct()
                                    } catch (t) {}
                                })), e.clear()), t.prototype.destruct.call(this)
                            }, e
                        }(r.vG))
                },
                26725: function (t, e, n) {
                    "use strict";
                    var o = n(65147),
                        r = n(931),
                        i = n(36115),
                        s = n(223),
                        a = n.n(s);
                    i.T.prototype.defaultLineHeight = null, r.I.set("line-height", a()), i.T.prototype.controls.lineHeight = {
                        command: "applyLineHeight",
                        tags: ["ol"],
                        tooltip: "Line height",
                        list: [1, 1.1, 1.2, 1.3, 1.4, 1.5, 2],
                        exec: function (t, e, n) {
                            return (0, o.memorizeExec)(t, e, {
                                control: n.control
                            }, (function (t) {
                                return t
                            }))
                        }
                    }
                },
                27195: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.showCharsCounter = !0, o.T.prototype.countHTMLChars = !1, o.T.prototype.countTextSpaces = !1, o.T.prototype.showWordsCounter = !0
                },
                27301: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        EW: function () {
                            return i
                        },
                        Qt: function () {
                            return c
                        },
                        S5: function () {
                            return u
                        },
                        w4: function () {
                            return a
                        },
                        x_: function () {
                            return l
                        }
                    });
                    var o = n(98253),
                        r = n(60346),
                        i = new Map,
                        s = function (t) {
                            return function (e, n) {
                                if (i.has(n)) return i.get(n);
                                var o = t(e, n);
                                return i.set(n, o), o
                            }
                        },
                        a = s((function (t, e) {
                            return t.async.promise((function (n, o) {
                                if (t.isInDestruct) return o();
                                var i = t.c.element("script", {
                                    type: "text/javascript",
                                    crossorigin: "anonymous",
                                    referrerpolicy: "no-referrer",
                                    async: !0,
                                    src: (0, r.X)(e)
                                });
                                t.e.one(i, "error", o).one(i, "load", n), t.od.body.appendChild(i)
                            }))
                        })),
                        u = s((function (t, e) {
                            return t.async.promise((function (n, o) {
                                if (t.isInDestruct) return o();
                                var i = t.c.element("link");
                                i.rel = "stylesheet", i.media = "all", i.crossOrigin = "anonymous", !t.isInDestruct && t.e.on(i, "load", (function () {
                                    return n(i)
                                })).on(i, "error", o), i.href = (0, r.X)(e), t.o.shadowRoot ? t.o.shadowRoot.appendChild(i) : t.od.body.appendChild(i)
                            }))
                        }));

                    function c(t, e, n) {
                        return void 0 === n && (n = 0), (0, o.K)(e[n]) ? a(t, e[n]).then((function () {
                            return c(t, e, n + 1)
                        })) : Promise.resolve()
                    }

                    function l(t, e, n) {
                        return void 0 === n && (n = 0), (0, o.K)(e[n]) ? u(t, e[n]).then((function () {
                            return l(t, e, n + 1)
                        })) : Promise.resolve()
                    }
                },
                27337: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.defaultAjaxOptions = {
                        successStatuses: [200, 201, 202],
                        method: "GET",
                        url: "",
                        data: null,
                        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                        headers: {
                            "X-REQUESTED-WITH": "XMLHttpRequest"
                        },
                        withCredentials: !1,
                        xhr: function () {
                            return new XMLHttpRequest
                        }
                    }
                },
                27509: function (t, e, n) {
                    "use strict";
                    var o, r = n(31635),
                        i = n(22664),
                        s = n(71842),
                        a = n(56298),
                        u = n(65147),
                        c = n(71005);
                    n(96900),
                        function (t) {
                            t[t.IDLE = 0] = "IDLE", t[t.WAIT_DRAGGING = 1] = "WAIT_DRAGGING", t[t.DRAGGING = 2] = "DRAGGING"
                        }(o || (o = {}));
                    var l = function (t) {
                        function e() {
                            var e = t.apply(this, (0, r.fX)([], (0, r.zs)(arguments), !1)) || this;
                            return e.dragList = [], e.draggable = null, e.isCopyMode = !1, e.diffStep = 10, e.startX = 0, e.startY = 0, e.state = o.IDLE, e
                        }
                        return (0, r.C6)(e, t), e.prototype.afterInit = function () {
                            this.dragList = this.j.o.draggableTags ? (0, u.splitArray)(this.j.o.draggableTags).filter(Boolean).map((function (t) {
                                return t.toLowerCase()
                            })) : [], this.dragList.length && this.j.e.on("mousedown dragstart", this.onDragStart)
                        }, e.prototype.onDragStart = function (t) {
                            var e = this;
                            if ("dragstart" === t.type && this.draggable) return !1;
                            if (o.IDLE >= this.state) {
                                var n = t.target;
                                if (this.dragList.length && n) {
                                    var r = function (t) {
                                            return Boolean(t && e.dragList.includes(t.nodeName.toLowerCase()))
                                        },
                                        i = s.J.furthest(n, r, this.j.editor) || (r(n) ? n : null);
                                    i && (s.J.isTag(i.parentElement, "a") && i.parentElement.firstChild === i && i.parentElement.lastChild === i && (i = i.parentElement), this.startX = t.clientX, this.startY = t.clientY, this.isCopyMode = (0, u.ctrlKey)(t), this.draggable = i.cloneNode(!0), (0, u.dataBind)(this.draggable, "target", i), this.state = o.WAIT_DRAGGING, this.addDragListeners())
                                }
                            }
                        }, e.prototype.onDrag = function (t) {
                            var n, r;
                            if (this.draggable && this.state !== o.IDLE) {
                                var i = t.clientY;
                                if (this.state !== o.WAIT_DRAGGING || Math.sqrt(Math.pow(t.clientX - this.startX, 2) + Math.pow(i - this.startY, 2)) >= this.diffStep) {
                                    if (this.state === o.WAIT_DRAGGING && (this.j.lock("drag-and-drop-element"), this.state = o.DRAGGING), this.j.e.fire("hidePopup hideResizer"), !this.draggable.parentNode) {
                                        var s = (0, u.dataBind)(this.draggable, "target");
                                        (0, u.css)(this.draggable, {
                                            zIndex: 1e13,
                                            pointerEvents: "none",
                                            pointer: "drag",
                                            position: "fixed",
                                            opacity: .7,
                                            display: "inline-block",
                                            left: t.clientX,
                                            top: t.clientY,
                                            width: null !== (n = null == s ? void 0 : s.offsetWidth) && void 0 !== n ? n : 100,
                                            height: null !== (r = null == s ? void 0 : s.offsetHeight) && void 0 !== r ? r : 100
                                        }), (0, a.My)(this.j, e).appendChild(this.draggable)
                                    }(0, u.css)(this.draggable, {
                                        left: t.clientX,
                                        top: t.clientY
                                    }), this.j.s.insertCursorAtPoint(t.clientX, t.clientY)
                                }
                            }
                        }, e.prototype.onDragEnd = function () {
                            this.isInDestruct || (this.removeDragListeners(), this.j.unlock(), this.state = o.IDLE, this.draggable && (s.J.safeRemove(this.draggable), this.draggable = null))
                        }, e.prototype.onDrop = function () {
                            if (this.draggable && this.state >= o.DRAGGING) {
                                var t = (0, u.dataBind)(this.draggable, "target");
                                this.onDragEnd(), this.isCopyMode && (t = t.cloneNode(!0));
                                var e = t.parentElement;
                                this.j.s.insertNode(t, !0, !1), e && s.J.isEmpty(e) && !s.J.isCell(e) && s.J.safeRemove(e), s.J.isTag(t, "img") && this.j.e && this.j.e.fire("afterInsertImage", t), this.j.e.fire("synchro")
                            } else this.onDragEnd()
                        }, e.prototype.addDragListeners = function () {
                            this.j.e.on(this.j.editor, "mousemove", this.onDrag).on("mouseup", this.onDrop).on([this.j.ew, this.ow], "mouseup", this.onDragEnd)
                        }, e.prototype.removeDragListeners = function () {
                            this.j.e.off(this.j.editor, "mousemove", this.onDrag).off("mouseup", this.onDrop).off([this.j.ew, this.ow], "mouseup", this.onDragEnd)
                        }, e.prototype.beforeDestruct = function () {
                            this.onDragEnd(), this.j.e.off("mousedown dragstart", this.onDragStart), this.removeDragListeners()
                        }, (0, r.Cg)([i.autobind], e.prototype, "onDragStart", null), (0, r.Cg)([(0, i.throttle)((function (t) {
                            return t.defaultTimeout / 10
                        }))], e.prototype, "onDrag", null), (0, r.Cg)([i.autobind], e.prototype, "onDragEnd", null), (0, r.Cg)([i.autobind], e.prototype, "onDrop", null), e
                    }(c.k);
                    a.fg.add("dragAndDropElement", l)
                },
                27594: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        G: function () {
                            return r
                        }
                    });
                    var o = n(83044);

                    function r(t, e, n) {
                        var i, s;
                        void 0 === n && (n = !1);
                        var a = t.getBoundingClientRect(),
                            u = a.left,
                            c = a.top;
                        if ((0, o.y)(e) && e.iframe && e.ed.body.contains(t) && !n) {
                            var l = r(e.iframe, e, !0);
                            u += l.left, c += l.top
                        }
                        return {
                            left: Math.round(u),
                            top: Math.round(c),
                            width: Math.round(null !== (i = t.offsetWidth) && void 0 !== i ? i : a.width),
                            height: Math.round(null !== (s = t.offsetHeight) && void 0 !== s ? s : a.height)
                        }
                    }
                },
                27671: function (t) {
                    "use strict";
                    t.exports = {
                        "Line height": "Altura de la lnea"
                    }
                },
                27912: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $: function () {
                            return s
                        },
                        t: function () {
                            return a
                        }
                    });
                    var o = n(65147),
                        r = n(53883),
                        i = n(89929),
                        s = new WeakMap;

                    function a(t, e) {
                        var n = (0, i.$)(t, e),
                            a = function (e) {
                                var n = new r.d({
                                        xhr: function () {
                                            var e = new XMLHttpRequest;
                                            return void 0 !== t.j.ow.FormData && e.upload ? (t.j.progressbar.show().progress(10), e.upload.addEventListener("progress", (function (e) {
                                                if (e.lengthComputable) {
                                                    var n = e.loaded / e.total;
                                                    n *= 100, t.j.progressbar.show().progress(n), 100 > n || t.j.progressbar.hide()
                                                }
                                            }), !1)) : t.j.progressbar.hide(), e
                                        },
                                        method: t.o.method || "POST",
                                        data: e,
                                        url: (0, o.isFunction)(t.o.url) ? t.o.url(e) : t.o.url,
                                        headers: t.o.headers,
                                        queryBuild: t.o.queryBuild,
                                        contentType: t.o.contentType.call(t, e),
                                        withCredentials: t.o.withCredentials || !1
                                    }),
                                    i = s.get(t);
                                return i || (i = new Set, s.set(t, i)), i.add(n), t.j.e.one("beforeDestruct", n.destruct), n.send().then((function (t) {
                                    return t.json()
                                })).catch((function (t) {
                                    return {
                                        success: !1,
                                        data: {
                                            messages: [t]
                                        }
                                    }
                                })).finally((function () {
                                    n.destruct(), null == i || i.delete(n)
                                }))
                            };
                        return (0, o.isPromise)(n) ? n.then(a).catch((function (e) {
                            t.o.error.call(t, e)
                        })) : a(n)
                    }
                },
                28616: function (t, e, n) {
                    "use strict";

                    function o(t, e) {
                        if (void 0 === e && (e = {}), "object" != typeof t) return String(t);
                        var n = new Set(e.excludeKeys),
                            o = new WeakMap;
                        return JSON.stringify(t, (function (t, e) {
                            if (!n.has(t)) {
                                if ("object" == typeof e && null != e) {
                                    if (o.get(e)) return "[refObject]";
                                    o.set(e, !0)
                                }
                                return e
                            }
                        }), e.prettify)
                    }
                    n.d(e, {
                        A: function () {
                            return o
                        }
                    })
                },
                28709: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(37474),
                        i = n(24767),
                        s = n(97369),
                        a = n(69198),
                        u = n(1540),
                        c = function (t) {
                            function e() {
                                for (var e, n, r = [], i = 0; arguments.length > i; i++) r[i] = arguments[i];
                                var s = t.apply(this, (0, o.fX)([], (0, o.zs)(r), !1)) || this;
                                return (null === (e = s.options) || void 0 === e ? void 0 : e.className) && s.container.classList.add(null === (n = s.options) || void 0 === n ? void 0 : n.className), s
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIForm"
                            }, e.prototype.submit = function () {
                                this.j.e.fire(this.container, "submit")
                            }, e.prototype.validate = function () {
                                var t, e, n, i, s = this.allChildren.filter((function (t) {
                                    return r.u.isInstanceOf(t, a.t)
                                }));
                                try {
                                    for (var c = (0, o.Ju)(s), l = c.next(); !l.done; l = c.next())
                                        if (!l.value.validate()) return !1
                                } catch (e) {
                                    t = {
                                        error: e
                                    }
                                } finally {
                                    try {
                                        l && !l.done && (e = c.return) && e.call(c)
                                    } finally {
                                        if (t) throw t.error
                                    }
                                }
                                var f = this.allChildren.filter((function (t) {
                                    return r.u.isInstanceOf(t, u.$)
                                }));
                                try {
                                    for (var d = (0, o.Ju)(f), p = d.next(); !p.done; p = d.next())
                                        if (!p.value.validate()) return !1
                                } catch (t) {
                                    n = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        p && !p.done && (i = d.return) && i.call(d)
                                    } finally {
                                        if (n) throw n.error
                                    }
                                }
                                return !0
                            }, e.prototype.onSubmit = function (t) {
                                var e = this;
                                return this.j.e.on(this.container, "submit", (function () {
                                    var n = e.allChildren.filter((function (t) {
                                        return r.u.isInstanceOf(t, a.t)
                                    }));
                                    return !!e.validate() && (t(n.reduce((function (t, e) {
                                        return t[e.state.name] = e.value, t
                                    }), {})), !1)
                                })), this
                            }, e.prototype.createContainer = function () {
                                var t = this.j.c.element("form");
                                return t.classList.add(this.componentName), (0, s.attr)(t, "dir", this.j.o.direction || "auto"), (0, s.attr)(t, "novalidate", ""), t
                            }, (0, o.Cg)([i.s], e)
                        }(n(6455).U)
                },
                28712: function (t) {
                    "use strict";
                    t.exports = {
                        assert() {}
                    }
                },
                29012: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        CP: function () {
                            return i.C
                        },
                        Ue: function () {
                            return o.U
                        },
                        bk: function () {
                            return s.b
                        },
                        z4: function () {
                            return r.z
                        }
                    });
                    var o = n(6455),
                        r = n(94070),
                        i = n(86283),
                        s = n(13642)
                },
                29348: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"><path d="M1534 189v73q0 29-18.5 61t-42.5 32q-50 0-54 1-26 6-32 31-3 11-3 64v1152q0 25-18 43t-43 18h-108q-25 0-43-18t-18-43v-1218h-143v1218q0 25-17.5 43t-43.5 18h-108q-26 0-43.5-18t-17.5-43v-496q-147-12-245-59-126-58-192-179-64-117-64-259 0-166 88-286 88-118 209-159 111-37 417-37h479q25 0 43 18t18 43z"/></svg>'
                },
                29581: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.tableAllowCellSelection = !0
                },
                29780: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        D: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(1963),
                        s = n(55186),
                        a = n(98253),
                        u = n(87906),
                        c = n(75758),
                        l = n(931),
                        f = function (t) {
                            function e(e, n) {
                                var o = t.call(this, e) || this;
                                return o.name = "", o.__parentElement = null, o.mods = {}, o.container = o.createContainer(n), Object.defineProperty(o.container, "component", {
                                    value: o,
                                    configurable: !0
                                }), o
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, Object.defineProperty(e.prototype, "parentElement", {
                                get: function () {
                                    return this.__parentElement
                                },
                                set: function (t) {
                                    var e = this;
                                    this.__parentElement = t, t && t.hookStatus("beforeDestruct", (function () {
                                        return e.destruct()
                                    })), this.updateParentElement(this)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.bubble = function (t) {
                                for (var e = this.parentElement; e;) t(e), e = e.parentElement;
                                return this
                            }, e.prototype.updateParentElement = function (t) {
                                var e;
                                return null === (e = this.__parentElement) || void 0 === e || e.updateParentElement(t), this
                            }, e.prototype.get = function (e, n) {
                                return t.prototype.get.call(this, e, n) || this.getElm(e)
                            }, e.prototype.closest = function (t) {
                                for (var e = "object" == typeof t ? function (e) {
                                        return e === t
                                    } : function (e) {
                                        return r.uA.isInstanceOf(e, t)
                                    }, o = this.__parentElement; o;) {
                                    if (e(o)) return o;
                                    o = !o.parentElement && o.container.parentElement ? n.closestElement(o.container.parentElement, n) : o.parentElement
                                }
                                return null
                            }, e.closestElement = function (t, e) {
                                var n = s.J.up(t, (function (t) {
                                    if (t) {
                                        var n = t.component;
                                        return n && r.uA.isInstanceOf(n, e)
                                    }
                                    return !1
                                }));
                                return n ? null == n ? void 0 : n.component : null
                            }, e.prototype.update = function () {}, e.prototype.appendTo = function (t) {
                                return t.appendChild(this.container), this
                            }, e.prototype.clearName = function (t) {
                                return t.replace(/[^a-zA-Z0-9]/g, "_")
                            }, e.prototype.render = function (t) {
                                return this.j.c.div(this.componentName)
                            }, e.prototype.createContainer = function (t) {
                                var e = this.render(t);
                                if ((0, a.K)(e)) {
                                    var n = this.parseTemplate(e);
                                    return n.classList.add(this.componentName), n
                                }
                                return e
                            }, e.prototype.parseTemplate = function (t) {
                                var e = this;
                                return this.j.c.fromHTML(t.replace(/\*([^*]+?)\*/g, (function (t, e) {
                                    return l.I.get(e) || ""
                                })).replace(/&_/g, this.componentName + "_").replace(/~([^~]+?)~/g, (function (t, n) {
                                    return e.i18n(n)
                                })))
                            }, e.prototype.destruct = function () {
                                return s.J.safeRemove(this.container), this.parentElement = null, t.prototype.destruct.call(this)
                            }, n = (0, o.Cg)([(0, i.C)(c.K, u.O)], e)
                        }(r.vG)
                },
                29822: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        V: function () {
                            return s
                        }
                    });
                    var o = n(71842),
                        r = n(65147),
                        i = n(46602);

                    function s(t, e, n) {
                        var s = o.J.findSibling(e, n);
                        return !s && e.parentElement && e.parentElement !== t.editor && (s = o.J.findSibling(e.parentElement, n)), !(!o.J.isElement(s) || o.J.isContentEditable(s, t.editor) || ((0, r.call)(n ? o.J.before : o.J.after, s, e), o.J.safeRemove(s), (0, i.W8)(t, e, n), (0, r.call)(n ? t.s.setCursorBefore : t.s.setCursorAfter, e), 0))
                    }
                },
                29866: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(22664),
                        s = n(83044),
                        a = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.buttons = [], n.hasStyle = !1, n.__inited = !1, e.e.on("afterPluginSystemInit", n.__afterPluginSystemInit).on("afterInit", n.__afterInit).on("beforeDestruct", n.__beforeDestruct), n
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "Plugin"
                            }, e.prototype.__afterPluginSystemInit = function () {
                                var t = this.j,
                                    e = this.buttons;
                                e && (0, s.y)(t) && e.forEach((function (e) {
                                    t.registerButton(e)
                                }))
                            }, e.prototype.__afterInit = function () {
                                this.__inited = !0, this.setStatus(r.f.ready), this.afterInit(this.jodit)
                            }, e.prototype.init = function (t) {
                                this.jodit.isReady && (this.afterInit(this.jodit), this.__afterPluginSystemInit(), this.jodit.e.fire("rebuildToolbar"))
                            }, e.prototype.__beforeDestruct = function () {
                                var e;
                                if (!this.isInDestruct) {
                                    var n = this.j;
                                    if (n.e.off("afterPluginSystemInit", this.__afterPluginSystemInit).off("afterInit", this.__afterInit).off("beforeDestruct", this.destruct), this.setStatus(r.f.beforeDestruct), !this.__inited) return t.prototype.destruct.call(this);
                                    (0, s.y)(n) && (null === (e = this.buttons) || void 0 === e || e.forEach((function (t) {
                                        null == n || n.unregisterButton(t)
                                    }))), this.beforeDestruct(this.j), t.prototype.destruct.call(this)
                                }
                            }, e.requires = [], (0, o.Cg)([i.autobind], e.prototype, "__afterPluginSystemInit", null), (0, o.Cg)([i.autobind], e.prototype, "__afterInit", null), (0, o.Cg)([i.autobind], e.prototype, "__beforeDestruct", null), e
                        }(r.vG)
                },
                30393: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        j: function () {
                            return u
                        }
                    });
                    var o = n(55186),
                        r = n(97369),
                        i = n(88269),
                        s = n(78139),
                        a = n(58972);

                    function u(t, e, n) {
                        var u = e.values,
                            c = u.imageSrc,
                            l = u.borderRadius,
                            f = u.imageTitle,
                            d = u.imageAlt,
                            p = u.imageLink,
                            h = u.imageWidth,
                            v = u.imageHeight,
                            g = u.marginTop,
                            m = u.marginRight,
                            y = u.marginBottom,
                            b = u.marginLeft,
                            _ = u.imageLinkOpenInNewTab,
                            C = u.align,
                            w = u.classes,
                            S = u.id,
                            E = t.o;
                        E.image.editStyle && (0, r.attr)(n, "style", u.style || null), c ? ((0, r.attr)(n, "src", c), n.style.borderRadius = l ? l + "px" : "", (0, r.attr)(n, "title", f || null), (0, r.attr)(n, "alt", d || null), (0, i.j)(t, n, p, _), (0, a.q)(n, h, v, e.sizeIsLocked), t.o.image.editMargins && (0, s.N)(t, g, m, y, b, n, e.marginIsLocked), E.image.editClass && (0, r.attr)(n, "class", w || null), E.image.editId && (0, r.attr)(n, "id", S || null), E.image.editAlign && (0, r.hAlignElement)(n, C)) : o.J.safeRemove(n)
                    }
                },
                30405: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(56298),
                        s = n(65147),
                        a = n(71005),
                        u = (n(81522), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.onKeyPress = function (t) {
                                    var n = e.specialKeys[t.which],
                                        o = (t.key || String.fromCharCode(t.which)).toLowerCase(),
                                        r = [n || o];
                                    return ["alt", "ctrl", "shift", "meta"].forEach((function (e) {
                                        t[e + "Key"] && n !== e && r.push(e)
                                    })), (0, s.normalizeKeyAliases)(r.join("+"))
                                }, e.specialKeys = {
                                    8: "backspace",
                                    9: "tab",
                                    10: "return",
                                    13: "return",
                                    16: "shift",
                                    17: "ctrl",
                                    18: "alt",
                                    19: "pause",
                                    20: "capslock",
                                    27: "esc",
                                    32: "space",
                                    33: "pageup",
                                    34: "pagedown",
                                    35: "end",
                                    36: "home",
                                    37: "left",
                                    38: "up",
                                    39: "right",
                                    40: "down",
                                    45: "insert",
                                    46: "del",
                                    59: ";",
                                    61: "=",
                                    91: "meta",
                                    96: "0",
                                    97: "1",
                                    98: "2",
                                    99: "3",
                                    100: "4",
                                    101: "5",
                                    102: "6",
                                    103: "7",
                                    104: "8",
                                    105: "9",
                                    106: "*",
                                    107: "+",
                                    109: "-",
                                    110: ".",
                                    111: "/",
                                    112: "f1",
                                    113: "f2",
                                    114: "f3",
                                    115: "f4",
                                    116: "f5",
                                    117: "f6",
                                    118: "f7",
                                    119: "f8",
                                    120: "f9",
                                    121: "f10",
                                    122: "f11",
                                    123: "f12",
                                    144: "numlock",
                                    145: "scroll",
                                    173: "-",
                                    186: ";",
                                    187: "=",
                                    188: ",",
                                    189: "-",
                                    190: ".",
                                    191: "/",
                                    192: "`",
                                    219: "[",
                                    220: "\\",
                                    221: "]",
                                    222: "'"
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                (0, s.keys)(t.o.commandToHotkeys, !1).forEach((function (e) {
                                    var n = t.o.commandToHotkeys[e];
                                    n && ((0, s.isArray)(n) || (0, s.isString)(n)) && t.registerHotkeyToCommand(n, e)
                                }));
                                var n = !1;
                                t.e.off(".hotkeys").on([t.ow, t.ew], "keydown.hotkeys", (function (t) {
                                    if (t.key === r.KEY_ESC) return e.j.e.fire("escape", t)
                                })).on("keydown.hotkeys", (function (o) {
                                    var r = e.onKeyPress(o),
                                        i = {
                                            shouldStop: !0
                                        };
                                    if (!1 === e.j.e.fire(r + ".hotkey", o.type, i)) {
                                        if (i.shouldStop) return n = !0, t.e.stopPropagation("keydown"), !1;
                                        o.preventDefault()
                                    }
                                }), {
                                    top: !0
                                }).on("keyup.hotkeys", (function () {
                                    if (n) return n = !1, t.e.stopPropagation("keyup"), !1
                                }), {
                                    top: !0
                                })
                            }, e.prototype.beforeDestruct = function (t) {
                                t.events && t.e.off(".hotkeys")
                            }, e
                        }(a.k));
                    i.fg.add("hotkeys", u)
                },
                30495: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        R: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = function (t) {
                            function e(n) {
                                var o = t.call(this, n) || this;
                                return Object.setPrototypeOf(o, e.prototype), o
                            }
                            return (0, o.C6)(e, t), e
                        }(Error)
                },
                30526: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        D: function () {
                            return s
                        },
                        w: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(55186);

                    function i(t, e) {
                        var n = t.s,
                            o = e;
                        if (!o) {
                            o = t.createInside.fake();
                            var i = n.range;
                            r.J.safeInsertNode(i, o), i.collapse()
                        }
                        var a = r.J.furthest(o, s, t.editor);
                        if (a)
                            if (n.cursorOnTheLeft(a)) r.J.before(a, o);
                            else if (n.cursorOnTheRight(a)) r.J.after(a, o);
                        else {
                            var u = n.splitSelection(a);
                            u && r.J.after(u, o)
                        }
                        e || (n.setCursorBefore(o), r.J.safeRemove(o))
                    }

                    function s(t) {
                        return r.J.isInlineBlock(t) && !r.J.isTag(t, o.INSEPARABLE_TAGS)
                    }
                },
                30621: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Q: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(67975),
                        i = function () {
                            function t(t) {
                                void 0 === t && (t = r.H), this.searchIndex = t, this.queue = [], this.value = ""
                            }
                            return t.prototype.add = function (t) {
                                var e, n = (null !== (e = t.nodeValue) && void 0 !== e ? e : "").toLowerCase();
                                if (n.length) {
                                    var o = this.value.length;
                                    this.queue.push({
                                        startIndex: o,
                                        endIndex: o + n.length,
                                        node: t
                                    }), this.value += n
                                }
                            }, t.prototype.ranges = function (t, e) {
                                var n;
                                void 0 === e && (e = 0);
                                var r = [],
                                    i = e,
                                    s = 0,
                                    a = 0;
                                do {
                                    if (s = (n = (0, o.zs)(this.searchIndex(t, this.value, i), 2))[1], -1 !== (i = n[0])) {
                                        for (var u = void 0, c = 0, l = void 0, f = 0, d = a; this.queue.length > d; d += 1)
                                            if (!u && this.queue[d].endIndex > i && (u = this.queue[d].node, c = i - this.queue[d].startIndex), u && this.queue[d].endIndex >= i + s) {
                                                l = this.queue[d].node, f = i + s - this.queue[d].startIndex, a = d;
                                                break
                                            } u && l && r.push({
                                            startContainer: u,
                                            startOffset: c,
                                            endContainer: l,
                                            endOffset: f
                                        }), i += s
                                    }
                                } while (-1 !== i);
                                return 0 === r.length ? null : r
                            }, t
                        }()
                },
                30687: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        c: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(58720),
                        i = n(41159);

                    function s(t, e, n) {
                        var s = o.J.closest(n, ["ol", "ul"], e.editor);
                        if (s) {
                            var a = s.parentElement,
                                u = o.J.isLeaf(a),
                                c = u ? a : s,
                                l = e.s.createRange();
                            l.setStartAfter(n), l.setEndAfter(s);
                            var f = l.extractContents();
                            o.J.after(c, t), o.J.safeRemove(n), (0, r.$$)("li", s).length || o.J.safeRemove(s);
                            var d = (0, i.y)(t, e, u ? "li" : e.o.enter);
                            f.querySelector("li") && (u ? d.appendChild(f) : o.J.after(d, f))
                        }
                    }
                },
                31138: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        f: function () {
                            return o
                        }
                    });
                    var o = function (t, e) {
                        void 0 === e && (e = 8);
                        for (var n = []; t.length;) n.push(t.substr(0, e)), t = t.substr(e);
                        return n[1] = n[1].replace(/./g, "*"), n[2] = n[2].replace(/./g, "*"), n.join("-")
                    }
                },
                31202: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        s: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = (n(28712), n(92032)),
                        s = function (t) {
                            function e(e, n) {
                                var o, r;
                                void 0 === n && (n = {
                                    radio: !0
                                });
                                var s = t.call(this, e, null === (o = n.options) || void 0 === o ? void 0 : o.map((function (t) {
                                    var n = new i.lD(e, {
                                        text: t.text,
                                        value: t.value,
                                        variant: "primary"
                                    });
                                    return n.onAction((function () {
                                        s.select(t.value)
                                    })), n
                                })), n) || this;
                                return s.options = n, s.select(null !== (r = n.value) && void 0 !== r ? r : 0), s
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIButtonGroup"
                            }, e.prototype.render = function (t) {
                                return '<div>\n\t\t\t<div class="&__label">~'.concat(t.label, '~</div>\n\t\t\t<div class="&__options"></div>\n\t\t</div>')
                            }, e.prototype.appendChildToContainer = function (t) {
                                this.getElm("options").appendChild(t)
                            }, e.prototype.select = function (t) {
                                var e, n, o = this;
                                this.elements.forEach((function (e, n) {
                                    n === t || e.state.value === t ? e.state.activated = !0 : o.options.radio && (e.state.activated = !1)
                                }));
                                var r = this.elements.filter((function (t) {
                                    return t.state.activated
                                })).map((function (t) {
                                    return {
                                        text: t.state.text,
                                        value: t.state.value
                                    }
                                }));
                                this.jodit.e.fire(this, "select", r), null === (n = (e = this.options).onChange) || void 0 === n || n.call(e, r)
                            }, (0, o.Cg)([r.s], e)
                        }(n(6455).U)
                },
                31230: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 24 24"> <g transform="translate(-251.000000, -443.000000)"> <g transform="translate(215.000000, 119.000000)"/> <path d="M252,448 L256,448 L256,444 L252,444 L252,448 Z M257,448 L269,448 L269,446 L257,446 L257,448 Z M257,464 L269,464 L269,462 L257,462 L257,464 Z M270,444 L270,448 L274,448 L274,444 L270,444 Z M252,462 L252,466 L256,466 L256,462 L252,462 Z M270,462 L270,466 L274,466 L274,462 L270,462 Z M254,461 L256,461 L256,449 L254,449 L254,461 Z M270,461 L272,461 L272,449 L270,449 L270,461 Z"/> </g> </svg>'
                },
                31365: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 32 32"> <path d="M27 4l-15 15-7-7-5 5 12 12 20-20z"/> </svg>'
                },
                31635: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C6: function () {
                            return r
                        },
                        Cg: function () {
                            return s
                        },
                        Cl: function () {
                            return i
                        },
                        Ju: function () {
                            return c
                        },
                        YH: function () {
                            return u
                        },
                        fX: function () {
                            return f
                        },
                        sH: function () {
                            return a
                        },
                        zs: function () {
                            return l
                        }
                    });
                    var o = function (t, e) {
                        return o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function (t, e) {
                            t.__proto__ = e
                        } || function (t, e) {
                            for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n])
                        }, o(t, e)
                    };

                    function r(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");

                        function n() {
                            this.constructor = t
                        }
                        o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                    }
                    var i = function () {
                        return i = Object.assign || function (t) {
                            for (var e, n = 1, o = arguments.length; o > n; n++)
                                for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                            return t
                        }, i.apply(this, arguments)
                    };

                    function s(t, e, n, o) {
                        var r, i = arguments.length,
                            s = 3 > i ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);
                        else
                            for (var a = t.length - 1; a >= 0; a--)(r = t[a]) && (s = (3 > i ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);
                        return i > 3 && s && Object.defineProperty(e, n, s), s
                    }

                    function a(t, e, n, o) {
                        return new(n || (n = Promise))((function (r, i) {
                            function s(t) {
                                try {
                                    u(o.next(t))
                                } catch (t) {
                                    i(t)
                                }
                            }

                            function a(t) {
                                try {
                                    u(o.throw(t))
                                } catch (t) {
                                    i(t)
                                }
                            }

                            function u(t) {
                                var e;
                                t.done ? r(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) {
                                    t(e)
                                }))).then(s, a)
                            }
                            u((o = o.apply(t, e || [])).next())
                        }))
                    }

                    function u(t, e) {
                        var n, o, r, i = {
                                label: 0,
                                sent: function () {
                                    if (1 & r[0]) throw r[1];
                                    return r[1]
                                },
                                trys: [],
                                ops: []
                            },
                            s = Object.create(("function" == typeof Iterator ? Iterator : Object).prototype);
                        return s.next = a(0), s.throw = a(1), s.return = a(2), "function" == typeof Symbol && (s[Symbol.iterator] = function () {
                            return this
                        }), s;

                        function a(a) {
                            return function (u) {
                                return function (a) {
                                    if (n) throw new TypeError("Generator is already executing.");
                                    for (; s && (s = 0, a[0] && (i = 0)), i;) try {
                                        if (n = 1, o && (r = 2 & a[0] ? o.return : a[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, a[1])).done) return r;
                                        switch (o = 0, r && (a = [2 & a[0], r.value]), a[0]) {
                                            case 0:
                                            case 1:
                                                r = a;
                                                break;
                                            case 4:
                                                return i.label++, {
                                                    value: a[1],
                                                    done: !1
                                                };
                                            case 5:
                                                i.label++, o = a[1], a = [0];
                                                continue;
                                            case 7:
                                                a = i.ops.pop(), i.trys.pop();
                                                continue;
                                            default:
                                                if (!((r = (r = i.trys).length > 0 && r[r.length - 1]) || 6 !== a[0] && 2 !== a[0])) {
                                                    i = 0;
                                                    continue
                                                }
                                                if (3 === a[0] && (!r || a[1] > r[0] && r[3] > a[1])) {
                                                    i.label = a[1];
                                                    break
                                                }
                                                if (6 === a[0] && r[1] > i.label) {
                                                    i.label = r[1], r = a;
                                                    break
                                                }
                                                if (r && r[2] > i.label) {
                                                    i.label = r[2], i.ops.push(a);
                                                    break
                                                }
                                                r[2] && i.ops.pop(), i.trys.pop();
                                                continue
                                        }
                                        a = e.call(t, i)
                                    } catch (t) {
                                        a = [6, t], o = 0
                                    } finally {
                                        n = r = 0
                                    }
                                    if (5 & a[0]) throw a[1];
                                    return {
                                        value: a[0] ? a[1] : void 0,
                                        done: !0
                                    }
                                }([a, u])
                            }
                        }
                    }

                    function c(t) {
                        var e = "function" == typeof Symbol && Symbol.iterator,
                            n = e && t[e],
                            o = 0;
                        if (n) return n.call(t);
                        if (t && "number" == typeof t.length) return {
                            next: function () {
                                return t && o >= t.length && (t = void 0), {
                                    value: t && t[o++],
                                    done: !t
                                }
                            }
                        };
                        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
                    }

                    function l(t, e) {
                        var n = "function" == typeof Symbol && t[Symbol.iterator];
                        if (!n) return t;
                        var o, r, i = n.call(t),
                            s = [];
                        try {
                            for (;
                                (void 0 === e || e-- > 0) && !(o = i.next()).done;) s.push(o.value)
                        } catch (t) {
                            r = {
                                error: t
                            }
                        } finally {
                            try {
                                o && !o.done && (n = i.return) && n.call(i)
                            } finally {
                                if (r) throw r.error
                            }
                        }
                        return s
                    }

                    function f(t, e, n) {
                        if (n || 2 === arguments.length)
                            for (var o, r = 0, i = e.length; i > r; r++) !o && r in e || (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
                        return t.concat(o || Array.prototype.slice.call(e))
                    }
                    "function" == typeof SuppressedError && SuppressedError
                },
                31686: function (t, e, n) {
                    "use strict";
                    var o = n(65147),
                        r = n(35265),
                        i = n(20703),
                        s = n(931),
                        a = n(36115),
                        u = n(16116),
                        c = n(36339),
                        l = n.n(c);
                    a.T.prototype.video = {
                        parseUrlToVideoEmbed: o.convertMediaUrlToVideoEmbed,
                        defaultWidth: 400,
                        defaultHeight: 345
                    }, s.I.set("video", l()), a.T.prototype.controls.video = {
                        popup: function (t, e, n) {
                            var s = new i.XV(t, [new i.Yh(t, [new i.tS(t, {
                                    name: "url",
                                    required: !0,
                                    label: "URL",
                                    placeholder: "https://",
                                    validators: ["url"]
                                })]), new i.Yh(t, [(0, r.$n)(t, "", "Insert", "primary").onAction((function () {
                                    return s.submit()
                                }))])]),
                                a = new i.XV(t, [new i.Yh(t, [new i.F0(t, {
                                    name: "code",
                                    required: !0,
                                    label: "Embed code"
                                })]), new i.Yh(t, [(0, r.$n)(t, "", "Insert", "primary").onAction((function () {
                                    return a.submit()
                                }))])]),
                                c = [],
                                l = function (e) {
                                    t.s.restore(), t.s.insertHTML(e), n()
                                };
                            return t.s.save(), c.push({
                                icon: "link",
                                name: "Link",
                                content: s.container
                            }, {
                                icon: "source",
                                name: "Code",
                                content: a.container
                            }), s.onSubmit((function (e) {
                                var n, r, i, s;
                                l((0, o.call)(null !== (r = null === (n = t.o.video) || void 0 === n ? void 0 : n.parseUrlToVideoEmbed) && void 0 !== r ? r : o.convertMediaUrlToVideoEmbed, e.url, {
                                    width: null === (i = t.o.video) || void 0 === i ? void 0 : i.defaultWidth,
                                    height: null === (s = t.o.video) || void 0 === s ? void 0 : s.defaultHeight
                                }))
                            })), a.onSubmit((function (t) {
                                l(t.code)
                            })), (0, u.Zg)(t, c)
                        },
                        tags: ["iframe"],
                        tooltip: "Insert youtube/vimeo video"
                    }
                },
                31859: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        r: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(71842),
                        i = n(9979);

                    function s(t) {
                        return (0, o.sH)(this, void 0, Promise, (function () {
                            var e, n;
                            return (0, o.YH)(this, (function (o) {
                                return t.tree.setMod("active", !0), r.J.detach(t.tree.container), e = (0, i.f)(t), t.o.showFoldersPanel ? (t.tree.setMod("loading", !0), n = t.dataProvider.tree(t.state.currentPath, t.state.currentSource).then((function (e) {
                                    t.state.sources = e
                                })).catch(t.status).finally((function () {
                                    return t.tree.setMod("loading", !1)
                                })), [2, Promise.all([n, e])]) : (t.tree.setMod("active", !1), [2, e])
                            }))
                        }))
                    }
                },
                31970: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        l: function () {
                            return d
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(24767),
                        s = n(65147),
                        a = n(6455),
                        u = n(931),
                        c = n(16116),
                        l = n(33403),
                        f = n(46681),
                        d = function (t) {
                            function e(e, n, o, r) {
                                var i = t.call(this, e) || this;
                                return i.state = n, i.handlers = r, i.__mainTab = new l.k(i.jodit, i.state, i.handlers), i.__positionTab = new f._(i.jodit, i.state, i.handlers), i.getElm("tabsBox").appendChild((0, c.Zg)(e, [{
                                    name: "Image",
                                    content: i.__mainTab
                                }, {
                                    name: "Advanced",
                                    content: i.__positionTab
                                }], o)), i.setMod("lock-size", i.state.sizeIsLocked), i.append(i.__mainTab).append(i.__positionTab), i
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIImagePropertiesForm"
                            }, e.prototype.appendChildToContainer = function () {}, e.prototype.getElm = function (e) {
                                var n, r, i = t.prototype.getElm.call(this, e);
                                if (i) return i;
                                try {
                                    for (var s = (0, o.Ju)(this.elements), a = s.next(); !a.done; a = s.next()) {
                                        var u = a.value.getElm(e);
                                        if (u) return u
                                    }
                                } catch (t) {
                                    n = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        a && !a.done && (r = s.return) && r.call(s)
                                    } finally {
                                        if (n) throw n.error
                                    }
                                }
                                return null
                            }, e.prototype.render = function () {
                                return '<form>\n\t\t<div class="jodit-grid jodit-grid_xs-column">\n\t\t\t<div class="jodit_col-lg-2-5 jodit_col-xs-5-5">\n\t\t\t\t<div class="&__view-box">\n\t\t\t\t\t<div class="&__imageView">\n\t\t\t\t\t\t<img class="&__imageViewSrc" src="" alt=""/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="jodit-form__group &__imageSizes">\n\t\t\t\t\t\t<input type="text" class="jodit-input &__imageWidth"/>\n\t\t\t\t\t\t<a class="&__lockSize">'.concat(u.I.get("lock"), '</a>\n\t\t\t\t\t\t<input type="text" class="&__imageHeight jodit-input"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="jodit_col-lg-3-5 jodit_col-xs-5-5 &__tabsBox"></div>\n\t\t</div>\n\t</form>')
                            }, e.prototype.onChangeSizeIsLocked = function () {
                                var t = this.getElm("lockSize"),
                                    e = this.getElm("imageWidth");
                                t.innerHTML = u.I.get(this.state.sizeIsLocked ? "lock" : "unlock"), this.setMod("lock-size", this.state.sizeIsLocked), this.j.e.fire(e, "change")
                            }, e.prototype.onLockSizeClick = function () {
                                this.state.sizeIsLocked = !this.state.sizeIsLocked
                            }, e.prototype.onStateValuesSizeChange = function () {
                                var t = this.getElm("imageWidth"),
                                    e = this.getElm("imageHeight");
                                t !== this.j.od.activeElement && (t.value = this.state.values.imageWidth.toString()), e !== this.j.od.activeElement && (e.value = this.state.values.imageHeight.toString())
                            }, e.prototype.onImageWidthChange = function (t) {
                                var e = this.getElm("imageWidth"),
                                    n = this.getElm("imageHeight");
                                if (!this.state.sizeIsLocked || !(0, s.isNumeric)(e.value) || !(0, s.isNumeric)(n.value)) return this.state.values.imageWidth = e.value, void(this.state.values.imageHeight = n.value);
                                var o = parseFloat(e.value),
                                    r = parseFloat(n.value);
                                t.target === e ? (this.state.values.imageWidth = o, this.state.values.imageHeight = Math.round(o / this.state.ratio)) : (this.state.values.imageWidth = Math.round(r * this.state.ratio), this.state.values.imageHeight = r)
                            }, e.prototype.onStateValuesImageSrcChange = function () {
                                var t = this.state.values.imageSrc;
                                if (t) {
                                    var e = this.getElm("imageViewSrc");
                                    (0, s.attr)(e, "src", t);
                                    var n = new Image;
                                    n.src = t, this.state.image = n
                                }
                            }, e.prototype.hideFieldByOptions = function () {
                                var t = this,
                                    e = this.j.o.image;
                                [
                                    ["editSize", "imageSizes"],
                                    ["showPreview", "imageView"]
                                ].forEach((function (n) {
                                    var r = (0, o.zs)(n, 2),
                                        i = r[0],
                                        a = t.getElm(r[1]);
                                    (0, s.css)(a, "display", e[i] ? null : "none")
                                }))
                            }, (0, o.Cg)([(0, r.hook)("ready"), (0, r.watch)("state.sizeIsLocked")], e.prototype, "onChangeSizeIsLocked", null), (0, o.Cg)([(0, r.watch)("lockSize:click")], e.prototype, "onLockSizeClick", null), (0, o.Cg)([(0, r.hook)("ready"), (0, r.watch)(["state.values.imageWidth", "state.values.imageHeight"])], e.prototype, "onStateValuesSizeChange", null), (0, o.Cg)([(0, r.watch)(["imageWidth:change", "imageHeight:change", "imageWidth:keydown", "imageHeight:keydown", "imageWidth:mousedown", "imageHeight:mousedown", "imageWidth:paste", "imageHeight:paste"]), (0, r.debounce)()], e.prototype, "onImageWidthChange", null), (0, o.Cg)([(0, r.hook)("ready"), (0, r.watch)("state.values.imageSrc")], e.prototype, "onStateValuesImageSrcChange", null), (0, o.Cg)([(0, r.hook)("ready")], e.prototype, "hideFieldByOptions", null), (0, o.Cg)([i.s], e)
                        }(a.U)
                },
                32013: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"/> </svg>'
                },
                32014: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(59101);

                    function s(t, e, n, s, a, u) {
                        return function (t, e, n, s, a) {
                            if (!r.J.isText(e)) {
                                if (s && !s[e.nodeName]) return !0;
                                if (!s && a && a[e.nodeName]) return !0
                            }
                            return !!t.o.cleanHTML.removeEmptyElements && r.J.isElement(e) && null != e.nodeName.match(o.IS_INLINE) && !r.J.isTemporary(e) && 0 === (0, i.Bq)(e.innerHTML).length && (null == n || !r.J.isOrContains(e, n))
                        }(t, e, u, s, a) ? (r.J.safeRemove(e), !0) : n
                    }
                },
                32291: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        M: function () {
                            return c
                        },
                        o: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(449),
                        s = n(27301),
                        a = n(96134),
                        u = new Set;

                    function c(t, e) {
                        return (0, o.sH)(this, void 0, Promise, (function () {
                            var n;
                            return (0, o.YH)(this, (function (o) {
                                return n = l(t, e, !1), u.has(n) ? [2] : (u.add(n), [2, (0, s.S5)(t, n)])
                            }))
                        }))
                    }

                    function l(t, e, n) {
                        return e = (0, i.k)(e), t.basePath + "plugins/" + e + "/" + e + (t.minified ? ".min" : "") + "." + (n ? "js" : "css")
                    }

                    function f(t, e, n, o) {
                        try {
                            var i = n.filter((function (e) {
                                return !t.has((0, a.P)(e.name))
                            }));
                            i.length && function (t, e, n) {
                                e.map((function (e) {
                                    var o = e.url || l(t, e.name, !0);
                                    return (0, s.w4)(t, o).then(n).catch((function () {
                                        return null
                                    }))
                                }))
                            }(e, i, o)
                        } catch (t) {
                            if (!r.IS_PROD) throw t
                        }
                    }
                },
                32332: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        s: function () {
                            return l
                        }
                    });
                    var o = n(31635),
                        r = n(66927),
                        i = n(37923),
                        s = n(69810),
                        a = n(25376),
                        u = Symbol("observable-object");

                    function c(t) {
                        return void 0 !== t[u]
                    }

                    function l(t) {
                        if (c(t)) return t;
                        var e = {},
                            n = {},
                            l = function (e, o) {
                                return (0, i.c)(e) ? (e.map((function (t) {
                                    return l(t, o)
                                })), t) : (n[e] || (n[e] = []), n[e].push(o), t)
                            },
                            f = function (r) {
                                for (var s = [], a = 1; arguments.length > a; a++) s[a - 1] = arguments[a];
                                if ((0, i.c)(r)) r.map((function (t) {
                                    return f.apply(void 0, (0, o.fX)([t], (0, o.zs)(s), !1))
                                }));
                                else try {
                                    !e[r] && n[r] && (e[r] = !0, n[r].forEach((function (e) {
                                        return e.call.apply(e, (0, o.fX)([t], (0, o.zs)(s), !1))
                                    })))
                                } finally {
                                    e[r] = !1
                                }
                            },
                            d = function (e, n) {
                                void 0 === n && (n = []);
                                var i = {};
                                c(e) || (Object.defineProperty(e, u, {
                                    enumerable: !1,
                                    value: !0
                                }), Object.keys(e).forEach((function (u) {
                                    var c = u,
                                        l = n.concat(c).filter((function (t) {
                                            return t.length
                                        }));
                                    i[c] = e[c];
                                    var p = (0, r.N)(e, c);
                                    Object.defineProperty(e, c, {
                                        set: function (e) {
                                            var n = i[c];
                                            if (!(0, s.P)(i[c], e)) {
                                                f(["beforeChange", "beforeChange.".concat(l.join("."))], c, e), (0, a.Q)(e) && d(e, l), p && p.set ? p.set.call(t, e) : i[c] = e;
                                                var r = [];
                                                f((0, o.fX)(["change"], (0, o.zs)(l.reduce((function (t, e) {
                                                    return r.push(e), t.push("change.".concat(r.join("."))), t
                                                }), [])), !1), l.join("."), n, (null == e ? void 0 : e.valueOf) ? e.valueOf() : e)
                                            }
                                        },
                                        get: function () {
                                            return p && p.get ? p.get.call(t) : i[c]
                                        },
                                        enumerable: !0,
                                        configurable: !0
                                    }), (0, a.Q)(i[c]) && d(i[c], l)
                                })), Object.defineProperty(t, "on", {
                                    value: l
                                }))
                            };
                        return d(t), t
                    }
                },
                32709: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $r: function () {
                            return i.$
                        },
                        _j: function () {
                            return o._
                        },
                        uM: function () {
                            return r.u
                        }
                    });
                    var o = n(82317),
                        r = n(42589),
                        i = n(42448)
                },
                32782: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        L: function () {
                            return i
                        }
                    });
                    var o = n(55186),
                        r = n(65147);

                    function i(t, e, n) {
                        return !(!o.J.isElement(e) || !(0, r.sanitizeHTMLElement)(e, {
                            safeJavaScriptLink: t.options.cleanHTML.safeJavaScriptLink,
                            removeOnError: t.options.cleanHTML.removeOnError
                        })) || n
                    }
                },
                33087: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        y: function () {
                            return i
                        }
                    });
                    var o = n(64567),
                        r = n(12041);

                    function i(t, e) {
                        t.hookStatus(o.f.ready, (function (t) {
                            var n = (0, r.h)(t) ? t : t.jodit,
                                o = "".concat(n.options.namespace).concat(t.componentName, "_prop_").concat(e),
                                i = t[e];
                            Object.defineProperty(t, e, {
                                get: function () {
                                    var t;
                                    return null !== (t = n.storage.get(o)) && void 0 !== t ? t : i
                                },
                                set: function (t) {
                                    n.storage.set(o, t)
                                }
                            })
                        }))
                    }
                },
                33201: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return i
                        }
                    });
                    var o = n(55186),
                        r = n(26150);

                    function i(t, e, n) {
                        var i = o.J.closest(t.sourceImage, "a", e.editor);
                        i ? (n.imageLink = (0, r.C)(i, "href") || "", n.imageLinkOpenInNewTab = "_blank" === (0, r.C)(i, "target")) : (n.imageLink = "", n.imageLinkOpenInNewTab = !1)
                    }
                },
                33403: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = n(71151),
                        s = n(66927),
                        a = n(65147),
                        u = function (t) {
                            function e(e, n, o) {
                                var r = t.call(this, e) || this;
                                return r.state = n, r.handlers = o, r
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIImageMainTab"
                            }, e.prototype.appendChildToContainer = function () {}, e.prototype.render = function () {
                                return '<div class="jodit-form__group &__editSrc">\n\t\t\t<label>~Src~</label>\n\t\t\t<div class="jodit-input_group">\n\t\t\t\t<input class="jodit-input &__imageSrc" type="text"/>\n\t\t\t\t<div class="jodit-input_group-buttons &__fixImage">\n\t\t\t\t\t\t<a class="jodit-button &__changeImage">*image*</a>\n\t\t\t\t\t\t<a class="jodit-button &__editImage">*crop*</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="jodit-form__group &__editTitle">\n\t\t\t<label>~Title~</label>\n\t\t\t<input type="text" class="jodit-input &__imageTitle"/>\n\t\t</div>\n\t\t<div class="jodit-form__group &__editAlt">\n\t\t\t<label>~Alternative~</label>\n\t\t\t<input type="text" class="jodit-input &__imageAlt"/>\n\t\t</div>\n\t\t<div class="jodit-form__group &__editLink">\n\t\t\t<label>~Link~</label>\n\t\t\t<input type="text" class="jodit-input &__imageLink"/>\n\t\t</div>\n\t\t<div class="jodit-form__group &__editLinkTarget">\n\t\t\t<label class="jodit_vertical_middle">\n\t\t\t\t<input type="checkbox" class="jodit-checkbox &__imageLinkOpenInNewTab"/>\n\t\t\t\t<span>~Open link in new tab~</span>\n\t\t\t</label>\n\t\t</div>'
                            }, e.prototype.onStateImageSrcChange = function () {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    return (0, o.YH)(this, (function (t) {
                                        return this.getElm("imageSrc").value = this.state.values.imageSrc, [2]
                                    }))
                                }))
                            }, e.prototype.onImageSrcChange = function () {
                                this.state.values.imageSrc = this.getElm("imageSrc").value
                            }, e.prototype.onEditImageClick = function (t) {
                                this.handlers.openImageEditor(), t.stopPropagation()
                            }, e.prototype.onChangeImageClick = function (t) {
                                this.handlers.openImagePopup(this.getElm("changeImage")), t.stopPropagation()
                            }, e.prototype.onStateTitleChange = function () {
                                this.getElm("imageTitle").value = this.state.values.imageTitle
                            }, e.prototype.onTitleChange = function () {
                                this.state.values.imageTitle = this.getElm("imageTitle").value
                            }, e.prototype.onStateAltChange = function () {
                                this.getElm("imageAlt").value = this.state.values.imageAlt
                            }, e.prototype.onAltChange = function () {
                                this.state.values.imageAlt = this.getElm("imageAlt").value
                            }, e.prototype.onStateImageLinkChange = function () {
                                this.getElm("imageLink").value = this.state.values.imageLink
                            }, e.prototype.onImageLinkChange = function () {
                                this.state.values.imageLink = this.getElm("imageLink").value
                            }, e.prototype.onStateImageLinkOpenInNewTabChange = function () {
                                this.getElm("imageLinkOpenInNewTab").checked = this.state.values.imageLinkOpenInNewTab
                            }, e.prototype.onImageLinkOpenInNewTabChange = function () {
                                this.state.values.imageLinkOpenInNewTab = this.getElm("imageLinkOpenInNewTab").checked
                            }, e.prototype.hideFieldByOptions = function () {
                                var t = this,
                                    e = this.j.o,
                                    n = e.image;
                                [
                                    ["editSrc", "editSrc"],
                                    ["editTitle", "editTitle"],
                                    ["editAlt", "editAlt"],
                                    ["editLink", "editLink"],
                                    ["editLink", "editLinkTarget"],
                                    ["useImageEditor", "editImage"]
                                ].forEach((function (e) {
                                    var r = (0, o.zs)(e, 2),
                                        i = r[0],
                                        s = t.getElm(r[1]);
                                    (0, a.css)(s, "display", n[i] ? null : "none")
                                }));
                                var r = this.getElm("changeImage"),
                                    i = Boolean(e.filebrowser.ajax.url || e.uploader.url);
                                (0, a.css)(r, "display", i ? null : "none");
                                var s = this.getElm("editImage"),
                                    u = Boolean(e.filebrowser.ajax.url) && n.useImageEditor;
                                (0, a.css)(s, "display", u ? null : "none");
                                var c = this.getElm("fixImage");
                                (0, a.css)(c, "display", i || u ? null : "none")
                            }, (0, o.Cg)([(0, s.w)("state.values.imageSrc")], e.prototype, "onStateImageSrcChange", null), (0, o.Cg)([(0, s.w)("imageSrc:change")], e.prototype, "onImageSrcChange", null), (0, o.Cg)([(0, s.w)("editImage:click")], e.prototype, "onEditImageClick", null), (0, o.Cg)([(0, s.w)("changeImage:click")], e.prototype, "onChangeImageClick", null), (0, o.Cg)([(0, s.w)("state.values.imageTitle")], e.prototype, "onStateTitleChange", null), (0, o.Cg)([(0, s.w)("imageTitle:change")], e.prototype, "onTitleChange", null), (0, o.Cg)([(0, s.w)("state.values.imageAlt")], e.prototype, "onStateAltChange", null), (0, o.Cg)([(0, s.w)("imageAlt:change")], e.prototype, "onAltChange", null), (0, o.Cg)([(0, s.w)("state.values.imageLink")], e.prototype, "onStateImageLinkChange", null), (0, o.Cg)([(0, s.w)("imageLink:change")], e.prototype, "onImageLinkChange", null), (0, o.Cg)([(0, s.w)("state.values.imageLinkOpenInNewTab")], e.prototype, "onStateImageLinkOpenInNewTabChange", null), (0, o.Cg)([(0, s.w)("imageLinkOpenInNewTab:change")], e.prototype, "onImageLinkOpenInNewTabChange", null), (0, o.Cg)([(0, i.A)("ready")], e.prototype, "hideFieldByOptions", null), (0, o.Cg)([r.s], e)
                        }(n(6455).U)
                },
                33733: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        q: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(37923),
                        i = n(27594),
                        s = n(80071),
                        a = n(10067);

                    function u(t, e, n, u) {
                        var c = this,
                            l = new s.z(e),
                            f = function () {
                                l.close(), l.destruct()
                            };
                        l.setContent((0, a.k)(t, {
                            upload: function (t) {
                                t.files && t.files.length && (n.values.imageSrc = t.baseurl + t.files[0]), f()
                            },
                            filebrowser: function (t) {
                                return (0, o.sH)(c, void 0, void 0, (function () {
                                    return (0, o.YH)(this, (function (e) {
                                        return t && (0, r.c)(t.files) && t.files.length && (n.values.imageSrc = t.files[0], f()), [2]
                                    }))
                                }))
                            }
                        }, n.image, f)).open((function () {
                            return (0, i.G)(u)
                        }))
                    }
                },
                34045: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5 163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0 225-52t179-147q7-10 23-12 14 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109 132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298 164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14 39 17 39 59z"/> </svg>'
                },
                34125: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Ej: function () {
                            return s.E
                        },
                        G1: function () {
                            return u.G
                        },
                        cY: function () {
                            return a.c
                        },
                        mH: function () {
                            return r.m
                        },
                        xM: function () {
                            return i.x
                        },
                        y6: function () {
                            return o.y
                        }
                    });
                    var o = n(73780),
                        r = n(98228),
                        i = n(49744),
                        s = n(95350),
                        a = n(91594),
                        u = n(27594)
                },
                34248: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        t: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = n(37923),
                        s = n(92032),
                        a = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "ContextMenu"
                            }, e.prototype.show = function (t, e, n) {
                                var o = this,
                                    r = this;
                                r.clear(), (0, i.c)(n) && (n.forEach((function (t) {
                                    if (t) {
                                        var e = (0, s.$n)(o.jodit, t.icon || "empty", t.title);
                                        o.jodit && e.setParentView(o.jodit), e.setMod("context", "menu"), e.onAction((function (e) {
                                            var n;
                                            return null === (n = t.exec) || void 0 === n || n.call(r, e), r.clear(), r.close(), !1
                                        })), o.append(e)
                                    }
                                })), this.open((function () {
                                    return {
                                        left: t,
                                        top: e,
                                        width: 0,
                                        height: 0
                                    }
                                }), !0))
                            }, (0, o.Cg)([r.s], e)
                        }(n(80071).z)
                },
                34256: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Fc: function () {
                            return o.F
                        },
                        XG: function () {
                            return s.X
                        },
                        lG: function () {
                            return i.l
                        },
                        pT: function () {
                            return r.p
                        }
                    });
                    var o = n(5854),
                        r = n(23132),
                        i = n(58006),
                        s = n(91560)
                },
                34446: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                        if ("undefined" != typeof navigator && -1 !== navigator.userAgent.indexOf("Mac OS X")) {
                            if (t.metaKey && !t.altKey) return !0
                        } else if (t.ctrlKey && !t.altKey) return !0;
                        return !1
                    }
                },
                34796: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return Boolean(t) && "function" === (typeof t).toLowerCase() && (t === Function.prototype || /^\s*function\s*(\b[a-z$_][a-z0-9$_]*\b)*\s*\((|([a-z$_][a-z0-9$_]*)(\s*,[a-z$_][a-z0-9$_]*)*)\)\s*{\s*\[native code]\s*}\s*$/i.test(String(t)))
                    }
                    n.d(e, {
                        a: function () {
                            return o
                        }
                    })
                },
                34899: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Z: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = function (t) {
                            function e(n) {
                                var o = t.call(this, n) || this;
                                return Object.setPrototypeOf(o, e.prototype), o
                            }
                            return (0, o.C6)(e, t), e
                        }(TypeError)
                },
                35265: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $n: function () {
                            return o.$n
                        },
                        SB: function () {
                            return i.S
                        },
                        lD: function () {
                            return o.lD
                        },
                        ss: function () {
                            return r.s
                        },
                        ue: function () {
                            return o.ue
                        }
                    });
                    var o = n(92032),
                        r = n(31202),
                        i = n(36434)
                },
                35523: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(55186),
                        s = n(56298),
                        a = n(83260),
                        u = n(71005),
                        c = n(53048),
                        l = (n(41133), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.proxyEventsList = ["click", "mousedown", "touchstart", "mouseup", "touchend"], e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                this.proxyEventsList.forEach((function (n) {
                                    t.e.on(n + ".select", e.onStartSelection)
                                }))
                            }, e.prototype.beforeDestruct = function (t) {
                                var e = this;
                                this.proxyEventsList.forEach((function (n) {
                                    t.e.on(n + ".select", e.onStartSelection)
                                }))
                            }, e.prototype.onStartSelection = function (t) {
                                for (var e, n = this.j, o = t.target; void 0 === e && o && o !== n.editor;) e = n.e.fire((0, a.x)(t.type + "_" + o.nodeName.toLowerCase()), o, t), o = o.parentElement;
                                "click" === t.type && void 0 === e && o === n.editor && n.e.fire(t.type + "Editor", o, t)
                            }, e.prototype.onOutsideClick = function (t) {
                                var e = this,
                                    n = t.target;
                                i.J.up(n, (function (t) {
                                    return t === e.j.editor
                                })) || c.D$.closestElement(n, c.zD) || this.j.e.fire("outsideClick", t)
                            }, e.prototype.beforeCommandCut = function () {
                                var t = this.j.s;
                                if (!t.isCollapsed()) {
                                    var e = t.current();
                                    e && i.J.isOrContains(this.j.editor, e) && this.onCopyNormalizeSelectionBound()
                                }
                            }, e.prototype.beforeCommandSelectAll = function () {
                                var t = this.j.s;
                                return t.focus(), t.select(this.j.editor, !0), t.expandSelection(), !1
                            }, e.prototype.onTripleClickNormalizeSelection = function (t) {
                                if (3 === t.detail && this.j.o.select.normalizeTripleClick) {
                                    var e = this.j.s,
                                        n = e.range,
                                        o = n.startContainer;
                                    0 === n.startOffset && i.J.isText(o) && e.select(i.J.closest(o, i.J.isBlock, this.j.editor) || o, !0)
                                }
                            }, e.prototype.onCopyNormalizeSelectionBound = function (t) {
                                var e = this.j,
                                    n = e.editor;
                                e.o.select.normalizeSelectionBeforeCutAndCopy && !e.s.isCollapsed() && (!t || t.isTrusted && i.J.isNode(t.target) && i.J.isOrContains(n, t.target)) && this.jodit.s.expandSelection()
                            }, (0, o.Cg)([r.autobind], e.prototype, "onStartSelection", null), (0, o.Cg)([(0, r.watch)("ow:click")], e.prototype, "onOutsideClick", null), (0, o.Cg)([(0, r.watch)([":beforeCommandCut"])], e.prototype, "beforeCommandCut", null), (0, o.Cg)([(0, r.watch)([":beforeCommandSelectall"])], e.prototype, "beforeCommandSelectAll", null), (0, o.Cg)([(0, r.watch)([":click"])], e.prototype, "onTripleClickNormalizeSelection", null), (0, o.Cg)([(0, r.watch)([":copy", ":cut"])], e.prototype, "onCopyNormalizeSelectionBound", null), e
                        }(u.k));
                    s.fg.add("select", l)
                },
                35541: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(55186),
                        s = n(56298),
                        a = n(97369),
                        u = n(29866),
                        c = (n(61964), n(84182)),
                        l = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.buttons = [{
                                    name: "symbols",
                                    group: "insert"
                                }], n.__countInRow = 17, (0, s.JW)(c), n
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.e.on("generateSpecialCharactersTable.symbols", (function () {
                                    for (var n = t.c.fromHTML('<div class="jodit-symbols__container">\n\t\t\t\t\t\t<div class="jodit-symbols__container_table">\n\t\t\t\t\t\t\t<table class="jodit-symbols__table"><tbody></tbody></table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="jodit-symbols__container_preview">\n\t\t\t\t\t\t\t<div class="jodit-symbols__preview"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'), o = n.querySelector(".jodit-symbols__preview"), s = n.querySelector("table").tBodies[0], u = [], c = 0; t.o.specialCharacters.length > c;) {
                                        for (var l = t.c.element("tr"), f = 0; e.__countInRow > f && t.o.specialCharacters.length > c; f += 1, c += 1) {
                                            var d = t.c.element("td"),
                                                p = t.c.fromHTML('<a\n\t\t\t\t\t\t\t\t\tdata-index="'.concat(c, '"\n\t\t\t\t\t\t\t\t\tdata-index-j="').concat(f, '"\n\t\t\t\t\t\t\t\t\trole="option"\n\t\t\t\t\t\t\t\t\ttabindex="-1"\n\t\t\t\t\t\t\t>').concat(t.o.specialCharacters[c], "</a>"));
                                            u.push(p), d.appendChild(p), l.appendChild(d)
                                        }
                                        s.appendChild(l)
                                    }
                                    var h = e;
                                    return t.e.on(u, "focus", (function () {
                                        o.innerHTML = this.innerHTML
                                    })).on(u, "mousedown", (function (e) {
                                        i.J.isTag(this, "a") && (t.s.focus(), t.s.insertHTML(this.innerHTML), (null == e ? void 0 : e.shiftKey) || t.e.fire(this, "close_dialog"), e && e.preventDefault(), e && e.stopImmediatePropagation())
                                    })).on(u, "mouseenter", (function () {
                                        i.J.isTag(this, "a") && this.focus()
                                    })).on(u, "keydown", (function (e) {
                                        var n = e.target;
                                        if (i.J.isTag(n, "a")) {
                                            var o = parseInt((0, a.attr)(n, "-index") || "0", 10),
                                                s = parseInt((0, a.attr)(n, "data-index-j") || "0", 10),
                                                c = void 0;
                                            switch (e.key) {
                                                case r.KEY_UP:
                                                case r.KEY_DOWN:
                                                    void 0 === u[c = e.key === r.KEY_UP ? o - h.__countInRow : o + h.__countInRow] && (c = e.key === r.KEY_UP ? Math.floor(u.length / h.__countInRow) * h.__countInRow + s : s) > u.length - 1 && (c -= h.__countInRow), u[c] && u[c].focus();
                                                    break;
                                                case r.KEY_RIGHT:
                                                case r.KEY_LEFT:
                                                    void 0 === u[c = e.key === r.KEY_LEFT ? o - 1 : o + 1] && (c = e.key === r.KEY_LEFT ? u.length - 1 : 0), u[c] && u[c].focus();
                                                    break;
                                                case r.KEY_ENTER:
                                                    t.e.fire(n, "mousedown"), e.stopImmediatePropagation(), e.preventDefault()
                                            }
                                        }
                                    })), n
                                }))
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off("generateSpecialCharactersTable.symbols")
                            }, e
                        }(u.k);
                    s.fg.add("symbols", l)
                },
                35642: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return null == t
                    }
                    n.d(e, {
                        R: function () {
                            return o
                        }
                    })
                },
                36001: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.tableAllowCellResize = !0
                },
                36115: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        T: function () {
                            return r
                        }
                    });
                    var o = n(17352),
                        r = function () {
                            function t() {
                                this.cache = !0, this.defaultTimeout = 100, this.namespace = "", this.safeMode = !1, this.width = "auto", this.height = "auto", this.safePluginsList = ["about", "enter", "backspace", "size", "bold", "hotkeys"], this.license = "", this.preset = "custom", this.presets = {
                                    inline: {
                                        inline: !0,
                                        toolbar: !1,
                                        toolbarInline: !0,
                                        toolbarInlineForSelection: !0,
                                        showXPathInStatusbar: !1,
                                        showCharsCounter: !1,
                                        showWordsCounter: !1,
                                        showPlaceholder: !1
                                    }
                                }, this.ownerDocument = o.globalDocument, this.ownerWindow = o.globalWindow, this.shadowRoot = null, this.zIndex = 0, this.readonly = !1, this.disabled = !1, this.activeButtonsInReadOnly = ["source", "fullsize", "print", "about", "dots", "selectall"], this.allowCommandsInReadOnly = ["selectall", "preview", "print"], this.toolbarButtonSize = "middle", this.allowTabNavigation = !1, this.inline = !1, this.theme = "default", this.saveModeInStorage = !1, this.editorClassName = !1, this.className = !1, this.style = !1, this.containerStyle = !1, this.styleValues = {}, this.triggerChangeEvent = !0, this.direction = "", this.language = "auto", this.debugLanguage = !1, this.i18n = !1, this.tabIndex = -1, this.toolbar = !0, this.statusbar = !0, this.showTooltip = !0, this.showTooltipDelay = 200, this.useNativeTooltip = !1, this.defaultActionOnPaste = o.INSERT_AS_HTML, this.enter = o.PARAGRAPH, this.iframe = !1, this.editHTMLDocumentMode = !1, this.enterBlock = "br" !== this.enter ? this.enter : o.PARAGRAPH, this.defaultMode = o.MODE_WYSIWYG, this.useSplitMode = !1, this.colors = {
                                    greyscale: ["#000000", "#434343", "#666666", "#999999", "#B7B7B7", "#CCCCCC", "#D9D9D9", "#EFEFEF", "#F3F3F3", "#FFFFFF"],
                                    palette: ["#980000", "#FF0000", "#FF9900", "#FFFF00", "#00F0F0", "#00FFFF", "#4A86E8", "#0000FF", "#9900FF", "#FF00FF"],
                                    full: ["#E6B8AF", "#F4CCCC", "#FCE5CD", "#FFF2CC", "#D9EAD3", "#D0E0E3", "#C9DAF8", "#CFE2F3", "#D9D2E9", "#EAD1DC", "#DD7E6B", "#EA9999", "#F9CB9C", "#FFE599", "#B6D7A8", "#A2C4C9", "#A4C2F4", "#9FC5E8", "#B4A7D6", "#D5A6BD", "#CC4125", "#E06666", "#F6B26B", "#FFD966", "#93C47D", "#76A5AF", "#6D9EEB", "#6FA8DC", "#8E7CC3", "#C27BA0", "#A61C00", "#CC0000", "#E69138", "#F1C232", "#6AA84F", "#45818E", "#3C78D8", "#3D85C6", "#674EA7", "#A64D79", "#85200C", "#990000", "#B45F06", "#BF9000", "#38761D", "#134F5C", "#1155CC", "#0B5394", "#351C75", "#733554", "#5B0F00", "#660000", "#783F04", "#7F6000", "#274E13", "#0C343D", "#1C4587", "#073763", "#20124D", "#4C1130"]
                                }, this.colorPickerDefaultTab = "background", this.imageDefaultWidth = 300, this.removeButtons = [], this.disablePlugins = [], this.extraPlugins = [], this.extraButtons = [], this.extraIcons = {}, this.createAttributes = {
                                    table: {
                                        style: "border-collapse:collapse;width: 100%;"
                                    }
                                }, this.sizeLG = 900, this.sizeMD = 700, this.sizeSM = 400, this.buttons = [{
                                    group: "font-style",
                                    buttons: []
                                }, {
                                    group: "list",
                                    buttons: []
                                }, {
                                    group: "font",
                                    buttons: []
                                }, "---", {
                                    group: "script",
                                    buttons: []
                                }, {
                                    group: "media",
                                    buttons: []
                                }, "\n", {
                                    group: "state",
                                    buttons: []
                                }, {
                                    group: "clipboard",
                                    buttons: []
                                }, {
                                    group: "insert",
                                    buttons: []
                                }, {
                                    group: "indent",
                                    buttons: []
                                }, {
                                    group: "color",
                                    buttons: []
                                }, {
                                    group: "form",
                                    buttons: []
                                }, "---", {
                                    group: "history",
                                    buttons: []
                                }, {
                                    group: "search",
                                    buttons: []
                                }, {
                                    group: "source",
                                    buttons: []
                                }, {
                                    group: "other",
                                    buttons: []
                                }, {
                                    group: "info",
                                    buttons: []
                                }], this.events = {}, this.textIcons = !1, this.popupRoot = null, this.showBrowserColorPicker = !0
                            }
                            return Object.defineProperty(t, "defaultOptions", {
                                get: function () {
                                    return t.__defaultOptions || (t.__defaultOptions = new t), t.__defaultOptions
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t
                        }();
                    r.prototype.controls = {}
                },
                36133: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(71842),
                        s = n(56298),
                        a = n(65147),
                        u = n(71005),
                        c = n(34248),
                        l = n(8809),
                        f = (n(88850), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.onContext = function (t, n) {
                                    return e.menu || (e.menu = new c.t(e.j)), e.menu.show(n.clientX, n.clientY, [{
                                        icon: "bin",
                                        title: t === e.j.editor ? "Clear" : "Remove",
                                        exec: function () {
                                            t !== e.j.editor ? i.J.safeRemove(t) : e.j.value = "", e.j.synchronizeValues()
                                        }
                                    }, {
                                        icon: "select-all",
                                        title: "Select",
                                        exec: function () {
                                            e.j.s.select(t)
                                        }
                                    }]), !1
                                }, e.onSelectPath = function (t, n) {
                                    e.j.s.focus();
                                    var o = (0, a.attr)(n.target, "-path") || "/";
                                    if ("/" === o) return e.j.execCommand("selectall"), !1;
                                    try {
                                        var r = e.j.ed.evaluate(o, e.j.editor, null, XPathResult.ANY_TYPE, null).iterateNext();
                                        if (r) return e.j.s.select(r), !1
                                    } catch (t) {}
                                    return e.j.s.select(t), !1
                                }, e.tpl = function (t, n, o, r) {
                                    var i = e.j.c.fromHTML('<span class="jodit-xpath__item"><a role="button" data-path="'.concat(n, '" title="').concat(r, '" tabindex="-1"\'>').concat((0, a.trim)(o), "</a></span>")),
                                        s = i.firstChild;
                                    return e.j.e.on(s, "click", e.onSelectPath.bind(e, t)).on(s, "contextmenu", e.onContext.bind(e, t)), i
                                }, e.removeSelectAll = function () {
                                    e.selectAllButton && (e.selectAllButton.destruct(), delete e.selectAllButton)
                                }, e.appendSelectAll = function () {
                                    e.removeSelectAll(), e.selectAllButton = (0, l.BJ)(e.j, (0, o.Cl)({
                                        name: "selectall"
                                    }, e.j.o.controls.selectall)), e.selectAllButton.state.size = "tiny", e.container && e.container.insertBefore(e.selectAllButton.container, e.container.firstChild)
                                }, e.calcPathImd = function () {
                                    if (!e.isDestructed) {
                                        var t, n, o, s = e.j.s.current();
                                        e.container && (e.container.innerHTML = r.INVISIBLE_SPACE), s && i.J.up(s, (function (r) {
                                            !r || e.j.editor === r || i.J.isText(r) || i.J.isComment(r) || (t = r.nodeName.toLowerCase(), n = (0, a.getXPathByElement)(r, e.j.editor).replace(/^\//, ""), o = e.tpl(r, n, t, e.j.i18n("Select %s", t)), e.container && e.container.insertBefore(o, e.container.firstChild))
                                        }), e.j.editor), e.appendSelectAll()
                                    }
                                }, e.calcPath = e.j.async.debounce(e.calcPathImd, 2 * e.j.defaultTimeout), e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function () {
                                var t = this;
                                this.j.o.showXPathInStatusbar && (this.container = this.j.c.div("jodit-xpath"), this.j.e.off(".xpath").on("mouseup.xpath change.xpath keydown.xpath changeSelection.xpath", this.calcPath).on("afterSetMode.xpath afterInit.xpath changePlace.xpath", (function () {
                                    t.j.o.showXPathInStatusbar && t.container && (t.j.statusbar.append(t.container), t.j.getRealMode() === r.MODE_WYSIWYG ? t.calcPath() : (t.container && (t.container.innerHTML = r.INVISIBLE_SPACE), t.appendSelectAll()))
                                })), this.calcPath())
                            }, e.prototype.beforeDestruct = function () {
                                this.j && this.j.events && this.j.e.off(".xpath"), this.removeSelectAll(), this.menu && this.menu.destruct(), i.J.safeRemove(this.container), delete this.menu, delete this.container
                            }, e
                        }(u.k));
                    s.fg.add("xpath", f)
                },
                36291: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        D: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(55186);

                    function i(t, e, n) {
                        void 0 === n && (n = o.IS_BLOCK);
                        var s = t,
                            a = e.editor;
                        do {
                            if (!s || s === a) break;
                            if (n.test(s.nodeName)) return r.J.isLeaf(s) ? s : i(s.parentNode, e, /^li$/i) || s;
                            s = s.parentNode
                        } while (s && s !== a);
                        return null
                    }
                },
                36293: function (t, e, n) {
                    "use strict";
                    var o = n(56298),
                        r = n(65147);
                    n(39626), o.fg.add("color", (function (t) {
                        t.registerButton({
                            name: "brush",
                            group: "color"
                        });
                        var e = function (e, n, o) {
                            var i = (0, r.normalizeColor)(o);
                            switch (e) {
                                case "background":
                                    t.s.commitStyle({
                                        attributes: {
                                            style: {
                                                backgroundColor: i || ""
                                            }
                                        }
                                    });
                                    break;
                                case "forecolor":
                                    t.s.commitStyle({
                                        attributes: {
                                            style: {
                                                color: i || ""
                                            }
                                        }
                                    })
                            }
                            return t.synchronizeValues(), !1
                        };
                        t.registerCommand("forecolor", e).registerCommand("background", e)
                    }))
                },
                36327: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></svg>'
                },
                36339: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1792 352v1088q0 42-39 59-13 5-25 5-27 0-45-19l-403-403v166q0 119-84.5 203.5t-203.5 84.5h-704q-119 0-203.5-84.5t-84.5-203.5v-704q0-119 84.5-203.5t203.5-84.5h704q119 0 203.5 84.5t84.5 203.5v165l403-402q18-19 45-19 12 0 25 5 39 17 39 59z"/> </svg>'
                },
                36434: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        S: function () {
                            return p
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(22664),
                        s = n(71842),
                        a = n(56298),
                        u = n(27594),
                        c = n(97369),
                        l = n(29780),
                        f = ["scroll.tooltip", "joditCloseDialog", "mouseleave.tooltip"],
                        d = ["escape.tooltip", "change.tooltip", "changePlace.tooltip", "afterOpenPopup.tooltip", "hidePopup.tooltip", "beforePopupClose.tooltip", "closeAllPopups.tooltip"],
                        p = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.__isOpened = !1, n.__attachedContainers = new Set, n.__listenClose = !1, n.__currentTarget = null, n.__delayShowTimeout = 0, n.__hideTimeout = 0, e.o.textIcons || !e.o.showTooltip || e.o.useNativeTooltip || (n.j.e.on("getContainer", (function (t) {
                                    n.__onAttach(t)
                                })), e.hookStatus(r.f.ready, (function () {
                                    n.__onAttach(n.j.container)
                                }))), n
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                                return "UITooltip"
                            }, e.prototype.render = function () {
                                return '<div><div class="&__content"></div></div>'
                            }, e.prototype.__onAttach = function (t) {
                                (0, a.My)(this.j, n).appendChild(this.container), this.__attachedContainers.add(t), this.__attachedContainers.add(this.j.container), this.j.e.on(t, "mouseenter.tooltip", this.__onMouseEnter, {
                                    capture: !0
                                }).on(t, "mouseleave.tooltip", this.__onMouseLeave, {
                                    capture: !0
                                }).on(this.j.container, "mouseleave.tooltip", this.__onMouseLeave, {
                                    capture: !0
                                })
                            }, e.prototype.__addListenersOnEnter = function () {
                                if (!this.__listenClose) {
                                    this.__listenClose = !0;
                                    var t = this.j;
                                    t.e.on(t.ow, f, this.__hide).on(d, this.__hide)
                                }
                            }, e.prototype.__removeListenersOnLeave = function () {
                                if (this.__listenClose) {
                                    this.__listenClose = !1;
                                    var t = this.j;
                                    t.e.off(t.ow, f, this.__hide).off(d, this.__hide)
                                }
                            }, e.prototype.__onMouseLeave = function (t) {
                                this.__currentTarget === t.target && (this.__hideDelay(), this.__currentTarget = null)
                            }, e.prototype.__onMouseEnter = function (t) {
                                if (s.J.isHTMLElement(t.target)) {
                                    var e = (0, c.attr)(t.target, "aria-label");
                                    if (e && !Boolean((0, c.attr)(t.target, "disabled")) && t.target.className.includes("jodit")) {
                                        this.__currentTarget = t.target;
                                        var n = t.target;
                                        this.__open((function () {
                                            var t = (0, u.G)(n);
                                            return {
                                                x: t.left + t.width / 2,
                                                y: t.top + t.height
                                            }
                                        }), e)
                                    }
                                }
                            }, e.prototype.__open = function (t, e) {
                                var n = this;
                                this.__addListenersOnEnter(), this.__isOpened = !0, this.j.async.clearTimeout(this.__hideTimeout), this.j.async.clearTimeout(this.__delayShowTimeout);
                                var o = this.j.o.showTooltipDelay || this.j.defaultTimeout;
                                o ? this.__delayShowTimeout = this.j.async.setTimeout((function () {
                                    return n.__show(t, e)
                                }), o) : this.__show(t, e)
                            }, e.prototype.__show = function (t, e) {
                                this.setMod("visible", !0), this.getElm("content").innerHTML = e;
                                var n = t();
                                (0, c.css)(this.container, {
                                    left: n.x,
                                    top: n.y
                                })
                            }, e.prototype.__hide = function () {
                                this.j.async.clearTimeout(this.__delayShowTimeout), this.j.async.clearTimeout(this.__hideTimeout), this.__removeListenersOnLeave(), this.__isOpened && (this.__isOpened = !1, this.setMod("visible", !1), this.getElm("content").innerHTML = "", (0, c.css)(this.container, {
                                    left: -5e3
                                }))
                            }, e.prototype.__hideDelay = function () {
                                this.j.async.clearTimeout(this.__delayShowTimeout), this.j.async.clearTimeout(this.__hideTimeout), this.__isOpened && (this.__hideTimeout = this.async.setTimeout(this.__hide, this.j.defaultTimeout))
                            }, e.prototype.destruct = function () {
                                var e = this;
                                this.__attachedContainers.forEach((function (t) {
                                    e.j.e.off(t, "mouseenter.tooltip", e.__onMouseEnter).off(t, "mouseleave.tooltip", e.__onMouseLeave)
                                })), this.__hide(), t.prototype.destruct.call(this)
                            }, (0, o.Cg)([i.autobind], e.prototype, "__onMouseLeave", null), (0, o.Cg)([i.autobind], e.prototype, "__onMouseEnter", null), (0, o.Cg)([i.autobind], e.prototype, "__hide", null), (0, o.Cg)([i.autobind], e.prototype, "__hideDelay", null), n = (0, o.Cg)([i.component], e)
                        }(l.D)
                },
                36795: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        m: function () {
                            return r
                        }
                    });
                    var o = n(59101),
                        r = function (t) {
                            return !!(0, o.Bq)(t.value).length || (t.error = "Please fill out this field", !1)
                        }
                },
                36969: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(56298),
                        a = n(65147),
                        u = n(71005),
                        c = (n(93324), n(90823)),
                        l = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {}, e.prototype.beforeDestruct = function (t) {}, e.prototype.processWordHTML = function (t, e, n) {
                                var o = this,
                                    r = this.j,
                                    i = r.o,
                                    s = i.askBeforePasteFromWord,
                                    u = i.defaultActionOnPasteFromWord,
                                    l = i.defaultActionOnPaste,
                                    f = i.pasteFromWordActionList;
                                return !(!i.processPasteFromWord || !(0, a.isHtmlFromWord)(e) || (s ? (0, c.PU)(r, "The pasted content is coming from a Microsoft Word/Excel document. Do you want to keep the format or clean it up?", "Word Paste Detected", (function (r) {
                                    o.insertFromWordByType(t, e, r, n)
                                }), f) : this.insertFromWordByType(t, e, u || l, n), 0))
                            }, e.prototype.insertFromWordByType = function (t, e, n, o) {
                                var i;
                                switch (n) {
                                    case r.INSERT_AS_HTML:
                                        e = (0, a.applyStyles)(e);
                                        var s = null === (i = this.j.events) || void 0 === i ? void 0 : i.fire("beautifyHTML", e);
                                        (0, a.isString)(s) && (e = s);
                                        break;
                                    case r.INSERT_AS_TEXT:
                                        e = (0, a.cleanFromWord)(e);
                                        break;
                                    case r.INSERT_ONLY_TEXT:
                                        e = (0, a.stripTags)((0, a.cleanFromWord)(e))
                                }(0, c.sX)(t, this.j, e)
                            }, e.requires = ["paste"], (0, o.Cg)([(0, i.watch)(":processHTML")], e.prototype, "processWordHTML", null), e
                        }(u.k);
                    s.fg.add("pasteFromWord", l)
                },
                37075: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        n: function () {
                            return a
                        },
                        s: function () {
                            return s
                        }
                    });
                    var o = n(77753),
                        r = n(9823),
                        i = (n(28712), n(50156));

                    function s(t, e, n) {
                        return void 0 === e && (e = !1), void 0 === n && (n = "debounce"),
                            function (s, a) {
                                var u = s[a];
                                if (!(0, r.Tn)(u)) throw (0, i.z3)("Handler must be a Function");
                                return s.hookStatus(o.f.ready, (function (o) {
                                    var i = o.async,
                                        s = (0, r.Tn)(t) ? t(o) : t,
                                        u = (0, r.Et)(s) || (0, r.Qd)(s) ? s : o.defaultTimeout;
                                    Object.defineProperty(o, a, {
                                        configurable: !0,
                                        value: i[n](o[a].bind(o), u, e)
                                    })
                                })), {
                                    configurable: !0,
                                    get: function () {
                                        return u.bind(this)
                                    }
                                }
                            }
                    }

                    function a(t, e) {
                        return void 0 === e && (e = !1), s(t, e, "throttle")
                    }
                },
                37424: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Q: function () {
                            return a
                        }
                    });
                    var o = n(37923),
                        r = n(97369),
                        i = n(36115),
                        s = n(57023);

                    function a(t, e) {
                        return ((0, o.c)(t) ? t : (0, r.keys)(t, !1).map((function (e) {
                            return (0, r.ConfigProto)({
                                name: e
                            }, t[e] || {})
                        }))).map((function (t) {
                            return (0, s.U)(t, e || i.T.defaultOptions.controls)
                        }))
                    }
                },
                37435: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        Ajax: function () {
                            return p.d
                        },
                        Alert: function () {
                            return s.Fc
                        },
                        Async: function () {
                            return u.j
                        },
                        Button: function () {
                            return h.$n
                        },
                        CommitStyle: function () {
                            return k.xk
                        },
                        Component: function () {
                            return o.uA
                        },
                        Confirm: function () {
                            return s.pT
                        },
                        ContextMenu: function () {
                            return i.t
                        },
                        Create: function () {
                            return c.X
                        },
                        Dialog: function () {
                            return s.lG
                        },
                        Dom: function () {
                            return l.J
                        },
                        EventEmitter: function () {
                            return f.bk
                        },
                        EventHandlersStore: function () {
                            return f.d$
                        },
                        Eventify: function () {
                            return f.h5
                        },
                        FileBrowser: function () {
                            return a.V
                        },
                        Helpers: function () {
                            return r
                        },
                        History: function () {
                            return m.B
                        },
                        Icon: function () {
                            return h.In
                        },
                        ImageEditor: function () {
                            return b.n
                        },
                        LazyWalker: function () {
                            return l.p
                        },
                        Plugin: function () {
                            return d.k
                        },
                        PluginSystem: function () {
                            return j.$
                        },
                        Popup: function () {
                            return h.zD
                        },
                        ProgressBar: function () {
                            return h.z2
                        },
                        Prompt: function () {
                            return s.XG
                        },
                        Response: function () {
                            return p.Y
                        },
                        STATUSES: function () {
                            return o.f
                        },
                        Selection: function () {
                            return k.LN
                        },
                        Snapshot: function () {
                            return y.F
                        },
                        StatusBar: function () {
                            return C.e
                        },
                        Table: function () {
                            return w.X
                        },
                        ToolbarButton: function () {
                            return S.IB
                        },
                        ToolbarCollection: function () {
                            return E.Q
                        },
                        ToolbarContent: function () {
                            return S.P1
                        },
                        ToolbarEditorCollection: function () {
                            return T.b
                        },
                        ToolbarSelect: function () {
                            return S.q4
                        },
                        UIBlock: function () {
                            return h.Yh
                        },
                        UIButton: function () {
                            return h.lD
                        },
                        UIButtonGroup: function () {
                            return h.ss
                        },
                        UIButtonState: function () {
                            return h.ue
                        },
                        UICheckbox: function () {
                            return h.cY
                        },
                        UIElement: function () {
                            return h.D$
                        },
                        UIFileInput: function () {
                            return h.nE
                        },
                        UIForm: function () {
                            return h.XV
                        },
                        UIGroup: function () {
                            return h.Ue
                        },
                        UIInput: function () {
                            return h.tS
                        },
                        UIList: function () {
                            return h.z4
                        },
                        UIMessages: function () {
                            return _.N
                        },
                        UISelect: function () {
                            return h.$6
                        },
                        UISeparator: function () {
                            return h.CP
                        },
                        UISpacer: function () {
                            return h.bk
                        },
                        UITextArea: function () {
                            return h.F0
                        },
                        UITooltip: function () {
                            return h.SB
                        },
                        Uploader: function () {
                            return I.d
                        },
                        View: function () {
                            return v.S
                        },
                        ViewComponent: function () {
                            return o.vG
                        },
                        ViewWithToolbar: function () {
                            return g.T
                        },
                        defaultNameSpace: function () {
                            return f.Xr
                        },
                        observable: function () {
                            return f.sH
                        }
                    });
                    var o = n(77753),
                        r = n(65147),
                        i = n(34248),
                        s = n(34256),
                        a = n(19627),
                        u = n(64890),
                        c = n(40594),
                        l = n(71842),
                        f = n(50025),
                        d = n(71005),
                        p = n(53883),
                        h = n(53048),
                        v = n(77782),
                        g = n(14961),
                        m = n(69996),
                        y = n(58770),
                        b = n(53804),
                        _ = n(91902),
                        C = n(62870),
                        w = n(11648),
                        S = n(5832),
                        E = n(97394),
                        T = n(90428),
                        I = n(26538),
                        j = n(77402),
                        k = n(87332)
                },
                37474: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        u: function () {
                            return u
                        }
                    });
                    var o = n(64890),
                        r = n(64567),
                        i = n(56298),
                        s = n(65147),
                        a = new Map,
                        u = function () {
                            function t() {
                                this.async = new o.j, this.ownerWindow = window, this.__componentStatus = r.f.beforeInit, this.uid = "jodit-uid-" + (0, i.w9)()
                            }
                            return Object.defineProperty(t.prototype, "componentName", {
                                get: function () {
                                    return this.__componentName || (this.__componentName = "jodit-" + (0, s.kebabCase)(((0, s.isFunction)(this.className) ? this.className() : "") || (0, s.getClassName)(this))), this.__componentName
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.getFullElName = function (t, e, n) {
                                var o = [this.componentName];
                                return t && (t = t.replace(/[^a-z0-9-]/gi, "-"), o.push("__".concat(t))), e && (o.push("_", e), o.push("_", (0, s.isVoid)(n) ? "true" : n.toString())), o.join("")
                            }, Object.defineProperty(t.prototype, "ownerDocument", {
                                get: function () {
                                    return this.ow.document
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "od", {
                                get: function () {
                                    return this.ownerDocument
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "ow", {
                                get: function () {
                                    return this.ownerWindow
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.get = function (t, e) {
                                return (0, s.get)(t, e || this)
                            }, Object.defineProperty(t.prototype, "isReady", {
                                get: function () {
                                    return this.componentStatus === r.f.ready
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "isDestructed", {
                                get: function () {
                                    return this.componentStatus === r.f.destructed
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "isInDestruct", {
                                get: function () {
                                    return r.f.beforeDestruct === this.componentStatus || r.f.destructed === this.componentStatus
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.bindDestruct = function (t) {
                                var e = this;
                                return t.hookStatus(r.f.beforeDestruct, (function () {
                                    return !e.isInDestruct && e.destruct()
                                })), this
                            }, t.prototype.destruct = function () {
                                this.setStatus(r.f.destructed), this.async && (this.async.destruct(), this.async = void 0), a.get(this) && a.delete(this), this.ownerWindow = void 0
                            }, Object.defineProperty(t.prototype, "componentStatus", {
                                get: function () {
                                    return this.__componentStatus
                                },
                                set: function (t) {
                                    this.setStatus(t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.setStatus = function (t) {
                                return this.setStatusComponent(t, this)
                            }, t.prototype.setStatusComponent = function (t, e) {
                                if (t !== this.__componentStatus) {
                                    e === this && (this.__componentStatus = t);
                                    var n = Object.getPrototypeOf(this);
                                    n && (0, s.isFunction)(n.setStatusComponent) && n.setStatusComponent(t, e);
                                    var o = a.get(this),
                                        r = null == o ? void 0 : o[t];
                                    r && r.length && r.forEach((function (t) {
                                        return t(e)
                                    }))
                                }
                            }, t.prototype.hookStatus = function (t, e) {
                                var n = a.get(this);
                                n || a.set(this, n = {}), n[t] || (n[t] = []), n[t].push(e)
                            }, t.isInstanceOf = function (t, e) {
                                return t instanceof e
                            }, t.STATUSES = r.f, t
                        }()
                },
                37649: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        g: function () {
                            return l
                        },
                        x: function () {
                            return c
                        }
                    });
                    var o, r = n(31635),
                        i = n(17352),
                        s = n(55186),
                        a = (n(28712), n(87332)),
                        u = n(97621),
                        c = {
                            START: "START",
                            ELEMENT: "ELEMENT",
                            UNWRAP: "UNWRAP",
                            UNWRAP_CHILDREN: "UNWRAP_CHILDREN",
                            CHANGE: "CHANGE",
                            REPLACE_DEFAULT: "REPLACE_DEFAULT",
                            LIST: "LIST",
                            TOGGLE_LIST: "TOGGLE_LIST",
                            WRAP: "WRAP",
                            EXTRACT: "EXTRACT",
                            END: "END"
                        },
                        l = ((o = {})[c.START] = {
                            exec: function (t) {
                                var e = t.element,
                                    n = t.jodit,
                                    o = t.style,
                                    i = t.mode,
                                    l = t.collapsed;
                                if ((0, u.iu)(e, n.editor) || !l && s.J.isEmptyContent(e)) return (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.END
                                });
                                var f = (0, u.AS)(o, e, n.editor) || (0, u.G6)(o, e);
                                if (f) return (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.ELEMENT,
                                    element: f
                                });
                                var d = (0, u.$s)(o, e, n.editor);
                                return o.elementIsList && s.J.isList(d) ? (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.LIST
                                }) : (0, r.Cl)((0, r.Cl)({}, t), d ? {
                                    next: c.EXTRACT
                                } : {
                                    next: i !== a.OJ ? c.UNWRAP_CHILDREN : c.END
                                })
                            }
                        }, o[c.LIST] = {
                            exec: function (t) {
                                var e = t.element,
                                    n = t.jodit,
                                    o = t.mode;
                                if (o !== a.DI && o !== a.OJ && o !== a.dj) return (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.END
                                });
                                var u = s.J.closest(e, "li", n.editor);
                                if (!u) return (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.END
                                });
                                var l = s.J.closest(e, i.LIST_TAGS, n.editor);
                                return (0, r.Cl)((0, r.Cl)({}, t), l ? {
                                    element: u,
                                    next: c.TOGGLE_LIST
                                } : {
                                    next: c.END
                                })
                            }
                        }, o[c.TOGGLE_LIST] = {
                            exec: function (t) {
                                return (0, r.Cl)((0, r.Cl)({}, t), {
                                    mode: (0, u.ks)(t.style, t.element, t.jodit, t.mode),
                                    next: c.END
                                })
                            }
                        }, o[c.EXTRACT] = {
                            exec: function (t) {
                                var e = t.element,
                                    n = t.jodit,
                                    o = t.style,
                                    i = (0, u.$s)(o, e, n.editor);
                                return o.elementIsBlock || (0, u.yP)(i, e, n), (0, r.Cl)((0, r.Cl)({}, t), {
                                    element: i,
                                    next: c.ELEMENT
                                })
                            }
                        }, o[c.UNWRAP_CHILDREN] = {
                            exec: function (t) {
                                return (0, u.tm)(t.style, t.element) ? (0, r.Cl)((0, r.Cl)({}, t), {
                                    mode: a.OJ,
                                    next: c.END
                                }) : (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.WRAP
                                })
                            }
                        }, o[c.WRAP] = {
                            exec: function (t) {
                                var e = t.style,
                                    n = (0, u.LV)(e, t.element, t.jodit);
                                return (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: e.elementIsList ? c.END : c.CHANGE,
                                    mode: a.Zk,
                                    element: n
                                })
                            }
                        }, o[c.ELEMENT] = {
                            exec: function (t) {
                                var e = t.style,
                                    n = t.element;
                                return (0, u.Yx)(e, n, t.jodit, a.DI, !0) !== a.DI ? (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.CHANGE
                                }) : s.J.isTag(n, e.element) ? (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.UNWRAP
                                }) : (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.END
                                })
                            }
                        }, o[c.CHANGE] = {
                            exec: function (t) {
                                var e = t.style,
                                    n = t.element,
                                    o = t.mode,
                                    i = (0, u.Yx)(e, n, t.jodit, t.mode);
                                return o !== a.Zk && i === a.Ag && !n.attributes.length && s.J.isTag(n, e.element) ? (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.UNWRAP
                                }) : (0, r.Cl)((0, r.Cl)({}, t), {
                                    mode: i,
                                    next: c.END
                                })
                            }
                        }, o[c.UNWRAP] = {
                            exec: function (t) {
                                return t.element.attributes.length && s.J.isTag(t.element, t.style.element) ? (0, r.Cl)((0, r.Cl)({}, t), {
                                    next: c.REPLACE_DEFAULT
                                }) : (s.J.unwrap(t.element), (0, r.Cl)((0, r.Cl)({}, t), {
                                    mode: a.OJ,
                                    next: c.END
                                }))
                            }
                        }, o[c.REPLACE_DEFAULT] = {
                            exec: function (t) {
                                return s.J.replace(t.element, t.style.defaultTag, t.jodit.createInside, !0), (0, r.Cl)((0, r.Cl)({}, t), {
                                    mode: a.dj,
                                    next: c.END
                                })
                            }
                        }, o[c.END] = {
                            exec: function (t) {
                                return t
                            }
                        }, o)
                },
                37923: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return Array.isArray(t)
                    }
                    n.d(e, {
                        c: function () {
                            return o
                        }
                    })
                },
                38046: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        _: function () {
                            return i
                        }
                    });
                    var o = n(55186),
                        r = n(71274);

                    function i(t) {
                        return Boolean(t && !o.J.isEmptyTextNode(t) && !o.J.isTemporary(t) && !(0, r.r)(t))
                    }
                },
                38101: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(55186),
                        s = n(8453),
                        a = n(56298),
                        u = n(26328),
                        c = n(29866),
                        l = (n(74646), n(15396)),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.buttons = [{
                                    name: "eraser",
                                    group: "font-style"
                                }], e.currentSelectionNode = null, e.walker = new s.p(e.j.async, {
                                    timeout: e.j.o.cleanHTML.timeout
                                }), e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {}, Object.defineProperty(e.prototype, "isEditMode", {
                                get: function () {
                                    return !(this.j.isInDestruct || !this.j.isEditorMode() || this.j.getReadOnly())
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.onChangeCleanHTML = function () {
                                if (this.isEditMode) {
                                    var t = this.j;
                                    this.walker.setWork(t.editor), this.currentSelectionNode = t.s.current()
                                }
                            }, e.prototype.startWalker = function () {
                                var t = this,
                                    e = this.jodit,
                                    n = (0, l.Zd)(this.j.o.cleanHTML.allowTags),
                                    o = (0, l.Zd)(this.j.o.cleanHTML.denyTags);
                                this.walker.on("visit", (function (r) {
                                    return (0, l.eZ)(e, r, n, o, t.currentSelectionNode)
                                })).on("end", (function (e) {
                                    t.j.e.fire(e ? "internalChange finishedCleanHTMLWorker" : "finishedCleanHTMLWorker")
                                }))
                            }, e.prototype.beforeCommand = function (t) {
                                if ("removeformat" === t.toLowerCase()) return this.j.s.isCollapsed() ? (0, l.w5)(this.j) : (0, l.hk)(this.j), !1
                            }, e.prototype.onBeforeSetNativeEditorValue = function (t) {
                                var e = (0, o.zs)(this.j.o.cleanHTML.useIframeSandbox ? this.j.createInside.sandbox() : [this.j.createInside.div()], 2),
                                    n = e[0],
                                    r = e[1];
                                return n.innerHTML = t.value, this.onSafeHTML(n), t.value = n.innerHTML, (0, u.t)(n, {
                                    safeJavaScriptLink: !0,
                                    removeOnError: !0
                                }), i.J.safeRemove(r), !1
                            }, e.prototype.onSafeHTML = function (t) {
                                (0, u.t)(t, this.j.o.cleanHTML)
                            }, e.prototype.beforeDestruct = function () {
                                this.walker.destruct()
                            }, (0, o.Cg)([(0, r.watch)([":change", ":afterSetMode", ":afterInit", ":mousedown", ":keydown"])], e.prototype, "onChangeCleanHTML", null), (0, o.Cg)([(0, r.hook)("ready")], e.prototype, "startWalker", null), (0, o.Cg)([(0, r.watch)(":beforeCommand")], e.prototype, "beforeCommand", null), (0, o.Cg)([(0, r.watch)(":beforeSetNativeEditorValue")], e.prototype, "onBeforeSetNativeEditorValue", null), (0, o.Cg)([(0, r.watch)(":safeHTML")], e.prototype, "onSafeHTML", null), e
                        }(c.k);
                    a.fg.add("cleanHtml", f)
                },
                38271: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Y: function () {
                            return h
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(56298),
                        s = (n(9823), n(59678)),
                        a = n(95350),
                        u = n(449),
                        c = n(97369),
                        l = n(38322),
                        f = n(72197),
                        d = n(12043),
                        p = "toggleAttributes";

                    function h(t, e, n, h, g) {
                        if (void 0 === g && (g = !1), !g && t.isApplied(e, p)) return h;
                        !g && t.setApplied(e, p);
                        var m = t.options.attributes;
                        return m && (0, a.E)(m) > 0 && Object.keys(m).forEach((function (a) {
                            var p = m[a];
                            switch (a) {
                                case "style":
                                    h = function (t, e, n, a, c, p) {
                                        return Object.keys(n).forEach((function (h) {
                                            var g = a.style.getPropertyValue((0, u.k)(h)),
                                                m = n[h];
                                            if ("" !== g || null != m) {
                                                if (function (t, e, n) {
                                                        var s = t.create.element(e.tagName.toLowerCase());
                                                        s.style.cssText = e.style.cssText;
                                                        var a = function (t) {
                                                            var e;
                                                            if (void 0 !== (0, f.m)(t, "shadowRoot")) return (0, f.m)(t, "shadowRoot");
                                                            var n = (0, i.My)(t),
                                                                r = o.globalDocument.createElement("iframe");
                                                            (0, l.A)(r, {
                                                                width: 0,
                                                                height: 0,
                                                                position: "absolute",
                                                                border: 0
                                                            }), r.src = "about:blank", n.appendChild(r);
                                                            var s = null === (e = r.contentWindow) || void 0 === e ? void 0 : e.document,
                                                                a = s ? s.body : t.od.body;
                                                            return (0, f.m)(t, "shadowRoot", a), a
                                                        }(t);
                                                        a.appendChild(s);
                                                        var u = (0, l.A)(s, n);
                                                        return r.J.safeRemove(s), u
                                                    }(e, a, h) === (0, s.iy)(h, m)) {
                                                    if (!g) return;
                                                    return !c && (0, l.A)(a, h, null), void(p = v(t, a, p = d.Ag))
                                                }
                                                p = d.PL, c || ((0, l.A)(a, h, m), p = v(t, a, p))
                                            }
                                        })), p
                                    }(t, n, p, e, g, h);
                                    break;
                                case "className":
                                case "class":
                                    h = function (t, e, n, o, r) {
                                        var i = t.e.fire.bind(t.e, "".concat(d.ar, "AfterToggleAttribute"));
                                        return n.classList.contains(e.toString()) ? (o = d.Ag, r || (n.classList.remove(e), 0 === n.classList.length && ((0, c.attr)(n, "class", null), i(o, n, "class", null)))) : (o = d.PL, r || (n.classList.add(e), i(o, n, "class", e))), o
                                    }(n, p, e, h, g);
                                    break;
                                default:
                                    h = function (t, e, n, o, r, i) {
                                        var s = t.e.fire.bind(t.e, "".concat(d.ar, "AfterToggleAttribute"));
                                        return (0, c.attr)(n, o) === e ? (!r && (0, c.attr)(n, o, null), i = d.Ag, !r && s(i, n, o, e), i) : (i = d.PL, r || ((0, c.attr)(n, o, e), s(i, n, o, e)), i)
                                    }(n, p, e, a, g, h)
                            }
                        })), h
                    }

                    function v(t, e, n) {
                        return (0, c.attr)(e, "style") || ((0, c.attr)(e, "style", null), e.tagName.toLowerCase() === t.defaultTag && (r.J.unwrap(e), n = d.OJ)), n
                    }
                },
                38309: function (t, e, n) {
                    "use strict";
                    var o = n(56298);
                    n(31686), o.fg.add("video", (function (t) {
                        t.registerButton({
                            name: "video",
                            group: "media"
                        })
                    }))
                },
                38322: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        A: function () {
                            return u
                        },
                        a: function () {
                            return c
                        }
                    });
                    var o = n(9810),
                        r = n(25376),
                        i = n(59678),
                        s = n(83260),
                        a = n(449);

                    function u(t, e, n, c) {
                        if (void 0 === c && (c = !1), (0, o.L)(n) && (c = n, n = void 0), (0, r.Q)(e) || void 0 !== n) {
                            var l = function (t, e, n) {
                                void 0 === (n = (0, i.n8)(e, n)) || null != n && u(t, e, !0) === (0, i.iy)(e, n) || (t.style[e] = n)
                            };
                            if ((0, r.Q)(e))
                                for (var f = Object.keys(e), d = 0; f.length > d; d += 1) l(t, (0, s.x)(f[d]), e[f[d]]);
                            else l(t, (0, s.x)(e), n);
                            return ""
                        }
                        var p = (0, a.k)(e),
                            h = t.ownerDocument || document,
                            v = !!h && (h.defaultView || h.parentWindow),
                            g = t.style[e],
                            m = "";
                        return void 0 !== g && "" !== g ? m = g : v && !c && (m = v.getComputedStyle(t).getPropertyValue(p)), i.b$.test(e) && /^[-+]?[0-9.]+px$/.test(m.toString()) && (m = parseInt(m.toString(), 10)), (0, i.iy)(e, m)
                    }
                    var c = function (t) {
                        "block" === u(t, "display") && u(t, "display", "");
                        var e = t.style;
                        "auto" === e.marginLeft && "auto" === e.marginRight && (e.marginLeft = "", e.marginRight = "")
                    }
                },
                38373: function (t, e, n) {
                    "use strict";
                    var o = n(55186),
                        r = n(56298),
                        i = n(38322),
                        s = n(931),
                        a = n(36115),
                        u = n(3843),
                        c = n.n(u),
                        l = n(94628),
                        f = "copy-format",
                        d = ["fontWeight", "fontStyle", "fontSize", "color", "margin", "padding", "borderWidth", "borderStyle", "borderColor", "borderRadius", "backgroundColor", "textDecorationLine", "fontFamily"],
                        p = function (t, e, n, o) {
                            var r = (0, i.A)(n, e);
                            return r === o[e] && (r = n.parentNode && n !== t.editor && n.parentNode !== t.editor ? p(t, e, n.parentNode, o) : void 0), r
                        };
                    a.T.prototype.controls.copyformat = {
                        exec: function (t, e, n) {
                            var r = n.button;
                            if (e) {
                                if (t.buffer.exists(f)) t.buffer.delete(f), t.e.off(t.editor, "mouseup." + f);
                                else {
                                    var s = {},
                                        a = o.J.up(e, (function (t) {
                                            return t && !o.J.isText(t)
                                        }), t.editor) || t.editor,
                                        u = t.createInside.span();
                                    t.editor.appendChild(u), d.forEach((function (t) {
                                        s[t] = (0, i.A)(u, t)
                                    })), u !== t.editor && o.J.safeRemove(u);
                                    var c = function (t, e, n) {
                                        var o = {};
                                        return e && d.forEach((function (r) {
                                            o[r] = p(t, r, e, n), r.match(/border(Style|Color)/) && !o.borderWidth && (o[r] = void 0)
                                        })), o
                                    }(t, a, s);
                                    t.e.on(t.editor, "mouseup." + f, (function () {
                                        t.buffer.delete(f);
                                        var e = t.s.current();
                                        e && (o.J.isTag(e, "img") ? (0, i.A)(e, c) : t.s.commitStyle({
                                            attributes: {
                                                style: c
                                            }
                                        })), t.e.off(t.editor, "mouseup." + f)
                                    })), t.buffer.set(f, !0)
                                }
                                r.update()
                            }
                        },
                        isActive: function (t) {
                            return t.buffer.exists(f)
                        },
                        tooltip: "Paint format"
                    }, r.fg.add("copyformat", (function (t) {
                        t.registerButton({
                            name: "copyformat",
                            group: "clipboard"
                        }), (0, r.JW)(l)
                    })), s.I.set("copyformat", c())
                },
                39053: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        ar: function () {
                            return o
                        },
                        cs_cz: function () {
                            return o
                        },
                        de: function () {
                            return o
                        },
                        es: function () {
                            return r
                        },
                        fa: function () {
                            return o
                        },
                        fi: function () {
                            return o
                        },
                        fr: function () {
                            return o
                        },
                        he: function () {
                            return o
                        },
                        hu: function () {
                            return o
                        },
                        id: function () {
                            return o
                        },
                        it: function () {
                            return o
                        },
                        ja: function () {
                            return o
                        },
                        ko: function () {
                            return o
                        },
                        mn: function () {
                            return o
                        },
                        nl: function () {
                            return o
                        },
                        pl: function () {
                            return o
                        },
                        pt_br: function () {
                            return o
                        },
                        ru: function () {
                            return o
                        },
                        tr: function () {
                            return o
                        },
                        ua: function () {
                            return o
                        },
                        zh_cn: function () {
                            return o
                        },
                        zh_tw: function () {
                            return o
                        }
                    });
                    var o = n(41324),
                        r = n(27671)
                },
                39147: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = n(37435),
                        l = (n(36001), "table_processor_observer-resize"),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.selectMode = !1, e.resizeDelta = 0, e.createResizeHandle = function () {
                                    e.resizeHandler || (e.resizeHandler = e.j.c.div("jodit-table-resizer"), e.j.e.on(e.resizeHandler, "mousedown.table touchstart.table", e.onHandleMouseDown).on(e.resizeHandler, "mouseenter.table", (function () {
                                        e.j.async.clearTimeout(e.hideTimeout)
                                    })))
                                }, e.hideTimeout = 0, e.drag = !1, e.minX = 0, e.maxX = 0, e.startX = 0, e
                            }
                            return (0, o.C6)(e, t), Object.defineProperty(e.prototype, "module", {
                                get: function () {
                                    return this.j.getInstance("Table", this.j.o)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "isRTL", {
                                get: function () {
                                    return "rtl" === this.j.o.direction
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.showResizeHandle = function () {
                                this.j.async.clearTimeout(this.hideTimeout), this.j.workplace.appendChild(this.resizeHandler)
                            }, e.prototype.hideResizeHandle = function () {
                                var t = this;
                                this.hideTimeout = this.j.async.setTimeout((function () {
                                    s.J.safeRemove(t.resizeHandler)
                                }), {
                                    timeout: this.j.defaultTimeout,
                                    label: "hideResizer"
                                })
                            }, e.prototype.onHandleMouseDown = function (t) {
                                var e = this;
                                if (!this.j.isLocked) {
                                    this.drag = !0, this.j.e.on(this.j.ow, "mouseup.resize-cells touchend.resize-cells", this.onMouseUp).on(this.j.ew, "mousemove.table touchmove.table", this.onMouseMove), this.startX = t.clientX, this.j.lock(l), this.resizeHandler.classList.add("jodit-table-resizer_moved");
                                    var n, o = this.workTable.getBoundingClientRect();
                                    if (this.minX = 0, this.maxX = 1e6, null != this.wholeTable) o = this.workTable.parentNode.getBoundingClientRect(), this.minX = o.left, this.maxX = this.minX + o.width;
                                    else {
                                        var i = this.module.formalCoordinate(this.workTable, this.workCell, !0);
                                        this.module.formalMatrix(this.workTable, (function (t, o, s) {
                                            i[1] === s && (n = t.getBoundingClientRect(), e.minX = Math.max(n.left + r.NEARBY / 2, e.minX)), i[1] + (e.isRTL ? -1 : 1) === s && (n = t.getBoundingClientRect(), e.maxX = Math.min(n.left + n.width - r.NEARBY / 2, e.maxX))
                                        }))
                                    }
                                    return !1
                                }
                            }, e.prototype.onMouseMove = function (t) {
                                if (this.drag) {
                                    this.j.e.fire("closeAllPopups");
                                    var e = t.clientX,
                                        n = (0, u.offset)(this.resizeHandler.parentNode || this.j.od.documentElement, this.j, this.j.od, !0);
                                    this.minX > e && (e = this.minX), e > this.maxX && (e = this.maxX), this.resizeDelta = e - this.startX + (this.j.o.iframe ? n.left : 0), this.resizeHandler.style.left = e - (this.j.o.iframe ? 0 : n.left) + "px";
                                    var o = this.j.s.sel;
                                    o && o.removeAllRanges()
                                }
                            }, e.prototype.onMouseUp = function (t) {
                                (this.selectMode || this.drag) && (this.selectMode = !1, this.j.unlock()), this.resizeHandler && this.drag && (this.drag = !1, this.j.e.off(this.j.ew, "mousemove.table touchmove.table", this.onMouseMove), this.resizeHandler.classList.remove("jodit-table-resizer_moved"), this.startX !== t.clientX && (null == this.wholeTable ? this.resizeColumns() : this.resizeTable()), this.j.synchronizeValues(), this.j.s.focus())
                            }, e.prototype.resizeColumns = function () {
                                var t = this.resizeDelta,
                                    e = [],
                                    n = this.module;
                                n.setColumnWidthByDelta(this.workTable, n.formalCoordinate(this.workTable, this.workCell, !0)[1], t, !0, e);
                                var o = (0, u.call)(this.isRTL ? s.J.prev : s.J.next, this.workCell, s.J.isCell, this.workCell.parentNode);
                                n.setColumnWidthByDelta(this.workTable, n.formalCoordinate(this.workTable, o)[1], -t, !1, e)
                            }, e.prototype.resizeTable = function () {
                                var t = this.resizeDelta * (this.isRTL ? -1 : 1),
                                    e = this.workTable.offsetWidth,
                                    n = (0, u.getContentWidth)(this.workTable.parentNode, this.j.ew),
                                    o = !this.wholeTable;
                                if (this.isRTL ? !o : o) this.workTable.style.width = (e + t) / n * 100 + "%";
                                else {
                                    var r = this.isRTL ? "marginRight" : "marginLeft",
                                        i = parseInt(this.j.ew.getComputedStyle(this.workTable)[r] || "0", 10);
                                    this.workTable.style.width = (e - t) / n * 100 + "%", this.workTable.style[r] = (i + t) / n * 100 + "%"
                                }
                            }, e.prototype.setWorkCell = function (t, e) {
                                void 0 === e && (e = null), this.wholeTable = e, this.workCell = t, this.workTable = s.J.up(t, (function (t) {
                                    return s.J.isTag(t, "table")
                                }), this.j.editor)
                            }, e.prototype.calcHandlePosition = function (t, e, n, o) {
                                void 0 === n && (n = 0), void 0 === o && (o = 0);
                                var i = (0, u.offset)(e, this.j, this.j.ed);
                                if (n > r.NEARBY && i.width - r.NEARBY > n) this.hideResizeHandle();
                                else {
                                    var a = (0, u.offset)(this.j.workplace, this.j, this.j.od, !0),
                                        c = (0, u.offset)(t, this.j, this.j.ed);
                                    if (this.resizeHandler.style.left = (n > r.NEARBY ? i.left + i.width : i.left) - a.left + o + "px", Object.assign(this.resizeHandler.style, {
                                            height: c.height + "px",
                                            top: c.top - a.top + "px"
                                        }), this.showResizeHandle(), n > r.NEARBY) {
                                        var l = (0, u.call)(this.isRTL ? s.J.prev : s.J.next, e, s.J.isCell, e.parentNode);
                                        this.setWorkCell(e, !!l && null)
                                    } else {
                                        var f = (0, u.call)(this.isRTL ? s.J.next : s.J.prev, e, s.J.isCell, e.parentNode);
                                        this.setWorkCell(f || e, !f || null)
                                    }
                                }
                            }, e.prototype.afterInit = function (t) {
                                var e = this;
                                t.o.tableAllowCellResize && t.e.off(this.j.ow, ".resize-cells").off(".resize-cells").on("change.resize-cells afterCommand.resize-cells afterSetMode.resize-cells", (function () {
                                    (0, u.$$)("table", t.editor).forEach(e.observe)
                                })).on(this.j.ow, "scroll.resize-cells", (function () {
                                    if (e.drag) {
                                        var n = s.J.up(e.workCell, (function (t) {
                                            return s.J.isTag(t, "table")
                                        }), t.editor);
                                        if (n) {
                                            var o = n.getBoundingClientRect();
                                            e.resizeHandler.style.top = o.top + "px"
                                        }
                                    }
                                })).on("beforeSetMode.resize-cells", (function () {
                                    var n = e.module;
                                    n.getAllSelectedCells().forEach((function (e) {
                                        n.removeSelection(e), n.normalizeTable(s.J.closest(e, "table", t.editor))
                                    }))
                                }))
                            }, e.prototype.observe = function (t) {
                                var e = this;
                                (0, u.dataBind)(t, l) || ((0, u.dataBind)(t, l, !0), this.j.e.on(t, "mouseleave.resize-cells", (function (t) {
                                    e.resizeHandler && e.resizeHandler !== t.relatedTarget && e.hideResizeHandle()
                                })).on(t, "mousemove.resize-cells touchmove.resize-cells", this.j.async.throttle((function (n) {
                                    if (!e.j.isLocked) {
                                        var o = s.J.up(n.target, s.J.isCell, t);
                                        o && e.calcHandlePosition(t, o, n.offsetX)
                                    }
                                }), {
                                    timeout: this.j.defaultTimeout
                                })), this.createResizeHandle())
                            }, e.prototype.beforeDestruct = function (t) {
                                t.events && (t.e.off(this.j.ow, ".resize-cells"), t.e.off(".resize-cells"))
                            }, (0, o.Cg)([i.autobind], e.prototype, "onHandleMouseDown", null), (0, o.Cg)([i.autobind], e.prototype, "onMouseMove", null), (0, o.Cg)([i.autobind], e.prototype, "onMouseUp", null), (0, o.Cg)([i.autobind], e.prototype, "observe", null), e
                        }(c.Plugin);
                    a.fg.add("resizeCells", f)
                },
                39199: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z"/> </svg>'
                },
                39344: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        l: function () {
                            return o
                        }
                    });
                    var o = function () {
                        for (var t = [], e = 0; arguments.length > e; e++) t[e] = arguments[e];
                        return t.filter((function (t) {
                            return t.length
                        })).map((function (t) {
                            return t.replace(/\/$/, "")
                        })).join("/").replace(/([^:])[\\/]+/g, "$1/")
                    }
                },
                39386: function (t) {
                    t.exports.default = ["Escriba algo...", "Acerca de Jodit", "Jodit Editor", "Gua de usuario Jodit", "contiene ayuda detallada para el uso.", "Para informacin sobre la licencia, por favor visite nuestro sitio:", "Compre la versin completa", "Copyright  XDSoft.net - Chupurnov Valeriy. Todos los derechos reservados.", "Anclar", "Abrir en nueva pestaa", "Abrir editor en pantalla completa", "Limpiar formato", "Color de relleno o de letra", "Rehacer", "Deshacer", "Negrita", "Cursiva", "Insertar lista no ordenada", "Insertar lista ordenada", "Alinear Centrado", "Alinear Justificado", "Alinear Izquierda", "Alinear Derecha", "Insertar lnea horizontal", "Insertar imagen", "Insertar archivo", "Insertar video de Youtube/vimeo", "Insertar vnculo", "Tamao de letra", "Familia de letra", "Insertar bloque", "Normal", "Encabezado 1", "Encabezado 2", "Encabezado 3", "Encabezado 4", "Cita", "Cdigo", "Insertar", "Insertar tabla", "Disminuir sangra", "Aumentar sangra", "Seleccionar caracter especial", "Insertar caracter especial", "Copiar formato", "Cambiar modo", "Mrgenes", "arriba", "derecha", "abajo", "izquierda", "Estilos CSS", "Clases CSS", "Alinear", "Derecha", "Centrado", "Izquierda", "--No Establecido--", "Fuente", "Ttulo", "Texto Alternativo", "Vnculo", "Abrir vnculo en nueva pestaa", "Imagen", "Archivo", "Avanzado", "Propiedades de imagen", "Cancelar", "Aceptar", "Buscar archivo", "Error al cargar la lista", "Error al cargar las carpetas", "Est seguro?", "Entre nombre de carpeta", "Crear carpeta", "Entre el nombre", "Soltar imagen", "Soltar archivo", "o click", "Texto alternativo", "Subir", "Buscar", "Fondo", "Texto", "Arriba", "Centro", "Abajo", "Insertar columna antes", "Interar columna despus", "Insertar fila arriba", "Insertar fila debajo", "Borrar tabla", "Borrar fila", "Borrar columna", "Vaciar celda", "Caracteres: %d", "Palabras: %d", "Tachado", "Subrayado", "superndice", "subndice", "Cortar seleccin", "Seleccionar todo", "Pausa", "Buscar", "Reemplazar con", "Reemplazar", "Pegar", "Seleccionar contenido para pegar", "HTML", "negrita", "cursiva", "Brocha", "Vnculo", "deshacer", "rehacer", "Tabla", "Imagen", "Borrar", "Prrafo", "Tamao de letra", "Video", "Letra", "Acerca de", "Imprimir", "subrayar", "tachar", "sangra", "quitar sangra", "Tamao completo", "encoger", "lnea horizontal", "lista sin ordenar", "lista ordenada", "Cortar", "Seleccionar todo", "Incluir cdigo", "Abrir vnculo", "Editar vnculo", "No seguir", "Desvincular", "Actualizar", "Para editar", "Ver", "URL", "Editar", "Alineacin horizontal", "Filtrar", "Ordenar por fecha modificacin", "Ordenar por nombre", "Ordenar por tamao", "Agregar carpeta", "Resetear", "Guardar", "Guardar como...", "Redimensionar", "Recortar", "Ancho", "Alto", "Mantener relacin de aspecto", "Si", "No", "Quitar", "Seleccionar", "Seleccionar: %s", "Alineacin vertical", "Dividir", "Mezclar", "Agregar columna", "Agregar fila", null, "Borrar", "Dividir vertical", "Dividir horizontal", "Borde", "El cdigo es similar a HTML. Mantener como HTML?", "Pegar como HTML?", "Mantener", "Insertar como texto", "Insertar solo texto", "Solo puedes editar tus propias imgenes. Descargar esta imagen en el servidor?", "La imagen se ha subido correctamente al servidor!", "paleta", "No hay archivos en este directorio.", "renombrar", "Ingresa un nuevo nombre", "avance", "Descargar", "Pegar desde el portapapeles", "Su navegador no soporta el acceso directo en el portapapeles.", "Seleccin de copia", "copia", "Radio frontera", "Mostrar todos los", "Aplicar", "Por favor, rellene este campo", "Por favor, introduzca una direccin web", "Predeterminado", "Crculo", "Punto", "Cuadro", "Encontrar", "Buscar Anterior", "Buscar Siguiente", "El contenido pegado proviene de un documento de Microsoft Word/Excel. Desea mantener el formato o limpiarlo?", "Pegado desde Word detectado", "Limpiar", "Insertar nombre de clase", "Presione Alt para cambiar el tamao personalizado", null, null, null]
                },
                39611: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        V: function () {
                            return s
                        },
                        i: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(37923),
                        i = function (t) {
                            return (0, r.c)(t.buttons)
                        };

                    function s(t, e) {
                        var n = e.getRegisteredButtonGroups();
                        return new Set(t.reduce((function (t, e) {
                            var r;
                            return i(e) ? t = t.concat((0, o.fX)((0, o.fX)([], (0, o.zs)(e.buttons), !1), (0, o.zs)(null !== (r = n[e.group]) && void 0 !== r ? r : []), !1)) : t.push(e), t
                        }), []))
                    }
                },
                39626: function (t, e, n) {
                    "use strict";
                    var o = n(55186),
                        r = n(65147),
                        i = n(931),
                        s = n(36115),
                        a = n(16116),
                        u = n(45674);
                    i.I.set("brush", n.n(u)()), s.T.prototype.controls.brushCell = {
                        isVisible: function (t) {
                            return !t.o.disablePlugins.includes("color")
                        },
                        icon: "brush",
                        popup: function (t, e, n) {
                            if ((0, r.isJoditObject)(t)) {
                                var o = t.getInstance("Table", t.o).getAllSelectedCells();
                                if (!o.length) return !1;
                                var i = function (e) {
                                    return (0, a.Kn)(t, (function (i) {
                                        o.forEach((function (t) {
                                            (0, r.css)(t, e, i)
                                        })), t.lock(), t.synchronizeValues(), n(), t.unlock()
                                    }), (0, r.css)(o[0], e))
                                };
                                return (0, a.Zg)(t, [{
                                    name: "Background",
                                    content: i("background-color")
                                }, {
                                    name: "Text",
                                    content: i("color")
                                }, {
                                    name: "Border",
                                    content: i("border-color")
                                }])
                            }
                        },
                        tooltip: "Background"
                    }, s.T.prototype.controls.brush = {
                        isVisible: function (t) {
                            return !t.o.disablePlugins.includes("color")
                        },
                        update: function (t, e) {
                            var n = (0, r.dataBind)(e, "color"),
                                i = function (n, o) {
                                    o && o !== (0, r.css)(t.editor, n).toString() && (e.state.icon.fill = o)
                                };
                            if (n) {
                                var s = (0, r.dataBind)(e, "color");
                                i("color" === s ? s : "background-color", n)
                            } else {
                                var a = t.s.current();
                                if (a && !e.state.disabled) {
                                    var u = o.J.closest(a, o.J.isElement, t.editor) || t.editor;
                                    i("color", (0, r.css)(u, "color").toString()), i("background-color", (0, r.css)(u, "background-color").toString())
                                }
                                e.state.icon.fill = "", e.state.activated = !1
                            }
                        },
                        popup: function (t, e, n, i) {
                            var s = "",
                                u = "",
                                c = [],
                                l = null;
                            return e && e !== t.editor && o.J.isNode(e) && (o.J.isElement(e) && t.s.isCollapsed() && !o.J.isTag(e, new Set(["br", "hr"])) && (l = e), o.J.up(e, (function (t) {
                                if (o.J.isHTMLElement(t)) {
                                    var e = (0, r.css)(t, "color", !0),
                                        n = (0, r.css)(t, "background-color", !0);
                                    if (e) return s = e.toString(), !0;
                                    if (n) return u = n.toString(), !0
                                }
                            }), t.editor)), c = [{
                                name: "Background",
                                content: (0, a.Kn)(t, (function (e) {
                                    l ? l.style.backgroundColor = e : t.execCommand("background", !1, e), (0, r.dataBind)(i, "color", e), (0, r.dataBind)(i, "color-mode", "background"), n()
                                }), u)
                            }, {
                                name: "Text",
                                content: (0, a.Kn)(t, (function (e) {
                                    l ? l.style.color = e : t.execCommand("forecolor", !1, e), (0, r.dataBind)(i, "color", e), (0, r.dataBind)(i, "color-mode", "color"), n()
                                }), s)
                            }], "background" !== t.o.colorPickerDefaultTab && (c = c.reverse()), (0, a.Zg)(t, c, l)
                        },
                        exec: function (t, e, n) {
                            var i = n.button,
                                s = (0, r.dataBind)(i, "color-mode"),
                                a = (0, r.dataBind)(i, "color");
                            if (!s) return !1;
                            if (e && e !== t.editor && o.J.isNode(e) && o.J.isElement(e)) switch (s) {
                                case "color":
                                    e.style.color = a;
                                    break;
                                case "background":
                                    e.style.backgroundColor = a
                            } else t.execCommand("background" === s ? s : "forecolor", !1, a)
                        },
                        tooltip: "Fill color or set the text color"
                    }
                },
                39858: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"/> </svg>'
                },
                40037: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path stroke-width="0" d="M381 1620q0 80-54.5 126t-135.5 46q-106 0-172-66l57-88q49 45 106 45 29 0 50.5-14.5t21.5-42.5q0-64-105-56l-26-56q8-10 32.5-43.5t42.5-54 37-38.5v-1q-16 0-48.5 1t-48.5 1v53h-106v-152h333v88l-95 115q51 12 81 49t30 88zm2-627v159h-362q-6-36-6-54 0-51 23.5-93t56.5-68 66-47.5 56.5-43.5 23.5-45q0-25-14.5-38.5t-39.5-13.5q-46 0-81 58l-85-59q24-51 71.5-79.5t105.5-28.5q73 0 123 41.5t50 112.5q0 50-34 91.5t-75 64.5-75.5 50.5-35.5 52.5h127v-60h105zm1409 319v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm-1408-899v99h-335v-99h107q0-41 .5-122t.5-121v-12h-2q-8 17-50 54l-71-76 136-127h106v404h108zm1408 387v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5z"/> </svg>'
                },
                40080: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Mr: function () {
                            return i
                        },
                        Op: function () {
                            return a
                        },
                        Xm: function () {
                            return s
                        }
                    });
                    var o = n(71842),
                        r = n(38322);

                    function i(t, e) {
                        e && "normal" !== e ? "center" !== e ? ((0, r.A)(t, "float", e), (0, r.a)(t)) : (0, r.A)(t, {
                            float: "",
                            display: "block",
                            marginLeft: "auto",
                            marginRight: "auto"
                        }) : ((0, r.A)(t, "float") && -1 !== ["right", "left"].indexOf((0, r.A)(t, "float").toString().toLowerCase()) && (0, r.A)(t, "float", ""), (0, r.a)(t))
                    }

                    function s(t) {
                        o.J.each(t, (function (t) {
                            o.J.isHTMLElement(t) && t.style.textAlign && (t.style.textAlign = "", t.style.cssText.trim().length || t.removeAttribute("style"))
                        }))
                    }

                    function a(t, e) {
                        if (o.J.isNode(e) && o.J.isElement(e)) switch (s(e), t.toLowerCase()) {
                            case "justifyfull":
                                e.style.textAlign = "justify";
                                break;
                            case "justifyright":
                                e.style.textAlign = "right";
                                break;
                            case "justifyleft":
                                e.style.textAlign = "left";
                                break;
                            case "justifycenter":
                                e.style.textAlign = "center"
                        }
                    }
                },
                40594: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return o.X
                        }
                    });
                    var o = n(92852)
                },
                40677: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        h: function () {
                            return a
                        }
                    });
                    var o = n(37923),
                        r = n(12461),
                        i = n(25376),
                        s = n(98253);

                    function a(t, e, n) {
                        if ((0, s.K)(t) && t.length) {
                            for (var a = t.split("."), u = n, c = a[0], l = 0; a.length - 1 > l; l += 1)(0, o.c)(u[c = a[l]]) || (0, i.Q)(u[c]) || (u[c] = (0, r.k)(a[l + 1]) ? [] : {}), u = u[c];
                            u && (u[a[a.length - 1]] = e)
                        }
                    }
                },
                41111: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M384 1662l17-85q6-2 81.5-21.5t111.5-37.5q28-35 41-101 1-7 62-289t114-543.5 52-296.5v-25q-24-13-54.5-18.5t-69.5-8-58-5.5l19-103q33 2 120 6.5t149.5 7 120.5 2.5q48 0 98.5-2.5t121-7 98.5-6.5q-5 39-19 89-30 10-101.5 28.5t-108.5 33.5q-8 19-14 42.5t-9 40-7.5 45.5-6.5 42q-27 148-87.5 419.5t-77.5 355.5q-2 9-13 58t-20 90-16 83.5-6 57.5l1 18q17 4 185 31-3 44-16 99-11 0-32.5 1.5t-32.5 1.5q-29 0-87-10t-86-10q-138-2-206-2-51 0-143 9t-121 11z"/> </svg>'
                },
                41133: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.select = {
                        normalizeSelectionBeforeCutAndCopy: !1,
                        normalizeTripleClick: !0
                    }
                },
                41159: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        y: function () {
                            return i
                        }
                    });
                    var o = n(55186),
                        r = n(641);

                    function i(t, e, n, i) {
                        var s = "br" === n.toLowerCase(),
                            a = e.createInside,
                            u = a.element(n),
                            c = a.element("br");
                        return s || u.appendChild(c), i && i.cssText && u.setAttribute("style", i.cssText), o.J.after(t, u), o.J.before(s ? u : c, t), (0, r.$)(u, e.editor, e.ed), u
                    }
                },
                41324: function (e) {
                    "use strict";
                    e.exports = t
                },
                42448: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $: function () {
                            return i
                        }
                    });
                    var o = n(34796),
                        r = n(44210),
                        i = function () {
                            for (var t, e = [], n = 0; arguments.length > n; n++) e[n] = arguments[n];
                            return ((0, o.a)(Array.from) ? Array.from : null !== (t = (0, r.c)("Array.from")) && void 0 !== t ? t : Array.from).apply(Array, e)
                        }
                },
                42589: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return Array.isArray(t) ? t : t.split(/[,\s]+/)
                    }
                    n.d(e, {
                        u: function () {
                            return o
                        }
                    })
                },
                42898: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(71842),
                        i = n(72874);

                    function s(t, e, n) {
                        var s = !1,
                            a = t.s,
                            u = a.setCursorBefore,
                            c = a.setCursorIn,
                            l = r.J.closest(e, r.J.isElement, t.editor);
                        if (!l || !r.J.isEmpty(l)) return !1;
                        var f = r.J.findNotEmptyNeighbor(e, n, t.editor);
                        do {
                            if (!l || !r.J.isEmpty(l) || r.J.isCell(l)) break;
                            r.J.after(l, e);
                            var d = r.J.closest(l, (function (t) {
                                return r.J.isElement(t) && t !== l
                            }), t.editor);
                            r.J.safeRemove(l), s = !0, l = d
                        } while (l);
                        return !(!s || !(0, i.a)(t, e, n)) || (!f || r.J.isText(f) || r.J.isTag(f, o.INSEPARABLE_TAGS) ? u(e) : c(f, !n), s)
                    }
                },
                43327: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        E: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(81779);

                    function s(t, e, n) {
                        for (var i = e, s = i; i && !r.J.findNotEmptySibling(i, n) && i.parentElement !== t.editor;) s = i = i.parentElement;
                        if (r.J.isElement(s) && r.J.isContentEditable(s, t.editor)) {
                            var u = r.J.findNotEmptySibling(s, n);
                            if (u && (function (t, e, n, i) {
                                    var s = r.J.isTag(n, o.LIST_TAGS),
                                        u = r.J.isTag(e, o.LIST_TAGS),
                                        c = function (t, e) {
                                            return e ? t.firstElementChild : t.lastElementChild
                                        };
                                    return u ? (n = t.createInside.element(t.o.enterBlock), r.J.before(e, n), a(t, c(e, i), n, i)) : !(!n || !s || u) && a(t, e, c(n, !i), i)
                                }(t, s, u, n) || a(t, s, u, n))) return t.s.setCursorBefore(e), !0
                        }
                        return !1
                    }

                    function a(t, e, n, o) {
                        if (e && r.J.isElement(n)) {
                            r.J.moveContent(e, n, !o, (0, i.g)(t));
                            for (var s = e; s && s !== t.editor && r.J.isEmpty(s);) {
                                var a = s.parentElement;
                                r.J.safeRemove(s), s = a
                            }
                            return !0
                        }
                        return !1
                    }
                },
                43431: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        h: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = function () {
                            function t() {
                                this.__map = new Map
                            }
                            return t.prototype.on = function (t, e) {
                                var n;
                                return this.__map.has(t) || this.__map.set(t, new Set), null === (n = this.__map.get(t)) || void 0 === n || n.add(e), this
                            }, t.prototype.off = function (t, e) {
                                var n;
                                return this.__map.has(t) && (null === (n = this.__map.get(t)) || void 0 === n || n.delete(e)), this
                            }, t.prototype.destruct = function () {
                                this.__map.clear()
                            }, t.prototype.emit = function (t) {
                                for (var e, n, r = [], i = 1; arguments.length > i; i++) r[i - 1] = arguments[i];
                                return this.__map.has(t) && (null === (e = this.__map.get(t)) || void 0 === e || e.forEach((function (t) {
                                    n = t.apply(void 0, (0, o.fX)([], (0, o.zs)(r), !1))
                                }))), n
                            }, t
                        }()
                },
                44210: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        c: function () {
                            return a
                        }
                    });
                    var o = n(17352),
                        r = n(69052),
                        i = n(16841),
                        s = {};

                    function a(t) {
                        var e, n;
                        if (!(t in s)) {
                            var a = o.globalDocument.createElement("iframe");
                            try {
                                if (a.src = "about:blank", o.globalDocument.body.appendChild(a), !a.contentWindow) return null;
                                var u = (0, i.J)(t, a.contentWindow),
                                    c = (0, i.J)(t.split(".").slice(0, -1).join("."), a.contentWindow);
                                (0, r.T)(u) && (s[t] = u.bind(c))
                            } catch (t) {
                                if (!o.IS_PROD) throw t
                            } finally {
                                null === (e = a.parentNode) || void 0 === e || e.removeChild(a)
                            }
                        }
                        return null !== (n = s[t]) && void 0 !== n ? n : null
                    }
                },
                44636: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"><path d="M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z"/></svg>'
                },
                44921: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(56298),
                        s = n(98434);
                    n(36115).T.prototype.controls.preview = {
                        icon: "eye",
                        command: "preview",
                        mode: r.MODE_SOURCE + r.MODE_WYSIWYG,
                        tooltip: "Preview"
                    }, i.fg.add("preview", (function (t) {
                        t.registerButton({
                            name: "preview"
                        }), t.registerCommand("preview", (function (e, n, r) {
                            var i = t.dlg();
                            i.setSize(1024, 600).open("", t.i18n("Preview")).setModal(!0);
                            var a = (0, o.zs)((0, s.u)(t, r, "px", i.getElm("content")), 2);
                            i.e.on(i, "afterClose", a[1])
                        }))
                    }))
                },
                45062: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1025 1369v167h-248l-159-252-24-42q-8-9-11-21h-3l-9 21q-10 20-25 44l-155 250h-258v-167h128l197-291-185-272h-137v-168h276l139 228q2 4 23 42 8 9 11 21h3q3-9 11-21l25-42 140-228h257v168h-125l-184 267 204 296h109zm639 217v206h-514l-4-27q-3-45-3-46 0-64 26-117t65-86.5 84-65 84-54.5 65-54 26-64q0-38-29.5-62.5t-70.5-24.5q-51 0-97 39-14 11-36 38l-105-92q26-37 63-66 80-65 188-65 110 0 178 59.5t68 158.5q0 66-34.5 118.5t-84 86-99.5 62.5-87 63-41 73h232v-80h126z"/> </svg>'
                },
                45244: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1639 1056q0 5-1 7-64 268-268 434.5t-478 166.5q-146 0-282.5-55t-243.5-157l-129 129q-19 19-45 19t-45-19-19-45v-448q0-26 19-45t45-19h448q26 0 45 19t19 45-19 45l-137 137q71 66 161 102t187 36q134 0 250-65t186-179q11-17 53-117 8-23 30-23h192q13 0 22.5 9.5t9.5 22.5zm25-800v448q0 26-19 45t-45 19h-448q-26 0-45-19t-19-45 19-45l138-138q-148-137-349-137-134 0-250 65t-186 179q-11 17-53 117-8 23-30 23h-199q-13 0-22.5-9.5t-9.5-22.5v-7q65-268 270-434.5t480-166.5q146 0 284 55.5t245 156.5l130-129q19-19 45-19t45 19 19 45z"/> </svg>'
                },
                45512: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 10 10"> <path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/> </svg>'
                },
                45674: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M896 1152q0-36-20-69-1-1-15.5-22.5t-25.5-38-25-44-21-50.5q-4-16-21-16t-21 16q-7 23-21 50.5t-25 44-25.5 38-15.5 22.5q-20 33-20 69 0 53 37.5 90.5t90.5 37.5 90.5-37.5 37.5-90.5zm512-128q0 212-150 362t-362 150-362-150-150-362q0-145 81-275 6-9 62.5-90.5t101-151 99.5-178 83-201.5q9-30 34-47t51-17 51.5 17 33.5 47q28 93 83 201.5t99.5 178 101 151 62.5 90.5q81 127 81 275z"/> </svg>'
                },
                46079: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(71842),
                        i = n(56298),
                        s = n(97369),
                        a = (n(97767), n(3392)),
                        u = function (t, e, n, o) {
                            if (e && !t.has(e)) {
                                var r = (0, a.i)(n.o.direction, e);
                                t.add(e);
                                var i = e.style[r] ? parseInt(e.style[r], 10) : 0;
                                e.style[r] = (i += n.o.indentMargin * ("outdent" === o ? -1 : 1)) > 0 ? i + "px" : "", (0, s.attr)(e, "style") || (0, s.attr)(e, "style", null)
                            }
                        };
                    i.fg.add("indent", (function (t) {
                        t.registerButton({
                            name: "indent",
                            group: "indent"
                        }).registerButton({
                            name: "outdent",
                            group: "indent"
                        });
                        var e = function (e) {
                            var n = new Set,
                                i = t.o,
                                a = i.enter,
                                c = i.enterBlock,
                                l = a.toLowerCase() === o.BR,
                                f = t.s.current();
                            if (l && t.s.isCollapsed() && f) {
                                var d = r.J.wrapNextInline(f, c, t);
                                return u(n, d, t, e), !1
                            }
                            return t.s.eachSelection((function (o) {
                                t.s.save();
                                var i = !!o && r.J.up(o, r.J.isBlock, t.editor);
                                if (!i && o && (i = (0, s.call)(l ? r.J.wrapNextInline : r.J.wrapInline, o, l ? c : a.toLowerCase(), t)), !i) return t.s.restore(), !1;
                                u(n, i, t, e), t.s.restore()
                            })), t.synchronizeValues(), !1
                        };
                        t.registerCommand("indent", {
                            exec: e,
                            hotkeys: ["ctrl+]", "cmd+]"]
                        }), t.registerCommand("outdent", {
                            exec: e,
                            hotkeys: ["ctrl+[", "cmd+["]
                        })
                    }))
                },
                46173: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        x: function () {
                            return Jodit
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(56298),
                        a = n(65147),
                        u = n(53883),
                        c = n(58597),
                        l = n(36115),
                        f = n(37435),
                        d = "data-jodit-default-style-display",
                        p = "data-jodit-default-classes",
                        Jodit = function (t) {
                            function Jodit(n, o) {
                                var i = t.call(this, o, !0) || this;
                                i.isJodit = !0, i.commands = new Map, i.__selectionLocked = null, i.__wasReadOnly = !1, i.editorIsActive = !1, i.__mode = r.MODE_WYSIWYG, i.__callChangeCount = 0, i.__isSilentChange = !1, i.__elementToPlace = new Map;
                                try {
                                    var u = (0, a.resolveElement)(n, i.o.shadowRoot || i.od);
                                    if (e.isJoditAssigned(u)) return u.component
                                } catch (t) {
                                    if (!r.IS_PROD) throw t;
                                    throw i.destruct(), t
                                }
                                i.setStatus(f.STATUSES.beforeInit), i.id = (0, a.attr)((0, a.resolveElement)(n, i.o.shadowRoot || i.od), "id") || (new Date).getTime().toString(), s.VF[i.id] = i, i.attachEvents(o), i.e.on(i.ow, "resize", (function () {
                                    i.e && i.e.fire("resize")
                                })), i.e.on("prepareWYSIWYGEditor", i.__prepareWYSIWYGEditor), i.selection = new f.Selection(i);
                                var c = i.beforeInitHook();
                                return (0, a.callPromise)(c, (function () {
                                    if (!i.isInDestruct) {
                                        i.e.fire("beforeInit", i), s.fg.__init(i), i.e.fire("afterPluginSystemInit", i), i.e.on("changePlace", (function () {
                                            i.setReadOnly(i.o.readonly), i.setDisabled(i.o.disabled)
                                        })), i.places.length = 0;
                                        var t = i.addPlace(n, o);
                                        s.VF[i.id] = i, (0, a.callPromise)(t, (function () {
                                            i.isInDestruct || (i.e && i.e.fire("afterInit", i), (0, a.callPromise)(i.afterInitHook()), i.setStatus(f.STATUSES.ready), i.e.fire("afterConstructor", i))
                                        }))
                                    }
                                })), i
                            }
                            var e;
                            return (0, o.C6)(Jodit, t), e = Jodit, Jodit.prototype.className = function () {
                                return "Jodit"
                            }, Jodit.prototype.waitForReady = function () {
                                var t = this;
                                return this.isReady ? Promise.resolve(this) : this.async.promise((function (e) {
                                    t.hookStatus("ready", (function () {
                                        return e(t)
                                    }))
                                }))
                            }, Object.defineProperty(Jodit, "ready", {
                                get: function () {
                                    return new Promise((function (t) {
                                        s.RR.on("joditready", t)
                                    }))
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "text", {
                                get: function () {
                                    if (this.editor) return this.editor.innerText || "";
                                    var t = this.createInside.div();
                                    return t.innerHTML = this.getElementValue(), t.innerText || ""
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "defaultTimeout", {
                                get: function () {
                                    return (0, a.isNumber)(this.o.defaultTimeout) ? this.o.defaultTimeout : l.T.defaultOptions.defaultTimeout
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Jodit.atom = function (t) {
                                return (0, a.markAsAtomic)(t)
                            }, Jodit.make = function (t, e) {
                                return new this(t, e)
                            }, Jodit.isJoditAssigned = function (t) {
                                return t && (0, a.isJoditObject)(t.component) && !t.component.isInDestruct
                            }, Object.defineProperty(Jodit, "defaultOptions", {
                                get: function () {
                                    return l.T.defaultOptions
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "createInside", {
                                get: function () {
                                    var t = this;
                                    return new f.Create((function () {
                                        return t.ed
                                    }), this.o.createAttributes)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Jodit.prototype.__setPlaceField = function (t, e) {
                                this.currentPlace || (this.currentPlace = {}, this.places = [this.currentPlace]), this.currentPlace[t] = e
                            }, Object.defineProperty(Jodit.prototype, "element", {
                                get: function () {
                                    return this.currentPlace.element
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "editor", {
                                get: function () {
                                    return this.currentPlace.editor
                                },
                                set: function (t) {
                                    this.__setPlaceField("editor", t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "container", {
                                get: function () {
                                    return this.currentPlace.container
                                },
                                set: function (t) {
                                    this.__setPlaceField("container", t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "workplace", {
                                get: function () {
                                    return this.currentPlace.workplace
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "message", {
                                get: function () {
                                    return this.getMessageModule(this.workplace)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "statusbar", {
                                get: function () {
                                    return this.currentPlace.statusbar
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "iframe", {
                                get: function () {
                                    return this.currentPlace.iframe
                                },
                                set: function (t) {
                                    this.__setPlaceField("iframe", t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "history", {
                                get: function () {
                                    return this.currentPlace.history
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "editorWindow", {
                                get: function () {
                                    return this.currentPlace.editorWindow
                                },
                                set: function (t) {
                                    this.__setPlaceField("editorWindow", t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "ew", {
                                get: function () {
                                    return this.editorWindow
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "editorDocument", {
                                get: function () {
                                    return this.currentPlace.editorWindow.document
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "ed", {
                                get: function () {
                                    return this.editorDocument
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "options", {
                                get: function () {
                                    return this.currentPlace.options
                                },
                                set: function (t) {
                                    this.__setPlaceField("options", t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "s", {
                                get: function () {
                                    return this.selection
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "uploader", {
                                get: function () {
                                    return this.getInstance("Uploader", this.o.uploader)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "filebrowser", {
                                get: function () {
                                    var t = this,
                                        e = (0, a.ConfigProto)({
                                            defaultTimeout: t.defaultTimeout,
                                            uploader: t.o.uploader,
                                            language: t.o.language,
                                            license: t.o.license,
                                            theme: t.o.theme,
                                            shadowRoot: t.o.shadowRoot,
                                            defaultCallback: function (e) {
                                                e.files && e.files.length && e.files.forEach((function (n, o) {
                                                    var r = e.baseurl + n;
                                                    e.isImages && e.isImages[o] ? t.s.insertImage(r, null, t.o.imageDefaultWidth) : t.s.insertNode(t.createInside.fromHTML("<a href='".concat(r, "' title='").concat(r, "'>").concat(r, "</a>")))
                                                }))
                                            }
                                        }, this.o.filebrowser);
                                    return t.getInstance("FileBrowser", e)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(Jodit.prototype, "mode", {
                                get: function () {
                                    return this.__mode
                                },
                                set: function (t) {
                                    this.setMode(t)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Jodit.prototype.getNativeEditorValue = function () {
                                var t = this.e.fire("beforeGetNativeEditorValue");
                                return (0, a.isString)(t) ? t : this.editor ? this.editor.innerHTML : this.getElementValue()
                            }, Jodit.prototype.setNativeEditorValue = function (t) {
                                var e = {
                                    value: t
                                };
                                this.e.fire("beforeSetNativeEditorValue", e) || this.editor && (this.editor.innerHTML = e.value)
                            }, Object.defineProperty(Jodit.prototype, "value", {
                                get: function () {
                                    return this.getEditorValue()
                                },
                                set: function (t) {
                                    this.setEditorValue(t), this.history.__processChanges()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Jodit.prototype.synchronizeValues = function () {
                                this.__imdSynchronizeValues()
                            }, Jodit.prototype.__imdSynchronizeValues = function () {
                                this.setEditorValue()
                            }, Jodit.prototype.getEditorValue = function (t, e) {
                                var n;
                                if (void 0 === t && (t = !0), void 0 !== (n = this.e.fire("beforeGetValueFromEditor", e))) return n;
                                n = this.getNativeEditorValue().replace(r.INVISIBLE_SPACE_REG_EXP(), ""), t && (n = n.replace(/<span[^>]+id="jodit-selection_marker_[^>]+><\/span>/g, "")), "<br>" === n && (n = "");
                                var o = {
                                    value: n
                                };
                                return this.e.fire("afterGetValueFromEditor", o, e), o.value
                            }, Jodit.prototype.setEditorValue = function (t) {
                                var e = this.e.fire("beforeSetValueToEditor", t);
                                if (!1 !== e)
                                    if ((0, a.isString)(e) && (t = e), this.editor) {
                                        if (!(0, a.isString)(t) && !(0, a.isVoid)(t)) throw (0, a.error)("value must be string");
                                        (0, a.isVoid)(t) || this.getNativeEditorValue() === t || this.setNativeEditorValue(t), this.e.fire("postProcessSetEditorValue");
                                        var n = this.getElementValue(),
                                            o = this.getEditorValue();
                                        if (!this.__isSilentChange && n !== o && r.SAFE_COUNT_CHANGE_CALL > this.__callChangeCount) {
                                            this.__setElementValue(o), this.__callChangeCount += 1;
                                            try {
                                                this.history.__upTick(), this.e.fire("change", o, n), this.e.fire(this.history, "change", o, n)
                                            } finally {
                                                this.__callChangeCount = 0
                                            }
                                        }
                                    } else void 0 !== t && this.__setElementValue(t)
                            }, Jodit.prototype.updateElementValue = function () {
                                this.__setElementValue(this.getEditorValue())
                            }, Jodit.prototype.getElementValue = function () {
                                return void 0 !== this.element.value ? this.element.value : this.element.innerHTML
                            }, Jodit.prototype.__setElementValue = function (t) {
                                var e = this;
                                if (!(0, a.isString)(t)) throw (0, a.error)("value must be string");
                                if (this.element !== this.container && t !== this.getElementValue()) {
                                    var n = {
                                            value: t
                                        },
                                        o = this.e.fire("beforeSetElementValue", n);
                                    (0, a.callPromise)(o, (function () {
                                        void 0 !== e.element.value ? e.element.value = n.value : e.element.innerHTML = n.value, e.e.fire("afterSetElementValue", n)
                                    }))
                                }
                            }, Jodit.prototype.registerCommand = function (t, e, n) {
                                var o = t.toLowerCase(),
                                    r = this.commands.get(o);
                                if (void 0 === r && this.commands.set(o, r = []), r.push(e), !(0, a.isFunction)(e)) {
                                    var i = this.o.commandToHotkeys[o] || this.o.commandToHotkeys[t] || e.hotkeys;
                                    i && this.registerHotkeyToCommand(i, o, null == n ? void 0 : n.stopPropagation)
                                }
                                return this
                            }, Jodit.prototype.registerHotkeyToCommand = function (t, e, n) {
                                var o = this;
                                void 0 === n && (n = !0);
                                var r = (0, a.asArray)(t).map(a.normalizeKeyAliases).map((function (t) {
                                    return t + ".hotkey"
                                })).join(" ");
                                this.e.off(r).on(r, (function (t, r) {
                                    return r && (r.shouldStop = null == n || n), o.execCommand(e)
                                }))
                            }, Jodit.prototype.execCommand = function (t, e, n) {
                                for (var i, s, u = [], c = 3; arguments.length > c; c++) u[c - 3] = arguments[c];
                                if (this.s.isFocused() || this.s.focus(), !this.o.readonly || this.o.allowCommandsInReadOnly.includes(t)) {
                                    var l;
                                    if (t = t.toLowerCase(), !1 !== (l = (i = this.e).fire.apply(i, (0, o.fX)(["beforeCommand".concat((0, a.ucfirst)(t)), e, n], (0, o.zs)(u), !1))) && (l = (s = this.e).fire.apply(s, (0, o.fX)(["beforeCommand", t, e, n], (0, o.zs)(u), !1))), !1 !== l && (l = this.__execCustomCommands.apply(this, (0, o.fX)([t, e, n], (0, o.zs)(u), !1))), !1 !== l) {
                                        this.s.focus();
                                        try {
                                            l = this.nativeExecCommand(t, e, n)
                                        } catch (t) {
                                            if (!r.IS_PROD) throw t
                                        }
                                    }
                                    return this.e.fire("afterCommand", t, e, n), this.__imdSynchronizeValues(), l
                                }
                            }, Jodit.prototype.nativeExecCommand = function (t, e, n) {
                                this.__isSilentChange = !0;
                                try {
                                    return this.ed.execCommand(t, e, n)
                                } finally {
                                    this.__isSilentChange = !1
                                }
                            }, Jodit.prototype.__execCustomCommands = function (t, e, n) {
                                for (var r = this, i = [], s = 3; arguments.length > s; s++) i[s - 3] = arguments[s];
                                t = t.toLowerCase();
                                var u, c = this.commands.get(t);
                                if (void 0 !== c) return c.forEach((function (s) {
                                    var c, l = (c = (0, a.isFunction)(s) ? s : s.exec).call.apply(c, (0, o.fX)([r, t, e, n], (0, o.zs)(i), !1));
                                    void 0 !== l && (u = l)
                                })), u
                            }, Jodit.prototype.lock = function (e) {
                                return void 0 === e && (e = "any"), !!t.prototype.lock.call(this, e) && (this.__selectionLocked = this.s.save(), this.s.clear(), this.editor.classList.add("jodit_lock"), this.e.fire("lock", !0), !0)
                            }, Jodit.prototype.unlock = function () {
                                return !!t.prototype.unlock.call(this) && (this.editor.classList.remove("jodit_lock"), this.__selectionLocked && this.s.restore(), this.e.fire("lock", !1), !0)
                            }, Jodit.prototype.getMode = function () {
                                return this.mode
                            }, Jodit.prototype.isEditorMode = function () {
                                return this.getRealMode() === r.MODE_WYSIWYG
                            }, Jodit.prototype.getRealMode = function () {
                                if (this.getMode() !== r.MODE_SPLIT) return this.getMode();
                                var t = this.od.activeElement;
                                return t && (t === this.iframe || f.Dom.isOrContains(this.editor, t) || f.Dom.isOrContains(this.toolbar.container, t)) ? r.MODE_WYSIWYG : r.MODE_SOURCE
                            }, Jodit.prototype.setMode = function (t) {
                                var e = this,
                                    n = this.getMode(),
                                    o = {
                                        mode: parseInt(t.toString(), 10)
                                    },
                                    i = ["jodit-wysiwyg_mode", "jodit-source__mode", "jodit_split_mode"];
                                !1 !== this.e.fire("beforeSetMode", o) && (this.__mode = [r.MODE_SOURCE, r.MODE_WYSIWYG, r.MODE_SPLIT].includes(o.mode) ? o.mode : r.MODE_WYSIWYG, this.o.saveModeInStorage && this.storage.set("jodit_default_mode", this.mode), i.forEach((function (t) {
                                    e.container.classList.remove(t)
                                })), this.container.classList.add(i[this.mode - 1]), n !== this.getMode() && this.e.fire("afterSetMode"))
                            }, Jodit.prototype.toggleMode = function () {
                                var t = this.getMode();
                                [r.MODE_SOURCE, r.MODE_WYSIWYG, this.o.useSplitMode ? r.MODE_SPLIT : 9].includes(t + 1) ? t += 1 : t = r.MODE_WYSIWYG, this.setMode(t)
                            }, Jodit.prototype.setDisabled = function (t) {
                                this.o.disabled = t;
                                var e = this.__wasReadOnly;
                                this.setReadOnly(t || e), this.__wasReadOnly = e, this.editor && (this.editor.setAttribute("aria-disabled", t.toString()), this.container.classList.toggle("jodit_disabled", t), this.e.fire("disabled", t))
                            }, Jodit.prototype.getDisabled = function () {
                                return this.o.disabled
                            }, Jodit.prototype.setReadOnly = function (t) {
                                this.__wasReadOnly !== t && (this.__wasReadOnly = t, this.o.readonly = t, t ? this.editor && this.editor.removeAttribute("contenteditable") : this.editor && this.editor.setAttribute("contenteditable", "true"), this.e && this.e.fire("readonly", t))
                            }, Jodit.prototype.getReadOnly = function () {
                                return this.o.readonly
                            }, Jodit.prototype.focus = function () {
                                this.getMode() !== r.MODE_SOURCE && this.s.focus()
                            }, Object.defineProperty(Jodit.prototype, "isFocused", {
                                get: function () {
                                    return this.s.isFocused()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Jodit.prototype.beforeInitHook = function () {}, Jodit.prototype.afterInitHook = function () {}, Jodit.prototype.initOptions = function (t) {
                                this.options = (0, a.ConfigProto)(t || {}, l.T.defaultOptions)
                            }, Jodit.prototype.initOwners = function () {
                                this.editorWindow = this.o.ownerWindow, this.ownerWindow = this.o.ownerWindow
                            }, Jodit.prototype.addPlace = function (t, e) {
                                var n = this,
                                    o = (0, a.resolveElement)(t, this.o.shadowRoot || this.od);
                                this.attachEvents(e), o.attributes && (0, a.toArray)(o.attributes).forEach((function (t) {
                                    var o = t.name,
                                        r = t.value;
                                    void 0 === l.T.defaultOptions[o] || e && void 0 !== e[o] || (-1 !== ["readonly", "disabled"].indexOf(o) && (r = "" === r || "true" === r), /^[0-9]+(\.)?([0-9]+)?$/.test(r.toString()) && (r = Number(r)), n.options[o] = r)
                                }));
                                var r = this.c.div("jodit-container");
                                r.classList.add("jodit"), r.classList.add("jodit-container"), r.classList.add("jodit_theme_".concat(this.o.theme || "default")), h(this.o.className, r), this.o.containerStyle && (0, a.css)(r, this.o.containerStyle);
                                var i = this.o.styleValues;
                                Object.keys(i).forEach((function (t) {
                                    var e = (0, a.kebabCase)(t);
                                    r.style.setProperty("--jd-".concat(e), i[t])
                                })), r.setAttribute("contenteditable", "false");
                                var s = null;
                                this.o.inline && (-1 === ["TEXTAREA", "INPUT"].indexOf(o.nodeName) && (r = o, o.setAttribute(p, o.className.toString()), s = r.innerHTML, r.innerHTML = ""), r.classList.add("jodit_inline"), r.classList.add("jodit-container")), o !== r && (o.style.display && o.setAttribute(d, o.style.display), o.style.display = "none");
                                var u = this.c.div("jodit-workplace", {
                                    contenteditable: !1
                                });
                                r.appendChild(u), o.parentNode && o !== r && o.parentNode.insertBefore(r, o), Object.defineProperty(o, "component", {
                                    enumerable: !1,
                                    configurable: !0,
                                    value: this
                                });
                                var c = this.c.div("jodit-wysiwyg", {
                                    contenteditable: !0,
                                    "aria-disabled": !1,
                                    tabindex: this.o.tabIndex
                                });
                                u.appendChild(c);
                                var v = {
                                    editor: c,
                                    element: o,
                                    container: r,
                                    workplace: u,
                                    statusbar: new f.StatusBar(this, r),
                                    options: this.isReady ? (0, a.ConfigProto)(e || {}, l.T.defaultOptions) : this.options,
                                    history: new f.History(this),
                                    editorWindow: this.ow
                                };
                                this.__elementToPlace.set(c, v), this.setCurrentPlace(v), this.places.push(v), this.setNativeEditorValue(this.getElementValue());
                                var g = this.__initEditor(s),
                                    m = this.options;
                                return (0, a.callPromise)(g, (function () {
                                    m.enableDragAndDropFileToEditor && m.uploader && (m.uploader.url || m.uploader.insertImageAsBase64URI) && n.uploader.bind(n.editor), n.__elementToPlace.get(n.editor) || n.__elementToPlace.set(n.editor, v), n.e.fire("afterAddPlace", v)
                                }))
                            }, Jodit.prototype.addDisclaimer = function (t) {
                                this.workplace.appendChild(t)
                            }, Jodit.prototype.setCurrentPlace = function (t) {
                                this.currentPlace !== t && (this.isEditorMode() || this.setMode(r.MODE_WYSIWYG), this.currentPlace = t, this.buildToolbar(), this.isReady && this.e.fire("changePlace", t))
                            }, Jodit.prototype.__initEditor = function (t) {
                                var e = this,
                                    n = this.__createEditor();
                                return (0, a.callPromise)(n, (function () {
                                    if (!e.isInDestruct) {
                                        if (e.element !== e.container) {
                                            var n = e.getElementValue();
                                            n !== e.getEditorValue() && e.setEditorValue(n)
                                        } else null != t && e.setEditorValue(t);
                                        var o = e.o.defaultMode;
                                        if (e.o.saveModeInStorage) {
                                            var r = e.storage.get("jodit_default_mode");
                                            "string" == typeof r && (o = parseInt(r, 10))
                                        }
                                        e.setMode(o), e.o.readonly && (e.__wasReadOnly = !1, e.setReadOnly(!0)), e.o.disabled && e.setDisabled(!0);
                                        try {
                                            e.ed.execCommand("defaultParagraphSeparator", !1, e.o.enter.toLowerCase())
                                        } catch (t) {}
                                    }
                                }))
                            }, Jodit.prototype.__createEditor = function () {
                                var t = this,
                                    e = this.editor,
                                    n = this.e.fire("createEditor", this);
                                return (0, a.callPromise)(n, (function () {
                                    t.isInDestruct || ((!1 === n || (0, a.isPromise)(n)) && f.Dom.safeRemove(e), h(t.o.editorClassName, t.editor), t.o.style && (0, a.css)(t.editor, t.o.style), t.e.on("synchro", (function () {
                                        t.setEditorValue()
                                    })).on("focus", (function () {
                                        t.editorIsActive = !0
                                    })).on("blur", (function () {
                                        return t.editorIsActive = !1
                                    })), t.__prepareWYSIWYGEditor(), t.o.triggerChangeEvent && t.e.on("change", t.async.debounce((function () {
                                        t.e && t.e.fire(t.element, "change")
                                    }), t.defaultTimeout)))
                                }))
                            }, Jodit.prototype.__prepareWYSIWYGEditor = function () {
                                var t = this,
                                    e = this.editor;
                                if (this.o.direction) {
                                    var n = "rtl" === this.o.direction.toLowerCase() ? "rtl" : "ltr";
                                    this.editor.style.direction = n, this.editor.setAttribute("dir", n), this.container.style.direction = n, this.container.setAttribute("dir", n), this.toolbar.setDirection(n)
                                }
                                this.e.on(e, "mousedown touchstart focus", (function () {
                                    var n = t.__elementToPlace.get(e);
                                    n && t.setCurrentPlace(n)
                                })).on(e, "compositionend", this.synchronizeValues).on(e, "selectionchange selectionstart keydown keyup input keypress dblclick mousedown mouseup click copy cut dragstart drop dragover paste resize touchstart touchend focus blur", (function (e) {
                                    if (!t.o.readonly && !t.__isSilentChange && !(e instanceof t.ew.KeyboardEvent && e.isComposing) && t.e && t.e.fire) {
                                        if (!1 === t.e.fire(e.type, e)) return !1;
                                        t.synchronizeValues()
                                    }
                                }))
                            }, Jodit.prototype.fetch = function (t, e) {
                                var n = this,
                                    r = new u.d((0, o.Cl)({
                                        url: t
                                    }, e), this.o.defaultAjaxOptions),
                                    i = function () {
                                        n.e.off("beforeDestruct", i), n.progressbar.progress(100).hide(), r.destruct()
                                    };
                                this.e.one("beforeDestruct", i), this.progressbar.show().progress(30);
                                var s = r.send();
                                return s.finally(i).catch((function () {
                                    return null
                                })), s
                            }, Jodit.prototype.destruct = function () {
                                var e, n, o = this;
                                if (!this.isInDestruct) {
                                    this.setStatus(f.STATUSES.beforeDestruct), this.__elementToPlace.clear(), null === (e = (0, i.cached)(this, "storage")) || void 0 === e || e.clear(), null === (n = (0, i.cached)(this, "buffer")) || void 0 === n || n.clear(), this.commands.clear(), this.__selectionLocked = null, this.e.off(this.ow, "resize"), this.e.off(this.ow), this.e.off(this.od), this.e.off(this.od.body);
                                    var r = this.editor ? this.getEditorValue() : "";
                                    this.places.forEach((function (t) {
                                        var e = t.container,
                                            n = t.workplace,
                                            i = t.statusbar,
                                            s = t.element,
                                            u = t.iframe,
                                            c = t.editor,
                                            l = t.history;
                                        if (s) {
                                            if (s !== e)
                                                if (s.hasAttribute(d)) {
                                                    var h = (0, a.attr)(s, d);
                                                    h && (s.style.display = h, s.removeAttribute(d))
                                                } else s.style.display = "";
                                            else s.hasAttribute(p) && (s.className = (0, a.attr)(s, p) || "", s.removeAttribute(p));
                                            s.hasAttribute("style") && !(0, a.attr)(s, "style") && s.removeAttribute("style"), i.destruct(), o.e.off(e), o.e.off(s), o.e.off(c), f.Dom.safeRemove(n), f.Dom.safeRemove(c), e !== s && f.Dom.safeRemove(e), Object.defineProperty(s, "component", {
                                                enumerable: !1,
                                                configurable: !0,
                                                value: null
                                            }), f.Dom.safeRemove(u), e === s && (s.innerHTML = r), l.destruct()
                                        }
                                    })), this.places.length = 0, this.currentPlace = {}, delete s.VF[this.id], t.prototype.destruct.call(this)
                                }
                            }, Jodit.fatMode = r.FAT_MODE, Jodit.plugins = s.fg, Jodit.modules = s.av, Jodit.ns = s.av, Jodit.decorators = {}, Jodit.constants = r, Jodit.instances = s.VF, Jodit.lang = r.lang, Jodit.core = {
                                Plugin: f.Plugin
                            }, (0, o.Cg)([i.cache], Jodit.prototype, "createInside", null), (0, o.Cg)([i.cache], Jodit.prototype, "message", null), (0, o.Cg)([i.cache], Jodit.prototype, "s", null), (0, o.Cg)([i.cache], Jodit.prototype, "uploader", null), (0, o.Cg)([i.cache], Jodit.prototype, "filebrowser", null), (0, o.Cg)([(0, i.throttle)()], Jodit.prototype, "synchronizeValues", null), (0, o.Cg)([(0, i.watch)(":internalChange")], Jodit.prototype, "updateElementValue", null), (0, o.Cg)([i.autobind], Jodit.prototype, "__prepareWYSIWYGEditor", null), e = (0, o.Cg)([(0, i.derive)(c.z)], Jodit)
                        }(f.ViewWithToolbar);

                    function h(t, e) {
                        t && t.split(/\s+/).forEach((function (t) {
                            return e.classList.add(t)
                        }))
                    }
                },
                46602: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Qe: function () {
                            return s
                        },
                        W8: function () {
                            return i.W
                        },
                        dY: function () {
                            return a
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(5298);

                    function s(t, e, n, r) {
                        var i, s = (null === (i = t.nodeValue) || void 0 === i ? void 0 : i.length) ? t.nodeValue : "";
                        if (r && s.replace((0, o.INVISIBLE_SPACE_REG_EXP_END)(), "").length > e) return !0;
                        var a = (0, o.INVISIBLE_SPACE_REG_EXP_START)().exec(s);
                        return n && (a && e > a[0].length || !a && e > 0)
                    }

                    function a(t, e, n, o, i, s) {
                        if ((t = e.startContainer.childNodes[e.startOffset]) || (t = e.startContainer.childNodes[e.startOffset - 1], n = !0), t && o && !r.J.isText(t))
                            if (!n && r.J.isText(t.previousSibling)) t = t.previousSibling;
                            else if (i)
                            for (var a = s(t); a;) {
                                if (a && r.J.isText(a)) {
                                    t = a;
                                    break
                                }
                                a = s(a)
                            }
                        if (t && !o && !r.J.isText(t)) {
                            var u = t,
                                c = t;
                            do {
                                u = u.firstChild, c = c.lastChild
                            } while (u && c && !r.J.isText(u));
                            u === c && u && r.J.isText(u) && (t = u)
                        }
                        return {
                            node: t,
                            rightMode: n
                        }
                    }
                    n(83541)
                },
                46681: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        _: function () {
                            return p
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = n(71151),
                        s = n(66927),
                        a = n(65147),
                        u = n(98253),
                        c = n(26150),
                        l = n(29780),
                        f = n(931),
                        d = n(9645),
                        p = function (t) {
                            function e(e, n, o) {
                                var r = t.call(this, e, {
                                    availableClasses: e.o.image.availableClasses
                                }) || this;
                                return r.state = n, r.handlers = o, r
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIImagePositionTab"
                            }, e.prototype.render = function (t) {
                                var e, n = t.availableClasses;
                                return '<div class="jodit-form__group &__editMargins">\n\t\t\t<label>~Margins~</label>\n\t\t\t<div class="jodit-grid jodit_vertical_middle">\n\t\t\t\t<input class="jodit_col-lg-1-5 jodit-input &__marginTop" type="text" placeholder="~top~"/>\n\t\t\t\t<a style="text-align: center;" class="jodit-properties__lock jodit_col-lg-1-5 &__lockMargin">*lock*</a>\n\t\t\t\t<input disabled="disabled" class="jodit_col-lg-1-5 jodit-input &__marginRight" type="text" placeholder="~right~"/>\n\t\t\t\t<input disabled="disabled" class="jodit_col-lg-1-5 jodit-input &__marginBottom" type="text" placeholder="~bottom~"/>\n\t\t\t\t<input disabled="disabled" class="jodit_col-lg-1-5 jodit-input &__marginLeft" type="text" placeholder="~left~"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="jodit-form__group &__editAlign">\n\t\t\t<label>~Align~</label>\n\t\t\t<select class="jodit-select &__align">\n\t\t\t\t<option value="">~--Not Set--~</option>\n\t\t\t\t<option value="left">~Left~</option>\n\t\t\t\t<option value="center">~Center~</option>\n\t\t\t\t<option value="right">~Right~</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class="jodit-form__group &__editStyle">\n\t\t\t<label>~Styles~</label>\n\t\t\t<input type="text" class="jodit-input &__style"/>\n\t\t</div>\n\t\t<div class="jodit-form__group &__editClass">\n\t\t\t<label>~Classes~</label>\n\t\t\t'.concat((e = [], n && n.length > 0 ? (e.push('<select class="jodit-input jodit-select &__classes">'), n.forEach((function (t) {
                                    (0, u.K)(t) ? e.push('<option value="'.concat(t, '">').concat(t, "</option>")): e.push('<option value="'.concat(t[0], '">').concat(t[1], "</option>"))
                                })), e.push("</select>")) : e.push('<input type="text" class="jodit-input &__classes"/>'), e.join("")), '\n\t\t</div>\n\t\t<div class="jodit-form__group &__editId">\n\t\t\t<label>Id</label>\n\t\t\t<input type="text" class="jodit-input &__id"/>\n\t\t</div>\n\t\t<div\n\t\t\tclass="jodit-form__group &__editBorderRadius"\n\t\t>\n\t\t\t<label>~Border radius~</label>\n\t\t\t<input type="number" class="jodit-input &__borderRadius"/>\n\t\t</div>')
                            }, e.prototype.onStateAlignChange = function () {
                                this.getElm("align").value = this.state.values.align
                            }, e.prototype.onChangeAlign = function () {
                                var t = this.getElm("align");
                                this.state.values.align = t.value
                            }, e.prototype.onStateValuesBorderRadiusChange = function () {
                                this.getElm("borderRadius").value = this.state.values.borderRadius.toString()
                            }, e.prototype.onChangeBorderRadius = function () {
                                var t = this.getElm("borderRadius");
                                this.state.values.borderRadius = parseFloat(t.value)
                            }, e.prototype.onStateValuesIdChange = function () {
                                this.getElm("id").value = this.state.values.id
                            }, e.prototype.onChangeId = function () {
                                var t = this.getElm("id");
                                this.state.values.id = t.value
                            }, e.prototype.onStateValuesStyleChange = function () {
                                this.getElm("style").value = this.state.values.style
                            }, e.prototype.onChangeStyle = function () {
                                var t = this.getElm("style");
                                this.state.values.style = t.value
                            }, e.prototype.onStateValuesClassesChange = function () {
                                this.getElm("classes").value = this.state.values.classes
                            }, e.prototype.onChangClasses = function () {
                                var t = this.getElm("classes");
                                this.state.values.classes = t.value
                            }, e.prototype.onLockMarginClick = function (t) {
                                this.state.marginIsLocked = !this.state.marginIsLocked, t.preventDefault()
                            }, e.prototype.onChangeMarginIsLocked = function () {
                                var t = this,
                                    e = this.getElm("marginBottom"),
                                    n = this.getElm("marginRight"),
                                    o = this.getElm("marginLeft"),
                                    r = this.getElm("lockMargin");
                                if ([n, e, o].forEach((function (e) {
                                        (0, c.C)(e, "disabled", t.state.marginIsLocked || null)
                                    })), r.innerHTML = f.I.get(this.state.marginIsLocked ? "lock" : "unlock"), this.state.marginIsLocked) {
                                    var i = this.state.values.marginTop;
                                    this.state.values.marginRight = i, this.state.values.marginBottom = i, this.state.values.marginLeft = i
                                }
                            }, e.prototype.onStateValuesMarginChange = function () {
                                var t = this.getElm("marginTop"),
                                    e = this.getElm("marginRight"),
                                    n = this.getElm("marginBottom"),
                                    o = this.getElm("marginLeft");
                                t.value = this.state.values.marginTop.toString(), e.value = this.state.values.marginRight.toString(), n.value = this.state.values.marginBottom.toString(), o.value = this.state.values.marginLeft.toString()
                            }, e.prototype.onChangeMargin = function () {
                                var t = this.getElm("marginTop"),
                                    e = this.getElm("marginRight"),
                                    n = this.getElm("marginBottom"),
                                    o = this.getElm("marginLeft");
                                this.state.values.marginTop = (0, d.G)(t.value), this.state.marginIsLocked ? (this.state.values.marginRight = this.state.values.marginTop, this.state.values.marginBottom = this.state.values.marginTop, this.state.values.marginLeft = this.state.values.marginTop) : (this.state.values.marginRight = (0, d.G)(e.value), this.state.values.marginBottom = (0, d.G)(n.value), this.state.values.marginLeft = (0, d.G)(o.value))
                            }, e.prototype.hideFieldByOptions = function () {
                                var t = this,
                                    e = this.j.o.image;
                                [
                                    ["editMargins", "editMargins"],
                                    ["editAlign", "editAlign"],
                                    ["editStyle", "editStyle"],
                                    ["editClass", "editClass"],
                                    ["editId", "editId"],
                                    ["editBorderRadius", "editBorderRadius"]
                                ].forEach((function (n) {
                                    var r = (0, o.zs)(n, 2),
                                        i = r[0],
                                        s = t.getElm(r[1]);
                                    (0, a.css)(s, "display", e[i] ? null : "none")
                                }))
                            }, (0, o.Cg)([(0, i.A)("ready"), (0, s.w)("state.values.align")], e.prototype, "onStateAlignChange", null), (0, o.Cg)([(0, s.w)("align:change")], e.prototype, "onChangeAlign", null), (0, o.Cg)([(0, i.A)("ready"), (0, s.w)("state.values.borderRadius")], e.prototype, "onStateValuesBorderRadiusChange", null), (0, o.Cg)([(0, s.w)("borderRadius:change")], e.prototype, "onChangeBorderRadius", null), (0, o.Cg)([(0, i.A)("ready"), (0, s.w)("state.values.id")], e.prototype, "onStateValuesIdChange", null), (0, o.Cg)([(0, s.w)("id:change")], e.prototype, "onChangeId", null), (0, o.Cg)([(0, i.A)("ready"), (0, s.w)("state.values.style")], e.prototype, "onStateValuesStyleChange", null), (0, o.Cg)([(0, s.w)("style:change")], e.prototype, "onChangeStyle", null), (0, o.Cg)([(0, i.A)("ready"), (0, s.w)("state.values.classes")], e.prototype, "onStateValuesClassesChange", null), (0, o.Cg)([(0, s.w)("classes:change")], e.prototype, "onChangClasses", null), (0, o.Cg)([(0, s.w)("lockMargin:click")], e.prototype, "onLockMarginClick", null), (0, o.Cg)([(0, i.A)("ready"), (0, s.w)("state.marginIsLocked")], e.prototype, "onChangeMarginIsLocked", null), (0, o.Cg)([(0, i.A)("ready"), (0, s.w)(["state.values.marginTop", "state.values.marginRight", "state.values.marginBottom", "state.values.marginLeft"])], e.prototype, "onStateValuesMarginChange", null), (0, o.Cg)([(0, s.w)(["marginTop:change", "marginRight:change", "marginBottom:change", "marginLeft:change"])], e.prototype, "onChangeMargin", null), (0, o.Cg)([(0, i.A)("ready")], e.prototype, "hideFieldByOptions", null), (0, o.Cg)([r.s], e)
                        }(l.D)
                },
                46939: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = n(71005),
                        l = n(11648),
                        f = (n(29581), "table_processor_observer"),
                        d = "onMoveTableSelectCell",
                        p = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.__selectedCell = null, e.__isSelectionMode = !1, e
                            }
                            return (0, o.C6)(e, t), Object.defineProperty(e.prototype, "__tableModule", {
                                get: function () {
                                    return this.j.getInstance(l.X, this.j.o)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.o.tableAllowCellSelection && t.e.on("keydown.select-cells", (function (t) {
                                    t.key === r.KEY_TAB && e.unselectCells()
                                })).on("beforeCommand.select-cells", this.onExecCommand).on("afterCommand.select-cells", this.onAfterCommand).on(["clickEditor", "mousedownTd", "mousedownTh", "touchstartTd", "touchstartTh"].map((function (t) {
                                    return t + ".select-cells"
                                })).join(" "), this.onStartSelection).on("clickTr clickTbody", (function () {
                                    var t, n = e.__tableModule.getAllSelectedCells().length;
                                    if (n) return n > 1 && (null === (t = e.j.s.sel) || void 0 === t || t.removeAllRanges()), !1
                                }))
                            }, e.prototype.onStartSelection = function (t) {
                                if (!this.j.o.readonly && (this.unselectCells(), t !== this.j.editor)) {
                                    var e = s.J.closest(t, "table", this.j.editor);
                                    if (t && e) return t.firstChild || t.appendChild(this.j.createInside.element("br")), this.__isSelectionMode = !0, this.__selectedCell = t, this.__tableModule.addSelection(t), this.j.e.on(e, "mousemove.select-cells touchmove.select-cells", this.j.async.throttle(this.__onMove.bind(this, e), {
                                        label: d,
                                        timeout: this.j.defaultTimeout / 2
                                    })).on(e, "mouseup.select-cells touchend.select-cells", this.__onStopSelection.bind(this, e)), !1
                                }
                            }, e.prototype.onOutsideClick = function () {
                                this.__selectedCell = null, this.__onRemoveSelection()
                            }, e.prototype.onChange = function () {
                                this.j.isLocked || this.__isSelectionMode || this.__onRemoveSelection()
                            }, e.prototype.__onMove = function (t, e) {
                                var n, o = this;
                                if ((!this.j.o.readonly || this.j.isLocked) && !this.j.isLockedNotBy(f)) {
                                    var r = this.j.ed.elementFromPoint(e.clientX, e.clientY);
                                    if (r) {
                                        var i = s.J.closest(r, ["td", "th"], t);
                                        if (i && this.__selectedCell) {
                                            i !== this.__selectedCell && this.j.lock(f), this.unselectCells();
                                            for (var a = this.__tableModule.getSelectedBound(t, [i, this.__selectedCell]), u = this.__tableModule.formalMatrix(t), c = a[0][0]; a[1][0] >= c; c += 1)
                                                for (var l = a[0][1]; a[1][1] >= l; l += 1) this.__tableModule.addSelection(u[c][l]);
                                            var d;
                                            this.__tableModule.getAllSelectedCells().length > 1 && (null === (n = this.j.s.sel) || void 0 === n || n.removeAllRanges()), this.j.e.fire("hidePopup"), e.stopPropagation(), d = o.j.createInside.fromHTML('<div style="color:rgba(0,0,0,0.01);width:0;height:0">&nbsp;</div>'), i.appendChild(d), o.j.async.setTimeout((function () {
                                                var t;
                                                null === (t = d.parentNode) || void 0 === t || t.removeChild(d)
                                            }), o.j.defaultTimeout / 5)
                                        }
                                    }
                                }
                            }, e.prototype.__onRemoveSelection = function (t) {
                                var e;
                                if (!(null === (e = null == t ? void 0 : t.buffer) || void 0 === e ? void 0 : e.actionTrigger) && !this.__selectedCell && this.__tableModule.getAllSelectedCells().length) return this.j.unlock(), this.unselectCells(), void this.j.e.fire("hidePopup", "cells");
                                this.__isSelectionMode = !1, this.__selectedCell = null
                            }, e.prototype.__onStopSelection = function (t, e) {
                                var n = this;
                                if (this.__selectedCell) {
                                    this.__isSelectionMode = !1, this.j.unlock();
                                    var o = this.j.ed.elementFromPoint(e.clientX, e.clientY);
                                    if (o) {
                                        var r = s.J.closest(o, ["td", "th"], t);
                                        if (r) {
                                            var i = s.J.closest(r, "table", t);
                                            if (!i || i === t) {
                                                var a = this.__tableModule.getSelectedBound(t, [r, this.__selectedCell]),
                                                    c = this.__tableModule.formalMatrix(t),
                                                    l = c[a[1][0]][a[1][1]],
                                                    f = c[a[0][0]][a[0][1]];
                                                this.j.e.fire("showPopup", t, (function () {
                                                    var t = (0, u.position)(f, n.j),
                                                        e = (0, u.position)(l, n.j);
                                                    return {
                                                        left: t.left,
                                                        top: t.top,
                                                        width: e.left - t.left + e.width,
                                                        height: e.top - t.top + e.height
                                                    }
                                                }), "cells"), (0, u.$$)("table", this.j.editor).forEach((function (t) {
                                                    n.j.e.off(t, "mousemove.select-cells touchmove.select-cells mouseup.select-cells touchend.select-cells")
                                                })), this.j.async.clearTimeout(d)
                                            }
                                        }
                                    }
                                }
                            }, e.prototype.unselectCells = function (t) {
                                var e = this.__tableModule,
                                    n = e.getAllSelectedCells();
                                n.length && n.forEach((function (n) {
                                    t && t === n || e.removeSelection(n)
                                }))
                            }, e.prototype.onExecCommand = function (t) {
                                var e = this;
                                if (/table(splitv|splitg|merge|empty|bin|binrow|bincolumn|addcolumn|addrow)/.test(t)) {
                                    t = t.replace("table", "");
                                    var n = this.__tableModule.getAllSelectedCells();
                                    if (n.length) {
                                        var r = (0, o.zs)(n, 1)[0];
                                        if (!r) return;
                                        var i = s.J.closest(r, "table", this.j.editor);
                                        if (!i) return;
                                        switch (t) {
                                            case "splitv":
                                                this.__tableModule.splitVertical(i);
                                                break;
                                            case "splitg":
                                                this.__tableModule.splitHorizontal(i);
                                                break;
                                            case "merge":
                                                this.__tableModule.mergeSelected(i);
                                                break;
                                            case "empty":
                                                n.forEach((function (t) {
                                                    return s.J.detach(t)
                                                }));
                                                break;
                                            case "bin":
                                                s.J.safeRemove(i);
                                                break;
                                            case "binrow":
                                                new Set(n.map((function (t) {
                                                    return t.parentNode
                                                }))).forEach((function (t) {
                                                    e.__tableModule.removeRow(i, t.rowIndex)
                                                }));
                                                break;
                                            case "bincolumn":
                                                var a = new Set;
                                                n.reduce((function (t, e) {
                                                    return a.has(e.cellIndex) || (t.push(e), a.add(e.cellIndex)), t
                                                }), []).forEach((function (t) {
                                                    e.__tableModule.removeColumn(i, t.cellIndex)
                                                }));
                                                break;
                                            case "addcolumnafter":
                                            case "addcolumnbefore":
                                                this.__tableModule.appendColumn(i, r, "addcolumnafter" === t);
                                                break;
                                            case "addrowafter":
                                            case "addrowbefore":
                                                this.__tableModule.appendRow(i, r.parentNode, "addrowafter" === t)
                                        }
                                    }
                                    return !1
                                }
                            }, e.prototype.onAfterCommand = function (t) {
                                /^justify/.test(t) && this.__tableModule.getAllSelectedCells().forEach((function (e) {
                                    return (0, u.alignElement)(t, e)
                                }))
                            }, e.prototype.beforeDestruct = function (t) {
                                this.__onRemoveSelection(), t.e.off(".select-cells")
                            }, e.requires = ["select"], (0, o.Cg)([i.autobind], e.prototype, "onStartSelection", null), (0, o.Cg)([(0, i.watch)(":outsideClick")], e.prototype, "onOutsideClick", null), (0, o.Cg)([(0, i.watch)(":change")], e.prototype, "onChange", null), (0, o.Cg)([i.autobind], e.prototype, "__onRemoveSelection", null), (0, o.Cg)([i.autobind], e.prototype, "__onStopSelection", null), (0, o.Cg)([i.autobind], e.prototype, "onExecCommand", null), (0, o.Cg)([i.autobind], e.prototype, "onAfterCommand", null), e
                        }(c.k);
                    a.fg.add("selectCells", p)
                },
                47165: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $6: function () {
                            return a.$
                        },
                        F0: function () {
                            return o.F
                        },
                        cY: function () {
                            return r.c
                        },
                        nE: function () {
                            return i.n
                        },
                        tS: function () {
                            return s.t
                        }
                    });
                    var o = n(5454),
                        r = n(3006),
                        i = n(47964),
                        s = n(69198),
                        a = n(1540)
                },
                47317: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        b: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n) {
                        return !!o.J.canSplitBlock(n) || (o.J.before(t, e.createInside.element("br")), !1)
                    }
                },
                47791: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(71842),
                        s = n(56298),
                        a = n(65147),
                        u = n(71005),
                        c = (n(64953), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.buttons = [{
                                    name: "link",
                                    group: "insert"
                                }], e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.o.link.followOnDblClick && t.e.on("dblclick.link", this.__onDblClickOnLink), t.e.on(t.editor, "click.link", this.__onClickReadOnlyLink), t.o.link.processPastedLink && t.e.on("processPaste.link", this.onProcessPasteLink), t.e.on("generateLinkForm.link", this.__generateForm), t.registerCommand("openLinkDialog", {
                                    exec: function () {
                                        var n = t.dlg({
                                                resizable: !1
                                            }),
                                            o = e.__generateForm(t.s.current(), (function () {
                                                n.close()
                                            }));
                                        o.container.classList.add("jodit-dialog_alert"), n.setContent(o), n.open(), t.async.requestIdleCallback((function () {
                                            var t = (0, a.refs)(o.container).url_input;
                                            null == t || t.focus()
                                        }))
                                    },
                                    hotkeys: t.o.link.hotkeys
                                })
                            }, e.prototype.__onDblClickOnLink = function (t) {
                                if (i.J.isTag(t.target, "a")) {
                                    var e = (0, a.attr)(t.target, "href");
                                    e && (location.href = e, t.preventDefault())
                                }
                            }, e.prototype.onProcessPasteLink = function (t, e) {
                                var n, o, r, i, s = this.jodit;
                                if ((0, a.isURL)(e) && s.o.link.processPastedLink) {
                                    if (s.e.stopPropagation("processPaste"), s.o.link.processVideoLink) {
                                        var u = (0, a.call)(null !== (o = null === (n = s.o.video) || void 0 === n ? void 0 : n.parseUrlToVideoEmbed) && void 0 !== o ? o : a.convertMediaUrlToVideoEmbed, e, {
                                            width: null === (r = s.o.video) || void 0 === r ? void 0 : r.defaultWidth,
                                            height: null === (i = s.o.video) || void 0 === i ? void 0 : i.defaultHeight
                                        });
                                        if (u !== e) return s.createInside.fromHTML(u)
                                    }
                                    if (s.s.isCollapsed()) {
                                        var c = s.createInside.element("a");
                                        return c.setAttribute("href", e), c.textContent = e, s.e.fire("applyLink", s, c, null), c
                                    }
                                    return s.s.commitStyle({
                                        element: "a",
                                        attributes: {
                                            href: e
                                        }
                                    }), !0
                                }
                            }, e.prototype.__generateForm = function (t, e) {
                                var n, o = this.jodit,
                                    r = o.i18n.bind(o),
                                    s = o.o.link,
                                    u = s.openInNewTabCheckbox,
                                    c = s.noFollowCheckbox,
                                    l = s.formClassName,
                                    f = s.modeClassName,
                                    d = (0, s.formTemplate)(o),
                                    p = (0, a.isString)(d) ? o.c.fromHTML(d, {
                                        target_checkbox_box: u,
                                        nofollow_checkbox_box: c
                                    }) : d,
                                    h = i.J.isElement(p) ? p : p.container,
                                    v = (0, a.refs)(h),
                                    g = v.insert,
                                    m = v.unlink,
                                    y = v.content_input_box,
                                    b = v.target_checkbox,
                                    _ = v.nofollow_checkbox,
                                    C = v.url_input,
                                    w = i.J.isImage(t),
                                    S = v.content_input,
                                    E = v.className_input,
                                    T = v.className_select;
                                S || (S = o.c.element("input", {
                                    type: "hidden",
                                    ref: "content_input"
                                })), l && h.classList.add(l), w && i.J.hide(y);
                                var I = function () {
                                    return n ? n.innerText : (0, a.stripTags)(o.s.range.cloneContents(), o.ed)
                                };
                                n = !(!t || !i.J.closest(t, "a", o.editor)) && i.J.closest(t, "a", o.editor), !w && t && (S.value = I()), n ? (C.value = (0, a.attr)(n, "href") || "", f && function (t, e, n, o) {
                                    switch (t) {
                                        case "input":
                                            e && (e.value = (0, a.attr)(n, "class") || "");
                                            break;
                                        case "select":
                                            if (o) {
                                                for (var r = 0; o.selectedOptions.length > r; r++) {
                                                    var i = o.options.item(r);
                                                    i && (i.selected = !1)
                                                }((0, a.attr)(n, "class") || "").split(" ").forEach((function (t) {
                                                    if (t)
                                                        for (var e = 0; o.options.length > e; e++) {
                                                            var n = o.options.item(e);
                                                            (null == n ? void 0 : n.value) && n.value === t && (n.selected = !0)
                                                        }
                                                }))
                                            }
                                    }
                                }(f, E, n, T), u && b && (b.checked = "_blank" === (0, a.attr)(n, "target")), c && _ && (_.checked = "nofollow" === (0, a.attr)(n, "rel")), g.textContent = r("Update")) : i.J.hide(m), o.editor.normalize();
                                var j = o.history.snapshot.make();
                                m && o.e.on(m, "click", (function (t) {
                                    o.s.restore(), o.history.snapshot.restore(j), n && i.J.unwrap(n), o.synchronizeValues(), e(), t.preventDefault()
                                }));
                                var k = function () {
                                    if (!C.value.trim().length) return C.focus(), C.classList.add("jodit_error"), !1;
                                    var t;
                                    o.s.restore(), o.s.removeMarkers(), o.editor.normalize(), o.history.snapshot.restore(j);
                                    var r = I() !== S.value.trim(),
                                        s = o.createInside;
                                    if (n && i.J.isOrContains(o.editor, n)) t = [n];
                                    else {
                                        if (o.s.isCollapsed()) {
                                            var l = s.element("a");
                                            o.s.insertNode(l, !1, !1), t = [l]
                                        } else {
                                            var d = o.s.current();
                                            t = i.J.isTag(d, "img") ? [i.J.wrap(d, "a", s)] : o.s.wrapInTag("a")
                                        }
                                        t.forEach((function (t) {
                                            return o.s.select(t)
                                        }))
                                    }
                                    return t.forEach((function (t) {
                                        (0, a.attr)(t, "href", C.value),
                                        function (t, e, n, o) {
                                            var r;
                                            if (t && (null != e ? e : n))
                                                if ("input" === t) "" === e.value && o.hasAttribute("class") && (0, a.attr)(o, "class", null), "" !== e.value && (0, a.attr)(o, "class", e.value);
                                                else if ("select" === t) {
                                                o.hasAttribute("class") && (0, a.attr)(o, "class", null);
                                                for (var i = 0; n.selectedOptions.length > i; i++) {
                                                    var s = null === (r = n.selectedOptions.item(i)) || void 0 === r ? void 0 : r.value;
                                                    s && o.classList.add(s)
                                                }
                                            }
                                        }(f, E, T, t), w || function (t, e, n, o) {
                                            var r = t.textContent;
                                            e.value.trim().length ? n && (r = e.value) : r = o.value, r !== t.textContent && (t.textContent = r)
                                        }(t, S, r, C), u && b && (0, a.attr)(t, "target", b.checked ? "_blank" : null), c && _ && (0, a.attr)(t, "rel", _.checked ? "nofollow" : null), o.e.fire("applyLink", o, t, p)
                                    })), o.synchronizeValues(), e(), !1
                                };
                                return i.J.isElement(p) ? o.e.on(p, "submit", (function (t) {
                                    return t.preventDefault(), t.stopImmediatePropagation(), k(), !1
                                })) : p.onSubmit(k), p
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off("generateLinkForm.link", this.__generateForm).off("dblclick.link", this.__onDblClickOnLink).off(t.editor, "click.link", this.__onClickReadOnlyLink).off("processPaste.link", this.onProcessPasteLink)
                            }, e.prototype.__onClickReadOnlyLink = function (t) {
                                var e = this.jodit;
                                e.o.readonly && e.o.link.preventReadOnlyNavigation && i.J.isTag(t.target, "a") && t.preventDefault()
                            }, (0, o.Cg)([r.autobind], e.prototype, "__onDblClickOnLink", null), (0, o.Cg)([r.autobind], e.prototype, "onProcessPasteLink", null), (0, o.Cg)([r.autobind], e.prototype, "__generateForm", null), (0, o.Cg)([r.autobind], e.prototype, "__onClickReadOnlyLink", null), e
                        }(u.k));
                    s.fg.add("link", c)
                },
                47964: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        n: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = n(92032),
                        s = n(69198),
                        a = function (t) {
                            function e(e, n) {
                                var r = t.call(this, e, (0, o.Cl)({
                                    type: "file"
                                }, n)) || this;
                                return r.state = (0, o.Cl)((0, o.Cl)({}, s.t.defaultState), {
                                    type: "file",
                                    onlyImages: !0
                                }), r
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIFileInput"
                            }, e.prototype.createContainer = function (t) {
                                this.button = new i.lD(this.j, {
                                    tooltip: t.tooltip,
                                    icon: {
                                        name: "plus"
                                    }
                                });
                                var e = this.button.container;
                                this.nativeInput || (this.nativeInput = this.createNativeInput(t));
                                var n = this.nativeInput;
                                return n.classList.add(this.getFullElName("input")), e.classList.add(this.componentName), e.appendChild(n), e
                            }, e.prototype.createNativeInput = function (t) {
                                return this.j.create.fromHTML('<input\n\t\t\ttype="file"\n\t\t\taccept="'.concat(t.onlyImages ? "image/*" : "*", '"\n\t\t\ttabindex="-1"\n\t\t\tdir="auto"\n\t\t\tmultiple=""\n\t\t/>'))
                            }, (0, o.Cg)([r.s], e)
                        }(s.t)
                },
                48053: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        q: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(25376),
                        s = n(98253),
                        a = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "ToolbarSelect"
                            }, e.prototype.update = function () {
                                var e, n, o;
                                t.prototype.update.call(this), this.state.icon.name = "";
                                var r = this.control,
                                    a = r.list,
                                    u = r.data;
                                if (a) {
                                    var c = this.state.value || (u && (0, s.K)(u.currentValue) ? u.currentValue : void 0);
                                    c || (c = Object.keys(a)[0]);
                                    var l = ((0, i.Q)(a) && a[c.toString()] || c).toString();
                                    this.state.text = null !== (o = null === (n = (e = this.control).textTemplate) || void 0 === n ? void 0 : n.call(e, this.jodit, l)) && void 0 !== o ? o : l
                                }
                            }, (0, o.Cg)([r.component], e)
                        }(n(3258).I)
                },
                48647: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        u: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(64567),
                        i = n(69052),
                        s = n(50156);

                    function a(t) {
                        return function (e, n) {
                            if (!(0, i.T)(e[n])) throw (0, s.z3)("Handler must be a Function");
                            e.hookStatus(r.f.ready, (function (e) {
                                var r = e.async,
                                    i = e[n],
                                    s = 0;
                                Object.defineProperty(e, n, {
                                    configurable: !0,
                                    value: function n() {
                                        for (var a = [], u = 0; arguments.length > u; u++) a[u] = arguments[u];
                                        r.clearTimeout(s), t(e) ? i.apply(e, a) : s = r.setTimeout((function () {
                                            return n.apply(void 0, (0, o.fX)([], (0, o.zs)(a), !1))
                                        }), 10)
                                    }
                                })
                            }))
                        }
                    }
                },
                48791: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        m: function () {
                            return o
                        }
                    });
                    var o = function (t, e) {
                        !1 !== (Object.getOwnPropertyDescriptor(t, e) || {}).enumerable && Object.defineProperty(t, e, {
                            enumerable: !1,
                            set: function (t) {
                                Object.defineProperty(this, e, {
                                    enumerable: !1,
                                    writable: !0,
                                    value: t
                                })
                            }
                        })
                    }
                },
                48840: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        O: function () {
                            return o.O
                        }
                    });
                    var o = n(86572)
                },
                48842: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z"/> </svg>'
                },
                49289: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(56298),
                        i = n(65147),
                        s = n(931),
                        a = n(36115),
                        u = (n(73124), n(52450)),
                        c = n.n(u),
                        l = n(41111),
                        f = n.n(l),
                        d = n(49972),
                        p = n.n(d),
                        h = n(45062),
                        v = n.n(h),
                        g = n(18605),
                        m = n.n(g),
                        y = n(83389),
                        b = n.n(y);
                    r.fg.add("bold", (function (t) {
                        var e = function (e) {
                            var n, r = a.T.defaultOptions.controls[e],
                                s = (0, o.Cl)({}, r.css);
                            return Object.keys(s).forEach((function (t) {
                                n || (n = {}), n[t] = (0, i.isArray)(s[t]) ? s[t][0] : s[t]
                            })), t.s.commitStyle({
                                element: r.tags ? r.tags[0] : void 0
                            }), t.synchronizeValues(), !1
                        };
                        ["bold", "italic", "underline", "strikethrough"].forEach((function (e) {
                            t.registerButton({
                                name: e,
                                group: "font-style"
                            })
                        })), ["superscript", "subscript"].forEach((function (e) {
                            t.registerButton({
                                name: e,
                                group: "script"
                            })
                        })), t.registerCommand("bold", {
                            exec: e,
                            hotkeys: ["ctrl+b", "cmd+b"]
                        }).registerCommand("italic", {
                            exec: e,
                            hotkeys: ["ctrl+i", "cmd+i"]
                        }).registerCommand("underline", {
                            exec: e,
                            hotkeys: ["ctrl+u", "cmd+u"]
                        }).registerCommand("strikethrough", {
                            exec: e
                        }).registerCommand("subscript", {
                            exec: e
                        }).registerCommand("superscript", {
                            exec: e
                        })
                    })), s.I.set("bold", c()).set("italic", f()).set("strikethrough", p()).set("subscript", v()).set("superscript", m()).set("underline", b())
                },
                49405: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        P: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(71842),
                        s = n(65147),
                        a = function (t) {
                            function e(e, n, o) {
                                void 0 === o && (o = null);
                                var r = t.call(this, e) || this;
                                return r.control = n, r.target = o, r.container.classList.add("".concat(r.componentName, "_").concat(r.clearName(n.name))), (0, s.attr)(r.container, "role", "content"), r
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "ToolbarContent"
                            }, e.prototype.update = function () {
                                var e = this.control.getContent(this.j, this);
                                ((0, s.isString)(e) || e.parentNode !== this.container) && (i.J.detach(this.container), this.container.appendChild((0, s.isString)(e) ? this.j.create.fromHTML(e) : e)), t.prototype.update.call(this)
                            }, e.prototype.createContainer = function () {
                                return this.j.c.span(this.componentName)
                            }, (0, o.Cg)([r.component], e)
                        }(n(35265).lD)
                },
                49429: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Hp: function () {
                            return i
                        },
                        mA: function () {
                            return r
                        },
                        y6: function () {
                            return s
                        }
                    });
                    var o = n(28616);

                    function r(t) {
                        return t && t.isAtom
                    }

                    function i(t) {
                        return Object.defineProperty(t, "isAtom", {
                            enumerable: !1,
                            value: !0,
                            configurable: !1
                        }), t
                    }

                    function s(t) {
                        return JSON.parse((0, o.A)(t))
                    }
                },
                49744: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        x: function () {
                            return o
                        }
                    });
                    var o = function (t, e) {
                        var n = e.getComputedStyle(t);
                        return t.clientWidth - (parseFloat(n.paddingLeft || "0") + parseFloat(n.paddingRight || "0"))
                    }
                },
                49777: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(71842),
                        i = n(56298),
                        s = n(65147),
                        a = n(931),
                        u = n(36115),
                        c = n(16116),
                        l = n(64831);
                    a.I.set("image", n.n(l)()), u.T.prototype.controls.image = {
                        popup: function (t, e, n) {
                            var i = null;
                            return e && !r.J.isText(e) && r.J.isHTMLElement(e) && (r.J.isTag(e, "img") || (0, s.$$)("img", e).length) && (i = r.J.isTag(e, "img") ? e : (0, s.$$)("img", e)[0]), t.s.save(), (0, c.kG)(t, {
                                filebrowser: function (e) {
                                    t.s.restore(), e.files && e.files.forEach((function (n) {
                                        return t.s.insertImage(e.baseurl + n, null, t.o.imageDefaultWidth)
                                    })), n()
                                },
                                upload: !0,
                                url: function (e, r) {
                                    return (0, o.sH)(void 0, void 0, void 0, (function () {
                                        var s;
                                        return (0, o.YH)(this, (function (o) {
                                            switch (o.label) {
                                                case 0:
                                                    return t.s.restore(), /^[a-z\d_-]+(\.[a-z\d_-]+)+/i.test(e) && (e = "//" + e), (s = i || t.createInside.element("img")).setAttribute("src", e), s.setAttribute("alt", r), i ? [3, 2] : [4, t.s.insertImage(s, null, t.o.imageDefaultWidth)];
                                                case 1:
                                                    o.sent(), o.label = 2;
                                                case 2:
                                                    return n(), [2]
                                            }
                                        }))
                                    }))
                                }
                            }, i, n)
                        },
                        tags: ["img"],
                        tooltip: "Insert Image"
                    }, i.fg.add("image", (function (t) {
                        t.registerButton({
                            name: "image",
                            group: "media"
                        })
                    }))
                },
                49853: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        d: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(64890),
                        i = n(17352),
                        s = n(52201),
                        a = n(65147),
                        u = n(50156),
                        c = n(36115),
                        l = (n(27337), n(91672)),
                        f = function () {
                            function t(t, e) {
                                void 0 === e && (e = c.T.prototype.defaultAjaxOptions), this.__async = new r.j, this.__isFulfilled = !1, this.__activated = !1, this.__isDestructed = !1, this.options = (0, a.ConfigProto)(t || {}, e), this.xhr = this.o.xhr ? this.o.xhr() : new XMLHttpRequest
                            }
                            return t.prototype.className = function () {
                                return "Ajax"
                            }, t.prototype.__buildParams = function (t, e) {
                                return (0, a.isPlainObject)(t) && this.options.contentType && this.options.contentType.includes("application/json") ? JSON.stringify(t) : (0, a.isFunction)(this.o.queryBuild) ? this.o.queryBuild.call(this, t, e) : (0, a.isString)(t) || t instanceof i.globalWindow.FormData || "object" == typeof t && null != t && (0, a.isFunction)(t.append) ? t : (0, a.buildQuery)(t)
                            }, Object.defineProperty(t.prototype, "o", {
                                get: function () {
                                    return this.options
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.abort = function () {
                                if (this.__isFulfilled) return this;
                                try {
                                    this.__isFulfilled = !0, this.xhr.abort()
                                } catch (t) {}
                                return this
                            }, t.prototype.send = function () {
                                var t = this;
                                this.__activated = !0;
                                var e = this.xhr,
                                    n = this.o,
                                    r = this.prepareRequest();
                                return this.__async.promise((function (i, s) {
                                    return (0, o.sH)(t, void 0, void 0, (function () {
                                        var t, c, f, d, p, h = this;
                                        return (0, o.YH)(this, (function (o) {
                                            switch (o.label) {
                                                case 0:
                                                    return t = function () {
                                                        h.__isFulfilled = !0, s(u.FI("Connection error"))
                                                    }, e.onload = c = function () {
                                                        h.__isFulfilled = !0, i(new l.Y(r, e.status, e.statusText, e.responseType ? e.response : e.responseText))
                                                    }, e.onabort = function () {
                                                        h.__isFulfilled = !0, s(u.h2("Abort connection"))
                                                    }, e.onerror = t, e.ontimeout = t, n.responseType && (e.responseType = n.responseType), e.onprogress = function (t) {
                                                        var e, n, o = 0;
                                                        t.lengthComputable && (o = t.loaded / t.total * 100), null === (n = (e = h.options).onProgress) || void 0 === n || n.call(e, o)
                                                    }, e.onreadystatechange = function () {
                                                        var t, o;
                                                        null === (o = (t = h.options).onProgress) || void 0 === o || o.call(t, 10), e.readyState === XMLHttpRequest.DONE && (n.successStatuses.includes(e.status) ? c() : e.statusText && (h.__isFulfilled = !0, s(u.FI(e.statusText))))
                                                    }, e.withCredentials = null !== (p = n.withCredentials) && void 0 !== p && p, f = r.data, e.open(r.method, r.url, !0), n.contentType && e.setRequestHeader && e.setRequestHeader("Content-type", n.contentType), (0, a.isFunction)(d = n.headers) ? [4, d.call(this)] : [3, 2];
                                                case 1:
                                                    d = o.sent(), o.label = 2;
                                                case 2:
                                                    return d && e.setRequestHeader && Object.keys(d).forEach((function (t) {
                                                        e.setRequestHeader(t, d[t])
                                                    })), this.__async.setTimeout((function () {
                                                        e.send(f ? h.__buildParams(f) : void 0)
                                                    }), 0), [2]
                                            }
                                        }))
                                    }))
                                }))
                            }, t.prototype.prepareRequest = function () {
                                if (!this.o.url) throw u.z3("Need URL for AJAX request");
                                var e = this.o.url,
                                    n = this.o.data,
                                    r = (this.o.method || "get").toLowerCase();
                                if ("get" === r && n && (0, a.isPlainObject)(n)) {
                                    var i = e.indexOf("?");
                                    if (-1 !== i) {
                                        var s = (0, a.parseQuery)(e);
                                        e = e.substring(0, i) + "?" + (0, a.buildQuery)((0, o.Cl)((0, o.Cl)({}, s), n))
                                    } else e += "?" + (0, a.buildQuery)(this.o.data)
                                }
                                var c = {
                                    url: e,
                                    method: r,
                                    data: n
                                };
                                return t.log.splice(100), t.log.push(c), c
                            }, t.prototype.destruct = function () {
                                this.__isDestructed || (this.__isDestructed = !0, this.__activated && !this.__isFulfilled && (this.abort(), this.__isFulfilled = !0), this.__async.destruct())
                            }, t.log = [], (0, o.Cg)([s.Ay], t.prototype, "destruct", null), t
                        }()
                },
                49931: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(71842),
                        i = n(97369),
                        s = n(931),
                        a = n(77112),
                        u = n(83797),
                        c = n(97324),
                        l = n(31859),
                        f = n(62994),
                        d = n(53804),
                        p = "jodit-file-browser-preview",
                        h = function (t, e) {
                            return void 0 === t && (t = "next"), void 0 === e && (e = "right"), '<div class="'.concat(p, "__navigation ").concat(p, "__navigation_arrow_").concat(t, '">') + "" + s.I.get("angle-" + e) + "</a>"
                        };
                    e.A = function (t) {
                        if (!t.o.contextMenu) return function () {};
                        var e = (0, u.V)(t);
                        return function (n) {
                            var s = (0, f.Gq)(n.target, t.container);
                            if (s) {
                                var u = s,
                                    v = t.options,
                                    g = function (t) {
                                        return (0, i.attr)(u, t) || ""
                                    };
                                return t.async.setTimeout((function () {
                                    var m = (0, f.PZ)(s, (0, a.a)(t));
                                    m && (t.state.activeElements = [m], e.show(n.clientX, n.clientY, [!("1" === g("data-is-file") || !v.editImage || !t.dataProvider.canI("ImageResize") && !t.dataProvider.canI("ImageCrop")) && {
                                        icon: "pencil",
                                        title: "Edit",
                                        exec: function () {
                                            return d.B.call(t, g("href"), g("data-name"), g("data-path"), g("data-source"))
                                        }
                                    }, !!t.dataProvider.canI("FileRename") && {
                                        icon: "italic",
                                        title: "Rename",
                                        exec: function () {
                                            t.e.fire("fileRename.filebrowser", g("data-name"), g("data-path"), g("data-source"))
                                        }
                                    }, !!t.dataProvider.canI("FileRemove") && {
                                        icon: "bin",
                                        title: "Delete",
                                        exec: function () {
                                            return (0, o.sH)(void 0, void 0, Promise, (function () {
                                                var e;
                                                return (0, o.YH)(this, (function (n) {
                                                    switch (n.label) {
                                                        case 0:
                                                            return n.trys.push([0, 2, , 3]), [4, (0, c.W)(t, g("data-name"), g("data-source"))];
                                                        case 1:
                                                            return n.sent(), [3, 3];
                                                        case 2:
                                                            return e = n.sent(), [2, t.status(e)];
                                                        case 3:
                                                            return t.state.activeElements = [], [2, (0, l.r)(t).catch(t.status)]
                                                    }
                                                }))
                                            }))
                                        }
                                    }, !!v.preview && {
                                        icon: "eye",
                                        title: "Preview",
                                        exec: function () {
                                            var e = t.dlg({
                                                    buttons: ["fullsize", "dialog.close"]
                                                }),
                                                n = t.c.div(p, '<div class="jodit-icon_loader"></div>'),
                                                o = t.c.div(p + "__box"),
                                                s = t.c.fromHTML(h()),
                                                a = t.c.fromHTML(h("prev", "left")),
                                                c = function (i) {
                                                    var c = t.c.element("img");
                                                    c.setAttribute("src", i);
                                                    var l = function () {
                                                        var i;
                                                        t.isInDestruct || (t.e.off(c, "load"), r.J.detach(n), v.showPreviewNavigation && (r.J.prevWithClass(u, t.files.getFullElName("item")) && n.appendChild(a), r.J.nextWithClass(u, t.files.getFullElName("item")) && n.appendChild(s)), n.appendChild(o), o.appendChild(c), e.setPosition(), null === (i = null == t ? void 0 : t.events) || void 0 === i || i.fire("previewOpenedAndLoaded"))
                                                    };
                                                    t.e.on(c, "load", l), c.complete && l()
                                                };
                                            t.e.on([s, a], "click", (function () {
                                                if (!(u = this === s ? r.J.nextWithClass(u, t.files.getFullElName("item")) : r.J.prevWithClass(u, t.files.getFullElName("item")))) throw (0, i.error)("Need element");
                                                r.J.detach(n), r.J.detach(o), n.innerHTML = '<div class="jodit-icon_loader"></div>', c(g("href"))
                                            })), t.e.on("beforeDestruct", (function () {
                                                e.destruct()
                                            })), e.container.classList.add(p + "__dialog"), e.setContent(n), e.setPosition(), e.open(), c(g("href")), t.events.on("beforeDestruct", (function () {
                                                e.destruct()
                                            })).fire("previewOpened")
                                        }
                                    }, {
                                        icon: "upload",
                                        title: "Download",
                                        exec: function () {
                                            var e = g("href");
                                            e && t.ow.open(e)
                                        }
                                    }]))
                                }), t.defaultTimeout), t.e.on("beforeClose", (function () {
                                    e.close()
                                })).on("beforeDestruct", (function () {
                                    return e.destruct()
                                })), n.stopPropagation(), n.preventDefault(), !1
                            }
                        }
                    }
                },
                49972: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1760 896q14 0 23 9t9 23v64q0 14-9 23t-23 9h-1728q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h1728zm-1277-64q-28-35-51-80-48-97-48-188 0-181 134-309 133-127 393-127 50 0 167 19 66 12 177 48 10 38 21 118 14 123 14 183 0 18-5 45l-12 3-84-6-14-2q-50-149-103-205-88-91-210-91-114 0-182 59-67 58-67 146 0 73 66 140t279 129q69 20 173 66 58 28 95 52h-743zm507 256h411q7 39 7 92 0 111-41 212-23 55-71 104-37 35-109 81-80 48-153 66-80 21-203 21-114 0-195-23l-140-40q-57-16-72-28-8-8-8-22v-13q0-108-2-156-1-30 0-68l2-37v-44l102-2q15 34 30 71t22.5 56 12.5 27q35 57 80 94 43 36 105 57 59 22 132 22 64 0 139-27 77-26 122-86 47-61 47-129 0-84-81-157-34-29-137-71z"/> </svg>'
                },
                49983: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1728 608v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"/> </svg>'
                },
                49989: function (t) {
                    t.exports = '<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"> <path d="M24.89 32h4.18L18.86 6h-3.71L4.93 32h4.18l2.25-6h11.29l2.24 6zM12.86 22L17 10.95 21.14 22h-8.28zm30.31 1.17L27 39.34 19.66 32l-2.83 2.83L27 45l19-19-2.83-2.83z"/> </svg>'
                },
                50025: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Xr: function () {
                            return s.X
                        },
                        bk: function () {
                            return o.b
                        },
                        d$: function () {
                            return s.d
                        },
                        h5: function () {
                            return r.h
                        },
                        sH: function () {
                            return i.s
                        }
                    });
                    var o = n(50658),
                        r = n(43431),
                        i = n(32332),
                        s = n(10004)
                },
                50156: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        FI: function () {
                            return o.FI
                        },
                        Rc: function () {
                            return r.Rc
                        },
                        ZW: function () {
                            return r.ZW
                        },
                        fF: function () {
                            return o.fF
                        },
                        h2: function () {
                            return r.h2
                        },
                        rV: function () {
                            return r.rV
                        },
                        z3: function () {
                            return o.z3
                        }
                    });
                    var o = n(76166),
                        r = n(20222)
                },
                50248: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.showPlaceholder = !0, o.T.prototype.placeholder = "Type something", o.T.prototype.useInputsPlaceholder = !0
                },
                50658: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        b: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(42589),
                        s = n(37923),
                        a = n(69052),
                        u = n(98253),
                        c = n(50156),
                        l = n(10004),
                        f = function () {
                            function t(t) {
                                var e = this;
                                this.__domEventsMap = new Map, this.__mutedEvents = new Set, this.__key = "__JoditEventEmitterNamespaces", this.__doc = r.globalDocument, this.__prepareEvent = function (t) {
                                    t.cancelBubble || (t.composed && (0, a.T)(t.composedPath) && t.composedPath()[0] && Object.defineProperty(t, "target", {
                                        value: t.composedPath()[0],
                                        configurable: !0,
                                        enumerable: !0
                                    }), t.type.match(/^touch/) && t.changedTouches && t.changedTouches.length && ["clientX", "clientY", "pageX", "pageY"].forEach((function (e) {
                                        Object.defineProperty(t, e, {
                                            value: t.changedTouches[0][e],
                                            configurable: !0,
                                            enumerable: !0
                                        })
                                    })), t.originalEvent || (t.originalEvent = t), "paste" === t.type && void 0 === t.clipboardData && e.__doc.defaultView.clipboardData && Object.defineProperty(t, "clipboardData", {
                                        get: function () {
                                            return e.__doc.defaultView.clipboardData
                                        },
                                        configurable: !0,
                                        enumerable: !0
                                    }))
                                }, this.currents = [], this.__stopped = [], this.__isDestructed = !1, t && (this.__doc = t), this.__key += (new Date).getTime()
                            }
                            return t.prototype.mute = function (t) {
                                return this.__mutedEvents.add(null != t ? t : "*"), this
                            }, t.prototype.isMuted = function (t) {
                                return !(!t || !this.__mutedEvents.has(t)) || this.__mutedEvents.has("*")
                            }, t.prototype.unmute = function (t) {
                                return this.__mutedEvents.delete(null != t ? t : "*"), this
                            }, t.prototype.__eachEvent = function (t, e) {
                                var n = this;
                                (0, i.u)(t).map((function (t) {
                                    return t.trim()
                                })).forEach((function (t) {
                                    var o = t.split(".");
                                    e.call(n, o[0], o[1] || l.X)
                                }))
                            }, t.prototype.__getStore = function (t) {
                                if (!t) throw (0, c.z3)("Need subject");
                                if (void 0 === t[this.__key]) {
                                    var e = new l.d;
                                    Object.defineProperty(t, this.__key, {
                                        enumerable: !1,
                                        configurable: !0,
                                        writable: !0,
                                        value: e
                                    })
                                }
                                return t[this.__key]
                            }, t.prototype.__removeStoreFromSubject = function (t) {
                                void 0 !== t[this.__key] && Object.defineProperty(t, this.__key, {
                                    enumerable: !1,
                                    configurable: !0,
                                    writable: !0,
                                    value: void 0
                                })
                            }, t.prototype.__triggerNativeEvent = function (t, e) {
                                var n = this.__doc.createEvent("HTMLEvents");
                                (0, u.K)(e) ? n.initEvent(e, !0, !0): (n.initEvent(e.type, e.bubbles, e.cancelable), ["screenX", "screenY", "clientX", "clientY", "target", "srcElement", "currentTarget", "timeStamp", "which", "keyCode"].forEach((function (t) {
                                    Object.defineProperty(n, t, {
                                        value: e[t],
                                        enumerable: !0
                                    })
                                })), Object.defineProperty(n, "originalEvent", {
                                    value: e,
                                    enumerable: !0
                                })), t.dispatchEvent(n)
                            }, Object.defineProperty(t.prototype, "current", {
                                get: function () {
                                    return this.currents[this.currents.length - 1]
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.on = function (t, e, n, i) {
                                var l, f, p, h, v = this;
                                if ((0, u.K)(t) || (0, u.B)(t) ? (l = this, f = t, p = e, h = n) : (l = t, f = e, p = n, h = i), !(0, u.K)(f) && !(0, u.B)(f) || 0 === f.length) throw (0, c.z3)("Need events names");
                                if (!(0, a.T)(p)) throw (0, c.z3)("Need event handler");
                                if ((0, s.c)(l)) return l.forEach((function (t) {
                                    v.on(t, f, p, h)
                                })), this;
                                var g = l,
                                    m = this.__getStore(g),
                                    y = this,
                                    b = function (t) {
                                        for (var e = [], n = 1; arguments.length > n; n++) e[n - 1] = arguments[n];
                                        if (!y.isMuted(t)) return p && p.call.apply(p, (0, o.fX)([this], (0, o.zs)(e), !1))
                                    };
                                return d(g) && (b = function (t) {
                                    if (!y.isMuted(t.type)) return y.__prepareEvent(t), p && !1 === p.call(this, t) ? (t.preventDefault(), t.stopImmediatePropagation(), !1) : void 0
                                }), this.__eachEvent(f, (function (t, e) {
                                    var n, o;
                                    if (0 === t.length) throw (0, c.z3)("Need event name");
                                    if (!1 === m.indexOf(t, e, p) && (m.set(t, e, {
                                            event: t,
                                            originalCallback: p,
                                            syntheticCallback: b
                                        }, null == h ? void 0 : h.top), d(g))) {
                                        var i = r.PASSIVE_EVENTS.has(t) ? {
                                            passive: !0,
                                            capture: null !== (n = null == h ? void 0 : h.capture) && void 0 !== n && n
                                        } : null !== (o = null == h ? void 0 : h.capture) && void 0 !== o && o;
                                        b.options = i, g.addEventListener(t, b, i), v.__memoryDOMSubjectToHandler(g, b)
                                    }
                                })), this
                            }, t.prototype.__memoryDOMSubjectToHandler = function (t, e) {
                                var n = this.__domEventsMap.get(t) || new Set;
                                n.add(e), this.__domEventsMap.set(t, n)
                            }, t.prototype.__unmemoryDOMSubjectToHandler = function (t, e) {
                                var n = this.__domEventsMap,
                                    o = n.get(t) || new Set;
                                o.delete(e), o.size ? n.set(t, o) : n.delete(t)
                            }, t.prototype.one = function (t, e, n, r) {
                                var i, s, a, c, l = this;
                                (0, u.K)(t) || (0, u.B)(t) ? (i = this, s = t, a = e, c = n) : (i = t, s = e, a = n, c = r);
                                var f = function () {
                                    for (var t = [], e = 0; arguments.length > e; e++) t[e] = arguments[e];
                                    return l.off(i, s, f), a.apply(void 0, (0, o.fX)([], (0, o.zs)(t), !1))
                                };
                                return this.on(i, s, f, c), this
                            }, t.prototype.off = function (t, e, n) {
                                var o, r, i, c = this;
                                if ((0, u.K)(t) || (0, u.B)(t) ? (o = this, r = t, i = e) : (o = t, r = e, i = n), (0, s.c)(o)) return o.forEach((function (t) {
                                    c.off(t, r, i)
                                })), this;
                                var f = o,
                                    p = this.__getStore(f);
                                if (!(0, u.K)(r) && !(0, u.B)(r) || 0 === r.length) return p.namespaces().forEach((function (t) {
                                    c.off(f, "." + t)
                                })), this.__removeStoreFromSubject(f), this;
                                var h = function (t) {
                                        var e;
                                        d(f) && (f.removeEventListener(t.event, t.syntheticCallback, null !== (e = t.syntheticCallback.options) && void 0 !== e && e), c.__unmemoryDOMSubjectToHandler(f, t.syntheticCallback))
                                    },
                                    v = function (t, e) {
                                        if ("" !== t) {
                                            var n = p.get(t, e);
                                            if (n && n.length)
                                                if ((0, a.T)(i)) {
                                                    var o = p.indexOf(t, e, i);
                                                    !1 !== o && (h(n[o]), n.splice(o, 1), n.length || p.clearEvents(e, t))
                                                } else n.forEach(h), n.length = 0, p.clearEvents(e, t)
                                        } else p.events(e).forEach((function (t) {
                                            "" !== t && v(t, e)
                                        }))
                                    };
                                return this.__eachEvent(r, (function (t, e) {
                                    e === l.X ? p.namespaces().forEach((function (e) {
                                        v(t, e)
                                    })) : v(t, e)
                                })), p.isEmpty() && this.__removeStoreFromSubject(f), this
                            }, t.prototype.stopPropagation = function (t, e) {
                                var n = this,
                                    o = (0, u.K)(t) ? this : t,
                                    r = (0, u.K)(t) ? t : e;
                                if ("string" != typeof r) throw (0, c.z3)("Need event names");
                                var i = this.__getStore(o);
                                this.__eachEvent(r, (function (t, e) {
                                    var r = i.get(t, e);
                                    r && n.__stopped.push(r), e === l.X && i.namespaces(!0).forEach((function (e) {
                                        return n.stopPropagation(o, t + "." + e)
                                    }))
                                }))
                            }, t.prototype.__removeStop = function (t) {
                                if (t) {
                                    var e = this.__stopped.indexOf(t); - 1 !== e && this.__stopped.splice(0, e + 1)
                                }
                            }, t.prototype.__isStopped = function (t) {
                                return void 0 !== t && -1 !== this.__stopped.indexOf(t)
                            }, t.prototype.fire = function (t, e) {
                                for (var n, r, i = this, s = [], a = 2; arguments.length > a; a++) s[a - 2] = arguments[a];
                                var f = (0, u.K)(t) ? this : t,
                                    p = (0, u.K)(t) ? t : e,
                                    h = (0, u.K)(t) ? (0, o.fX)([e], (0, o.zs)(s), !1) : s;
                                if (!d(f) && !(0, u.K)(p)) throw (0, c.z3)("Need events names");
                                var v = this.__getStore(f);
                                return !(0, u.K)(p) && d(f) ? this.__triggerNativeEvent(f, e) : this.__eachEvent(p, (function (t, e) {
                                    if (d(f)) i.__triggerNativeEvent(f, t);
                                    else {
                                        var s = v.get(t, e);
                                        if (s) try {
                                            (0, o.fX)([], (0, o.zs)(s), !1).every((function (e) {
                                                var a;
                                                return !i.__isStopped(s) && (i.currents.push(t), r = (a = e.syntheticCallback).call.apply(a, (0, o.fX)([f, t], (0, o.zs)(h), !1)), i.currents.pop(), void 0 !== r && (n = r), !0)
                                            }))
                                        } finally {
                                            i.__removeStop(s)
                                        }
                                        e !== l.X || d(f) || v.namespaces().filter((function (t) {
                                            return t !== e
                                        })).forEach((function (e) {
                                            var r = i.fire.apply(i, (0, o.fX)([f, t + "." + e], (0, o.zs)(h), !1));
                                            void 0 !== r && (n = r)
                                        }))
                                    }
                                })), n
                            }, t.prototype.destruct = function () {
                                var t = this;
                                this.__isDestructed || (this.__isDestructed = !0, this.__domEventsMap.forEach((function (e, n) {
                                    t.off(n)
                                })), this.__domEventsMap.clear(), this.__mutedEvents.clear(), this.currents.length = 0, this.__stopped.length = 0, this.off(this), this.__getStore(this).clear(), this.__removeStoreFromSubject(this))
                            }, t
                        }();

                    function d(t) {
                        return (0, a.T)(t.addEventListener)
                    }
                },
                50974: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.tab = {
                        tabInsideLiInsertNewList: !0
                    }
                },
                51271: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        required: function () {
                            return i
                        },
                        url: function () {
                            return s
                        }
                    });
                    var o = n(6939),
                        r = n(59101),
                        i = function (t) {
                            return !!(0, r.Bq)(t.value).length || (t.error = "Please fill out this field", !1)
                        },
                        s = function (t) {
                            return !!(0, o.m)((0, r.Bq)(t.value)) || (t.error = "Please enter a web address", !1)
                        }
                },
                51329: function (t, e, n) {
                    "use strict";
                    var o = n(931),
                        r = n(36115),
                        i = n(51457),
                        s = n.n(i),
                        a = n(23602),
                        u = n.n(a),
                        c = n(86899),
                        l = n.n(c),
                        f = n(95320),
                        d = n.n(f);
                    r.T.prototype.controls.cut = {
                        command: "cut",
                        isDisabled: function (t) {
                            return t.s.isCollapsed()
                        },
                        tooltip: "Cut selection"
                    }, r.T.prototype.controls.copy = {
                        command: "copy",
                        isDisabled: function (t) {
                            return t.s.isCollapsed()
                        },
                        tooltip: "Copy selection"
                    }, r.T.prototype.controls.selectall = {
                        icon: "select-all",
                        command: "selectall",
                        tooltip: "Select all"
                    }, o.I.set("copy", s()).set("cut", u()).set("paste", l()).set("select-all", d())
                },
                51457: function (t) {
                    t.exports = '<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"> <path d="M24.89,6.61H22.31V4.47A2.47,2.47,0,0,0,19.84,2H6.78A2.47,2.47,0,0,0,4.31,4.47V22.92a2.47,2.47,0,0,0,2.47,2.47H9.69V27.2a2.8,2.8,0,0,0,2.8,2.8h12.4a2.8,2.8,0,0,0,2.8-2.8V9.41A2.8,2.8,0,0,0,24.89,6.61ZM6.78,23.52a.61.61,0,0,1-.61-.6V4.47a.61.61,0,0,1,.61-.6H19.84a.61.61,0,0,1,.61.6V6.61h-8a2.8,2.8,0,0,0-2.8,2.8V23.52Zm19,3.68a.94.94,0,0,1-.94.93H12.49a.94.94,0,0,1-.94-.93V9.41a.94.94,0,0,1,.94-.93h12.4a.94.94,0,0,1,.94.93Z"/> <path d="M23.49,13.53h-9.6a.94.94,0,1,0,0,1.87h9.6a.94.94,0,1,0,0-1.87Z"/> <path d="M23.49,17.37h-9.6a.94.94,0,1,0,0,1.87h9.6a.94.94,0,1,0,0-1.87Z"/> <path d="M23.49,21.22h-9.6a.93.93,0,1,0,0,1.86h9.6a.93.93,0,1,0,0-1.86Z"/> </svg>'
                },
                51923: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        for (var e = atob(t.split(",")[1]), n = t.split(",")[0].split(":")[1].split(";")[0], o = new ArrayBuffer(e.length), r = new Uint8Array(o), i = 0; e.length > i; i += 1) r[i] = e.charCodeAt(i);
                        return new Blob([r], {
                            type: n
                        })
                    }
                    n.d(e, {
                        z: function () {
                            return o
                        }
                    })
                },
                52052: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        A: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(38046),
                        i = n(95274);

                    function s(t, e, n) {
                        var a = e.parentNode;
                        return a === n || !o.J.isHTMLElement(a) || o.J.next(e, r._, a) || o.J.prev(e, r._, a) ? null : t.isElementCommit && t.elementIsBlock && !o.J.isBlock(a) ? s(t, a, n) : !(0, i.sz)(t, a, !1) || o.J.isBlock(a) && !t.elementIsBlock ? t.isElementCommit && !o.J.isBlock(a) ? s(t, a, n) : null : a
                    }
                },
                52201: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return t && "undefined" != typeof Symbol && t.constructor === Symbol ? "symbol" : typeof t
                    }

                    function r(t) {
                        return r = "function" == typeof Symbol && "symbol" === o(Symbol.iterator) ? function (t) {
                            return void 0 === t ? "undefined" : o(t)
                        } : function (t) {
                            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : void 0 === t ? "undefined" : o(t)
                        }, r(t)
                    }

                    function i(t, e, n) {
                        var o = n.value;
                        if ("function" != typeof o) throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(r(o)));
                        var i = !1;
                        return {
                            configurable: !0,
                            get: function () {
                                if (i || this === t.prototype || this.hasOwnProperty(e) || "function" != typeof o) return o;
                                var n = o.bind(this);
                                return i = !0, Object.defineProperty(this, e, {
                                    configurable: !0,
                                    get: function () {
                                        return n
                                    },
                                    set: function (t) {
                                        o = t, delete this[e]
                                    }
                                }), i = !1, n
                            },
                            set: function (t) {
                                o = t
                            }
                        }
                    }

                    function s(t) {
                        var e;
                        return "undefined" != typeof Reflect && "function" == typeof Reflect.ownKeys ? e = Reflect.ownKeys(t.prototype) : (e = Object.getOwnPropertyNames(t.prototype), "function" == typeof Object.getOwnPropertySymbols && (e = e.concat(Object.getOwnPropertySymbols(t.prototype)))), e.forEach((function (e) {
                            if ("constructor" !== e) {
                                var n = Object.getOwnPropertyDescriptor(t.prototype, e);
                                "function" == typeof n.value && Object.defineProperty(t.prototype, e, i(t, e, n))
                            }
                        })), t
                    }

                    function a() {
                        return 1 === arguments.length ? s.apply(void 0, arguments) : i.apply(void 0, arguments)
                    }
                    n.d(e, {
                        Ay: function () {
                            return a
                        }
                    })
                },
                52306: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        e: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = (n(17352), n(3593)),
                        i = Object.keys(r);

                    function s(t, e, n, s, a) {
                        var u, c, l = !1,
                            f = t.o.cleanHTML.disableCleanFilter;
                        try {
                            for (var d = (0, o.Ju)(i), p = d.next(); !p.done; p = d.next()) {
                                var h = p.value;
                                if (!(f && f.has(h) || (l = (0, r[h])(t, e, l, n, s, a), e.isConnected))) return !0
                            }
                        } catch (t) {
                            u = {
                                error: t
                            }
                        } finally {
                            try {
                                p && !p.done && (c = d.return) && c.call(d)
                            } finally {
                                if (u) throw u.error
                            }
                        }
                        return l
                    }
                },
                52450: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M747 1521q74 32 140 32 376 0 376-335 0-114-41-180-27-44-61.5-74t-67.5-46.5-80.5-25-84-10.5-94.5-2q-73 0-101 10 0 53-.5 159t-.5 158q0 8-1 67.5t-.5 96.5 4.5 83.5 12 66.5zm-14-746q42 7 109 7 82 0 143-13t110-44.5 74.5-89.5 25.5-142q0-70-29-122.5t-79-82-108-43.5-124-14q-50 0-130 13 0 50 4 151t4 152q0 27-.5 80t-.5 79q0 46 1 69zm-541 889l2-94q15-4 85-16t106-27q7-12 12.5-27t8.5-33.5 5.5-32.5 3-37.5.5-34v-65.5q0-982-22-1025-4-8-22-14.5t-44.5-11-49.5-7-48.5-4.5-30.5-3l-4-83q98-2 340-11.5t373-9.5q23 0 68.5.5t67.5.5q70 0 136.5 13t128.5 42 108 71 74 104.5 28 137.5q0 52-16.5 95.5t-39 72-64.5 57.5-73 45-84 40q154 35 256.5 134t102.5 248q0 100-35 179.5t-93.5 130.5-138 85.5-163.5 48.5-176 14q-44 0-132-3t-132-3q-106 0-307 11t-231 12z"/> </svg>'
                },
                53048: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $6: function () {
                            return i.$6
                        },
                        $n: function () {
                            return o.$n
                        },
                        CP: function () {
                            return s.CP
                        },
                        D$: function () {
                            return r.D
                        },
                        F0: function () {
                            return i.F0
                        },
                        In: function () {
                            return a.I
                        },
                        SB: function () {
                            return o.SB
                        },
                        Ue: function () {
                            return s.Ue
                        },
                        XV: function () {
                            return i.XV
                        },
                        Yh: function () {
                            return i.Yh
                        },
                        bk: function () {
                            return s.bk
                        },
                        cY: function () {
                            return i.cY
                        },
                        lD: function () {
                            return o.lD
                        },
                        nE: function () {
                            return i.nE
                        },
                        ss: function () {
                            return o.ss
                        },
                        tS: function () {
                            return i.tS
                        },
                        ue: function () {
                            return o.ue
                        },
                        z2: function () {
                            return c.z
                        },
                        z4: function () {
                            return s.z4
                        },
                        zD: function () {
                            return u.z
                        }
                    });
                    var o = n(35265),
                        r = n(29780),
                        i = n(20703),
                        s = n(29012),
                        a = n(931),
                        u = n(96369),
                        c = n(92227)
                },
                53328: function (t) {
                    t.exports = '<svg viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"> <path d="M5.9814 11.8049C5.59087 11.4144 5.59087 10.7812 5.9814 10.3907L10.224 6.14806C10.6146 5.75754 11.2477 5.75754 11.6383 6.14806C12.0288 6.53859 12.0288 7.17175 11.6383 7.56228L7.39561 11.8049C7.00509 12.1954 6.37192 12.1954 5.9814 11.8049Z"/> <path d="M0.707107 12.0208C0.316582 11.6303 0.316582 10.9971 0.707107 10.6066L10.6066 0.707121C10.9971 0.316597 11.6303 0.316596 12.0208 0.707121C12.4113 1.09764 12.4113 1.73081 12.0208 2.12133L2.12132 12.0208C1.7308 12.4114 1.09763 12.4114 0.707107 12.0208Z"/> </svg>'
                },
                53380: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        F: function () {
                            return o
                        }
                    });
                    var o = function () {
                        function t(t, e, n, o) {
                            this.jodit = t, this.container = e, this.toWYSIWYG = n, this.fromWYSIWYG = o, this.className = "", this.isReady = !1
                        }
                        return Object.defineProperty(t.prototype, "j", {
                            get: function () {
                                return this.jodit
                            },
                            enumerable: !1,
                            configurable: !0
                        }), t.prototype.onReady = function () {
                            this.replaceUndoManager(), this.isReady = !0, this.j.e.fire(this, "ready")
                        }, t.prototype.onReadyAlways = function (t) {
                            var e;
                            this.isReady ? t() : null === (e = this.j.events) || void 0 === e || e.on(this, "ready", t)
                        }, t
                    }()
                },
                53414: function (t) {
                    t.exports.default = ["Type something", "About Jodit", "Jodit Editor", "Jodit User's Guide", "contains detailed help for using", "For information about the license, please go to our website:", "Buy full version", "Copyright  XDSoft.net - Chupurnov Valeriy. All rights reserved.", "Anchor", "Open in new tab", "Open in fullsize", "Clear Formatting", "Fill color or set the text color", "Redo", "Undo", "Bold", "Italic", "Insert Unordered List", "Insert Ordered List", "Align Center", "Align Justify", "Align Left", "Align Right", "Insert Horizontal Line", "Insert Image", "Insert file", "Insert youtube/vimeo video", "Insert link", "Font size", "Font family", "Insert format block", "Normal", "Heading 1", "Heading 2", "Heading 3", "Heading 4", "Quote", "Code", "Insert", "Insert table", "Decrease Indent", "Increase Indent", "Select Special Character", "Insert Special Character", "Paint format", "Change mode", "Margins", "top", "right", "bottom", "left", "Styles", "Classes", "Align", "Right", "Center", "Left", "--Not Set--", "Src", "Title", "Alternative", "Link", "Open link in new tab", "Image", "file", "Advanced", "Image properties", "Cancel", "Ok", "File Browser", "Error on load list", "Error on load folders", "Are you sure?", "Enter Directory name", "Create directory", "type name", "Drop image", "Drop file", "or click", "Alternative text", "Upload", "Browse", "Background", "Text", "Top", "Middle", "Bottom", "Insert column before", "Insert column after", "Insert row above", "Insert row below", "Delete table", "Delete row", "Delete column", "Empty cell", "Chars: %d", "Words: %d", "Strike through", "Underline", "superscript", "subscript", "Cut selection", "Select all", "Break", "Search for", "Replace with", "Replace", "Paste", "Choose Content to Paste", "source", "bold", "italic", "brush", "link", "undo", "redo", "table", "image", "eraser", "paragraph", "fontsize", "video", "font", "about", "print", "underline", "strikethrough", "indent", "outdent", "fullsize", "shrink", "hr", "ul", "ol", "cut", "selectall", "Embed code", "Open link", "Edit link", "No follow", "Unlink", "Update", "pencil", "Eye", " URL", "Edit", "Horizontal align", "Filter", "Sort by changed", "Sort by name", "Sort by size", "Add folder", "Reset", "Save", "Save as ...", "Resize", "Crop", "Width", "Height", "Keep Aspect Ratio", "Yes", "No", "Remove", "Select", "Select %s", "Vertical align", "Split", "Merge", "Add column", "Add row", "License: %s", "Delete", "Split vertical", "Split horizontal", "Border", "Your code is similar to HTML. Keep as HTML?", "Paste as HTML", "Keep", "Insert as Text", "Insert only Text", "You can only edit your own images. Download this image on the host?", "The image has been successfully uploaded to the host!", "palette", "There are no files", "Rename", "Enter new name", "preview", "download", "Paste from clipboard", "Your browser doesn't support direct access to the clipboard.", "Copy selection", "copy", "Border radius", "Show all", "Apply", "Please fill out this field", "Please enter a web address", "Default", "Circle", "Dot", "Quadrate", "Find", "Find Previous", "Find Next", "The pasted content is coming from a Microsoft Word/Excel document. Do you want to keep the format or clean it up?", "Word Paste Detected", "Clean", "Insert className", "Press Alt for custom resizing", "Line height", "spellcheck", "Speech Recognize"]
                },
                53470: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        v: function () {
                            return r
                        }
                    });
                    var o = n(69052);

                    function r(t) {
                        return Boolean(t) && (0, o.T)(t.has) && (0, o.T)(t.add) && (0, o.T)(t.delete)
                    }
                },
                53701: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        A: function () {
                            return r
                        }
                    });
                    var o = n(98253),
                        r = function (t) {
                            return (0, o.K)(t) && /<([A-Za-z][A-Za-z0-9]*)\b[^>]*>(.*?)<\/\1>/m.test(t.replace(/[\r\n]/g, ""))
                        }
                },
                53804: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        B: function () {
                            return v
                        },
                        n: function () {
                            return h
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(22664),
                        s = n(71842),
                        a = n(65147),
                        u = n(35265),
                        c = n(36115),
                        l = (n(93027), n(24863)),
                        f = "jodit-image-editor",
                        d = "resize",
                        p = "crop",
                        h = function (t) {
                            function e(e) {
                                var o = t.call(this, e) || this;
                                o.resizeUseRatio = !0, o.cropUseRatio = !0, o.clicked = !1, o.start_x = 0, o.start_y = 0, o.top_x = 0, o.top_y = 0, o.width = 0, o.height = 0, o.activeTab = d, o.naturalWidth = 0, o.naturalHeight = 0, o.ratio = 0, o.new_h = 0, o.new_w = 0, o.diff_x = 0, o.diff_y = 0, o.cropBox = {
                                    x: 0,
                                    y: 0,
                                    w: 0,
                                    h: 0
                                }, o.resizeBox = {
                                    w: 0,
                                    h: 0
                                }, o.calcCropBox = function () {
                                    var t = o.crop_box.parentNode,
                                        e = .8 * t.offsetWidth,
                                        n = .8 * t.offsetHeight,
                                        r = e,
                                        i = n,
                                        s = o.naturalWidth,
                                        u = o.naturalHeight;
                                    e > s && n > u ? (r = s, i = u) : o.ratio > e / n ? (r = e, i = u * (e / s)) : (r = s * (n / u), i = n), (0, a.css)(o.crop_box, {
                                        width: r,
                                        height: i
                                    })
                                }, o.showCrop = function () {
                                    if (o.cropImage) {
                                        o.calcCropBox();
                                        var t = o.cropImage.offsetWidth || o.image.offsetWidth || o.image.naturalWidth;
                                        o.new_w = n.calcValueByPercent(t, o.o.cropDefaultWidth);
                                        var e = o.cropImage.offsetHeight || o.image.offsetHeight || o.image.naturalHeight;
                                        o.new_h = o.cropUseRatio ? o.new_w / o.ratio : n.calcValueByPercent(e, o.o.cropDefaultHeight), (0, a.css)(o.cropHandler, {
                                            backgroundImage: "url(" + (0, a.attr)(o.cropImage, "src") + ")",
                                            width: o.new_w,
                                            height: o.new_h,
                                            left: t / 2 - o.new_w / 2,
                                            top: e / 2 - o.new_h / 2
                                        }), o.j.e.fire(o.cropHandler, "updatesize")
                                    }
                                }, o.updateCropBox = function () {
                                    if (o.cropImage) {
                                        var t = o.cropImage.offsetWidth / o.naturalWidth,
                                            e = o.cropImage.offsetHeight / o.naturalHeight;
                                        o.cropBox.x = (0, a.css)(o.cropHandler, "left") / t, o.cropBox.y = (0, a.css)(o.cropHandler, "top") / e, o.cropBox.w = o.cropHandler.offsetWidth / t, o.cropBox.h = o.cropHandler.offsetHeight / e, o.sizes.textContent = o.cropBox.w.toFixed(0) + "x" + o.cropBox.h.toFixed(0)
                                    }
                                }, o.updateResizeBox = function () {
                                    o.resizeBox.w = o.image.offsetWidth || o.naturalWidth, o.resizeBox.h = o.image.offsetHeight || o.naturalHeight
                                }, o.setHandlers = function () {
                                    var t = o,
                                        e = (0, a.refs)(o.editor),
                                        n = e.widthInput,
                                        r = e.heightInput;
                                    t.j.e.on([t.editor.querySelector(".jodit_bottomright"), t.cropHandler], "mousedown.".concat(f), o.onResizeHandleMouseDown).on(o.j.ow, "resize.".concat(f), (function () {
                                        o.j.e.fire(t.resizeHandler, "updatesize"), t.showCrop(), o.j.e.fire(t.cropHandler, "updatesize")
                                    })), t.j.e.on((0, a.toArray)(o.editor.querySelectorAll(".".concat(f, "__slider-title"))), "click", o.onTitleModeClick).on([n, r], "input", o.onChangeSizeInput);
                                    var i = (0, a.refs)(o.editor),
                                        s = i.keepAspectRatioResize,
                                        u = i.keepAspectRatioCrop;
                                    s && s.addEventListener("change", (function () {
                                        o.resizeUseRatio = s.checked
                                    })), u && u.addEventListener("change", (function () {
                                        o.cropUseRatio = u.checked
                                    })), t.j.e.on(t.resizeHandler, "updatesize", (function () {
                                        (0, a.css)(t.resizeHandler, {
                                            top: 0,
                                            left: 0,
                                            width: t.image.offsetWidth || t.naturalWidth,
                                            height: t.image.offsetHeight || t.naturalHeight
                                        }), o.updateResizeBox()
                                    })).on(t.cropHandler, "updatesize", (function () {
                                        if (t.cropImage) {
                                            var e = (0, a.css)(t.cropHandler, "left"),
                                                n = (0, a.css)(t.cropHandler, "top"),
                                                o = t.cropHandler.offsetWidth,
                                                r = t.cropHandler.offsetHeight;
                                            0 > e && (e = 0), 0 > n && (n = 0), e + o > t.cropImage.offsetWidth && (o = t.cropImage.offsetWidth - e, t.cropUseRatio && (r = o / t.ratio)), n + r > t.cropImage.offsetHeight && (r = t.cropImage.offsetHeight - n, t.cropUseRatio && (o = r * t.ratio)), (0, a.css)(t.cropHandler, {
                                                width: o,
                                                height: r,
                                                left: e,
                                                top: n,
                                                backgroundPosition: -e - 1 + "px " + (-n - 1) + "px",
                                                backgroundSize: t.cropImage.offsetWidth + "px " + t.cropImage.offsetHeight + "px"
                                            }), t.updateCropBox()
                                        }
                                    })), Object.values(t.buttons).forEach((function (e) {
                                        e.onAction((function () {
                                            var o = {
                                                action: t.activeTab,
                                                box: t.activeTab === d ? t.resizeBox : t.cropBox
                                            };
                                            switch (e) {
                                                case t.buttons.saveas:
                                                    t.j.prompt("Enter new name", "Save in new file", (function (e) {
                                                        if (!(0, a.trim)(e)) return t.j.alert("The name should not be empty"), !1;
                                                        t.onSave(e, o, t.hide, (function (e) {
                                                            t.j.alert(e.message)
                                                        }))
                                                    }));
                                                    break;
                                                case t.buttons.save:
                                                    t.onSave(void 0, o, t.hide, (function (e) {
                                                        t.j.alert(e.message)
                                                    }));
                                                    break;
                                                case t.buttons.reset:
                                                    t.activeTab === d ? ((0, a.css)(t.image, {
                                                        width: null,
                                                        height: null
                                                    }), n.value = t.naturalWidth.toString(), r.value = t.naturalHeight.toString(), t.j.e.fire(t.resizeHandler, "updatesize")) : t.showCrop()
                                            }
                                        }))
                                    }))
                                }, o.options = e && e.o && e.o.imageeditor ? e.o.imageeditor : c.T.defaultOptions.imageeditor;
                                var r = o.options;
                                o.resizeUseRatio = r.resizeUseRatio, o.cropUseRatio = r.cropUseRatio, o.buttons = {
                                    reset: (0, u.$n)(o.j, "update", "Reset"),
                                    save: (0, u.$n)(o.j, "save", "Save"),
                                    saveas: (0, u.$n)(o.j, "save", "Save as ...")
                                }, o.activeTab = r.resize ? d : p, o.editor = (0, l.Z)(o.j, o.options);
                                var i = (0, a.refs)(o.editor),
                                    s = i.cropBox;
                                return o.resize_box = i.resizeBox, o.crop_box = s, o.sizes = o.editor.querySelector(".".concat(f, "__area.").concat(f, "__area_crop .jodit-image-editor__sizes")), o.resizeHandler = o.editor.querySelector(".".concat(f, "__resizer")), o.cropHandler = o.editor.querySelector(".".concat(f, "__croper")), o._dialog = o.j.dlg({
                                    buttons: ["fullsize", "dialog.close"]
                                }), o._dialog.setContent(o.editor), o._dialog.setSize(o.o.width, o.o.height), o._dialog.setHeader([o.buttons.reset, o.buttons.save, o.buttons.saveas]), o.setHandlers(), o
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                                return "ImageEditor"
                            }, Object.defineProperty(e.prototype, "o", {
                                get: function () {
                                    return this.options
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.hide = function () {
                                this._dialog.close()
                            }, e.prototype.open = function (t, e) {
                                var n = this;
                                return this.j.async.promise((function (o) {
                                    var r = (new Date).getTime();
                                    n.image = n.j.c.element("img"), (0, a.$$)("img,.jodit-icon_loader", n.resize_box).forEach(s.J.safeRemove), (0, a.$$)("img,.jodit-icon_loader", n.crop_box).forEach(s.J.safeRemove), (0, a.css)(n.cropHandler, "background", "transparent"), n.onSave = e, n.resize_box.appendChild(n.j.c.element("i", {
                                        class: "jodit-icon_loader"
                                    })), n.crop_box.appendChild(n.j.c.element("i", {
                                        class: "jodit-icon_loader"
                                    })), /\?/.test(t) ? t += "&_tst=" + r : t += "?_tst=" + r, n.image.setAttribute("src", t), n._dialog.open();
                                    var i = (0, a.refs)(n.editor),
                                        u = i.widthInput,
                                        c = i.heightInput,
                                        l = function () {
                                            n.isDestructed || (n.image.removeEventListener("load", l), n.naturalWidth = n.image.naturalWidth, n.naturalHeight = n.image.naturalHeight, u.value = n.naturalWidth.toString(), c.value = n.naturalHeight.toString(), n.ratio = n.naturalWidth / n.naturalHeight, n.resize_box.appendChild(n.image), n.cropImage = n.image.cloneNode(!0), n.crop_box.appendChild(n.cropImage), s.J.safeRemove.apply(null, (0, a.$$)(".jodit-icon_loader", n.editor)), n.activeTab === p && n.showCrop(), n.j.e.fire(n.resizeHandler, "updatesize"), n.j.e.fire(n.cropHandler, "updatesize"), n._dialog.setPosition(), n.j.e.fire("afterImageEditor"), o(n._dialog))
                                        };
                                    n.image.addEventListener("load", l), n.image.complete && l()
                                }))
                            }, e.prototype.onTitleModeClick = function (t) {
                                var e = this,
                                    n = t.target,
                                    o = null == n ? void 0 : n.parentElement;
                                if (o) {
                                    (0, a.$$)(".".concat(f, "__slider,.").concat(f, "__area"), e.editor).forEach((function (t) {
                                        return t.classList.remove("".concat(f, "_active"))
                                    })), o.classList.add("".concat(f, "_active")), this.activeTab = (0, a.attr)(o, "-area") || d;
                                    var r = e.editor.querySelector(".".concat(f, "__area.").concat(f, "__area_") + e.activeTab);
                                    r && r.classList.add("".concat(f, "_active")), e.activeTab === p && e.showCrop()
                                }
                            }, e.prototype.onChangeSizeInput = function (t) {
                                var e, n = this,
                                    o = t.target,
                                    r = (0, a.refs)(this.editor),
                                    i = r.widthInput,
                                    s = r.heightInput,
                                    u = "widthInput" === (0, a.attr)(o, "data-ref"),
                                    c = parseInt(o.value, 10),
                                    l = u ? n.o.min_height : n.o.min_width;
                                c > (u ? n.o.min_width : n.o.min_height) && ((0, a.css)(n.image, u ? "width" : "height", c), n.resizeUseRatio && (e = u ? Math.round(c / n.ratio) : Math.round(c * n.ratio)) > l && ((0, a.css)(n.image, u ? "height" : "width", e), u ? s.value = e.toString() : i.value = e.toString())), this.j.e.fire(n.resizeHandler, "updatesize")
                            }, e.prototype.onResizeHandleMouseDown = function (t) {
                                var e = this;
                                e.target = t.target, t.preventDefault(), t.stopImmediatePropagation(), e.clicked = !0, e.start_x = t.clientX, e.start_y = t.clientY, e.activeTab === p ? (e.top_x = (0, a.css)(e.cropHandler, "left"), e.top_y = (0, a.css)(e.cropHandler, "top"), e.width = e.cropHandler.offsetWidth, e.height = e.cropHandler.offsetHeight) : (e.width = e.image.offsetWidth, e.height = e.image.offsetHeight), e.j.e.on(this.j.ow, "mousemove", this.onGlobalMouseMove).one(this.j.ow, "mouseup", this.onGlobalMouseUp)
                            }, e.prototype.onGlobalMouseUp = function (t) {
                                this.clicked && (this.clicked = !1, t.stopImmediatePropagation(), this.j.e.off(this.j.ow, "mousemove", this.onGlobalMouseMove))
                            }, e.prototype.onGlobalMouseMove = function (t) {
                                var e = this;
                                if (e.clicked) {
                                    var n = (0, a.refs)(this.editor),
                                        o = n.widthInput,
                                        r = n.heightInput;
                                    e.diff_x = t.clientX - e.start_x, e.diff_y = t.clientY - e.start_y, e.activeTab === d && e.resizeUseRatio || e.activeTab === p && e.cropUseRatio ? e.diff_x ? (e.new_w = e.width + e.diff_x, e.new_h = Math.round(e.new_w / e.ratio)) : (e.new_h = e.height + e.diff_y, e.new_w = Math.round(e.new_h * e.ratio)) : (e.new_w = e.width + e.diff_x, e.new_h = e.height + e.diff_y), e.activeTab === d ? (e.new_w > e.o.resizeMinWidth && ((0, a.css)(e.image, "width", e.new_w + "px"), o.value = e.new_w.toString()), e.new_h > e.o.resizeMinHeight && ((0, a.css)(e.image, "height", e.new_h + "px"), r.value = e.new_h.toString()), this.j.e.fire(e.resizeHandler, "updatesize")) : (e.target !== e.cropHandler ? (e.top_x + e.new_w > e.cropImage.offsetWidth && (e.new_w = e.cropImage.offsetWidth - e.top_x), e.top_y + e.new_h > e.cropImage.offsetHeight && (e.new_h = e.cropImage.offsetHeight - e.top_y), (0, a.css)(e.cropHandler, {
                                        width: e.new_w,
                                        height: e.new_h
                                    })) : (e.top_x + e.diff_x + e.cropHandler.offsetWidth > e.cropImage.offsetWidth && (e.diff_x = e.cropImage.offsetWidth - e.top_x - e.cropHandler.offsetWidth), (0, a.css)(e.cropHandler, "left", e.top_x + e.diff_x), e.top_y + e.diff_y + e.cropHandler.offsetHeight > e.cropImage.offsetHeight && (e.diff_y = e.cropImage.offsetHeight - e.top_y - e.cropHandler.offsetHeight), (0, a.css)(e.cropHandler, "top", e.top_y + e.diff_y)), this.j.e.fire(e.cropHandler, "updatesize"))
                                }
                            }, e.prototype.destruct = function () {
                                this.isDestructed || (this._dialog && !this._dialog.isInDestruct && this._dialog.destruct(), s.J.safeRemove(this.editor), this.j.e && this.j.e.off(this.j.ow, "mousemove", this.onGlobalMouseMove).off(this.j.ow, "mouseup", this.onGlobalMouseUp).off(this.ow, ".".concat(f)).off(".".concat(f)), t.prototype.destruct.call(this))
                            }, e.calcValueByPercent = function (t, e) {
                                var n, o = e.toString(),
                                    r = parseFloat(t.toString());
                                return (n = /^[-+]?[0-9]+(px)?$/.exec(o)) ? parseInt(o, 10) : (n = /^([-+]?[0-9.]+)%$/.exec(o)) ? Math.round(r * (parseFloat(n[1]) / 100)) : r || 0
                            }, (0, o.Cg)([i.autobind], e.prototype, "hide", null), (0, o.Cg)([i.autobind], e.prototype, "open", null), (0, o.Cg)([i.autobind], e.prototype, "onTitleModeClick", null), (0, o.Cg)([(0, i.debounce)(), i.autobind], e.prototype, "onChangeSizeInput", null), (0, o.Cg)([i.autobind], e.prototype, "onResizeHandleMouseDown", null), (0, o.Cg)([i.autobind], e.prototype, "onGlobalMouseUp", null), (0, o.Cg)([(0, i.throttle)(10)], e.prototype, "onGlobalMouseMove", null), n = (0, o.Cg)([i.component], e)
                        }(r.vG);

                    function v(t, e, n, o, r, i) {
                        var s = this;
                        return this.getInstance("ImageEditor", this.o).open(t, (function (t, u, c, l) {
                            return (0, a.call)("resize" === u.action ? s.dataProvider.resize : s.dataProvider.crop, n, o, e, t, u.box).then((function (t) {
                                t && (c(), r && r())
                            })).catch((function (t) {
                                l(t), i && i(t)
                            }))
                        }))
                    }
                },
                53808: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M512 1536h768v-384h-768v384zm896 0h128v-896q0-14-10-38.5t-20-34.5l-281-281q-10-10-34-20t-39-10v416q0 40-28 68t-68 28h-576q-40 0-68-28t-28-68v-416h-128v1280h128v-416q0-40 28-68t68-28h832q40 0 68 28t28 68v416zm-384-928v-320q0-13-9.5-22.5t-22.5-9.5h-192q-13 0-22.5 9.5t-9.5 22.5v320q0 13 9.5 22.5t22.5 9.5h192q13 0 22.5-9.5t9.5-22.5zm640 32v928q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1344q0-40 28-68t68-28h928q40 0 88 20t76 48l280 280q28 28 48 76t20 88z"/> </svg>'
                },
                53883: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Y: function () {
                            return r.Y
                        },
                        d: function () {
                            return o.d
                        }
                    });
                    var o = n(49853),
                        r = n(91672)
                },
                54522: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' x="0px" y="0px" viewBox="0 0 459 459"> <g> <path d="M229.5,0C102,0,0,102,0,229.5S102,459,229.5,459c20.4,0,38.25-17.85,38.25-38.25c0-10.2-2.55-17.85-10.2-25.5 c-5.1-7.65-10.2-15.3-10.2-25.5c0-20.4,17.851-38.25,38.25-38.25h45.9c71.4,0,127.5-56.1,127.5-127.5C459,91.8,357,0,229.5,0z M89.25,229.5c-20.4,0-38.25-17.85-38.25-38.25S68.85,153,89.25,153s38.25,17.85,38.25,38.25S109.65,229.5,89.25,229.5z M165.75,127.5c-20.4,0-38.25-17.85-38.25-38.25S145.35,51,165.75,51S204,68.85,204,89.25S186.15,127.5,165.75,127.5z M293.25,127.5c-20.4,0-38.25-17.85-38.25-38.25S272.85,51,293.25,51s38.25,17.85,38.25,38.25S313.65,127.5,293.25,127.5z M369.75,229.5c-20.4,0-38.25-17.85-38.25-38.25S349.35,153,369.75,153S408,170.85,408,191.25S390.15,229.5,369.75,229.5z" /> </g> </svg>'
                },
                55186: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        J: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(42448),
                        s = n(9823),
                        a = n(59101),
                        u = n(97369),
                        c = function () {
                            function t() {
                                throw new Error("Dom is static module")
                            }
                            return t.detach = function (t) {
                                for (; t && t.firstChild;) t.removeChild(t.firstChild)
                            }, t.wrapNextInline = function (e, n, o) {
                                var r, i = e,
                                    s = e;
                                o.s.save();
                                var a = !1;
                                do {
                                    a = !1, !(r = s.nextSibling) || t.isBlock(r) || t.isTag(r, "br") || (a = !0, s = r)
                                } while (a);
                                return t.__wrapElements(n, o, i, s)
                            }, t.__wrapElements = function (t, e, n, o) {
                                var r = (0, s.Kg)(t) ? e.createInside.element(t) : t;
                                n.parentNode && n.parentNode.insertBefore(r, n);
                                for (var i = n; i && (i = n.nextSibling, r.appendChild(n), n !== o && i);) n = i;
                                return e.s.restore(), r
                            }, t.wrapInline = function (e, n, o) {
                                var r, i = e,
                                    s = e;
                                o.s.save();
                                var a = !1;
                                do {
                                    a = !1, (r = i.previousSibling) && !t.isBlock(r) && (a = !0, i = r)
                                } while (a);
                                do {
                                    a = !1, (r = s.nextSibling) && !t.isBlock(r) && (a = !0, s = r)
                                } while (a);
                                return t.__wrapElements(n, o, i, s)
                            }, t.wrap = function (e, n, o) {
                                var r = (0, s.Kg)(n) ? o.element(n) : n;
                                if (t.isNode(e)) {
                                    if (!e.parentNode) throw (0, u.error)("Element should be in DOM");
                                    e.parentNode.insertBefore(r, e), r.appendChild(e)
                                } else {
                                    var i = e.extractContents();
                                    e.insertNode(r), r.appendChild(i)
                                }
                                return r
                            }, t.unwrap = function (e) {
                                var n = e.parentNode;
                                if (n) {
                                    for (; e.firstChild;) n.insertBefore(e.firstChild, e);
                                    t.safeRemove(e)
                                }
                            }, t.between = function (t, e, n) {
                                for (var o = t; o && o !== e && (t === o || !n(o));) {
                                    var r = o.firstChild || o.nextSibling;
                                    if (!r) {
                                        for (; o && !o.nextSibling;) o = o.parentNode;
                                        r = null == o ? void 0 : o.nextSibling
                                    }
                                    o = r
                                }
                            }, t.replace = function (e, n, o, r, a) {
                                var u;
                                if (void 0 === r && (r = !1), void 0 === a && (a = !1), (0, s.AH)(n) && (n = o.fromHTML(n)), u = (0, s.Kg)(n) ? o.element(n) : n, !a)
                                    for (; e.firstChild;) u.appendChild(e.firstChild);
                                return r && t.isElement(e) && t.isElement(u) && (0, i.$)(e.attributes).forEach((function (t) {
                                    u.setAttribute(t.name, t.value)
                                })), e.parentNode && e.parentNode.replaceChild(u, e), u
                            }, t.isEmptyTextNode = function (e) {
                                return t.isText(e) && (!e.nodeValue || 0 === e.nodeValue.replace(r.INVISIBLE_SPACE_REG_EXP(), "").trim().length)
                            }, t.isEmptyContent = function (e) {
                                return t.each(e, (function (e) {
                                    return t.isEmptyTextNode(e)
                                }))
                            }, t.isContentEditable = function (e, n) {
                                return t.isNode(e) && !t.closest(e, (function (e) {
                                    return t.isElement(e) && "false" === e.getAttribute("contenteditable")
                                }), n)
                            }, t.isEmpty = function (e, n) {
                                if (void 0 === n && (n = r.NO_EMPTY_TAGS), !e) return !0;
                                var o;
                                o = (0, s.Tn)(n) ? n : function (t) {
                                    return n.has(t.nodeName.toLowerCase())
                                };
                                var i = function (t) {
                                    return null == t.nodeValue || 0 === (0, a.Bq)(t.nodeValue).length
                                };
                                return t.isText(e) ? i(e) : !(t.isElement(e) && o(e)) && t.each(e, (function (e) {
                                    if (t.isText(e) && !i(e) || t.isElement(e) && o(e)) return !1
                                }))
                            }, t.isNode = function (t) {
                                return Boolean(t && (0, s.Kg)(t.nodeName) && "number" == typeof t.nodeType && t.childNodes && (0, s.Tn)(t.appendChild))
                            }, t.isCell = function (e) {
                                return t.isNode(e) && ("TD" === e.nodeName || "TH" === e.nodeName)
                            }, t.isList = function (e) {
                                return t.isTag(e, r.LIST_TAGS)
                            }, t.isLeaf = function (e) {
                                return t.isTag(e, "li")
                            }, t.isImage = function (e) {
                                return t.isNode(e) && /^(img|svg|picture|canvas)$/i.test(e.nodeName)
                            }, t.isBlock = function (e) {
                                return !(0, s.Rd)(e) && "object" == typeof e && t.isNode(e) && r.IS_BLOCK.test(e.nodeName)
                            }, t.isText = function (t) {
                                return Boolean(t && t.nodeType === Node.TEXT_NODE)
                            }, t.isComment = function (t) {
                                return Boolean(t && t.nodeType === Node.COMMENT_NODE)
                            }, t.isElement = function (e) {
                                var n;
                                if (!t.isNode(e)) return !1;
                                var o = null === (n = e.ownerDocument) || void 0 === n ? void 0 : n.defaultView;
                                return Boolean(o && e.nodeType === Node.ELEMENT_NODE)
                            }, t.isFragment = function (e) {
                                var n;
                                if (!t.isNode(e)) return !1;
                                var o = null === (n = e.ownerDocument) || void 0 === n ? void 0 : n.defaultView;
                                return Boolean(o && e.nodeType === Node.DOCUMENT_FRAGMENT_NODE)
                            }, t.isHTMLElement = function (e) {
                                var n;
                                if (!t.isNode(e)) return !1;
                                var o = null === (n = e.ownerDocument) || void 0 === n ? void 0 : n.defaultView;
                                return Boolean(o && e instanceof o.HTMLElement)
                            }, t.isInlineBlock = function (e) {
                                return t.isElement(e) && !/^(BR|HR)$/i.test(e.tagName) && -1 !== ["inline", "inline-block"].indexOf((0, u.css)(e, "display").toString())
                            }, t.canSplitBlock = function (e) {
                                return !(0, s.Rd)(e) && t.isHTMLElement(e) && t.isBlock(e) && !/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName) && void 0 !== e.style && !/^(fixed|absolute)/i.test(e.style.position)
                            }, t.last = function (t, e) {
                                var n = null == t ? void 0 : t.lastChild;
                                if (!n) return null;
                                do {
                                    if (e(n)) return n;
                                    var o = n.lastChild;
                                    if (o || (o = n.previousSibling), !o && n.parentNode !== t) {
                                        do {
                                            n = n.parentNode
                                        } while (n && !(null == n ? void 0 : n.previousSibling) && n.parentNode !== t);
                                        o = null == n ? void 0 : n.previousSibling
                                    }
                                    n = o
                                } while (n);
                                return null
                            }, t.prev = function (e, n, o, r) {
                                return void 0 === r && (r = !0), t.find(e, n, o, !1, r)
                            }, t.next = function (e, n, o, r) {
                                return void 0 === r && (r = !0), t.find(e, n, o, !0, r)
                            }, t.prevWithClass = function (e, n) {
                                return t.prev(e, (function (e) {
                                    return t.isElement(e) && e.classList.contains(n)
                                }), e.parentNode)
                            }, t.nextWithClass = function (e, n) {
                                return t.next(e, (function (e) {
                                    return t.isElement(e) && e.classList.contains(n)
                                }), e.parentNode)
                            }, t.find = function (t, e, n, o, r) {
                                void 0 === o && (o = !0), void 0 === r && (r = !0);
                                for (var i = this.nextGen(t, n, o, r), s = i.next(); !s.done;) {
                                    if (e(s.value)) return s.value;
                                    s = i.next()
                                }
                                return null
                            }, t.nextGen = function (t, e, n, r) {
                                var i, s, a;
                                return void 0 === n && (n = !0), void 0 === r && (r = !0), (0, o.YH)(this, (function (u) {
                                    switch (u.label) {
                                        case 0:
                                            i = [], s = t, u.label = 1;
                                        case 1:
                                            for (a = n ? s.nextSibling : s.previousSibling; a;) i.unshift(a), a = n ? a.nextSibling : a.previousSibling;
                                            return [5, (0, o.Ju)(this.runInStack(t, i, n, r))];
                                        case 2:
                                            u.sent(), s = s.parentNode, u.label = 3;
                                        case 3:
                                            if (s && s !== e) return [3, 1];
                                            u.label = 4;
                                        case 4:
                                            return [2, null]
                                    }
                                }))
                            }, t.each = function (t, e, n) {
                                void 0 === n && (n = !0);
                                for (var o = this.eachGen(t, n), r = o.next(); !r.done;) {
                                    if (!1 === e(r.value)) return !1;
                                    r = o.next()
                                }
                                return !0
                            }, t.eachGen = function (t, e) {
                                return void 0 === e && (e = !0), this.runInStack(t, [t], e)
                            }, t.runInStack = function (t, e, n, r) {
                                var i, s;
                                return void 0 === r && (r = !0), (0, o.YH)(this, (function (o) {
                                    switch (o.label) {
                                        case 0:
                                            if (!e.length) return [3, 3];
                                            if (i = e.pop(), r)
                                                for (s = n ? i.lastChild : i.firstChild; s;) e.push(s), s = n ? s.previousSibling : s.nextSibling;
                                            return t === i ? [3, 2] : [4, i];
                                        case 1:
                                            o.sent(), o.label = 2;
                                        case 2:
                                            return [3, 0];
                                        case 3:
                                            return [2]
                                    }
                                }))
                            }, t.findWithCurrent = function (e, n, o, r, i) {
                                void 0 === r && (r = "nextSibling"), void 0 === i && (i = "firstChild");
                                var s = e;
                                do {
                                    if (n(s)) return s || null;
                                    if (i && s && s[i]) {
                                        var a = t.findWithCurrent(s[i], n, s, r, i);
                                        if (a) return a
                                    }
                                    for (; s && !s[r] && s !== o;) s = s.parentNode;
                                    s && s[r] && s !== o && (s = s[r])
                                } while (s && s !== o);
                                return null
                            }, t.findSibling = function (e, n, o) {
                                void 0 === n && (n = !0), void 0 === o && (o = function (e) {
                                    return !t.isEmptyTextNode(e)
                                });
                                for (var r = t.sibling(e, n); r && !o(r);) r = t.sibling(r, n);
                                return r && o(r) ? r : null
                            }, t.findNotEmptySibling = function (e, n) {
                                return t.findSibling(e, n, (function (e) {
                                    var n;
                                    return !t.isEmptyTextNode(e) && Boolean(!t.isText(e) || (null === (n = e.nodeValue) || void 0 === n ? void 0 : n.length) && (0, a.Bq)(e.nodeValue))
                                }))
                            }, t.findNotEmptyNeighbor = function (e, n, o) {
                                return (0, u.call)(n ? t.prev : t.next, e, (function (e) {
                                    return Boolean(e && (!(t.isText(e) || t.isComment(e)) || (0, a.Bq)((null == e ? void 0 : e.nodeValue) || "").length))
                                }), o)
                            }, t.sibling = function (t, e) {
                                return e ? t.previousSibling : t.nextSibling
                            }, t.up = function (t, e, n, o) {
                                void 0 === o && (o = !1);
                                var r = t;
                                if (!r) return null;
                                do {
                                    if (e(r)) return r;
                                    if (r === n || !r.parentNode) break;
                                    r = r.parentNode
                                } while (r && r !== n);
                                return r === n && o && e(r) ? r : null
                            }, t.closest = function (e, n, o) {
                                var r, i = function (t) {
                                    return t.toLowerCase()
                                };
                                if ((0, s.Tn)(n)) r = n;
                                else if ((0, s.cy)(n) || (0, s.vM)(n)) {
                                    var a = (0, s.vM)(n) ? n : new Set(n.map(i));
                                    r = function (t) {
                                        return Boolean(t && a.has(i(t.nodeName)))
                                    }
                                } else r = function (t) {
                                    return Boolean(t && i(n) === i(t.nodeName))
                                };
                                return t.up(e, r, o)
                            }, t.furthest = function (t, e, n) {
                                for (var o = null, r = null == t ? void 0 : t.parentElement; r && r !== n;) e(r) && (o = r), r = null == r ? void 0 : r.parentElement;
                                return o
                            }, t.appendChildFirst = function (t, e) {
                                var n = t.firstChild;
                                n ? n !== e && t.insertBefore(e, n) : t.appendChild(e)
                            }, t.after = function (t, e) {
                                var n = t.parentNode;
                                n && (n.lastChild === t ? n.appendChild(e) : n.insertBefore(e, t.nextSibling))
                            }, t.before = function (t, e) {
                                var n = t.parentNode;
                                n && n.insertBefore(e, t)
                            }, t.prepend = function (t, e) {
                                t.insertBefore(e, t.firstChild)
                            }, t.append = function (t, e) {
                                var n = this;
                                (0, s.cy)(e) ? e.forEach((function (e) {
                                    n.append(t, e)
                                })): t.appendChild(e)
                            }, t.moveContent = function (e, n, o, s) {
                                void 0 === o && (o = !1), void 0 === s && (s = function () {
                                    return !0
                                });
                                var a = (e.ownerDocument || r.globalDocument).createDocumentFragment();
                                (0, i.$)(e.childNodes).filter((function (e) {
                                    return !!s(e) || (t.safeRemove(e), !1)
                                })).forEach((function (t) {
                                    a.appendChild(t)
                                })), o && n.firstChild ? n.insertBefore(a, n.firstChild) : n.appendChild(a)
                            }, t.isOrContains = function (t, e, n) {
                                return void 0 === n && (n = !1), t === e ? !n : Boolean(e && t && this.up(e, (function (e) {
                                    return e === t
                                }), t, !0))
                            }, t.safeRemove = function () {
                                for (var e = [], n = 0; arguments.length > n; n++) e[n] = arguments[n];
                                e.forEach((function (e) {
                                    return t.isNode(e) && e.parentNode && e.parentNode.removeChild(e)
                                }))
                            }, t.safeInsertNode = function (e, n) {
                                e.collapsed || e.deleteContents();
                                var o = t.isFragment(n) ? n.lastChild : n;
                                e.startContainer === e.endContainer && e.collapsed && t.isTag(e.startContainer, r.INSEPARABLE_TAGS) ? t.after(e.startContainer, n) : (e.insertNode(n), o && e.setStartBefore(o)), e.collapse(!0), [n.nextSibling, n.previousSibling].forEach((function (e) {
                                    return t.isText(e) && !e.nodeValue && t.safeRemove(e)
                                }))
                            }, t.hide = function (t) {
                                t && ((0, u.dataBind)(t, "__old_display", t.style.display), t.style.display = "none")
                            }, t.show = function (t) {
                                if (t) {
                                    var e = (0, u.dataBind)(t, "__old_display");
                                    "none" === t.style.display && (t.style.display = e || "")
                                }
                            }, t.isTag = function (t, e) {
                                if (!this.isElement(t)) return !1;
                                var n = t.tagName.toLowerCase(),
                                    o = t.tagName.toUpperCase();
                                if (e instanceof Set) return e.has(n) || e.has(o);
                                if (Array.isArray(e)) throw new TypeError("Dom.isTag does not support array");
                                return n === e || o === e
                            }, t.markTemporary = function (t, e) {
                                return e && (0, u.attr)(t, e), (0, u.attr)(t, r.TEMP_ATTR, !0), t
                            }, t.isTemporary = function (e) {
                                return !!t.isElement(e) && ((0, s.rg)(e) || "true" === (0, u.attr)(e, r.TEMP_ATTR))
                            }, t.replaceTemporaryFromString = function (t) {
                                return t.replace(/<([a-z]+)[^>]+data-jodit-temp[^>]+>(.+?)<\/\1>/gi, "$2")
                            }, t.temporaryList = function (t) {
                                return (0, u.$$)("[".concat(r.TEMP_ATTR, "]"), t)
                            }, t
                        }()
                },
                55265: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        S: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(55186),
                        i = n(38322),
                        s = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.autosize = e.j.async.debounce((function () {
                                    e.instance.style.height = "auto", e.instance.style.height = e.instance.scrollHeight + "px"
                                }), e.j.defaultTimeout), e
                            }
                            return (0, o.C6)(e, t), e.prototype.init = function (t) {
                                var e = this;
                                this.instance = t.c.element("textarea", {
                                    class: "jodit-source__mirror",
                                    dir: "rtl" === t.o.direction ? "rtl" : void 0
                                }), this.container.appendChild(this.instance), t.e.on(this.instance, "mousedown keydown touchstart input", t.async.debounce(this.toWYSIWYG, t.defaultTimeout)).on("setMinHeight.source", (function (t) {
                                    (0, i.A)(e.instance, "minHeight", t)
                                })).on(this.instance, "change keydown mousedown touchstart input", this.autosize).on("afterSetMode.source", this.autosize).on(this.instance, "mousedown focus", (function (e) {
                                    t.e.fire(e.type, e)
                                })), this.autosize(), this.onReady()
                            }, e.prototype.destruct = function () {
                                r.J.safeRemove(this.instance)
                            }, e.prototype.getValue = function () {
                                return this.instance.value
                            }, e.prototype.setValue = function (t) {
                                this.instance.value = t
                            }, e.prototype.insertRaw = function (t) {
                                var e = this.getValue();
                                if (0 > this.getSelectionStart()) this.setValue(e + t);
                                else {
                                    var n = this.getSelectionStart(),
                                        o = this.getSelectionEnd();
                                    this.setValue(e.substring(0, n) + t + e.substring(o, e.length))
                                }
                            }, e.prototype.getSelectionStart = function () {
                                return this.instance.selectionStart
                            }, e.prototype.getSelectionEnd = function () {
                                return this.instance.selectionEnd
                            }, e.prototype.setSelectionRange = function (t, e) {
                                void 0 === e && (e = t), this.instance.setSelectionRange(t, e)
                            }, Object.defineProperty(e.prototype, "isFocused", {
                                get: function () {
                                    return this.instance === this.j.od.activeElement
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.focus = function () {
                                this.instance.focus()
                            }, e.prototype.blur = function () {
                                this.instance.blur()
                            }, e.prototype.setPlaceHolder = function (t) {
                                this.instance.setAttribute("placeholder", t)
                            }, e.prototype.setReadOnly = function (t) {
                                t ? this.instance.setAttribute("readonly", "true") : this.instance.removeAttribute("readonly")
                            }, e.prototype.selectAll = function () {
                                this.instance.select()
                            }, e.prototype.replaceUndoManager = function () {
                                var t = this,
                                    e = this.jodit.history;
                                this.j.e.on(this.instance, "keydown", (function (n) {
                                    if ((n.ctrlKey || n.metaKey) && "z" === n.key) return n.shiftKey ? e.redo() : e.undo(), t.setSelectionRange(t.getValue().length), !1
                                }))
                            }, e
                        }(n(53380).F)
                },
                55989: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(56298),
                        s = n(65147),
                        a = n(37435),
                        u = (n(84018), "addnewline"),
                        c = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.__line = e.j.c.fromHTML('<div role="button" tabindex="-1" title="'.concat(e.j.i18n("Break"), '" class="jodit-add-new-line"><span>').concat(a.Icon.get("enter"), "</span></div>")), e.__isMatchedTag = function (t) {
                                    return Boolean(t && e.j.o.addNewLineTagsTriggers.includes(t.nodeName.toLowerCase()))
                                }, e.__isBeforeContent = !1, e.__lineInFocus = !1, e.__isShown = !1, e.__hideForce = function () {
                                    e.__isShown && (e.__isShown = !1, e.j.async.clearTimeout(e.__timeout), e.__lineInFocus = !1, a.Dom.safeRemove(e.__line), e.__line.style.setProperty("--jd-anl-handle-offset", "0"))
                                }, e.__canGetFocus = function (t) {
                                    return null != t && a.Dom.isBlock(t) && !/^(img|table|iframe|hr)$/i.test(t.nodeName)
                                }, e.__onClickLine = function (t) {
                                    var n = e.j,
                                        o = n.createInside.element(n.o.enter);
                                    e.__isBeforeContent && e.__current && e.__current.parentNode ? e.__current === n.editor ? a.Dom.prepend(n.editor, o) : e.__current.parentNode.insertBefore(o, e.__current) : n.editor.appendChild(o), n.s.setCursorIn(o), (0, s.scrollIntoViewIfNeeded)(o, n.editor, n.ed), n.synchronizeValues(), e.__hideForce(), t.preventDefault()
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.__show = function () {
                                this.j.o.readonly || this.j.isLocked || (this.j.async.clearTimeout(this.__timeout), this.__isShown || (this.__isShown = !0, this.j.container.appendChild(this.__line), this.__line.style.width = this.j.container.clientWidth + "px"))
                            }, e.prototype.onLock = function (t) {
                                t && this.__isShown && this.__hideForce()
                            }, e.prototype.__hide = function () {
                                this.__isShown && !this.__lineInFocus && (this.__timeout = this.j.async.setTimeout(this.__hideForce, {
                                    timeout: 500,
                                    label: "add-new-line-hide"
                                }))
                            }, e.prototype.afterInit = function (t) {
                                var e = this;
                                t.o.addNewLine && (t.e.on(this.__line, "mousemove", (function (t) {
                                    t.stopPropagation()
                                })).on(this.__line, "mousedown touchstart", this.__onClickLine).on("change", this.__hideForce).on(this.__line, "mouseenter", (function () {
                                    e.j.async.clearTimeout(e.__timeout), e.__lineInFocus = !0
                                })).on(this.__line, "mouseleave", (function () {
                                    e.__lineInFocus = !1
                                })).on("changePlace", this.__addEventListeners.bind(this)), this.__addEventListeners())
                            }, e.prototype.__addEventListeners = function () {
                                var t = this.j;
                                t.e.off(t.editor, "." + u).off(t.container, "." + u).off("." + u).on([t.ow, t.ew, t.editor], "scroll." + u, this.__hideForce).on("finishedCleanHTMLWorker." + u, this.__hideForce).on(t.editor, "click." + u, this.__hide).on(t.container, "mouseleave." + u, this.__hide).on(t.editor, "mousemove." + u, this.__onMouseMove)
                            }, e.prototype.onDblClickEditor = function (t) {
                                var e = this.j;
                                if (!e.o.readonly && e.o.addNewLineOnDBLClick && t.target === e.editor && e.s.isCollapsed()) {
                                    var n = (0, s.offset)(e.editor, e, e.ed),
                                        o = t.pageY - e.ew.scrollX,
                                        r = e.createInside.element(e.o.enter);
                                    Math.abs(o - n.top) < Math.abs(o - (n.height + n.top)) && e.editor.firstChild ? e.editor.insertBefore(r, e.editor.firstChild) : e.editor.appendChild(r), e.s.setCursorIn(r), e.synchronizeValues(), this.__hideForce(), t.preventDefault()
                                }
                            }, e.prototype.__onMouseMove = function (t) {
                                var e = this.j,
                                    n = e.ed.elementFromPoint(t.clientX, t.clientY);
                                if (a.Dom.isHTMLElement(n) && a.Dom.isOrContains(e.editor, n))
                                    if (e.editor === n || this.__isMatchedTag(n) || (n = a.Dom.closest(n, this.__isMatchedTag, e.editor)), n) {
                                        if (this.__isMatchedTag(n)) {
                                            var o = a.Dom.up(n, a.Dom.isBlock, e.editor);
                                            o && o !== e.editor && (n = o)
                                        }
                                        var r = (0, s.position)(n, this.j),
                                            i = !1,
                                            u = t.clientY,
                                            c = t.clientX;
                                        if (this.j.iframe) {
                                            var l = (0, s.position)(this.j.iframe, this.j, !0);
                                            u += l.top, c += l.left
                                        }
                                        var f = this.j.o.addNewLineDeltaShow;
                                        Math.abs(u - r.top) > f ? Math.abs(u - (r.top + r.height)) > f || (i = r.top + r.height, this.__isBeforeContent = !1) : (i = r.top, this.__isBeforeContent = !0);
                                        var d = e.editor === n;
                                        !1 !== i && (d && !this.__isBeforeContent || !d && !(0, s.call)(this.__isBeforeContent ? a.Dom.prev : a.Dom.next, n, this.__canGetFocus, e.editor)) ? (this.__line.style.top = i + "px", this.__current = n, this.__show(), this.__line.style.setProperty("--jd-anl-handle-offset", c - r.left - 10 + "px")) : (this.__current = !1, this.__hide())
                                    } else this.__hide()
                            }, e.prototype.beforeDestruct = function () {
                                this.j.async.clearTimeout(this.__timeout), this.j.e.off(this.__line).off("changePlace", this.__addEventListeners), a.Dom.safeRemove(this.__line), this.j.e.off([this.j.ow, this.j.ew, this.j.editor], "." + u).off(this.j.container, "." + u).off("." + u)
                            }, (0, o.Cg)([(0, r.watch)(":lock")], e.prototype, "onLock", null), (0, o.Cg)([r.autobind], e.prototype, "__hide", null), (0, o.Cg)([(0, r.watch)(":dblclick")], e.prototype, "onDblClickEditor", null), (0, o.Cg)([(0, r.throttle)((function (t) {
                                return t.defaultTimeout
                            }))], e.prototype, "__onMouseMove", null), e
                        }(a.Plugin);
                    i.fg.add("addNewLine", c)
                },
                56176: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Z: function () {
                            return u
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(59101),
                        s = n(58720);

                    function a(t) {
                        return t.replace(/mso-[a-z-]+:[\s]*[^;]+;/gi, "").replace(/mso-[a-z-]+:[\s]*[^";']+$/gi, "").replace(/border[a-z-]*:[\s]*[^;]+;/gi, "").replace(/([0-9.]+)(pt|cm)/gi, (function (t, e, n) {
                            switch (n.toLowerCase()) {
                                case "pt":
                                    return (1.328 * parseFloat(e)).toFixed(0) + "px";
                                case "cm":
                                    return (.02645833 * parseFloat(e)).toFixed(0) + "px"
                            }
                            return t
                        }))
                    }

                    function u(t) {
                        if (-1 === t.indexOf("<html ")) return t;
                        t = (t = t.substring(t.indexOf("<html "), t.length)).substring(0, t.lastIndexOf("</html>") + 7);
                        var e = o.globalDocument.createElement("iframe");
                        e.style.display = "none", o.globalDocument.body.appendChild(e);
                        var n = "";
                        try {
                            var u = e.contentDocument || (e.contentWindow ? e.contentWindow.document : null);
                            if (u) {
                                u.open(), u.write(t), u.close();
                                try {
                                    for (var c = function (t) {
                                            for (var e = u.styleSheets[t].cssRules, n = function (t) {
                                                    if ("" === e[t].selectorText) return "continue";
                                                    (0, s.$$)(e[t].selectorText, u.body).forEach((function (n) {
                                                        n.style.cssText = a(e[t].style.cssText + ";" + n.style.cssText)
                                                    }))
                                                }, o = 0; e.length > o; o += 1) n(o)
                                        }, l = 0; u.styleSheets.length > l; l += 1) c(l)
                                } catch (t) {
                                    if (!o.IS_PROD) throw t
                                }
                                r.J.each(u.body, (function (t) {
                                    if (r.J.isElement(t)) {
                                        var e = t,
                                            n = e.getAttribute("style");
                                        n && (e.style.cssText = a(n)), e.hasAttribute("style") && !e.getAttribute("style") && e.removeAttribute("style")
                                    }
                                })), n = u.firstChild ? (0, i.Bq)(u.body.innerHTML) : ""
                            }
                        } catch (t) {} finally {
                            r.J.safeRemove(e)
                        }
                        return n && (t = n), (0, i.Bq)(t.replace(/<(\/)?(html|colgroup|col|o:p)[^>]*>/g, "").replace(/<!--[^>]*>/g, ""))
                    }
                },
                56298: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        JW: function () {
                            return b
                        },
                        My: function () {
                            return C
                        },
                        RR: function () {
                            return S
                        },
                        VF: function () {
                            return p
                        },
                        av: function () {
                            return y
                        },
                        ef: function () {
                            return w
                        },
                        fg: function () {
                            return m
                        },
                        w9: function () {
                            return g
                        }
                    });
                    var o = n(65147),
                        r = n(83044),
                        i = n(98253),
                        s = n(12041),
                        a = n(449),
                        u = n(75766),
                        c = n(77402),
                        l = n(17352),
                        f = n(71842),
                        d = n(50025),
                        p = {},
                        h = 1,
                        v = new Set;

                    function g() {
                        function t() {
                            return h += 10 * (Math.random() + 1), Math.round(h).toString(16)
                        }
                        for (var e = t(); v.has(e);) e = t();
                        return v.add(e), e
                    }
                    var m = new c.$,
                        y = {},
                        b = function (t) {
                            Object.keys(t).forEach((function (e) {
                                l.lang[e] ? Object.assign(l.lang[e], t[e]) : l.lang[e] = t[e]
                            }))
                        },
                        _ = new WeakMap;

                    function C(t, e, n, o) {
                        void 0 === n && (n = "div"), void 0 === o && (o = !1);
                        var c = (0, i.K)(e) ? e : e ? (0, u.u)(e.prototype) : "jodit-utils",
                            l = _.get(t) || {},
                            d = c + n,
                            p = (0, s.h)(t) ? t : t.j,
                            h = null;
                        if (!l[d]) {
                            var v = p.c;
                            if (h = w(p.o, p.container, t.od.body), o && (0, r.y)(t) && t.od !== t.ed) {
                                v = t.createInside;
                                var g = "style" === n ? t.ed.head : t.ed.body;
                                h = (0, r.y)(t) && t.o.shadowRoot ? t.o.shadowRoot : g
                            }
                            var m = v.element(n, {
                                className: "jodit jodit-".concat((0, a.k)(c), "-container jodit-box")
                            });
                            m.classList.add("jodit_theme_".concat(p.o.theme || "default")), h.appendChild(m), l[d] = m, t.hookStatus("beforeDestruct", (function () {
                                p.events.off(m), f.J.safeRemove(m), delete l[d], Object.keys(l).length && _.delete(t)
                            })), _.set(t, l), p.events.fire("getContainer", m)
                        }
                        return l[d].classList.remove("jodit_theme_default", "jodit_theme_dark"), l[d].classList.add("jodit_theme_".concat(p.o.theme || "default")), l[d]
                    }

                    function w(t, e, n) {
                        var r, i, s;
                        return null !== (s = null !== (i = null !== (r = t.popupRoot) && void 0 !== r ? r : t.shadowRoot) && void 0 !== i ? i : f.J.closest(e, (function (t) {
                            return f.J.isHTMLElement(t) && (f.J.isTag(t, "dialog") || ["fixed", "absolute"].includes((0, o.css)(t, "position")))
                        }), n)) && void 0 !== s ? s : n
                    }
                    var S = new d.bk
                },
                56701: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(55186),
                        s = n(56298),
                        a = n(65147),
                        u = n(29866),
                        c = n(92032),
                        l = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.currentIndex = 0, e.list = [], e.container = null, e.listBox = null, e.previewBox = null, e.dialog = null, e.paste = function () {
                                    if (e.j.s.focus(), e.j.s.insertHTML(e.list[e.currentIndex]), 0 !== e.currentIndex) {
                                        var t = e.list[0];
                                        e.list[0] = e.list[e.currentIndex], e.list[e.currentIndex] = t
                                    }
                                    e.dialog && e.dialog.close(), e.j.synchronizeValues(), e.j.e.fire("afterPaste")
                                }, e.onKeyDown = function (t) {
                                    var n = e.currentIndex; - 1 !== [r.KEY_UP, r.KEY_DOWN, r.KEY_ENTER].indexOf(t.key) && (t.key === r.KEY_UP && (0 === n ? n = e.list.length - 1 : n -= 1), t.key === r.KEY_DOWN && (n === e.list.length - 1 ? n = 0 : n += 1), t.key !== r.KEY_ENTER ? (n !== e.currentIndex && e.selectIndex(n), t.stopImmediatePropagation(), t.preventDefault()) : e.paste())
                                }, e.selectIndex = function (t) {
                                    e.listBox && (0, a.toArray)(e.listBox.childNodes).forEach((function (n, o) {
                                        n.classList.remove("jodit_active"), t === o && e.previewBox && (n.classList.add("jodit_active"), e.previewBox.innerHTML = e.list[t], n.focus())
                                    })), e.currentIndex = t
                                }, e.showDialog = function () {
                                    2 > e.list.length || (e.dialog || e.createDialog(), e.listBox && (e.listBox.innerHTML = ""), e.previewBox && (e.previewBox.innerHTML = ""), e.list.forEach((function (t, n) {
                                        var o = e.j.c.element("a");
                                        o.textContent = n + 1 + ". " + t.replace((0, r.SPACE_REG_EXP)(), ""), e.j.e.on(o, "keydown", e.onKeyDown), (0, a.attr)(o, "href", "#"), (0, a.attr)(o, "data-index", n.toString()), (0, a.attr)(o, "tab-index", "-1"), e.listBox && e.listBox.appendChild(o)
                                    })), e.dialog && e.dialog.open(), e.j.async.setTimeout((function () {
                                        e.selectIndex(0)
                                    }), 100))
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.createDialog = function () {
                                var t = this;
                                this.dialog = this.j.dlg();
                                var e = (0, c.$n)(this.j, "paste", "Paste", "primary");
                                e.onAction(this.paste);
                                var n = (0, c.$n)(this.j, "", "Cancel");
                                n.onAction(this.dialog.close), this.container = this.j.c.div(), this.container.classList.add("jodit-paste-storage"), this.listBox = this.j.c.div(), this.previewBox = this.j.c.div(), this.container.appendChild(this.listBox), this.container.appendChild(this.previewBox), this.dialog.setHeader(this.j.i18n("Choose Content to Paste")), this.dialog.setContent(this.container), this.dialog.setFooter([e, n]), this.j.e.on(this.listBox, "click dblclick", (function (e) {
                                    var n = e.target;
                                    return i.J.isTag(n, "a") && n.hasAttribute("data-index") && t.selectIndex(parseInt((0, a.attr)(n, "-index") || "0", 10)), "dblclick" === e.type && t.paste(), !1
                                }))
                            }, e.prototype.afterInit = function () {
                                var t = this;
                                this.j.e.off("afterCopy.paste-storage").on("pasteStorageList.paste-storage", (function () {
                                    return t.list.length
                                })).on("afterCopy.paste-storage", (function (e) {
                                    -1 !== t.list.indexOf(e) && t.list.splice(t.list.indexOf(e), 1), t.list.unshift(e), t.list.length > 5 && (t.list.length = 5)
                                })), this.j.registerCommand("showPasteStorage", {
                                    exec: this.showDialog,
                                    hotkeys: ["ctrl+shift+v", "cmd+shift+v"]
                                })
                            }, e.prototype.beforeDestruct = function () {
                                this.dialog && this.dialog.destruct(), this.j.e.off(".paste-storage"), i.J.safeRemove(this.previewBox), i.J.safeRemove(this.listBox), i.J.safeRemove(this.container), this.container = null, this.listBox = null, this.previewBox = null, this.dialog = null, this.list = []
                            }, e
                        }(u.k);
                    s.fg.add("pasteStorage", l)
                },
                57023: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        U: function () {
                            return s
                        },
                        x: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(65147),
                        i = n(36115);

                    function s(t, e) {
                        var n;
                        return e || (e = i.T.defaultOptions.controls), (0, r.isString)(t) ? n = a(t, e) || {
                            name: t,
                            command: t,
                            tooltip: t
                        } : void 0 !== e[(n = (0, o.Cl)({
                            name: "empty"
                        }, (0, r.ConfigFlatten)(t))).name] && (n = (0, o.Cl)((0, o.Cl)({}, (0, r.ConfigFlatten)(e[n.name])), (0, r.ConfigFlatten)(n))), n
                    }

                    function a(t, e) {
                        var n = (0, o.zs)(t.split(/\./), 2),
                            i = n[0],
                            s = n[1],
                            a = e;
                        return null != s ? void 0 !== e[i] && (a = e[i]) : s = i, a[s] ? (0, o.Cl)({
                            name: s
                        }, (0, r.ConfigFlatten)(a[s])) : void 0
                    }
                },
                57032: function (t) {
                    "use strict";
                    t.exports = {
                        "copy-format": "Copiar formato"
                    }
                },
                57362: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.allowResizeX = !1, o.T.prototype.allowResizeY = !0
                },
                58006: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        l: function () {
                            return g
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(17352),
                        s = n(22664),
                        a = n(55186),
                        u = n(56298),
                        c = n(32709),
                        l = n(9823),
                        f = n(97369),
                        d = (n(28712), n(53048)),
                        p = n(77782),
                        h = n(14961),
                        v = n(36115);
                    v.T.prototype.dialog = {
                        namespace: "",
                        extraButtons: [],
                        resizable: !0,
                        draggable: !0,
                        buttons: ["dialog.close"],
                        removeButtons: [],
                        toolbarButtonSize: "middle",
                        zIndex: "inherit"
                    }, v.T.prototype.controls.dialog = {
                        close: {
                            icon: "cancel",
                            exec: function (t) {
                                t.close()
                            }
                        }
                    };
                    var g = function (t) {
                        function e(e) {
                            void 0 === e && (e = {});
                            var o = t.call(this, e) || this;
                            o.destroyAfterClose = !1, o.moved = !1, o.resizable = !1, o.draggable = !1, o.startX = 0, o.startY = 0, o.startPoint = {
                                x: 0,
                                y: 0,
                                w: 0,
                                h: 0
                            }, o.lockSelect = function () {
                                o.setMod("moved", !0)
                            }, o.unlockSelect = function () {
                                o.setMod("moved", !1)
                            }, o.__onResize = function () {
                                o.options && o.o.resizable && !o.moved && o.isOpened && !o.offsetX && !o.offsetY && o.setPosition()
                            }, o.isModal = !1, o.isOpened = !1;
                            var r = o;
                            r.options = (0, f.ConfigProto)(e, (0, f.ConfigProto)(v.T.prototype.dialog, n.defaultOptions)), a.J.safeRemove(r.container);
                            var i = o.getFullElName.bind(o);
                            r.container = o.c.fromHTML('<div class="jodit jodit-dialog '.concat(o.componentName, '">\n\t\t\t\t<div class="').concat(i("overlay"), '"></div>\n\t\t\t\t<div class="').concat(o.getFullElName("panel"), '">\n\t\t\t\t\t<div class="').concat(i("header"), '">\n\t\t\t\t\t\t<div class="').concat(i("header-title"), '"></div>\n\t\t\t\t\t\t<div class="').concat(i("header-toolbar"), '"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="').concat(i("content"), '"></div>\n\t\t\t\t\t<div class="').concat(i("footer"), '"></div>\n\t\t\t\t\t<div class="').concat(i("resizer"), '">').concat(d.In.get("resize_handler"), "</div>\n\t\t\t\t</div>\n\t\t\t</div>")), "rtl" === r.options.direction && (r.container.style.direction = "rtl", r.container.setAttribute("dir", "rtl")), o.o.zIndex && (o.container.style.zIndex = o.o.zIndex.toString()), (0, f.attr)(r.container, "role", "dialog"), Object.defineProperty(r.container, "component", {
                                value: o
                            }), r.setMod("theme", r.o.theme || "default").setMod("resizable", Boolean(r.o.resizable));
                            var s = r.getElm("panel"),
                                c = r.getElm("resizer"),
                                p = r.getElm("header-title"),
                                h = r.getElm("content"),
                                g = r.getElm("footer"),
                                m = r.getElm("header-toolbar");
                            o.dialog = s, o.resizer = c, o.dialogbox_header = p, o.dialogbox_content = h, o.dialogbox_footer = g, o.dialogbox_toolbar = m, (0, f.css)(r.dialog, {
                                maxWidth: r.options.maxWidth,
                                minHeight: r.options.minHeight,
                                minWidth: r.options.minWidth
                            });
                            var y = r.getElm("header");
                            y && r.e.on(y, "pointerdown touchstart", r.__onHeaderMouseDown), r.e.on(r.resizer, "mousedown touchstart", r.__onResizerMouseDown);
                            var b = u.fg.get("fullsize");
                            if ((0, l.Tn)(b) && b(r), o.e.on(r.container, "close_dialog", r.close).on(o.ow, "keydown", o.__onEsc).on(o.ow, "resize", o.__onResize), o.o.closeOnClickOverlay) {
                                var _ = r.getElm("overlay");
                                o.e.on(_, "click", r.close)
                            }
                            return o
                        }
                        var n;
                        return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                            return "Dialog"
                        }, Object.defineProperty(e.prototype, "destination", {
                            get: function () {
                                var t = this.o;
                                return t.popupRoot || t.shadowRoot || this.od.body
                            },
                            enumerable: !1,
                            configurable: !0
                        }), e.prototype.setElements = function (t, e) {
                            var n = this,
                                o = [];
                            (0, c._j)(e).forEach((function (e) {
                                if ((0, l.cy)(e)) {
                                    var r = n.c.div(n.getFullElName("column"));
                                    return o.push(r), t.appendChild(r), n.setElements(r, e)
                                }
                                var i;
                                i = (0, l.Kg)(e) ? n.c.fromHTML(e) : (0, l.kO)(e) ? e.container : e, o.push(i), i.parentNode !== t && t.appendChild(i)
                            })), (0, c.$r)(t.childNodes).forEach((function (e) {
                                -1 === o.indexOf(e) && t.removeChild(e)
                            }))
                        }, e.prototype.__onMouseUp = function () {
                            (this.draggable || this.resizable) && (this.__removeGlobalResizeListeners(), this.draggable = !1, this.resizable = !1, this.unlockSelect(), this.e && (this.__removeGlobalResizeListeners(), this.e.fire(this, "endResize endMove")))
                        }, e.prototype.__onHeaderMouseDown = function (t) {
                            var e = t.target;
                            !this.o.draggable || e && e.nodeName.match(/^(INPUT|SELECT)$/) || (this.draggable = !0, this.startX = t.clientX, this.startY = t.clientY, this.startPoint.x = (0, f.css)(this.dialog, "left"), this.startPoint.y = (0, f.css)(this.dialog, "top"), this.setMaxZIndex(), t.cancelable && t.preventDefault(), this.lockSelect(), this.__addGlobalResizeListeners(), this.e && (this.e.fire(this, "startMove"), this.e.fire("closeAllPopups")))
                        }, e.prototype.__onMouseMove = function (t) {
                            this.draggable && this.o.draggable && (this.setPosition(this.startPoint.x + t.clientX - this.startX, this.startPoint.y + t.clientY - this.startY), this.e && this.e.fire(this, "move", t.clientX - this.startX, t.clientY - this.startY), t.stopImmediatePropagation()), this.resizable && this.o.resizable && (this.setSize(this.startPoint.w + t.clientX - this.startX, this.startPoint.h + t.clientY - this.startY), this.e && this.e.fire(this, "resizeDialog", t.clientX - this.startX, t.clientY - this.startY))
                        }, e.prototype.__onEsc = function (t) {
                            if (this.o.closeOnEsc && this.isOpened && t.key === i.KEY_ESC && !0 !== this.getMod("static")) {
                                var e = this.getMaxZIndexDialog();
                                e ? e.close() : this.close(), t.stopImmediatePropagation()
                            }
                        }, e.prototype.__onResizerMouseDown = function (t) {
                            this.resizable = !0, this.startX = t.clientX, this.startY = t.clientY, this.startPoint.w = this.dialog.offsetWidth, this.startPoint.h = this.dialog.offsetHeight, this.lockSelect(), this.__addGlobalResizeListeners(), this.e && this.e.fire(this, "startResize")
                        }, e.prototype.__addGlobalResizeListeners = function () {
                            var t = this;
                            t.e.on(t.ow, "pointermove touchmove", t.__onMouseMove).on(t.ow, "pointerup touchend", t.__onMouseUp)
                        }, e.prototype.__removeGlobalResizeListeners = function () {
                            var t = this;
                            t.e.off(t.ow, "mousemove pointermove", t.__onMouseMove).off(t.ow, "mouseup pointerup", t.__onMouseUp)
                        }, e.prototype.setSize = function (t, e) {
                            return null == t && (t = this.dialog.offsetWidth), null == e && (e = this.dialog.offsetHeight), (0, f.css)(this.dialog, {
                                width: t,
                                height: e
                            }), this
                        }, e.prototype.calcAutoSize = function () {
                            return this.setSize("auto", "auto"), this.setSize(), this
                        }, e.prototype.setPosition = function (t, e) {
                            var n = this.ow.innerWidth / 2 - this.dialog.offsetWidth / 2,
                                o = this.ow.innerHeight / 2 - this.dialog.offsetHeight / 2;
                            return 0 > n && (n = 0), 0 > o && (o = 0), void 0 !== t && void 0 !== e && (this.offsetX = t, this.offsetY = e, this.moved = Math.abs(t - n) > 100 || Math.abs(e - o) > 100), this.dialog.style.left = (t || n) + "px", this.dialog.style.top = (e || o) + "px", this
                        }, e.prototype.setHeader = function (t) {
                            return this.setElements(this.dialogbox_header, t), this
                        }, e.prototype.setContent = function (t) {
                            return this.setElements(this.dialogbox_content, t), this
                        }, e.prototype.setFooter = function (t) {
                            return this.setElements(this.dialogbox_footer, t), this.setMod("footer", Boolean(t)), this
                        }, e.prototype.getZIndex = function () {
                            return parseInt((0, f.css)(this.container, "zIndex"), 10) || 0
                        }, e.prototype.getMaxZIndexDialog = function () {
                            var t, e, n = 0,
                                o = this;
                            return (0, f.$$)(".jodit-dialog", this.destination).forEach((function (r) {
                                t = r.component, e = parseInt((0, f.css)(r, "zIndex"), 10), t.isOpened && !isNaN(e) && e > n && (o = t, n = e)
                            })), o
                        }, e.prototype.setMaxZIndex = function () {
                            if (!this.getMod("static")) {
                                var t = 20000004,
                                    e = 0;
                                (0, f.$$)(".jodit-dialog", this.destination).forEach((function (n) {
                                    e = parseInt((0, f.css)(n, "zIndex"), 10), t = Math.max(isNaN(e) ? 0 : e, t)
                                })), this.container.style.zIndex = (t + 1).toString()
                            }
                        }, e.prototype.toggleFullSize = function (e) {
                            (0, l.Rd)(e) && (e = !this.getMod("fullsize")), this.setMod("fullsize", e), t.prototype.toggleFullSize.call(this, e)
                        }, e.prototype.open = function (t, e, n, o) {
                            if (u.RR.fire("closeAllPopups hideHelpers"), !1 === this.e.fire(this, "beforeOpen")) return this;
                            (0, l.Lm)(t) && (n = t), (0, l.Lm)(e) && (o = e), this.destroyAfterClose = !0 === n;
                            var r = (0, l.Lm)(t) ? void 0 : t,
                                i = (0, l.Lm)(e) ? void 0 : e;
                            return void 0 !== i && this.setHeader(i), r && this.setContent(r), this.setMod("active", !0), this.isOpened = !0, this.setModal(o), this.destination.appendChild(this.container), !0 !== this.getMod("static") ? (this.setPosition(this.offsetX, this.offsetY), this.setMaxZIndex()) : this.container.style.removeProperty("z-index"), this.o.fullsize && this.toggleFullSize(!0), this.e.fire("afterOpen", this), this
                        }, e.prototype.setModal = function (t) {
                            return this.isModal = Boolean(t), this.setMod("modal", this.isModal), this
                        }, e.prototype.close = function () {
                            if (this.isDestructed || !this.isOpened || !0 === this.getMod("static")) return this;
                            var t = this.e;
                            return !1 === t.fire(this, "beforeClose") || !1 === t.fire("beforeClose", this) || (this.setMod("active", !1), this.isOpened = !1, this.isFullSize && this.toggleFullSize(!1), a.J.safeRemove(this.container), this.__removeGlobalResizeListeners(), t.fire(this, "afterClose"), t.fire(this.ow, "joditCloseDialog"), this.destroyAfterClose && this.destruct()), this
                        }, e.prototype.buildToolbar = function () {
                            this.o.buttons && this.toolbar.build((0, c.uM)(this.o.buttons)).setMod("mode", "header").appendTo(this.dialogbox_toolbar)
                        }, e.prototype.destruct = function () {
                            this.isInDestruct || (this.setStatus(r.f.beforeDestruct), this.isOpened && this.close(), this.events && (this.__removeGlobalResizeListeners(), this.events.off(this.container, "close_dialog", self.close).off(this.ow, "keydown", this.__onEsc).off(this.ow, "resize", this.__onResize)), t.prototype.destruct.call(this))
                        }, (0, o.Cg)([s.autobind], e.prototype, "__onMouseUp", null), (0, o.Cg)([s.autobind], e.prototype, "__onHeaderMouseDown", null), (0, o.Cg)([s.autobind], e.prototype, "__onMouseMove", null), (0, o.Cg)([s.autobind], e.prototype, "__onEsc", null), (0, o.Cg)([s.autobind], e.prototype, "__onResizerMouseDown", null), (0, o.Cg)([s.autobind], e.prototype, "close", null), (0, o.Cg)([(0, s.hook)("ready")], e.prototype, "buildToolbar", null), n = (0, o.Cg)([s.component], e)
                    }(h.T);
                    g.defaultOptions = (0, o.Cl)((0, o.Cl)({}, p.S.defaultOptions), {
                        closeOnClickOverlay: !1,
                        closeOnEsc: !0
                    })
                },
                58157: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(69052);

                    function i(t, e) {
                        try {
                            try {
                                return (0, r.T)(e) ? new e(t) : e
                            } catch (n) {
                                if ((0, r.T)(e) && !e.prototype) return e(t)
                            }
                        } catch (t) {
                            if (!o.IS_PROD) throw t
                        }
                        return null
                    }
                },
                58269: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        T: function () {
                            return a
                        }
                    });
                    var o = n(17352),
                        r = n(56298),
                        i = n(9823),
                        s = n(32291);

                    function a(t, e, n, a, u, c) {
                        if ((0, i.Gp)(a)) try {
                            a.init(t)
                        } catch (t) {
                            if (!o.IS_PROD) throw t
                        }
                        u.set(e, a), c.delete(e), a.hasStyle && (0, s.M)(t, e).catch((function (t) {})), a.styles && ((0, r.My)(t, e, "style").innerHTML = a.styles)
                    }
                },
                58446: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1395 1184q0 13-10 23l-50 50q-10 10-23 10t-23-10l-393-393-393 393q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l466 466q10 10 10 23z"/> </svg>'
                },
                58597: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        z: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(56298),
                        i = n(9823),
                        s = n(84976),
                        a = n(34256),
                        u = function () {
                            function t() {}
                            return t.prototype.dlg = function (t) {
                                var e = (0, r.ef)(this.o, this.container, this.od.body),
                                    n = new a.lG((0, o.Cl)({
                                        language: this.o.language,
                                        shadowRoot: this.o.shadowRoot,
                                        popupRoot: e,
                                        ownerWindow: this.o.ownerWindow,
                                        defaultTimeout: this.o.defaultTimeout,
                                        direction: this.o.direction,
                                        theme: this.o.theme,
                                        globalFullSize: this.o.globalFullSize
                                    }, t));
                                return (0, s.b_)(this, n.container), n.parent = this, n.bindDestruct(this)
                            }, t.prototype.confirm = function (t, e, n) {
                                return t = c(t, this), e = c(e, this), a.pT.call(this.dlg({
                                    closeOnClickOverlay: !0
                                }), t, e, n)
                            }, t.prototype.prompt = function (t, e, n, o, r) {
                                return t = c(t, this), e = c(e, this), o = c(o, this), a.XG.call(this.dlg({
                                    closeOnClickOverlay: !0
                                }), t, e, n, o, r)
                            }, t.prototype.alert = function (t, e, n, o) {
                                return t = c(t, this), e = c(e, this), a.Fc.call(this.dlg({
                                    closeOnClickOverlay: !0
                                }), t, e, n, o)
                            }, t
                        }();

                    function c(t, e) {
                        return (0, i.Kg)(t) && !(0, i.AH)(t) && (t = e.i18n(t)), t
                    }
                },
                58720: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $$: function () {
                            return f
                        },
                        DY: function () {
                            return p
                        },
                        bE: function () {
                            return h
                        },
                        fz: function () {
                            return d
                        },
                        tI: function () {
                            return v
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(42448),
                        s = n(98253),
                        a = n(83260),
                        u = n(97369),
                        c = 1,
                        l = function () {
                            return ++c
                        };

                    function f(t, e) {
                        var n;
                        if (o.IS_ES_NEXT || !/:scope/.test(t) || !o.IS_IE || e && e.nodeType === Node.DOCUMENT_NODE) n = e.querySelectorAll(t);
                        else {
                            var r = e.id,
                                i = r || "_selector_id_" + String(Math.random()).slice(2) + l();
                            t = t.replace(/:scope/g, "#" + i), !r && e.setAttribute("id", i), n = e.parentNode.querySelectorAll(t), r || e.removeAttribute("id")
                        }
                        return [].slice.call(n)
                    }
                    var d = function (t, e) {
                            if (!t || t.nodeType !== Node.ELEMENT_NODE) return "";
                            if (!t.parentNode || e === t) return "";
                            if (t.id) return "//*[@id='" + t.id + "']";
                            var n = [].filter.call(t.parentNode.childNodes, (function (e) {
                                return e.nodeName === t.nodeName
                            }));
                            return d(t.parentNode, e) + "/" + t.nodeName.toLowerCase() + (n.length > 1 ? "[" + ((0, i.$)(n).indexOf(t) + 1) + "]" : "")
                        },
                        p = function (t) {
                            return "container" in t && (t = t.container), f("[ref],[data-ref]", t).reduce((function (t, e) {
                                var n = (0, u.attr)(e, "-ref");
                                return n && (0, s.K)(n) && (t[(0, a.x)(n)] = e, t[n] = e), t
                            }), {})
                        },
                        h = function (t) {
                            if (!r.J.isElement(t)) return null;
                            for (var e = [], n = t; n && n.nodeType === Node.ELEMENT_NODE;) {
                                var o = n.nodeName.toLowerCase();
                                if (n.id) {
                                    e.unshift(o += "#" + n.id);
                                    break
                                }
                                var i = n,
                                    s = 1;
                                do {
                                    (i = i.previousElementSibling) && i.nodeName.toLowerCase() === o && s++
                                } while (i);
                                e.unshift(o += ":nth-of-type(" + s + ")"), n = n.parentNode
                            }
                            return e.join(" > ")
                        };

                    function v(t, e) {
                        var n = t;
                        if ((0, s.K)(t)) try {
                            n = e.querySelector(t)
                        } catch (e) {
                            throw (0, u.error)('String "' + t + '" should be valid HTML selector')
                        }
                        if (!n || "object" != typeof n || !r.J.isElement(n) || !n.cloneNode) throw (0, u.error)('Element "' + t + '" should be string or HTMLElement instance');
                        return n
                    }
                },
                58770: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        F: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(17352),
                        s = n(55186),
                        a = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.__isBlocked = !1, e.__levelOfTransaction = 0, e
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "Snapshot"
                            }, e.equal = function (t, e) {
                                return t.html === e.html && JSON.stringify(t.range) === JSON.stringify(e.range)
                            }, e.countNodesBeforeInParent = function (t) {
                                if (!t.parentNode) return 0;
                                for (var e = t.parentNode.childNodes, n = 0, o = null, r = 0; e.length > r; r += 1) {
                                    if (!o || this.isIgnoredNode(e[r]) || s.J.isText(o) && s.J.isText(e[r]) || (n += 1), e[r] === t) return n;
                                    o = e[r]
                                }
                                return 0
                            }, e.strokeOffset = function (t, e) {
                                for (; s.J.isText(t);) s.J.isText(t = t.previousSibling) && t.nodeValue && (e += t.nodeValue.length);
                                return e
                            }, e.prototype.calcHierarchyLadder = function (t) {
                                var n = [];
                                if (!t || !t.parentNode || !s.J.isOrContains(this.j.editor, t)) return [];
                                for (; t && t !== this.j.editor;) t && !e.isIgnoredNode(t) && n.push(e.countNodesBeforeInParent(t)), t = t.parentNode;
                                return n.reverse()
                            }, e.prototype.getElementByLadder = function (t) {
                                var e, n = this.j.editor;
                                for (e = 0; n && t.length > e; e += 1) n = n.childNodes[t[e]];
                                return n
                            }, Object.defineProperty(e.prototype, "isBlocked", {
                                get: function () {
                                    return this.__isBlocked
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.__block = function (t) {
                                this.__isBlocked = t
                            }, e.prototype.transaction = function (t) {
                                this.__block(!0), this.__levelOfTransaction += 1;
                                try {
                                    t()
                                } catch (t) {
                                    if (!i.IS_PROD) throw t
                                } finally {
                                    this.__levelOfTransaction -= 1, 0 === this.__levelOfTransaction && this.__block(!1)
                                }
                            }, e.prototype.make = function () {
                                var t = {
                                    html: "",
                                    range: {
                                        startContainer: [],
                                        startOffset: 0,
                                        endContainer: [],
                                        endOffset: 0
                                    }
                                };
                                t.html = this.__getCleanedEditorValue(this.j.editor);
                                var n = this.j.s.sel;
                                if (n && n.rangeCount) {
                                    var o = n.getRangeAt(0),
                                        r = this.calcHierarchyLadder(o.startContainer),
                                        i = this.calcHierarchyLadder(o.endContainer),
                                        s = e.strokeOffset(o.startContainer, o.startOffset),
                                        a = e.strokeOffset(o.endContainer, o.endOffset);
                                    r.length || o.startContainer === this.j.editor || (s = 0), i.length || o.endContainer === this.j.editor || (a = 0), t.range = {
                                        startContainer: r,
                                        startOffset: s,
                                        endContainer: i,
                                        endOffset: a
                                    }
                                }
                                return t
                            }, e.prototype.restore = function (t) {
                                var e = this;
                                this.transaction((function () {
                                    var n = e.storeScrollState();
                                    e.__getCleanedEditorValue(e.j.editor) !== t.html && (e.j.value = t.html), e.restoreOnlySelection(t), e.restoreScrollState(n)
                                }))
                            }, e.prototype.storeScrollState = function () {
                                return [this.j.ow.scrollY, this.j.editor.scrollTop]
                            }, e.prototype.restoreScrollState = function (t) {
                                var e = this.j,
                                    n = e.ow;
                                n.scrollTo(n.scrollX, t[0]), e.editor.scrollTop = t[1]
                            }, e.prototype.restoreOnlySelection = function (t) {
                                try {
                                    if (t.range) {
                                        var e = this.j.ed.createRange();
                                        e.setStart(this.getElementByLadder(t.range.startContainer), t.range.startOffset), e.setEnd(this.getElementByLadder(t.range.endContainer), t.range.endOffset), this.j.s.selectRange(e)
                                    }
                                } catch (t) {
                                    this.j.editor.lastChild && this.j.s.setCursorAfter(this.j.editor.lastChild)
                                }
                            }, e.prototype.destruct = function () {
                                this.__block(!1), t.prototype.destruct.call(this)
                            }, e.isIgnoredNode = function (t) {
                                return s.J.isText(t) && !t.nodeValue || s.J.isTemporary(t)
                            }, e.prototype.__getCleanedEditorValue = function (t) {
                                var e = t.cloneNode(!0);
                                return s.J.temporaryList(e).forEach(s.J.unwrap), e.innerHTML
                            }, e
                        }(r.vG)
                },
                58972: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        q: function () {
                            return a
                        }
                    });
                    var o = n(12461),
                        r = n(26150),
                        i = n(38322),
                        s = n(9645);

                    function a(t, e, n, a) {
                        if (e !== t.offsetWidth || n !== t.offsetHeight) {
                            var u = e ? (0, s.n)(e) : null,
                                c = n ? (0, s.n)(n) : null;
                            (0, i.A)(t, {
                                width: u,
                                height: u && a ? null : c
                            }), (0, r.C)(t, "width", u && (0, o.k)(e) && (0, r.C)(t, "width") ? u : null), (0, r.C)(t, "width") && !a || (c = null), (0, r.C)(t, "height", c)
                        }
                    }
                },
                59082: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return !!t.length && !/[^0-9A-Za-z--\w\-_. ]/.test(t) && t.trim().length > 0
                    }
                    n.d(e, {
                        u: function () {
                            return o
                        }
                    })
                },
                59101: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Bq: function () {
                            return r
                        },
                        Gd: function () {
                            return i
                        },
                        gj: function () {
                            return s
                        }
                    });
                    var o = n(17352);

                    function r(t) {
                        return t.replace((0, o.SPACE_REG_EXP_END)(), "").replace((0, o.SPACE_REG_EXP_START)(), "")
                    }

                    function i(t, e) {
                        return t.replace(RegExp("[".concat(e, "]+$")), "").replace(RegExp("^[".concat(e, "]+")), "")
                    }

                    function s(t) {
                        return t.replace((0, o.INVISIBLE_SPACE_REG_EXP_END)(), "").replace((0, o.INVISIBLE_SPACE_REG_EXP_START)(), "")
                    }
                },
                59146: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        D: function () {
                            return s
                        },
                        w: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(17352);

                    function i(t, e) {
                        for (var n = [], i = 2; arguments.length > i; i++) n[i - 2] = arguments[i];
                        return e ? r.globalWindow.setTimeout.apply(r.globalWindow, (0, o.fX)([t, e], (0, o.zs)(n), !1)) : (t.call.apply(t, (0, o.fX)([null], (0, o.zs)(n), !1)), 0)
                    }

                    function s(t) {
                        r.globalWindow.clearTimeout(t)
                    }
                },
                59678: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        b$: function () {
                            return a
                        },
                        iy: function () {
                            return c
                        },
                        n8: function () {
                            return u
                        }
                    });
                    var o = n(12461),
                        r = n(35642),
                        i = n(96768),
                        s = n(449),
                        a = /^(left|top|bottom|right|width|min|max|height|margin|padding|fontsize|font-size)/i;

                    function u(t, e) {
                        return !(0, r.R)(e) && a.test(t) && (0, o.k)(e.toString()) ? parseInt(e.toString(), 10) + "px" : e
                    }

                    function c(t, e) {
                        if ("font-weight" === (0, s.k)(t)) {
                            switch (e.toString().toLowerCase()) {
                                case "700":
                                case "bold":
                                    return 700;
                                case "400":
                                case "normal":
                                    return 400;
                                case "900":
                                case "heavy":
                                    return 900
                            }
                            return (0, o.k)(e) ? Number(e) : e
                        }
                        return /color/i.test(t) && /^rgb/i.test(e.toString()) && (0, i.s)(e.toString()) || e
                    }
                },
                59827: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M448 1536h896v-256h-896v256zm0-640h896v-384h-160q-40 0-68-28t-28-68v-160h-640v640zm1152 64q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128 0v416q0 13-9.5 22.5t-22.5 9.5h-224v160q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-160h-224q-13 0-22.5-9.5t-9.5-22.5v-416q0-79 56.5-135.5t135.5-56.5h64v-544q0-40 28-68t68-28h672q40 0 88 20t76 48l152 152q28 28 48 76t20 88v256h64q79 0 135.5 56.5t56.5 135.5z"/> </svg>'
                },
                59965: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(56298),
                        a = n(71005),
                        u = (n(50974), n(48840)),
                        c = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {}, e.prototype.__onTab = function (t) {
                                if (t.key === r.KEY_TAB && this.__onShift(t.shiftKey)) return !1
                            }, e.prototype.__onCommand = function (t) {
                                if (("indent" === t || "outdent" === t) && this.__onShift("outdent" === t)) return !1
                            }, e.prototype.__onShift = function (t) {
                                var e = (0, u.O)(this.j, t);
                                return e && this.j.e.fire("afterTab", t), e
                            }, e.prototype.beforeDestruct = function (t) {}, (0, o.Cg)([(0, i.watch)(":keydown.tab")], e.prototype, "__onTab", null), (0, o.Cg)([(0, i.watch)(":beforeCommand.tab")], e.prototype, "__onCommand", null), e
                        }(a.k);
                    s.fg.add("tab", c)
                },
                59988: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        _: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n) {
                        var r = o.J.closest(e, o.J.isElement, t.editor);
                        if (!r) return !1;
                        var i = o.J.findNotEmptySibling(r, n);
                        return !(!i || !o.J.isEmpty(i) || (o.J.safeRemove(i), t.s.setCursorBefore(e), 0))
                    }
                },
                60189: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(56298),
                        s = n(29866),
                        a = n(931),
                        u = n(36115),
                        c = n(34045),
                        l = n.n(c),
                        f = n(39199),
                        d = n.n(f);
                    a.I.set("redo", l()).set("undo", d()), u.T.prototype.controls.redo = {
                        mode: r.MODE_SPLIT,
                        isDisabled: function (t) {
                            return !t.history.canRedo()
                        },
                        tooltip: "Redo"
                    }, u.T.prototype.controls.undo = {
                        mode: r.MODE_SPLIT,
                        isDisabled: function (t) {
                            return !t.history.canUndo()
                        },
                        tooltip: "Undo"
                    };
                    var p = function (t) {
                        function e() {
                            var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                            return e.buttons = [{
                                name: "undo",
                                group: "history"
                            }, {
                                name: "redo",
                                group: "history"
                            }], e
                        }
                        return (0, o.C6)(e, t), e.prototype.beforeDestruct = function () {}, e.prototype.afterInit = function (t) {
                            var e = function (e) {
                                return t.history[e](), !1
                            };
                            t.registerCommand("redo", {
                                exec: e,
                                hotkeys: ["ctrl+y", "ctrl+shift+z", "cmd+y", "cmd+shift+z"]
                            }), t.registerCommand("undo", {
                                exec: e,
                                hotkeys: ["ctrl+z", "cmd+z"]
                            })
                        }, e
                    }(s.k);
                    i.fg.add("redoUndo", p)
                },
                60346: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return r
                        }
                    });
                    var o = n(17352),
                        r = function (t) {
                            return "file:" === o.globalWindow.location.protocol && /^\/\//.test(t) && (t = "https:" + t), t
                        }
                },
                60549: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Z: function () {
                            return i
                        }
                    });
                    var o = n(98253),
                        r = n(59101);

                    function i(t) {
                        var e = /([^[]*)\[([^\]]+)]/,
                            n = /[\s]*,[\s]*/,
                            i = /^(.*)[\s]*=[\s]*(.*)$/,
                            s = {};
                        return (0, o.K)(t) ? (t.split(n).map((function (t) {
                            t = (0, r.Bq)(t);
                            var o = e.exec(t),
                                a = {};
                            if (o) {
                                var u = o[2].split(n);
                                o[1] && (u.forEach((function (t) {
                                    t = (0, r.Bq)(t);
                                    var e = i.exec(t);
                                    e ? a[e[1]] = e[2] : a[t] = !0
                                })), s[o[1].toUpperCase()] = a)
                            } else s[t.toUpperCase()] = !0
                        })), s) : !!t && (Object.keys(t).forEach((function (e) {
                            s[e.toUpperCase()] = t[e]
                        })), s)
                    }
                },
                60636: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h896q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-640q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h640q26 0 45 19t19 45z"/> </svg>'
                },
                61001: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        z: function () {
                            return s
                        }
                    });
                    var o = n(71842),
                        r = n(97621),
                        i = n(12043);

                    function s(t, e, n) {
                        var s = n.e.fire("".concat(i.ar, "BeforeWrapList"), i.dj, e, t),
                            a = null != s ? s : o.J.replace(e, "li", n.createInside),
                            u = a.previousElementSibling,
                            c = a.nextElementSibling,
                            l = o.J.isTag(u, t.element) ? u : null;
                        return null != l || (l = o.J.isTag(c, t.element) ? c : null), o.J.isList(l) && (0, r.M6)(l, t.options.attributes) || (l = n.createInside.element(t.element), (0, r.Yx)(t, l, n, i.DI), o.J.before(a, l)), u === l ? o.J.append(l, a) : o.J.prepend(l, a), o.J.isTag(l.nextElementSibling, t.element) && (0, r.Dd)(l, l.nextElementSibling) && (o.J.append(l, Array.from(l.nextElementSibling.childNodes)), o.J.safeRemove(l.nextElementSibling)), n.e.fire("".concat(i.ar, "AfterWrapList"), i.Zk, l, t), l
                    }
                },
                61793: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        K: function () {
                            return l
                        }
                    });
                    var o = n(55186),
                        r = n(98253),
                        i = n(59101),
                        s = n(97369),
                        a = new Set(["div", "p", "br", "h1", "h2", "h3", "h4", "h5", "h6", "hr"]),
                        u = new Set(["script", "style"]),
                        c = new Set(["br", "hr", "input"]);

                    function l(t, e, n) {
                        void 0 === e && (e = document), void 0 === n && (n = null);
                        var f = e.createElement("div");
                        return (0, r.K)(t) ? f.innerHTML = t : f.appendChild(t), (0, s.$$)("*", f).forEach((function (t) {
                            var r = t.parentNode;
                            if (r) {
                                if (n && o.J.isTag(t, n)) {
                                    var i = t.nodeName.toLowerCase(),
                                        s = o.J.isTag(t, c) ? "%%%jodit-single-".concat(i, "%%%") : "%%%jodit-".concat(i, "%%%").concat(l(t.innerHTML, e, n), "%%%/jodit-").concat(i, "%%%");
                                    return o.J.before(t, e.createTextNode(s)), void o.J.safeRemove(t)
                                }
                                if (o.J.isTag(t, u)) o.J.safeRemove(t);
                                else if (o.J.isTag(t, a)) {
                                    var f = t.nextSibling;
                                    o.J.isText(f) && /^\s/.test(f.nodeValue || "") || f && r.insertBefore(e.createTextNode(" "), f)
                                }
                            }
                        })), (0, i.Bq)(f.innerText).replace(/%%%(\/)?jodit(-single)?-([\w\n]+)%%%/g, (function (t, e, n, o) {
                            return "<".concat(e ? "/" : "").concat(o, ">")
                        }))
                    }
                },
                61964: function (t, e, n) {
                    "use strict";
                    var o = n(931),
                        r = n(36115),
                        i = n(81875),
                        s = n.n(i);
                    r.T.prototype.usePopupForSpecialCharacters = !1, r.T.prototype.specialCharacters = ["!", "&quot;", "#", "$", "%", "&amp;", "'", "(", ")", "*", "+", "-", ".", "/", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", ":", ";", "&lt;", "=", "&gt;", "?", "@", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "[", "]", "^", "_", "`", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "{", "|", "}", "~", "&euro;", "&lsquo;", "&rsquo;", "&ldquo;", "&rdquo;", "&ndash;", "&mdash;", "&iexcl;", "&cent;", "&pound;", "&curren;", "&yen;", "&brvbar;", "&sect;", "&uml;", "&copy;", "&ordf;", "&laquo;", "&raquo;", "&not;", "&reg;", "&macr;", "&deg;", "&sup2;", "&sup3;", "&acute;", "&micro;", "&para;", "&middot;", "&cedil;", "&sup1;", "&ordm;", "&frac14;", "&frac12;", "&frac34;", "&iquest;", "&Agrave;", "&Aacute;", "&Acirc;", "&Atilde;", "&Auml;", "&Aring;", "&AElig;", "&Ccedil;", "&Egrave;", "&Eacute;", "&Ecirc;", "&Euml;", "&Igrave;", "&Iacute;", "&Icirc;", "&Iuml;", "&ETH;", "&Ntilde;", "&Ograve;", "&Oacute;", "&Ocirc;", "&Otilde;", "&Ouml;", "&times;", "&Oslash;", "&Ugrave;", "&Uacute;", "&Ucirc;", "&Uuml;", "&Yacute;", "&THORN;", "&szlig;", "&agrave;", "&aacute;", "&acirc;", "&atilde;", "&auml;", "&aring;", "&aelig;", "&ccedil;", "&egrave;", "&eacute;", "&ecirc;", "&euml;", "&igrave;", "&iacute;", "&icirc;", "&iuml;", "&eth;", "&ntilde;", "&ograve;", "&oacute;", "&ocirc;", "&otilde;", "&ouml;", "&divide;", "&oslash;", "&ugrave;", "&uacute;", "&ucirc;", "&uuml;", "&yacute;", "&thorn;", "&yuml;", "&OElig;", "&oelig;", "&#372;", "&#374", "&#373", "&#375;", "&sbquo;", "&#8219;", "&bdquo;", "&hellip;", "&trade;", "&#9658;", "&bull;", "&rarr;", "&rArr;", "&hArr;", "&diams;", "&asymp;"], o.I.set("symbols", s()), r.T.prototype.controls.symbols = {
                        hotkeys: ["ctrl+shift+i", "cmd+shift+i"],
                        tooltip: "Insert Special Character",
                        popup: function (t, e, n) {
                            var o = t.e.fire("generateSpecialCharactersTable.symbols");
                            if (o) {
                                if (t.o.usePopupForSpecialCharacters) {
                                    var r = t.c.div();
                                    return r.classList.add("jodit-symbols"), r.appendChild(o), t.e.on(o, "close_dialog", n), r
                                }
                                t.alert(o, "Select Special Character", void 0, "jodit-symbols").bindDestruct(t);
                                var i = o.querySelector("a");
                                i && i.focus()
                            }
                        }
                    }
                },
                62453: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e) {
                        var n = t;
                        o.J.up(n, (function (t) {
                            t && t.hasChildNodes() && t !== e.editor && (n = t)
                        }), e.editor);
                        var r = o.J.wrapInline(n, e.o.enter, e);
                        if (o.J.isEmpty(r)) {
                            var i = e.createInside.element("br");
                            r.appendChild(i), o.J.before(i, t)
                        }
                        return r
                    }
                },
                62870: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        e: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(22664),
                        s = n(55186),
                        a = n(87906),
                        u = n(75758),
                        c = function (t) {
                            function e(e, n) {
                                var o = t.call(this, e) || this;
                                return o.target = n, o.mods = {}, o.container = e.c.div("jodit-status-bar"), n.appendChild(o.container), o.hide(), o
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "StatusBar"
                            }, e.prototype.hide = function () {
                                this.container.classList.add("jodit_hidden")
                            }, e.prototype.show = function () {
                                this.container.classList.remove("jodit_hidden")
                            }, Object.defineProperty(e.prototype, "isShown", {
                                get: function () {
                                    return !this.container.classList.contains("jodit_hidden")
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.getHeight = function () {
                                var t, e;
                                return null !== (e = null === (t = this.container) || void 0 === t ? void 0 : t.offsetHeight) && void 0 !== e ? e : 0
                            }, e.prototype.findEmpty = function (t) {
                                void 0 === t && (t = !1);
                                for (var e = this.getElms(t ? "item-right" : "item"), n = 0; e.length > n; n += 1)
                                    if (!e[n].innerHTML.trim().length) return e[n]
                            }, e.prototype.append = function (t, e) {
                                var n;
                                void 0 === e && (e = !1);
                                var o = this.findEmpty(e) || this.j.c.div(this.getFullElName("item"));
                                e && o.classList.add(this.getFullElName("item-right")), o.appendChild(t), null === (n = this.container) || void 0 === n || n.appendChild(o), this.j.o.statusbar && this.show(), this.j.e.fire("resize")
                            }, e.prototype.destruct = function () {
                                this.isInDestruct || (this.setStatus(r.f.beforeDestruct), s.J.safeRemove(this.container), t.prototype.destruct.call(this))
                            }, (0, o.Cg)([i.component, (0, i.derive)(u.K, a.O)], e)
                        }(r.vG)
                },
                62994: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Gq: function () {
                            return c
                        },
                        PZ: function () {
                            return l
                        },
                        nW: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(71842),
                        i = n(65147),
                        s = n(49931),
                        a = n(77112),
                        u = n(31859),
                        c = function (t, e, n) {
                            return void 0 === n && (n = "a"), r.J.closest(t, (function (t) {
                                return r.J.isTag(t, n)
                            }), e)
                        },
                        l = function (t, e) {
                            return e[t.dataset.key || ""].item
                        };

                    function f() {
                        var t = this,
                            e = !1,
                            n = (0, a.a)(this),
                            r = this;
                        r.e.on(r.tree.container, "dragstart", (function (t) {
                            var n = c(t.target, r.container);
                            n && r.o.moveFolder && (e = n)
                        })).on(r.tree.container, "drop", (function (n) {
                            if ((r.o.moveFile || r.o.moveFolder) && e) {
                                var o = (0, i.attr)(e, "-path") || "";
                                if (!r.o.moveFolder && e.classList.contains(t.tree.getFullElName("item"))) return !1;
                                if (e.classList.contains(t.files.getFullElName("item")) && (o += (0, i.attr)(e, "-name"), !r.o.moveFile)) return !1;
                                var s = c(n.target, r.container);
                                if (!s) return;
                                r.dataProvider.move(o, (0, i.attr)(s, "-path") || "", (0, i.attr)(s, "-source") || "", e.classList.contains(t.files.getFullElName("item"))).then((function () {
                                    return (0, u.r)(t)
                                })).catch(r.status), e = !1
                            }
                        })).on(r.files.container, "contextmenu", (0, s.A)(r)).on(r.files.container, "click", (function (e) {
                            (0, i.ctrlKey)(e) || (t.state.activeElements = [])
                        })).on(r.files.container, "click", (function (t) {
                            var e = c(t.target, r.container);
                            if (e) {
                                var s = l(e, n);
                                if (s) return r.state.activeElements = (0, i.ctrlKey)(t) ? (0, o.fX)((0, o.fX)([], (0, o.zs)(r.state.activeElements), !1), [s], !1) : [s], t.stopPropagation(), !1
                            }
                        })).on(r.files.container, "dragstart", (function (t) {
                            if (r.o.moveFile) {
                                var n = c(t.target, r.container);
                                if (!n) return;
                                e = n
                            }
                        })).on(r.container, "drop", (function (t) {
                            return t.preventDefault()
                        }))
                    }
                },
                63064: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        F: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(71842),
                        a = n(65147),
                        u = n(53048),
                        c = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                n.selInfo = null, n._currentIndex = 0, n.isOpened = !1;
                                var i = (0, a.refs)(n.container),
                                    s = i.replace,
                                    u = i.cancel,
                                    c = i.next,
                                    l = i.prev,
                                    f = i.replaceBtn,
                                    d = i.current,
                                    p = i.count;
                                return n.queryInput = i.query, n.replaceInput = s, n.closeButton = u, n.replaceButton = f, n.currentBox = d, n.countBox = p, e.e.on(n.closeButton, "pointerdown", (function () {
                                    return n.close(), !1
                                })).on(n.queryInput, "input", (function () {
                                    n.currentIndex = 0
                                })).on(n.queryInput, "pointerdown", (function () {
                                    e.s.isFocused() && (e.s.removeMarkers(), n.selInfo = e.s.save())
                                })).on(n.replaceButton, "pointerdown", (function () {
                                    return e.e.fire(n, "pressReplaceButton"), !1
                                })).on(c, "pointerdown", (function () {
                                    return e.e.fire("searchNext"), !1
                                })).on(l, "pointerdown", (function () {
                                    return e.e.fire("searchPrevious"), !1
                                })).on(n.queryInput, "input", (function () {
                                    n.setMod("empty-query", !(0, a.trim)(n.queryInput.value).length)
                                })).on(n.queryInput, "keydown", n.j.async.debounce((function (t) {
                                    return (0, o.sH)(n, void 0, void 0, (function () {
                                        return (0, o.YH)(this, (function (n) {
                                            switch (n.label) {
                                                case 0:
                                                    return t.key === r.KEY_ENTER ? [3, 1] : [3, 3];
                                                case 1:
                                                    return t.preventDefault(), t.stopImmediatePropagation(), [4, e.e.fire("searchNext")];
                                                case 2:
                                                    return n.sent() && this.close(), [3, 4];
                                                case 3:
                                                    return e.e.fire(this, "needUpdateCounters"), [3, 4];
                                                case 4:
                                                    return [2]
                                            }
                                        }))
                                    }))
                                }), n.j.defaultTimeout)), n
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UISearch"
                            }, e.prototype.render = function () {
                                return '<div>\n\t\t\t<div class="&__box">\n\t\t\t\t<div class="&__inputs">\n\t\t\t\t\t<input data-ref="query" tabindex="0" placeholder="~Search for~" type="text"/>\n\t\t\t\t\t<input data-ref="replace" tabindex="0" placeholder="~Replace with~" type="text"/>\n\t\t\t\t</div>\n\t\t\t\t<div class="&__counts">\n\t\t\t\t\t<span data-ref="counter-box">\n\t\t\t\t\t\t<span data-ref="current">0</span><span>/</span><span data-ref="count">0</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="&__buttons">\n\t\t\t\t\t<button data-ref="next" tabindex="0" type="button">'.concat(u.In.get("angle-down"), '</button>\n\t\t\t\t\t<button data-ref="prev" tabindex="0" type="button">').concat(u.In.get("angle-up"), '</button>\n\t\t\t\t\t<button data-ref="cancel" tabindex="0" type="button">').concat(u.In.get("cancel"), '</button>\n\t\t\t\t\t<button data-ref="replace-btn" tabindex="0" type="button" class="jodit-ui-button">~Replace~</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')
                            }, Object.defineProperty(e.prototype, "currentIndex", {
                                get: function () {
                                    return this._currentIndex
                                },
                                set: function (t) {
                                    this._currentIndex = t, this.currentBox.innerText = t.toString()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "count", {
                                set: function (t) {
                                    this.countBox.innerText = t.toString()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "query", {
                                get: function () {
                                    return this.queryInput.value
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "replace", {
                                get: function () {
                                    return this.replaceInput.value
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.onEditorKeyDown = function (t) {
                                if (this.isOpened) {
                                    var e = this.j;
                                    if (e.getRealMode() === r.MODE_WYSIWYG) switch (t.key) {
                                        case r.KEY_ESC:
                                            this.close();
                                            break;
                                        case r.KEY_F3:
                                            this.queryInput.value && (e.e.fire(t.shiftKey ? "searchPrevious" : "searchNext"), t.preventDefault())
                                    }
                                }
                            }, e.prototype.open = function (t, e, n) {
                                void 0 === n && (n = !1), this.isOpened || (this.j.workplace.appendChild(this.container), this.isOpened = !0), this.calcSticky(this.j.e.fire("getStickyState.sticky") || !1), this.j.e.fire("hidePopup"), this.setMod("replace", n);
                                var o = null != t ? t : (this.j.s.sel || "").toString();
                                o && (this.queryInput.value = o), e && (this.replaceInput.value = e), this.setMod("empty-query", !o.length), this.j.e.fire(this, "needUpdateCounters"), o ? this.queryInput.select() : this.queryInput.focus()
                            }, e.prototype.close = function () {
                                this.isOpened && (this.j.s.restore(), s.J.safeRemove(this.container), this.isOpened = !1, this.j.e.fire(this, "afterClose"))
                            }, e.prototype.calcSticky = function (t) {
                                if (this.isOpened)
                                    if (this.setMod("sticky", t), t) {
                                        var e = (0, a.position)(this.j.toolbarContainer);
                                        (0, a.css)(this.container, {
                                            top: e.top + e.height,
                                            left: e.left + e.width
                                        })
                                    } else(0, a.css)(this.container, {
                                        top: null,
                                        left: null
                                    })
                            }, (0, o.Cg)([(0, i.watch)([":keydown", "queryInput:keydown"])], e.prototype, "onEditorKeyDown", null), (0, o.Cg)([i.autobind], e.prototype, "open", null), (0, o.Cg)([i.autobind], e.prototype, "close", null), (0, o.Cg)([(0, i.watch)(":toggleSticky")], e.prototype, "calcSticky", null), (0, o.Cg)([i.component], e)
                        }(u.D$)
                },
                63400: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.toolbarSticky = !0, o.T.prototype.toolbarDisableStickyForMobile = !0, o.T.prototype.toolbarStickyOffset = 0
                },
                63443: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        f: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = new Set(["table", "tbody", "thead", "tfoot", "tr"]);

                    function s(t, e, n) {
                        if (t.o.cleanHTML.fillEmptyParagraph && r.J.isBlock(e) && r.J.isEmpty(e, o.INSEPARABLE_TAGS) && !r.J.isTag(e, i)) {
                            var s = t.createInside.element("br");
                            return e.appendChild(s), !0
                        }
                        return n
                    }
                },
                63634: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        M: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n) {
                        var r = t.s,
                            i = o.J.closest(e, n, t.editor);
                        i && (r.cursorOnTheRight(i, e) ? o.J.after(i, e) : r.cursorOnTheLeft(i, e) && o.J.before(i, e))
                    }
                },
                63837: function (t) {
                    t.exports.default = {
                        "Type something": "Start writing...",
                        pencil: "Edit",
                        Quadrate: "Square"
                    }
                },
                63915: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        wc: function () {
                            return o.w
                        }
                    }), n(17800), n(2788);
                    var o = n(24834)
                },
                64107: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        t: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e) {
                        return Boolean(o.J.prev(t, (function (t) {
                            return o.J.isBlock(t) || o.J.isImage(t)
                        }), e.editor))
                    }
                },
                64565: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = n(71005),
                        l = n(10274),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.isFragmentFromEditor = !1, e.isCopyMode = !1, e.startDragPoint = {
                                    x: 0,
                                    y: 0
                                }, e.draggable = null, e.bufferRange = null, e.getText = function (t) {
                                    var e = (0, u.getDataTransfer)(t);
                                    return e ? e.getData(r.TEXT_HTML) || e.getData(r.TEXT_PLAIN) : null
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function () {
                                this.j.e.on([window, this.j.ed, this.j.editor], "dragstart.DragAndDrop", this.onDragStart)
                            }, e.prototype.onDragStart = function (t) {
                                var e = t.target;
                                if (this.onDragEnd(), this.isFragmentFromEditor = s.J.isOrContains(this.j.editor, e, !0), this.isCopyMode = !this.isFragmentFromEditor || (0, u.ctrlKey)(t), this.isFragmentFromEditor) {
                                    var n = this.j.s.sel,
                                        o = n && n.rangeCount ? n.getRangeAt(0) : null;
                                    o && (this.bufferRange = o.cloneRange())
                                } else this.bufferRange = null;
                                this.startDragPoint.x = t.clientX, this.startDragPoint.y = t.clientY,
                                    function (t) {
                                        return s.J.isElement(t) && t.classList.contains(l.Q.prototype.getFullElName("item"))
                                    }(e) && (e = e.querySelector("img")), s.J.isTag(e, "img") && (this.draggable = e.cloneNode(!0), (0, u.dataBind)(this.draggable, "target", e)), this.addDragListeners()
                            }, e.prototype.addDragListeners = function () {
                                this.j.e.on("dragover", this.onDrag).on("drop.DragAndDrop", this.onDrop).on(window, "dragend.DragAndDrop drop.DragAndDrop mouseup.DragAndDrop", this.onDragEnd)
                            }, e.prototype.removeDragListeners = function () {
                                this.j.e.off("dragover", this.onDrag).off("drop.DragAndDrop", this.onDrop).off(window, "dragend.DragAndDrop drop.DragAndDrop mouseup.DragAndDrop", this.onDragEnd)
                            }, e.prototype.onDrag = function (t) {
                                this.draggable && (this.j.e.fire("hidePopup"), this.j.s.insertCursorAtPoint(t.clientX, t.clientY), t.preventDefault(), t.stopPropagation())
                            }, e.prototype.onDragEnd = function () {
                                this.draggable && (s.J.safeRemove(this.draggable), this.draggable = null), this.isCopyMode = !1, this.removeDragListeners()
                            }, e.prototype.onDrop = function (t) {
                                if (!t.dataTransfer || !t.dataTransfer.files || !t.dataTransfer.files.length) {
                                    if (!this.isFragmentFromEditor && !this.draggable) return this.j.e.fire("paste", t), t.preventDefault(), t.stopPropagation(), !1;
                                    var e = this.j.s.sel,
                                        n = this.bufferRange || (e && e.rangeCount ? e.getRangeAt(0) : null),
                                        o = this.__getWorkFragment(n, t);
                                    e && e.removeAllRanges(), this.j.s.insertCursorAtPoint(t.clientX, t.clientY), o && this.__insertFragment.call(this, o, n), t.preventDefault(), t.stopPropagation()
                                }
                                this.isFragmentFromEditor = !1, this.removeDragListeners()
                            }, e.prototype.__getWorkFragment = function (t, e) {
                                var n = null;
                                if (!this.draggable && t) n = this.isCopyMode ? t.cloneContents() : t.extractContents();
                                else if (this.draggable)
                                    if (this.isCopyMode) {
                                        var r = (0, o.zs)("1" === (0, u.attr)(this.draggable, "-is-file") ? ["a", "href"] : ["img", "src"], 2),
                                            i = r[0],
                                            s = r[1];
                                        (n = this.j.createInside.element(i)).setAttribute(s, (0, u.attr)(this.draggable, "data-src") || (0, u.attr)(this.draggable, "src") || ""), "a" === i && (n.textContent = (0, u.attr)(n, s) || "")
                                    } else n = (0, u.dataBind)(this.draggable, "target");
                                else this.getText(e) && (n = this.j.createInside.fromHTML(this.getText(e)));
                                return n
                            }, e.prototype.__insertFragment = function (t, e) {
                                this.j.s.insertNode(t, !1, !1), e && t.firstChild && t.lastChild && (e.setStartBefore(t.firstChild), e.setEndAfter(t.lastChild), this.j.s.selectRange(e), this.j.e.fire("synchro")), s.J.isTag(t, "img") && this.j.events && this.j.e.fire("afterInsertImage", t)
                            }, e.prototype.beforeDestruct = function () {
                                this.onDragEnd(), this.j.e.off(window, ".DragAndDrop").off(".DragAndDrop").off([window, this.j.ed, this.j.editor], "dragstart.DragAndDrop", this.onDragStart)
                            }, (0, o.Cg)([i.autobind], e.prototype, "onDragStart", null), (0, o.Cg)([(0, i.throttle)((function (t) {
                                return t.defaultTimeout / 10
                            }))], e.prototype, "onDrag", null), (0, o.Cg)([i.autobind], e.prototype, "onDragEnd", null), (0, o.Cg)([i.autobind], e.prototype, "onDrop", null), e
                        }(c.k);
                    a.fg.add("dragAndDrop", f)
                },
                64567: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        f: function () {
                            return o
                        }
                    });
                    var o = {
                        beforeInit: "beforeInit",
                        ready: "ready",
                        beforeDestruct: "beforeDestruct",
                        destructed: "destructed"
                    }
                },
                64831: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M576 576q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1024 384v448h-1408v-192l320-320 160 160 512-512zm96-704h-1600q-13 0-22.5 9.5t-9.5 22.5v1216q0 13 9.5 22.5t22.5 9.5h1600q13 0 22.5-9.5t9.5-22.5v-1216q0-13-9.5-22.5t-22.5-9.5zm160 32v1216q0 66-47 113t-113 47h-1600q-66 0-113-47t-47-113v-1216q0-66 47-113t113-47h1600q66 0 113 47t47 113z"/> </svg>'
                },
                64890: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        j: function () {
                            return o.j
                        }
                    });
                    var o = n(86302)
                },
                64953: function (t, e, n) {
                    "use strict";
                    var o = n(55186),
                        r = n(931),
                        i = n(36115),
                        s = n(95032),
                        a = n.n(s),
                        u = n(73533),
                        c = n.n(u),
                        l = n(21329);
                    i.T.prototype.link = {
                        formTemplate: l.B,
                        followOnDblClick: !1,
                        processVideoLink: !0,
                        processPastedLink: !0,
                        noFollowCheckbox: !0,
                        openInNewTabCheckbox: !0,
                        modeClassName: "input",
                        selectMultipleClassName: !0,
                        preventReadOnlyNavigation: !0,
                        selectSizeClassName: 3,
                        selectOptionsClassName: [],
                        hotkeys: ["ctrl+k", "cmd+k"]
                    }, r.I.set("link", a()).set("unlink", c()), i.T.prototype.controls.unlink = {
                        exec: function (t, e) {
                            var n = o.J.closest(e, "a", t.editor);
                            n && o.J.unwrap(n), t.synchronizeValues(), t.e.fire("hidePopup")
                        },
                        tooltip: "Unlink"
                    }, i.T.prototype.controls.link = {
                        isActive: function (t) {
                            var e = t.s.current();
                            return Boolean(e && o.J.closest(e, "a", t.editor))
                        },
                        popup: function (t, e, n) {
                            return t.e.fire("generateLinkForm.link", e, n)
                        },
                        tags: ["a"],
                        tooltip: "Insert link"
                    }
                },
                65147: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        CamelCaseToKebabCase: function () {
                            return l.N
                        },
                        NUMBER_FIELDS_REG: function () {
                            return u.b$
                        },
                        applyStyles: function () {
                            return a.ZM
                        },
                        asArray: function () {
                            return o._j
                        },
                        camelCase: function () {
                            return l.xQ
                        },
                        cleanFromWord: function () {
                            return a.wE
                        },
                        clearTimeout: function () {
                            return r.D
                        },
                        colorToHex: function () {
                            return s.s
                        },
                        fuzzySearchIndex: function () {
                            return l.Hp
                        },
                        getContentWidth: function () {
                            return c.y6
                        },
                        getScrollParent: function () {
                            return c.mH
                        },
                        hasBrowserColorPicker: function () {
                            return i.kC
                        },
                        hasContainer: function () {
                            return i.kO
                        },
                        htmlspecialchars: function () {
                            return a.Gq
                        },
                        i18n: function () {
                            return l.Ru
                        },
                        innerWidth: function () {
                            return c.xM
                        },
                        isAbortError: function () {
                            return i.zf
                        },
                        isArray: function () {
                            return i.cy
                        },
                        isBoolean: function () {
                            return i.Lm
                        },
                        isDestructable: function () {
                            return i.pV
                        },
                        isEqual: function () {
                            return i.n4
                        },
                        isFastEqual: function () {
                            return i.P5
                        },
                        isFunction: function () {
                            return i.Tn
                        },
                        isHTML: function () {
                            return i.AH
                        },
                        isHtmlFromWord: function () {
                            return i.CE
                        },
                        isInitable: function () {
                            return i.Gp
                        },
                        isInt: function () {
                            return i.E6
                        },
                        isJoditObject: function () {
                            return i.y0
                        },
                        isLicense: function () {
                            return i.Mj
                        },
                        isMarker: function () {
                            return i.rg
                        },
                        isNativeFunction: function () {
                            return i.a3
                        },
                        isNumber: function () {
                            return i.Et
                        },
                        isNumeric: function () {
                            return i.kf
                        },
                        isPlainObject: function () {
                            return i.Qd
                        },
                        isPromise: function () {
                            return i.yL
                        },
                        isSet: function () {
                            return i.vM
                        },
                        isString: function () {
                            return i.Kg
                        },
                        isStringArray: function () {
                            return i.Bo
                        },
                        isURL: function () {
                            return i.mv
                        },
                        isValidName: function () {
                            return i.uV
                        },
                        isViewObject: function () {
                            return i.hH
                        },
                        isVoid: function () {
                            return i.Rd
                        },
                        isWindow: function () {
                            return i.l6
                        },
                        kebabCase: function () {
                            return l.kW
                        },
                        nl2br: function () {
                            return a.HA
                        },
                        normalizeColor: function () {
                            return u.$2
                        },
                        normalizeCssNumericValue: function () {
                            return u.n8
                        },
                        normalizeCssValue: function () {
                            return u.iy
                        },
                        normalizeKeyAliases: function () {
                            return u.jB
                        },
                        normalizeLicense: function () {
                            return u.f
                        },
                        normalizePath: function () {
                            return u.Fd
                        },
                        normalizeRelativePath: function () {
                            return u.Vd
                        },
                        normalizeSize: function () {
                            return u.rn
                        },
                        normalizeUrl: function () {
                            return u.l2
                        },
                        offset: function () {
                            return c.cY
                        },
                        position: function () {
                            return c.G1
                        },
                        safeHTML: function () {
                            return a.t_
                        },
                        sanitizeHTMLElement: function () {
                            return a.vn
                        },
                        setTimeout: function () {
                            return r.w
                        },
                        size: function () {
                            return c.Ej
                        },
                        splitArray: function () {
                            return o.uM
                        },
                        sprintf: function () {
                            return l.nv
                        },
                        stringify: function () {
                            return l.As
                        },
                        stripTags: function () {
                            return a.Kq
                        },
                        toArray: function () {
                            return o.$r
                        },
                        trim: function () {
                            return l.Bq
                        },
                        trimChars: function () {
                            return l.Gd
                        },
                        trimInv: function () {
                            return l.gj
                        },
                        ucfirst: function () {
                            return l.Z2
                        }
                    });
                    var o = n(32709),
                        r = n(89044),
                        i = n(9823),
                        s = n(93495),
                        a = n(16113),
                        u = n(65499),
                        c = n(34125),
                        l = n(6589),
                        f = n(97369),
                        d = {};
                    for (var p in f) 0 > ["default", "asArray", "splitArray", "toArray", "clearTimeout", "setTimeout", "hasBrowserColorPicker", "hasContainer", "isAbortError", "isArray", "isBoolean", "isDestructable", "isEqual", "isFastEqual", "isFunction", "isHTML", "isHtmlFromWord", "isInitable", "isInt", "isJoditObject", "isLicense", "isMarker", "isNativeFunction", "isNumber", "isNumeric", "isPlainObject", "isPromise", "isSet", "isString", "isStringArray", "isURL", "isValidName", "isViewObject", "isVoid", "isWindow", "colorToHex", "applyStyles", "cleanFromWord", "htmlspecialchars", "nl2br", "safeHTML", "sanitizeHTMLElement", "stripTags", "NUMBER_FIELDS_REG", "normalizeColor", "normalizeCssNumericValue", "normalizeCssValue", "normalizeKeyAliases", "normalizeLicense", "normalizePath", "normalizeRelativePath", "normalizeSize", "normalizeUrl", "getContentWidth", "getScrollParent", "innerWidth", "offset", "position", "size", "CamelCaseToKebabCase", "camelCase", "fuzzySearchIndex", "i18n", "kebabCase", "sprintf", "stringify", "trim", "trimChars", "trimInv", "ucfirst"].indexOf(p) && (d[p] = function (t) {
                        return f[t]
                    }.bind(0, p));
                    n.d(e, d)
                },
                65199: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(55186),
                        s = n(56298),
                        a = n(29866),
                        u = (n(27195), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.charCounter = null, e.wordCounter = null, e.reInit = function () {
                                    e.j.o.showCharsCounter && e.charCounter && e.j.statusbar.append(e.charCounter, !0), e.j.o.showWordsCounter && e.wordCounter && e.j.statusbar.append(e.wordCounter, !0), e.j.e.off("change keyup", e.calc).on("change keyup", e.calc), e.calc()
                                }, e.calc = e.j.async.throttle((function () {
                                    var t, n = e.j.text;
                                    e.j.o.showCharsCounter && e.charCounter && (t = e.j.o.countHTMLChars ? e.j.value : e.j.o.countTextSpaces ? n.replace((0, r.INVISIBLE_SPACE_REG_EXP)(), "").replace(/[\r\n]/g, "") : n.replace((0, r.SPACE_REG_EXP)(), ""), e.charCounter.textContent = e.j.i18n("Chars: %d", t.length));
                                    e.j.o.showWordsCounter && e.wordCounter && (e.wordCounter.textContent = e.j.i18n("Words: %d", n.replace((0, r.INVISIBLE_SPACE_REG_EXP)(), "").split((0, r.SPACE_REG_EXP)()).filter((function (t) {
                                        return t.length
                                    })).length))
                                }), e.j.defaultTimeout), e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function () {
                                this.charCounter = this.j.c.span(), this.wordCounter = this.j.c.span(), this.j.e.on("afterInit changePlace afterAddPlace", this.reInit), this.reInit()
                            }, e.prototype.beforeDestruct = function () {
                                i.J.safeRemove(this.charCounter), i.J.safeRemove(this.wordCounter), this.j.e.off("afterInit changePlace afterAddPlace", this.reInit), this.charCounter = null, this.wordCounter = null
                            }, e
                        }(a.k));
                    s.fg.add("stat", u)
                },
                65499: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $2: function () {
                            return o.$
                        },
                        Fd: function () {
                            return a.F
                        },
                        Vd: function () {
                            return u.V
                        },
                        b$: function () {
                            return r.b$
                        },
                        f: function () {
                            return s.f
                        },
                        iy: function () {
                            return r.iy
                        },
                        jB: function () {
                            return i.j
                        },
                        l2: function () {
                            return l.l
                        },
                        n8: function () {
                            return r.n8
                        },
                        rn: function () {
                            return c.r
                        }
                    });
                    var o = n(73446),
                        r = n(59678),
                        i = n(74995),
                        s = n(31138),
                        a = n(92998),
                        u = n(13265),
                        c = n(7920),
                        l = n(39344)
                },
                65717: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        T: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                        var e = navigator.userAgent.toLowerCase(),
                            n = /(firefox)[\s/]([\w.]+)/.exec(e) || /(chrome)[\s/]([\w.]+)/.exec(e) || /(webkit)[\s/]([\w.]+)/.exec(e) || /(opera)(?:.*version)[\s/]([\w.]+)/.exec(e) || /(msie)[\s]([\w.]+)/.exec(e) || /(trident)\/([\w.]+)/.exec(e) || 0 > e.indexOf("compatible") || [];
                        return "version" === t ? n[2] : "webkit" === t ? "chrome" === n[1] || "webkit" === n[1] : "ff" === t ? "firefox" === n[1] : "msie" === t ? "trident" === n[1] || "msie" === n[1] : n[1] === t
                    }
                },
                66180: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        B: function () {
                            return o
                        }
                    });
                    var o = function () {
                        function t(t) {
                            this.size = t, this.commands = [], this.stackPosition = -1
                        }
                        return Object.defineProperty(t.prototype, "length", {
                            get: function () {
                                return this.commands.length
                            },
                            enumerable: !1,
                            configurable: !0
                        }), t.prototype.clearRedo = function () {
                            this.commands.length = this.stackPosition + 1
                        }, t.prototype.clear = function () {
                            this.commands.length = 0, this.stackPosition = -1
                        }, t.prototype.push = function (t) {
                            this.clearRedo(), this.commands.push(t), this.stackPosition += 1, this.commands.length > this.size && (this.commands.shift(), this.stackPosition -= 1)
                        }, t.prototype.replace = function (t) {
                            this.commands[this.stackPosition] = t
                        }, t.prototype.current = function () {
                            return this.commands[this.stackPosition]
                        }, t.prototype.undo = function () {
                            return !!this.canUndo() && (this.commands[this.stackPosition] && this.commands[this.stackPosition].undo(), this.stackPosition -= 1, !0)
                        }, t.prototype.redo = function () {
                            return !!this.canRedo() && (this.stackPosition += 1, this.commands[this.stackPosition] && this.commands[this.stackPosition].redo(), !0)
                        }, t.prototype.canUndo = function () {
                            return this.stackPosition >= 0
                        }, t.prototype.canRedo = function () {
                            return this.commands.length - 1 > this.stackPosition
                        }, t
                    }()
                },
                66547: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M896 960v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45zm755-672q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23z"/> </svg>'
                },
                66927: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        N: function () {
                            return f
                        },
                        w: function () {
                            return d
                        }
                    });
                    var o = n(31635),
                        r = n(64567),
                        i = n(32332),
                        s = n(42589),
                        a = n(69052),
                        u = n(25376),
                        c = n(12041),
                        l = n(50156);

                    function f(t, e) {
                        var n;
                        do {
                            n = Object.getOwnPropertyDescriptor(t, e), t = Object.getPrototypeOf(t)
                        } while (!n && t);
                        return n
                    }

                    function d(t, e) {
                        return function (n, d) {
                            var p;
                            if (!(0, a.T)(n[d])) throw (0, l.z3)("Handler must be a Function");
                            var h = null === (p = null == e ? void 0 : e.immediately) || void 0 === p || p,
                                v = null == e ? void 0 : e.context,
                                g = function (e) {
                                    var r = (0, c.h)(e) ? e : e.jodit,
                                        l = function (t) {
                                            for (var n, r = [], i = 1; arguments.length > i; i++) r[i - 1] = arguments[i];
                                            if (!e.isInDestruct) return (n = e)[d].apply(n, (0, o.fX)([t], (0, o.zs)(r), !1))
                                        };
                                    h || (l = e.async.microDebounce(l, !0)), (0, s.u)(t).forEach((function (t) {
                                        if (/:/.test(t)) {
                                            var s = (0, o.zs)(t.split(":"), 2),
                                                c = s[0],
                                                d = s[1],
                                                p = v;
                                            return c.length && (p = e.get(c)), (0, a.T)(p) && (p = p(e)), r.events.on(p || e, d, l), p || r.events.on(d, l), void e.hookStatus("beforeDestruct", (function () {
                                                r.events.off(p || e, d, l).off(d, l)
                                            }))
                                        }
                                        var h = t.split("."),
                                            g = (0, o.zs)(h, 1)[0],
                                            m = h.slice(1),
                                            y = e[g];
                                        (0, u.Q)(y) && (0, i.s)(y).on("change.".concat(m.join(".")), l);
                                        var b = f(n, g);
                                        Object.defineProperty(e, g, {
                                            configurable: !0,
                                            set: function (t) {
                                                var n = y;
                                                n !== t && (y = t, b && b.set && b.set.call(e, t), (0, u.Q)(y) && (y = (0, i.s)(y)).on("change.".concat(m.join(".")), l), l(g, n, y))
                                            },
                                            get: function () {
                                                return b && b.get ? b.get.call(e) : y
                                            }
                                        })
                                    }))
                                };
                            (0, a.T)(n.hookStatus) ? n.hookStatus(r.f.ready, g): g(n)
                        }
                    }
                },
                67176: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M352 832q0 14-9 23l-288 288q-9 9-23 9-13 0-22.5-9.5t-9.5-22.5v-576q0-13 9.5-22.5t22.5-9.5q14 0 23 9l288 288q9 9 9 23zm1440 480v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z"/> </svg>'
                },
                67335: function (t, e, n) {
                    "use strict";
                    var o = n(55186),
                        r = n(56298),
                        i = n(36115),
                        s = n(16116);
                    i.T.prototype.controls.file = {
                        popup: function (t, e, n) {
                            var r = function (e, n) {
                                    void 0 === n && (n = ""), t.s.insertNode(t.createInside.fromHTML('<a href="'.concat(e, '" title="').concat(n, '">').concat(n || e, "</a>")))
                                },
                                i = null;
                            return e && (o.J.isTag(e, "a") || o.J.closest(e, "a", t.editor)) && (i = o.J.isTag(e, "a") ? e : o.J.closest(e, "a", t.editor)), (0, s.kG)(t, {
                                filebrowser: function (t) {
                                    t.files && t.files.forEach((function (e) {
                                        return r(t.baseurl + e)
                                    })), n()
                                },
                                upload: !0,
                                url: function (t, e) {
                                    i ? (i.setAttribute("href", t), i.setAttribute("title", e)) : r(t, e), n()
                                }
                            }, i, n, !1)
                        },
                        tags: ["a"],
                        tooltip: "Insert file"
                    }, r.fg.add("file", (function (t) {
                        t.registerButton({
                            name: "file",
                            group: "media"
                        })
                    }))
                },
                67400: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        B: function () {
                            return i
                        },
                        f: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = console;

                    function i(t, e, n) {
                        return void 0 === e && (e = [""]), void 0 === n && (n = null),
                            function () {
                                for (var i = [], s = 0; arguments.length > s; s++) i[s] = arguments[s];
                                return r.warn('Method "'.concat(e[0], '" deprecated.') + (e[1] ? ' Use "'.concat(e[1], '" instead') : "")), t.call.apply(t, (0, o.fX)([n], (0, o.zs)(i), !1))
                            }
                    }
                },
                67431: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        u: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(55186);

                    function i(t, e, n, i, s, a) {
                        if (a === e || !r.J.isText(e) || null == e.nodeValue) return n;
                        if (!(0, o.INVISIBLE_SPACE_REG_EXP)().test(e.nodeValue)) return n;
                        var u = r.J.furthest(a, r.J.isBlock, t.editor);
                        return !u || r.J.isOrContains(u, e) ? n : (e.nodeValue = e.nodeValue.replace((0, o.INVISIBLE_SPACE_REG_EXP)(), ""), e === a && t.s.isCollapsed() && t.s.setCursorAfter(e), e.nodeValue || r.J.safeRemove(e), !0)
                    }
                },
                67447: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M576 1376v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm0-384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm-512-768v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm-512-768v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm0-384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm128-320v1088q0 66-47 113t-113 47h-1344q-66 0-113-47t-47-113v-1088q0-66 47-113t113-47h1344q66 0 113 47t47 113z"/> </svg>'
                },
                67915: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.imageProcessor = {
                        replaceDataURIToBlobIdInView: !0
                    }
                },
                67975: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        H: function () {
                            return r
                        }
                    });
                    var o = n(17352);

                    function r(t, e, n, r) {
                        void 0 === n && (n = 0), void 0 === r && (r = 1);
                        var i = 0,
                            s = 0,
                            a = -1,
                            u = 0,
                            c = 0;
                        for (s = n; t.length > i && e.length > s;) t[i].toLowerCase() === e[s].toLowerCase() ? (i++, u++, c = 0, -1 === a && (a = s)) : i > 0 && (r > c || e[s] === o.INVISIBLE_SPACE ? (c++, u++) : (i = 0, a = -1, u = 0, c = 0, s--)), s++;
                        return i === t.length ? [a, u] : [-1, 0]
                    }
                },
                67986: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(71842),
                        i = n(59101),
                        s = n(38322),
                        a = n(931),
                        u = n(36115),
                        c = n(48842),
                        l = n.n(c),
                        f = n(25501),
                        d = n.n(f);
                    u.T.prototype.defaultFontSizePoints = "px", a.I.set("font", l()).set("fontsize", d()), u.T.prototype.controls.fontsize = {
                        command: "fontsize",
                        data: {
                            cssRule: "font-size",
                            normalise: function (t, e) {
                                return /pt$/i.test(t) && "pt" === e.o.defaultFontSizePoints ? t.replace(/pt$/i, "") : t
                            }
                        },
                        list: [8, 9, 10, 11, 12, 14, 16, 18, 24, 30, 32, 34, 36, 48, 60, 72, 96],
                        textTemplate: function (t, e) {
                            return e + t.o.defaultFontSizePoints
                        },
                        childTemplate: function (t, e, n) {
                            return "".concat(n).concat(t.o.defaultFontSizePoints)
                        },
                        tooltip: "Font size",
                        value: function (t, e) {
                            var n, o = t.s.current();
                            if (o) {
                                var i = r.J.closest(o, r.J.isElement, t.editor);
                                if (i) {
                                    var a = (null === (n = e.control.data) || void 0 === n ? void 0 : n.cssRule) || "font-size";
                                    return (0, s.A)(i, a).toString()
                                }
                            }
                        },
                        isChildActive: function (t, e) {
                            var n, o, r = e.state.value,
                                i = null !== (o = null === (n = e.control.data) || void 0 === n ? void 0 : n.normalize) && void 0 !== o ? o : function (t) {
                                    return t
                                };
                            return Boolean(r && e.control.args && i(e.control.args[0].toString()) === i(r.toString()))
                        },
                        isActive: function (t, e) {
                            var n, o, r = e.state.value;
                            if (!r) return !1;
                            var i = null !== (o = null === (n = e.control.data) || void 0 === n ? void 0 : n.normalize) && void 0 !== o ? o : function (t) {
                                    return t
                                },
                                s = e.control.data.cacheListSet;
                            if (!s) {
                                var a = Object.keys(e.control.list).map(i);
                                s = new Set(a), e.control.data.cacheListSet = s
                            }
                            return s.has(i(r.toString()))
                        }
                    }, u.T.prototype.controls.font = (0, o.Cl)((0, o.Cl)({}, u.T.prototype.controls.fontsize), {
                        command: "fontname",
                        textTemplate: function (t, e) {
                            var n = (0, o.zs)(e.split(","), 1);
                            return (0, i.Gd)(n[0], "\"'")
                        },
                        list: {
                            "": "Default",
                            "Arial, Helvetica, sans-serif": "Arial",
                            "'Courier New', Courier, monospace": "Courier New",
                            "Georgia, Palatino, serif": "Georgia",
                            "'Lucida Sans Unicode', 'Lucida Grande', sans-serif": "Lucida Sans Unicode",
                            "Tahoma, Geneva, sans-serif": "Tahoma",
                            "'Times New Roman', Times, serif": "Times New Roman",
                            "'Trebuchet MS', Helvetica, sans-serif": "Trebuchet MS",
                            "Helvetica, sans-serif": "Helvetica",
                            "Impact, Charcoal, sans-serif": "Impact",
                            "Verdana, Geneva, sans-serif": "Verdana"
                        },
                        childTemplate: function (t, e, n) {
                            var o = !1;
                            try {
                                o = -1 === e.indexOf("dings") && document.fonts.check("16px ".concat(e), n)
                            } catch (t) {}
                            return '<span data-style="'.concat(e, '" style="').concat(o ? "font-family: ".concat(e, "!important;") : "", '">').concat(n, "</span>")
                        },
                        data: {
                            cssRule: "font-family",
                            normalize: function (t) {
                                return t.toLowerCase().replace(/['"]+/g, "").replace(/[^a-z0-9-]+/g, ",")
                            }
                        },
                        tooltip: "Font family"
                    })
                },
                68752: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Y: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = n(97369),
                        s = function (t) {
                            function e(e, n, o) {
                                void 0 === o && (o = {
                                    align: "left"
                                });
                                var r = t.call(this, e, n) || this;
                                return r.options = o, r.setMod("align", r.options.align || "left"), r.setMod("width", r.options.width || ""), r.options.mod && r.setMod(r.options.mod, !0), r.options.className && r.container.classList.add(r.options.className), (0, i.attr)(r.container, "data-ref", o.ref), (0, i.attr)(r.container, "ref", o.ref), r
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIBlock"
                            }, (0, o.Cg)([r.s], e)
                        }(n(6455).U)
                },
                69052: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return "function" == typeof t
                    }
                    n.d(e, {
                        T: function () {
                            return o
                        }
                    })
                },
                69077: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(56298),
                        s = n(2461),
                        a = n(38322),
                        u = n(29866),
                        c = (n(78134), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.__resizeWorkspaces = e.j.async.debounce(e.__resizeWorkspaceImd, e.j.defaultTimeout, !0), e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                t.e.on("setHeight.size", this.__setHeight).on("setWidth.size", this.__setWidth).on("afterInit.size changePlace.size", this.__initialize, {
                                    top: !0
                                }).on(t.ow, "load.size", this.__resizeWorkspaces).on("afterInit.size resize.size afterUpdateToolbar.size scroll.size afterResize.size", this.__resizeWorkspaces).on("toggleFullSize.size toggleToolbar.size", this.__resizeWorkspaceImd), this.__initialize()
                            }, e.prototype.__initialize = function () {
                                var t = this.j;
                                if (!t.o.inline) {
                                    var e = t.o.height;
                                    if (t.o.saveHeightInStorage && "auto" !== e) {
                                        var n = t.storage.get("height");
                                        n && (e = n)
                                    }(0, a.A)(t.editor, {
                                        minHeight: "100%"
                                    }), (0, a.A)(t.container, {
                                        minHeight: t.o.minHeight,
                                        maxHeight: t.o.maxHeight,
                                        minWidth: t.o.minWidth,
                                        maxWidth: t.o.maxWidth
                                    }), t.isFullSize || (this.__setHeight(e), this.__setWidth(t.o.width))
                                }
                            }, e.prototype.__setHeight = function (t) {
                                var e = this.j.container,
                                    n = e.clientHeight,
                                    o = e.clientWidth;
                                if ((0, s.E)(t)) {
                                    var r = this.j.o,
                                        i = r.minHeight,
                                        u = r.maxHeight;
                                    (0, s.E)(i) && i > t && (t = i), (0, s.E)(u) && t > u && (t = u)
                                }(0, a.A)(this.j.container, "height", t), this.j.o.saveHeightInStorage && this.j.storage.set("height", t), this.__resizeWorkspaceImd({
                                    clientHeight: n,
                                    clientWidth: o
                                })
                            }, e.prototype.__setWidth = function (t) {
                                var e = this.j.container,
                                    n = e.clientHeight,
                                    o = e.clientWidth;
                                if ((0, s.E)(t)) {
                                    var r = this.j.o,
                                        i = r.minWidth,
                                        u = r.maxWidth;
                                    (0, s.E)(i) && i > t && (t = i), (0, s.E)(u) && t > u && (t = u)
                                }(0, a.A)(this.j.container, "width", t), this.__resizeWorkspaceImd({
                                    clientHeight: n,
                                    clientWidth: o
                                })
                            }, e.prototype.__getNotWorkHeight = function () {
                                var t, e;
                                return ((null === (t = this.j.toolbarContainer) || void 0 === t ? void 0 : t.offsetHeight) || 0) + ((null === (e = this.j.statusbar) || void 0 === e ? void 0 : e.getHeight()) || 0) + 2
                            }, e.prototype.__resizeWorkspaceImd = function (t) {
                                var e = void 0 === t ? this.j.container : t,
                                    n = e.clientHeight,
                                    o = e.clientWidth;
                                if (this.j && !this.j.isDestructed && this.j.o && !this.j.o.inline && this.j.container && this.j.container.parentNode) {
                                    var r = ((0, a.A)(this.j.container, "minHeight") || 0) - this.__getNotWorkHeight();
                                    if ((0, s.E)(r) && r > 0 && ([this.j.workplace, this.j.iframe, this.j.editor].map((function (t) {
                                            t && (0, a.A)(t, "minHeight", r)
                                        })), this.j.e.fire("setMinHeight", r)), (0, s.E)(this.j.o.maxHeight)) {
                                        var i = this.j.o.maxHeight - this.__getNotWorkHeight();
                                        [this.j.workplace, this.j.iframe, this.j.editor].map((function (t) {
                                            t && (0, a.A)(t, "maxHeight", i)
                                        })), this.j.e.fire("setMaxHeight", i)
                                    }
                                    this.j.container && (0, a.A)(this.j.workplace, "height", "auto" !== this.j.o.height || this.j.isFullSize ? this.j.container.offsetHeight - this.__getNotWorkHeight() : "auto");
                                    var u = this.j.container;
                                    n === u.clientHeight && o === u.clientWidth || this.j.e.fire(this.j, "resize")
                                }
                            }, e.prototype.beforeDestruct = function (t) {
                                t.e.off(t.ow, "load.size", this.__resizeWorkspaces).off(".size")
                            }, (0, o.Cg)([(0, r.throttle)()], e.prototype, "__initialize", null), (0, o.Cg)([r.autobind], e.prototype, "__resizeWorkspaceImd", null), (0, o.Cg)([r.autobind], e)
                        }(u.k));
                    i.fg.add("size", c)
                },
                69198: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        t: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(55186),
                        s = n(42448),
                        a = n(97369),
                        u = n(29780),
                        c = n(84103),
                        l = n(931),
                        f = function (t) {
                            function e(e, r) {
                                var i = t.call(this, e, r) || this;
                                return i.label = i.j.c.span(i.getFullElName("label")), i.icon = i.j.c.span(i.getFullElName("icon")), i.clearButton = i.j.c.span(i.getFullElName("clear"), l.I.get("cancel")), i.state = (0, o.Cl)({}, n.defaultState), i.__errorBox = i.j.c.span(i.getFullElName("error")), i.validators = new Set([]), void 0 !== (null == r ? void 0 : r.value) && (r.value = r.value.toString()), Object.assign(i.state, r), void 0 !== i.state.clearButton && (i.j.e.on(i.clearButton, "click", (function (t) {
                                    t.preventDefault(), i.nativeInput.value = "", i.j.e.fire(i.nativeInput, "input"), i.focus()
                                })).on(i.nativeInput, "input", (function () {
                                    i.state.clearButton = Boolean(i.value.length)
                                })), i.state.clearButton = Boolean(i.value.length)), i.j.e.on(i.nativeInput, "focus blur", (function () {
                                    i.onChangeFocus()
                                })).on(i.nativeInput, "input change", i.onChangeValue), i.onChangeState(), i.onChangeClassName(), i.onChangeStateValue(), i
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, e.prototype.className = function () {
                                return "UIInput"
                            }, e.prototype.onChangeClear = function () {
                                this.state.clearButton ? i.J.after(this.nativeInput, this.clearButton) : i.J.safeRemove(this.clearButton)
                            }, e.prototype.onChangeClassName = function (t, e) {
                                e && this.container.classList.remove(e), this.state.className && this.container.classList.add(this.state.className)
                            }, e.prototype.onChangeState = function () {
                                this.name = this.state.name;
                                var t = this.nativeInput,
                                    e = this.state,
                                    n = e.name,
                                    o = e.icon,
                                    r = e.type,
                                    s = e.ref,
                                    u = e.required,
                                    c = e.placeholder,
                                    f = e.autocomplete,
                                    d = e.label;
                                (0, a.attr)(t, "name", n), (0, a.attr)(t, "type", r), (0, a.attr)(t, "data-ref", s || n), (0, a.attr)(t, "ref", s || n), (0, a.attr)(t, "required", u || null), (0, a.attr)(t, "autocomplete", f ? null : "off"), (0, a.attr)(t, "placeholder", c ? this.j.i18n(c) : ""), o && l.I.exists(o) ? (i.J.before(t, this.icon), this.icon.innerHTML = l.I.get(o)) : i.J.safeRemove(this.icon), d ? (i.J.before(this.wrapper, this.label), this.label.innerText = this.j.i18n(d)) : i.J.safeRemove(this.label), this.updateValidators()
                            }, e.prototype.updateValidators = function () {
                                var t, e = this;
                                this.validators.clear(), this.state.required && this.validators.add(c.O.required), null === (t = this.state.validators) || void 0 === t || t.forEach((function (t) {
                                    var n = c.O[t];
                                    n && e.validators.add(n)
                                }))
                            }, Object.defineProperty(e.prototype, "error", {
                                set: function (t) {
                                    this.setMod("has-error", Boolean(t)), t ? (this.__errorBox.innerText = this.j.i18n(t, this.j.i18n(this.state.label || "")), this.container.appendChild(this.__errorBox)) : i.J.safeRemove(this.__errorBox)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "value", {
                                get: function () {
                                    return this.nativeInput.value
                                },
                                set: function (t) {
                                    this.value !== t && (this.nativeInput.value = t, this.onChangeValue())
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.onChangeStateValue = function () {
                                var t = this.state.value.toString();
                                t !== this.value && (this.value = t)
                            }, e.prototype.onChangeValue = function () {
                                var t, e, n = this.value;
                                this.state.value !== n && (this.state.value = n, this.j.e.fire(this, "change", n), null === (e = (t = this.state).onChange) || void 0 === e || e.call(t, n))
                            }, e.prototype.validate = function () {
                                var t = this;
                                this.error = "";
                                var e = (0, s.$)(this.validators).every((function (e) {
                                    return e(t)
                                }));
                                return this.__markInputInvalid(), e
                            }, e.prototype.__markInputInvalid = function () {
                                var t, e, n, o;
                                this.error ? (this.nativeInput.setAttribute("aria-invalid", "true"), null === (e = (t = this.nativeInput).setCustomValidity) || void 0 === e || e.call(t, this.error)) : (this.nativeInput.removeAttribute("aria-invalid"), null === (o = (n = this.nativeInput).setCustomValidity) || void 0 === o || o.call(n, ""))
                            }, e.prototype.createContainer = function (e) {
                                var n = t.prototype.createContainer.call(this);
                                this.wrapper = this.j.c.div(this.getFullElName("wrapper")), this.nativeInput || (this.nativeInput = this.createNativeInput());
                                var o = this.nativeInput;
                                return o.classList.add(this.getFullElName("input")), this.wrapper.appendChild(o), n.appendChild(this.wrapper), (0, a.attr)(o, "dir", this.j.o.direction || "auto"), n
                            }, e.prototype.createNativeInput = function (t) {
                                return this.j.create.element("input")
                            }, e.prototype.focus = function () {
                                this.nativeInput.focus()
                            }, Object.defineProperty(e.prototype, "isFocused", {
                                get: function () {
                                    return this.nativeInput === this.j.od.activeElement
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.onChangeFocus = function () {
                                this.setMod("focused", this.isFocused)
                            }, e.defaultState = {
                                className: "",
                                autocomplete: !0,
                                name: "",
                                value: "",
                                icon: "",
                                label: "",
                                ref: "",
                                type: "text",
                                placeholder: "",
                                required: !1,
                                validators: []
                            }, (0, o.Cg)([(0, r.watch)("state.clearButton")], e.prototype, "onChangeClear", null), (0, o.Cg)([(0, r.watch)("state.className")], e.prototype, "onChangeClassName", null), (0, o.Cg)([(0, r.watch)(["state.name", "state.type", "state.label", "state.placeholder", "state.autocomplete", "state.icon"], {
                                immediately: !1
                            }), (0, r.debounce)()], e.prototype, "onChangeState", null), (0, o.Cg)([(0, r.watch)("state.value")], e.prototype, "onChangeStateValue", null), (0, o.Cg)([r.autobind], e.prototype, "onChangeValue", null), n = (0, o.Cg)([r.component], e)
                        }(u.D)
                },
                69505: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.allowResizeTags = new Set(["img", "iframe", "table", "jodit"]), o.T.prototype.resizer = {
                        showSize: !0,
                        hideSizeTimeout: 1e3,
                        forImageChangeAttributes: !0,
                        min_width: 10,
                        min_height: 10,
                        useAspectRatio: new Set(["img"])
                    }
                },
                69810: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        P: function () {
                            return i
                        },
                        n: function () {
                            return r
                        }
                    });
                    var o = n(28616);

                    function r(t, e) {
                        return t === e || (0, o.A)(t) === (0, o.A)(e)
                    }

                    function i(t, e) {
                        return t === e
                    }
                },
                69996: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        B: function () {
                            return l
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(22664),
                        s = n(36115),
                        a = n(84345),
                        u = n(58770),
                        c = n(66180);
                    s.T.prototype.history = {
                        enable: !0,
                        maxHistoryLength: 1 / 0,
                        timeout: 1e3
                    };
                    var l = function (t) {
                        function e(e, n, o) {
                            void 0 === n && (n = new c.B(e.o.history.maxHistoryLength)), void 0 === o && (o = new u.F(e));
                            var r = t.call(this, e) || this;
                            return r.updateTick = 0, r.__stack = n, r.snapshot = o, e.o.history.enable && e.e.on("afterAddPlace.history", (function () {
                                r.isInDestruct || (r.startValue = r.snapshot.make(), e.events.on("internalChange internalUpdate", (function () {
                                    r.startValue = r.snapshot.make()
                                })).on(e.editor, ["changeSelection", "selectionstart", "selectionchange", "mousedown", "mouseup", "keydown", "keyup"].map((function (t) {
                                    return t + ".history"
                                })).join(" "), (function () {
                                    r.startValue.html === r.j.getNativeEditorValue() && (r.startValue = r.snapshot.make())
                                })).on(r, "change.history", r.onChange))
                            })), r
                        }
                        return (0, o.C6)(e, t), e.prototype.className = function () {
                            return "History"
                        }, e.prototype.redo = function () {
                            this.__stack.redo() && (this.startValue = this.snapshot.make(), this.fireChangeStack())
                        }, e.prototype.canRedo = function () {
                            return this.__stack.canRedo()
                        }, e.prototype.undo = function () {
                            this.__stack.undo() && (this.startValue = this.snapshot.make(), this.fireChangeStack())
                        }, e.prototype.canUndo = function () {
                            return this.__stack.canUndo()
                        }, e.prototype.clear = function () {
                            this.startValue = this.snapshot.make(), this.__stack.clear(), this.fireChangeStack()
                        }, Object.defineProperty(e.prototype, "length", {
                            get: function () {
                                return this.__stack.length
                            },
                            enumerable: !1,
                            configurable: !0
                        }), Object.defineProperty(e.prototype, "startValue", {
                            get: function () {
                                return this.__startValue
                            },
                            set: function (t) {
                                this.__startValue = t
                            },
                            enumerable: !1,
                            configurable: !0
                        }), e.prototype.__upTick = function () {
                            this.updateTick += 1
                        }, e.prototype.onChange = function () {
                            this.__processChanges()
                        }, e.prototype.__processChanges = function () {
                            !this.snapshot.isBlocked && this.j.o.history.enable && this.updateStack()
                        }, e.prototype.updateStack = function (t) {
                            void 0 === t && (t = !1);
                            var e = this.snapshot.make();
                            if (!u.F.equal(e, this.startValue)) {
                                var n = new a.u(this.startValue, e, this, this.updateTick);
                                if (t) {
                                    var o = this.__stack.current();
                                    o && this.updateTick === o.tick && this.__stack.replace(n)
                                } else this.__stack.push(n);
                                this.startValue = e, this.fireChangeStack()
                            }
                        }, e.prototype.fireChangeStack = function () {
                            var t;
                            this.j && !this.j.isInDestruct && (null === (t = this.j.events) || void 0 === t || t.fire("changeStack"))
                        }, e.prototype.destruct = function () {
                            this.isInDestruct || (this.j.events && this.j.e.off(".history"), this.snapshot.destruct(), t.prototype.destruct.call(this))
                        }, (0, o.Cg)([(0, i.debounce)()], e.prototype, "onChange", null), e
                    }(r.vG)
                },
                70061: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(931),
                        i = n(36115),
                        s = n(24772),
                        a = n.n(s),
                        u = n(66547),
                        c = n.n(u);
                    i.T.prototype.fullsize = !1, i.T.prototype.globalFullSize = !0, r.I.set("fullsize", a()).set("shrink", c()), i.T.prototype.controls.fullsize = {
                        exec: function (t) {
                            t.toggleFullSize()
                        },
                        update: function (t, e) {
                            var n = t.isFullSize ? "shrink" : "fullsize";
                            e.state.activated = t.isFullSize, t.o.textIcons ? e.state.text = n : e.state.icon.name = n
                        },
                        tooltip: "Open in fullsize",
                        mode: o.MODE_SOURCE + o.MODE_WYSIWYG
                    }
                },
                70069: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        d: function () {
                            return o
                        }
                    });
                    var o = function () {
                        function t(t) {
                            this.limit = t, this.stack = []
                        }
                        return t.prototype.push = function (t) {
                            return this.stack.push(t), this.stack.length > this.limit && this.stack.shift(), this
                        }, t.prototype.pop = function () {
                            return this.stack.pop()
                        }, t.prototype.find = function (t) {
                            return this.stack.find(t)
                        }, t
                    }()
                },
                70214: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        H: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(641),
                        i = n(41159);

                    function s(t, e, n) {
                        var s = e.s,
                            a = e.o.enter.toLowerCase(),
                            u = o.J.isLeaf(n),
                            c = n.tagName.toLowerCase() === a || u,
                            l = s.cursorOnTheRight(n, t),
                            f = s.cursorOnTheLeft(n, t);
                        if (!c && (l || f)) return l ? o.J.after(n, t) : o.J.before(n, t), (0, i.y)(t, e, a), void(f && !l && o.J.prepend(n, t));
                        var d = s.splitSelection(n, t);
                        (0, r.$)(d, e.editor, e.ed)
                    }
                },
                70265: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = (n(27337), n(9823)),
                        i = n(99898),
                        s = n(47964),
                        a = n(36115);
                    a.T.prototype.filebrowser = {
                        namespace: "",
                        cache: !0,
                        extraButtons: [],
                        filter: function (t, e) {
                            return e = e.toLowerCase(), (0, r.Kg)(t) ? -1 !== t.toLowerCase().indexOf(e) : (0, r.Kg)(t.name) ? -1 !== t.name.toLowerCase().indexOf(e) : !(0, r.Kg)(t.file) || -1 !== t.file.toLowerCase().indexOf(e)
                        },
                        sortBy: "changed-desc",
                        sort: function (t, e, n) {
                            var s = (0, o.zs)(n.toLowerCase().split("-"), 2),
                                a = s[0],
                                u = "asc" === s[1],
                                c = function (t, e) {
                                    return e > t ? u ? -1 : 1 : t > e ? u ? 1 : -1 : 0
                                };
                            if ((0, r.Kg)(t)) return c(t.toLowerCase(), e.toLowerCase());
                            if (void 0 === t[a] || "name" === a) return (0, r.Kg)(t.name) ? c(t.name.toLowerCase(), e.name.toLowerCase()) : (0, r.Kg)(t.file) ? c(t.file.toLowerCase(), e.file.toLowerCase()) : 0;
                            switch (a) {
                                case "changed":
                                    var l = new Date(t.changed).getTime(),
                                        f = new Date(e.changed).getTime();
                                    return u ? l - f : f - l;
                                case "size":
                                    return l = (0, i.z)(t.size), f = (0, i.z)(e.size), u ? l - f : f - l
                            }
                            return 0
                        },
                        editImage: !0,
                        preview: !0,
                        showPreviewNavigation: !0,
                        showSelectButtonInPreview: !0,
                        contextMenu: !0,
                        howLongShowMsg: 3e3,
                        createNewFolder: !0,
                        deleteFolder: !0,
                        renameFolder: !0,
                        moveFolder: !0,
                        moveFile: !0,
                        permissionsPresets: {
                            allowFileDownload: void 0,
                            allowFileMove: void 0,
                            allowFileRemove: void 0,
                            allowFileRename: void 0,
                            allowFileUpload: void 0,
                            allowFileUploadRemote: void 0,
                            allowFiles: void 0,
                            allowFolderCreate: void 0,
                            allowFolderMove: void 0,
                            allowFolderRemove: void 0,
                            allowFolderRename: void 0,
                            allowFolderTree: void 0,
                            allowFolders: void 0,
                            allowGeneratePdf: void 0,
                            allowImageCrop: void 0,
                            allowImageResize: void 0
                        },
                        showFoldersPanel: !0,
                        storeLastOpenedFolder: !0,
                        width: 859,
                        height: 400,
                        buttons: ["filebrowser.upload", "filebrowser.remove", "filebrowser.update", "filebrowser.select", "filebrowser.edit", "|", "filebrowser.tiles", "filebrowser.list", "|", "filebrowser.filter", "|", "filebrowser.sort"],
                        removeButtons: [],
                        fullsize: !1,
                        showTooltip: !0,
                        view: null,
                        isSuccess: function (t) {
                            return t.success
                        },
                        getMessage: function (t) {
                            return void 0 !== t.data.messages && (0, r.cy)(t.data.messages) ? t.data.messages.join(" ") : ""
                        },
                        showFileName: !0,
                        showFileSize: !0,
                        showFileChangeTime: !0,
                        saveStateInStorage: {
                            storeLastOpenedFolder: !0,
                            storeView: !0,
                            storeSortBy: !0
                        },
                        pixelOffsetLoadNewChunk: 200,
                        getThumbTemplate: function (t, e, n) {
                            var o = this.options,
                                r = this.files.getFullElName("item"),
                                i = o.showFileName,
                                s = o.showFileSize && t.size,
                                a = o.showFileChangeTime && t.time,
                                u = "";
                            void 0 !== t.file && (u = t.file);
                            var c = '<div class="'.concat(r, '-info">').concat(i ? '<span class="'.concat(r, '-info-filename">').concat(u, "</span>") : "").concat(s ? '<span class="'.concat(r, '-info-filesize">').concat(t.size, "</span>") : "").concat(a ? '<span class="'.concat(r, '-info-filechanged">').concat(a, "</span>") : "", "</div>");
                            return '<a\n\t\t\tdata-jodit-file-browser-item="true"\n\t\t\tdata-is-file="'.concat(t.isImage ? 0 : 1, '"\n\t\t\tdraggable="true"\n\t\t\tclass="').concat(r, '"\n\t\t\thref="').concat(t.fileURL, '"\n\t\t\tdata-source="').concat(n, '"\n\t\t\tdata-path="').concat(t.path, '"\n\t\t\tdata-name="').concat(u, '"\n\t\t\ttitle="').concat(u, '"\n\t\t\tdata-url="').concat(t.fileURL, '">\n\t\t\t\t<img\n\t\t\t\t\tdata-is-file="').concat(t.isImage ? 0 : 1, '"\n\t\t\t\t\tdata-src="').concat(t.fileURL, '"\n\t\t\t\t\tsrc="').concat(t.imageURL, '"\n\t\t\t\t\talt="').concat(u, '"\n\t\t\t\t\tloading="lazy"\n\t\t\t\t/>\n\t\t\t\t').concat(i || s || a ? c : "", "\n\t\t\t</a>")
                        },
                        ajax: (0, o.Cl)((0, o.Cl)({}, a.T.prototype.defaultAjaxOptions), {
                            url: "",
                            data: {},
                            cache: !0,
                            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                            method: "POST",
                            processData: !0,
                            headers: {},
                            prepareData: function (t) {
                                return t
                            },
                            process: function (t) {
                                return t
                            }
                        }),
                        create: {
                            data: {
                                action: "folderCreate"
                            }
                        },
                        getLocalFileByUrl: {
                            data: {
                                action: "getLocalFileByUrl"
                            }
                        },
                        resize: {
                            data: {
                                action: "imageResize"
                            }
                        },
                        crop: {
                            data: {
                                action: "imageCrop"
                            }
                        },
                        fileMove: {
                            data: {
                                action: "fileMove"
                            }
                        },
                        folderMove: {
                            data: {
                                action: "folderMove"
                            }
                        },
                        fileRename: {
                            data: {
                                action: "fileRename"
                            }
                        },
                        folderRename: {
                            data: {
                                action: "folderRename"
                            }
                        },
                        fileRemove: {
                            data: {
                                action: "fileRemove"
                            }
                        },
                        folderRemove: {
                            data: {
                                action: "folderRemove"
                            }
                        },
                        items: {
                            data: {
                                action: "files"
                            }
                        },
                        folder: {
                            data: {
                                action: "folders"
                            }
                        },
                        permissions: {
                            data: {
                                action: "permissions"
                            }
                        }
                    }, a.T.prototype.controls.filebrowser = {
                        upload: {
                            icon: "plus",
                            tooltip: "Upload file",
                            isInput: !0,
                            isDisabled: function (t) {
                                return !t.dataProvider.canI("FileUpload")
                            },
                            getContent: function (t, e) {
                                var n = new s.n(t, {
                                    tooltip: e.control.tooltip,
                                    onlyImages: t.state.onlyImages
                                });
                                return t.e.fire("bindUploader.filebrowser", n.container), n.container
                            }
                        },
                        remove: {
                            icon: "bin",
                            tooltip: "Remove file",
                            isDisabled: function (t) {
                                return !t.state.activeElements.length || !t.dataProvider.canI("FileRemove")
                            },
                            exec: function (t) {
                                t.e.fire("fileRemove.filebrowser")
                            }
                        },
                        update: {
                            tooltip: "Update file list",
                            exec: function (t) {
                                t.e.fire("update.filebrowser")
                            }
                        },
                        select: {
                            tooltip: "Select file",
                            icon: "check",
                            isDisabled: function (t) {
                                return !t.state.activeElements.length
                            },
                            exec: function (t) {
                                t.e.fire("select.filebrowser")
                            }
                        },
                        edit: {
                            tooltip: "Edit image",
                            icon: "pencil",
                            isDisabled: function (t) {
                                var e = t.state.activeElements;
                                return 1 !== e.length || !e[0].isImage || !(t.dataProvider.canI("ImageCrop") || t.dataProvider.canI("ImageResize"))
                            },
                            exec: function (t) {
                                t.e.fire("edit.filebrowser")
                            }
                        },
                        tiles: {
                            tooltip: "Tiles view",
                            icon: "th",
                            isActive: function (t) {
                                return "tiles" === t.state.view
                            },
                            exec: function (t) {
                                t.e.fire("view.filebrowser", "tiles")
                            }
                        },
                        list: {
                            tooltip: "List view",
                            icon: "th-list",
                            isActive: function (t) {
                                return "list" === t.state.view
                            },
                            exec: function (t) {
                                t.e.fire("view.filebrowser", "list")
                            }
                        },
                        filter: {
                            isInput: !0,
                            getContent: function (t, e) {
                                var n = e.container.querySelector(".jodit-input");
                                if (n) return n;
                                var o = t.c.element("input", {
                                    class: "jodit-input",
                                    placeholder: t.i18n("Filter")
                                });
                                return o.value = t.state.filterWord, t.e.on(o, "keydown mousedown", t.async.debounce((function () {
                                    t.e.fire("filter.filebrowser", o.value)
                                }), t.defaultTimeout)), o
                            }
                        },
                        sort: {
                            isInput: !0,
                            getContent: function (t) {
                                var e = t.c.fromHTML('<select class="jodit-input jodit-select">' + '<option value="changed-asc">'.concat(t.i18n("Sort by changed"), " ()</option>") + '<option value="changed-desc">'.concat(t.i18n("Sort by changed"), " ()</option>") + '<option value="name-asc">'.concat(t.i18n("Sort by name"), " ()</option>") + '<option value="name-desc">'.concat(t.i18n("Sort by name"), " ()</option>") + '<option value="size-asc">'.concat(t.i18n("Sort by size"), " ()</option>") + '<option value="size-desc">'.concat(t.i18n("Sort by size"), " ()</option>") + "</select>");
                                return e.value = t.state.sortBy, t.e.on("sort.filebrowser", (function (t) {
                                    e.value !== t && (e.value = t)
                                })).on(e, "change", (function () {
                                    t.e.fire("sort.filebrowser", e.value)
                                })), e
                            }
                        }
                    }
                },
                70592: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Y: function () {
                            return c
                        },
                        g: function () {
                            return u
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(35642),
                        s = n(59678),
                        a = (n(28712), n(38322));

                    function u(t, e) {
                        return Boolean(!r.J.isTag(t, "font") && r.J.isHTMLElement(t) && Object.keys(e).every((function (n) {
                            var o = (0, a.A)(t, n, !0);
                            return "" === o && ("" === e[n] || null == e[n]) || !(0, i.R)(o) && "" !== o && !(0, i.R)(e[n]) && (0, s.iy)(n, e[n]).toString().toLowerCase() === o.toString().toLowerCase()
                        })))
                    }

                    function c(t, e) {
                        return Boolean(!r.J.isTag(t, "font") && r.J.isHTMLElement(t) && Object.keys(e).every((function (e) {
                            return "" !== (0, a.A)(t, e, !0)
                        })))
                    }
                    o.globalDocument && (o.globalDocument.createElement("div").style.color = "red"), o.globalDocument && (o.globalDocument.createElement("div").style.color = "red")
                },
                70674: function (t, e, n) {
                    "use strict";
                    var o, r = n(31635),
                        i = n(17352),
                        s = n(36115),
                        a = n(90823);
                    s.T.prototype.askBeforePasteHTML = !0, s.T.prototype.processPasteHTML = !0, s.T.prototype.scrollToPastedContent = !0, s.T.prototype.pasteExcludeStripTags = ["br", "hr"], s.T.prototype.pasteHTMLActionList = [{
                        value: i.INSERT_AS_HTML,
                        text: "Keep"
                    }, {
                        value: i.INSERT_AS_TEXT,
                        text: "Insert as Text"
                    }, {
                        value: i.INSERT_ONLY_TEXT,
                        text: "Insert only Text"
                    }], s.T.prototype.memorizeChoiceWhenPasteFragment = !1, s.T.prototype.nl2brInPlainText = !0;
                    var u = "pasteStorage";
                    s.T.prototype.controls.paste = {
                        tooltip: "Paste from clipboard",
                        exec: function (t, e, n) {
                            return (0, r.sH)(this, arguments, void 0, (function (t, e, n) {
                                var o, s, c, l, f, d = n.control;
                                return (0, r.YH)(this, (function (e) {
                                    switch (e.label) {
                                        case 0:
                                            if (d.name === u) return t.execCommand("showPasteStorage"), [2];
                                            if (t.s.focus(), o = "", s = !0, !navigator.clipboard) return [3, 11];
                                            e.label = 1;
                                        case 1:
                                            return e.trys.push([1, 6, , 7]), [4, navigator.clipboard.read()];
                                        case 2:
                                            return (c = e.sent()) && c.length ? [4, c[0].getType(i.TEXT_PLAIN)] : [3, 5];
                                        case 3:
                                            return l = e.sent(), [4, new Response(l).text()];
                                        case 4:
                                            o = e.sent(), e.label = 5;
                                        case 5:
                                            return s = !1, [3, 7];
                                        case 6:
                                            return e.sent(), [3, 7];
                                        case 7:
                                            if (!s) return [3, 11];
                                            e.label = 8;
                                        case 8:
                                            return e.trys.push([8, 10, , 11]), [4, navigator.clipboard.readText()];
                                        case 9:
                                            return o = e.sent(), s = !1, [3, 11];
                                        case 10:
                                            return e.sent(), [3, 11];
                                        case 11:
                                            return s && (o = t.buffer.get(i.CLIPBOARD_ID) || "", s = 0 === o.length), f = t.value, s ? (t.ed.execCommand("paste"), !(s = f === t.value) && t.e.fire("afterPaste")) : o.length ? ((0, a.sX)(null, t, o), t.e.fire("afterPaste")) : s && t.alert("Your browser doesn't support direct access to the clipboard.", (function () {
                                                t.s.focus()
                                            })), [2]
                                    }
                                }))
                            }))
                        },
                        list: (o = {}, o[u] = "Paste Storage", o),
                        isChildDisabled: function (t) {
                            return 2 > t.e.fire("pasteStorageList")
                        }
                    }
                },
                70697: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1152 512v-472q22 14 36 28l408 408q14 14 28 36h-472zm-128 32q0 40 28 68t68 28h544v1056q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h800v544z"/> </svg>'
                },
                70807: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        m: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                        for (var e = {}, n = t.substring(1).split("&"), o = 0; n.length > o; o += 1) {
                            var r = n[o].split("=");
                            e[decodeURIComponent(r[0])] = decodeURIComponent(r[1] || "")
                        }
                        return e
                    }
                },
                70881: function (t) {
                    t.exports = '<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"> <g stroke="none" stroke-width="1"> <path d="M14,1.4 L12.6,0 L7,5.6 L1.4,0 L0,1.4 L5.6,7 L0,12.6 L1.4,14 L7,8.4 L12.6,14 L14,12.6 L8.4,7 L14,1.4 Z"/> </g> </svg>'
                },
                70999: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1728 576v256q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45v-256q0-106-75-181t-181-75-181 75-75 181v192h96q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h672v-192q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5z"/> </svg>'
                },
                71005: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return o.k
                        }
                    });
                    var o = n(29866);
                    n(77402)
                },
                71151: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        A: function () {
                            return i
                        }
                    });
                    var o = n(69052),
                        r = n(50156);

                    function i(t) {
                        return function (e, n) {
                            if (!(0, o.T)(e[n])) throw (0, r.z3)("Handler must be a Function");
                            e.hookStatus(t, (function (t) {
                                t[n].call(t)
                            }))
                        }
                    }
                },
                71274: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        r: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(55186);

                    function i(t) {
                        return r.J.isNode(t) && r.J.isTag(t, "span") && t.hasAttribute("data-" + o.MARKER_CLASS)
                    }
                },
                71576: function (t, e, n) {
                    "use strict";
                    var o = n(55186),
                        r = n(25376),
                        i = n(931),
                        s = n(36115),
                        a = n(29348);
                    i.I.set("paragraph", n.n(a)()), s.T.prototype.controls.paragraph = {
                        command: "formatBlock",
                        value: function (t, e) {
                            var n, r, i = e.control,
                                s = t.s.current(),
                                a = o.J.closest(s, o.J.isBlock, t.editor);
                            return null !== (n = null == a ? void 0 : a.nodeName.toLowerCase()) && void 0 !== n ? n : null === (r = i.data) || void 0 === r ? void 0 : r.currentValue
                        },
                        update: function (t, e) {
                            var n = e.control;
                            if (!t.s.current()) return !1;
                            var o = e.state.value,
                                i = n.list;
                            return (0, r.Q)(i) && i[o.toString()] && t.o.textIcons && (e.state.text = i[o.toString()].toString()), !1
                        },
                        data: {
                            currentValue: "p"
                        },
                        list: {
                            p: "Paragraph",
                            h1: "Heading 1",
                            h2: "Heading 2",
                            h3: "Heading 3",
                            h4: "Heading 4",
                            blockquote: "Quote",
                            pre: "Code"
                        },
                        isChildActive: function (t, e) {
                            var n, o;
                            return Boolean(e.state.value === (null === (o = null === (n = e.control) || void 0 === n ? void 0 : n.args) || void 0 === o ? void 0 : o[0]))
                        },
                        isActive: function (t, e) {
                            return e.state.value !== t.o.enter && (0, r.Q)(e.control.list) && Boolean(e.control.list[e.state.value])
                        },
                        childTemplate: function (t, e, n) {
                            return "<".concat(e, ' style="margin:0;padding:0"><span>').concat(t.i18n(n), "</span></").concat(e, ">")
                        },
                        tooltip: "Insert format block"
                    }
                },
                71842: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        J: function () {
                            return o.J
                        },
                        p: function () {
                            return r.p
                        }
                    });
                    var o = n(55186),
                        r = n(8453)
                },
                71948: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M832 1408l336-384h-768l-336 384h768zm1013-1077q15 34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38 0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38 0 69.5 20.5t47.5 54.5z"/> </svg>'
                },
                72197: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        m: function () {
                            return i
                        }
                    });
                    var o = n(12041),
                        r = new WeakMap,
                        i = function (t, e, n) {
                            var i = r.get(t);
                            if (!i) {
                                r.set(t, i = {});
                                var s = null;
                                (0, o.h)(t.j) && (s = t.j.e), (0, o.h)(t) && (s = t.e), s && s.on("beforeDestruct", (function () {
                                    r.delete(t)
                                }))
                            }
                            return void 0 === n ? i[e] : (i[e] = n, n)
                        }
                },
                72874: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        a: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(84976),
                        i = n(81779);

                    function s(t, e, n) {
                        var s = o.J.findSibling(e, n),
                            a = o.J.findSibling(e, !n);
                        if (!o.J.closest(e, o.J.isElement, t.editor) && o.J.isList(s) && o.J.isList(a) && o.J.isTag(s.lastElementChild, "li") && o.J.isTag(a.firstElementChild, "li")) {
                            var u = t.s,
                                c = u.setCursorBefore,
                                l = u.setCursorAfter,
                                f = s.lastElementChild;
                            return (0, r.T1)(n ? o.J.prepend : o.J.append, a.firstElementChild, e), o.J.moveContent(a, s, !n, (0, i.g)(t)), o.J.safeRemove(a), (0, r.T1)(n ? o.J.append : o.J.prepend, f, e), (0, r.T1)(n ? c : l, e), !0
                        }
                        return !1
                    }
                },
                73077: function (t, e, n) {
                    "use strict";
                    var o = n(56298),
                        r = n(65147);
                    n(67986), o.fg.add("font", (function (t) {
                        t.registerButton({
                            name: "font",
                            group: "font"
                        }).registerButton({
                            name: "fontsize",
                            group: "font"
                        });
                        var e = function (e, n, o) {
                            switch (e) {
                                case "fontsize":
                                    t.s.commitStyle({
                                        attributes: {
                                            style: {
                                                fontSize: (0, r.normalizeSize)(o, t.o.defaultFontSizePoints)
                                            }
                                        }
                                    });
                                    break;
                                case "fontname":
                                    t.s.commitStyle({
                                        attributes: {
                                            style: {
                                                fontFamily: o
                                            }
                                        }
                                    })
                            }
                            return t.synchronizeValues(), !1
                        };
                        t.registerCommand("fontsize", e).registerCommand("fontname", e)
                    }))
                },
                73124: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.controls.subscript = {
                        tags: ["sub"],
                        tooltip: "subscript"
                    }, o.T.prototype.controls.superscript = {
                        tags: ["sup"],
                        tooltip: "superscript"
                    }, o.T.prototype.controls.bold = {
                        tagRegExp: /^(strong|b)$/i,
                        tags: ["strong", "b"],
                        css: {
                            "font-weight": ["bold", "700"]
                        },
                        tooltip: "Bold"
                    }, o.T.prototype.controls.italic = {
                        tagRegExp: /^(em|i)$/i,
                        tags: ["em", "i"],
                        css: {
                            "font-style": "italic"
                        },
                        tooltip: "Italic"
                    }, o.T.prototype.controls.underline = {
                        tagRegExp: /^(u)$/i,
                        tags: ["u"],
                        css: {
                            "text-decoration-line": "underline"
                        },
                        tooltip: "Underline"
                    }, o.T.prototype.controls.strikethrough = {
                        tagRegExp: /^(s)$/i,
                        tags: ["s"],
                        css: {
                            "text-decoration-line": "line-through"
                        },
                        tooltip: "Strike through"
                    }
                },
                73307: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        V: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "FileBrowserTree"
                            }, e
                        }(n(53048).Ue)
                },
                73446: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $: function () {
                            return i
                        }
                    });
                    var o = n(96768),
                        r = n(59101),
                        i = function (t) {
                            var e = ["#"],
                                n = (0, o.s)(t);
                            if (!n) return !1;
                            if (3 === (n = (n = (0, r.Bq)(n.toUpperCase())).substring(1)).length) {
                                for (var i = 0; 3 > i; i += 1) e.push(n[i]), e.push(n[i]);
                                return e.join("")
                            }
                            return n.length > 6 && (n = n.slice(0, 6)), "#" + n
                        }
                },
                73533: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M503 1271l-256 256q-10 9-23 9-12 0-23-9-9-10-9-23t9-23l256-256q10-9 23-9t23 9q9 10 9 23t-9 23zm169 41v320q0 14-9 23t-23 9-23-9-9-23v-320q0-14 9-23t23-9 23 9 9 23zm-224-224q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23 9-23 23-9h320q14 0 23 9t9 23zm1264 128q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-334-335q-21-21-42-56l239-18 273 274q27 27 68 27.5t68-26.5l147-146q28-28 28-67 0-40-28-68l-274-275 18-239q35 21 56 42l336 336q84 86 84 204zm-617-724l-239 18-273-274q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l274 274-18 240q-35-21-56-42l-336-336q-84-86-84-204 0-120 85-203l147-146q83-83 203-83 121 0 204 85l334 335q21 21 42 56zm633 84q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23 9-23 23-9h320q14 0 23 9t9 23zm-544-544v320q0 14-9 23t-23 9-23-9-9-23v-320q0-14 9-23t23-9 23 9 9 23zm407 151l-256 256q-11 9-23 9t-23-9q-9-10-9-23t9-23l256-256q10-9 23-9t23 9q9 10 9 23t-9 23z"/> </svg>'
                },
                73780: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        y: function () {
                            return o
                        }
                    });
                    var o = function (t, e) {
                        var n = function (t) {
                                return parseInt(t, 10)
                            },
                            o = e.getComputedStyle(t);
                        return t.offsetWidth - n(o.getPropertyValue("padding-left") || "0") - n(o.getPropertyValue("padding-right") || "0")
                    }
                },
                74260: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        g: function () {
                            return r
                        }
                    });
                    var o = n(38322);

                    function r(t, e) {
                        e.align = t.style.cssFloat && -1 !== ["left", "right"].indexOf(t.style.cssFloat.toLowerCase()) ? (0, o.A)(t, "float") : "block" === (0, o.A)(t, "display") && "auto" === t.style.marginLeft && "auto" === t.style.marginRight ? "center" : ""
                    }
                },
                74340: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $j: function () {
                            return r.$
                        },
                        Pb: function () {
                            return a
                        },
                        YQ: function () {
                            return s
                        },
                        _9: function () {
                            return i._
                        },
                        dT: function () {
                            return o.d
                        },
                        tN: function () {
                            return r.t
                        }
                    }), n(89929);
                    var o = n(84759),
                        r = n(27912),
                        i = n(74714);

                    function s(t) {
                        return Boolean(t && t.files && t.files.length > 0)
                    }

                    function a(t) {
                        return Boolean(t && t.items && t.items.length > 0)
                    }
                },
                74470: function (t, e, n) {
                    "use strict";
                    var o = n(37923),
                        r = n(41324),
                        i = n.n(r),
                        s = n(63837),
                        a = n(39386),
                        u = n(53414),
                        c = {};
                    c = {
                        ar: i(),
                        cs_cz: i(),
                        de: i(),
                        en: s,
                        es: a,
                        fi: i(),
                        fr: i(),
                        he: i(),
                        hu: i(),
                        id: i(),
                        it: i(),
                        ja: i(),
                        ko: i(),
                        mn: i(),
                        nl: i(),
                        no: i(),
                        pl: i(),
                        pt_br: i(),
                        ru: i(),
                        tr: i(),
                        ua: i(),
                        zh_cn: i(),
                        zh_tw: i()
                    };
                    var l = function (t) {
                            return t ? t.default || t : {}
                        },
                        f = {};
                    (0, o.c)(l(u)) && l(u).forEach((function (t, e) {
                        f[e] = t
                    })), Object.keys(c).forEach((function (t) {
                        var e = l(c[t]);
                        (0, o.c)(e) ? (c[t] = {}, e.forEach((function (e, n) {
                            c[t][f[n]] = e
                        }))) : c[t] = e
                    })), e.A = c
                },
                74646: function (t, e, n) {
                    "use strict";
                    var o = n(931),
                        r = n(36115),
                        i = n(71948),
                        s = n.n(i);
                    r.T.prototype.cleanHTML = {
                        timeout: 300,
                        removeEmptyElements: !0,
                        fillEmptyParagraph: !0,
                        replaceNBSP: !0,
                        replaceOldTags: {
                            i: "em",
                            b: "strong"
                        },
                        allowTags: !1,
                        denyTags: "script",
                        useIframeSandbox: !1,
                        removeOnError: !0,
                        safeJavaScriptLink: !0,
                        disableCleanFilter: null
                    }, r.T.prototype.controls.eraser = {
                        command: "removeFormat",
                        tooltip: "Clear Formatting"
                    }, o.I.set("eraser", s())
                },
                74714: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        _: function () {
                            return s
                        }
                    });
                    var o = n(31635),
                        r = n(65147),
                        i = n(27912);

                    function s(t, e, n, s, a) {
                        if (!e) return Promise.reject((0, r.error)("Need files"));
                        var u = t.o,
                            c = (0, r.toArray)(e);
                        if (!c.length) return Promise.reject((0, r.error)("Need files"));
                        var l = [];
                        if (u.insertImageAsBase64URI && function (t, e, n, o, i, s) {
                                var a, u, c = function () {
                                    if ((a = t[u]) && a.type) {
                                        var c = a.type.match(/\/([a-z0-9]+)/i),
                                            l = c[1] ? c[1].toLowerCase() : "";
                                        if (!e.includes(l)) return "continue";
                                        var f = new FileReader;
                                        n.push(o.j.async.promise((function (t, e) {
                                            f.onerror = e, f.onloadend = function () {
                                                var e = {
                                                    baseurl: "",
                                                    files: [f.result],
                                                    isImages: [!0]
                                                };
                                                ((0, r.isFunction)(i) ? i : s).call(o, e), t(e)
                                            }, f.readAsDataURL(a)
                                        }))), t[u] = null
                                    }
                                };
                                for (u = 0; t.length > u; u += 1) c()
                            }(c, u.imagesExtensions, l, t, n, u.defaultHandlerSuccess), (c = c.filter((function (t) {
                                return t
                            }))).length) {
                            var f = new FormData;
                            f.append(u.pathVariableName, t.path), f.append("source", t.source);
                            for (var d = void 0, p = 0; c.length > p; p += 1)
                                if (d = c[p]) {
                                    var h = /\.\w+$/.test(d.name),
                                        v = d.type.match(/\/([a-z0-9]+)/i),
                                        g = v && v[1] ? v[1].toLowerCase() : "",
                                        m = c[p].name || Math.random().toString().replace(".", "");
                                    if (!h && g) {
                                        var y = g;
                                        ["jpeg", "jpg"].includes(y) && (y = "jpeg|jpg"), new RegExp(".(" + y + ")$", "i").test(m) || (m += "." + g)
                                    }
                                    var b = (0, o.zs)(u.processFileName.call(t, u.filesVariableName(p), c[p], m), 3);
                                    f.append(b[0], b[1], b[2])
                                } a && a(f), u.data && (0, r.isPlainObject)(u.data) && Object.keys(u.data).forEach((function (t) {
                                f.append(t, u.data[t])
                            })), u.prepareData.call(t, f), l.push((0, i.t)(t, f).then((function (e) {
                                return u.isSuccess.call(t, e) ? (((0, r.isFunction)(n) ? n : u.defaultHandlerSuccess).call(t, u.process.call(t, e)), e) : (((0, r.isFunction)(s) ? s : u.defaultHandlerError).call(t, (0, r.error)(u.getMessage.call(t, e))), e)
                            })).then((function () {
                                t.j.events && t.j.e.fire("filesWereUploaded")
                            })))
                        }
                        return Promise.all(l)
                    }
                },
                74995: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        j: function () {
                            return i
                        }
                    });
                    var o = n(17352),
                        r = n(59101);

                    function i(t) {
                        var e = {},
                            n = {
                                meta: 1,
                                ctrl: 2,
                                control: 2,
                                alt: 3,
                                shift: 4,
                                space: 5
                            };
                        return t.replace(/\+\+/g, "+add").split(/[\s]*\+[\s]*/).map((function (t) {
                            return (0, r.Bq)(t.toLowerCase())
                        })).map((function (t) {
                            return o.KEY_ALIASES[t] || t
                        })).sort((function (t, e) {
                            return n[t] && !n[e] ? -1 : !n[t] && n[e] ? 1 : n[t] && n[e] ? n[t] - n[e] : t > e ? 1 : -1
                        })).filter((function (t) {
                            return !e[t] && "" !== t && (e[t] = !0)
                        })).join("+")
                    }
                },
                75220: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        G: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(38046),
                        i = n(95274);

                    function s(t, e) {
                        for (var n = e.firstChild; n && !(0, r._)(n);)
                            if (!(n = n.nextSibling)) return null;
                        return n && !o.J.next(n, r._, e) && (0, i.sz)(t, n, !1) ? n : null
                    }
                },
                75758: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        K: function () {
                            return r
                        }
                    });
                    var o = n(35642),
                        r = function () {
                            function t() {}
                            return t.prototype.afterSetMod = function (t, e) {}, t.prototype.setMod = function (t, e, n) {
                                t = t.toLowerCase();
                                var r = this.mods[t];
                                if (r === e) return this;
                                var i = "".concat(this.componentName, "_").concat(t, "_"),
                                    s = (n || this.container).classList;
                                return null != r && s.remove("".concat(i).concat(r.toString().toLowerCase())), !(0, o.R)(e) && "" !== e && s.add("".concat(i).concat(e.toString().toLowerCase())), this.mods[t] = e, this.afterSetMod(t, e), this
                            }, t.prototype.getMod = function (t) {
                                var e;
                                return null !== (e = this.mods[t]) && void 0 !== e ? e : null
                            }, t
                        }()
                },
                75766: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        M: function () {
                            return r
                        },
                        u: function () {
                            return i
                        }
                    });
                    var o = n(69052),
                        r = new Map,
                        i = function (t) {
                            var e;
                            if ((0, o.T)(t.className)) return t.className();
                            var n = (null === (e = t.constructor) || void 0 === e ? void 0 : e.originalConstructor) || t.constructor;
                            if (r.has(n)) return r.get(n);
                            if (n.name) return n.name;
                            var i = new RegExp(/^\s*function\s*(\S*)\s*\(/),
                                s = n.toString().match(i);
                            return s ? s[1] : ""
                        }
                },
                75889: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        o: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(65147),
                        a = n(53883),
                        u = n(11133),
                        c = "default",
                        l = new Set(["allowFiles", "allowFileMove", "allowFileUpload", "allowFileUploadRemote", "allowFileRemove", "allowFileRename", "allowFolders", "allowFolderMove", "allowFolderCreate", "allowFolderRemove", "allowFolderRename", "allowImageResize", "allowImageCrop"]),
                        f = function () {
                            function t(t, e) {
                                this.parent = t, this.options = e, this.__currentPermissions = null, this.__ajaxInstances = new Map, this.progressHandler = function (t) {}
                            }
                            return Object.defineProperty(t.prototype, "o", {
                                get: function () {
                                    return this.options
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.get = function (t) {
                                var e = this,
                                    n = this.__ajaxInstances;
                                if (n.has(t)) {
                                    var o = n.get(t);
                                    null == o || o.abort(), n.delete(t)
                                }
                                var r = (0, s.ConfigProto)(void 0 !== this.options[t] ? this.options[t] : {}, (0, s.ConfigProto)({
                                    onProgress: this.progressHandler
                                }, this.o.ajax));
                                r.prepareData && (r.data = r.prepareData.call(this, r.data));
                                var i = new a.d(r);
                                n.set(t, i);
                                var u = i.send();
                                return u.finally((function () {
                                    i.destruct(), n.delete(t), e.progressHandler(100)
                                })).catch((function () {
                                    return null
                                })), u.then((function (t) {
                                    return t.json()
                                })).then((function (t) {
                                    if (t && !e.isSuccess(t)) throw new Error(e.getMessage(t));
                                    return t
                                }))
                            }, t.prototype.onProgress = function (t) {
                                this.progressHandler = t
                            }, t.prototype.permissions = function (t, e) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var n = this;
                                    return (0, o.YH)(this, (function (o) {
                                        return this.o.permissions ? (this.o.permissions.data.path = t, this.o.permissions.data.source = e, this.o.permissions.url ? [2, this.get("permissions").then((function (t) {
                                            if (n.parent.isInDestruct) throw (0, s.abort)();
                                            var e = n.o.permissions.process;
                                            if (e || (e = n.o.ajax.process), e) {
                                                var o = e.call(self, t);
                                                o.data.permissions && (n.parent.events.fire(n, "changePermissions", n.__currentPermissions, o.data.permissions), n.__currentPermissions = o.data.permissions)
                                            }
                                            return n.__currentPermissions
                                        }))] : [2, null]) : [2, null]
                                    }))
                                }))
                            }, t.prototype.canI = function (t) {
                                var e = "allow" + t;
                                if (!r.IS_PROD && !l.has(e)) throw (0, s.error)("Wrong action " + t);
                                var n = this.o.permissionsPresets[e];
                                return void 0 !== n ? n : null == this.__currentPermissions || void 0 === this.__currentPermissions[e] || this.__currentPermissions[e]
                            }, t.prototype.__items = function (t, e, n, o) {
                                var r = this,
                                    i = this.options;
                                return i.items ? (i.items.data.path = t, i.items.data.source = e, i.items.data.mods = n, this.get("items").then((function (t) {
                                    var e = r.o.items.process;
                                    return e || (e = r.o.ajax.process), e && (t = e.call(self, t)), o(t)
                                }))) : Promise.reject(Error("Set Items api options"))
                            }, t.prototype.items = function (t, e, n) {
                                var o = this;
                                return void 0 === n && (n = {}), this.__items(t, e, n, (function (t) {
                                    return o.generateItemsList(t.data.sources, n)
                                }))
                            }, t.prototype.itemsEx = function (t, e, n) {
                                var o = this;
                                return void 0 === n && (n = {}), this.__items(t, e, n, (function (t) {
                                    return {
                                        items: o.generateItemsList(t.data.sources, n),
                                        loadedTotal: (e = t.data.sources, e.reduce((function (t, e) {
                                            return t + e.files.length
                                        }), 0))
                                    };
                                    var e
                                }))
                            }, t.prototype.generateItemsList = function (t, e) {
                                var n = this;
                                void 0 === e && (e = {});
                                var r = [];
                                return t.forEach((function (t) {
                                    if (t.files && t.files.length) {
                                        var i = n.o.sort;
                                        (0, s.isFunction)(i) && e.sortBy && t.files.sort((function (t, n) {
                                            return i(t, n, e.sortBy)
                                        })), t.files.forEach((function (i) {
                                            (function (t) {
                                                var o;
                                                return !(null === (o = e.filterWord) || void 0 === o ? void 0 : o.length) || void 0 === n.o.filter || n.o.filter(t, e.filterWord)
                                            })(i) && function (t) {
                                                return "folder" === t.type || !e.onlyImages || void 0 === t.isImage || t.isImage
                                            }(i) && r.push(u.u.create((0, o.Cl)((0, o.Cl)({}, i), {
                                                sourceName: t.name,
                                                source: t
                                            })))
                                        }))
                                    }
                                })), r
                            }, t.prototype.tree = function (t, e) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var n = this;
                                    return (0, o.YH)(this, (function (o) {
                                        switch (o.label) {
                                            case 0:
                                                return t = (0, s.normalizeRelativePath)(t), this.o.folder ? [4, this.permissions(t, e)] : [2, Promise.reject(Error("Set Folder Api options"))];
                                            case 1:
                                                return o.sent(), this.o.folder.data.path = t, this.o.folder.data.source = e, [2, this.get("folder").then((function (t) {
                                                    var e = n.o.folder.process;
                                                    return e || (e = n.o.ajax.process), e && (t = e.call(self, t)), t.data.sources
                                                }))]
                                        }
                                    }))
                                }))
                            }, t.prototype.getPathByUrl = function (t) {
                                var e = this;
                                return (0, s.set)("options.getLocalFileByUrl.data.url", t, this), this.get("getLocalFileByUrl").then((function (t) {
                                    if (e.isSuccess(t)) return t.data;
                                    throw (0, s.error)(e.getMessage(t))
                                }))
                            }, t.prototype.createFolder = function (t, e, n) {
                                var o = this,
                                    r = this.o.create;
                                if (!r) throw (0, s.error)("Set Create api options");
                                return r.data.source = n, r.data.path = e, r.data.name = t, this.get("create").then((function (t) {
                                    if (o.isSuccess(t)) return !0;
                                    throw (0, s.error)(o.getMessage(t))
                                }))
                            }, t.prototype.move = function (t, e, n, o) {
                                var r = this,
                                    i = o ? "fileMove" : "folderMove",
                                    a = this.options[i];
                                if (!a) throw (0, s.error)("Set Move api options");
                                return a.data.from = t, a.data.path = e, a.data.source = n, this.get(i).then((function (t) {
                                    if (r.isSuccess(t)) return !0;
                                    throw (0, s.error)(r.getMessage(t))
                                }))
                            }, t.prototype.remove = function (t, e, n, o) {
                                var r = this,
                                    i = this.o[t];
                                if (!i) throw (0, s.error)('Set "'.concat(t, '" api options'));
                                return i.data.path = e, i.data.name = n, i.data.source = o, this.get(t).then((function (t) {
                                    return i.process && (t = i.process.call(r, t)), r.getMessage(t)
                                }))
                            }, t.prototype.fileRemove = function (t, e, n) {
                                return this.remove("fileRemove", t, e, n)
                            }, t.prototype.folderRemove = function (t, e, n) {
                                return this.remove("folderRemove", t, e, n)
                            }, t.prototype.rename = function (t, e, n, o, r) {
                                var i = this,
                                    a = this.o[t];
                                if (!a) throw (0, s.error)('Set "'.concat(t, '" api options'));
                                return a.data.path = e, a.data.name = n, a.data.newname = o, a.data.source = r, this.get(t).then((function (t) {
                                    return a.process && (t = a.process.call(self, t)), i.getMessage(t)
                                }))
                            }, t.prototype.folderRename = function (t, e, n, o) {
                                return this.rename("folderRename", t, e, n, o)
                            }, t.prototype.fileRename = function (t, e, n, o) {
                                return this.rename("fileRename", t, e, n, o)
                            }, t.prototype.changeImage = function (t, e, n, o, r, i) {
                                this.o[t] || (this.o[t] = {
                                    data: {}
                                });
                                var s = this.o[t];
                                return void 0 === s.data && (s.data = {
                                    action: t
                                }), s.data.newname = r || o, i && (s.data.box = i), s.data.path = e, s.data.name = o, s.data.source = n, this.get(t).then((function () {
                                    return !0
                                }))
                            }, t.prototype.crop = function (t, e, n, o, r) {
                                return this.changeImage("crop", t, e, n, o, r)
                            }, t.prototype.resize = function (t, e, n, o, r) {
                                return this.changeImage("resize", t, e, n, o, r)
                            }, t.prototype.getMessage = function (t) {
                                return this.options.getMessage(t)
                            }, t.prototype.isSuccess = function (t) {
                                return this.options.isSuccess(t)
                            }, t.prototype.destruct = function () {
                                this.__ajaxInstances.forEach((function (t) {
                                    return t.destruct()
                                })), this.__ajaxInstances.clear()
                            }, (0, o.Cg)([i.autobind], t)
                        }();
                    e.A = f
                },
                76104: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Z: function () {
                            return r
                        }
                    });
                    var o = n(25376),
                        r = function (t, e) {
                            var n = [],
                                i = encodeURIComponent;
                            for (var s in t)
                                if (Object.prototype.hasOwnProperty.call(t, s)) {
                                    var a = e ? e + "[" + s + "]" : s,
                                        u = t[s];
                                    n.push((0, o.Q)(u) ? r(u, a) : i(a) + "=" + i(u))
                                } return n.join("&")
                        }
                },
                76134: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        S: function () {
                            return r.S
                        },
                        p: function () {
                            return o.p
                        }
                    });
                    var o = n(5533),
                        r = n(55265)
                },
                76166: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        FI: function () {
                            return i
                        },
                        fF: function () {
                            return s
                        },
                        z3: function () {
                            return r
                        }
                    });
                    var o = n(20222);

                    function r(t) {
                        return new TypeError(t)
                    }

                    function i(t) {
                        return new o.Rc(t)
                    }

                    function s(t) {
                        return new o.ZW(t)
                    }
                },
                76385: function (t, e, n) {
                    "use strict";
                    var o = n(56298);
                    n(94291), o.fg.add("table", (function (t) {
                        t.registerButton({
                            name: "table",
                            group: "insert"
                        })
                    }))
                },
                76693: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(71842),
                        s = n(56298),
                        a = n(71005),
                        u = n(53048),
                        c = (n(57362), function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.isResized = !1, e.start = {
                                    x: 0,
                                    y: 0,
                                    w: 0,
                                    h: 0
                                }, e.handle = e.j.c.div("jodit-editor__resize", u.In.get("resize_handler")), e
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this,
                                    n = t.o,
                                    o = n.height,
                                    r = n.width,
                                    i = t.o.allowResizeY;
                                "auto" === o && "auto" !== r && (i = !1), "auto" === o && "auto" === r || !n.allowResizeX && !i || (t.statusbar.setMod("resize-handle", !0), t.e.on("toggleFullSize.resizeHandler", (function () {
                                    e.handle.style.display = t.isFullSize ? "none" : "block"
                                })).on(this.handle, "mousedown touchstart", this.onHandleResizeStart).on(t.ow, "mouseup touchend", this.onHandleResizeEnd), t.container.appendChild(this.handle))
                            }, e.prototype.onHandleResizeStart = function (t) {
                                this.isResized = !0, this.start.x = t.clientX, this.start.y = t.clientY, this.start.w = this.j.container.offsetWidth, this.start.h = this.j.container.offsetHeight, this.j.lock(), this.j.e.on(this.j.ow, "mousemove touchmove", this.onHandleResize), t.preventDefault()
                            }, e.prototype.onHandleResize = function (t) {
                                this.isResized && (this.j.o.allowResizeY && this.j.e.fire("setHeight", this.start.h + t.clientY - this.start.y), this.j.o.allowResizeX && this.j.e.fire("setWidth", this.start.w + t.clientX - this.start.x), this.j.e.fire("resize"))
                            }, e.prototype.onHandleResizeEnd = function () {
                                this.isResized && (this.isResized = !1, this.j.e.off(this.j.ow, "mousemove touchmove", this.onHandleResize), this.j.unlock())
                            }, e.prototype.beforeDestruct = function () {
                                i.J.safeRemove(this.handle), this.j.e.off(this.j.ow, "mouseup touchsend", this.onHandleResizeEnd)
                            }, e.requires = ["size"], (0, o.Cg)([r.autobind], e)
                        }(a.k));
                    s.fg.add("resizeHandler", c)
                },
                76776: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return null != t && t === t.window
                    }
                    n.d(e, {
                        l: function () {
                            return o
                        }
                    })
                },
                76967: function (t, e, n) {
                    "use strict";
                    var o = n(56298),
                        r = n(65147),
                        i = n(39611);
                    n(88011), o.fg.add("mobile", (function (t) {
                        var e = 0,
                            n = (0, r.splitArray)(t.o.buttons);
                        t.o.mobileTapTimeout && t.e.on("touchend", (function (n) {
                            if (n.changedTouches && n.changedTouches.length) {
                                var o = (new Date).getTime(),
                                    r = o - e;
                                r > t.o.mobileTapTimeout && (e = o, 1.5 * t.o.mobileTapTimeout > r && t.s.insertCursorAtPoint(n.clientX, n.clientY))
                            }
                        })), t.e.on("getDiffButtons.mobile", (function (e) {
                            if (e === t.toolbar) {
                                var o = (0, i.V)((0, r.splitArray)(t.o.buttons), t),
                                    s = (0, i.V)(n, t);
                                return (0, r.toArray)(o).reduce((function (t, e) {
                                    return s.has(e) || t.push(e), t
                                }), [])
                            }
                        })), t.o.toolbarAdaptive && t.e.on("resize afterInit recalcAdaptive changePlace afterAddPlace", (function () {
                            var e, o;
                            if (t.o.toolbar) {
                                var i = (null !== (e = t.container.parentElement) && void 0 !== e ? e : t.container).offsetWidth,
                                    s = (0, r.splitArray)(t.isFullSize || i >= t.o.sizeLG ? t.o.buttons : t.o.sizeMD > i ? t.o.sizeSM > i ? t.o.buttonsXS : t.o.buttonsSM : t.o.buttonsMD);
                                s.toString() !== n.toString() && (n = s, t.e.fire("closeAllPopups"), null === (o = t.toolbar) || void 0 === o || o.setRemoveButtons(t.o.removeButtons).build(n.concat(t.o.extraButtons)))
                            }
                        })).on(t.ow, "load resize", (function () {
                            return t.e.fire("recalcAdaptive")
                        }))
                    }))
                },
                77112: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        a: function () {
                            return r
                        }
                    });
                    var o = new WeakMap,
                        r = function (t) {
                            var e = o.get(t);
                            return e || o.set(t, e = {}), e
                        }
                },
                77334: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(37923),
                        i = n(83044),
                        s = n(36115);
                    s.T.prototype.enableDragAndDropFileToEditor = !0, s.T.prototype.uploader = {
                        url: "",
                        insertImageAsBase64URI: !1,
                        imagesExtensions: ["jpg", "png", "jpeg", "gif"],
                        headers: null,
                        data: null,
                        filesVariableName: function (t) {
                            return "files[".concat(t, "]")
                        },
                        withCredentials: !1,
                        pathVariableName: "path",
                        format: "json",
                        method: "POST",
                        prepareData: function (t) {
                            return t
                        },
                        isSuccess: function (t) {
                            return t.success
                        },
                        getMessage: function (t) {
                            return void 0 !== t.data.messages && (0, r.c)(t.data.messages) ? t.data.messages.join(" ") : ""
                        },
                        processFileName: function (t, e, n) {
                            return [t, e, n]
                        },
                        process: function (t) {
                            return t.data
                        },
                        error: function (t) {
                            this.j.message.error(t.message, 4e3)
                        },
                        getDisplayName: function (t, e) {
                            return t + e
                        },
                        defaultHandlerSuccess: function (t) {
                            var e = this,
                                n = this.j || this;
                            (0, i.y)(n) && t.files && t.files.length && t.files.forEach((function (r, i) {
                                var s = (0, o.zs)(t.isImages && t.isImages[i] ? ["img", "src"] : ["a", "href"], 2),
                                    a = s[0],
                                    u = s[1],
                                    c = n.createInside.element(a);
                                c.setAttribute(u, t.baseurl + r), "a" === a && (c.textContent = n.o.uploader.getDisplayName.call(e, t.baseurl, r)), "img" === a ? n.s.insertImage(c, null, n.o.imageDefaultWidth) : n.s.insertNode(c)
                            }))
                        },
                        defaultHandlerError: function (t) {
                            this.j.message.error(t.message)
                        },
                        contentType: function (t) {
                            return (void 0 === this.ow.FormData || "string" == typeof t) && "application/x-www-form-urlencoded; charset=UTF-8"
                        }
                    }
                },
                77402: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = (n(17352), n(56298)),
                        i = n(32709),
                        s = n(9823),
                        a = n(58269),
                        u = n(32291),
                        c = n(58157),
                        l = n(96134),
                        f = function () {
                            function t() {
                                this.__items = new Map
                            }
                            return Object.defineProperty(t.prototype, "size", {
                                get: function () {
                                    return this.__items.size
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.add = function (t, e) {
                                this.__items.set((0, l.P)(t), e), r.RR.fire("plugin:".concat(t, ":ready"))
                            }, t.prototype.get = function (t) {
                                return this.__items.get((0, l.P)(t))
                            }, t.prototype.remove = function (t) {
                                this.__items.delete((0, l.P)(t))
                            }, t.prototype.__getFullPluginsList = function (t) {
                                var e = [];
                                return this.__items.forEach((function (n, o) {
                                    t && !t.has(o) || e.push([o, n])
                                })), e
                            }, t.prototype.__init = function (t) {
                                var e = this,
                                    n = function (t) {
                                        return {
                                            extraList: t.o.extraPlugins.map((function (t) {
                                                return (0, s.Kg)(t) ? {
                                                    name: t
                                                } : t
                                            })),
                                            disableList: new Set((0, i.uM)(t.o.disablePlugins).map(l.P)),
                                            filter: t.o.safeMode ? new Set(t.o.safePluginsList) : null
                                        }
                                    }(t),
                                    r = n.extraList,
                                    f = n.disableList,
                                    d = n.filter,
                                    p = new Map,
                                    h = {},
                                    v = new Set;
                                t.__plugins = h;
                                var g = function () {
                                    if (!t.isInDestruct) {
                                        var n = !1;
                                        e.__getFullPluginsList(d).forEach((function (e) {
                                            var r = (0, o.zs)(e, 2),
                                                i = r[0],
                                                u = r[1];
                                            if (!f.has(i) && !p.has(i)) {
                                                var l = null == u ? void 0 : u.requires;
                                                if (l && (0, s.cy)(l) && l.length) {
                                                    if (l.some((function (t) {
                                                            return f.has(t)
                                                        }))) return;
                                                    if (!l.every((function (t) {
                                                            return p.has(t)
                                                        }))) return void v.add(i)
                                                }
                                                n = !0;
                                                var d = (0, c.k)(t, u);
                                                if (!d) return p.set(i, null), void v.delete(i);
                                                (0, a.T)(t, i, u, d, p, v), h[i] = d
                                            }
                                        })), n && (t.e.fire("updatePlugins"), g())
                                    }
                                };
                                r && r.length && (0, u.o)(this.__items, t, r, g), g(),
                                    function (t, e) {
                                        t.e.on("beforeDestruct", (function () {
                                            Object.keys(e).forEach((function (n) {
                                                var o = e[n];
                                                (0, s.pV)(o) && o.destruct(t), delete e[n]
                                            })), delete t.__plugins
                                        }))
                                    }(t, h)
                            }, t.prototype.wait = function (t) {
                                var e = this;
                                return new Promise((function (n) {
                                    if (e.get(t)) return n();
                                    var o = function () {
                                        n(), r.RR.off("plugin:".concat(t, ":ready"), o)
                                    };
                                    r.RR.on("plugin:".concat(t, ":ready"), o)
                                }))
                            }, t
                        }()
                },
                77753: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        f: function () {
                            return r.f
                        },
                        uA: function () {
                            return o.u
                        },
                        vG: function () {
                            return i.v
                        }
                    });
                    var o = n(37474),
                        r = n(64567),
                        i = n(7982)
                },
                77782: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        S: function () {
                            return C
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(37474),
                        s = n(64567),
                        a = n(17352),
                        u = n(92852),
                        c = n(87875),
                        l = n(1963),
                        f = n(71151),
                        d = n(71842),
                        p = n(50025),
                        h = n(56298),
                        v = n(65147),
                        g = n(24834),
                        m = n(87906),
                        y = n(75758),
                        b = n(92227),
                        _ = n(91902),
                        C = function (t) {
                            function e(e, o) {
                                void 0 === o && (o = !1);
                                var r = t.call(this) || this;
                                return r.isJodit = o, r.isView = !0, r.parent = null, r.mods = {}, r.components = new Set, r.OPTIONS = n.defaultOptions, r.__isFullSize = !1, r.__whoLocked = "", r.isLockedNotBy = function (t) {
                                    return r.isLocked && r.__whoLocked !== t
                                }, r.__modulesInstances = new Map, r.id = (new Date).getTime().toString(), r.initOptions(e), r.initOwners(), r.events = new p.bk(r.od), r.create = new u.X(r.od), r.container = r.c.div("jodit ".concat(r.componentName)), r
                            }
                            var n;
                            return (0, o.C6)(e, t), n = e, Object.defineProperty(e.prototype, "basePath", {
                                get: function () {
                                    return this.o.basePath ? this.o.basePath : a.BASE_PATH
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "minified", {
                                get: function () {
                                    return void 0 !== this.o.minified ? this.o.minified : a.BASE_PATH_IS_MIN
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "defaultTimeout", {
                                get: function () {
                                    return (0, v.isVoid)(this.o.defaultTimeout) ? 100 : this.o.defaultTimeout
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "buffer", {
                                get: function () {
                                    return g.w.makeStorage()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "message", {
                                get: function () {
                                    return this.getMessageModule(this.container)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.getMessageModule = function (t) {
                                return new _.N(this, t)
                            }, Object.defineProperty(e.prototype, "storage", {
                                get: function () {
                                    return g.w.makeStorage(!0, this.id)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "c", {
                                get: function () {
                                    return this.create
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "container", {
                                get: function () {
                                    return this.__container
                                },
                                set: function (t) {
                                    this.__container = t
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "e", {
                                get: function () {
                                    return this.events
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "progressbar", {
                                get: function () {
                                    return new b.z(this)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "options", {
                                get: function () {
                                    return this.__options
                                },
                                set: function (t) {
                                    this.__options = t
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "o", {
                                get: function () {
                                    return this.options
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.i18n = function (t) {
                                for (var e = [], n = 1; arguments.length > n; n++) e[n - 1] = arguments[n];
                                return (0, v.i18n)(t, e, this.options)
                            }, e.prototype.toggleFullSize = function (t) {
                                void 0 === t && (t = !this.__isFullSize), t !== this.__isFullSize && (this.__isFullSize = t, this.e.fire("toggleFullSize", t))
                            }, Object.defineProperty(e.prototype, "isLocked", {
                                get: function () {
                                    return "" !== this.__whoLocked
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.lock = function (t) {
                                return void 0 === t && (t = "any"), !this.isLocked && (this.__whoLocked = t, !0)
                            }, e.prototype.unlock = function () {
                                return !!this.isLocked && (this.__whoLocked = "", !0)
                            }, Object.defineProperty(e.prototype, "isFullSize", {
                                get: function () {
                                    return this.__isFullSize
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.getVersion = function () {
                                return n.version
                            }, e.getVersion = function () {
                                return n.version
                            }, e.prototype.initOptions = function (t) {
                                this.options = (0, v.ConfigProto)(t || {}, (0, v.ConfigProto)(this.options || {}, n.defaultOptions))
                            }, e.prototype.initOwners = function () {
                                var t;
                                this.ownerWindow = null !== (t = this.o.ownerWindow) && void 0 !== t ? t : window
                            }, e.prototype.attachEvents = function (t) {
                                var e = this;
                                if (t) {
                                    var n = null == t ? void 0 : t.events;
                                    n && Object.keys(n).forEach((function (t) {
                                        return e.e.on(t, n[t])
                                    }))
                                }
                            }, e.prototype.getInstance = function (t, e) {
                                var n = (0, v.isFunction)(t) ? t.prototype.className() : t,
                                    o = this.e.fire((0, v.camelCase)("getInstance_" + n), e);
                                if (o) return o;
                                var i = (0, v.isFunction)(t) ? t : h.av[n],
                                    s = this.__modulesInstances;
                                if (!(0, v.isFunction)(i)) throw (0, v.error)("Need real module name");
                                if (!s.has(n)) {
                                    var a = i.prototype instanceof r.vG ? new i(this, e) : new i(e);
                                    this.components.add(a), s.set(n, a)
                                }
                                return s.get(n)
                            }, e.prototype.addDisclaimer = function (t) {
                                this.container.appendChild(t)
                            }, e.prototype.beforeDestruct = function () {
                                this.e.fire(s.f.beforeDestruct, this), this.components.forEach((function (t) {
                                    (0, v.isDestructable)(t) && !t.isInDestruct && t.destruct()
                                })), this.components.clear()
                            }, e.prototype.destruct = function () {
                                var e, n, o;
                                this.isDestructed || (null === (e = (0, c.PO)(this, "progressbar")) || void 0 === e || e.destruct(), null === (n = (0, c.PO)(this, "message")) || void 0 === n || n.destruct(), this.events && (this.events.destruct(), this.events = void 0), null === (o = (0, c.PO)(this, "buffer")) || void 0 === o || o.clear(), d.J.safeRemove(this.container), t.prototype.destruct.call(this))
                            }, e.ES = a.ES, e.version = a.APP_VERSION, e.esNext = a.IS_ES_NEXT, e.esModern = a.IS_ES_MODERN, (0, o.Cg)([c.PP], e.prototype, "buffer", null), (0, o.Cg)([c.PP], e.prototype, "message", null), (0, o.Cg)([c.PP], e.prototype, "storage", null), (0, o.Cg)([c.PP], e.prototype, "c", null), (0, o.Cg)([c.PP], e.prototype, "e", null), (0, o.Cg)([c.PP], e.prototype, "progressbar", null), (0, o.Cg)([(0, f.A)(s.f.beforeDestruct)], e.prototype, "beforeDestruct", null), n = (0, o.Cg)([(0, l.C)(y.K, m.O)], e)
                        }(i.u);
                    C.defaultOptions = {
                        extraButtons: [],
                        cache: !0,
                        textIcons: !1,
                        namespace: "",
                        removeButtons: [],
                        zIndex: 100002,
                        defaultTimeout: 100,
                        fullsize: !1,
                        showTooltip: !0,
                        useNativeTooltip: !1,
                        buttons: [],
                        globalFullSize: !0,
                        language: "auto"
                    }
                },
                78134: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.minWidth = 200, o.T.prototype.maxWidth = "100%", o.T.prototype.minHeight = 200, o.T.prototype.maxHeight = "auto", o.T.prototype.saveHeightInStorage = !1
                },
                78139: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        N: function () {
                            return i
                        }
                    });
                    var o = n(38322),
                        r = n(9645);

                    function i(t, e, n, i, s, a, u) {
                        var c = [e, n, i, s],
                            l = function (t, e) {
                                var n = (0, o.A)(a, t),
                                    i = (0, r.n)(e);
                                n.toString() !== i.toString() && (0, o.A)(a, t, i)
                            };
                        if (u) l("margin", e);
                        else {
                            var f = ["margin-top", "margin-right", "margin-bottom", "margin-left"];
                            c.forEach((function (t, e) {
                                l(f[e], t)
                            }))
                        }
                    }
                },
                78479: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return r
                        }
                    });
                    var o = n(17352);

                    function r() {
                        var t = !0;
                        try {
                            var e = o.globalDocument.createElement("input");
                            e.type = "color", e.value = "!", t = "color" === e.type && "!" !== e.value
                        } catch (e) {
                            t = !1
                        }
                        return t
                    }
                },
                78593: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(931),
                        i = n(36115),
                        s = n(21917),
                        a = n.n(s);
                    i.T.prototype.useSearch = !0, i.T.prototype.search = {
                        lazyIdleTimeout: 0,
                        useCustomHighlightAPI: o.globalWindow && void 0 !== o.globalWindow.Highlight
                    }, r.I.set("search", a()), i.T.prototype.controls.find = {
                        tooltip: "Find",
                        icon: "search",
                        exec: function (t, e, n) {
                            var o = n.control;
                            switch (o.args && o.args[0]) {
                                case "findPrevious":
                                    t.e.fire("searchPrevious");
                                    break;
                                case "findNext":
                                    t.e.fire("searchNext");
                                    break;
                                case "replace":
                                    t.execCommand("openReplaceDialog");
                                    break;
                                default:
                                    t.execCommand("openSearchDialog")
                            }
                        },
                        list: {
                            search: "Find",
                            findNext: "Find Next",
                            findPrevious: "Find Previous",
                            replace: "Replace"
                        },
                        childTemplate: function (t, e, n) {
                            return n
                        }
                    }
                },
                78703: function (t, e, n) {
                    "use strict";
                    var o = n(931),
                        r = n(36115),
                        i = n(49989),
                        s = n.n(i);
                    r.T.prototype.spellcheck = !1, o.I.set("spellcheck", s()), r.T.prototype.controls.spellcheck = {
                        isActive: function (t) {
                            return t.o.spellcheck
                        },
                        icon: s(),
                        name: "spellcheck",
                        command: "toggleSpellcheck",
                        tooltip: "Spellcheck"
                    }
                },
                78757: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(71842),
                        i = n(56298),
                        s = n(17527),
                        a = n(98434),
                        u = n(931),
                        c = n(36115),
                        l = n(11131),
                        f = n(59827);
                    u.I.set("print", n.n(f)()), c.T.prototype.controls.print = {
                        exec: function (t) {
                            var e = t.create.element("iframe");
                            Object.assign(e.style, {
                                position: "fixed",
                                right: 0,
                                bottom: 0,
                                width: 0,
                                height: 0,
                                border: 0
                            }), (0, i.My)(t, c.T).appendChild(e);
                            var n = function () {
                                    t.e.off(t.ow, "mousemove", n), r.J.safeRemove(e)
                                },
                                o = e.contentWindow;
                            if (o) {
                                t.e.on(o, "onbeforeunload onafterprint", n).on(t.ow, "mousemove", n), t.o.iframe ? (t.e.fire("generateDocumentStructure.iframe", o.document, t), o.document.body.innerHTML = t.value) : (o.document.write('<!doctype html><html lang="' + (0, s.e)(t.o.language) + '"><head><title></title></head><style>' + (0, l.Y)(t) + "</style><body></body></html>"), o.document.close(), (0, a.u)(t, void 0, "px", o.document.body));
                                var u = o.document.createElement("style");
                                u.innerHTML = "@media print {\n\t\t\t\t\tbody {\n\t\t\t\t\t\t\t-webkit-print-color-adjust: exact;\n\t\t\t\t\t}\n\t\t\t}", o.document.head.appendChild(u), o.focus(), o.print()
                            }
                        },
                        mode: o.MODE_SOURCE + o.MODE_WYSIWYG,
                        tooltip: "Print"
                    }, i.fg.add("print", (function (t) {
                        t.registerButton({
                            name: "print"
                        })
                    }))
                },
                78777: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        i: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e) {
                        return Boolean(o.J.closest(t, ["style", "script"], e))
                    }
                },
                78817: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        IJ: function () {
                            return o.IJ
                        },
                        QN: function () {
                            return r.Q
                        },
                        Tz: function () {
                            return o.Tz
                        },
                        _B: function () {
                            return o._B
                        },
                        zy: function () {
                            return o.zy
                        }
                    });
                    var o = n(89568),
                        r = n(30621)
                },
                79721: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        angle_down: function () {
                            return r.a
                        },
                        angle_left: function () {
                            return s.a
                        },
                        angle_right: function () {
                            return u.a
                        },
                        angle_up: function () {
                            return l.a
                        },
                        bin: function () {
                            return d.a
                        },
                        cancel: function () {
                            return h.a
                        },
                        center: function () {
                            return g.a
                        },
                        check: function () {
                            return y.a
                        },
                        chevron: function () {
                            return _.a
                        },
                        dots: function () {
                            return w.a
                        },
                        eye: function () {
                            return E.a
                        },
                        file: function () {
                            return I.a
                        },
                        folder: function () {
                            return k.a
                        },
                        info_circle: function () {
                            return L.a
                        },
                        left: function () {
                            return z.a
                        },
                        lock: function () {
                            return A.a
                        },
                        ok: function () {
                            return N.a
                        },
                        pencil: function () {
                            return B.a
                        },
                        plus: function () {
                            return q.a
                        },
                        resize_handler: function () {
                            return H.a
                        },
                        right: function () {
                            return W.a
                        },
                        save: function () {
                            return Y.a
                        },
                        settings: function () {
                            return X.a
                        },
                        unlock: function () {
                            return K.a
                        },
                        update: function () {
                            return Z.a
                        },
                        upload: function () {
                            return tt.a
                        },
                        valign: function () {
                            return nt.a
                        }
                    });
                    var o = n(88497),
                        r = n.n(o),
                        i = n(91882),
                        s = n.n(i),
                        a = n(14305),
                        u = n.n(a),
                        c = n(58446),
                        l = n.n(c),
                        f = n(39858),
                        d = n.n(f),
                        p = n(70881),
                        h = n.n(p),
                        v = n(60636),
                        g = n.n(v),
                        m = n(32013),
                        y = n.n(m),
                        b = n(45512),
                        _ = n.n(b),
                        C = n(80347),
                        w = n.n(C),
                        S = n(95134),
                        E = n.n(S),
                        T = n(70697),
                        I = n.n(T),
                        j = n(49983),
                        k = n.n(j),
                        x = n(98964),
                        L = n.n(x),
                        P = n(8136),
                        z = n.n(P),
                        M = n(94806),
                        A = n.n(M),
                        R = n(31365),
                        N = n.n(R),
                        O = n(44636),
                        B = n.n(O),
                        D = n(36327),
                        q = n.n(D),
                        J = n(53328),
                        H = n.n(J),
                        F = n(98711),
                        W = n.n(F),
                        V = n(53808),
                        Y = n.n(V),
                        U = n(20784),
                        X = n.n(U),
                        G = n(70999),
                        K = n.n(G),
                        $ = n(45244),
                        Z = n.n($),
                        Q = n(99876),
                        tt = n.n(Q),
                        et = n(14006),
                        nt = n.n(et)
                },
                80004: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        r: function () {
                            return c
                        }
                    });
                    var o = n(71842),
                        r = n(65499),
                        i = n(92032),
                        s = n(77112),
                        a = n(31859),
                        u = "default";

                    function c() {
                        var t = this,
                            e = (0, s.a)(this),
                            n = this,
                            c = n.state,
                            l = n.files,
                            f = n.create,
                            d = n.options;
                        c.on(["change.currentPath", "change.currentSource"], this.async.debounce((function () {
                            t.o.saveStateInStorage && t.o.saveStateInStorage.storeLastOpenedFolder && t.storage.set("currentPath", t.state.currentPath).set("currentSource", t.state.currentSource), (0, a.r)(t).catch(t.status)
                        }), this.defaultTimeout)).on("beforeChange.activeElements", (function () {
                            c.activeElements.forEach((function (t) {
                                var n = e[t.uniqueHashKey].elm;
                                n && n.classList.remove(l.getFullElName("item", "active", !0))
                            }))
                        })).on("change.activeElements", (function () {
                            t.e.fire("changeSelection"), c.activeElements.forEach((function (t) {
                                var n = e[t.uniqueHashKey].elm;
                                n && n.classList.add(l.getFullElName("item", "active", !0))
                            }))
                        })).on("change.view", (function () {
                            l.setMod("view", c.view), t.o.saveStateInStorage && t.o.saveStateInStorage.storeView && t.storage.set("view", c.view)
                        })).on("change.sortBy", (function () {
                            t.o.saveStateInStorage && t.o.saveStateInStorage.storeSortBy && t.storage.set("sortBy", c.sortBy)
                        })).on("change.elements", this.async.debounce((function () {
                            o.J.detach(l.container), c.elements.length ? c.elements.forEach((function (n) {
                                t.files.container.appendChild(function (n) {
                                    var o = n.uniqueHashKey;
                                    if (e[o]) return e[o].elm;
                                    var r = f.fromHTML(d.getThumbTemplate.call(t, n, n.source, n.sourceName.toString()));
                                    return r.dataset.key = o, e[o] = {
                                        item: n,
                                        elm: r
                                    }, e[o].elm
                                }(n))
                            })) : l.container.appendChild(f.div(t.componentName + "_no-files_true", t.i18n("There are no files")))
                        }), this.defaultTimeout)).on("change.sources", this.async.debounce((function () {
                            o.J.detach(t.tree.container), c.sources.forEach((function (e) {
                                var n = e.name;
                                if (n && n !== u && t.tree.container.appendChild(f.div(t.tree.getFullElName("source-title"), n)), e.folders.forEach((function (o) {
                                        var s, a = f.a(t.tree.getFullElName("item"), {
                                                draggable: "draggable",
                                                href: "#",
                                                "data-path": (0, r.Fd)(e.path, o + "/"),
                                                "data-name": o,
                                                "data-source": n,
                                                "data-source-path": e.path
                                            }, f.span(t.tree.getFullElName("item-title"), o)),
                                            u = function (i) {
                                                return function (s) {
                                                    t.e.fire("".concat(i, ".filebrowser"), {
                                                        name: o,
                                                        path: (0, r.Fd)(e.path + "/"),
                                                        source: n
                                                    }), s.stopPropagation(), s.preventDefault()
                                                }
                                            };
                                        t.e.on(a, "click", u("openFolder")), t.tree.container.appendChild(a), ".." !== o && "." !== o && (d.renameFolder && t.dataProvider.canI("FolderRename") && ((s = (0, i.$n)(t, {
                                            icon: {
                                                name: "pencil"
                                            },
                                            name: "rename",
                                            tooltip: "Rename",
                                            size: "tiny"
                                        })).onAction(u("renameFolder")), a.appendChild(s.container)), d.deleteFolder && t.dataProvider.canI("FolderRemove") && ((s = (0, i.$n)(t, {
                                            icon: {
                                                name: "cancel"
                                            },
                                            name: "remove",
                                            tooltip: "Delete",
                                            size: "tiny"
                                        })).onAction(u("removeFolder")), a.appendChild(s.container)))
                                    })), d.createNewFolder && t.dataProvider.canI("FolderCreate")) {
                                    var o = (0, i.$n)(t, "plus", "Add folder", "secondary");
                                    o.onAction((function () {
                                        t.e.fire("addFolder", {
                                            path: (0, r.Fd)(e.path + "/"),
                                            source: n
                                        })
                                    })), t.tree.append(o)
                                }
                            }))
                        }), this.defaultTimeout))
                    }
                },
                80071: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        z: function () {
                            return d
                        }
                    });
                    var o = n(31635),
                        r = n(37474),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = (n(28712), n(29780)),
                        l = n(6455),
                        f = ["escape", "cut", "delete", "backSpaceAfterDelete", "beforeCommandDelete"],
                        d = function (t) {
                            function e(e, n) {
                                void 0 === n && (n = !0);
                                var o = t.call(this, e) || this;
                                return o.smart = n, o.isOpened = !1, o.strategy = "leftBottom", o.viewBound = function () {
                                    return {
                                        left: 0,
                                        top: 0,
                                        width: o.ow.innerWidth,
                                        height: o.ow.innerHeight
                                    }
                                }, o.__childrenPopups = new Set, (0, u.attr)(o.container, "role", "popup"), o
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "Popup"
                            }, e.prototype.appendChildToContainer = function (t) {
                                this.getElm("content").appendChild(t)
                            }, e.prototype.updateParentElement = function (n) {
                                var o = this;
                                return n !== this && r.u.isInstanceOf(n, e) && (this.__childrenPopups.forEach((function (t) {
                                    !n.closest(t) && t.isOpened && t.close()
                                })), this.__childrenPopups.has(n) || this.j.e.on(n, "beforeClose", (function () {
                                    o.__childrenPopups.delete(n)
                                })), this.__childrenPopups.add(n)), t.prototype.updateParentElement.call(this, n)
                            }, e.prototype.setContent = function (t) {
                                if (this.allChildren.length) throw new Error("Remove children");
                                if (r.u.isInstanceOf(t, c.D)) this.append(t);
                                else {
                                    var e = (0, u.isString)(t) ? this.j.c.fromHTML(t) : t;
                                    this.appendChildToContainer(e)
                                }
                                return this.updatePosition(), this
                            }, e.prototype.open = function (t, n, o) {
                                if (void 0 === n && (n = !1), (0, u.markOwner)(this.jodit, this.container), this.container.classList.add("jodit_theme_".concat(this.jodit.o.theme)), this.__calculateZIndex(), this.isOpened = !0, this.__addGlobalListeners(), this.__targetBound = n ? this.getKeepBound(t) : t, o) o.appendChild(this.container);
                                else {
                                    var r = (0, a.My)(this.jodit, e);
                                    o !== this.container.parentElement && r.appendChild(this.container)
                                }
                                return this.updatePosition(), this.j.e.fire(this, "afterOpen"), this.j.e.fire("afterOpenPopup", this), this
                            }, e.prototype.__calculateZIndex = function () {
                                var t = this;
                                if (!this.container.style.zIndex) {
                                    var e = function (e) {
                                        var n = e.container.style.zIndex || e.o.zIndex;
                                        return !!n && (t.setZIndex(1 + parseInt(n.toString(), 10)), !0)
                                    };
                                    if (!e(this.j))
                                        for (var n = this.parentElement; n;) {
                                            if (e(n.j)) return;
                                            if (n.container.style.zIndex) return void this.setZIndex(1 + parseInt(n.container.style.zIndex.toString(), 10));
                                            if (!n.parentElement && n.container.parentElement) {
                                                var o = c.D.closestElement(n.container.parentElement, c.D);
                                                if (o) {
                                                    n = o;
                                                    continue
                                                }
                                            }
                                            n = n.parentElement
                                        }
                                }
                            }, e.prototype.getKeepBound = function (t) {
                                var e = this,
                                    n = t(),
                                    r = this.od.elementFromPoint(n.left, n.top);
                                if (!r) return t;
                                var i = s.J.isHTMLElement(r) ? r : r.parentElement,
                                    a = (0, u.position)(i, this.j);
                                return function () {
                                    var n = t(),
                                        r = (0, u.position)(i, e.j);
                                    return (0, o.Cl)((0, o.Cl)({}, n), {
                                        top: n.top + (r.top - a.top),
                                        left: n.left + (r.left - a.left)
                                    })
                                }
                            }, e.prototype.updatePosition = function () {
                                if (!this.isOpened) return this;
                                var t = (0, o.zs)(this.__calculatePosition(this.__targetBound(), this.viewBound(), (0, u.position)(this.container, this.j)), 2),
                                    e = t[0];
                                return this.setMod("strategy", t[1]), (0, u.css)(this.container, {
                                    left: e.left,
                                    top: e.top
                                }), this.__childrenPopups.forEach((function (t) {
                                    return t.updatePosition()
                                })), this
                            }, e.prototype.__throttleUpdatePosition = function () {
                                this.updatePosition()
                            }, e.prototype.__calculatePosition = function (t, n, r, i) {
                                void 0 === i && (i = this.strategy);
                                var s = {
                                        left: t.left,
                                        right: t.left - (r.width - t.width)
                                    },
                                    a = {
                                        bottom: t.top + t.height,
                                        top: t.top - r.height
                                    },
                                    c = Object.keys(s).reduce((function (t, e) {
                                        return t.concat(Object.keys(a).map((function (t) {
                                            return "".concat(e).concat((0, u.ucfirst)(t))
                                        })))
                                    }), []),
                                    l = function (t) {
                                        var e = (0, o.zs)((0, u.kebabCase)(t).split("-"), 2);
                                        return {
                                            left: s[e[0]],
                                            top: a[e[1]],
                                            width: r.width,
                                            height: r.height
                                        }
                                    },
                                    f = function (t) {
                                        return e.boxInView(l(i), t) ? i : c.find((function (n) {
                                            if (e.boxInView(l(n), t)) return n
                                        })) || null
                                    },
                                    d = f((0, u.position)(this.j.container, this.j));
                                return d && e.boxInView(l(d), n) || (d = f(n) || d || i), [l(d), d]
                            }, e.boxInView = function (t, e) {
                                return !(-2 > t.top - e.top || -2 > t.left - e.left || -2 > e.top + e.height - (t.top + t.height) || -2 > e.left + e.width - (t.left + t.width))
                            }, e.prototype.close = function () {
                                return this.isOpened ? (this.isOpened = !1, this.__childrenPopups.forEach((function (t) {
                                    return t.close()
                                })), this.j.e.fire(this, "beforeClose"), this.j.e.fire("beforePopupClose", this), this.__removeGlobalListeners(), s.J.safeRemove(this.container), this) : this
                            }, e.prototype.__closeOnOutsideClick = function (t) {
                                this.isOpened && !this.isOwnClick(t) && this.close()
                            }, e.prototype.isOwnClick = function (t) {
                                if (!t.target) return !1;
                                var n = c.D.closestElement(t.target, e);
                                return Boolean(n && (this === n || n.closest(this)))
                            }, e.prototype.__addGlobalListeners = function () {
                                var t = this,
                                    e = this.__throttleUpdatePosition,
                                    n = this.ow;
                                a.RR.on("closeAllPopups", this.close), this.smart && this.j.e.on(f, this.close).on("mousedown touchstart", this.__closeOnOutsideClick).on(n, "mousedown touchstart", this.__closeOnOutsideClick), this.j.e.on("closeAllPopups", this.close).on("resize", e).on(this.container, "scroll mousewheel", e).on(n, "scroll", e).on(n, "resize", e), s.J.up(this.j.container, (function (n) {
                                    n && t.j.e.on(n, "scroll mousewheel", e)
                                }))
                            }, e.prototype.__removeGlobalListeners = function () {
                                var t = this,
                                    e = this.__throttleUpdatePosition,
                                    n = this.ow;
                                a.RR.off("closeAllPopups", this.close), this.smart && this.j.e.off(f, this.close).off("mousedown touchstart", this.__closeOnOutsideClick).off(n, "mousedown touchstart", this.__closeOnOutsideClick), this.j.e.off("closeAllPopups", this.close).off("resize", e).off(this.container, "scroll mousewheel", e).off(n, "scroll", e).off(n, "resize", e), this.j.container.isConnected && s.J.up(this.j.container, (function (n) {
                                    n && t.j.e.off(n, "scroll mousewheel", e)
                                }))
                            }, e.prototype.setZIndex = function (t) {
                                this.container.style.zIndex = t.toString()
                            }, e.prototype.render = function () {
                                return '<div>\n\t\t\t<div class="&__content"></div>\n\t\t</div>'
                            }, e.prototype.destruct = function () {
                                return this.close(), t.prototype.destruct.call(this)
                            }, (0, o.Cg)([i.autobind], e.prototype, "updatePosition", null), (0, o.Cg)([(0, i.throttle)(10), i.autobind], e.prototype, "__throttleUpdatePosition", null), (0, o.Cg)([i.autobind], e.prototype, "close", null), (0, o.Cg)([i.autobind], e.prototype, "__closeOnOutsideClick", null), e
                        }(l.U)
                },
                80347: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 24 24" > <circle cx="12" cy="12" r="2.2"/> <circle cx="12" cy="5" r="2.2"/> <circle cx="12" cy="19" r="2.2"/> </svg>'
                },
                80394: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Y: function () {
                            return i
                        }
                    });
                    var o = n(55186),
                        r = n(71274);

                    function i(t, e, n) {
                        var i = n.editor,
                            s = n.createInside,
                            a = function (t, e) {
                                void 0 === e && (e = "previousSibling");
                                for (var s = t, a = t; a && !(0, r.r)(a) && !o.J.isTag(a, n.o.enter) && (s = a, a = a[e] ? a[e] : a.parentNode && !o.J.isBlock(a.parentNode) && a.parentNode !== i ? a.parentNode : null, !o.J.isBlock(a)););
                                return s
                            },
                            u = a(e),
                            c = a(e, "nextSibling"),
                            l = n.s.createRange();
                        l.setStartBefore(u), l.setEndAfter(c);
                        var f = l.extractContents(),
                            d = s.element(t.element);
                        return d.appendChild(f), o.J.safeInsertNode(l, d), t.elementIsBlock && o.J.isEmpty(d) && !o.J.isTag(d.firstElementChild, "br") && d.appendChild(s.element("br")), d
                    }
                },
                80515: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45z"/> </svg>'
                },
                80778: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        v: function () {
                            return s
                        }
                    });
                    var o = n(98253),
                        r = n(26150),
                        i = n(53804);

                    function s(t, e) {
                        var n = (0, r.C)(e.image, "src") || "",
                            s = t.c.element("a"),
                            a = function () {
                                s.host === location.host || t.confirm("You can only edit your own images. Download this image on the host?", (function (n) {
                                    n && t.uploader && t.uploader.uploadRemoteImage(s.href.toString(), (function (n) {
                                        t.alert("The image has been successfully uploaded to the host!", (function () {
                                            (0, o.K)(n.newfilename) && (e.values.imageSrc = n.baseurl + n.newfilename)
                                        }))
                                    }), (function (e) {
                                        t.alert("There was an error loading %s", e.message)
                                    }))
                                }))
                            };
                        s.href = n, t.filebrowser.dataProvider.getPathByUrl(s.href.toString()).then((function (o) {
                            i.B.call(t.filebrowser, s.href, o.name, o.path, o.source, (function () {
                                var t = (new Date).getTime();
                                e.values.imageSrc = n + (-1 !== n.indexOf("?") ? "" : "?") + "&_tmp=" + t.toString()
                            }), (function (e) {
                                t.alert(e.message)
                            }))
                        })).catch((function (e) {
                            t.alert(e.message, a)
                        }))
                    }
                },
                81199: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        H: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n) {
                        var r = function (t, e, n) {
                            if (!n || !o.J.isHTMLElement(e)) return e;
                            var r = n[e.nodeName.toLowerCase()] || n[e.nodeName];
                            return r ? o.J.replace(e, r, t.createInside, !0, !1) : e
                        }(t, e, t.o.cleanHTML.replaceOldTags);
                        return e !== r ? (e = r, !0) : n
                    }
                },
                81486: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        H: function () {
                            return a
                        }
                    });
                    var o = n(17352),
                        r = n(71842),
                        i = n(65147),
                        s = n(81779);

                    function a(t, e, n, s) {
                        var a, f, d, p = n ? -1 : 1,
                            h = r.J.sibling(e, !n),
                            v = r.J.sibling(e, n),
                            g = null,
                            m = !1;
                        for (v || (v = u(e, n, t.editor)); v && (r.J.isText(v) || r.J.isInlineBlock(v));) {
                            for (; r.J.isInlineBlock(v);) v = n ? null == v ? void 0 : v.lastChild : null == v ? void 0 : v.firstChild;
                            if (!v) break;
                            if ((null === (a = v.nodeValue) || void 0 === a ? void 0 : a.length) && (d = c(v, n, p, h), !v.nodeValue.length && r.J.isInlineBlock(v.parentNode) && (v.nodeValue = o.INVISIBLE_SPACE)), (null === (f = v.nodeValue) || void 0 === f ? void 0 : f.length) || (g = v), !(0, i.isVoid)(d) && d !== o.INVISIBLE_SPACE) {
                                l(n, v, e, s, d, t), m = !0;
                                break
                            }
                            var y = u(v, n, t.editor);
                            g && (r.J.safeRemove(g), g = null), v = y
                        }
                        return g && (r.J.safeRemove(g), g = null), m && (function (t) {
                            for (var e = t.parentElement; e && r.J.isInlineBlock(e) && r.J.isTag(e, "a");) {
                                var n = e.parentElement;
                                r.J.isEmpty(e) && (r.J.after(e, t), r.J.safeRemove(e)), e = n
                            }
                        }(e), function (t, e) {
                            e.parentElement !== t.editor && r.J.isBlock(e.parentElement) && r.J.each(e.parentElement, r.J.isEmptyTextNode) && r.J.after(e, t.createInside.element("br"))
                        }(t, e), t.s.setCursorBefore(e), r.J.isTag(e.previousSibling, "br") && !r.J.findNotEmptySibling(e, !1) && r.J.after(e, t.createInside.element("br"))), m
                    }

                    function u(t, e, n) {
                        var o = r.J.sibling(t, e);
                        return !o && t.parentNode && t.parentNode !== n && (o = (0, s.s)(t, !e, n, !0)), o
                    }

                    function c(t, e, n, s) {
                        var a = (0, i.toArray)(t.nodeValue),
                            u = a.length,
                            c = e ? u - 1 : 0;
                        if (a[c] === o.INVISIBLE_SPACE)
                            for (; a[c] === o.INVISIBLE_SPACE;) c += n;
                        var l = a[c];
                        if (a[c + n] === o.INVISIBLE_SPACE) {
                            for (c += n; a[c] === o.INVISIBLE_SPACE;) c += n;
                            c += e ? 1 : -1
                        }
                        return function (t, e, n) {
                            var s;
                            if (!t || !r.J.isText(t) || (e ? /^ / : / $/).test(null !== (s = t.nodeValue) && void 0 !== s ? s : "") || !(0, i.trimInv)(t.nodeValue || "").length)
                                for (var a = e ? n.length - 1 : 0;
                                    (e ? a >= 0 : n.length > a) && " " === n[a]; a += e ? -1 : 1) n[a] = o.NBSP_SPACE
                        }(s, e, a = e && 0 > c ? [] : a.slice(e ? 0 : c + 1, e ? c : u)), t.nodeValue = a.join(""), l
                    }

                    function l(t, e, n, s, u, c) {
                        (0, i.call)(t ? r.J.after : r.J.before, e, n), ("sentence" === s || "word" === s && " " !== u && u !== o.NBSP_SPACE) && a(c, n, t, s)
                    }
                },
                81522: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.commandToHotkeys = {
                        removeFormat: ["ctrl+shift+m", "cmd+shift+m"],
                        insertOrderedList: ["ctrl+shift+7", "cmd+shift+7"],
                        insertUnorderedList: ["ctrl+shift+8, cmd+shift+8"],
                        selectall: ["ctrl+a", "cmd+a"]
                    }
                },
                81779: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        g: function () {
                            return i
                        },
                        s: function () {
                            return r
                        }
                    });
                    var o = n(71842);

                    function r(t, e, n, r) {
                        void 0 === r && (r = !1);
                        var i = function (t) {
                                return e ? t.firstChild : t.lastChild
                            },
                            s = o.J.findNotEmptyNeighbor(t, !e, n);
                        if (r && o.J.isElement(s) && !o.J.isInlineBlock(s)) return null;
                        if (s)
                            do {
                                if (!i(s)) return s;
                                s = i(s)
                            } while (s);
                        return null
                    }

                    function i(t) {
                        return function (e) {
                            return !0 !== t.e.fire("backSpaceIsMovedIgnore", e)
                        }
                    }
                },
                81781: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C1: function () {
                            return f.C
                        },
                        Dk: function () {
                            return i.D
                        },
                        HS: function () {
                            return l.H
                        },
                        Mt: function () {
                            return u.M
                        },
                        bD: function () {
                            return r.b
                        },
                        cf: function () {
                            return c.c
                        },
                        lN: function () {
                            return o.l
                        },
                        tX: function () {
                            return s.t
                        },
                        yh: function () {
                            return a.y
                        }
                    });
                    var o = n(6110),
                        r = n(47317),
                        i = n(36291),
                        s = n(64107),
                        a = n(41159),
                        u = n(63634),
                        c = n(30687),
                        l = n(70214),
                        f = n(62453)
                },
                81875: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 270 270"> <path d="m240.443652,220.45085l-47.410809,0l0,-10.342138c13.89973,-8.43655 25.752896,-19.844464 34.686646,-33.469923c11.445525,-17.455846 17.496072,-37.709239 17.496072,-58.570077c0,-59.589197 -49.208516,-108.068714 -109.693558,-108.068714s-109.69263,48.479517 -109.69263,108.069628c0,20.860839 6.050547,41.113316 17.497001,58.570077c8.93375,13.625459 20.787845,25.032458 34.686646,33.469008l0,10.342138l-47.412666,0c-10.256959,0 -18.571354,8.191376 -18.571354,18.296574c0,10.105198 8.314395,18.296574 18.571354,18.296574l65.98402,0c10.256959,0 18.571354,-8.191376 18.571354,-18.296574l0,-39.496814c0,-7.073455 -4.137698,-13.51202 -10.626529,-16.537358c-25.24497,-11.772016 -41.557118,-37.145704 -41.557118,-64.643625c0,-39.411735 32.545369,-71.476481 72.549922,-71.476481c40.004553,0 72.550851,32.064746 72.550851,71.476481c0,27.497006 -16.312149,52.87161 -41.557118,64.643625c-6.487902,3.026253 -10.6256,9.464818 -10.6256,16.537358l0,39.496814c0,10.105198 8.314395,18.296574 18.571354,18.296574l65.982163,0c10.256959,0 18.571354,-8.191376 18.571354,-18.296574c0,-10.105198 -8.314395,-18.296574 -18.571354,-18.296574z"/> </svg>'
                },
                81982: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.delete = {
                        hotkeys: {
                            delete: ["delete", "cmd+backspace"],
                            deleteWord: ["ctrl+delete", "cmd+alt+backspace", "ctrl+alt+backspace"],
                            deleteSentence: ["ctrl+shift+delete", "cmd+shift+delete"],
                            backspace: ["backspace"],
                            backspaceWord: ["ctrl+backspace"],
                            backspaceSentence: ["ctrl+shift+backspace", "cmd+shift+backspace"]
                        }
                    }
                },
                82201: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        M: function () {
                            return r
                        }
                    });
                    var o = n(98253),
                        r = function (t) {
                            return (0, o.K)(t) && 23 === t.length && /^[a-z0-9]{5}-[a-z0-9]{5}-[a-z0-9]{5}-[a-z0-9]{5}$/i.test(t)
                        }
                },
                82317: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        _: function () {
                            return r
                        }
                    });
                    var o = n(37923),
                        r = function (t) {
                            return (0, o.c)(t) ? t : [t]
                        }
                },
                82333: function (t) {
                    "use strict";
                    t.exports = {
                        Spellcheck: "Correccin ortogrfica"
                    }
                },
                82807: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        m: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(6939),
                        i = n(70807),
                        s = function (t, e) {
                            var n = void 0 === e ? {} : e,
                                s = n.width,
                                a = void 0 === s ? 400 : s,
                                u = n.height,
                                c = void 0 === u ? 345 : u;
                            if (!(0, r.m)(t)) return t;
                            var l = o.globalDocument.createElement("a"),
                                f = /(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g;
                            l.href = t, a || (a = 400), c || (c = 345);
                            var d = l.protocol || "";
                            switch (l.hostname) {
                                case "www.vimeo.com":
                                case "vimeo.com":
                                    return f.test(t) ? t.replace(f, '<iframe width="' + a + '" height="' + c + '" src="' + d + '//player.vimeo.com/video/$1" frameborder="0" allowfullscreen></iframe>') : t;
                                case "youtube.com":
                                case "www.youtube.com":
                                case "youtu.be":
                                case "www.youtu.be":
                                    var p = l.search ? (0, i.m)(l.search) : {
                                        v: l.pathname.substring(1)
                                    };
                                    return /^embed\/.*/.test(p.v) && (p.v = p.v.substring(6)), p.v ? '<iframe width="' + a + '" height="' + c + '" src="' + d + "//www.youtube.com/embed/" + p.v + '" frameborder="0" allowfullscreen></iframe>' : t
                            }
                            return t
                        }
                },
                83044: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        y: function () {
                            return r
                        }
                    });
                    var o = n(69052);

                    function r(t) {
                        return Boolean(t && t instanceof Object && (0, o.T)(t.constructor) && ("undefined" != typeof Jodit && t instanceof Jodit || t.isJodit))
                    }
                },
                83105: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(55186),
                        s = n(56298),
                        a = n(65147),
                        u = n(71005),
                        c = (n(26725), n(39053)),
                        l = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.buttons = [{
                                    name: "lineHeight",
                                    group: "font"
                                }], (0, s.JW)(c), n
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                (0, a.css)(t.editor, {
                                    lineHeight: t.o.defaultLineHeight
                                }), t.registerCommand("applyLineHeight", this.applyLineHeight)
                            }, e.prototype.applyLineHeight = function (t, e, n) {
                                var o, r = this.j,
                                    s = r.s,
                                    u = r.createInside,
                                    c = r.editor,
                                    l = r.o;
                                s.isFocused() || s.focus(), s.save();
                                var f = function (t) {
                                    var e = i.J.closest(t, i.J.isBlock, c);
                                    e || (e = i.J.wrap(t, l.enter, u));
                                    var r = (0, a.css)(e, "lineHeight");
                                    void 0 === o && (o = r.toString() !== n.toString()), (0, a.css)(e, "lineHeight", o ? n : null)
                                };
                                try {
                                    if (s.isCollapsed()) {
                                        var d = u.fake();
                                        s.insertNode(d, !1, !1), f(d), i.J.safeRemove(d)
                                    } else s.eachSelection(f)
                                } finally {
                                    s.restore()
                                }
                            }, e.prototype.beforeDestruct = function (t) {
                                (0, a.css)(t.editor, {
                                    lineHeight: null
                                })
                            }, (0, o.Cg)([r.autobind], e.prototype, "applyLineHeight", null), e
                        }(u.k);
                    s.fg.add("lineHeight", l)
                },
                83207: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path stroke-width="0" d="M384 1408q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm0-512q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm-1408-928q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5z"/> </svg>'
                },
                83260: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        x: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                        return t.replace(/([-_])(.)/g, (function (t, e, n) {
                            return n.toUpperCase()
                        }))
                    }
                },
                83389: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M176 223q-37-2-45-4l-3-88q13-1 40-1 60 0 112 4 132 7 166 7 86 0 168-3 116-4 146-5 56 0 86-2l-1 14 2 64v9q-60 9-124 9-60 0-79 25-13 14-13 132 0 13 .5 32.5t.5 25.5l1 229 14 280q6 124 51 202 35 59 96 92 88 47 177 47 104 0 191-28 56-18 99-51 48-36 65-64 36-56 53-114 21-73 21-229 0-79-3.5-128t-11-122.5-13.5-159.5l-4-59q-5-67-24-88-34-35-77-34l-100 2-14-3 2-86h84l205 10q76 3 196-10l18 2q6 38 6 51 0 7-4 31-45 12-84 13-73 11-79 17-15 15-15 41 0 7 1.5 27t1.5 31q8 19 22 396 6 195-15 304-15 76-41 122-38 65-112 123-75 57-182 89-109 33-255 33-167 0-284-46-119-47-179-122-61-76-83-195-16-80-16-237v-333q0-188-17-213-25-36-147-39zm1488 1409v-64q0-14-9-23t-23-9h-1472q-14 0-23 9t-9 23v64q0 14 9 23t23 9h1472q14 0 23-9t9-23z"/> </svg>'
                },
                83541: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        G: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e, n) {
                        for (var r = t; r && r !== n;) {
                            if (o.J.findSibling(r, e)) return;
                            if (o.J.isBlock(r.parentElement)) break;
                            (r = r.parentElement) && r !== n && (e ? o.J.before(r, t) : o.J.after(r, t))
                        }
                    }
                },
                83797: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        S: function () {
                            return i
                        },
                        V: function () {
                            return s
                        }
                    });
                    var o = n(34248),
                        r = n(75889);

                    function i(t, e) {
                        return new r.A(t, e)
                    }

                    function s(t) {
                        return new o.t(t)
                    }
                },
                84018: function (t, e, n) {
                    "use strict";
                    var o = n(931),
                        r = n(36115),
                        i = n(86634),
                        s = n.n(i);
                    r.T.prototype.addNewLine = !0, r.T.prototype.addNewLineOnDBLClick = !0, r.T.prototype.addNewLineTagsTriggers = ["table", "iframe", "img", "hr", "pre", "jodit"], r.T.prototype.addNewLineDeltaShow = 20, o.I.set("enter", s())
                },
                84103: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        O: function () {
                            return o
                        },
                        U: function () {
                            return r
                        }
                    });
                    var o = n(51271),
                        r = n(36795)
                },
                84182: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        ar: function () {
                            return o
                        },
                        cs_cz: function () {
                            return o
                        },
                        de: function () {
                            return o
                        },
                        es: function () {
                            return r
                        },
                        fa: function () {
                            return o
                        },
                        fi: function () {
                            return o
                        },
                        fr: function () {
                            return o
                        },
                        he: function () {
                            return o
                        },
                        hu: function () {
                            return o
                        },
                        id: function () {
                            return o
                        },
                        it: function () {
                            return o
                        },
                        ja: function () {
                            return o
                        },
                        ko: function () {
                            return o
                        },
                        mn: function () {
                            return o
                        },
                        nl: function () {
                            return o
                        },
                        pl: function () {
                            return o
                        },
                        pt_br: function () {
                            return o
                        },
                        ru: function () {
                            return o
                        },
                        tr: function () {
                            return o
                        },
                        ua: function () {
                            return o
                        },
                        zh_cn: function () {
                            return o
                        },
                        zh_tw: function () {
                            return o
                        }
                    });
                    var o = n(41324),
                        r = n(88146)
                },
                84323: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        f: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(42898);

                    function s(t, e, n) {
                        var s = r.J.findSibling(e, n);
                        return !(!r.J.isElement(s) || !r.J.isTag(s, o.INSEPARABLE_TAGS) && !r.J.isEmpty(s) || (r.J.safeRemove(s), r.J.isTag(s, "br") && !r.J.findNotEmptySibling(e, !1) && r.J.after(e, t.createInside.element("br")), t.s.setCursorBefore(e), r.J.isTag(s, "br") && (0, i.C)(t, e, n), 0))
                    }
                },
                84345: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        u: function () {
                            return o
                        }
                    });
                    var o = function () {
                        function t(t, e, n, o) {
                            this.oldValue = t, this.newValue = e, this.history = n, this.tick = o
                        }
                        return t.prototype.undo = function () {
                            this.history.snapshot.restore(this.oldValue)
                        }, t.prototype.redo = function () {
                            this.history.snapshot.restore(this.newValue)
                        }, t
                    }()
                },
                84602: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        L: function () {
                            return d
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(65147),
                        u = n(9823),
                        c = (n(28712), n(83541)),
                        l = n(8757),
                        f = n(46602),
                        d = function () {
                            function t(t) {
                                var e = this;
                                this.jodit = t, t.e.on("removeMarkers", (function () {
                                    e.removeMarkers()
                                }))
                            }
                            return Object.defineProperty(t.prototype, "j", {
                                get: function () {
                                    return this.jodit
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.errorNode = function (t) {
                                if (!s.J.isNode(t)) throw (0, a.error)("Parameter node must be instance of Node")
                            }, Object.defineProperty(t.prototype, "area", {
                                get: function () {
                                    return this.j.editor
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "win", {
                                get: function () {
                                    return this.j.ew
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "doc", {
                                get: function () {
                                    return this.j.ed
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "sel", {
                                get: function () {
                                    return this.j.o.shadowRoot && (0, u.Tn)(this.j.o.shadowRoot.getSelection) ? this.j.o.shadowRoot.getSelection() : this.win.getSelection()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "range", {
                                get: function () {
                                    var t = this.sel;
                                    return t && t.rangeCount ? t.getRangeAt(0) : this.createRange()
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "isInsideArea", {
                                get: function () {
                                    var t = this.sel,
                                        e = (null == t ? void 0 : t.rangeCount) ? t.getRangeAt(0) : null;
                                    return !(!e || !s.J.isOrContains(this.area, e.startContainer))
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.createRange = function (t) {
                                void 0 === t && (t = !1);
                                var e = this.doc.createRange();
                                return t && this.selectRange(e), e
                            }, t.prototype.remove = function () {
                                var t = this.sel,
                                    e = this.current();
                                if (t && e)
                                    for (var n = 0; t.rangeCount > n; n += 1) t.getRangeAt(n).deleteContents(), t.getRangeAt(n).collapse(!0)
                            }, t.prototype.clear = function () {
                                var t, e;
                                (null === (t = this.sel) || void 0 === t ? void 0 : t.rangeCount) && (null === (e = this.sel) || void 0 === e || e.removeAllRanges())
                            }, t.prototype.removeNode = function (t) {
                                if (!s.J.isOrContains(this.j.editor, t, !0)) throw (0, a.error)("Selection.removeNode can remove only editor's children");
                                s.J.safeRemove(t), this.j.e.fire("afterRemoveNode", t)
                            }, t.prototype.insertCursorAtPoint = function (t, e) {
                                var n = this;
                                this.removeMarkers();
                                try {
                                    var o = this.createRange();
                                    return function () {
                                        if (n.doc.caretPositionFromPoint && (r = n.doc.caretPositionFromPoint(t, e))) o.setStart(r.offsetNode, r.offset);
                                        else if (n.doc.caretRangeFromPoint) {
                                            var r = n.doc.caretRangeFromPoint(t, e);
                                            o.setStart(r.startContainer, r.startOffset)
                                        }
                                    }(), o.collapse(!0), this.selectRange(o), !0
                                } catch (t) {}
                                return !1
                            }, Object.defineProperty(t.prototype, "hasMarkers", {
                                get: function () {
                                    return Boolean(this.markers.length)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(t.prototype, "markers", {
                                get: function () {
                                    return (0, a.$$)("span[data-" + r.MARKER_CLASS + "]", this.area)
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.removeMarkers = function () {
                                s.J.safeRemove.apply(null, this.markers)
                            }, t.prototype.marker = function (t, e) {
                                void 0 === t && (t = !1);
                                var n = null;
                                e && (n = e.cloneRange()).collapse(t);
                                var o = this.j.createInside.span();
                                return o.id = r.MARKER_CLASS + "_" + Number(new Date) + "_" + String(Math.random()).slice(2), o.style.lineHeight = "0", o.style.display = "none", s.J.markTemporary(o), (0, a.attr)(o, "data-" + r.MARKER_CLASS, t ? "start" : "end"), o.appendChild(this.j.createInside.text(r.INVISIBLE_SPACE)), n && s.J.isOrContains(this.area, t ? n.startContainer : n.endContainer) && n.insertNode(o), o
                            }, t.prototype.restore = function () {
                                var t = !1,
                                    e = function (t) {
                                        return "span[data-".concat(r.MARKER_CLASS, "=").concat(t ? "start" : "end", "]")
                                    },
                                    n = this.area.querySelector(e(!0)),
                                    o = this.area.querySelector(e(!1));
                                if (n) {
                                    if (t = this.createRange(), o) t.setStartAfter(n), s.J.safeRemove(n), t.setEndBefore(o), s.J.safeRemove(o);
                                    else {
                                        var i = n.previousSibling;
                                        s.J.isText(i) ? t.setStart(i, i.nodeValue ? i.nodeValue.length : 0) : t.setStartBefore(n), s.J.safeRemove(n), t.collapse(!0)
                                    }
                                    t && this.selectRange(t)
                                }
                            }, t.prototype.fakes = function () {
                                var t = this.sel;
                                if (!t || !t.rangeCount) return [];
                                var e = t.getRangeAt(0),
                                    n = e.cloneRange();
                                n.collapse(!0);
                                var o = this.j.createInside.fake();
                                s.J.safeInsertNode(n, o), e.setStartBefore(o);
                                var r = [o];
                                if (!e.collapsed) {
                                    var i = e.cloneRange();
                                    i.collapse(!1);
                                    var a = this.j.createInside.fake();
                                    s.J.safeInsertNode(i, a), e.setEndAfter(a), r.push(a)
                                }
                                return this.selectRange(e), r
                            }, t.prototype.restoreFakes = function (t) {
                                var e, n, r, i, a = t.filter((function (t) {
                                    return t.isConnected
                                }));
                                if (a.length) {
                                    var u = (0, o.zs)(a, 2),
                                        c = u[0],
                                        l = u[1],
                                        f = this.createRange();
                                    f.setStartAfter(c), l && f.setEndBefore(l), this.selectRange(f), (null === (e = c.parentNode) || void 0 === e ? void 0 : e.firstChild) !== (null === (n = c.parentNode) || void 0 === n ? void 0 : n.lastChild) && s.J.safeRemove(c), (null === (r = null == l ? void 0 : l.parentNode) || void 0 === r ? void 0 : r.firstChild) !== (null === (i = null == l ? void 0 : l.parentNode) || void 0 === i ? void 0 : i.lastChild) && s.J.safeRemove(l)
                                }
                            }, t.prototype.save = function (t) {
                                if (void 0 === t && (t = !1), this.hasMarkers) return [];
                                var e = this.sel;
                                if (!e || !e.rangeCount) return [];
                                for (var n = [], o = e.rangeCount, r = [], i = 0; o > i; i += 1)
                                    if (r[i] = e.getRangeAt(i), r[i].collapsed) {
                                        var s = this.marker(!0, r[i]);
                                        n[i] = {
                                            startId: s.id,
                                            collapsed: !0,
                                            startMarker: s.outerHTML
                                        }
                                    } else {
                                        s = this.marker(!0, r[i]);
                                        var a = this.marker(!1, r[i]);
                                        n[i] = {
                                            startId: s.id,
                                            endId: a.id,
                                            collapsed: !1,
                                            startMarker: s.outerHTML,
                                            endMarker: a.outerHTML
                                        }
                                    } if (!t)
                                    for (e.removeAllRanges(), i = o - 1; i >= 0; --i) {
                                        var u = this.doc.getElementById(n[i].startId);
                                        if (u) {
                                            if (n[i].collapsed) r[i].setStartAfter(u), r[i].collapse(!0);
                                            else if (r[i].setStartBefore(u), n[i].endId) {
                                                var c = this.doc.getElementById(n[i].endId);
                                                c && r[i].setEndAfter(c)
                                            }
                                            try {
                                                e.addRange(r[i].cloneRange())
                                            } catch (t) {}
                                        }
                                    }
                                return n
                            }, t.prototype.focus = function (t) {
                                var e, n;
                                if (void 0 === t && (t = {
                                        preventScroll: !0
                                    }), !this.isFocused()) {
                                    var o = (0, a.getScrollParent)(this.j.container),
                                        r = null == o ? void 0 : o.scrollTop;
                                    this.j.iframe && "complete" === this.doc.readyState && this.j.iframe.focus(t), this.win.focus(), this.area.focus(t), r && (null == o ? void 0 : o.scrollTo) && o.scrollTo(0, r);
                                    var i = this.sel,
                                        u = (null == i ? void 0 : i.rangeCount) ? null == i ? void 0 : i.getRangeAt(0) : null;
                                    if (!u || !s.J.isOrContains(this.area, u.startContainer)) {
                                        var c = this.createRange();
                                        c.setStart(this.area, 0), c.collapse(!0), this.selectRange(c, !1)
                                    }
                                    return this.j.editorIsActive || null === (n = null === (e = this.j) || void 0 === e ? void 0 : e.events) || void 0 === n || n.fire("focus"), !0
                                }
                                return !1
                            }, t.prototype.isCollapsed = function () {
                                for (var t = this.sel, e = 0; t && t.rangeCount > e; e += 1)
                                    if (!t.getRangeAt(e).collapsed) return !1;
                                return !0
                            }, t.prototype.isFocused = function () {
                                return this.doc.hasFocus && this.doc.hasFocus() && this.area === this.doc.activeElement
                            }, t.prototype.current = function (t) {
                                if (void 0 === t && (t = !0), this.j.getRealMode() !== r.MODE_WYSIWYG) return null;
                                var e = this.sel;
                                if (!e || 0 === e.rangeCount) return null;
                                var n = e.getRangeAt(0),
                                    o = n.startContainer,
                                    i = !1;
                                if (s.J.isTag(o, "br") && e.isCollapsed) return o;
                                if (!s.J.isText(o)) {
                                    var a = (0, f.dY)(o, n, i, e.isCollapsed, t, (function (t) {
                                        return i ? t.lastChild : t.firstChild
                                    }));
                                    o = a.node, i = a.rightMode
                                }
                                return o && s.J.isOrContains(this.area, o) ? o : null
                            }, t.prototype.insertNode = function (t, e, n) {
                                var o = this;
                                void 0 === e && (e = !0), void 0 === n && (n = !0), this.errorNode(t);
                                var r = s.J.isFragment(t) ? t.lastChild : t;
                                this.j.e.fire("safeHTML", t), !this.isFocused() && this.j.isEditorMode() && (this.focus(), this.restore());
                                var i = this.sel;
                                this.j.history.snapshot.transaction((function () {
                                    if (o.isCollapsed() || o.j.execCommand("Delete"), o.j.e.fire("beforeInsertNode", t), i && i.rangeCount) {
                                        var n = i.getRangeAt(0);
                                        s.J.isOrContains(o.area, n.commonAncestorContainer) ? s.J.safeInsertNode(n, t) : o.area.appendChild(t)
                                    } else o.area.appendChild(t);
                                    var u = function (t) {
                                        if (s.J.isBlock(t)) {
                                            var e = t.lastChild;
                                            if (e) return u(e)
                                        }
                                        o.setCursorAfter(t)
                                    };
                                    e && (s.J.isFragment(t) ? r && u(r) : u(t)), o.j.o.scrollToPastedContent && (0, a.scrollIntoViewIfNeeded)(null != r ? r : t, o.j.editor, o.doc)
                                })), n && this.j.events && this.j.__imdSynchronizeValues(), this.j.events && this.j.e.fire("afterInsertNode", s.J.isFragment(t) ? r : t)
                            }, t.prototype.insertHTML = function (t, e) {
                                if (void 0 === e && (e = !0), "" !== t) {
                                    var n = this.j.createInside.div(),
                                        o = this.j.createInside.fragment();
                                    if (!this.isFocused() && this.j.isEditorMode() && (this.focus(), this.restore()), s.J.isNode(t) ? n.appendChild(t) : n.innerHTML = t.toString(), (this.j.isEditorMode() || !1 !== this.j.e.fire("insertHTML", n.innerHTML)) && n.lastChild) {
                                        for (; n.firstChild;) o.appendChild(n.firstChild);
                                        this.insertNode(o, e, !1), this.j.__imdSynchronizeValues()
                                    }
                                }
                            }, t.prototype.insertImage = function (t, e, n) {
                                void 0 === e && (e = null), void 0 === n && (n = null);
                                var o = (0, u.Kg)(t) ? this.j.createInside.element("img") : t;
                                if ((0, u.Kg)(t) && o.setAttribute("src", t), null != n) {
                                    var r = n.toString();
                                    r && "auto" !== r && 0 > String(r).indexOf("px") && 0 > String(r).indexOf("%") && (r += "px"), (0, a.attr)(o, "width", r)
                                }
                                e && "object" == typeof e && (0, a.css)(o, e);
                                var i = function () {
                                    (o.offsetHeight > o.naturalHeight || o.offsetWidth > o.naturalWidth) && (o.style.width = "", o.style.height = ""), o.removeEventListener("load", i)
                                };
                                this.j.e.on(o, "load", i), o.complete && i(), this.insertNode(o), this.j.e.fire("afterInsertImage", o)
                            }, t.prototype.eachSelection = function (t) {
                                var e, n = this,
                                    o = this.sel;
                                if (o && o.rangeCount) {
                                    var i = o.getRangeAt(0),
                                        c = i.commonAncestorContainer;
                                    s.J.isHTMLElement(c) || (c = c.parentElement);
                                    var l = [],
                                        f = i.startOffset,
                                        d = c.childNodes.length,
                                        p = i.startContainer === this.area ? c.childNodes[d > f ? f : d - 1] : i.startContainer,
                                        h = i.endContainer === this.area ? c.childNodes[i.endOffset - 1] : i.endContainer;
                                    s.J.isText(p) && p === i.startContainer && i.startOffset === (null === (e = p.nodeValue) || void 0 === e ? void 0 : e.length) && p.nextSibling && (p = p.nextSibling), s.J.isText(h) && h === i.endContainer && 0 === i.endOffset && h.previousSibling && (h = h.previousSibling);
                                    var v = function (t) {
                                        !t || t === c || s.J.isEmptyTextNode(t) || (0, u.rg)(t) || l.push(t)
                                    };
                                    v(p), p !== h && s.J.isOrContains(c, p, !0) && s.J.find(p, (function (t) {
                                        return v(t), t === h || t && t.contains && t.contains(h)
                                    }), c, !0, !1);
                                    var g = function (e) {
                                        if (s.J.isOrContains(n.j.editor, e, !0)) {
                                            if (e.nodeName.match(/^(UL|OL)$/)) return (0, a.toArray)(e.childNodes).forEach(g);
                                            if (s.J.isTag(e, "li"))
                                                if (e.firstChild) e = e.firstChild;
                                                else {
                                                    var o = n.j.createInside.text(r.INVISIBLE_SPACE);
                                                    e.appendChild(o), e = o
                                                } t(e)
                                        }
                                    };
                                    0 === l.length && (s.J.isEmptyTextNode(p) && l.push(p), p.firstChild && l.push(p.firstChild)), l.forEach(g)
                                }
                            }, t.prototype.cursorInTheEdge = function (t, e, n) {
                                var o, r = this;
                                void 0 === n && (n = null);
                                var i = !t,
                                    u = null === (o = this.sel) || void 0 === o ? void 0 : o.getRangeAt(0);
                                if (null != n || (n = this.current(!1)), !u || !n || !s.J.isOrContains(e, n, !0)) return null;
                                var c = t ? u.startContainer : u.endContainer,
                                    l = t ? u.startOffset : u.endOffset,
                                    d = function (t) {
                                        return Boolean(t && !s.J.isTag(t, "br") && !s.J.isEmptyTextNode(t) && !s.J.isTemporary(t) && !(s.J.isElement(t) && !0 === r.j.e.fire("isInvisibleForCursor", t)))
                                    };
                                if (s.J.isText(c)) {
                                    if ((0, f.Qe)(c, l, t, i)) return !1
                                } else {
                                    var p = (0, a.toArray)(c.childNodes);
                                    if (i) {
                                        if (p.slice(l).some(d)) return !1
                                    } else if (p.slice(0, l).some(d)) return !1
                                }
                                for (var h = n; h && h !== e;) {
                                    var v = s.J.sibling(h, t);
                                    if (v) {
                                        if ((h = v) && d(h)) return !1
                                    } else h = h.parentNode
                                }
                                return !0
                            }, t.prototype.cursorOnTheLeft = function (t, e) {
                                return this.cursorInTheEdge(!0, t, e)
                            }, t.prototype.cursorOnTheRight = function (t, e) {
                                return this.cursorInTheEdge(!1, t, e)
                            }, t.prototype.setCursorAfter = function (t) {
                                return this.setCursorNearWith(t, !1)
                            }, t.prototype.setCursorBefore = function (t) {
                                return this.setCursorNearWith(t, !0)
                            }, t.prototype.setCursorNearWith = function (t, e) {
                                var n, o, r = this;
                                if (this.errorNode(t), !s.J.up(t, (function (t) {
                                        return t === r.area || t && t.parentNode === r.area
                                    }), this.area)) throw (0, a.error)("Node element must be in editor");
                                var i = this.createRange(),
                                    u = null;
                                return s.J.isText(t) ? e ? i.setStart(t, 0) : i.setEnd(t, null !== (o = null === (n = t.nodeValue) || void 0 === n ? void 0 : n.length) && void 0 !== o ? o : 0) : (u = this.j.createInside.fake(), e ? i.setStartBefore(t) : i.setEndAfter(t), i.collapse(e), s.J.safeInsertNode(i, u), i.selectNode(u)), i.collapse(e), this.selectRange(i), u
                            }, t.prototype.setCursorIn = function (t, e) {
                                var n = this;
                                if (void 0 === e && (e = !1), this.errorNode(t), !s.J.up(t, (function (t) {
                                        return t === n.area || t && t.parentNode === n.area
                                    }), this.area)) throw (0, a.error)("Node element must be in editor");
                                var o = this.createRange(),
                                    i = t,
                                    u = t;
                                do {
                                    if (s.J.isText(i) || s.J.isTag(i, r.INSEPARABLE_TAGS)) break;
                                    u = i, i = e ? i.firstChild : i.lastChild
                                } while (i);
                                if (!i) {
                                    var c = this.j.createInside.text(r.INVISIBLE_SPACE);
                                    s.J.isTag(u, r.INSEPARABLE_TAGS) ? i = u : (u.appendChild(c), u = c)
                                }
                                var l = i || u;
                                return s.J.isTag(l, r.INSEPARABLE_TAGS) ? (e || s.J.isTag(l, "br") ? o.setStartBefore(l) : o.setEndAfter(l), o.collapse(e)) : (o.selectNodeContents(l), o.collapse(e)), this.selectRange(o), u
                            }, t.prototype.selectRange = function (t, e) {
                                void 0 === e && (e = !0);
                                var n = this.sel;
                                return e && !this.isFocused() && this.focus(), n && (n.removeAllRanges(), n.addRange(t)), this.j.e.fire("changeSelection"), this
                            }, t.prototype.select = function (t, e) {
                                var n = this;
                                if (void 0 === e && (e = !1), this.errorNode(t), !s.J.up(t, (function (t) {
                                        return t === n.area || t && t.parentNode === n.area
                                    }), this.area)) throw (0, a.error)("Node element must be in editor");
                                var o = this.createRange();
                                return o[e ? "selectNodeContents" : "selectNode"](t), this.selectRange(o)
                            }, Object.defineProperty(t.prototype, "html", {
                                get: function () {
                                    var t = this.sel;
                                    if (t && t.rangeCount > 0) {
                                        var e = t.getRangeAt(0).cloneContents(),
                                            n = this.j.createInside.div();
                                        return n.appendChild(e), n.innerHTML
                                    }
                                    return ""
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.wrapInTagGen = function (t) {
                                var e, n, i, c, l, f, d, p, h;
                                return (0, o.YH)(this, (function (v) {
                                    switch (v.label) {
                                        case 0:
                                            return this.isCollapsed() ? (c = this.jodit.createInside.element("font", r.INVISIBLE_SPACE), this.insertNode(c, !1, !1), t && t[0] && c.appendChild(t[0]), [4, c]) : [3, 2];
                                        case 1:
                                            return v.sent(), s.J.unwrap(c), [2];
                                        case 2:
                                            (0, a.$$)("*[style*=font-size]", this.area).forEach((function (t) {
                                                (0, a.attr)(t, "data-font-size", t.style.fontSize.toString()), t.style.removeProperty("font-size")
                                            })), this.j.nativeExecCommand("fontsize", !1, "7"), (0, a.$$)("*[data-font-size]", this.area).forEach((function (t) {
                                                var e = (0, a.attr)(t, "data-font-size");
                                                e && (t.style.fontSize = e, (0, a.attr)(t, "data-font-size", null))
                                            })), e = (0, a.$$)('font[size="7"]', this.area), v.label = 3;
                                        case 3:
                                            v.trys.push([3, 8, 9, 10]), n = (0, o.Ju)(e), i = n.next(), v.label = 4;
                                        case 4:
                                            return i.done ? [3, 7] : (f = (c = i.value).lastChild, (l = c.firstChild) && l === f && (0, u.rg)(l) ? (s.J.unwrap(c), [3, 6]) : (l && (0, u.rg)(l) && s.J.before(c, l), f && (0, u.rg)(f) && s.J.after(c, f), [4, c]));
                                        case 5:
                                            v.sent(), s.J.unwrap(c), v.label = 6;
                                        case 6:
                                            return i = n.next(), [3, 4];
                                        case 7:
                                            return [3, 10];
                                        case 8:
                                            return d = v.sent(), p = {
                                                error: d
                                            }, [3, 10];
                                        case 9:
                                            try {
                                                i && !i.done && (h = n.return) && h.call(n)
                                            } finally {
                                                if (p) throw p.error
                                            }
                                            return [7];
                                        case 10:
                                            return [2]
                                    }
                                }))
                            }, t.prototype.wrapInTag = function (t) {
                                var e, n, r = [];
                                try {
                                    for (var i = (0, o.Ju)(this.wrapInTagGen()), a = i.next(); !a.done; a = i.next()) {
                                        var c = a.value;
                                        try {
                                            if (c.firstChild && c.firstChild === c.lastChild && (0, u.rg)(c.firstChild)) continue;
                                            (0, u.Tn)(t) ? t(c): r.push(s.J.replace(c, t, this.j.createInside))
                                        } finally {
                                            var l = c.parentNode;
                                            l && (s.J.unwrap(c), s.J.isEmpty(l) && s.J.unwrap(l))
                                        }
                                    }
                                } catch (t) {
                                    e = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        a && !a.done && (n = i.return) && n.call(i)
                                    } finally {
                                        if (e) throw e.error
                                    }
                                }
                                return r
                            }, t.prototype.commitStyle = function (t) {
                                new l.x(t).apply(this.j)
                            }, t.prototype.splitSelection = function (t, e) {
                                if (!this.isCollapsed()) return null;
                                var n = this.createRange(),
                                    o = this.range;
                                n.setStartBefore(t);
                                var i = this.cursorOnTheRight(t, e),
                                    a = this.cursorOnTheLeft(t, e),
                                    u = this.j.createInside.element("br"),
                                    c = this.j.createInside.fake(),
                                    l = c.cloneNode();
                                try {
                                    if (i || a) {
                                        e ? s.J.before(e, u) : s.J.safeInsertNode(o, u);
                                        var f = function (t, e) {
                                            for (var n = e(t); n;) {
                                                var o = e(n);
                                                if (!n || !s.J.isTag(n, "br") && !s.J.isEmptyTextNode(n)) break;
                                                s.J.safeRemove(n), n = o
                                            }
                                        };
                                        f(u, (function (t) {
                                            return t.nextSibling
                                        })), f(u, (function (t) {
                                            return t.previousSibling
                                        })), s.J.after(u, l), s.J.before(u, c), i ? (n.setEndBefore(u), o.setEndBefore(u)) : (n.setEndAfter(u), o.setEndAfter(u))
                                    } else n.setEnd(o.startContainer, o.startOffset);
                                    var d = n.extractContents(),
                                        p = function (t) {
                                            return s.J.each(t, (function (t) {
                                                return s.J.isEmptyTextNode(t) && s.J.safeRemove(t)
                                            }))
                                        };
                                    try {
                                        if (p(d), p(t), t.parentNode.insertBefore(d, t), !e && i && (null == u ? void 0 : u.parentNode)) {
                                            var h = this.createRange();
                                            h.setStartBefore(u), this.selectRange(h)
                                        }
                                    } catch (t) {
                                        if (!r.IS_PROD) throw t
                                    }
                                    var v = function (t) {
                                        var e, n, o;
                                        (null === (e = null == t ? void 0 : t.parentNode) || void 0 === e ? void 0 : e.firstChild) === (null === (n = null == t ? void 0 : t.parentNode) || void 0 === n ? void 0 : n.lastChild) && (null === (o = null == t ? void 0 : t.parentNode) || void 0 === o || o.appendChild(u.cloneNode()))
                                    };
                                    v(c), v(l)
                                } finally {
                                    s.J.safeRemove(c), s.J.safeRemove(l)
                                }
                                return t.previousElementSibling
                            }, t.prototype.expandSelection = function () {
                                var t = this;
                                if (this.isCollapsed()) return this;
                                var e = this.range,
                                    n = e.cloneRange();
                                if (!s.J.isOrContains(this.j.editor, e.commonAncestorContainer, !0)) return this;
                                var o = function (n) {
                                        var o = t.j.createInside.fake(),
                                            r = e.cloneRange();
                                        return r.collapse(n), s.J.safeInsertNode(r, o), (0, c.G)(o, n, t.j.editor), o
                                    },
                                    r = o(!0),
                                    i = o(!1);
                                n.setStartAfter(r), n.setEndBefore(i);
                                var u = s.J.findSibling(r, !1),
                                    l = s.J.findSibling(i, !0);
                                if (u !== l) {
                                    var f = s.J.isElement(u) && s.J.isOrContains(u, i),
                                        d = !f && s.J.isElement(l) && s.J.isOrContains(l, r);
                                    if (f || d) {
                                        for (var p = f ? u : l, h = p; s.J.isElement(p);)(p = f ? p.firstElementChild : p.lastElementChild) && s.J.isOrContains(p, f ? i : r) && (h = p);
                                        f ? n.setStart(h, 0) : n.setEnd(h, h.childNodes.length)
                                    }
                                }
                                if (this.selectRange(n), s.J.safeRemove(r, i), this.isCollapsed()) throw (0, a.error)("Selection is collapsed");
                                return this
                            }, (0, o.Cg)([i.autobind], t.prototype, "createRange", null), (0, o.Cg)([i.autobind], t.prototype, "focus", null), (0, o.Cg)([i.autobind], t.prototype, "setCursorAfter", null), (0, o.Cg)([i.autobind], t.prototype, "setCursorBefore", null), (0, o.Cg)([i.autobind], t.prototype, "setCursorIn", null), t
                        }()
                },
                84759: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        d: function () {
                            return c
                        }
                    });
                    var o = n(17352),
                        r = n(71842),
                        i = n(56298),
                        s = n(65147),
                        a = n(51923),
                        u = n(74714);

                    function c(t, e, n, c, l) {
                        if (e && (!e.types.length || e.types[0] !== o.TEXT_PLAIN)) {
                            var f = t.j.c.div("", {
                                tabindex: -1,
                                style: "left: -9999px; top: 0; width: 0; height: 100%;line-height: 140%; overflow: hidden; position: fixed; z-index: 2147483647; word-break: break-all;",
                                contenteditable: !0
                            });
                            (0, i.My)(t.j, t.constructor).appendChild(f);
                            var d = (0, s.isJoditObject)(t.j) ? t.j.s.save() : null;
                            f.focus(), t.j.async.setTimeout((function () {
                                var e = f.firstChild;
                                if (r.J.safeRemove(f), e && e.hasAttribute("src")) {
                                    var o = (0, s.attr)(e, "src") || "";
                                    d && (0, s.isJoditObject)(t.j) && t.j.s.restore(), (0, u._)(t, [(0, a.z)(o)], n, c).finally(l)
                                }
                            }), t.j.defaultTimeout)
                        }
                    }
                },
                84976: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        HP: function () {
                            return d
                        },
                        T1: function () {
                            return u
                        },
                        b_: function () {
                            return c
                        },
                        my: function () {
                            return h
                        },
                        o_: function () {
                            return l
                        },
                        qN: function () {
                            return p
                        },
                        yt: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(92039),
                        i = n(35642),
                        s = n(26150),
                        a = n(72197);

                    function u(t) {
                        for (var e = [], n = 1; arguments.length > n; n++) e[n - 1] = arguments[n];
                        return t.apply(void 0, (0, o.fX)([], (0, o.zs)(e), !1))
                    }

                    function c(t, e) {
                        (0, s.C)(e, "data-editor_id", t.id), !e.component && Object.defineProperty(e, "jodit", {
                            value: t
                        })
                    }

                    function l(t, e) {
                        return (0, r.y)(t) ? t.then((function (t) {
                            return t
                        }), (function () {
                            return null
                        })).finally(e) : null == e ? void 0 : e()
                    }
                    var f = function (t, e) {
                            return e.async.promise((function (n, o) {
                                var r = new Image,
                                    i = function () {
                                        e.e.off(r), null == o || o()
                                    },
                                    s = function () {
                                        e.e.off(r), n(r)
                                    };
                                e.e.one(r, "load", s).one(r, "error", i).one(r, "abort", i), r.src = t, r.complete && s()
                            }))
                        },
                        d = function (t, e) {
                            if (void 0 === e && (e = !0), e) return Object.keys(t);
                            var n = [];
                            for (var o in t) n.push(o);
                            return n
                        },
                        p = function (t, e, n, o) {
                            var r, s = n.control,
                                u = "button".concat(s.command),
                                c = null !== (r = s.args && s.args[0]) && void 0 !== r ? r : (0, a.m)(t, u);
                            if ((0, i.R)(c)) return !1;
                            (0, a.m)(t, u, c), o && (c = o(c)), t.execCommand(s.command, !1, null != c ? c : void 0)
                        },
                        h = function (t) {
                            if (t.clipboardData) return t.clipboardData;
                            try {
                                return t.dataTransfer || new DataTransfer
                            } catch (t) {
                                return null
                            }
                        }
                },
                85079: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        E: function () {
                            return r
                        }
                    });
                    var o = n(449);

                    function r(t, e, n) {
                        var r = !0,
                            i = !1;
                        ["marginTop", "marginRight", "marginBottom", "marginLeft"].forEach((function (n) {
                            var s = t.style.getPropertyValue((0, o.k)(n));
                            if (!s) return i = !0, void(e[n] = 0);
                            /^[0-9]+(px)?$/.test(s) && (s = parseInt(s, 10)), e[n] = s, (i && e[n] || r && "marginTop" !== n && e[n] !== e.marginTop) && (r = !1)
                        })), n.marginIsLocked = r
                    }
                },
                86248: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        VL: function () {
                            return d
                        },
                        pi: function () {
                            return p
                        },
                        tb: function () {
                            return f
                        }
                    });
                    var o = n(31635),
                        r = n(37923),
                        i = n(25376),
                        s = n(98253),
                        a = n(35642),
                        u = n(36115),
                        c = n(49429),
                        l = n(84976);

                    function f(t, e, n) {
                        if (void 0 === n && (n = 0), Object.getPrototypeOf(t) !== Object.prototype) return t;
                        var l = u.T.defaultOptions;
                        if ((0, s.K)(t.preset)) {
                            if (void 0 !== l.presets[t.preset]) {
                                var d = l.presets[t.preset];
                                Object.keys(d).forEach((function (e) {
                                    (0, a.R)(t[e]) && (t[e] = d[e])
                                }))
                            }
                            delete t.preset
                        }
                        var p = {};
                        return Object.keys(t).forEach((function (s) {
                            var a = t[s],
                                u = e ? e[s] : null;
                            p[s] = (0, i.Q)(a) && (0, i.Q)(u) && !(0, c.mA)(a) ? f(a, u, n + 1) : 0 !== n && (0, r.c)(a) && !(0, c.mA)(a) && (0, r.c)(u) ? (0, o.fX)((0, o.fX)([], (0, o.zs)(a), !1), (0, o.zs)(u.slice(a.length)), !1) : a
                        })), Object.setPrototypeOf(p, e), p
                    }

                    function d(t) {
                        return (0, l.HP)(t, !1).reduce((function (e, n) {
                            return e[n] = t[n], e
                        }), {})
                    }

                    function p(t) {
                        return (0, l.HP)(t, !1).reduce((function (e, n) {
                            return e[n] = (0, i.Q)(t[n]) ? p(t[n]) : t[n], e
                        }), {})
                    }
                },
                86283: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UISeparator"
                            }, (0, o.Cg)([r.s], e)
                        }(n(29780).D)
                },
                86285: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        N: function () {
                            return a
                        }
                    });
                    var o = n(31635),
                        r = n(77753),
                        i = n(69052),
                        s = n(50156);

                    function a() {
                        return function (t, e) {
                            if (!(0, i.T)(t[e])) throw (0, s.z3)("Handler must be a Function");
                            t.hookStatus(r.f.ready, (function (t) {
                                var n = t.async,
                                    r = t[e];
                                t[e] = function () {
                                    for (var e = [], i = 0; arguments.length > i; i++) e[i] = arguments[i];
                                    return n.requestIdleCallback(r.bind.apply(r, (0, o.fX)([t], (0, o.zs)(e), !1)))
                                }
                            }))
                        }
                    }
                },
                86302: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        j: function () {
                            return h
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(89044),
                        s = n(99951),
                        a = n(69052),
                        u = n(2461),
                        c = n(25376),
                        l = n(92039),
                        f = n(98253),
                        d = n(35642),
                        p = (n(28712), n(21567)),
                        h = function () {
                            function t() {
                                var t, e, n, o, r, i = this;
                                this.timers = new Map, this.__callbacks = new Map, this.__queueMicrotaskNative = null !== (t = null === queueMicrotask || void 0 === queueMicrotask ? void 0 : queueMicrotask.bind(window)) && void 0 !== t ? t : Promise.resolve().then.bind(Promise.resolve()), this.promisesRejections = new Set, this.__requestsIdle = new Set, this.__controllers = new Set, this.__requestsRaf = new Set, this.__requestIdleCallbackNative = null !== (n = null === (e = window.requestIdleCallback) || void 0 === e ? void 0 : e.bind(window)) && void 0 !== n ? n : function (t, e) {
                                    var n, o = Date.now();
                                    return i.setTimeout((function () {
                                        t({
                                            didTimeout: !1,
                                            timeRemaining: function () {
                                                return Math.max(0, 50 - (Date.now() - o))
                                            }
                                        })
                                    }), null !== (n = null == e ? void 0 : e.timeout) && void 0 !== n ? n : 1)
                                }, this.__cancelIdleCallbackNative = null !== (r = null === (o = window.cancelIdleCallback) || void 0 === o ? void 0 : o.bind(window)) && void 0 !== r ? r : function (t) {
                                    i.clearTimeout(t)
                                }, this.isDestructed = !1
                            }
                            return t.prototype.delay = function (t) {
                                var e = this;
                                return this.promise((function (n) {
                                    return e.setTimeout(n, t)
                                }))
                            }, t.prototype.setTimeout = function (t, e) {
                                for (var n = [], r = 2; arguments.length > r; r++) n[r - 2] = arguments[r];
                                if (this.isDestructed) return 0;
                                var s = {};
                                (0, d.R)(e) && (e = 0), (0, u.E)(e) || (e = (s = e).timeout || 0), s.label && this.clearLabel(s.label);
                                var a = i.w.apply(void 0, (0, o.fX)([t, e], (0, o.zs)(n), !1)),
                                    c = s.label || a;
                                return this.timers.set(c, a), this.__callbacks.set(c, t), a
                            }, t.prototype.updateTimeout = function (t, e) {
                                if (!t || !this.timers.has(t)) return null;
                                var n = this.__callbacks.get(t);
                                return this.setTimeout(n, {
                                    label: t,
                                    timeout: e
                                })
                            }, t.prototype.clearLabel = function (t) {
                                t && this.timers.has(t) && ((0, i.D)(this.timers.get(t)), this.timers.delete(t), this.__callbacks.delete(t))
                            }, t.prototype.clearTimeout = function (t) {
                                if ((0, f.K)(t)) return this.clearLabel(t);
                                (0, i.D)(t), this.timers.delete(t), this.__callbacks.delete(t)
                            }, t.prototype.debounce = function (t, e, n) {
                                var r = this;
                                void 0 === n && (n = !1);
                                var u = 0,
                                    f = !1,
                                    d = [],
                                    p = function () {
                                        for (var e = [], n = 0; arguments.length > n; n++) e[n] = arguments[n];
                                        if (!f) {
                                            u = 0;
                                            var r = t.apply(void 0, (0, o.fX)([], (0, o.zs)(e), !1));
                                            if (f = !0, d.length) {
                                                var i = function () {
                                                    d.forEach((function (t) {
                                                        return t()
                                                    })), d.length = 0
                                                };
                                                (0, l.y)(r) ? r.finally(i): i()
                                            }
                                        }
                                    },
                                    h = function () {
                                        for (var s = [], c = 0; arguments.length > c; c++) s[c] = arguments[c];
                                        f = !1, e ? (!u && n && p.apply(void 0, (0, o.fX)([], (0, o.zs)(s), !1)), (0, i.D)(u), u = r.setTimeout((function () {
                                            return p.apply(void 0, (0, o.fX)([], (0, o.zs)(s), !1))
                                        }), (0, a.T)(e) ? e() : e), r.timers.set(t, u)) : p.apply(void 0, (0, o.fX)([], (0, o.zs)(s), !1))
                                    };
                                return (0, c.Q)(e) && e.promisify ? function () {
                                    for (var t = [], e = 0; arguments.length > e; e++) t[e] = arguments[e];
                                    var n = r.promise((function (t) {
                                        d.push(t)
                                    })).catch((function (t) {
                                        if ((0, s.z)(t)) return null;
                                        throw t
                                    }));
                                    return h.apply(void 0, (0, o.fX)([], (0, o.zs)(t), !1)), n
                                } : h
                            }, t.prototype.microDebounce = function (t, e) {
                                var n = this;
                                void 0 === e && (e = !1);
                                var r, i = !1,
                                    s = !0;
                                return function () {
                                    for (var a = [], u = 0; arguments.length > u; u++) a[u] = arguments[u];
                                    r = a, i ? s = !0 : (s = !0, e && (s = !1, t.apply(void 0, (0, o.fX)([], (0, o.zs)(r), !1))), i = !0, n.__queueMicrotaskNative((function () {
                                        i = !1, n.isDestructed || s && t.apply(void 0, (0, o.fX)([], (0, o.zs)(r), !1))
                                    })))
                                }
                            }, t.prototype.throttle = function (t, e, n) {
                                var r = this;
                                void 0 === n && (n = !1);
                                var i, s, u, c = null;
                                return function () {
                                    for (var n = [], l = 0; arguments.length > l; l++) n[l] = arguments[l];
                                    i = !0, u = n, e ? c || (s = function () {
                                        i ? (t.apply(void 0, (0, o.fX)([], (0, o.zs)(u), !1)), i = !1, c = r.setTimeout(s, (0, a.T)(e) ? e() : e), r.timers.set(s, c)) : c = null
                                    })() : t.apply(void 0, (0, o.fX)([], (0, o.zs)(u), !1))
                                }
                            }, t.prototype.promise = function (t) {
                                var e = this,
                                    n = function () {},
                                    o = new Promise((function (o, r) {
                                        e.promisesRejections.add(n = function () {
                                            return r((0, p.h)("Abort async"))
                                        }), t(o, r)
                                    }));
                                return o.finally || "undefined" == typeof process || r.IS_ES_NEXT || (o.finally = function (t) {
                                    return o.then(t).catch(t), o
                                }), o.finally((function () {
                                    e.promisesRejections.delete(n)
                                })).catch((function () {
                                    return null
                                })), o.rejectCallback = n, o
                            }, t.prototype.promiseState = function (t) {
                                var e = this;
                                if (t.status) return t.status;
                                if (!Promise.race) return new Promise((function (n) {
                                    t.then((function (t) {
                                        return n("fulfilled"), t
                                    }), (function (t) {
                                        throw n("rejected"), t
                                    })), e.setTimeout((function () {
                                        n("pending")
                                    }), 100)
                                }));
                                var n = {};
                                return Promise.race([t, n]).then((function (t) {
                                    return t === n ? "pending" : "fulfilled"
                                }), (function () {
                                    return "rejected"
                                }))
                            }, t.prototype.requestIdleCallback = function (t, e) {
                                void 0 === e && (e = {
                                    timeout: 100
                                });
                                var n = this.__requestIdleCallbackNative(t, e);
                                return this.__requestsIdle.add(n), n
                            }, t.prototype.requestIdlePromise = function (t) {
                                var e = this;
                                return this.promise((function (n) {
                                    var o = e.requestIdleCallback((function () {
                                        return n(o)
                                    }), t)
                                }))
                            }, t.prototype.schedulerPostTask = function (t, e) {
                                var n = this;
                                void 0 === e && (e = {
                                    delay: 0,
                                    priority: "user-visible"
                                });
                                var r = new AbortController;
                                if (e.signal && e.signal.addEventListener("abort", (function () {
                                        return r.abort()
                                    })), this.__controllers.add(r), void 0 !== globalThis.scheduler) {
                                    var i = globalThis.scheduler.postTask(t, (0, o.Cl)((0, o.Cl)({}, e), {
                                        signal: r.signal
                                    }));
                                    return i.finally((function () {
                                        n.__controllers.delete(r)
                                    })).catch((function () {
                                        return null
                                    })), i
                                }
                                return this.promise((function (o, i) {
                                    var s = n.setTimeout((function () {
                                        try {
                                            o(t())
                                        } catch (t) {
                                            i(t)
                                        }
                                        n.__controllers.delete(r)
                                    }), e.delay || 1);
                                    r.signal.addEventListener("abort", (function () {
                                        n.clearTimeout(s), n.__controllers.delete(r), i((0, p.h)())
                                    }))
                                }))
                            }, t.prototype.schedulerYield = function () {
                                return this.schedulerPostTask((function () {}), {
                                    priority: "user-visible"
                                })
                            }, t.prototype.cancelIdleCallback = function (t) {
                                return this.__requestsIdle.delete(t), this.__cancelIdleCallbackNative(t)
                            }, t.prototype.requestAnimationFrame = function (t) {
                                var e = requestAnimationFrame(t);
                                return this.__requestsRaf.add(e), e
                            }, t.prototype.cancelAnimationFrame = function (t) {
                                this.__requestsRaf.delete(t), cancelAnimationFrame(t)
                            }, t.prototype.clear = function () {
                                var t = this;
                                this.__requestsIdle.forEach((function (e) {
                                    return t.cancelIdleCallback(e)
                                })), this.__requestsRaf.forEach((function (e) {
                                    return t.cancelAnimationFrame(e)
                                })), this.__controllers.forEach((function (t) {
                                    return t.abort()
                                })), this.timers.forEach((function (e) {
                                    return (0, i.D)(t.timers.get(e))
                                })), this.timers.clear(), this.promisesRejections.forEach((function (t) {
                                    return t()
                                })), this.promisesRejections.clear()
                            }, t.prototype.destruct = function () {
                                this.clear(), this.isDestructed = !0
                            }, t
                        }()
                },
                86500: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        t: function () {
                            return a
                        }
                    });
                    var o = n(55186),
                        r = n(97369),
                        i = n(70592),
                        s = n(95274);

                    function a(t, e) {
                        var n, a, u = [],
                            c = [],
                            l = null === (n = t.options.attributes) || void 0 === n ? void 0 : n.style;
                        if (e.firstChild)
                            for (var f = o.J.eachGen(e), d = f.next(), p = function () {
                                    var e = d.value;
                                    !(0, s.sz)(t, e, !0) || l && !(0, i.Y)(e, l) ? l && (0, s.Wv)(t, e) ? (void 0 === a && (a = !1), c.push((function () {
                                        (0, r.css)(e, Object.keys(l).reduce((function (t, e) {
                                            return t[e] = null, t
                                        }), {})), (0, r.attr)(e, "style") || (0, r.attr)(e, "style", null), (0, r.attr)(e, "style") || e.nodeName.toLowerCase() !== t.element || u.push(e)
                                    }))) : o.J.isEmptyTextNode(e) || void 0 === a && (a = !1) : (void 0 === a && (a = !0), u.push(e)), d = f.next()
                                }; !d.done;) p();
                        return c.forEach((function (t) {
                            return t()
                        })), u.forEach(o.J.unwrap), Boolean(a)
                    }
                },
                86572: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        O: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(55186);

                    function i(t, e) {
                        if (void 0 === e && (e = !1), !t.o.tab.tabInsideLiInsertNewList) return !1;
                        var n = (0, o.zs)(function (t) {
                                var e = t.createInside.fake(),
                                    n = t.createInside.fake(),
                                    o = t.s.range.cloneRange();
                                o.collapse(!0), o.insertNode(e);
                                var r = t.s.range.cloneRange();
                                return r.collapse(!1), r.insertNode(n), [e, n]
                            }(t), 2),
                            i = n[0],
                            s = n[1];
                        try {
                            var a = function (t, e, n) {
                                var o = r.J.closest(e, "li", t.editor);
                                return !!o && !(!n && !r.J.isLeaf(o.previousElementSibling)) && !(n && !r.J.closest(o, "li", t.editor)) && o
                            }(t, i, e);
                            if (!a) return !1;
                            if (! function (t, e, n) {
                                    var o = r.J.closest(n, "li", e.editor);
                                    return !(!o || o !== t && !t.contains(o))
                                }(a, t, i)) return !1;
                            var u = r.J.closest(a, ["ol", "ul"], t.editor);
                            return !(!u || e && !r.J.closest(u, "li", t.editor) || (e ? function (t, e, n) {
                                var o = r.J.closest(e, "li", t.editor),
                                    i = Array.from(e.children).filter((function (t) {
                                        return r.J.isLeaf(t)
                                    }));
                                r.J.after(o, n);
                                var s = i.indexOf(n);
                                if (0 !== s && 1 !== i.length || r.J.safeRemove(e), s !== i.length - 1) {
                                    var a = e.cloneNode();
                                    r.J.append(n, a);
                                    for (var u = s + 1; i.length > u; u += 1) r.J.append(a, i[u])
                                }
                            }(t, u, a) : function (t, e, n) {
                                var o = n.previousElementSibling,
                                    i = o.lastElementChild,
                                    s = r.J.isTag(i, e.tagName) ? i : t.createInside.element(e.tagName, Array.from(e.attributes).reduce((function (t, e) {
                                        return t[e.name] = e.value, t
                                    }), {}));
                                s.appendChild(n), i !== s && o.appendChild(s)
                            }(t, u, a), 0))
                        } finally {
                            var c = t.s.createRange();
                            c.setStartAfter(i), c.setEndBefore(s), t.s.selectRange(c), r.J.safeRemove(i), r.J.safeRemove(s)
                        }
                        return !1
                    }
                    n(28712)
                },
                86634: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 128 128" xml:space="preserve"> <polygon points="112.4560547,23.3203125 112.4560547,75.8154297 31.4853516,75.8154297 31.4853516,61.953125 16.0131836,72.6357422 0.5410156,83.3164063 16.0131836,93.9990234 31.4853516,104.6796875 31.4853516,90.8183594 112.4560547,90.8183594 112.4560547,90.8339844 127.4589844,90.8339844 127.4589844,23.3203125"/> </svg>'
                },
                86899: function (t) {
                    t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"> <path stroke-width="0" d="M10.5 20H2a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h1V3l2.03-.4a3 3 0 0 1 5.94 0L13 3v1h1a2 2 0 0 1 2 2v1h-2V6h-1v1H3V6H2v12h5v2h3.5zM8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm2 4h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2zm0 2v8h8v-8h-8z"/> </svg>'
                },
                87238: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.limitWords = !1, o.T.prototype.limitChars = !1, o.T.prototype.limitHTML = !1
                },
                87332: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Ag: function () {
                            return i.Ag
                        },
                        DI: function () {
                            return i.DI
                        },
                        LN: function () {
                            return o.L
                        },
                        OJ: function () {
                            return i.OJ
                        },
                        Zk: function () {
                            return i.Zk
                        },
                        dj: function () {
                            return i.dj
                        },
                        xk: function () {
                            return r.x
                        }
                    });
                    var o = n(84602),
                        r = n(8757),
                        i = n(12043)
                },
                87875: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        OK: function () {
                            return c
                        },
                        PO: function () {
                            return a
                        },
                        PP: function () {
                            return u
                        }
                    });
                    var o = n(64567),
                        r = (n(17352), n(55186)),
                        i = n(9823),
                        s = n(76166);

                    function a(t, e) {
                        var n = Object.getOwnPropertyDescriptor(t, e);
                        return !n || (0, i.Tn)(n.get) ? null : n.value
                    }

                    function u(t, e, n) {
                        var o = n.get;
                        if (!o) throw (0, s.z3)("Getter property descriptor expected");
                        n.get = function () {
                            var t = o.call(this);
                            return t && !0 === t.noCache || Object.defineProperty(this, e, {
                                configurable: n.configurable,
                                enumerable: n.enumerable,
                                writable: !1,
                                value: t
                            }), t
                        }
                    }

                    function c(t, e, n) {
                        var a = n.value;
                        if (!(0, i.Tn)(a)) throw (0, s.z3)("Handler must be a Function");
                        var u = !0,
                            c = new WeakMap;
                        n.value = function () {
                            for (var t, e = [], n = 0; arguments.length > n; n++) e[n] = arguments[n];
                            if (u && c.has(this.constructor)) return null === (t = c.get(this.constructor)) || void 0 === t ? void 0 : t.cloneNode(!0);
                            var o = a.apply(this, e);
                            return u && r.J.isElement(o) && c.set(this.constructor, o), u ? o.cloneNode(!0) : o
                        }, t.hookStatus(o.f.ready, (function (t) {
                            var e = (0, i.hH)(t) ? t : t.jodit;
                            u = Boolean(e.options.cache)
                        }))
                    }
                },
                87906: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        O: function () {
                            return r
                        }
                    });
                    var o = n(42448),
                        r = function () {
                            function t() {}
                            return t.prototype.getElm = function (t) {
                                return this.container.querySelector(".".concat(this.getFullElName(t)))
                            }, t.prototype.getElms = function (t) {
                                return (0, o.$)(this.container.querySelectorAll(".".concat(this.getFullElName(t))))
                            }, t
                        }()
                },
                88011: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(65147),
                        i = n(36115),
                        s = n(97394),
                        a = n(8809);
                    i.T.prototype.mobileTapTimeout = 300, i.T.prototype.toolbarAdaptive = !0, i.T.prototype.buttonsMD = [{
                        group: "font-style",
                        buttons: []
                    }, {
                        group: "list",
                        buttons: []
                    }, {
                        group: "font",
                        buttons: []
                    }, "---", {
                        group: "media",
                        buttons: []
                    }, "\n", {
                        group: "state",
                        buttons: []
                    }, {
                        group: "insert",
                        buttons: []
                    }, {
                        group: "indent",
                        buttons: []
                    }, {
                        group: "color",
                        buttons: []
                    }, "---", {
                        group: "history",
                        buttons: []
                    }, {
                        group: "other",
                        buttons: []
                    }, "|", "dots"], i.T.prototype.buttonsSM = [{
                        group: "font-style",
                        buttons: []
                    }, {
                        group: "list",
                        buttons: []
                    }, "---", {
                        group: "font",
                        buttons: []
                    }, "\n", {
                        group: "state",
                        buttons: []
                    }, {
                        group: "indent",
                        buttons: []
                    }, {
                        group: "color",
                        buttons: []
                    }, "---", {
                        group: "history",
                        buttons: []
                    }, "|", "dots"], i.T.prototype.buttonsXS = [{
                        group: "font-style",
                        buttons: []
                    }, {
                        group: "list",
                        buttons: []
                    }, "---", {
                        group: "font",
                        buttons: []
                    }, {
                        group: "color",
                        buttons: []
                    }, "---", "dots"], i.T.prototype.controls.dots = {
                        mode: o.MODE_SOURCE + o.MODE_WYSIWYG,
                        popup: function (t, e, n, o) {
                            var i = o.control.data;
                            return void 0 === i && (i = {
                                toolbar: (0, a.$K)(t),
                                rebuild: function () {
                                    var e, n;
                                    if (o) {
                                        var a = t.e.fire("getDiffButtons.mobile", o.closest(s.Q));
                                        if (a && i) {
                                            i.toolbar.build((0, r.splitArray)(a));
                                            var u = (null === (n = null === (e = t.toolbar) || void 0 === e ? void 0 : e.firstButton) || void 0 === n ? void 0 : n.container.offsetWidth) || 36;
                                            i.toolbar.container.style.width = 3 * (u + 4) + "px"
                                        }
                                    }
                                }
                            }, o.control.data = i), i.rebuild(), i.toolbar
                        },
                        tooltip: "Show all"
                    }
                },
                88146: function (t) {
                    "use strict";
                    t.exports = {
                        symbols: "Smbolo"
                    }
                },
                88222: function (t, e, n) {
                    "use strict";
                    n(41324), n(55989), n(13917), n(5929), n(49289), n(98341), n(38101), n(24593), n(36293), n(38373), n(64565), n(27509), n(13405), n(67335), n(92553), n(73077), n(88429), n(9443), n(30405), n(89651), n(26495), n(49777), n(92097), n(19085), n(46079), n(99573), n(92225), n(9117), n(83105), n(47791), n(26421), n(76967), n(1239), n(13861), n(36969), n(56701), n(225), n(44921), n(78757), n(60189), n(39147), n(76693), n(6857), n(17343), n(35523), n(46939), n(69077), n(93669), n(97179), n(65199), n(1677), n(35541), n(59965), n(76385), n(2533), n(38309), n(14367), n(36133)
                },
                88269: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        j: function () {
                            return i
                        }
                    });
                    var o = n(55186),
                        r = n(26150);

                    function i(t, e, n, i) {
                        var s = o.J.closest(e, "a", t.editor);
                        n ? (s || (s = o.J.wrap(e, "a", t.createInside)), (0, r.C)(s, "href", n), (0, r.C)(s, "target", i ? "_blank" : null)) : s && s.parentNode && s.parentNode.replaceChild(e, s)
                    }
                },
                88429: function (t, e, n) {
                    "use strict";
                    var o = n(56298);
                    n(71576), o.fg.add("formatBlock", (function (t) {
                        t.registerButton({
                            name: "paragraph",
                            group: "font"
                        }), t.registerCommand("formatblock", (function (e, n, o) {
                            return t.s.commitStyle({
                                element: o
                            }), t.synchronizeValues(), !1
                        }))
                    }))
                },
                88497: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z"/> </svg>'
                },
                88850: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.showXPathInStatusbar = !0
                },
                89044: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        D: function () {
                            return o.D
                        },
                        w: function () {
                            return o.w
                        }
                    });
                    var o = n(59146)
                },
                89097: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1600 736v192q0 40-28 68t-68 28h-1216q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h1216q40 0 68 28t28 68z"/> </svg>'
                },
                89568: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        IJ: function () {
                            return l
                        },
                        Tz: function () {
                            return f
                        },
                        _B: function () {
                            return u
                        },
                        zy: function () {
                            return c
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(55186),
                        s = n(58720),
                        a = "jd-tmp-selection";

                    function u(t, e, n, s, u) {
                        var c;
                        if (null != e.startContainer.nodeValue && null != e.endContainer.nodeValue && ! function (t, e, n) {
                                if (t.o.search.useCustomHighlightAPI && r.globalWindow && void 0 !== r.globalWindow.Highlight) {
                                    var i = (0, o.fX)([e], (0, o.zs)(n), !1).map((function (e) {
                                            var n = t.selection.createRange();
                                            return n.setStart(e.startContainer, e.startOffset), n.setEnd(e.endContainer, e.endOffset), n
                                        })),
                                        s = new(Highlight.bind.apply(Highlight, (0, o.fX)([void 0], (0, o.zs)(i), !1)));
                                    return CSS.highlights.clear(), CSS.highlights.set("jodit-search-result", s), n.length = 0, !0
                                }
                                return !1
                            }(t, e, n)) {
                            var l = s.element("span", ((c = {})[a] = !0, c));
                            i.J.markTemporary(l),
                                function (t, e, n) {
                                    var r, s, a = t.startContainer.nodeValue,
                                        u = 0;
                                    if (0 !== t.startOffset) {
                                        var c = n.text(a.substring(0, t.startOffset));
                                        t.startContainer.nodeValue = a.substring(t.startOffset), i.J.before(t.startContainer, c), t.startContainer === t.endContainer && (t.endOffset -= u = t.startOffset), t.startOffset = 0
                                    }
                                    var l = t.endContainer.nodeValue;
                                    if (t.endOffset !== l.length) {
                                        c = n.text(l.substring(t.endOffset)), t.endContainer.nodeValue = l.substring(0, t.endOffset), i.J.after(t.endContainer, c);
                                        try {
                                            for (var f = (0, o.Ju)(e), d = f.next(); !d.done; d = f.next()) {
                                                var p = d.value;
                                                if (p.startContainer !== t.endContainer) break;
                                                p.startContainer = c, p.startOffset = p.startOffset - t.endOffset - u, p.endContainer === t.endContainer && (p.endContainer = c, p.endOffset = p.endOffset - t.endOffset - u)
                                            }
                                        } catch (t) {
                                            r = {
                                                error: t
                                            }
                                        } finally {
                                            try {
                                                d && !d.done && (s = f.return) && s.call(f)
                                            } finally {
                                                if (r) throw r.error
                                            }
                                        }
                                        t.endOffset = t.endContainer.nodeValue.length
                                    }
                                }(e, n, s);
                            var f, d = e.startContainer;
                            do {
                                if (!d) break;
                                if (!i.J.isText(d) || i.J.isElement(f = d.parentNode) && f.hasAttribute(a) || i.J.wrap(d, l.cloneNode(), s), d === e.endContainer) break;
                                var p = d.firstChild || d.nextSibling;
                                if (!p) {
                                    for (; d && !d.nextSibling && d !== u;) d = d.parentNode;
                                    p = null == d ? void 0 : d.nextSibling
                                }
                                d = p
                            } while (d && d !== u)
                        }
                    }

                    function c(t) {
                        return (0, s.$$)("[".concat(a, "]"), t)
                    }

                    function l(t) {
                        c(t.editor).forEach((function (t) {
                                return i.J.unwrap(t)
                            })),
                            function (t) {
                                t.o.search.useCustomHighlightAPI && r.globalWindow && void 0 !== r.globalWindow.Highlight && CSS.highlights.clear()
                            }(t)
                    }

                    function f(t) {
                        return t.replace(RegExp("<span[^>]+".concat(a, "[^>]+>(.*?)</span>"), "g"), "$1")
                    }
                },
                89651: function (t, e, n) {
                    "use strict";
                    var o = n(71842),
                        r = n(56298),
                        i = n(931),
                        s = n(36115),
                        a = n(89097);
                    i.I.set("hr", n.n(a)()), s.T.prototype.controls.hr = {
                        command: "insertHorizontalRule",
                        tags: ["hr"],
                        tooltip: "Insert Horizontal Line"
                    }, r.fg.add("hr", (function (t) {
                        t.registerButton({
                            name: "hr",
                            group: "insert"
                        }), t.registerCommand("insertHorizontalRule", (function () {
                            var e = t.createInside.element("hr");
                            t.s.insertNode(e, !1, !1);
                            var n = o.J.closest(e.parentElement, o.J.isBlock, t.editor);
                            n && o.J.isEmpty(n) && n !== t.editor && (o.J.after(n, e), o.J.safeRemove(n));
                            var r = o.J.next(e, o.J.isBlock, t.editor, !1);
                            return r || (r = t.createInside.element(t.o.enter), o.J.after(e, r)), t.s.setCursorIn(r), !1
                        }))
                    }))
                },
                89708: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        B: function () {
                            return i
                        }
                    });
                    var o = n(55186),
                        r = n(97369);

                    function i(t, e, n) {
                        var i, s = o.J.closest(e, o.J.isElement, t.editor),
                            a = t.s;
                        if (o.J.isLeaf(s) && (null === (i = null == s ? void 0 : s.parentElement) || void 0 === i ? void 0 : i[n ? "firstElementChild" : "lastElementChild"]) === s && a.cursorInTheEdge(n, s)) {
                            var u = s.parentElement,
                                c = t.createInside.element(t.o.enterBlock);
                            return (0, r.call)(n ? o.J.before : o.J.after, u, c), o.J.moveContent(s, c), o.J.safeRemove(s), o.J.isEmpty(u) && o.J.safeRemove(u), (0, r.call)(n ? a.setCursorBefore : a.setCursorAfter, e), !0
                        }
                        return !1
                    }
                },
                89832: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C: function () {
                            return d
                        }
                    });
                    var o = n(43327),
                        r = n(72874),
                        i = n(81486),
                        s = n(29822),
                        a = n(59988),
                        u = n(42898),
                        c = n(84323),
                        l = n(94766),
                        f = n(89708),
                        d = [c.f, s.V, i.H, l.R, u.C, a._, r.a, o.E, f.B]
                },
                89929: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $: function () {
                            return r
                        }
                    });
                    var o = n(65147);

                    function r(t, e) {
                        if ((0, o.isFunction)(t.o.buildData)) return t.o.buildData.call(t, e);
                        var n = t.ow.FormData;
                        if (void 0 !== n) {
                            if (e instanceof n) return e;
                            if ((0, o.isString)(e)) return e;
                            var r = new n,
                                i = e;
                            return Object.keys(i).forEach((function (t) {
                                r.append(t, i[t])
                            })), r
                        }
                        return e
                    }
                },
                90084: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return !t.s.isCollapsed() && (t.execCommand("Delete"), !0)
                    }
                    n.d(e, {
                        L: function () {
                            return o
                        }
                    })
                },
                90325: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        k: function () {
                            return u
                        }
                    });
                    var o = n(55186),
                        r = (n(28712), n(20384)),
                        i = n(38271),
                        s = n(12043),
                        a = n(61001);

                    function u(t, e, n, o) {
                        if (!e) return o;
                        var r = e.parentElement;
                        if (!r) return o;
                        var u = n.e.fire("".concat(s.ar, "BeforeToggleList"), o, t, r);
                        if (void 0 !== u) return u;
                        var l = n.e.fire.bind(n.e, "".concat(s.ar, "AfterToggleList"));
                        if (o !== s.OJ) {
                            var f = (0, i.Y)(t, e.parentElement, n, s.DI, !0) === s.PL;
                            if (o === s.dj || f || r.tagName.toLowerCase() !== t.element) {
                                var d = c(s.dj, r, e, n, t),
                                    p = (0, a.z)(t, d, n);
                                return l(s.dj, p, t), s.dj
                            }
                        }
                        var h = c(s.OJ, r, e, n, t);
                        return l(s.OJ, h, t), s.OJ
                    }

                    function c(t, e, n, i, a) {
                        return i.e.fire("".concat(s.ar, "BeforeUnwrapList"), t, e, a) || ((0, r.y)(e, n, i), o.J.unwrap(n.parentElement), o.J.replace(n, "br" !== i.o.enter.toLowerCase() ? i.o.enter : i.createInside.fragment(), i.createInside))
                    }
                },
                90428: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        b: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(71842),
                        a = n(65147),
                        u = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.checkActiveStatus = function (t, e) {
                                    var o = 0,
                                        r = 0;
                                    return Object.keys(t).forEach((function (i) {
                                        var s = t[i];
                                        (0, a.isFunction)(s) ? s(n.j, (0, a.css)(e, i).toString()) && (o += 1): -1 !== s.indexOf((0, a.css)(e, i).toString()) && (o += 1), r += 1
                                    })), r === o
                                }, n.prependInvisibleInput(n.container), n
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "ToolbarEditorCollection"
                            }, e.prototype.shouldBeDisabled = function (e) {
                                var n = t.prototype.shouldBeDisabled.call(this, e);
                                if (void 0 !== n) return n;
                                var o = void 0 === e.control.mode ? r.MODE_WYSIWYG : e.control.mode;
                                return !(o === r.MODE_SPLIT || o === this.j.getRealMode())
                            }, e.prototype.shouldBeActive = function (e) {
                                var n = this,
                                    o = t.prototype.shouldBeActive.call(this, e);
                                if (void 0 !== o) return o;
                                var r = this.j.selection ? this.j.s.current() : null;
                                if (!r) return !1;
                                if (e.control.tags) {
                                    var i = e.control.tags;
                                    if (s.J.up(r, (function (t) {
                                            if (t && -1 !== i.indexOf(t.nodeName.toLowerCase())) return !0
                                        }), this.j.editor)) return !0
                                }
                                if (e.control.css) {
                                    var a = e.control.css;
                                    if (s.J.up(r, (function (t) {
                                            if (t && !s.J.isText(t) && !s.J.isComment(t)) return n.checkActiveStatus(a, t)
                                        }), this.j.editor)) return !0
                                }
                                return !1
                            }, e.prototype.getTarget = function (t) {
                                return t.target || this.j.s.current() || null
                            }, e.prototype.prependInvisibleInput = function (t) {
                                var e = this.j.create.element("input", {
                                    tabIndex: -1,
                                    disabled: !0,
                                    style: "width: 0; height:0; position: absolute; visibility: hidden;"
                                });
                                s.J.appendChildFirst(t, e)
                            }, e.prototype.showInline = function (t) {
                                this.jodit.e.fire("showInlineToolbar", t)
                            }, e.prototype.hide = function () {
                                this.jodit.e.fire("hidePopup"), t.prototype.hide.call(this), this.jodit.e.fire("toggleToolbar")
                            }, e.prototype.show = function () {
                                t.prototype.show.call(this), this.jodit.e.fire("toggleToolbar")
                            }, (0, o.Cg)([i.component], e)
                        }(n(97394).Q)
                },
                90722: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(931),
                        i = n(36115),
                        s = n(9103),
                        a = n.n(s);
                    i.T.prototype.beautifyHTML = !o.IS_IE, i.T.prototype.sourceEditor = "ace", i.T.prototype.sourceEditorNativeOptions = {
                        showGutter: !0,
                        theme: "ace/theme/idle_fingers",
                        mode: "ace/mode/html",
                        wrap: !0,
                        highlightActiveLine: !0
                    }, i.T.prototype.sourceEditorCDNUrlsJS = ["https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js"], i.T.prototype.beautifyHTMLCDNUrlsJS = ["https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.4/beautify.min.js", "https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.4/beautify-html.min.js"], r.I.set("source", a()), i.T.prototype.controls.source = {
                        mode: o.MODE_SPLIT,
                        exec: function (t) {
                            t.toggleMode()
                        },
                        isActive: function (t) {
                            return t.getRealMode() === o.MODE_SOURCE
                        },
                        tooltip: "Change mode"
                    }
                },
                90823: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        DI: function () {
                            return c
                        },
                        PU: function () {
                            return l
                        },
                        sX: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(17352),
                        i = n(55186),
                        s = n(9823),
                        a = n(92032);

                    function u(t, e, n) {
                        if (!e.isInDestruct) {
                            (function (t) {
                                return Boolean(t && "drop" === t.type)
                            })(t) && e.s.insertCursorAtPoint(t.clientX, t.clientY);
                            var o = e.e.fire("beforePasteInsert", n);
                            !(0, s.Rd)(o) && ((0, s.Kg)(o) || (0, s.Et)(o) || i.J.isNode(o)) && (n = o), (0, s.Kg)(n) && (n = function (t) {
                                var e = (t = t.replace(/<meta[^>]+?>/g, "")).search(/<!--StartFragment-->/i); - 1 !== e && (t = t.substring(e + 20));
                                var n = t.search(/<!--EndFragment-->/i);
                                return -1 !== n && (t = t.substring(0, n)), t
                            }(n)), e.s.insertHTML(n)
                        }
                    }

                    function c(t) {
                        var e = t.types,
                            n = "";
                        if ((0, s.cy)(e) || "[object DOMStringList]" === {}.toString.call(e))
                            for (var o = 0; e.length > o; o += 1) n += e[o] + ";";
                        else n = (e || r.TEXT_PLAIN).toString() + ";";
                        return n
                    }

                    function l(t, e, n, r, i) {
                        if (!1 !== t.e.fire("beforeOpenPasteDialog", e, n, r, i)) {
                            var s = t.confirm('<div style="word-break: normal; white-space: normal">'.concat(t.i18n(e), "</div>"), t.i18n(n)),
                                u = i.map((function (e) {
                                    var n = e.text,
                                        o = e.value;
                                    return (0, a.$n)(t, {
                                        text: n,
                                        name: n.toLowerCase(),
                                        tabIndex: 0
                                    }).onAction((function () {
                                        s.close(), r(o)
                                    }))
                                }));
                            s.e.one(s, "afterClose", (function () {
                                t.s.isFocused() || t.s.focus()
                            }));
                            var c = (0, a.$n)(t, {
                                text: "Cancel",
                                tabIndex: 0
                            }).onAction((function () {
                                s.close()
                            }));
                            return s.setFooter((0, o.fX)((0, o.fX)([], (0, o.zs)(u), !1), [c], !1)), u[0].focus(), u[0].state.variant = "primary", t.e.fire("afterOpenPasteDialog", s, e, n, r, i), s
                        }
                    }
                },
                91093: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        R: function () {
                            return c
                        },
                        n: function () {
                            return u
                        }
                    });
                    var o = n(17352),
                        r = n(98253),
                        i = n(10467),
                        s = n(97369),
                        a = n(36115),
                        u = function (t, e) {
                            if (!e || !e.length) return t;
                            for (var n = /%([sd])/g, o = n.exec(t), r = t, i = 0; o && void 0 !== e[i];) r = r.replace(o[0], e[i].toString()), i += 1, o = n.exec(t);
                            return r
                        };

                    function c(t, e, n) {
                        if (!(0, r.K)(t)) throw (0, s.error)("i18n: Need string in first argument");
                        if (!t.length) return t;
                        var c = Boolean(null == n ? void 0 : n.debugLanguage),
                            l = {},
                            f = function (t) {
                                return e && e.length ? u(t, e) : t
                            },
                            d = (0, s.defaultLanguage)(a.T.defaultOptions.language, a.T.defaultOptions.language),
                            p = (0, s.defaultLanguage)(null == n ? void 0 : n.language, d),
                            h = function (e) {
                                if (e) {
                                    if ((0, r.K)(e[t])) return f(e[t]);
                                    var n = t.toLowerCase();
                                    if ((0, r.K)(e[n])) return f(e[n]);
                                    var o = (0, i.Z)(t);
                                    return (0, r.K)(e[o]) ? f(e[o]) : void 0
                                }
                            };
                        void 0 !== o.lang[p] ? l = o.lang[p] : c || (l = void 0 !== o.lang[d] ? o.lang[d] : o.lang.en);
                        var v = null == n ? void 0 : n.i18n;
                        if (v && v[p]) {
                            var g = h(v[p]);
                            if (g) return g
                        }
                        return h(l) || (!c && o.lang.en && (0, r.K)(o.lang.en[t]) && o.lang.en[t] ? f(o.lang.en[t]) : c ? "{" + t + "}" : f(t))
                    }
                },
                91479: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        C: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = function (t) {
                            function e(e, n) {
                                var o = t.call(this, e) || this;
                                return o.setMod("active", !0), o.setMod("variant", n.variant), o.container.textContent = n.text, o
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIMessage"
                            }, (0, o.Cg)([r.s], e)
                        }(n(53048).D$)
                },
                91560: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return a
                        }
                    });
                    var o = n(69052),
                        r = n(26150),
                        i = n(92032),
                        s = n(58006);

                    function a(t, e, n, a, u) {
                        var c = this instanceof s.l ? this : new s.l({
                                closeOnClickOverlay: !0
                            }),
                            l = (0, i.$n)(c, "cancel", "Cancel"),
                            f = (0, i.$n)(c, "ok", "Ok"),
                            d = c.c.element("form", {
                                class: "jodit-dialog_prompt"
                            }),
                            p = c.c.element("input", {
                                autofocus: !0,
                                class: "jodit-input"
                            }),
                            h = c.c.element("label");
                        (0, o.T)(e) && (n = e, e = void 0), a && (0, r.C)(p, "placeholder", a), h.appendChild(c.c.text(t)), d.appendChild(h), d.appendChild(p), l.onAction(c.close);
                        var v = function () {
                            n && (0, o.T)(n) && !1 === n(p.value) || c.close()
                        };
                        return f.onAction(v), c.e.on(d, "submit", (function () {
                            return v(), !1
                        })), c.setFooter([f, l]), c.open(d, e || "&nbsp;", !0, !0), p.focus(), void 0 !== u && u.length && (p.value = u, p.select()), c
                    }
                },
                91594: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        c: function () {
                            return o
                        }
                    });
                    var o = function (t, e, n, r) {
                        var i;
                        void 0 === r && (r = !1);
                        try {
                            i = t.getBoundingClientRect()
                        } catch (t) {
                            i = {
                                top: 0,
                                bottom: 0,
                                left: 0,
                                right: 0,
                                width: 0,
                                height: 0
                            }
                        }
                        var s, a, u = n.body,
                            c = n.documentElement || {
                                clientTop: 0,
                                clientLeft: 0,
                                scrollTop: 0,
                                scrollLeft: 0
                            },
                            l = n.defaultView || n.parentWindow,
                            f = l.pageYOffset || c.scrollTop || u.scrollTop,
                            d = l.pageXOffset || c.scrollLeft || u.scrollLeft,
                            p = c.clientTop || u.clientTop || 0,
                            h = c.clientLeft || u.clientLeft || 0,
                            v = e.iframe;
                        if (!r && e && e.options && e.o.iframe && v) {
                            var g = o(v, e, e.od, !0);
                            s = i.top + g.top, a = i.left + g.left
                        } else s = i.top + f - p, a = i.left + d - h;
                        return {
                            top: Math.round(s),
                            left: Math.round(a),
                            width: i.width,
                            height: i.height
                        }
                    }
                },
                91672: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Y: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = function () {
                            function t(t, e, n, o) {
                                this.request = t, this.status = e, this.statusText = n, this.body = o
                            }
                            return Object.defineProperty(t.prototype, "url", {
                                get: function () {
                                    return this.request.url
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.json = function () {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    return (0, o.YH)(this, (function (t) {
                                        return [2, JSON.parse(this.body)]
                                    }))
                                }))
                            }, t.prototype.text = function () {
                                return Promise.resolve(this.body)
                            }, t.prototype.blob = function () {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    return (0, o.YH)(this, (function (t) {
                                        return [2, this.body]
                                    }))
                                }))
                            }, t
                        }()
                },
                91882: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1203 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23z"/> </svg>'
                },
                91902: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        N: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(24767),
                        i = n(38322),
                        s = n(6455),
                        a = n(91479),
                        u = function (t) {
                            function e(e, n, o) {
                                void 0 === o && (o = {
                                    defaultTimeout: 3e3,
                                    defaultOffset: 5
                                });
                                var r = t.call(this, e) || this;
                                return r.__box = n, r.options = o, r.__messages = new Set, r
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIMessages"
                            }, e.prototype.info = function (t, e) {
                                this.__message(t, "info", e)
                            }, e.prototype.success = function (t, e) {
                                this.__message(t, "success", e)
                            }, e.prototype.error = function (t, e) {
                                this.__message(t, "error", e)
                            }, e.prototype.message = function (t, e, n) {
                                this.__message(t, e, n)
                            }, e.prototype.__message = function (t, e, n) {
                                void 0 === e && (e = "info");
                                var o = t + ":" + e;
                                if (this.__messages.has(o)) this.async.updateTimeout(o, n || this.options.defaultTimeout);
                                else {
                                    if (!this.__box) throw new Error("Container is not defined: " + o);
                                    this.__box.appendChild(this.container);
                                    var r = new a.C(this.j, {
                                        text: t,
                                        variant: e
                                    });
                                    this.append(r), this.__calcOffsets(), this.__messages.add(o);
                                    var i = this.__getRemoveCallback(r, o);
                                    this.j.e.on(r.container, "pointerdown", i), this.async.setTimeout(i, {
                                        label: o,
                                        timeout: n || this.options.defaultTimeout
                                    })
                                }
                            }, e.prototype.__getRemoveCallback = function (t, e) {
                                var n = this,
                                    o = function (r) {
                                        r && r.preventDefault(), t.isInDestruct || (n.async.clearTimeout(e), n.j.e.off(t.container, "pointerdown", o), n.__messages.delete(e), t.setMod("active", !1), n.async.setTimeout((function () {
                                            n.remove(t), t.destruct(), n.__calcOffsets()
                                        }), 300))
                                    };
                                return o
                            }, e.prototype.__calcOffsets = function () {
                                var t = this,
                                    e = 5;
                                this.elements.forEach((function (n) {
                                    (0, i.A)(n.container, "bottom", e + "px"), e += n.container.offsetHeight + t.options.defaultOffset
                                }))
                            }, (0, o.Cg)([r.s], e)
                        }(s.U)
                },
                92032: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $n: function () {
                            return v
                        },
                        lD: function () {
                            return h
                        },
                        ue: function () {
                            return p
                        }
                    });
                    var o = n(31635),
                        r = n(64567),
                        i = n(22664),
                        s = n(55186),
                        a = n(69052),
                        u = n(98253),
                        c = n(97369),
                        l = n(29780),
                        f = n(94070),
                        d = n(931),
                        p = function () {
                            return {
                                size: "middle",
                                type: "button",
                                role: "button",
                                name: "",
                                value: "",
                                variant: "initial",
                                disabled: !1,
                                activated: !1,
                                icon: {
                                    name: "empty",
                                    fill: "",
                                    iconURL: ""
                                },
                                tooltip: "",
                                text: "",
                                tabIndex: void 0
                            }
                        },
                        h = function (t) {
                            function e(e, n) {
                                var o = t.call(this, e) || this;
                                return o.isButton = !0, o.state = p(), o.actionHandlers = [], o.button = o.container, o.updateSize(), o.onChangeSize(), o.onChangeStatus(), n && o.hookStatus(r.f.ready, (function () {
                                    o.setState(n)
                                })), o
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIButton"
                            }, e.prototype.setState = function (t) {
                                return Object.assign(this.state, t), this
                            }, Object.defineProperty(e.prototype, "text", {
                                get: function () {
                                    return this.getElm("text")
                                },
                                enumerable: !1,
                                configurable: !0
                            }), Object.defineProperty(e.prototype, "icon", {
                                get: function () {
                                    return this.getElm("icon")
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.onChangeSize = function () {
                                this.setMod("size", this.state.size)
                            }, e.prototype.onChangeType = function () {
                                (0, c.attr)(this.container, "type", this.state.type)
                            }, e.prototype.onChangeRole = function () {
                                (0, c.attr)(this.container, "role", this.state.role)
                            }, e.prototype.updateSize = function () {
                                var t = this.closest(f.z);
                                t && (this.state.size = t.buttonSize)
                            }, e.prototype.onChangeStatus = function () {
                                this.setMod("variant", this.state.variant)
                            }, e.prototype.onChangeText = function () {
                                this.text.textContent = this.jodit.i18n(this.state.text)
                            }, e.prototype.onChangeTextSetMode = function () {
                                this.setMod("text-icons", Boolean(this.state.text.trim().length))
                            }, e.prototype.onChangeDisabled = function () {
                                (0, c.attr)(this.container, "disabled", this.state.disabled || null)
                            }, e.prototype.onChangeActivated = function () {
                                (0, c.attr)(this.container, "aria-pressed", this.state.activated)
                            }, e.prototype.onChangeName = function () {
                                this.container.classList.add("".concat(this.componentName, "_").concat(this.clearName(this.state.name))), this.name = this.state.name, (0, c.attr)(this.container, "data-ref", this.state.name), (0, c.attr)(this.container, "ref", this.state.name)
                            }, e.prototype.onChangeTooltip = function () {
                                this.get("j.o.useNativeTooltip") && (0, c.attr)(this.container, "title", this.state.tooltip), (0, c.attr)(this.container, "aria-label", this.state.tooltip)
                            }, e.prototype.onChangeTabIndex = function () {
                                (0, c.attr)(this.container, "tabindex", this.state.tabIndex)
                            }, e.prototype.onChangeIcon = function () {
                                var t = this.get("j.o.textIcons");
                                if (!(!0 === t || (0, a.T)(t) && t(this.state.name))) {
                                    s.J.detach(this.icon);
                                    var e = d.I.makeIcon(this.j, this.state.icon);
                                    e && this.icon.appendChild(e)
                                }
                            }, e.prototype.focus = function () {
                                this.container.focus()
                            }, e.prototype.isFocused = function () {
                                var t = this.od.activeElement;
                                return Boolean(t && s.J.isOrContains(this.container, t))
                            }, e.prototype.createContainer = function () {
                                var t = this.componentName,
                                    e = this.j.c.element("button", {
                                        class: t,
                                        type: "button",
                                        role: "button",
                                        ariaPressed: !1
                                    }),
                                    n = this.j.c.span(t + "__icon"),
                                    o = this.j.c.span(t + "__text");
                                return e.appendChild(n), e.appendChild(o), e
                            }, e.prototype.destruct = function () {
                                return this.j.e.off(this.container), t.prototype.destruct.call(this)
                            }, e.prototype.onAction = function (t) {
                                return this.actionHandlers.push(t), this
                            }, e.prototype.__onActionFire = function (t) {
                                var e = this;
                                t.buffer = {
                                    actionTrigger: this
                                }, this.actionHandlers.forEach((function (n) {
                                    return n.call(e, t)
                                }))
                            }, (0, o.Cg)([i.cache], e.prototype, "text", null), (0, o.Cg)([i.cache], e.prototype, "icon", null), (0, o.Cg)([(0, i.watch)("state.size", {
                                immediately: !1
                            })], e.prototype, "onChangeSize", null), (0, o.Cg)([(0, i.watch)("state.type", {
                                immediately: !1
                            })], e.prototype, "onChangeType", null), (0, o.Cg)([(0, i.watch)("state.role", {
                                immediately: !1
                            })], e.prototype, "onChangeRole", null), (0, o.Cg)([(0, i.watch)("parentElement")], e.prototype, "updateSize", null), (0, o.Cg)([(0, i.watch)("state.variant", {
                                immediately: !1
                            })], e.prototype, "onChangeStatus", null), (0, o.Cg)([(0, i.watch)("state.text", {
                                immediately: !1
                            })], e.prototype, "onChangeText", null), (0, o.Cg)([(0, i.watch)("state.text", {
                                immediately: !1
                            })], e.prototype, "onChangeTextSetMode", null), (0, o.Cg)([(0, i.watch)("state.disabled")], e.prototype, "onChangeDisabled", null), (0, o.Cg)([(0, i.watch)("state.activated")], e.prototype, "onChangeActivated", null), (0, o.Cg)([(0, i.watch)("state.name", {
                                immediately: !1
                            })], e.prototype, "onChangeName", null), (0, o.Cg)([(0, i.watch)("state.tooltip", {
                                immediately: !1
                            })], e.prototype, "onChangeTooltip", null), (0, o.Cg)([(0, i.watch)("state.tabIndex", {
                                immediately: !1
                            })], e.prototype, "onChangeTabIndex", null), (0, o.Cg)([(0, i.watch)("state.icon", {
                                immediately: !1
                            })], e.prototype, "onChangeIcon", null), (0, o.Cg)([i.cacheHTML], e.prototype, "createContainer", null), (0, o.Cg)([(0, i.watch)("button:click")], e.prototype, "__onActionFire", null), (0, o.Cg)([i.component], e)
                        }(l.D);

                    function v(t, e, n, o) {
                        var r = new h(t);
                        return r.state.tabIndex = t.o.allowTabNavigation ? 0 : -1, (0, u.K)(e) ? (r.state.icon.name = e, r.state.name = e, o && (r.state.variant = o), n && (r.state.text = n)) : r.setState(e), r
                    }
                },
                92039: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return t && "function" == typeof t.then
                    }
                    n.d(e, {
                        y: function () {
                            return o
                        }
                    })
                },
                92097: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(56298),
                        a = n(65147),
                        u = n(71005),
                        c = (n(67915), "__jodit_imageprocessor_binded"),
                        l = c + "blob-id",
                        f = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {}, e.prototype.beforeDestruct = function (t) {
                                var e, n, r = (0, i.cached)(t, "buffer"),
                                    s = null == r ? void 0 : r.get(l);
                                if (r && s) {
                                    var a = Object.keys(s);
                                    try {
                                        for (var u = (0, o.Ju)(a), c = u.next(); !c.done; c = u.next()) URL.revokeObjectURL(c.value)
                                    } catch (t) {
                                        e = {
                                            error: t
                                        }
                                    } finally {
                                        try {
                                            c && !c.done && (n = u.return) && n.call(u)
                                        } finally {
                                            if (e) throw e.error
                                        }
                                    }
                                    r.delete(l)
                                }
                            }, e.prototype.onAfterGetValueFromEditor = function (t, e) {
                                if (e !== r.SOURCE_CONSUMER) return this.onBeforeSetElementValue(t)
                            }, e.prototype.onBeforeSetElementValue = function (t) {
                                var e, n, r = this.jodit;
                                if (r.o.imageProcessor.replaceDataURIToBlobIdInView) {
                                    var i = r.buffer.get(l);
                                    if (i) {
                                        var s = Object.keys(i);
                                        try {
                                            for (var a = (0, o.Ju)(s), u = a.next(); !u.done; u = a.next())
                                                for (var c = u.value; t.value.includes(c);) t.value = t.value.replace(c, i[c])
                                        } catch (t) {
                                            e = {
                                                error: t
                                            }
                                        } finally {
                                            try {
                                                u && !u.done && (n = a.return) && n.call(a)
                                            } finally {
                                                if (e) throw e.error
                                            }
                                        }
                                    }
                                }
                            }, e.prototype.afterChange = function (t) {
                                return (0, o.sH)(this, void 0, Promise, (function () {
                                    var t;
                                    return (0, o.YH)(this, (function (e) {
                                        return (t = this.jodit).editor ? ((0, a.$$)("img", t.editor).forEach((function (e) {
                                            (0, a.dataBind)(e, c) || ((0, a.dataBind)(e, c, !0), e.complete || t.e.on(e, "load", (function n() {
                                                var o;
                                                !t.isInDestruct && (null === (o = t.e) || void 0 === o || o.fire("resize")), t.e.off(e, "load", n)
                                            })), e.src && /^data:/.test(e.src) && function (t, e) {
                                                if (t.o.imageProcessor.replaceDataURIToBlobIdInView && "undefined" != typeof ArrayBuffer && "undefined" != typeof URL) {
                                                    var n = e.src,
                                                        o = function (t) {
                                                            for (var e = atob(t.split(",")[1]), n = t.split(",")[0].split(":")[1].split(";")[0], o = new ArrayBuffer(e.length), r = new Uint8Array(o), i = 0; e.length > i; i++) r[i] = e.charCodeAt(i);
                                                            return new Blob([o], {
                                                                type: n
                                                            })
                                                        }(n);
                                                    e.src = URL.createObjectURL(o), t.e.fire("internalUpdate");
                                                    var r = t.buffer.get(l) || {};
                                                    r[e.src] = n, t.buffer.set(l, r)
                                                }
                                            }(t, e), t.e.on(e, "mousedown touchstart", (function () {
                                                t.s.select(e)
                                            })))
                                        })), [2]) : [2]
                                    }))
                                }))
                            }, (0, o.Cg)([(0, i.watch)(":afterGetValueFromEditor")], e.prototype, "onAfterGetValueFromEditor", null), (0, o.Cg)([(0, i.watch)(":beforeSetElementValue")], e.prototype, "onBeforeSetElementValue", null), (0, o.Cg)([(0, i.watch)([":change", ":afterInit", ":changePlace"]), (0, i.debounce)()], e.prototype, "afterChange", null), e
                        }(u.k);
                    s.fg.add("imageProcessor", f)
                },
                92225: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {}, e.prototype.beforeDestruct = function (t) {}, e.prototype.onKeyDownArrow = function (t) {
                                var e;
                                if (t.key === r.KEY_RIGHT && this.j.selection.isCollapsed()) {
                                    var n = this.j.selection.range,
                                        o = n.endContainer,
                                        i = n.endOffset;
                                    if (s.J.isText(o) && (null === (e = o.nodeValue) || void 0 === e ? void 0 : e.length) === i) {
                                        var a = o.parentNode;
                                        s.J.isInlineBlock(a) && !s.J.findNotEmptyNeighbor(a, !1, this.j.editor) && s.J.after(a, this.j.createInside.text(r.NBSP_SPACE))
                                    }
                                }
                            }, (0, o.Cg)([(0, i.watch)(":keydown")], e.prototype, "onKeyDownArrow", null), e
                        }(n(71005).k);
                    a.fg.add("keyArrowOutside", u)
                },
                92227: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        z: function () {
                            return i
                        }
                    });
                    var o = n(31635),
                        r = n(55186),
                        i = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "ProgressBar"
                            }, e.prototype.render = function () {
                                return "<div><div></div></div>"
                            }, e.prototype.show = function () {
                                return (this.j.workplace || this.j.container).appendChild(this.container), this
                            }, e.prototype.hide = function () {
                                return r.J.safeRemove(this.container), this
                            }, e.prototype.progress = function (t) {
                                return this.container.style.width = t.toFixed(2) + "%", this
                            }, e.prototype.destruct = function () {
                                return this.hide(), t.prototype.destruct.call(this)
                            }, e
                        }(n(29780).D)
                },
                92553: function (t, e, n) {
                    "use strict";
                    var o = n(71842),
                        r = n(56298),
                        i = n(36115);
                    i.T.prototype.autofocus = !1, i.T.prototype.cursorAfterAutofocus = "end", i.T.prototype.saveSelectionOnBlur = !0, r.fg.add("focus", (function (t) {
                        t.o.saveSelectionOnBlur && t.e.on("blur", (function () {
                            t.isEditorMode() && t.s.save(!0)
                        })).on("focus", (function () {
                            t.s.restore()
                        }));
                        var e = function () {
                            if (t.s.focus(), "end" === t.o.cursorAfterAutofocus) {
                                var e = o.J.last(t.editor, (function (t) {
                                    return o.J.isText(t)
                                }));
                                e && t.s.setCursorIn(e, !1)
                            }
                        };
                        t.e.on("afterInit", (function () {
                            t.o.autofocus && (t.defaultTimeout ? t.async.setTimeout(e, 300) : e())
                        })), t.e.on("afterInit afterAddPlace", (function () {
                            t.e.off(t.editor, "mousedown.autofocus").on(t.editor, "mousedown.autofocus", (function (e) {
                                t.isEditorMode() && e.target && o.J.isBlock(e.target) && !e.target.childNodes.length && (t.editor === e.target ? t.s.focus() : t.s.setCursorIn(e.target))
                            }))
                        }))
                    }))
                },
                92852: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        X: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(65147),
                        s = (n(28712), function () {
                            function t(t, e) {
                                this.document = t, this.createAttributes = e
                            }
                            return Object.defineProperty(t.prototype, "doc", {
                                get: function () {
                                    return (0, i.isFunction)(this.document) ? this.document() : this.document
                                },
                                enumerable: !1,
                                configurable: !0
                            }), t.prototype.element = function (t, e, n) {
                                var o = this,
                                    r = this.doc.createElement(t.toLowerCase());
                                return this.applyCreateAttributes(r), e && ((0, i.isPlainObject)(e) ? (0, i.attr)(r, e) : n = e), n && (0, i.asArray)(n).forEach((function (t) {
                                    return r.appendChild((0, i.isString)(t) ? o.fromHTML(t) : t)
                                })), r
                            }, t.prototype.div = function (t, e, n) {
                                var o = this.element("div", e, n);
                                return t && (o.className = t), o
                            }, t.prototype.sandbox = function () {
                                var t, e = this.element("iframe", {
                                    sandbox: "allow-same-origin"
                                });
                                this.doc.body.appendChild(e);
                                var n = null === (t = e.contentWindow) || void 0 === t ? void 0 : t.document;
                                if (!n) throw Error("Iframe error");
                                return n.open(), n.write("<!DOCTYPE html><html><head></head><body></body></html>"), n.close(), [n.body, e]
                            }, t.prototype.span = function (t, e, n) {
                                var o = this.element("span", e, n);
                                return t && (o.className = t), o
                            }, t.prototype.a = function (t, e, n) {
                                var o = this.element("a", e, n);
                                return t && (o.className = t), o
                            }, t.prototype.text = function (t) {
                                return this.doc.createTextNode(t)
                            }, t.prototype.fake = function () {
                                return this.text(o.INVISIBLE_SPACE)
                            }, t.prototype.fragment = function () {
                                return this.doc.createDocumentFragment()
                            }, t.prototype.fromHTML = function (t, e) {
                                var n = this.div();
                                  try {
                                    var parser = new DOMParser();
                                    var doc = parser.parseFromString(t.toString(), 'text/html');
                                    var content = doc.body.firstChild;
                                    if (content) {
                                        n.appendChild(content.cloneNode(true));
                                    }
                                } catch (error) {
                                    // Fallback to innerHTML
                                    n.innerHTML = t.toString();
                                }    
                                // n.innerHTML = t.toString();
                                var o = n.firstChild === n.lastChild && n.firstChild ? n.firstChild : n;
                                if (r.J.safeRemove(o), e) {
                                    var s = (0, i.refs)(o);
                                    Object.keys(e).forEach((function (t) {
                                        var n = s[t];
                                        n && !1 === e[t] && r.J.hide(n)
                                    }))
                                }
                                return o
                            }, t.prototype.applyCreateAttributes = function (t) {
                                if (this.createAttributes) {
                                    var e = this.createAttributes;
                                    if (e && e[t.tagName.toLowerCase()]) {
                                        var n = e[t.tagName.toLowerCase()];
                                        (0, i.isFunction)(n) ? n(t): (0, i.isPlainObject)(n) && (0, i.attr)(t, n)
                                    }
                                }
                            }, t
                        }())
                },
                92998: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        F: function () {
                            return r
                        }
                    });
                    var o = n(59101),
                        r = function () {
                            for (var t = [], e = 0; arguments.length > e; e++) t[e] = arguments[e];
                            return t.filter((function (t) {
                                return (0, o.Bq)(t).length
                            })).map((function (e, n) {
                                return e = e.replace(/([^:])[\\/]+/g, "$1/"), n && (e = e.replace(/^\//, "")), n !== t.length - 1 && (e = e.replace(/\/$/, "")), e
                            })).join("/")
                        }
                },
                93027: function (t, e, n) {
                    "use strict";
                    var o = n(931),
                        r = n(36115),
                        i = n(928),
                        s = n.n(i),
                        a = n(31230),
                        u = n.n(a);
                    r.T.prototype.imageeditor = {
                        min_width: 20,
                        min_height: 20,
                        closeAfterSave: !1,
                        width: "85%",
                        height: "85%",
                        crop: !0,
                        resize: !0,
                        resizeUseRatio: !0,
                        resizeMinWidth: 20,
                        resizeMinHeight: 20,
                        cropUseRatio: !0,
                        cropDefaultWidth: "70%",
                        cropDefaultHeight: "70%"
                    }, o.I.set("crop", s()).set("resize", u())
                },
                93267: function (t) {
                    t.exports = '<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"> <path d="M36 4h-24c-2.21 0-4 1.79-4 4v32c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4v-32c0-2.21-1.79-4-4-4zm-24 4h10v16l-5-3-5 3v-16z"/> </svg>'
                },
                93324: function (t, e, n) {
                    "use strict";
                    var o = n(17352),
                        r = n(36115);
                    r.T.prototype.askBeforePasteFromWord = !0, r.T.prototype.processPasteFromWord = !0, r.T.prototype.defaultActionOnPasteFromWord = null, r.T.prototype.pasteFromWordActionList = [{
                        value: o.INSERT_AS_HTML,
                        text: "Keep"
                    }, {
                        value: o.INSERT_AS_TEXT,
                        text: "Clean"
                    }, {
                        value: o.INSERT_ONLY_TEXT,
                        text: "Insert only Text"
                    }]
                },
                93495: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        s: function () {
                            return o.s
                        }
                    });
                    var o = n(96768)
                },
                93669: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(17352),
                        i = n(22664),
                        s = n(55186),
                        a = n(56298),
                        u = n(65147),
                        c = n(71005),
                        l = (n(90722), n(1992)),
                        f = function (t) {
                            function e() {
                                var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                                return e.buttons = [{
                                    name: "source",
                                    group: "source"
                                }], e.__lock = !1, e.__oldMirrorValue = "", e.tempMarkerStart = "{start-jodit-selection}", e.tempMarkerStartReg = /{start-jodit-selection}/g, e.tempMarkerEnd = "{end-jodit-selection}", e.tempMarkerEndReg = /{end-jodit-selection}/g, e.getSelectionStart = function () {
                                    var t, n;
                                    return null !== (n = null === (t = e.sourceEditor) || void 0 === t ? void 0 : t.getSelectionStart()) && void 0 !== n ? n : 0
                                }, e.getSelectionEnd = function () {
                                    var t, n;
                                    return null !== (n = null === (t = e.sourceEditor) || void 0 === t ? void 0 : t.getSelectionEnd()) && void 0 !== n ? n : 0
                                }, e
                            }
                            return (0, o.C6)(e, t), e.prototype.onInsertHTML = function (t) {
                                var e;
                                if (!this.j.o.readonly && !this.j.isEditorMode()) return null === (e = this.sourceEditor) || void 0 === e || e.insertRaw(t), this.toWYSIWYG(), !1
                            }, e.prototype.fromWYSIWYG = function (t) {
                                if (void 0 === t && (t = !1), !this.__lock || !0 === t) {
                                    this.__lock = !0;
                                    var e = this.j.getEditorValue(!1, r.SOURCE_CONSUMER);
                                    e !== this.getMirrorValue() && this.setMirrorValue(e), this.__lock = !1
                                }
                            }, e.prototype.toWYSIWYG = function () {
                                if (!this.__lock) {
                                    var t = this.getMirrorValue();
                                    t !== this.__oldMirrorValue && (this.__lock = !0, this.j.value = t, this.__lock = !1, this.__oldMirrorValue = t)
                                }
                            }, e.prototype.getNormalPosition = function (t, e) {
                                for (e = e.replace(/<(script|style|iframe)[^>]*>[^]*?<\/\1>/im, (function (t) {
                                        for (var e = "", n = 0; t.length > n; n += 1) e += r.INVISIBLE_SPACE;
                                        return e
                                    })); t > 0 && e[t] === r.INVISIBLE_SPACE;) t--;
                                for (var n = t; n > 0;) {
                                    if ("<" === e[--n] && void 0 !== e[n + 1] && e[n + 1].match(/[\w/]+/i)) return n;
                                    if (">" === e[n]) return t
                                }
                                return t
                            }, e.prototype.clnInv = function (t) {
                                return t.replace(r.INVISIBLE_SPACE_REG_EXP(), "")
                            }, e.prototype.onSelectAll = function (t) {
                                var e;
                                if ("selectall" === t.toLowerCase() && this.j.getRealMode() === r.MODE_SOURCE) return null === (e = this.sourceEditor) || void 0 === e || e.selectAll(), !1
                            }, e.prototype.getMirrorValue = function () {
                                var t;
                                return (null === (t = this.sourceEditor) || void 0 === t ? void 0 : t.getValue()) || ""
                            }, e.prototype.setMirrorValue = function (t) {
                                var e;
                                null === (e = this.sourceEditor) || void 0 === e || e.setValue(t)
                            }, e.prototype.setFocusToMirror = function () {
                                var t;
                                null === (t = this.sourceEditor) || void 0 === t || t.focus()
                            }, e.prototype.saveSelection = function () {
                                if (this.j.getRealMode() === r.MODE_WYSIWYG) this.j.s.save(), this.j.synchronizeValues(), this.fromWYSIWYG(!0);
                                else {
                                    if (this.j.o.editHTMLDocumentMode) return;
                                    var t = this.getMirrorValue();
                                    if (this.getSelectionStart() === this.getSelectionEnd()) {
                                        var e = this.j.s.marker(!0),
                                            n = this.getNormalPosition(this.getSelectionStart(), this.getMirrorValue());
                                        this.setMirrorValue(t.substring(0, n) + this.clnInv(e.outerHTML) + t.substring(n))
                                    } else {
                                        var o = this.j.s.marker(!0),
                                            i = this.j.s.marker(!1),
                                            s = (n = this.getNormalPosition(this.getSelectionStart(), t), this.getNormalPosition(this.getSelectionEnd(), t));
                                        this.setMirrorValue(t.slice(0, n) + this.clnInv(o.outerHTML) + t.slice(n, s) + this.clnInv(i.outerHTML) + t.slice(s))
                                    }
                                    this.toWYSIWYG()
                                }
                            }, e.prototype.removeSelection = function () {
                                if (this.j.getRealMode() === r.MODE_WYSIWYG) return this.__lock = !0, this.j.s.restore(), void(this.__lock = !1);
                                var t = this.getMirrorValue(),
                                    e = 0,
                                    n = 0;
                                try {
                                    if (t = t.replace(/<span[^>]+data-jodit-selection_marker=(["'])start\1[^>]*>[<>]*?<\/span>/gim, this.tempMarkerStart).replace(/<span[^>]+data-jodit-selection_marker=(["'])end\1[^>]*>[<>]*?<\/span>/gim, this.tempMarkerEnd), !this.j.o.editHTMLDocumentMode && this.j.o.beautifyHTML) {
                                        var o = this.j.e.fire("beautifyHTML", t);
                                        (0, u.isString)(o) && (t = o)
                                    }
                                    if (n = e = t.indexOf(this.tempMarkerStart), t = t.replace(this.tempMarkerStartReg, ""), -1 !== e) {
                                        var i = t.indexOf(this.tempMarkerEnd); - 1 !== i && (n = i)
                                    }
                                    t = t.replace(this.tempMarkerEndReg, "")
                                } finally {
                                    t = t.replace(this.tempMarkerEndReg, "").replace(this.tempMarkerStartReg, "")
                                }
                                this.setMirrorValue(t), this.setMirrorSelectionRange(e, n), this.toWYSIWYG(), this.setFocusToMirror()
                            }, e.prototype.setMirrorSelectionRange = function (t, e) {
                                var n;
                                null === (n = this.sourceEditor) || void 0 === n || n.setSelectionRange(t, e)
                            }, e.prototype.onReadonlyReact = function () {
                                var t;
                                null === (t = this.sourceEditor) || void 0 === t || t.setReadOnly(this.j.o.readonly)
                            }, e.prototype.afterInit = function (t) {
                                var e = this;
                                if (this.mirrorContainer = t.c.div("jodit-source"), t.workplace.appendChild(this.mirrorContainer), t.e.on("afterAddPlace changePlace afterInit", (function () {
                                        t.workplace.appendChild(e.mirrorContainer)
                                    })), this.sourceEditor = (0, l.b)("area", t, this.mirrorContainer, this.toWYSIWYG, this.fromWYSIWYG), t.e.on(t.ow, "keydown", (function (t) {
                                        var n;
                                        t.key === r.KEY_ESC && (null === (n = e.sourceEditor) || void 0 === n ? void 0 : n.isFocused) && e.sourceEditor.blur()
                                    })), this.onReadonlyReact(), t.e.on("placeholder.source", (function (t) {
                                        var n;
                                        null === (n = e.sourceEditor) || void 0 === n || n.setPlaceHolder(t)
                                    })).on("change.source", this.syncValueFromWYSIWYG).on("beautifyHTML", (function (t) {
                                        return t
                                    })), t.o.beautifyHTML) {
                                    var n = function () {
                                        var e;
                                        if (t.isInDestruct) return !1;
                                        var n = t.ow.html_beautify;
                                        return !(!n || t.isInDestruct || (null === (e = t.events) || void 0 === e || e.off("beautifyHTML").on("beautifyHTML", (function (t) {
                                            return n(t)
                                        })), 0))
                                    };
                                    n() || (0, u.loadNext)(t, t.o.beautifyHTMLCDNUrlsJS).then(n, (function () {
                                        return null
                                    }))
                                }
                                this.syncValueFromWYSIWYG(!0), this.initSourceEditor(t)
                            }, e.prototype.syncValueFromWYSIWYG = function (t) {
                                void 0 === t && (t = !1);
                                var e = this.j;
                                e.getMode() !== r.MODE_SPLIT && e.getMode() !== r.MODE_SOURCE || this.fromWYSIWYG(t)
                            }, e.prototype.initSourceEditor = function (t) {
                                var e, n = this;
                                if ("area" !== t.o.sourceEditor) {
                                    var o = (0, l.b)(t.o.sourceEditor, t, this.mirrorContainer, this.toWYSIWYG, this.fromWYSIWYG);
                                    o.onReadyAlways((function () {
                                        var e, r;
                                        null === (e = n.sourceEditor) || void 0 === e || e.destruct(), n.sourceEditor = o, n.syncValueFromWYSIWYG(!0), null === (r = t.events) || void 0 === r || r.fire("sourceEditorReady", t)
                                    }))
                                } else null === (e = this.sourceEditor) || void 0 === e || e.onReadyAlways((function () {
                                    var e;
                                    n.syncValueFromWYSIWYG(!0), null === (e = t.events) || void 0 === e || e.fire("sourceEditorReady", t)
                                }))
                            }, e.prototype.beforeDestruct = function () {
                                this.sourceEditor && (this.sourceEditor.destruct(), delete this.sourceEditor), s.J.safeRemove(this.mirrorContainer)
                            }, (0, o.Cg)([(0, i.watch)(":insertHTML.source")], e.prototype, "onInsertHTML", null), (0, o.Cg)([i.autobind], e.prototype, "fromWYSIWYG", null), (0, o.Cg)([i.autobind], e.prototype, "toWYSIWYG", null), (0, o.Cg)([i.autobind], e.prototype, "getNormalPosition", null), (0, o.Cg)([(0, i.watch)(":beforeCommand.source")], e.prototype, "onSelectAll", null), (0, o.Cg)([(0, i.watch)(":beforeSetMode.source")], e.prototype, "saveSelection", null), (0, o.Cg)([(0, i.watch)(":afterSetMode.source")], e.prototype, "removeSelection", null), (0, o.Cg)([i.autobind], e.prototype, "setMirrorSelectionRange", null), (0, o.Cg)([(0, i.watch)(":readonly.source")], e.prototype, "onReadonlyReact", null), (0, o.Cg)([i.autobind], e.prototype, "syncValueFromWYSIWYG", null), e
                        }(c.k);
                    a.fg.add("source", f)
                },
                94070: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        z: function () {
                            return h
                        }
                    });
                    var o = n(31635),
                        r = n(37474),
                        i = n(22664),
                        s = n(42589),
                        a = n(92032),
                        u = n(6455),
                        c = n(86283),
                        l = n(13642),
                        f = n(39611),
                        d = n(57023),
                        p = n(37424),
                        h = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.mode = "horizontal", n.removeButtons = [], n
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "UIList"
                            }, e.prototype.__onChangeMode = function () {
                                this.setMod("mode", this.mode)
                            }, e.prototype.makeGroup = function () {
                                return new u.U(this.jodit)
                            }, Object.defineProperty(e.prototype, "buttons", {
                                get: function () {
                                    return this.allChildren.filter((function (t) {
                                        return r.u.isInstanceOf(t, a.lD)
                                    }))
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.getButtonsNames = function () {
                                return this.buttons.map((function (t) {
                                    return t instanceof a.lD && t.state.name || ""
                                })).filter((function (t) {
                                    return "" !== t
                                }))
                            }, e.prototype.setRemoveButtons = function (t) {
                                return this.removeButtons = t || [], this
                            }, e.prototype.build = function (t, e) {
                                var n = this;
                                void 0 === e && (e = null), t = (0, s.u)(t), this.clear();
                                var o, r = !1,
                                    i = this.makeGroup();
                                this.append(i), i.setMod("line", !0);
                                var a = function (t) {
                                        var s = null;
                                        switch (t.name) {
                                            case "\n":
                                                (i = n.makeGroup()).setMod("line", !0), o = n.makeGroup(), i.append(o), n.append(i);
                                                break;
                                            case "|":
                                                r || (r = !0, s = new c.C(n.j));
                                                break;
                                            case "---":
                                                o.setMod("before-spacer", !0);
                                                var a = new l.b(n.j);
                                                i.append(a), o = n.makeGroup(), i.append(o), r = !1;
                                                break;
                                            default:
                                                r = !1, s = "select" === t.component ? n.makeSelect(t, e) : n.makeButton(t, e)
                                        }
                                        s && (o || (o = n.makeGroup(), i.append(o)), o.append(s))
                                    },
                                    u = function (t) {
                                        var e;
                                        return !n.removeButtons.includes(t.name) && (!t.isVisible || (null === (e = t.isVisible) || void 0 === e ? void 0 : e.call(t, n.j, t)))
                                    };
                                return t.forEach((function (t) {
                                    if ((0, f.i)(t)) {
                                        var e = t.buttons.filter((function (t) {
                                            return t
                                        }));
                                        e.length && ((o = n.makeGroup()).setMod("separated", !0).setMod("group", t.group), i.append(o), (0, p.Q)(e, n.j.o.controls).filter(u).forEach(a))
                                    } else {
                                        o || (o = n.makeGroup(), i.append(o));
                                        var r = (0, d.U)(t, n.j.o.controls);
                                        u(r) && a(r)
                                    }
                                })), this.update(), this
                            }, e.prototype.makeSelect = function (t, e) {
                                throw new Error("Not implemented behaviour")
                            }, e.prototype.makeButton = function (t, e) {
                                return new a.lD(this.j, {
                                    name: t.name
                                })
                            }, (0, o.Cg)([(0, i.watch)("mode"), (0, i.hook)("ready")], e.prototype, "__onChangeMode", null), (0, o.Cg)([i.component], e)
                        }(u.U)
                },
                94291: function (t, e, n) {
                    "use strict";
                    var o = n(71842),
                        r = n(65147),
                        i = n(97369),
                        s = n(931),
                        a = n(36115),
                        u = n(67447),
                        c = n.n(u);
                    a.T.prototype.table = {
                        selectionCellStyle: "border: 1px double #1e88e5 !important;",
                        useExtraClassesOptions: !1
                    }, s.I.set("table", c()), a.T.prototype.controls.table = {
                        data: {
                            cols: 10,
                            rows: 10,
                            classList: {
                                "table table-bordered": "Bootstrap Bordered",
                                "table table-striped": "Bootstrap Striped",
                                "table table-dark": "Bootstrap Dark"
                            }
                        },
                        popup: function (t, e, n, s) {
                            t.editor.normalize();
                            for (var a = t.history.snapshot.make(), u = s.control, c = u.data && u.data.rows ? u.data.rows : 10, l = u.data && u.data.cols ? u.data.cols : 10, f = t.c.fromHTML('<form class="jodit-form jodit-form__inserter"><div class="jodit-form__table-creator-box"><div class="jodit-form__container"></div><div class="jodit-form__options">' + function () {
                                    if (!t.o.table.useExtraClassesOptions) return "";
                                    var e = [];
                                    if (u.data) {
                                        var n = u.data.classList;
                                        Object.keys(n).forEach((function (t) {
                                            e.push('<label class="jodit_vertical_middle"><input class="jodit-checkbox" value="'.concat(t, '" type="checkbox"/>').concat(n[t], "</label>"))
                                        }))
                                    }
                                    return e.join("")
                                }() + '</div></div><label class="jodit-form__center"><span>1</span> &times; <span>1</span></label></form>'), d = f.querySelectorAll("span")[0], p = f.querySelectorAll("span")[1], h = f.querySelector(".jodit-form__container"), v = f.querySelector(".jodit-form__options"), g = [], m = c * l, y = 0; m > y; y += 1) g[y] || g.push(t.c.element("span", {
                                dataIndex: y
                            }));
                            if (t.e.on(h, "mousemove", (function (t, e) {
                                    var n = t.target;
                                    if (o.J.isTag(n, "span")) {
                                        for (var r = void 0 === e || isNaN(e) ? parseInt((0, i.attr)(n, "-index") || "0", 10) : e || 0, s = Math.ceil((r + 1) / l), a = r % l + 1, u = 0; g.length > u; u += 1) g[u].className = u % l + 1 > a || s < Math.ceil((u + 1) / l) ? "" : "jodit_hovered";
                                        p.textContent = a.toString(), d.textContent = s.toString()
                                    }
                                })).on(h, "touchstart mousedown", (function (e) {
                                    var s = e.target;
                                    if (e.preventDefault(), e.stopImmediatePropagation(), o.J.isTag(s, "span")) {
                                        var u = parseInt((0, i.attr)(s, "-index") || "0", 10),
                                            c = Math.ceil((u + 1) / l),
                                            f = u % l + 1,
                                            d = t.createInside,
                                            p = d.element("tbody"),
                                            h = d.element("table");
                                        h.appendChild(p);
                                        for (var g, m, y = null, b = 1; c >= b; b += 1) {
                                            g = d.element("tr");
                                            for (var _ = 1; f >= _; _ += 1) m = d.element("td"), y || (y = m), (0, r.css)(m, "width", (100 / f).toFixed(4) + "%"), m.appendChild(d.element("br")), g.appendChild(d.text("\n")), g.appendChild(d.text("\t")), g.appendChild(m);
                                            p.appendChild(d.text("\n")), p.appendChild(g)
                                        }(0, r.$$)("input[type=checkbox]:checked", v).forEach((function (t) {
                                            t.value.split(/[\s]+/).forEach((function (t) {
                                                h.classList.add(t)
                                            }))
                                        })), t.s.restore(), t.s.removeMarkers(), t.editor.normalize(), t.history.snapshot.restore(a);
                                        var C = o.J.furthest(t.s.current(), o.J.isBlock, t.editor);
                                        if (C && o.J.isEmpty(C)) o.J.replace(C, h, void 0, !1, !0);
                                        else if (C) {
                                            var w = d.text("\n");
                                            o.J.after(C, w), o.J.after(w, h)
                                        } else t.s.insertNode(h, !1);
                                        y && (t.s.setCursorIn(y), (0, r.scrollIntoViewIfNeeded)(y, t.editor, t.ed)), n()
                                    }
                                })), s && s.parentElement) {
                                for (y = 0; c > y; y += 1) {
                                    for (var b = t.c.div(), _ = 0; l > _; _ += 1) b.appendChild(g[y * l + _]);
                                    h.appendChild(b)
                                }
                                g[0] && (g[0].className = "hovered")
                            }
                            return f
                        },
                        tooltip: "Insert table"
                    }
                },
                94450: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        w: function () {
                            return a
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(42448),
                        s = n(59101);

                    function a(t) {
                        -1 !== t.indexOf("<html ") && (t = (t = t.substring(t.indexOf("<html "), t.length)).substring(0, t.lastIndexOf("</html>") + 7));
                        var e = "";
                        try {
                            var n = o.globalDocument.createElement("div");
                            n.innerHTML = t;
                            var a = [];
                            n.firstChild && r.J.each(n, (function (t) {
                                if (t) switch (t.nodeType) {
                                    case Node.ELEMENT_NODE:
                                        switch (t.nodeName) {
                                            case "STYLE":
                                            case "LINK":
                                            case "META":
                                                a.push(t);
                                                break;
                                            case "W:SDT":
                                            case "W:SDTPR":
                                            case "FONT":
                                                r.J.unwrap(t);
                                                break;
                                            default:
                                                (0, i.$)(t.attributes).forEach((function (e) {
                                                    -1 === ["src", "href", "rel", "content"].indexOf(e.name.toLowerCase()) && t.removeAttribute(e.name)
                                                }))
                                        }
                                        break;
                                    case Node.TEXT_NODE:
                                        break;
                                    default:
                                        a.push(t)
                                }
                            })), r.J.safeRemove.apply(null, a), e = n.innerHTML
                        } catch (t) {}
                        return e && (t = e), (t = t.split(/(\n)/).filter(s.Bq).join("\n")).replace(/<(\/)?(html|colgroup|col|o:p)[^>]*>/g, "").replace(/<!--[^>]*>/g, "")
                    }
                },
                94628: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        ar: function () {
                            return r.a
                        },
                        cs_cz: function () {
                            return r.a
                        },
                        de: function () {
                            return r.a
                        },
                        es: function () {
                            return s.a
                        },
                        fa: function () {
                            return r.a
                        },
                        fi: function () {
                            return r.a
                        },
                        fr: function () {
                            return r.a
                        },
                        he: function () {
                            return r.a
                        },
                        hu: function () {
                            return r.a
                        },
                        id: function () {
                            return r.a
                        },
                        it: function () {
                            return r.a
                        },
                        ja: function () {
                            return r.a
                        },
                        ko: function () {
                            return r.a
                        },
                        mn: function () {
                            return r.a
                        },
                        nl: function () {
                            return r.a
                        },
                        pl: function () {
                            return r.a
                        },
                        pt_br: function () {
                            return r.a
                        },
                        ru: function () {
                            return r.a
                        },
                        tr: function () {
                            return r.a
                        },
                        zh_cn: function () {
                            return r.a
                        },
                        zh_tw: function () {
                            return r.a
                        }
                    });
                    var o = n(41324),
                        r = n.n(o),
                        i = n(57032),
                        s = n.n(i)
                },
                94766: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        R: function () {
                            return r
                        }
                    });
                    var o = n(55186);

                    function r(t, e) {
                        return !!o.J.isCell(e.parentElement)
                    }
                },
                94806: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"><path d="M640 768h512v-192q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-192q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"/></svg>'
                },
                95032: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"/> </svg>'
                },
                95134: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1664 960q-152-236-381-353 61 104 61 225 0 185-131.5 316.5t-316.5 131.5-316.5-131.5-131.5-316.5q0-121 61-225-229 117-381 353 133 205 333.5 326.5t434.5 121.5 434.5-121.5 333.5-326.5zm-720-384q0-20-14-34t-34-14q-125 0-214.5 89.5t-89.5 214.5q0 20 14 34t34 14 34-14 14-34q0-86 61-147t147-61q20 0 34-14t14-34zm848 384q0 34-20 69-140 230-376.5 368.5t-499.5 138.5-499.5-139-376.5-368q-20-35-20-69t20-69q140-229 376.5-368t499.5-139 499.5 139 376.5 368q20 35 20 69z"/> </svg>'
                },
                95274: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $s: function () {
                            return a
                        },
                        Wv: function () {
                            return u
                        },
                        sz: function () {
                            return s
                        }
                    });
                    var o = n(55186),
                        r = n(70592),
                        i = n(38046);

                    function s(t, e, n, s) {
                        var a;
                        if (void 0 === s && (s = !0), !e || !(0, i._)(e)) return !1;
                        var u = t.element,
                            c = t.elementIsDefault,
                            l = t.options;
                        if (o.J.isList(e) && t.elementIsList) return !0;
                        var f = o.J.isTag(e, u);
                        return !(!f || c && n) || !(!Boolean((null === (a = l.attributes) || void 0 === a ? void 0 : a.style) && (s ? (0, r.g)(e, l.attributes.style) : (0, r.Y)(e, l.attributes.style))) || t.elementIsList) || !f && !n && c && o.J.isInlineBlock(e)
                    }

                    function a(t, e, n) {
                        return o.J.closest(e, (function (e) {
                            return s(t, e, !0, !1)
                        }), n)
                    }

                    function u(t, e) {
                        var n, o, s = t.element,
                            a = t.options;
                        if (!e || !(0, i._)(e)) return !1;
                        var u = e.nodeName.toLowerCase() === s,
                            c = Boolean((null === (n = a.attributes) || void 0 === n ? void 0 : n.style) && (0, r.Y)(e, null === (o = a.attributes) || void 0 === o ? void 0 : o.style));
                        return u && c
                    }
                },
                95320: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 18 18"> <g fill-rule="evenodd" stroke="none" stroke-width="1"> <g transform="translate(-381.000000, -381.000000)"> <g transform="translate(381.000000, 381.000000)"> <path d="M0,2 L2,2 L2,0 C0.9,0 0,0.9 0,2 L0,2 Z M0,10 L2,10 L2,8 L0,8 L0,10 L0,10 Z M4,18 L6,18 L6,16 L4,16 L4,18 L4,18 Z M0,6 L2,6 L2,4 L0,4 L0,6 L0,6 Z M10,0 L8,0 L8,2 L10,2 L10,0 L10,0 Z M16,0 L16,2 L18,2 C18,0.9 17.1,0 16,0 L16,0 Z M2,18 L2,16 L0,16 C0,17.1 0.9,18 2,18 L2,18 Z M0,14 L2,14 L2,12 L0,12 L0,14 L0,14 Z M6,0 L4,0 L4,2 L6,2 L6,0 L6,0 Z M8,18 L10,18 L10,16 L8,16 L8,18 L8,18 Z M16,10 L18,10 L18,8 L16,8 L16,10 L16,10 Z M16,18 C17.1,18 18,17.1 18,16 L16,16 L16,18 L16,18 Z M16,6 L18,6 L18,4 L16,4 L16,6 L16,6 Z M16,14 L18,14 L18,12 L16,12 L16,14 L16,14 Z M12,18 L14,18 L14,16 L12,16 L12,18 L12,18 Z M12,2 L14,2 L14,0 L12,0 L12,2 L12,2 Z M4,14 L14,14 L14,4 L4,4 L4,14 L4,14 Z M6,6 L12,6 L12,12 L6,12 L6,6 L6,6 Z"/> </g> </g> </g> </svg>'
                },
                95350: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        E: function () {
                            return r
                        }
                    });
                    var o = n(9823);

                    function r(t) {
                        return (0, o.Kg)(t) || (0, o.cy)(t) ? t.length : (0, o.Qd)(t) ? Object.keys(t).length : 0
                    }
                },
                96025: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Q: function () {
                            return r
                        }
                    });
                    var o = n(31635),
                        r = function (t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "FileBrowserFiles"
                            }, e
                        }(n(53048).Ue)
                },
                96134: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        P: function () {
                            return r
                        }
                    });
                    var o = n(449);

                    function r(t) {
                        return (0, o.k)(t).toLowerCase()
                    }
                },
                96369: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        z: function () {
                            return o.z
                        }
                    });
                    var o = n(80071)
                },
                96768: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        s: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                        if ("rgba(0, 0, 0, 0)" === t || "" === t) return !1;
                        if (!t) return "#000000";
                        if ("#" === t.substr(0, 1)) return t;
                        var e = /([\s\n\t\r]*?)rgb\((\d+), (\d+), (\d+)\)/.exec(t) || /([\s\n\t\r]*?)rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/.exec(t);
                        if (!e) return "#000000";
                        for (var n = parseInt(e[2], 10), o = parseInt(e[3], 10), r = (parseInt(e[4], 10) | o << 8 | n << 16).toString(16).toUpperCase(); 6 > r.length;) r = "0" + r;
                        return e[1] + "#" + r
                    }
                },
                96900: function (t, e, n) {
                    "use strict";
                    n(36115).T.prototype.draggableTags = ["img", "jodit-media", "jodit"]
                },
                97179: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(22664),
                        i = n(56298),
                        s = n(26150),
                        a = n(71005),
                        u = (n(78703), n(11995)),
                        c = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.buttons = [{
                                    group: "state",
                                    name: "spellcheck"
                                }], (0, i.JW)(u), n
                            }
                            return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                                var e = this;
                                t.e.on("afterInit afterAddPlace prepareWYSIWYGEditor", this.toggleSpellcheck), this.toggleSpellcheck(), t.registerCommand("toggleSpellcheck", (function () {
                                    e.jodit.o.spellcheck = !e.jodit.o.spellcheck, e.toggleSpellcheck(), e.j.e.fire("updateToolbar")
                                }))
                            }, e.prototype.toggleSpellcheck = function () {
                                (0, s.C)(this.jodit.editor, "spellcheck", this.jodit.o.spellcheck)
                            }, e.prototype.beforeDestruct = function (t) {}, (0, o.Cg)([r.autobind], e.prototype, "toggleSpellcheck", null), e
                        }(a.k);
                    i.fg.add("spellcheck", c)
                },
                97324: function (t, e, n) {
                    "use strict";

                    function o(t, e, n) {
                        return t.dataProvider.fileRemove(t.state.currentPath, e, n).then((function (n) {
                            t.status(n || t.i18n('File "%s" was deleted', e), !0)
                        })).catch(t.status)
                    }
                    n.d(e, {
                        W: function () {
                            return o
                        }
                    })
                },
                97369: function (t, e, n) {
                    "use strict";
                    n.r(e), n.d(e, {
                        $$: function () {
                            return k.$$
                        },
                        ConfigDeepFlatten: function () {
                            return d.pi
                        },
                        ConfigFlatten: function () {
                            return d.VL
                        },
                        ConfigProto: function () {
                            return d.tb
                        },
                        ConnectionError: function () {
                            return y.Rc
                        },
                        LimitedStack: function () {
                            return L.d
                        },
                        OptionsError: function () {
                            return y.ZW
                        },
                        abort: function () {
                            return y.h2
                        },
                        alignElement: function () {
                            return o.Op
                        },
                        alreadyLoadedList: function () {
                            return r.EW
                        },
                        appendScriptAsync: function () {
                            return r.w4
                        },
                        appendStyleAsync: function () {
                            return r.S5
                        },
                        attr: function () {
                            return u.C
                        },
                        browser: function () {
                            return c.T
                        },
                        buildQuery: function () {
                            return l.Z
                        },
                        call: function () {
                            return P.T1
                        },
                        callPromise: function () {
                            return P.o_
                        },
                        clearAlign: function () {
                            return o.Xm
                        },
                        clearCenterAlign: function () {
                            return h.a
                        },
                        cns: function () {
                            return S.f
                        },
                        completeUrl: function () {
                            return f.X
                        },
                        connection: function () {
                            return y.FI
                        },
                        convertMediaUrlToVideoEmbed: function () {
                            return p.m
                        },
                        css: function () {
                            return h.A
                        },
                        cssPath: function () {
                            return k.bE
                        },
                        ctrlKey: function () {
                            return v.X
                        },
                        dataBind: function () {
                            return g.m
                        },
                        defaultLanguage: function () {
                            return m.e
                        },
                        error: function () {
                            return y.z3
                        },
                        fastClone: function () {
                            return b.y6
                        },
                        get: function () {
                            return _.J
                        },
                        getClassName: function () {
                            return C.u
                        },
                        getDataTransfer: function () {
                            return P.my
                        },
                        getXPathByElement: function () {
                            return k.fz
                        },
                        hAlignElement: function () {
                            return o.Mr
                        },
                        humanSizeToBytes: function () {
                            return w.z
                        },
                        inView: function () {
                            return j.l
                        },
                        isAbort: function () {
                            return y.rV
                        },
                        isAtom: function () {
                            return b.mA
                        },
                        keepNames: function () {
                            return C.M
                        },
                        keys: function () {
                            return P.HP
                        },
                        loadImage: function () {
                            return P.yt
                        },
                        loadNext: function () {
                            return r.Qt
                        },
                        loadNextStyle: function () {
                            return r.x_
                        },
                        markAsAtomic: function () {
                            return b.Hp
                        },
                        markDeprecated: function () {
                            return S.B
                        },
                        markOwner: function () {
                            return P.b_
                        },
                        memorizeExec: function () {
                            return P.qN
                        },
                        options: function () {
                            return y.fF
                        },
                        parseQuery: function () {
                            return E.m
                        },
                        previewBox: function () {
                            return T.u
                        },
                        refs: function () {
                            return k.DY
                        },
                        reset: function () {
                            return I.c
                        },
                        resolveElement: function () {
                            return k.tI
                        },
                        scrollIntoViewIfNeeded: function () {
                            return j.$
                        },
                        set: function () {
                            return x.h
                        }
                    });
                    var o = n(40080),
                        r = n(27301),
                        i = n(28712),
                        s = {};
                    for (var a in i) 0 > ["default", "alignElement", "clearAlign", "hAlignElement", "alreadyLoadedList", "appendScriptAsync", "appendStyleAsync", "loadNext", "loadNextStyle"].indexOf(a) && (s[a] = function (t) {
                        return i[t]
                    }.bind(0, a));
                    n.d(e, s);
                    var u = n(26150),
                        c = n(65717),
                        l = n(76104),
                        f = n(60346),
                        d = n(86248),
                        p = n(82807),
                        h = n(38322),
                        v = n(34446),
                        g = n(72197),
                        m = n(17527),
                        y = n(50156),
                        b = n(49429),
                        _ = n(16841),
                        C = n(75766),
                        w = n(99898),
                        S = n(67400),
                        E = n(70807),
                        T = n(98434),
                        I = n(44210),
                        j = n(641),
                        k = n(58720),
                        x = n(40677),
                        L = n(70069),
                        P = n(84976)
                },
                97394: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        Q: function () {
                            return u
                        }
                    });
                    var o = n(31635),
                        r = n(22664),
                        i = n(76166),
                        s = n(53048),
                        a = n(8809),
                        u = function (t) {
                            function e(e) {
                                var n = t.call(this, e) || this;
                                return n.__listenEvents = "updatePlugins updateToolbar changeStack mousedown mouseup keydown change afterInit readonly afterResize selectionchange changeSelection focus afterSetMode touchstart focus blur", n
                            }
                            return (0, o.C6)(e, t), e.prototype.className = function () {
                                return "ToolbarCollection"
                            }, Object.defineProperty(e.prototype, "firstButton", {
                                get: function () {
                                    return (0, o.zs)(this.buttons, 1)[0] || null
                                },
                                enumerable: !1,
                                configurable: !0
                            }), e.prototype.makeButton = function (t, e) {
                                return void 0 === e && (e = null), (0, a.BJ)(this.j, t, e)
                            }, e.prototype.makeSelect = function (t, e) {
                                return void 0 === e && (e = null), (0, a.RR)(this.j, t, e)
                            }, e.prototype.shouldBeActive = function (t) {}, e.prototype.shouldBeDisabled = function (t) {}, e.prototype.getTarget = function (t) {
                                return t.target || null
                            }, e.prototype.__immediateUpdate = function () {
                                this.isDestructed || this.j.isLocked || (t.prototype.update.call(this), this.j.e.fire("afterUpdateToolbar", this))
                            }, e.prototype.update = function () {
                                this.__immediateUpdate()
                            }, e.prototype.setDirection = function (t) {
                                this.container.style.direction = t, this.container.setAttribute("dir", t)
                            }, e.prototype.__initEvents = function () {
                                this.j.e.on(this.__listenEvents, this.update).on("afterSetMode focus", this.__immediateUpdate)
                            }, e.prototype.hide = function () {
                                this.container.remove()
                            }, e.prototype.show = function () {
                                this.appendTo(this.j.toolbarContainer)
                            }, e.prototype.showInline = function (t) {
                                throw (0, i.z3)("The method is not implemented for this class.")
                            }, e.prototype.build = function (e, n) {
                                void 0 === n && (n = null);
                                var o = this.j.e.fire("beforeToolbarBuild", e);
                                return o && (e = o), t.prototype.build.call(this, e, n), this
                            }, e.prototype.destruct = function () {
                                this.isDestructed || (this.j.e.off(this.__listenEvents, this.update).off("afterSetMode focus", this.__immediateUpdate), t.prototype.destruct.call(this))
                            }, (0, o.Cg)([r.autobind], e.prototype, "__immediateUpdate", null), (0, o.Cg)([(0, r.debounce)((function (t) {
                                return t.j.defaultTimeout
                            }), !0)], e.prototype, "update", null), (0, o.Cg)([(0, r.hook)("ready")], e.prototype, "__initEvents", null), (0, o.Cg)([r.component], e)
                        }(s.z4)
                },
                97621: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        $s: function () {
                            return c.$s
                        },
                        AS: function () {
                            return s.A
                        },
                        Dd: function () {
                            return u.D
                        },
                        EF: function () {
                            return r.E
                        },
                        G6: function () {
                            return i.G
                        },
                        LV: function () {
                            return p.L
                        },
                        M6: function () {
                            return u.M
                        },
                        Yx: function () {
                            return f.Y
                        },
                        iu: function () {
                            return a.i
                        },
                        ks: function () {
                            return l.k
                        },
                        tm: function () {
                            return d.t
                        },
                        yP: function () {
                            return o.y
                        }
                    });
                    var o = n(20384),
                        r = n(10466),
                        i = n(75220),
                        s = n(52052),
                        a = (n(70592), n(78777)),
                        u = (n(38046), n(13676)),
                        c = n(95274),
                        l = n(90325),
                        f = (n(61001), n(38271)),
                        d = n(86500),
                        p = n(3101);
                    n(80394)
                },
                97767: function (t, e, n) {
                    "use strict";
                    var o = n(71842),
                        r = n(931),
                        i = n(36115),
                        s = n(67176),
                        a = n.n(s),
                        u = n(14017),
                        c = n.n(u),
                        l = n(3392);
                    r.I.set("indent", a()).set("outdent", c()), i.T.prototype.controls.indent = {
                        tooltip: "Increase Indent"
                    }, i.T.prototype.controls.outdent = {
                        isDisabled: function (t) {
                            var e = t.s.current();
                            if (e) {
                                var n = o.J.closest(e, o.J.isBlock, t.editor);
                                if (n) {
                                    var r = (0, l.i)(t.o.direction, n);
                                    return !n.style[r] || 0 >= parseInt(n.style[r], 10)
                                }
                            }
                            return !0
                        },
                        tooltip: "Decrease Indent"
                    }, i.T.prototype.indentMargin = 10
                },
                98228: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        m: function () {
                            return s
                        }
                    });
                    var o = n(17352),
                        r = n(55186),
                        i = n(97369);

                    function s(t) {
                        if (!t) return null;
                        var e = r.J.isHTMLElement(t),
                            n = e && (0, i.css)(t, "overflowY");
                        return e && "visible" !== n && "hidden" !== n && t.scrollHeight >= t.clientHeight ? t : s(t.parentNode) || o.globalDocument.scrollingElement || o.globalDocument.body
                    }
                },
                98253: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        B: function () {
                            return i
                        },
                        K: function () {
                            return r
                        }
                    });
                    var o = n(37923);

                    function r(t) {
                        return "string" == typeof t
                    }

                    function i(t) {
                        return (0, o.c)(t) && r(t[0])
                    }
                },
                98341: function (t, e, n) {
                    "use strict";
                    var o = n(31635),
                        r = n(55186),
                        i = n(56298),
                        s = n(84976),
                        a = n(71005),
                        u = n(931),
                        c = n(36115),
                        l = n(93267),
                        f = n.n(l);
                    c.T.prototype.controls.classSpan = {
                        command: "applyClassName",
                        exec: s.qN,
                        list: ["enabled", "disabled", "activated", "text-left", "text-center", "text-right", "warning", "error"],
                        isChildActive: function (t, e) {
                            var n = t.s.current();
                            if (n) {
                                var o = r.J.closest(n, r.J.isElement, t.editor) || t.editor;
                                return Boolean(e.control.args && o.classList.contains(e.control.args[0].toString()))
                            }
                            return !1
                        },
                        isActive: function (t, e) {
                            var n = t.s.current();
                            if (n) {
                                var o = r.J.closest(n, r.J.isElement, t.editor) || t.editor,
                                    i = !1;
                                return e.control.list && Object.keys(e.control.list).forEach((function (t) {
                                    o.classList.contains(t) && (i = !0)
                                })), Boolean(o && o !== t.editor && void 0 !== e.control.list && i)
                            }
                            return !1
                        },
                        childTemplate: function (t, e, n) {
                            return '<span class="'.concat(e, '">').concat(t.i18n(n), "</span>")
                        },
                        tooltip: "Insert className"
                    };
                    var d = function (t) {
                        function e() {
                            var e = t.apply(this, (0, o.fX)([], (0, o.zs)(arguments), !1)) || this;
                            return e.buttons = [{
                                name: "classSpan",
                                group: "script"
                            }], e
                        }
                        return (0, o.C6)(e, t), e.prototype.afterInit = function (t) {
                            t.registerCommand("applyClassName", (function (e, n, o) {
                                var r;
                                return t.s.commitStyle({
                                    attributes: (r = {}, r.class = o, r)
                                }), !1
                            }))
                        }, e.prototype.beforeDestruct = function () {}, e
                    }(a.k);
                    i.fg.add("classSpan", d), u.I.set("class-span", f())
                },
                98434: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        u: function () {
                            return u
                        }
                    });
                    var o = n(55186),
                        r = n(98253),
                        i = n(26150),
                        s = n(38322),
                        a = n(58720);

                    function u(t, e, n, u) {
                        void 0 === n && (n = "px"), void 0 === u && (u = null);
                        var c = [],
                            l = function (t, e) {
                                var n = [];
                                try {
                                    (0, a.$$)("img", t.editor).forEach((function (r) {
                                        var s = [(0, i.C)(r, "width"), (0, i.C)(r, "height"), r.src];
                                        (0, i.C)(r, {
                                            width: r.offsetWidth + e,
                                            height: r.offsetHeight + e
                                        });
                                        var a = t.createInside.a();
                                        t.ed.body.appendChild(a), a.href = r.src, r.src = a.href, o.J.safeRemove(a), n.push((function () {
                                            var t;
                                            r.src = null !== (t = s[2]) && void 0 !== t ? t : "", (0, i.C)(r, {
                                                width: s[0] || null,
                                                height: s[1] || null
                                            })
                                        }))
                                    }))
                                } catch (t) {
                                    throw n.forEach((function (t) {
                                        return t()
                                    })), n.length = 0, t
                                }
                                return n
                            }(t, n);
                        try {
                            var f = t.e.fire("beforePreviewBox", e, n);
                            if (null != f) return f;
                            var d = t.c.div("jodit__preview-box jodit-context");
                            u && u.appendChild(d), (0, s.A)(d, {
                                position: "relative",
                                padding: 16
                            });
                            var p = t.value || "<div style='position: absolute;left:50%;top:50%;transform: translateX(-50%) translateY(-50%);color:#ccc;'>".concat(t.i18n("Empty"), "</div>");
                            if (t.iframe) {
                                var h = t.create.element("iframe");
                                (0, s.A)(h, {
                                    minWidth: 800,
                                    minHeight: 600,
                                    border: 0
                                }), d.appendChild(h);
                                var v = h.contentWindow;
                                if (v && (t.e.fire("generateDocumentStructure.iframe", v.document, t), d = v.document.body, "function" == typeof ResizeObserver)) {
                                    var g = !1,
                                        m = v.document.body,
                                        y = new ResizeObserver(t.async.debounce((function () {
                                            y.unobserve(m), h.style.height = "".concat(m.offsetHeight + 20, "px"), t.async.requestAnimationFrame((function () {
                                                !g && y.observe(m)
                                            }))
                                        }), 100)),
                                        b = function () {
                                            g = !0, y.unobserve(m), y.disconnect(), t.e.off("beforeDestruct", b)
                                        };
                                    c.push(b), t.e.on("beforeDestruct", b)
                                }
                            } else(0, s.A)(d, {
                                minWidth: 1024,
                                minHeight: 600,
                                border: 0
                            });
                            var _ = function (e, n) {
                                var s = (0, r.K)(n) ? t.c.div() : n;
                                (0, r.K)(n) && (s.innerHTML = n);
                                for (var a = 0; s.childNodes.length > a; a += 1) {
                                    var u = s.childNodes[a];
                                    if (o.J.isElement(u)) {
                                        for (var c = e.ownerDocument.createElement(u.nodeName), l = 0; u.attributes.length > l; l += 1)(0, i.C)(c, u.attributes[l].nodeName, u.attributes[l].nodeValue);
                                        0 === u.childNodes.length || o.J.isTag(u, "table") ? "SCRIPT" === u.nodeName ? u.textContent && (c.textContent = u.textContent) : u.innerHTML && (c.innerHTML = u.innerHTML) : _(c, u);
                                        try {
                                            e.appendChild(c)
                                        } catch (t) {}
                                    } else try {
                                        e.appendChild(u.cloneNode(!0))
                                    } catch (t) {}
                                }
                            };
                            return _(d, p), t.e.fire("afterPreviewBox", d), [d, function () {
                                c.forEach((function (t) {
                                    return t()
                                }))
                            }]
                        } finally {
                            l.forEach((function (t) {
                                return t()
                            }))
                        }
                    }
                },
                98711: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"/> </svg>'
                },
                98964: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1152 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/> </svg>'
                },
                99573: function (t, e, n) {
                    "use strict";
                    var o = n(55186),
                        r = n(56298),
                        i = n(65147),
                        s = n(40080),
                        a = n(38322),
                        u = n(931),
                        c = n(36115),
                        l = n(80515);
                    u.I.set("justify", n.n(l)()), c.T.prototype.controls.align = {
                        name: "left",
                        tooltip: "Align",
                        update: function (t, e) {
                            var n = e.control,
                                r = t.s.current();
                            if (r) {
                                var s = o.J.closest(r, o.J.isBlock, t.editor) || t.editor,
                                    u = (0, a.A)(s, "text-align").toString();
                                n.defaultValue && -1 !== n.defaultValue.indexOf(u) && (u = "left");
                                var c = n.list,
                                    l = n.data;
                                l && l.currentValue !== u && c && ((0, i.isPlainObject)(c) ? c[u] : c.includes(u)) && (t.o.textIcons || "select" === n.component ? e.state.text = u : e.state.icon.name = u, l.currentValue = u)
                            }
                        },
                        isActive: function (t, e) {
                            var n = t.s.current();
                            if (!n || !e.control.defaultValue) return !1;
                            var r = o.J.closest(n, o.J.isBlock, t.editor) || t.editor;
                            return -1 === e.control.defaultValue.indexOf((0, a.A)(r, "text-align").toString())
                        },
                        defaultValue: ["left", "start", "inherit"],
                        data: {
                            currentValue: "left"
                        },
                        list: ["center", "left", "right", "justify"]
                    }, c.T.prototype.controls.center = {
                        command: "justifyCenter",
                        css: {
                            "text-align": "center"
                        },
                        tooltip: "Align Center"
                    }, c.T.prototype.controls.justify = {
                        command: "justifyFull",
                        css: {
                            "text-align": "justify"
                        },
                        tooltip: "Align Justify"
                    }, c.T.prototype.controls.left = {
                        command: "justifyLeft",
                        css: {
                            "text-align": "left"
                        },
                        tooltip: "Align Left"
                    }, c.T.prototype.controls.right = {
                        command: "justifyRight",
                        css: {
                            "text-align": "right"
                        },
                        tooltip: "Align Right"
                    }, r.fg.add("justify", (function (t) {
                        t.registerButton({
                            name: "align",
                            group: "indent"
                        });
                        var e = function (e) {
                            return t.s.focus(), t.s.eachSelection((function (n) {
                                if (n) {
                                    var r = o.J.up(n, o.J.isBlock, t.editor);
                                    r || (r = o.J.wrapInline(n, t.o.enterBlock, t)), (0, s.Op)(e, r)
                                }
                            })), !1
                        };
                        t.registerCommand("justifyfull", e), t.registerCommand("justifyright", e), t.registerCommand("justifyleft", e), t.registerCommand("justifycenter", e)
                    }))
                },
                99689: function (t, e, n) {
                    "use strict";
                    var o = n(36115);
                    o.T.prototype.iframeBaseUrl = "", o.T.prototype.iframeTitle = "Jodit Editor", o.T.prototype.iframeDoctype = "<!DOCTYPE html>", o.T.prototype.iframeDefaultSrc = "about:blank", o.T.prototype.iframeStyle = 'html{margin:0;padding:0;min-height: 100%;}body{box-sizing:border-box;font-size:13px;line-height:1.6;padding:10px;margin:0;background:transparent;color:#000;position:relative;z-index:2;user-select:auto;margin:0px;overflow:auto;outline:none;}table{width:100%;border:none;border-collapse:collapse;empty-cells: show;max-width: 100%;}th,td{padding: 2px 5px;border:1px solid #ccc;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}p{margin-top:0;}.jodit_editor .jodit_iframe_wrapper{display: block;clear: both;user-select: none;position: relative;}.jodit_editor .jodit_iframe_wrapper:after {position:absolute;content:"";z-index:1;top:0;left:0;right: 0;bottom: 0;cursor: pointer;display: block;background: rgba(0, 0, 0, 0);} .jodit_disabled{user-select: none;-o-user-select: none;-moz-user-select: none;-khtml-user-select: none;-webkit-user-select: none;-ms-user-select: none}', o.T.prototype.iframeCSSLinks = [], o.T.prototype.iframeSandbox = null
                },
                99876: function (t) {
                    t.exports = '<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox="0 0 1792 1792"> <path d="M1344 1472q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm256 0q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128-224v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h427q21 56 70.5 92t110.5 36h256q61 0 110.5-36t70.5-92h427q40 0 68 28t28 68zm-325-648q-17 40-59 40h-256v448q0 26-19 45t-45 19h-256q-26 0-45-19t-19-45v-448h-256q-42 0-59-40-17-39 14-69l448-448q18-19 45-19t45 19l448 448q31 30 14 69z"/> </svg>'
                },
                99898: function (t, e, n) {
                    "use strict";
                    n.d(e, {
                        z: function () {
                            return o
                        }
                    });
                    var o = function (t) {
                        if (/^[0-9.]+$/.test(t.toString())) return parseFloat(t);
                        var e = t.substr(-2, 2).toUpperCase(),
                            n = ["KB", "MB", "GB", "TB"],
                            o = parseFloat(t.substr(0, t.length - 2));
                        return -1 !== n.indexOf(e) ? o * Math.pow(1024, n.indexOf(e) + 1) : parseInt(t, 10)
                    }
                },
                99951: function (t, e, n) {
                    "use strict";

                    function o(t) {
                        return Boolean(t) && t instanceof DOMException && "AbortError" === t.name
                    }
                    n.d(e, {
                        z: function () {
                            return o
                        }
                    })
                }
            },
            i = {};

        function s(t) {
            var e = i[t];
            if (void 0 !== e) return e.exports;
            var n = i[t] = {
                exports: {}
            };
            return r[t].call(n.exports, n, n.exports, s), n.exports
        }
        s.m = r, e = [], s.O = function (t, n, o, r) {
                if (!n) {
                    var i = 1 / 0;
                    for (l = 0; e.length > l; l++) {
                        n = e[l][0], o = e[l][1], r = e[l][2];
                        for (var a = !0, u = 0; n.length > u; u++)(!1 & r || i >= r) && Object.keys(s.O).every((function (t) {
                            return s.O[t](n[u])
                        })) ? n.splice(u--, 1) : (a = !1, i > r && (i = r));
                        if (a) {
                            e.splice(l--, 1);
                            var c = o();
                            void 0 !== c && (t = c)
                        }
                    }
                    return t
                }
                r = r || 0;
                for (var l = e.length; l > 0 && e[l - 1][2] > r; l--) e[l] = e[l - 1];
                e[l] = [n, o, r]
            }, s.n = function (t) {
                var e = t && t.__esModule ? function () {
                    return t.default
                } : function () {
                    return t
                };
                return s.d(e, {
                    a: e
                }), e
            }, s.d = function (t, e) {
                for (var n in e) s.o(e, n) && !s.o(t, n) && Object.defineProperty(t, n, {
                    enumerable: !0,
                    get: e[n]
                })
            }, s.f = {}, s.e = function (t) {
                return Promise.all(Object.keys(s.f).reduce((function (e, n) {
                    return s.f[n](t, e), e
                }), []))
            }, s.u = function (t) {
                return t + ".min.js"
            }, s.miniCssF = function (t) {}, s.g = function () {
                if ("object" == typeof globalThis) return globalThis;
                try {
                    return this || new Function("return this")()
                } catch (t) {
                    if ("object" == typeof window) return window
                }
            }(), s.o = function (t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }, n = {}, o = "jodit:", s.l = function (t, e, r, i) {
                if (n[t]) n[t].push(e);
                else {
                    var a, u;
                    if (void 0 !== r)
                        for (var c = document.getElementsByTagName("script"), l = 0; c.length > l; l++) {
                            var f = c[l];
                            if (f.getAttribute("src") == t || f.getAttribute("data-webpack") == o + r) {
                                a = f;
                                break
                            }
                        }
                    a || (u = !0, (a = document.createElement("script")).charset = "utf-8", a.timeout = 120, s.nc && a.setAttribute("nonce", s.nc), a.setAttribute("data-webpack", o + r), a.src = t), n[t] = [e];
                    var d = function (e, o) {
                            a.onerror = a.onload = null, clearTimeout(p);
                            var r = n[t];
                            if (delete n[t], a.parentNode && a.parentNode.removeChild(a), r && r.forEach((function (t) {
                                    return t(o)
                                })), e) return e(o)
                        },
                        p = setTimeout(d.bind(null, void 0, {
                            type: "timeout",
                            target: a
                        }), 12e4);
                    a.onerror = d.bind(null, a.onerror), a.onload = d.bind(null, a.onload), u && document.head.appendChild(a)
                }
            }, s.r = function (t) {
                "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
                    value: "Module"
                }), Object.defineProperty(t, "__esModule", {
                    value: !0
                })
            }, s.p = "/build/",
            function () {
                var t = {
                    521: 0
                };
                s.f.j = function (e, n) {
                    var o = s.o(t, e) ? t[e] : void 0;
                    if (0 !== o)
                        if (o) n.push(o[2]);
                        else {
                            var r = new Promise((function (n, r) {
                                o = t[e] = [n, r]
                            }));
                            n.push(o[2] = r);
                            var i = s.p + s.u(e),
                                a = new Error;
                            s.l(i, (function (n) {
                                if (s.o(t, e) && (0 !== (o = t[e]) && (t[e] = void 0), o)) {
                                    var r = n && ("load" === n.type ? "missing" : n.type),
                                        i = n && n.target && n.target.src;
                                    a.message = "Loading chunk " + e + " failed.\n(" + r + ": " + i + ")", a.name = "ChunkLoadError", a.type = r, a.request = i, o[1](a)
                                }
                            }), "chunk-" + e, e)
                        }
                }, s.O.j = function (e) {
                    return 0 === t[e]
                };
                var e = function (e, n) {
                        var o, r, i = n[0],
                            a = n[1],
                            u = n[2],
                            c = 0;
                        if (i.some((function (e) {
                                return 0 !== t[e]
                            }))) {
                            for (o in a) s.o(a, o) && (s.m[o] = a[o]);
                            if (u) var l = u(s)
                        }
                        for (e && e(n); i.length > c; c++) s.o(t, r = i[c]) && t[r] && t[r][0](), t[r] = 0;
                        return s.O(l)
                    },
                    n = self.webpackChunkjodit = self.webpackChunkjodit || [];
                n.forEach(e.bind(null, 0)), n.push = e.bind(null, n.push.bind(n))
            }();
        var a = {};
        return function () {
            "use strict";
            s.r(a), s.d(a, {
                CommitMode: function () {
                    return l
                },
                Jodit: function () {
                    return t.x
                }
            });
            var t = s(46173),
                e = s(9823),
                n = s(17352),
                o = s(22664),
                r = s(37435),
                i = s(79721),
                u = s(74470);
            s(88222), "undefined" != typeof process && "es5" === n.ES && "undefined" != typeof window && Promise.all([s.e(415), s.e(5)]).then(s.bind(s, 19005)), Object.keys(n).forEach((function (e) {
                t.x[e] = n[e]
            }));
            var c = function (t) {
                return "__esModule" !== t
            };
            Object.keys(i).filter(c).forEach((function (t) {
                r.Icon.set(t.replace("_", "-"), i[t])
            })), Object.keys(r).filter(c).forEach((function (n) {
                var o, i = r[n],
                    s = (0, e.Tn)(null === (o = i.prototype) || void 0 === o ? void 0 : o.className) ? i.prototype.className() : n;
                (0, e.Kg)(s) && (t.x.modules[s] = i)
            })), Object.keys(o).filter(c).forEach((function (e) {
                t.x.decorators[e] = o[e]
            })), ["Confirm", "Alert", "Prompt"].forEach((function (e) {
                t.x[e] = r[e]
            })), Object.keys(u.A).filter(c).forEach((function (e) {
                t.x.lang[e] = u.A[e]
            }));
            var l = function () {}
        }(), s.O(a)
    }()
}));
/*!
 * jodit - Jodit is an awesome and useful wysiwyg editor with filebrowser
 * Author: Chupurnov <chupurnov@gmail.com> (https://xdsoft.net/jodit/)
 * Version: v4.6.2
 * Url: https://xdsoft.net/jodit/
 * License(s): MIT
 */


!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,(function(){return(self.webpackChunkjodit=self.webpackChunkjodit||[]).push([[882],{22227:function(e){e.exports='<svg viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"> <path d="M8,11c1.657,0,3-1.343,3-3V3c0-1.657-1.343-3-3-3S5,1.343,5,3v5C5,9.657,6.343,11,8,11z"/> <path d="M13,8V6h-1l0,1.844c0,1.92-1.282,3.688-3.164,4.071C6.266,12.438,4,10.479,4,8V6H3v2c0,2.414,1.721,4.434,4,4.899V15H5v1h6 v-1H9v-2.101C11.279,12.434,13,10.414,13,8z"/> </svg>'},25202:function(e,t,n){"use strict";n.r(t),n.d(t,{ar:function(){return o},cs_cz:function(){return o},de:function(){return o},es:function(){return i},fa:function(){return o},fi:function(){return o},fr:function(){return o},he:function(){return o},hu:function(){return o},id:function(){return o},it:function(){return o},ja:function(){return o},ko:function(){return o},mn:function(){return o},nl:function(){return o},no:function(){return o},pl:function(){return o},pt_br:function(){return o},ru:function(){return o},tr:function(){return o},ua:function(){return o},zh_cn:function(){return o},zh_tw:function(){return o}});var o=n(41324),i=n(87710)},37873:function(e,t,n){"use strict";n.r(t),n.d(t,{SpeechRecognizeNative:function(){return h}});var o=n(31635),i=n(66927),s=n(55186),r=n(56298),u=n(84976),c=n(71005),a=(n(71096),n(46173)),l=n(50834),p=n(25202),h=function(e){function t(){var t=e.apply(this,(0,o.fX)([],(0,o.zs)(arguments),!1))||this;return t.buttons=[{group:"state",name:"speechRecognize"}],t._commandToWord={},t}return(0,o.C6)(t,e),t.prototype.afterInit=function(e){var t=this,n=e.o.speechRecognize.commands;n&&((0,r.JW)(p),(0,u.HP)(n,!1).forEach((function(o){o.split("|").forEach((function(i){i=i.trim().toLowerCase(),t._commandToWord[i]=n[o];var s=e.i18n(i);s!==i&&s.split("|").forEach((function(e){t._commandToWord[e.trim().toLowerCase()]=n[o].trim()}))}))})))},t.prototype.beforeDestruct=function(e){s.J.safeRemove(this.messagePopup)},t.prototype.onSpeechRecognizeProgressResult=function(e){var t=this;this.messagePopup||(this.messagePopup=this.j.create.div("jodit-speech-recognize__popup")),this.j.workplace.appendChild(this.messagePopup),this.j.async.clearTimeout(this.__hidePopupTimeout),this.__hidePopupTimeout=this.j.async.setTimeout((function(){s.J.safeRemove(t.messagePopup)}),1e3),this.messagePopup.innerText=e+"|"},t.prototype.onSpeechRecognizeResult=function(e){this.j.async.clearTimeout(this.__hidePopupTimeout),s.J.safeRemove(this.messagePopup);var t=this.j,n=t.s;if(!this._checkCommand(e)){var o=n.range,i=n.current();if(n.isCollapsed()&&s.J.isText(i)&&s.J.isOrContains(t.editor,i)&&i.nodeValue){var r=i.nodeValue;i.nodeValue=r+(/[\u00A0 ]\uFEFF*$/.test(r)?"":" ")+e,o.setStartAfter(i),n.selectRange(o),t.synchronizeValues()}else n.insertHTML(e)}},t.prototype._checkCommand=function(e){return e=e.toLowerCase().replace(/\./g,""),!!this._commandToWord[e]&&((0,l.F)(this.j,this._commandToWord[e]),!0)},(0,o.Cg)([(0,i.w)(":speechRecognizeProgressResult")],t.prototype,"onSpeechRecognizeProgressResult",null),(0,o.Cg)([(0,i.w)(":speechRecognizeResult")],t.prototype,"onSpeechRecognizeResult",null),t}(c.k);a.x.plugins.add("speech-recognize",h)},50834:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var o=n(31635);function i(e,t){var n=(0,o.zs)(t.split("::"),2);e.execCommand(n[0],null,n[1])}},71096:function(e,t,n){"use strict";var o=n(9810),i=n(98253),s=n(26150),r=n(72197),u=n(931),c=n(36115),a=n(71722),l=n(93676),p=n(22227),h=n.n(p);c.T.prototype.speechRecognize={api:void 0!==a.o?a.o:null,sound:!0,continuous:!1,interimResults:!0,commands:{"newline|enter":"enter","delete|remove word|delete word":"backspaceWordButton",comma:"inserthtml::,",underline:"inserthtml::_",hyphen:"inserthtml::-",space:"inserthtml:: ",question:"inserthtml::?",dot:"inserthtml::.","quote|quotes|open quote":"inserthtml::'","header|header h1":"formatblock::h1","select all":"selectall"}},u.I.set("speech-recognize",h()),c.T.prototype.controls.speechRecognize={isVisible:function(e){return Boolean(e.o.speechRecognize.api)},isActive:function(e,t){var n=(0,r.m)(e,"speech");return Boolean(null==n?void 0:n.isEnabled)},isDisabled:function(e){return!e.o.speechRecognize.api},exec:function(e,t,n){var u,c=n.button,a=n.control,p=e.o.speechRecognize,h=p.api,f=p.lang,d=p.continuous,m=p.interimResults,_=p.sound;if(h){var g=(0,r.m)(e,"speech");if(!g){var v=new h;(g=new l.g(e.async,v)).lang=(0,i.K)(f)?f:null!==(u=(0,s.C)(e.od.documentElement,"lang"))&&void 0!==u?u:void 0,g.continuous=d,g.interimResults=m,g.sound=_,(0,r.m)(e,"speech",g),g.on("pulse",(function(e){c.setMod("pulse",e)})),g.on("result",(function(t){return e.e.fire("speechRecognizeResult",t)})),g.on("progress",(function(t){return e.e.fire("speechRecognizeProgressResult",t)})),g.on("error",(function(t){return e.message.error(t)})),c.hookStatus("beforeDestruct",(function(){(0,r.m)(e,"speech",null),g.destruct()}))}if(a.args){var b=a.args[0];if((0,o.L)(g[b]))return g[b]=!g[b],void(g.isEnabled&&g.restart())}g.toggle(),g.isEnabled&&c.setMod("pulse",!0),c.state.activated=g.isEnabled}else e.alert("Speech recognize API unsupported in your browser")},name:"speechRecognize",command:"toggleSpeechRecognize",tooltip:"Speech Recognize",list:{sound:"Sound",interimResults:"Interim Results"},childTemplate:function(e,t,n){var o,i=(0,r.m)(e,"speech"),s=null!==(o=null==i?void 0:i[t])&&void 0!==o?o:e.o.speechRecognize[t];return"<span class='jodit-speech-recognize__list-item'><input ".concat(s?"checked":""," class='jodit-checkbox' type='checkbox'>&nbsp;").concat(n,"</span>")},mods:{stroke:!1}}},71722:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var o=n(17352),i=o.globalWindow?o.globalWindow.SpeechRecognition||o.globalWindow.webkitSpeechRecognition:void 0},81629:function(e,t,n){"use strict";n.d(t,{N:function(){return o},Z:function(){return i}});var o=440,i=940},87710:function(e){"use strict";e.exports={newline:"nueva lnea",delete:"eliminar",space:"espacio","Speech Recognize":"Reconocimiento de Voz",Sound:"Sonido","Interim Results":"Resultados Provisionales"}},93676:function(e,t,n){"use strict";n.d(t,{g:function(){return c}});var o=n(31635),i=n(22664),s=n(43431),r=n(95473),u=n(81629),c=function(e){function t(t,o){var i=e.call(this)||this;return i.async=t,i._continuous=!1,i._interimResults=!1,i.sound=!0,i._isEnabled=!1,i._restartTimeout=0,i._onSpeechStart=function(e){i._isEnabled&&(i.async.clearTimeout(i._restartTimeout),i._restartTimeout=i.async.setTimeout((function(){i.restart(),i.emit("pulse",!1),i._makeSound(u.Z)}),5e3),i.emit("pulse",!0))},i.__interimResults="",i._api=o,n._instances.add(i),i}var n;return(0,o.C6)(t,e),n=t,Object.defineProperty(t.prototype,"lang",{get:function(){return this._lang},set:function(e){this._lang=e,this._api.lang=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"continuous",{get:function(){return this._continuous},set:function(e){this._continuous=e,this._api.continuous=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"interimResults",{get:function(){return this._interimResults},set:function(e){this._interimResults=e,this._api.interimResults=e},enumerable:!1,configurable:!0}),t.prototype.destruct=function(){this.stop(),n._instances.delete(this),e.prototype.destruct.call(this)},Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;if(!this._isEnabled){this._isEnabled=!0,n._instances.forEach((function(t){t!==e&&t.stop()}));try{this._api.start()}catch(e){return this._onError(e),void this.stop()}this.__on("speechstart",this._onSpeechStart).__on("error",this._onError).__on("result",this._onProgress).__on("end",this._onResults)}},t.prototype.stop=function(){this._isEnabled&&(this._api.abort(),this._api.stop(),this.__off("speechstart",this._onSpeechStart).__off("error",this._onError).__off("result",this._onProgress).__off("end",this._onResults),this.async.clearTimeout(this._restartTimeout),this._isEnabled=!1,this.emit("pulse",!1))},t.prototype.toggle=function(){this._isEnabled?this.stop():this.start()},t.prototype.restart=function(){this.stop(),this.start()},t.prototype.__on=function(e,t){return this._api.addEventListener(e,t),this},t.prototype.__off=function(e,t){return this._api.removeEventListener(e,t),this},t.prototype._onResults=function(e){this.emit("pulse",!1),this.emit("result",this.__interimResults),this.__interimResults="",this._makeSound(u.N),this.restart()},t.prototype._onProgress=function(e){if(this._isEnabled&&(this.__interimResults="",e.results)){for(var t=0;e.results.length>t;t++){var n=e.results.item(t);if(n.length){var o=n.item(0).transcript;this.__interimResults+=o}}this.__interimResults&&this.emit("progress",this.__interimResults)}},t.prototype._onError=function(e){"voice-unavailable"===e.error&&this.emit("error","Voice unavailable"),"not-allowed"===e.error&&this.emit("error","Not allowed"),"language-unavailable"!==e.error&&"language-not-supported"!==e.error||this.emit("error","Language unavailable"),this._makeSound(u.Z),this.emit("pulse",!1),this.stop()},t.prototype._makeSound=function(e){this.sound&&(0,r.s)({frequency:e})},t._instances=new Set,n=(0,o.Cg)([i.autobind],t)}(s.h)},95473:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var o=n(17352),i=n(81629);function s(e){var t=void 0===e?{}:e,n=t.sec,s=void 0===n?.1:n,r=t.frequency,u=void 0===r?i.N:r,c=t.gain,a=void 0===c?.1:c,l=t.type,p=void 0===l?"sine":l;if(o.globalWindow&&(void 0!==o.globalWindow.AudioContext||void 0!==o.globalWindow.webkitAudioContext)){var h=new(o.globalWindow.AudioContext||o.globalWindow.webkitAudioContext),f=h.createGain(),d=h.createOscillator();d.type=p,d.frequency.value=u,d.connect(f),f.connect(h.destination),d.start(),d.stop(h.currentTime+s),f.gain.value=a}}}},function(e){return e(e.s=37873)}])}));


function loadCSS(e){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.href=e,l.media="all",document.getElementsByTagName("head")[0].appendChild(l)}function loadJS(e){var l=document.createElement("script");l.src=e,l.type="module",l.async=!0,document.getElementsByTagName("head")[0].appendChild(l)}$(function(){var e=window.clicBaseUrl||"https://apps.qa-cli.net/clic/";loadCSS(e+"elements/styles.css"),loadJS(e+"elements/polyfills.js"),loadJS(e+"elements/library.js")});


$(function(){function e(e,t){let o=t;try{let t="";"identify-the-clip"==e?t=$(o).find("textarea").attr("data-correct-answer"):"shortLongAns"==e&&(t=$(o).find(".shortLongAnsComponent").attr("data-pretext"));let n=$(o).find("iframe.cazary-edit");if(n.length>0){if($(n).parent().css({border:"1px solid #C91CA5","pointer-events":"none","border-radius":"10px"}),t){let e=n[0].contentDocument||n[0].contentWindow.document;if(e&&e.body){let o="";for(;e.body.firstChild;)e.body.removeChild(e.body.firstChild);try{let e=(new DOMParser).parseFromString(t,"text/html");e.querySelectorAll("[style]").forEach(e=>{e.style.color=""}),o=e.body.innerHTML||""}catch(e){console.error("Error parsing sampleAns:",e)}let n=e.createElement("span");n.innerHTML=o,n.style.color="#C91CA5",n.querySelectorAll("span").forEach(e=>{e.style.color="#C91CA5"}),e.body.appendChild(n)}else console.log("Unable to access iframe document.")}}else{let e=$(o).find(".identifyTheClip-math-field-Author[data-correct-answer]");if(e.length>0){e.css({border:"1px solid #C91CA5","pointer-events":"none","border-radius":"10px",color:"#C91CA5"});let t=e.attr("data-correct-answer");e.text(t)}}}catch(e){console.error("Error parsing data-sampletaginfo:",e)}}function t(e){$(e).find(".newTableHolder table").css("border","1px solid #C91CA5"),$(e).find(".newTableHolder table, .newTableHolder table td, .newTableHolder .textNode").css("color","#C91CA5")}function o(e){switch($(e).find(".component-holder").attr("data-fib-type")){case"without-option":let t=$(e).find(".component-holder .fib-questions .fib-without-option div.inputbox-selected");$(t).each(function(e,t){let o=$(t).attr("data-correct-answer"),n=atob(o);$(t).html(n).css({color:"#C91CA5",border:"1px solid #C91CA5"}).attr("contenteditable",!1).attr("style",function(e,t){return(t||"")+"border-bottom: 1px solid #C91CA5 !important;"})});break;case"with-option":$(e).find(".dropdown.fib-with-option");$(e).find(".dropdown.fib-with-option").each(function(){let e=$(this),t=e.find(".dropdown-menu").attr("data-correctoption-index");t=t.replace(/[^0-9]/g,"").trim();let o=e.find(`.dropdown-menu li[data-id="${t}"]`),n=e.find(".chosenAns");n.html(o.html()),n.find(".auth-mathfield-holder").each(function(){$(this).css({width:"max-content",height:"max-content",display:"inline-block","white-space":"nowrap",color:"#C91CA5"}),$(this).attr("contenteditable","false");let e=$(this).attr("data-equation-latex"),t=$(this).find("math-field")[0];$(this).find("math-field").each(function(e,t){$(this).attr("contenteditable","false").css({color:"#C91CA5"})}),t&&"function"==typeof t.setValue?(t.setValue(e),window.mathVirtualKeyboard.targetOrigin="*",t.virtualKeyboardTargetOrigin="*",t.mathModeSpace="\\:"):console.log("math-field not upgraded:",t)});let r=e.find(".dropdownbtn");r.css({border:"1px solid #C91CA5"}).attr("contenteditable",!1).attr("style",function(e,t){return(t||"")+"; border: 1px solid #C91CA5 !important;"}),n.css("color","#C91CA5"),r.find(".dropdown-arrow").css("color","#C91CA5"),e.addClass("disabled")});break;case"drag-and-drop":let o=$(e).find(".distractor-parent .preview-drop");$(e).find(".fibSentence .template-instruction .preview-drop").each(function(e,t){$(t).parent().addClass("dropped"),$(t).attr("style",function(e,t){return(t||"")+"background: #fff; box-shadow: none; color: #C91CA5; border: none;padding: 0pxcapitalizeLOS !important"}),$(t).find(".sort-text-selected").attr("style",(e,t)=>(t||"")+"border: 1px solid #C91CA5 !important; border-color: #C91CA5 !important; box-shadow: none; background: #fff; display: block;")}),o.each(function(e,t){$(t).css({"pointer-events":"none",opacity:"0.5"})})}}function n(e){$(e).find(".paragraph-selectPrv").attr("style",function(e,t){return(t||"")+";color:#C91CA5 !important;border: 1px solid #C91CA5 !important;padding: 5px !important;"})}function r(e){$(e).find(".imageTemplateMainDiv").css("border","3px solid #C91CA5")}function a(e){$(e).find(".graphicOrganizerContainer .hotspotTextarea").each(function(e,t){$(t).css({border:"1px solid #C91CA5",color:"#C91CA5","pointer-events":"none"}),$(t).parent().css({"pointer-events":"none"})})}$("[data-sampletaginfo]").each(function(i,s){let d=$(s).closest(".question-container"),c=$(s).find(".customClass").attr("data-type");null==c?($(".sample-layer-marker").hide(),c=$(s).attr("data-type")):(d.hide(),$(".sample-main-layer").hide(),$(".sample-layer-section").css("padding","0px"),$(".sample-question-container-box .customClass").css("margin","0px"),$(".sample-layer-container").css("border","none"),$(".sample-layer-container").css("padding","0px")),function(i,s){switch(i){case"identify-the-clip":setTimeout(()=>{e("identify-the-clip",s)},8e3);break;case"shortLongAns":setTimeout(()=>{e("shortLongAns",s)},8e3);break;case"tablesNew":case"tableGO":t(s);break;case"layout-7":let d=$(s).find(".customClass .layout-container .customClass");$(d).each(function(i,s){let d=$(s).attr("data-type");!function(i,s){"tablesNew"==i||"tableGO"==i?t(s):"paragraph"==i?n(s):"image"==i?r(s):"video"==i?$(s).find(".videoSettings").css("border","3px solid #C91CA5"):"audio"==i?setTimeout(function(){if($(s).find(".audioBorder").length){const e=$(s).find(".audioBorder").get(0);e.style.setProperty("border","3px solid #C91CA5","important"),e.style.setProperty("border-color","3px solid #C91CA5","important")}},1e3):"identify-the-clip"==i?setTimeout(()=>{e("identify-the-clip",s)},8e3):"shortLongAns"==i?setTimeout(()=>{e("shortLongAns",s)},8e3):"fill-in-the-blank"==i?o(s):"graphicOrganizerImageHotSpot"==i&&a(s)}(d,s)});break;case"fill-in-the-blank":setTimeout(function(){o(s)},100);break;case"graphicOrganizerImageHotSpot":a(s);break;case"image":r(s);break;case"video":$(s).find(".videoSettings").css("border","2px solid #C91CA5");break;case"audio":setTimeout(function(){if($(s).find(".audioBorder").length){const e=$(s).find(".audioBorder").get(0);e.style.setProperty("border","3px solid #C91CA5","important"),e.style.setProperty("border-color","3px solid #C91CA5","important")}},1e3);break;case"multiple-choice-template":!0===$(s).data("islayercheckboxenable")||function(e){let t=$(e).find(".question-select-wrap").hasClass("single-questions");$(e).find("input[data-iscorrect]").each(function(e,o){const n=$(this).attr("data-iscorrect");try{const e=atob(n);if("true"===e)if($(o).parents(".form-row").addClass("sampleAnswerActive-MCQ"),t)$($(o)).parent().find(".checkmark").addClass("sampleAnsCheckBox");else{let e=$($(o)).parent().find("input");$(e).parent().addClass("checked"),$($(o)).parent().find(".checkboxmark").addClass("sampleAnsCheckBoxMultiple")}else $(o).parents(".form-row").css({"pointer-events":"none"})}catch(e){console.warn("Invalid base64 in data-iscorrect:",n)}})}(s);break;case"match-the-pairs":!0===$(s).data("islayercheckboxenable")||function(e){$(e).find(".mtp-single .showme-btn").click(),setTimeout(()=>{$(e).find(".mtp-correct-pair").addClass("sampleLayerMTPCorrectAns"),$(e).find(".sampleLayerMTPCorrectAns").removeClass("mtp-correct-pair"),$(e).find(".mtp-pair2 .icon-Check").addClass("icon-Check-color"),$(e).find(".mtp-pair1-block").css("border-color","#C91CA5"),$(e).find(".circle-half").css("background-color","#C91CA5"),$(e).find(".circle-wrap.circle").css("opacity","1"),$(e).find("path").attr("stroke","#C91CA5")},500)}(s);break;case"paragraph":n(s)}}(c,s)})});
/**
 * MathQuill v0.10.1               http://mathquill.com
 * by Han, Jeanine, and Mary  maintainers@mathquill.com
 *
 * This Source Code Form is subject to the terms of the
 * Mozilla Public License, v. 2.0. If a copy of the MPL
 * was not distributed with this file, You can obtain
 * one at http://mozilla.org/MPL/2.0/.
 */

(function() {

var jQuery = window.jQuery,
  mqCmdId = 'mathquill-command-id',
  mqBlockId = 'mathquill-block-id',
  min = Math.min,
  max = Math.max;

function noop() {}

/**
 * A utility higher-order function that makes defining variadic
 * functions more convenient by letting you essentially define functions
 * with the last argument as a splat, i.e. the last argument "gathers up"
 * remaining arguments to the function:
 *   var doStuff = variadic(function(first, rest) { return rest; });
 *   doStuff(1, 2, 3); // => [2, 3]
 */
var __slice = [].slice;
function variadic(fn) {
  var numFixedArgs = fn.length - 1;
  return function() {
    var args = __slice.call(arguments, 0, numFixedArgs);
    var varArg = __slice.call(arguments, numFixedArgs);
    return fn.apply(this, args.concat([ varArg ]));
  };
}

/**
 * A utility higher-order function that makes combining object-oriented
 * programming and functional programming techniques more convenient:
 * given a method name and any number of arguments to be bound, returns
 * a function that calls it's first argument's method of that name (if
 * it exists) with the bound arguments and any additional arguments that
 * are passed:
 *   var sendMethod = send('method', 1, 2);
 *   var obj = { method: function() { return Array.apply(this, arguments); } };
 *   sendMethod(obj, 3, 4); // => [1, 2, 3, 4]
 *   // or more specifically,
 *   var obj2 = { method: function(one, two, three) { return one*two + three; } };
 *   sendMethod(obj2, 3); // => 5
 *   sendMethod(obj2, 4); // => 6
 */
var send = variadic(function(method, args) {
  return variadic(function(obj, moreArgs) {
    if (method in obj) return obj[method].apply(obj, args.concat(moreArgs));
  });
});

/**
 * A utility higher-order function that creates "implicit iterators"
 * from "generators": given a function that takes in a sole argument,
 * a "yield_" function, that calls "yield_" repeatedly with an object as
 * a sole argument (presumably objects being iterated over), returns
 * a function that calls it's first argument on each of those objects
 * (if the first argument is a function, it is called repeatedly with
 * each object as the first argument, otherwise it is stringified and
 * the method of that name is called on each object (if such a method
 * exists)), passing along all additional arguments:
 *   var a = [
 *     { method: function(list) { list.push(1); } },
 *     { method: function(list) { list.push(2); } },
 *     { method: function(list) { list.push(3); } }
 *   ];
 *   a.each = iterator(function(yield_) {
 *     for (var i in this) yield_(this[i]);
 *   });
 *   var list = [];
 *   a.each('method', list);
 *   list; // => [1, 2, 3]
 *   // Note that the for-in loop will yield 'each', but 'each' maps to
 *   // the function object created by iterator() which does not have a
 *   // .method() method, so that just fails silently.
 */
function iterator(generator) {
  return variadic(function(fn, args) {
    if (typeof fn !== 'function') fn = send(fn);
    var yield_ = function(obj) { return fn.apply(obj, [ obj ].concat(args)); };
    return generator.call(this, yield_);
  });
}

/**
 * sugar to make defining lots of commands easier.
 * TODO: rethink this.
 */
function bind(cons /*, args... */) {
  var args = __slice.call(arguments, 1);
  return function() {
    return cons.apply(this, args);
  };
}

/**
 * a development-only debug method.  This definition and all
 * calls to `pray` will be stripped from the minified
 * build of mathquill.
 *
 * This function must be called by name to be removed
 * at compile time.  Do not define another function
 * with the same name, and only call this function by
 * name.
 */
function pray(message, cond) {
  if (!cond) throw new Error('prayer failed: '+message);
}
var P = (function(prototype, ownProperty) {
  // helper functions that also help minification
  function isObject(o) { return typeof o === 'object'; }
  function isFunction(f) { return typeof f === 'function'; }

  // used to extend the prototypes of superclasses (which might not
  // have `.Bare`s)
  function SuperclassBare() {}

  return function P(_superclass /* = Object */, definition) {
    // handle the case where no superclass is given
    if (definition === undefined) {
      definition = _superclass;
      _superclass = Object;
    }

    // C is the class to be returned.
    //
    // It delegates to instantiating an instance of `Bare`, so that it
    // will always return a new instance regardless of the calling
    // context.
    //
    //  TODO: the Chrome inspector shows all created objects as `C`
    //        rather than `Object`.  Setting the .name property seems to
    //        have no effect.  Is there a way to override this behavior?
    function C() {
      var self = new Bare;
      if (isFunction(self.init)) self.init.apply(self, arguments);
      return self;
    }

    // C.Bare is a class with a noop constructor.  Its prototype is the
    // same as C, so that instances of C.Bare are also instances of C.
    // New objects can be allocated without initialization by calling
    // `new MyClass.Bare`.
    function Bare() {}
    C.Bare = Bare;

    // Set up the prototype of the new class.
    var _super = SuperclassBare[prototype] = _superclass[prototype];
    var proto = Bare[prototype] = C[prototype] = C.p = new SuperclassBare;

    // other variables, as a minifier optimization
    var extensions;


    // set the constructor property on the prototype, for convenience
    proto.constructor = C;

    C.mixin = function(def) {
      Bare[prototype] = C[prototype] = P(C, def)[prototype];
      return C;
    }

    return (C.open = function(def) {
      extensions = {};

      if (isFunction(def)) {
        // call the defining function with all the arguments you need
        // extensions captures the return value.
        extensions = def.call(C, proto, _super, C, _superclass);
      }
      else if (isObject(def)) {
        // if you passed an object instead, we'll take it
        extensions = def;
      }

      // ...and extend it
      if (isObject(extensions)) {
        for (var ext in extensions) {
          if (ownProperty.call(extensions, ext)) {
            proto[ext] = extensions[ext];
          }
        }
      }

      // if there's no init, we assume we're inheriting a non-pjs class, so
      // we default to applying the superclass's constructor.
      if (!isFunction(proto.init)) {
        proto.init = _superclass;
      }

      return C;
    })(definition);
  }

  // as a minifier optimization, we've closured in a few helper functions
  // and the string 'prototype' (C[p] is much shorter than C.prototype)
})('prototype', ({}).hasOwnProperty);
/*************************************************
 * Base classes of edit tree-related objects
 *
 * Only doing tree node manipulation via these
 * adopt/ disown methods guarantees well-formedness
 * of the tree.
 ************************************************/

// L = 'left'
// R = 'right'
//
// the contract is that they can be used as object properties
// and (-L) === R, and (-R) === L.
var L = -1;
var R = 1;

function prayDirection(dir) {
  pray('a direction was passed', dir === L || dir === R);
}

/**
 * Tiny extension of jQuery adding directionalized DOM manipulation methods.
 *
 * Funny how Pjs v3 almost just works with `jQuery.fn.init`.
 *
 * jQuery features that don't work on $:
 *   - jQuery.*, like jQuery.ajax, obviously (Pjs doesn't and shouldn't
 *                                            copy constructor properties)
 *
 *   - jQuery(function), the shortcut for `jQuery(document).ready(function)`,
 *     because `jQuery.fn.init` is idiosyncratic and Pjs doing, essentially,
 *     `jQuery.fn.init.apply(this, arguments)` isn't quite right, you need:
 *
 *       _.init = function(s, c) { jQuery.fn.init.call(this, s, c, $(document)); };
 *
 *     if you actually give a shit (really, don't bother),
 *     see https://github.com/jquery/jquery/blob/1.7.2/src/core.js#L889
 *
 *   - jQuery(selector), because jQuery translates that to
 *     `jQuery(document).find(selector)`, but Pjs doesn't (should it?) let
 *     you override the result of a constructor call
 *       + note that because of the jQuery(document) shortcut-ness, there's also
 *         the 3rd-argument-needs-to-be-`$(document)` thing above, but the fix
 *         for that (as can be seen above) is really easy. This problem requires
 *         a way more intrusive fix
 *
 * And that's it! Everything else just magically works because jQuery internally
 * uses `this.constructor()` everywhere (hence calling `$`), but never ever does
 * `this.constructor.find` or anything like that, always doing `jQuery.find`.
 */
var $ = P(jQuery, function(_) {
  _.insDirOf = function(dir, el) {
    return dir === L ?
      this.insertBefore(el.first()) : this.insertAfter(el.last());
  };
  _.insAtDirEnd = function(dir, el) {
    return dir === L ? this.prependTo(el) : this.appendTo(el);
  };
});

var Point = P(function(_) {
  _.parent = 0;
  _[L] = 0;
  _[R] = 0;

  _.init = function(parent, leftward, rightward) {
    this.parent = parent;
    this[L] = leftward;
    this[R] = rightward;
  };

  this.copy = function(pt) {
    return Point(pt.parent, pt[L], pt[R]);
  };
});

/**
 * MathQuill virtual-DOM tree-node abstract base class
 */
var Node = P(function(_) {
  _[L] = 0;
  _[R] = 0
  _.parent = 0;

  var id = 0;
  function uniqueNodeId() { return id += 1; }
  this.byId = {};

  _.init = function() {
    this.id = uniqueNodeId();
    Node.byId[this.id] = this;

    this.ends = {};
    this.ends[L] = 0;
    this.ends[R] = 0;
  };

  _.dispose = function() { delete Node.byId[this.id]; };

  _.toString = function() { return '{{ MathQuill Node #'+this.id+' }}'; };

  _.jQ = $();
  _.jQadd = function(jQ) { return this.jQ = this.jQ.add(jQ); };
  _.jQize = function(jQ) {
    // jQuery-ifies this.html() and links up the .jQ of all corresponding Nodes
    var jQ = $(jQ || this.html());

    function jQadd(el) {
      if (el.getAttribute) {
        var cmdId = el.getAttribute('mathquill-command-id');
        var blockId = el.getAttribute('mathquill-block-id');
        if (cmdId) Node.byId[cmdId].jQadd(el);
        if (blockId) Node.byId[blockId].jQadd(el);
      }
      for (el = el.firstChild; el; el = el.nextSibling) {
        jQadd(el);
      }
    }

    for (var i = 0; i < jQ.length; i += 1) jQadd(jQ[i]);
    return jQ;
  };

  _.createDir = function(dir, cursor) {
    prayDirection(dir);
    var node = this;
    node.jQize();
    node.jQ.insDirOf(dir, cursor.jQ);
    cursor[dir] = node.adopt(cursor.parent, cursor[L], cursor[R]);
    return node;
  };
  _.createLeftOf = function(el) { return this.createDir(L, el); };

  _.selectChildren = function(leftEnd, rightEnd) {
    return Selection(leftEnd, rightEnd);
  };

  _.bubble = iterator(function(yield_) {
    for (var ancestor = this; ancestor; ancestor = ancestor.parent) {
      var result = yield_(ancestor);
      if (result === false) break;
    }

    return this;
  });

  _.postOrder = iterator(function(yield_) {
    (function recurse(descendant) {
      descendant.eachChild(recurse);
      yield_(descendant);
    })(this);

    return this;
  });

  _.isEmpty = function() {
    return this.ends[L] === 0 && this.ends[R] === 0;
  };

  _.children = function() {
    return Fragment(this.ends[L], this.ends[R]);
  };

  _.eachChild = function() {
    var children = this.children();
    children.each.apply(children, arguments);
    return this;
  };

  _.foldChildren = function(fold, fn) {
    return this.children().fold(fold, fn);
  };

  _.withDirAdopt = function(dir, parent, withDir, oppDir) {
    Fragment(this, this).withDirAdopt(dir, parent, withDir, oppDir);
    return this;
  };

  _.adopt = function(parent, leftward, rightward) {
    Fragment(this, this).adopt(parent, leftward, rightward);
    return this;
  };

  _.disown = function() {
    Fragment(this, this).disown();
    return this;
  };

  _.remove = function() {
    this.jQ.remove();
    this.postOrder('dispose');
    return this.disown();
  };
});

function prayWellFormed(parent, leftward, rightward) {
  pray('a parent is always present', parent);
  pray('leftward is properly set up', (function() {
    // either it's empty and `rightward` is the left end child (possibly empty)
    if (!leftward) return parent.ends[L] === rightward;

    // or it's there and its [R] and .parent are properly set up
    return leftward[R] === rightward && leftward.parent === parent;
  })());

  pray('rightward is properly set up', (function() {
    // either it's empty and `leftward` is the right end child (possibly empty)
    if (!rightward) return parent.ends[R] === leftward;

    // or it's there and its [L] and .parent are properly set up
    return rightward[L] === leftward && rightward.parent === parent;
  })());
}


/**
 * An entity outside the virtual tree with one-way pointers (so it's only a
 * "view" of part of the tree, not an actual node/entity in the tree) that
 * delimits a doubly-linked list of sibling nodes.
 * It's like a fanfic love-child between HTML DOM DocumentFragment and the Range
 * classes: like DocumentFragment, its contents must be sibling nodes
 * (unlike Range, whose contents are arbitrary contiguous pieces of subtrees),
 * but like Range, it has only one-way pointers to its contents, its contents
 * have no reference to it and in fact may still be in the visible tree (unlike
 * DocumentFragment, whose contents must be detached from the visible tree
 * and have their 'parent' pointers set to the DocumentFragment).
 */
var Fragment = P(function(_) {
  _.init = function(withDir, oppDir, dir) {
    if (dir === undefined) dir = L;
    prayDirection(dir);

    pray('no half-empty fragments', !withDir === !oppDir);

    this.ends = {};

    if (!withDir) return;

    pray('withDir is passed to Fragment', withDir instanceof Node);
    pray('oppDir is passed to Fragment', oppDir instanceof Node);
    pray('withDir and oppDir have the same parent',
         withDir.parent === oppDir.parent);

    this.ends[dir] = withDir;
    this.ends[-dir] = oppDir;

    // To build the jquery collection for a fragment, accumulate elements
    // into an array and then call jQ.add once on the result. jQ.add sorts the
    // collection according to document order each time it is called, so
    // building a collection by folding jQ.add directly takes more than
    // quadratic time in the number of elements.
    //
    // https://github.com/jquery/jquery/blob/2.1.4/src/traversing.js#L112
    var accum = this.fold([], function (accum, el) {
      accum.push.apply(accum, el.jQ.get());
      return accum;
    });

    this.jQ = this.jQ.add(accum);
  };
  _.jQ = $();

  // like Cursor::withDirInsertAt(dir, parent, withDir, oppDir)
  _.withDirAdopt = function(dir, parent, withDir, oppDir) {
    return (dir === L ? this.adopt(parent, withDir, oppDir)
                      : this.adopt(parent, oppDir, withDir));
  };
  _.adopt = function(parent, leftward, rightward) {
    prayWellFormed(parent, leftward, rightward);

    var self = this;
    self.disowned = false;

    var leftEnd = self.ends[L];
    if (!leftEnd) return this;

    var rightEnd = self.ends[R];

    if (leftward) {
      // NB: this is handled in the ::each() block
      // leftward[R] = leftEnd
    } else {
      parent.ends[L] = leftEnd;
    }

    if (rightward) {
      rightward[L] = rightEnd;
    } else {
      parent.ends[R] = rightEnd;
    }

    self.ends[R][R] = rightward;

    self.each(function(el) {
      el[L] = leftward;
      el.parent = parent;
      if (leftward) leftward[R] = el;

      leftward = el;
    });

    return self;
  };

  _.disown = function() {
    var self = this;
    var leftEnd = self.ends[L];

    // guard for empty and already-disowned fragments
    if (!leftEnd || self.disowned) return self;

    self.disowned = true;

    var rightEnd = self.ends[R]
    var parent = leftEnd.parent;

    prayWellFormed(parent, leftEnd[L], leftEnd);
    prayWellFormed(parent, rightEnd, rightEnd[R]);

    if (leftEnd[L]) {
      leftEnd[L][R] = rightEnd[R];
    } else {
      parent.ends[L] = rightEnd[R];
    }

    if (rightEnd[R]) {
      rightEnd[R][L] = leftEnd[L];
    } else {
      parent.ends[R] = leftEnd[L];
    }

    return self;
  };

  _.remove = function() {
    this.jQ.remove();
    this.each('postOrder', 'dispose');
    return this.disown();
  };

  _.each = iterator(function(yield_) {
    var self = this;
    var el = self.ends[L];
    if (!el) return self;

    for (; el !== self.ends[R][R]; el = el[R]) {
      var result = yield_(el);
      if (result === false) break;
    }

    return self;
  });

  _.fold = function(fold, fn) {
    this.each(function(el) {
      fold = fn.call(this, fold, el);
    });

    return fold;
  };
});


/**
 * Registry of LaTeX commands and commands created when typing
 * a single character.
 *
 * (Commands are all subclasses of Node.)
 */
var LatexCmds = {}, CharCmds = {};
/********************************************
 * Cursor and Selection "singleton" classes
 *******************************************/

/* The main thing that manipulates the Math DOM. Makes sure to manipulate the
HTML DOM to match. */

/* Sort of singletons, since there should only be one per editable math
textbox, but any one HTML document can contain many such textboxes, so any one
JS environment could actually contain many instances. */

//A fake cursor in the fake textbox that the math is rendered in.
var Cursor = P(Point, function(_) {
  _.init = function(initParent, options) {
    this.parent = initParent;
    this.options = options;

    var jQ = this.jQ = this._jQ = $('<span class="mq-cursor">&#8203;</span>');
    //closured for setInterval
    this.blink = function(){ jQ.toggleClass('mq-blink'); };

    this.upDownCache = {};
  };

  _.show = function() {
    this.jQ = this._jQ.removeClass('mq-blink');
    if ('intervalId' in this) //already was shown, just restart interval
      clearInterval(this.intervalId);
    else { //was hidden and detached, insert this.jQ back into HTML DOM
      if (this[R]) {
        if (this.selection && this.selection.ends[L][L] === this[L])
          this.jQ.insertBefore(this.selection.jQ);
        else
          this.jQ.insertBefore(this[R].jQ.first());
      }
      else
        this.jQ.appendTo(this.parent.jQ);
      this.parent.focus();
    }
    this.intervalId = setInterval(this.blink, 500);
    return this;
  };
  _.hide = function() {
    if ('intervalId' in this)
      clearInterval(this.intervalId);
    delete this.intervalId;
    this.jQ.detach();
    this.jQ = $();
    return this;
  };

  _.withDirInsertAt = function(dir, parent, withDir, oppDir) {
    var oldParent = this.parent;
    this.parent = parent;
    this[dir] = withDir;
    this[-dir] = oppDir;
    // by contract, .blur() is called after all has been said and done
    // and the cursor has actually been moved
    if (oldParent !== parent && oldParent.blur) oldParent.blur();
  };
  _.insDirOf = function(dir, el) {
    prayDirection(dir);
    this.jQ.insDirOf(dir, el.jQ);
    this.withDirInsertAt(dir, el.parent, el[dir], el);
    this.parent.jQ.addClass('mq-hasCursor');
    return this;
  };
  _.insLeftOf = function(el) { return this.insDirOf(L, el); };
  _.insRightOf = function(el) { return this.insDirOf(R, el); };

  _.insAtDirEnd = function(dir, el) {
    prayDirection(dir);
    this.jQ.insAtDirEnd(dir, el.jQ);
    this.withDirInsertAt(dir, el, 0, el.ends[dir]);
    el.focus();
    return this;
  };
  _.insAtLeftEnd = function(el) { return this.insAtDirEnd(L, el); };
  _.insAtRightEnd = function(el) { return this.insAtDirEnd(R, el); };

  /**
   * jump up or down from one block Node to another:
   * - cache the current Point in the node we're jumping from
   * - check if there's a Point in it cached for the node we're jumping to
   *   + if so put the cursor there,
   *   + if not seek a position in the node that is horizontally closest to
   *     the cursor's current position
   */
  _.jumpUpDown = function(from, to) {
    var self = this;
    self.upDownCache[from.id] = Point.copy(self);
    var cached = self.upDownCache[to.id];
    if (cached) {
      cached[R] ? self.insLeftOf(cached[R]) : self.insAtRightEnd(cached.parent);
    }
    else {
      var pageX = self.offset().left;
      to.seek(pageX, self);
    }
  };
  _.offset = function() {
    //in Opera 11.62, .getBoundingClientRect() and hence jQuery::offset()
    //returns all 0's on inline elements with negative margin-right (like
    //the cursor) at the end of their parent, so temporarily remove the
    //negative margin-right when calling jQuery::offset()
    //Opera bug DSK-360043
    //http://bugs.jquery.com/ticket/11523
    //https://github.com/jquery/jquery/pull/717
    var self = this, offset = self.jQ.removeClass('mq-cursor').offset();
    self.jQ.addClass('mq-cursor');
    return offset;
  }
  _.unwrapGramp = function() {
    var gramp = this.parent.parent;
    var greatgramp = gramp.parent;
    var rightward = gramp[R];
    var cursor = this;

    var leftward = gramp[L];
    gramp.disown().eachChild(function(uncle) {
      if (uncle.isEmpty()) return;

      uncle.children()
        .adopt(greatgramp, leftward, rightward)
        .each(function(cousin) {
          cousin.jQ.insertBefore(gramp.jQ.first());
        })
      ;

      leftward = uncle.ends[R];
    });

    if (!this[R]) { //then find something to be rightward to insLeftOf
      if (this[L])
        this[R] = this[L][R];
      else {
        while (!this[R]) {
          this.parent = this.parent[R];
          if (this.parent)
            this[R] = this.parent.ends[L];
          else {
            this[R] = gramp[R];
            this.parent = greatgramp;
            break;
          }
        }
      }
    }
    if (this[R])
      this.insLeftOf(this[R]);
    else
      this.insAtRightEnd(greatgramp);

    gramp.jQ.remove();

    if (gramp[L].siblingDeleted) gramp[L].siblingDeleted(cursor.options, R);
    if (gramp[R].siblingDeleted) gramp[R].siblingDeleted(cursor.options, L);
  };
  _.startSelection = function() {
    var anticursor = this.anticursor = Point.copy(this);
    var ancestors = anticursor.ancestors = {}; // a map from each ancestor of
      // the anticursor, to its child that is also an ancestor; in other words,
      // the anticursor's ancestor chain in reverse order
    for (var ancestor = anticursor; ancestor.parent; ancestor = ancestor.parent) {
      ancestors[ancestor.parent.id] = ancestor;
    }
  };
  _.endSelection = function() {
    delete this.anticursor;
  };
  _.select = function() {
    var anticursor = this.anticursor;
    if (this[L] === anticursor[L] && this.parent === anticursor.parent) return false;

    // Find the lowest common ancestor (`lca`), and the ancestor of the cursor
    // whose parent is the LCA (which'll be an end of the selection fragment).
    for (var ancestor = this; ancestor.parent; ancestor = ancestor.parent) {
      if (ancestor.parent.id in anticursor.ancestors) {
        var lca = ancestor.parent;
        break;
      }
    }
    pray('cursor and anticursor in the same tree', lca);
    // The cursor and the anticursor should be in the same tree, because the
    // mousemove handler attached to the document, unlike the one attached to
    // the root HTML DOM element, doesn't try to get the math tree node of the
    // mousemove target, and Cursor::seek() based solely on coordinates stays
    // within the tree of `this` cursor's root.

    // The other end of the selection fragment, the ancestor of the anticursor
    // whose parent is the LCA.
    var antiAncestor = anticursor.ancestors[lca.id];

    // Now we have two either Nodes or Points, guaranteed to have a common
    // parent and guaranteed that if both are Points, they are not the same,
    // and we have to figure out which is the left end and which the right end
    // of the selection.
    var leftEnd, rightEnd, dir = R;

    // This is an extremely subtle algorithm.
    // As a special case, `ancestor` could be a Point and `antiAncestor` a Node
    // immediately to `ancestor`'s left.
    // In all other cases,
    // - both Nodes
    // - `ancestor` a Point and `antiAncestor` a Node
    // - `ancestor` a Node and `antiAncestor` a Point
    // `antiAncestor[R] === rightward[R]` for some `rightward` that is
    // `ancestor` or to its right, if and only if `antiAncestor` is to
    // the right of `ancestor`.
    if (ancestor[L] !== antiAncestor) {
      for (var rightward = ancestor; rightward; rightward = rightward[R]) {
        if (rightward[R] === antiAncestor[R]) {
          dir = L;
          leftEnd = ancestor;
          rightEnd = antiAncestor;
          break;
        }
      }
    }
    if (dir === R) {
      leftEnd = antiAncestor;
      rightEnd = ancestor;
    }

    // only want to select Nodes up to Points, can't select Points themselves
    if (leftEnd instanceof Point) leftEnd = leftEnd[R];
    if (rightEnd instanceof Point) rightEnd = rightEnd[L];

    this.hide().selection = lca.selectChildren(leftEnd, rightEnd);
    this.insDirOf(dir, this.selection.ends[dir]);
    this.selectionChanged();
    return true;
  };

  _.clearSelection = function() {
    if (this.selection) {
      this.selection.clear();
      delete this.selection;
      this.selectionChanged();
    }
    return this;
  };
  _.deleteSelection = function() {
    if (!this.selection) return;

    this[L] = this.selection.ends[L][L];
    this[R] = this.selection.ends[R][R];
    this.selection.remove();
    this.selectionChanged();
    delete this.selection;
  };
  _.replaceSelection = function() {
    var seln = this.selection;
    if (seln) {
      this[L] = seln.ends[L][L];
      this[R] = seln.ends[R][R];
      delete this.selection;
    }
    return seln;
  };
});

var Selection = P(Fragment, function(_, super_) {
  _.init = function() {
    super_.init.apply(this, arguments);
    this.jQ = this.jQ.wrapAll('<span class="mq-selection"></span>').parent();
      //can't do wrapAll(this.jQ = $(...)) because wrapAll will clone it
  };
  _.adopt = function() {
    this.jQ.replaceWith(this.jQ = this.jQ.children());
    return super_.adopt.apply(this, arguments);
  };
  _.clear = function() {
    // using the browser's native .childNodes property so that we
    // don't discard text nodes.
    this.jQ.replaceWith(this.jQ[0].childNodes);
    return this;
  };
  _.join = function(methodName) {
    return this.fold('', function(fold, child) {
      return fold + child[methodName]();
    });
  };
});
/*********************************************
 * Controller for a MathQuill instance,
 * on which services are registered with
 *
 *   Controller.open(function(_) { ... });
 *
 ********************************************/

var Controller = P(function(_) {
  _.init = function(root, container, options) {
    this.id = root.id;
    this.data = {};

    this.root = root;
    this.container = container;
    this.options = options;

    root.controller = this;

    this.cursor = root.cursor = Cursor(root, options);
    // TODO: stop depending on root.cursor, and rm it
  };

  _.handle = function(name, dir) {
    var handlers = this.options.handlers;
    if (handlers && handlers.fns[name]) {
      var mq = handlers.APIClasses[this.KIND_OF_MQ](this);
      if (dir === L || dir === R) handlers.fns[name](dir, mq);
      else handlers.fns[name](mq);
    }
  };

  var notifyees = [];
  this.onNotify = function(f) { notifyees.push(f); };
  _.notify = function() {
    for (var i = 0; i < notifyees.length; i += 1) {
      notifyees[i].apply(this.cursor, arguments);
    }
    return this;
  };
});
/*********************************************************
 * The publicly exposed MathQuill API.
 ********************************************************/

var API = {}, Options = P(), optionProcessors = {}, Progenote = P(), EMBEDS = {};

/**
 * Interface Versioning (#459, #495) to allow us to virtually guarantee
 * backcompat. v0.10.x introduces it, so for now, don't completely break the
 * API for people who don't know about it, just complain with console.warn().
 *
 * The methods are shimmed in outro.js so that MQ.MathField.prototype etc can
 * be accessed.
 */
function insistOnInterVer() {
  if (window.console) console.warn(
    'You are using the MathQuill API without specifying an interface version, ' +
    'which will fail in v1.0.0. You can fix this easily by doing this before ' +
    'doing anything else:\n' +
    '\n' +
    '    MathQuill = MathQuill.getInterface(1);\n' +
    '    // now MathQuill.MathField() works like it used to\n' +
    '\n' +
    'See also the "`dev` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at\n' +
    '  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide'
  );
}
// globally exported API object
function MathQuill(el) {
  insistOnInterVer();
  return MQ1(el);
};
MathQuill.prototype = Progenote.p;
MathQuill.interfaceVersion = function(v) {
  // shim for #459-era interface versioning (ended with #495)
  if (v !== 1) throw 'Only interface version 1 supported. You specified: ' + v;
  insistOnInterVer = function() {
    if (window.console) console.warn(
      'You called MathQuill.interfaceVersion(1); to specify the interface ' +
      'version, which will fail in v1.0.0. You can fix this easily by doing ' +
      'this before doing anything else:\n' +
      '\n' +
      '    MathQuill = MathQuill.getInterface(1);\n' +
      '    // now MathQuill.MathField() works like it used to\n' +
      '\n' +
      'See also the "`dev` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at\n' +
      '  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide'
    );
  };
  insistOnInterVer();
  return MathQuill;
};
MathQuill.getInterface = getInterface;

var MIN = getInterface.MIN = 1, MAX = getInterface.MAX = 2;
function getInterface(v) {
  if (!(MIN <= v && v <= MAX)) throw 'Only interface versions between ' +
    MIN + ' and ' + MAX + ' supported. You specified: ' + v;

  /**
   * Function that takes an HTML element and, if it's the root HTML element of a
   * static math or math or text field, returns an API object for it (else, null).
   *
   *   var mathfield = MQ.MathField(mathFieldSpan);
   *   assert(MQ(mathFieldSpan).id === mathfield.id);
   *   assert(MQ(mathFieldSpan).id === MQ(mathFieldSpan).id);
   *
   */
  function MQ(el) {
    if (!el || !el.nodeType) return null; // check that `el` is a HTML element, using the
      // same technique as jQuery: https://github.com/jquery/jquery/blob/679536ee4b7a92ae64a5f58d90e9cc38c001e807/src/core/init.js#L92
    var blockId = $(el).children('.mq-root-block').attr(mqBlockId);
    var ctrlr = blockId && Node.byId[blockId].controller;
    return ctrlr ? APIClasses[ctrlr.KIND_OF_MQ](ctrlr) : null;
  };
  var APIClasses = {};

  MQ.L = L;
  MQ.R = R;

  function config(currentOptions, newOptions) {
    if (newOptions && newOptions.handlers) {
      newOptions.handlers = { fns: newOptions.handlers, APIClasses: APIClasses };
    }
    for (var name in newOptions) if (newOptions.hasOwnProperty(name)) {
      var value = newOptions[name], processor = optionProcessors[name];
      currentOptions[name] = (processor ? processor(value) : value);
    }
  }
  MQ.config = function(opts) { config(Options.p, opts); return this; };
  MQ.registerEmbed = function(name, options) {
    if (!/^[a-z][a-z0-9]*$/i.test(name)) {
      throw 'Embed name must start with letter and be only letters and digits';
    }
    EMBEDS[name] = options;
  };

  var AbstractMathQuill = APIClasses.AbstractMathQuill = P(Progenote, function(_) {
    _.init = function(ctrlr) {
      this.__controller = ctrlr;
      this.__options = ctrlr.options;
      this.id = ctrlr.id;
      this.data = ctrlr.data;
    };
    _.__mathquillify = function(classNames) {
      var ctrlr = this.__controller, root = ctrlr.root, el = ctrlr.container;
      ctrlr.createTextarea();

      var contents = el.addClass(classNames).contents().detach();
      root.jQ =
        $('<span class="mq-root-block"/>').attr(mqBlockId, root.id).appendTo(el);
      this.latex(contents.text());

      this.revert = function() {
        return el.empty().unbind('.mathquill')
        .removeClass('mq-editable-field mq-math-mode mq-text-mode')
        .append(contents);
      };
    };
    _.config = function(opts) { config(this.__options, opts); return this; };
    _.el = function() { return this.__controller.container[0]; };
    _.text = function() { return this.__controller.exportText(); };
    _.latex = function(latex) {
      if (arguments.length > 0) {
        this.__controller.renderLatexMath(latex);
        if (this.__controller.blurred) this.__controller.cursor.hide().parent.blur();
        return this;
      }
      return this.__controller.exportLatex();
    };
    _.html = function() {
      return this.__controller.root.jQ.html()
        .replace(/ mathquill-(?:command|block)-id="?\d+"?/g, '')
        .replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i, '')
        .replace(/ mq-hasCursor|mq-hasCursor ?/, '')
        .replace(/ class=(""|(?= |>))/g, '');
    };
    _.reflow = function() {
      this.__controller.root.postOrder('reflow');
      return this;
    };
  });
  MQ.prototype = AbstractMathQuill.prototype;

  APIClasses.EditableField = P(AbstractMathQuill, function(_, super_) {
    _.__mathquillify = function() {
      super_.__mathquillify.apply(this, arguments);
      this.__controller.editable = true;
      this.__controller.delegateMouseEvents();
      this.__controller.editablesTextareaEvents();
      return this;
    };
    _.focus = function() { this.__controller.textarea.focus(); return this; };
    _.blur = function() { this.__controller.textarea.blur(); return this; };
    _.write = function(latex) {
      this.__controller.writeLatex(latex);
      this.__controller.scrollHoriz();
      if (this.__controller.blurred) this.__controller.cursor.hide().parent.blur();
      return this;
    };
    _.cmd = function(cmd) {
      var ctrlr = this.__controller.notify(), cursor = ctrlr.cursor;
      if (/^\\[a-z]+$/i.test(cmd)) {
        cmd = cmd.slice(1);
        var klass = LatexCmds[cmd];
        if (klass) {
          cmd = klass(cmd);
          if (cursor.selection) cmd.replaces(cursor.replaceSelection());
          cmd.createLeftOf(cursor.show());
          this.__controller.scrollHoriz();
        }
        else /* TODO: API needs better error reporting */;
      }
      else cursor.parent.write(cursor, cmd);
      if (ctrlr.blurred) cursor.hide().parent.blur();
      return this;
    };
    _.select = function() {
      var ctrlr = this.__controller;
      ctrlr.notify('move').cursor.insAtRightEnd(ctrlr.root);
      while (ctrlr.cursor[L]) ctrlr.selectLeft();
      return this;
    };
    _.clearSelection = function() {
      this.__controller.cursor.clearSelection();
      return this;
    };

    _.moveToDirEnd = function(dir) {
      this.__controller.notify('move').cursor.insAtDirEnd(dir, this.__controller.root);
      return this;
    };
    _.moveToLeftEnd = function() { return this.moveToDirEnd(L); };
    _.moveToRightEnd = function() { return this.moveToDirEnd(R); };

    _.keystroke = function(keys) {
      var keys = keys.replace(/^\s+|\s+$/g, '').split(/\s+/);
      for (var i = 0; i < keys.length; i += 1) {
        this.__controller.keystroke(keys[i], { preventDefault: noop });
      }
      return this;
    };
    _.typedText = function(text) {
      for (var i = 0; i < text.length; i += 1) this.__controller.typedText(text.charAt(i));
      return this;
    };
    _.dropEmbedded = function(pageX, pageY, options) {
      var clientX = pageX - $(window).scrollLeft();
      var clientY = pageY - $(window).scrollTop();

      var el = document.elementFromPoint(clientX, clientY);
      this.__controller.seek($(el), pageX, pageY);
      var cmd = Embed().setOptions(options);
      cmd.createLeftOf(this.__controller.cursor);
    };
  });
  MQ.EditableField = function() { throw "wtf don't call me, I'm 'abstract'"; };
  MQ.EditableField.prototype = APIClasses.EditableField.prototype;

  /**
   * Export the API functions that MathQuill-ify an HTML element into API objects
   * of each class. If the element had already been MathQuill-ified but into a
   * different kind (or it's not an HTML element), return null.
   */
  for (var kind in API) (function(kind, defAPIClass) {
    var APIClass = APIClasses[kind] = defAPIClass(APIClasses);
    MQ[kind] = function(el, opts) {
      var mq = MQ(el);
      if (mq instanceof APIClass || !el || !el.nodeType) return mq;
      var ctrlr = Controller(APIClass.RootBlock(), $(el), Options());
      ctrlr.KIND_OF_MQ = kind;
      return APIClass(ctrlr).__mathquillify(opts, v);
    };
    MQ[kind].prototype = APIClass.prototype;
  }(kind, API[kind]));

  return MQ;
}

MathQuill.noConflict = function() {
  window.MathQuill = origMathQuill;
  return MathQuill;
};
var origMathQuill = window.MathQuill;
window.MathQuill = MathQuill;

function RootBlockMixin(_) {
  var names = 'moveOutOf deleteOutOf selectOutOf upOutOf downOutOf'.split(' ');
  for (var i = 0; i < names.length; i += 1) (function(name) {
    _[name] = function(dir) { this.controller.handle(name, dir); };
  }(names[i]));
  _.reflow = function() {
    this.controller.handle('reflow');
    this.controller.handle('edited');
    this.controller.handle('edit');
  };
}
var Parser = P(function(_, super_, Parser) {
  // The Parser object is a wrapper for a parser function.
  // Externally, you use one to parse a string by calling
  //   var result = SomeParser.parse('Me Me Me! Parse Me!');
  // You should never call the constructor, rather you should
  // construct your Parser from the base parsers and the
  // parser combinator methods.

  function parseError(stream, message) {
    if (stream) {
      stream = "'"+stream+"'";
    }
    else {
      stream = 'EOF';
    }

    throw 'Parse Error: '+message+' at '+stream;
  }

  _.init = function(body) { this._ = body; };

  _.parse = function(stream) {
    return this.skip(eof)._(''+stream, success, parseError);

    function success(stream, result) { return result; }
  };

  // -*- primitive combinators -*- //
  _.or = function(alternative) {
    pray('or is passed a parser', alternative instanceof Parser);

    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      return self._(stream, onSuccess, failure);

      function failure(newStream) {
        return alternative._(stream, onSuccess, onFailure);
      }
    });
  };

  _.then = function(next) {
    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      return self._(stream, success, onFailure);

      function success(newStream, result) {
        var nextParser = (next instanceof Parser ? next : next(result));
        pray('a parser is returned', nextParser instanceof Parser);
        return nextParser._(newStream, onSuccess, onFailure);
      }
    });
  };

  // -*- optimized iterative combinators -*- //
  _.many = function() {
    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      var xs = [];
      while (self._(stream, success, failure));
      return onSuccess(stream, xs);

      function success(newStream, x) {
        stream = newStream;
        xs.push(x);
        return true;
      }

      function failure() {
        return false;
      }
    });
  };

  _.times = function(min, max) {
    if (arguments.length < 2) max = min;
    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      var xs = [];
      var result = true;
      var failure;

      for (var i = 0; i < min; i += 1) {
        result = self._(stream, success, firstFailure);
        if (!result) return onFailure(stream, failure);
      }

      for (; i < max && result; i += 1) {
        result = self._(stream, success, secondFailure);
      }

      return onSuccess(stream, xs);

      function success(newStream, x) {
        xs.push(x);
        stream = newStream;
        return true;
      }

      function firstFailure(newStream, msg) {
        failure = msg;
        stream = newStream;
        return false;
      }

      function secondFailure(newStream, msg) {
        return false;
      }
    });
  };

  // -*- higher-level combinators -*- //
  _.result = function(res) { return this.then(succeed(res)); };
  _.atMost = function(n) { return this.times(0, n); };
  _.atLeast = function(n) {
    var self = this;
    return self.times(n).then(function(start) {
      return self.many().map(function(end) {
        return start.concat(end);
      });
    });
  };

  _.map = function(fn) {
    return this.then(function(result) { return succeed(fn(result)); });
  };

  _.skip = function(two) {
    return this.then(function(result) { return two.result(result); });
  };

  // -*- primitive parsers -*- //
  var string = this.string = function(str) {
    var len = str.length;
    var expected = "expected '"+str+"'";

    return Parser(function(stream, onSuccess, onFailure) {
      var head = stream.slice(0, len);

      if (head === str) {
        return onSuccess(stream.slice(len), head);
      }
      else {
        return onFailure(stream, expected);
      }
    });
  };

  var regex = this.regex = function(re) {
    pray('regexp parser is anchored', re.toString().charAt(1) === '^');

    var expected = 'expected '+re;

    return Parser(function(stream, onSuccess, onFailure) {
      var match = re.exec(stream);

      if (match) {
        var result = match[0];
        return onSuccess(stream.slice(result.length), result);
      }
      else {
        return onFailure(stream, expected);
      }
    });
  };

  var succeed = Parser.succeed = function(result) {
    return Parser(function(stream, onSuccess) {
      return onSuccess(stream, result);
    });
  };

  var fail = Parser.fail = function(msg) {
    return Parser(function(stream, _, onFailure) {
      return onFailure(stream, msg);
    });
  };

  var letter = Parser.letter = regex(/^[a-z]/i);
  var letters = Parser.letters = regex(/^[a-z]*/i);
  var digit = Parser.digit = regex(/^[0-9]/);
  var digits = Parser.digits = regex(/^[0-9]*/);
  var whitespace = Parser.whitespace = regex(/^\s+/);
  var optWhitespace = Parser.optWhitespace = regex(/^\s*/);

  var any = Parser.any = Parser(function(stream, onSuccess, onFailure) {
    if (!stream) return onFailure(stream, 'expected any character');

    return onSuccess(stream.slice(1), stream.charAt(0));
  });

  var all = Parser.all = Parser(function(stream, onSuccess, onFailure) {
    return onSuccess('', stream);
  });

  var eof = Parser.eof = Parser(function(stream, onSuccess, onFailure) {
    if (stream) return onFailure(stream, 'expected EOF');

    return onSuccess(stream, stream);
  });
});
/*************************************************
 * Sane Keyboard Events Shim
 *
 * An abstraction layer wrapping the textarea in
 * an object with methods to manipulate and listen
 * to events on, that hides all the nasty cross-
 * browser incompatibilities behind a uniform API.
 *
 * Design goal: This is a *HARD* internal
 * abstraction barrier. Cross-browser
 * inconsistencies are not allowed to leak through
 * and be dealt with by event handlers. All future
 * cross-browser issues that arise must be dealt
 * with here, and if necessary, the API updated.
 *
 * Organization:
 * - key values map and stringify()
 * - saneKeyboardEvents()
 *    + defer() and flush()
 *    + event handler logic
 *    + attach event handlers and export methods
 ************************************************/

var saneKeyboardEvents = (function() {
  // The following [key values][1] map was compiled from the
  // [DOM3 Events appendix section on key codes][2] and
  // [a widely cited report on cross-browser tests of key codes][3],
  // except for 10: 'Enter', which I've empirically observed in Safari on iOS
  // and doesn't appear to conflict with any other known key codes.
  //
  // [1]: http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120614/#keys-keyvalues
  // [2]: http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120614/#fixed-virtual-key-codes
  // [3]: http://unixpapa.com/js/key.html
  var KEY_VALUES = {
    8: 'Backspace',
    9: 'Tab',

    10: 'Enter', // for Safari on iOS

    13: 'Enter',

    16: 'Shift',
    17: 'Control',
    18: 'Alt',
    20: 'CapsLock',

    27: 'Esc',

    32: 'Spacebar',

    33: 'PageUp',
    34: 'PageDown',
    35: 'End',
    36: 'Home',

    37: 'Left',
    38: 'Up',
    39: 'Right',
    40: 'Down',

    45: 'Insert',

    46: 'Del',

    144: 'NumLock'
  };

  // To the extent possible, create a normalized string representation
  // of the key combo (i.e., key code and modifier keys).
  function stringify(evt) {
    var which = evt.which || evt.keyCode;
    var keyVal = KEY_VALUES[which];
    var key;
    var modifiers = [];

    if (evt.ctrlKey) modifiers.push('Ctrl');
    if (evt.originalEvent && evt.originalEvent.metaKey) modifiers.push('Meta');
    if (evt.altKey) modifiers.push('Alt');
    if (evt.shiftKey) modifiers.push('Shift');

    key = keyVal || String.fromCharCode(which);

    if (!modifiers.length && !keyVal) return key;

    modifiers.push(key);
    return modifiers.join('-');
  }

  // create a keyboard events shim that calls callbacks at useful times
  // and exports useful public methods
  return function saneKeyboardEvents(el, handlers) {
    var keydown = null;
    var keypress = null;

    var textarea = jQuery(el);
    var target = jQuery(handlers.container || textarea);

    // checkTextareaFor() is called after keypress or paste events to
    // say "Hey, I think something was just typed" or "pasted" (resp.),
    // so that at all subsequent opportune times (next event or timeout),
    // will check for expected typed or pasted text.
    // Need to check repeatedly because #135: in Safari 5.1 (at least),
    // after selecting something and then typing, the textarea is
    // incorrectly reported as selected during the input event (but not
    // subsequently).
    var checkTextarea = noop, timeoutId;
    function checkTextareaFor(checker) {
      checkTextarea = checker;
      clearTimeout(timeoutId);
      timeoutId = setTimeout(checker);
    }
    target.bind('keydown keypress input keyup focusout paste', function(e) { checkTextarea(e); });


    // -*- public methods -*- //
    function select(text) {
      // check textarea at least once/one last time before munging (so
      // no race condition if selection happens after keypress/paste but
      // before checkTextarea), then never again ('cos it's been munged)
      checkTextarea();
      checkTextarea = noop;
      clearTimeout(timeoutId);

      textarea.val(text);
      if (text && textarea[0].select) textarea[0].select();
      shouldBeSelected = !!text;
    }
    var shouldBeSelected = false;

    // -*- helper subroutines -*- //

    // Determine whether there's a selection in the textarea.
    // This will always return false in IE < 9, which don't support
    // HTMLTextareaElement::selection{Start,End}.
    function hasSelection() {
      var dom = textarea[0];

      if (!('selectionStart' in dom)) return false;
      return dom.selectionStart !== dom.selectionEnd;
    }

    function handleKey() {
      handlers.keystroke(stringify(keydown), keydown);
    }

    // -*- event handlers -*- //
    function onKeydown(e) {
      keydown = e;
      keypress = null;

      if (shouldBeSelected) checkTextareaFor(function(e) {
        if (!(e && e.type === 'focusout') && textarea[0].select) {
          textarea[0].select(); // re-select textarea in case it's an unrecognized
        }
        checkTextarea = noop; // key that clears the selection, then never
        clearTimeout(timeoutId); // again, 'cos next thing might be blur
      });

      handleKey();
    }

    function onKeypress(e) {
      // call the key handler for repeated keypresses.
      // This excludes keypresses that happen directly
      // after keydown.  In that case, there will be
      // no previous keypress, so we skip it here
      if (keydown && keypress) handleKey();

      keypress = e;

      checkTextareaFor(typedText);
    }
    function typedText() {
      // If there is a selection, the contents of the textarea couldn't
      // possibly have just been typed in.
      // This happens in browsers like Firefox and Opera that fire
      // keypress for keystrokes that are not text entry and leave the
      // selection in the textarea alone, such as Ctrl-C.
      // Note: we assume that browsers that don't support hasSelection()
      // also never fire keypress on keystrokes that are not text entry.
      // This seems reasonably safe because:
      // - all modern browsers including IE 9+ support hasSelection(),
      //   making it extremely unlikely any browser besides IE < 9 won't
      // - as far as we know IE < 9 never fires keypress on keystrokes
      //   that aren't text entry, which is only as reliable as our
      //   tests are comprehensive, but the IE < 9 way to do
      //   hasSelection() is poorly documented and is also only as
      //   reliable as our tests are comprehensive
      // If anything like #40 or #71 is reported in IE < 9, see
      // b1318e5349160b665003e36d4eedd64101ceacd8
      if (hasSelection()) return;

      var text = textarea.val();
      if (text.length === 1) {
        textarea.val('');
        handlers.typedText(text);
      } // in Firefox, keys that don't type text, just clear seln, fire keypress
      // https://github.com/mathquill/mathquill/issues/293#issuecomment-40997668
      else if (text && textarea[0].select) textarea[0].select(); // re-select if that's why we're here
    }

    function onBlur() { keydown = keypress = null; }

    function onPaste(e) {
      // browsers are dumb.
      //
      // In Linux, middle-click pasting causes onPaste to be called,
      // when the textarea is not necessarily focused.  We focus it
      // here to ensure that the pasted text actually ends up in the
      // textarea.
      //
      // It's pretty nifty that by changing focus in this handler,
      // we can change the target of the default action.  (This works
      // on keydown too, FWIW).
      //
      // And by nifty, we mean dumb (but useful sometimes).
      textarea.focus();

      checkTextareaFor(pastedText);
    }
    function pastedText() {
      var text = textarea.val();
      textarea.val('');
      if (text) handlers.paste(text);
    }

    // -*- attach event handlers -*- //
    target.bind({
      keydown: onKeydown,
      keypress: onKeypress,
      focusout: onBlur,
      paste: onPaste
    });

    // -*- export public methods -*- //
    return {
      select: select
    };
  };
}());
/***********************************************
 * Export math in a human-readable text format
 * As you can see, only half-baked so far.
 **********************************************/

Controller.open(function(_, super_) {
  _.exportText = function() {
    return this.root.foldChildren('', function(text, child) {
      return text + child.text();
    });
  };
});
Controller.open(function(_) {
  _.focusBlurEvents = function() {
    var ctrlr = this, root = ctrlr.root, cursor = ctrlr.cursor;
    var blurTimeout;
    ctrlr.textarea.focus(function() {
      ctrlr.blurred = false;
      clearTimeout(blurTimeout);
      ctrlr.container.addClass('mq-focused');
      if (!cursor.parent)
        cursor.insAtRightEnd(root);
      if (cursor.selection) {
        cursor.selection.jQ.removeClass('mq-blur');
        ctrlr.selectionChanged(); //re-select textarea contents after tabbing away and back
      }
      else
        cursor.show();
    }).blur(function() {
      ctrlr.blurred = true;
      blurTimeout = setTimeout(function() { // wait for blur on window; if
        root.postOrder('intentionalBlur'); // none, intentional blur: #264
        cursor.clearSelection().endSelection();
        blur();
      });
      $(window).on('blur', windowBlur);
    });
    function windowBlur() { // blur event also fired on window, just switching
      clearTimeout(blurTimeout); // tabs/windows, not intentional blur
      if (cursor.selection) cursor.selection.jQ.addClass('mq-blur');
      blur();
    }
    function blur() { // not directly in the textarea blur handler so as to be
      cursor.hide().parent.blur(); // synchronous with/in the same frame as
      ctrlr.container.removeClass('mq-focused'); // clearing/blurring selection
      $(window).off('blur', windowBlur);
    }
    ctrlr.blurred = true;
    cursor.hide().parent.blur();
  };
});

/**
 * TODO: I wanted to move MathBlock::focus and blur here, it would clean
 * up lots of stuff like, TextBlock::focus is set to MathBlock::focus
 * and TextBlock::blur calls MathBlock::blur, when instead they could
 * use inheritance and super_.
 *
 * Problem is, there's lots of calls to .focus()/.blur() on nodes
 * outside Controller::focusBlurEvents(), such as .postOrder('blur') on
 * insertion, which if MathBlock::blur becomes Node::blur, would add the
 * 'blur' CSS class to all Symbol's (because .isEmpty() is true for all
 * of them).
 *
 * I'm not even sure there aren't other troublesome calls to .focus() or
 * .blur(), so this is TODO for now.
 */
/*****************************************
 * Deals with the browser DOM events from
 * interaction with the typist.
 ****************************************/

Controller.open(function(_) {
  _.keystroke = function(key, evt) {
    this.cursor.parent.keystroke(key, evt, this);
  };
});

Node.open(function(_) {
  _.keystroke = function(key, e, ctrlr) {
    var cursor = ctrlr.cursor;

    switch (key) {
    case 'Ctrl-Shift-Backspace':
    case 'Ctrl-Backspace':
      ctrlr.ctrlDeleteDir(L);
      break;

    case 'Shift-Backspace':
    case 'Backspace':
      ctrlr.backspace();
      break;

    // Tab or Esc -> go one block right if it exists, else escape right.
    case 'Esc':
    case 'Tab':
      ctrlr.escapeDir(R, key, e);
      return;

    // Shift-Tab -> go one block left if it exists, else escape left.
    case 'Shift-Tab':
    case 'Shift-Esc':
      ctrlr.escapeDir(L, key, e);
      return;

    // End -> move to the end of the current block.
    case 'End':
      ctrlr.notify('move').cursor.insAtRightEnd(cursor.parent);
      break;

    // Ctrl-End -> move all the way to the end of the root block.
    case 'Ctrl-End':
      ctrlr.notify('move').cursor.insAtRightEnd(ctrlr.root);
      break;

    // Shift-End -> select to the end of the current block.
    case 'Shift-End':
      while (cursor[R]) {
        ctrlr.selectRight();
      }
      break;

    // Ctrl-Shift-End -> select to the end of the root block.
    case 'Ctrl-Shift-End':
      while (cursor[R] || cursor.parent !== ctrlr.root) {
        ctrlr.selectRight();
      }
      break;

    // Home -> move to the start of the root block or the current block.
    case 'Home':
      ctrlr.notify('move').cursor.insAtLeftEnd(cursor.parent);
      break;

    // Ctrl-Home -> move to the start of the current block.
    case 'Ctrl-Home':
      ctrlr.notify('move').cursor.insAtLeftEnd(ctrlr.root);
      break;

    // Shift-Home -> select to the start of the current block.
    case 'Shift-Home':
      while (cursor[L]) {
        ctrlr.selectLeft();
      }
      break;

    // Ctrl-Shift-Home -> move to the start of the root block.
    case 'Ctrl-Shift-Home':
      while (cursor[L] || cursor.parent !== ctrlr.root) {
        ctrlr.selectLeft();
      }
      break;

    case 'Left': ctrlr.moveLeft(); break;
    case 'Shift-Left': ctrlr.selectLeft(); break;
    case 'Ctrl-Left': break;

    case 'Right': ctrlr.moveRight(); break;
    case 'Shift-Right': ctrlr.selectRight(); break;
    case 'Ctrl-Right': break;

    case 'Up': ctrlr.moveUp(); break;
    case 'Down': ctrlr.moveDown(); break;

    case 'Shift-Up':
      if (cursor[L]) {
        while (cursor[L]) ctrlr.selectLeft();
      } else {
        ctrlr.selectLeft();
      }
      break;
    case 'Shift-Down':
      if (cursor[R]) {
        while (cursor[R]) ctrlr.selectRight();
      }
      else {
        ctrlr.selectRight();
      }
      break;
    case 'Ctrl-Up': break;
    case 'Ctrl-Down': break;

    case 'Ctrl-Shift-Del':
    case 'Ctrl-Del':
      ctrlr.ctrlDeleteDir(R);
      break;

    case 'Shift-Del':
    case 'Del':
      ctrlr.deleteForward();
      break;

    case 'Meta-A':
    case 'Ctrl-A':
      ctrlr.notify('move').cursor.insAtRightEnd(ctrlr.root);
      while (cursor[L]) ctrlr.selectLeft();
      break;

    default:
      return;
    }
    e.preventDefault();
    ctrlr.scrollHoriz();
  };

  _.moveOutOf = // called by Controller::escapeDir, moveDir
  _.moveTowards = // called by Controller::moveDir
  _.deleteOutOf = // called by Controller::deleteDir
  _.deleteTowards = // called by Controller::deleteDir
  _.unselectInto = // called by Controller::selectDir
  _.selectOutOf = // called by Controller::selectDir
  _.selectTowards = // called by Controller::selectDir
    function() { pray('overridden or never called on this node'); };
});

Controller.open(function(_) {
  this.onNotify(function(e) {
    if (e === 'move' || e === 'upDown') this.show().clearSelection();
  });
  _.escapeDir = function(dir, key, e) {
    prayDirection(dir);
    var cursor = this.cursor;

    // only prevent default of Tab if not in the root editable
    if (cursor.parent !== this.root) e.preventDefault();

    // want to be a noop if in the root editable (in fact, Tab has an unrelated
    // default browser action if so)
    if (cursor.parent === this.root) return;

    cursor.parent.moveOutOf(dir, cursor);
    return this.notify('move');
  };

  optionProcessors.leftRightIntoCmdGoes = function(updown) {
    if (updown && updown !== 'up' && updown !== 'down') {
      throw '"up" or "down" required for leftRightIntoCmdGoes option, '
            + 'got "'+updown+'"';
    }
    return updown;
  };
  _.moveDir = function(dir) {
    prayDirection(dir);
    var cursor = this.cursor, updown = cursor.options.leftRightIntoCmdGoes;

    if (cursor.selection) {
      cursor.insDirOf(dir, cursor.selection.ends[dir]);
    }
    else if (cursor[dir]) cursor[dir].moveTowards(dir, cursor, updown);
    else cursor.parent.moveOutOf(dir, cursor, updown);

    return this.notify('move');
  };
  _.moveLeft = function() { return this.moveDir(L); };
  _.moveRight = function() { return this.moveDir(R); };

  /**
   * moveUp and moveDown have almost identical algorithms:
   * - first check left and right, if so insAtLeft/RightEnd of them
   * - else check the parent's 'upOutOf'/'downOutOf' property:
   *   + if it's a function, call it with the cursor as the sole argument and
   *     use the return value as if it were the value of the property
   *   + if it's a Node, jump up or down into it:
   *     - if there is a cached Point in the block, insert there
   *     - else, seekHoriz within the block to the current x-coordinate (to be
   *       as close to directly above/below the current position as possible)
   *   + unless it's exactly `true`, stop bubbling
   */
  _.moveUp = function() { return moveUpDown(this, 'up'); };
  _.moveDown = function() { return moveUpDown(this, 'down'); };
  function moveUpDown(self, dir) {
    var cursor = self.notify('upDown').cursor;
    var dirInto = dir+'Into', dirOutOf = dir+'OutOf';
    if (cursor[R][dirInto]) cursor.insAtLeftEnd(cursor[R][dirInto]);
    else if (cursor[L][dirInto]) cursor.insAtRightEnd(cursor[L][dirInto]);
    else {
      cursor.parent.bubble(function(ancestor) {
        var prop = ancestor[dirOutOf];
        if (prop) {
          if (typeof prop === 'function') prop = ancestor[dirOutOf](cursor);
          if (prop instanceof Node) cursor.jumpUpDown(ancestor, prop);
          if (prop !== true) return false;
        }
      });
    }
    return self;
  }
  this.onNotify(function(e) { if (e !== 'upDown') this.upDownCache = {}; });

  this.onNotify(function(e) { if (e === 'edit') this.show().deleteSelection(); });
  _.deleteDir = function(dir) {
    prayDirection(dir);
    var cursor = this.cursor;

    var hadSelection = cursor.selection;
    this.notify('edit'); // deletes selection if present
    if (!hadSelection) {
      if (cursor[dir]) cursor[dir].deleteTowards(dir, cursor);
      else cursor.parent.deleteOutOf(dir, cursor);
    }

    if (cursor[L].siblingDeleted) cursor[L].siblingDeleted(cursor.options, R);
    if (cursor[R].siblingDeleted) cursor[R].siblingDeleted(cursor.options, L);
    cursor.parent.bubble('reflow');

    return this;
  };
  _.ctrlDeleteDir = function(dir) {
    prayDirection(dir);
    var cursor = this.cursor;
    if (!cursor[L] || cursor.selection) return ctrlr.deleteDir();

    this.notify('edit');
    Fragment(cursor.parent.ends[L], cursor[L]).remove();
    cursor.insAtDirEnd(L, cursor.parent);

    if (cursor[L].siblingDeleted) cursor[L].siblingDeleted(cursor.options, R);
    if (cursor[R].siblingDeleted) cursor[R].siblingDeleted(cursor.options, L);
    cursor.parent.bubble('reflow');

    return this;
  };
  _.backspace = function() { return this.deleteDir(L); };
  _.deleteForward = function() { return this.deleteDir(R); };

  this.onNotify(function(e) { if (e !== 'select') this.endSelection(); });
  _.selectDir = function(dir) {
    var cursor = this.notify('select').cursor, seln = cursor.selection;
    prayDirection(dir);

    if (!cursor.anticursor) cursor.startSelection();

    var node = cursor[dir];
    if (node) {
      // "if node we're selecting towards is inside selection (hence retracting)
      // and is on the *far side* of the selection (hence is only node selected)
      // and the anticursor is *inside* that node, not just on the other side"
      if (seln && seln.ends[dir] === node && cursor.anticursor[-dir] !== node) {
        node.unselectInto(dir, cursor);
      }
      else node.selectTowards(dir, cursor);
    }
    else cursor.parent.selectOutOf(dir, cursor);

    cursor.clearSelection();
    cursor.select() || cursor.show();
  };
  _.selectLeft = function() { return this.selectDir(L); };
  _.selectRight = function() { return this.selectDir(R); };
});
// Parser MathCommand
var latexMathParser = (function() {
  function commandToBlock(cmd) {
    var block = MathBlock();
    cmd.adopt(block, 0, 0);
    return block;
  }
  function joinBlocks(blocks) {
    var firstBlock = blocks[0] || MathBlock();

    for (var i = 1; i < blocks.length; i += 1) {
      blocks[i].children().adopt(firstBlock, firstBlock.ends[R], 0);
    }

    return firstBlock;
  }

  var string = Parser.string;
  var regex = Parser.regex;
  var letter = Parser.letter;
  var any = Parser.any;
  var optWhitespace = Parser.optWhitespace;
  var succeed = Parser.succeed;
  var fail = Parser.fail;

  // Parsers yielding either MathCommands, or Fragments of MathCommands
  //   (either way, something that can be adopted by a MathBlock)
  var variable = letter.map(function(c) { return Letter(c); });
  var symbol = regex(/^[^${}\\_^]/).map(function(c) { return VanillaSymbol(c); });

  var controlSequence =
    regex(/^[^\\a-eg-zA-Z]/) // hotfix #164; match MathBlock::write
    .or(string('\\').then(
      regex(/^[a-z]+/i)
      .or(regex(/^\s+/).result(' '))
      .or(any)
    )).then(function(ctrlSeq) {
      var cmdKlass = LatexCmds[ctrlSeq];

      if (cmdKlass) {
        return cmdKlass(ctrlSeq).parser();
      }
      else {
        return fail('unknown command: \\'+ctrlSeq);
      }
    })
  ;

  var command =
    controlSequence
    .or(variable)
    .or(symbol)
  ;

  // Parsers yielding MathBlocks
  var mathGroup = string('{').then(function() { return mathSequence; }).skip(string('}'));
  var mathBlock = optWhitespace.then(mathGroup.or(command.map(commandToBlock)));
  var mathSequence = mathBlock.many().map(joinBlocks).skip(optWhitespace);

  var optMathBlock =
    string('[').then(
      mathBlock.then(function(block) {
        return block.join('latex') !== ']' ? succeed(block) : fail();
      })
      .many().map(joinBlocks).skip(optWhitespace)
    ).skip(string(']'))
  ;

  var latexMath = mathSequence;

  latexMath.block = mathBlock;
  latexMath.optBlock = optMathBlock;
  return latexMath;
})();

Controller.open(function(_, super_) {
  _.exportLatex = function() {
    return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/ig,'$1');
  };
  _.writeLatex = function(latex) {
    var cursor = this.notify('edit').cursor;

    var all = Parser.all;
    var eof = Parser.eof;

    var block = latexMathParser.skip(eof).or(all.result(false)).parse(latex);

    if (block && !block.isEmpty()) {
      block.children().adopt(cursor.parent, cursor[L], cursor[R]);
      var jQ = block.jQize();
      jQ.insertBefore(cursor.jQ);
      cursor[L] = block.ends[R];
      block.finalizeInsert(cursor.options, cursor);
      if (block.ends[R][R].siblingCreated) block.ends[R][R].siblingCreated(cursor.options, L);
      if (block.ends[L][L].siblingCreated) block.ends[L][L].siblingCreated(cursor.options, R);
      cursor.parent.bubble('reflow');
    }

    return this;
  };
  _.renderLatexMath = function(latex) {
    var root = this.root, cursor = this.cursor;

    var all = Parser.all;
    var eof = Parser.eof;

    var block = latexMathParser.skip(eof).or(all.result(false)).parse(latex);

    root.eachChild('postOrder', 'dispose');
    root.ends[L] = root.ends[R] = 0;

    if (block) {
      block.children().adopt(root, 0, 0);
    }

    var jQ = root.jQ;

    if (block) {
      var html = block.join('html');
      jQ.html(html);
      root.jQize(jQ.children());
      root.finalizeInsert(cursor.options);
    }
    else {
      jQ.empty();
    }

    delete cursor.selection;
    cursor.insAtRightEnd(root);
  };
  _.renderLatexText = function(latex) {
    var root = this.root, cursor = this.cursor;

    root.jQ.children().slice(1).remove();
    root.eachChild('postOrder', 'dispose');
    root.ends[L] = root.ends[R] = 0;
    delete cursor.selection;
    cursor.show().insAtRightEnd(root);

    var regex = Parser.regex;
    var string = Parser.string;
    var eof = Parser.eof;
    var all = Parser.all;

    // Parser RootMathCommand
    var mathMode = string('$').then(latexMathParser)
      // because TeX is insane, math mode doesn't necessarily
      // have to end.  So we allow for the case that math mode
      // continues to the end of the stream.
      .skip(string('$').or(eof))
      .map(function(block) {
        // HACK FIXME: this shouldn't have to have access to cursor
        var rootMathCommand = RootMathCommand(cursor);

        rootMathCommand.createBlocks();
        var rootMathBlock = rootMathCommand.ends[L];
        block.children().adopt(rootMathBlock, 0, 0);

        return rootMathCommand;
      })
    ;

    var escapedDollar = string('\\$').result('$');
    var textChar = escapedDollar.or(regex(/^[^$]/)).map(VanillaSymbol);
    var latexText = mathMode.or(textChar).many();
    var commands = latexText.skip(eof).or(all.result(false)).parse(latex);

    if (commands) {
      for (var i = 0; i < commands.length; i += 1) {
        commands[i].adopt(root, root.ends[R], 0);
      }

      root.jQize().appendTo(root.jQ);

      root.finalizeInsert(cursor.options);
    }
  };
});
/********************************************************
 * Deals with mouse events for clicking, drag-to-select
 *******************************************************/

Controller.open(function(_) {
  _.delegateMouseEvents = function() {
    var ultimateRootjQ = this.root.jQ;
    //drag-to-select event handling
    this.container.bind('mousedown.mathquill', function(e) {
      var rootjQ = $(e.target).closest('.mq-root-block');
      var root = Node.byId[rootjQ.attr(mqBlockId) || ultimateRootjQ.attr(mqBlockId)];
      var ctrlr = root.controller, cursor = ctrlr.cursor, blink = cursor.blink;
      var textareaSpan = ctrlr.textareaSpan, textarea = ctrlr.textarea;

      var target;
      function mousemove(e) { target = $(e.target); }
      function docmousemove(e) {
        if (!cursor.anticursor) cursor.startSelection();
        ctrlr.seek(target, e.pageX, e.pageY).cursor.select();
        target = undefined;
      }
      // outside rootjQ, the MathQuill node corresponding to the target (if any)
      // won't be inside this root, so don't mislead Controller::seek with it

      function mouseup(e) {
        cursor.blink = blink;
        if (!cursor.selection) {
          if (ctrlr.editable) {
            cursor.show();
          }
          else {
            textareaSpan.detach();
          }
        }

        // delete the mouse handlers now that we're not dragging anymore
        rootjQ.unbind('mousemove', mousemove);
        $(e.target.ownerDocument).unbind('mousemove', docmousemove).unbind('mouseup', mouseup);
      }

      if (ctrlr.blurred) {
        if (!ctrlr.editable) rootjQ.prepend(textareaSpan);
        textarea.focus();
      }
      e.preventDefault(); // doesn't work in IE\u22648, but it's a one-line fix:
      e.target.unselectable = true; // http://jsbin.com/yagekiji/1

      cursor.blink = noop;
      ctrlr.seek($(e.target), e.pageX, e.pageY).cursor.startSelection();

      rootjQ.mousemove(mousemove);
      $(e.target.ownerDocument).mousemove(docmousemove).mouseup(mouseup);
      // listen on document not just body to not only hear about mousemove and
      // mouseup on page outside field, but even outside page, except iframes: https://github.com/mathquill/mathquill/commit/8c50028afcffcace655d8ae2049f6e02482346c5#commitcomment-6175800
    });
  }
});

Controller.open(function(_) {
  _.seek = function(target, pageX, pageY) {
    var cursor = this.notify('select').cursor;

    if (target) {
      var nodeId = target.attr(mqBlockId) || target.attr(mqCmdId);
      if (!nodeId) {
        var targetParent = target.parent();
        nodeId = targetParent.attr(mqBlockId) || targetParent.attr(mqCmdId);
      }
    }
    var node = nodeId ? Node.byId[nodeId] : this.root;
    pray('nodeId is the id of some Node that exists', node);

    // don't clear selection until after getting node from target, in case
    // target was selection span, otherwise target will have no parent and will
    // seek from root, which is less accurate (e.g. fraction)
    cursor.clearSelection().show();

    node.seek(pageX, cursor);
    this.scrollHoriz(); // before .selectFrom when mouse-selecting, so
                        // always hits no-selection case in scrollHoriz and scrolls slower
    return this;
  };
});
/***********************************************
 * Horizontal panning for editable fields that
 * overflow their width
 **********************************************/

Controller.open(function(_) {
  _.scrollHoriz = function() {
    var cursor = this.cursor, seln = cursor.selection;
    var rootRect = this.root.jQ[0].getBoundingClientRect();
    if (!seln) {
      var x = cursor.jQ[0].getBoundingClientRect().left;
      if (x > rootRect.right - 20) var scrollBy = x - (rootRect.right - 20);
      else if (x < rootRect.left + 20) var scrollBy = x - (rootRect.left + 20);
      else return;
    }
    else {
      var rect = seln.jQ[0].getBoundingClientRect();
      var overLeft = rect.left - (rootRect.left + 20);
      var overRight = rect.right - (rootRect.right - 20);
      if (seln.ends[L] === cursor[R]) {
        if (overLeft < 0) var scrollBy = overLeft;
        else if (overRight > 0) {
          if (rect.left - overRight < rootRect.left + 20) var scrollBy = overLeft;
          else var scrollBy = overRight;
        }
        else return;
      }
      else {
        if (overRight > 0) var scrollBy = overRight;
        else if (overLeft < 0) {
          if (rect.right - overLeft > rootRect.right - 20) var scrollBy = overRight;
          else var scrollBy = overLeft;
        }
        else return;
      }
    }
    this.root.jQ.stop().animate({ scrollLeft: '+=' + scrollBy}, 100);
  };
});
/*********************************************
 * Manage the MathQuill instance's textarea
 * (as owned by the Controller)
 ********************************************/

Controller.open(function(_) {
  Options.p.substituteTextarea = function() {
    return $('<textarea autocapitalize=off autocomplete=off autocorrect=off ' +
               'spellcheck=false x-palm-disable-ste-all=true />')[0];
  };
  _.createTextarea = function() {
    var textareaSpan = this.textareaSpan = $('<span class="mq-textarea"></span>'),
      textarea = this.options.substituteTextarea();
    if (!textarea.nodeType) {
      throw 'substituteTextarea() must return a DOM element, got ' + textarea;
    }
    textarea = this.textarea = $(textarea).appendTo(textareaSpan);

    var ctrlr = this;
    ctrlr.cursor.selectionChanged = function() { ctrlr.selectionChanged(); };
    ctrlr.container.bind('copy', function() { ctrlr.setTextareaSelection(); });
  };
  _.selectionChanged = function() {
    var ctrlr = this;
    forceIERedraw(ctrlr.container[0]);

    // throttle calls to setTextareaSelection(), because setting textarea.value
    // and/or calling textarea.select() can have anomalously bad performance:
    // https://github.com/mathquill/mathquill/issues/43#issuecomment-1399080
    if (ctrlr.textareaSelectionTimeout === undefined) {
      ctrlr.textareaSelectionTimeout = setTimeout(function() {
        ctrlr.setTextareaSelection();
      });
    }
  };
  _.setTextareaSelection = function() {
    this.textareaSelectionTimeout = undefined;
    var latex = '';
    if (this.cursor.selection) {
      latex = this.cursor.selection.join('latex');
      if (this.options.statelessClipboard) {
        // FIXME: like paste, only this works for math fields; should ask parent
        latex = '$' + latex + '$';
      }
    }
    this.selectFn(latex);
  };
  _.staticMathTextareaEvents = function() {
    var ctrlr = this, root = ctrlr.root, cursor = ctrlr.cursor,
      textarea = ctrlr.textarea, textareaSpan = ctrlr.textareaSpan;

    this.container.prepend('<span class="mq-selectable">$'+ctrlr.exportLatex()+'$</span>');
    ctrlr.blurred = true;
    textarea.bind('cut paste', false)
    .focus(function() { ctrlr.blurred = false; }).blur(function() {
      if (cursor.selection) cursor.selection.clear();
      setTimeout(detach); //detaching during blur explodes in WebKit
    });
    function detach() {
      textareaSpan.detach();
      ctrlr.blurred = true;
    }

    ctrlr.selectFn = function(text) {
      textarea.val(text);
      if (text) textarea.select();
    };
  };
  _.editablesTextareaEvents = function() {
    var ctrlr = this, root = ctrlr.root, cursor = ctrlr.cursor,
      textarea = ctrlr.textarea, textareaSpan = ctrlr.textareaSpan;

    var keyboardEventsShim = saneKeyboardEvents(textarea, this);
    this.selectFn = function(text) { keyboardEventsShim.select(text); };

    this.container.prepend(textareaSpan)
    .on('cut', function(e) {
      if (cursor.selection) {
        setTimeout(function() {
          ctrlr.notify('edit'); // deletes selection if present
          cursor.parent.bubble('reflow');
        });
      }
    });

    this.focusBlurEvents();
  };
  _.typedText = function(ch) {
    if (ch === '\n') return this.handle('enter');
    var cursor = this.notify().cursor;
    cursor.parent.write(cursor, ch);
    this.scrollHoriz();
  };
  _.paste = function(text) {
    // TODO: document `statelessClipboard` config option in README, after
    // making it work like it should, that is, in both text and math mode
    // (currently only works in math fields, so worse than pointless, it
    //  only gets in the way by \text{}-ifying pasted stuff and $-ifying
    //  cut/copied LaTeX)
    if (this.options.statelessClipboard) {
      if (text.slice(0,1) === '$' && text.slice(-1) === '$') {
        text = text.slice(1, -1);
      }
      else {
        text = '\\text{'+text+'}';
      }
    }
    // FIXME: this always inserts math or a TextBlock, even in a RootTextBlock
    this.writeLatex(text).cursor.show();
  };
});
/*************************************************
 * Abstract classes of math blocks and commands.
 ************************************************/

/**
 * Math tree node base class.
 * Some math-tree-specific extensions to Node.
 * Both MathBlock's and MathCommand's descend from it.
 */
var MathElement = P(Node, function(_, super_) {
  _.finalizeInsert = function(options, cursor) { // `cursor` param is only for
      // SupSub::contactWeld, and is deliberately only passed in by writeLatex,
      // see ea7307eb4fac77c149a11ffdf9a831df85247693
    var self = this;
    self.postOrder('finalizeTree', options);
    self.postOrder('contactWeld', cursor);

    // note: this order is important.
    // empty elements need the empty box provided by blur to
    // be present in order for their dimensions to be measured
    // correctly by 'reflow' handlers.
    self.postOrder('blur');

    self.postOrder('reflow');
    if (self[R].siblingCreated) self[R].siblingCreated(options, L);
    if (self[L].siblingCreated) self[L].siblingCreated(options, R);
    self.bubble('reflow');
  };
});

/**
 * Commands and operators, like subscripts, exponents, or fractions.
 * Descendant commands are organized into blocks.
 */
var MathCommand = P(MathElement, function(_, super_) {
  _.init = function(ctrlSeq, htmlTemplate, textTemplate) {
    var cmd = this;
    super_.init.call(cmd);

    if (!cmd.ctrlSeq) cmd.ctrlSeq = ctrlSeq;
    if (htmlTemplate) cmd.htmlTemplate = htmlTemplate;
    if (textTemplate) cmd.textTemplate = textTemplate;
  };

  // obvious methods
  _.replaces = function(replacedFragment) {
    replacedFragment.disown();
    this.replacedFragment = replacedFragment;
  };
  _.isEmpty = function() {
    return this.foldChildren(true, function(isEmpty, child) {
      return isEmpty && child.isEmpty();
    });
  };

  _.parser = function() {
    var block = latexMathParser.block;
    var self = this;

    return block.times(self.numBlocks()).map(function(blocks) {
      self.blocks = blocks;

      for (var i = 0; i < blocks.length; i += 1) {
        blocks[i].adopt(self, self.ends[R], 0);
      }

      return self;
    });
  };

  // createLeftOf(cursor) and the methods it calls
  _.createLeftOf = function(cursor) {
    var cmd = this;
    var replacedFragment = cmd.replacedFragment;

    cmd.createBlocks();
    super_.createLeftOf.call(cmd, cursor);
    if (replacedFragment) {
      replacedFragment.adopt(cmd.ends[L], 0, 0);
      replacedFragment.jQ.appendTo(cmd.ends[L].jQ);
    }
    cmd.finalizeInsert(cursor.options);
    cmd.placeCursor(cursor);
  };
  _.createBlocks = function() {
    var cmd = this,
      numBlocks = cmd.numBlocks(),
      blocks = cmd.blocks = Array(numBlocks);

    for (var i = 0; i < numBlocks; i += 1) {
      var newBlock = blocks[i] = MathBlock();
      newBlock.adopt(cmd, cmd.ends[R], 0);
    }
  };
  _.placeCursor = function(cursor) {
    //insert the cursor at the right end of the first empty child, searching
    //left-to-right, or if none empty, the right end child
    cursor.insAtRightEnd(this.foldChildren(this.ends[L], function(leftward, child) {
      return leftward.isEmpty() ? leftward : child;
    }));
  };

  // editability methods: called by the cursor for editing, cursor movements,
  // and selection of the MathQuill tree, these all take in a direction and
  // the cursor
  _.moveTowards = function(dir, cursor, updown) {
    var updownInto = updown && this[updown+'Into'];
    cursor.insAtDirEnd(-dir, updownInto || this.ends[-dir]);
  };
  _.deleteTowards = function(dir, cursor) {
    if (this.isEmpty()) cursor[dir] = this.remove()[dir];
    else this.moveTowards(dir, cursor, null);
  };
  _.selectTowards = function(dir, cursor) {
    cursor[-dir] = this;
    cursor[dir] = this[dir];
  };
  _.selectChildren = function() {
    return Selection(this, this);
  };
  _.unselectInto = function(dir, cursor) {
    cursor.insAtDirEnd(-dir, cursor.anticursor.ancestors[this.id]);
  };
  _.seek = function(pageX, cursor) {
    function getBounds(node) {
      var bounds = {}
      bounds[L] = node.jQ.offset().left;
      bounds[R] = bounds[L] + node.jQ.outerWidth();
      return bounds;
    }

    var cmd = this;
    var cmdBounds = getBounds(cmd);

    if (pageX < cmdBounds[L]) return cursor.insLeftOf(cmd);
    if (pageX > cmdBounds[R]) return cursor.insRightOf(cmd);

    var leftLeftBound = cmdBounds[L];
    cmd.eachChild(function(block) {
      var blockBounds = getBounds(block);
      if (pageX < blockBounds[L]) {
        // closer to this block's left bound, or the bound left of that?
        if (pageX - leftLeftBound < blockBounds[L] - pageX) {
          if (block[L]) cursor.insAtRightEnd(block[L]);
          else cursor.insLeftOf(cmd);
        }
        else cursor.insAtLeftEnd(block);
        return false;
      }
      else if (pageX > blockBounds[R]) {
        if (block[R]) leftLeftBound = blockBounds[R]; // continue to next block
        else { // last (rightmost) block
          // closer to this block's right bound, or the cmd's right bound?
          if (cmdBounds[R] - pageX < pageX - blockBounds[R]) {
            cursor.insRightOf(cmd);
          }
          else cursor.insAtRightEnd(block);
        }
      }
      else {
        block.seek(pageX, cursor);
        return false;
      }
    });
  }

  // methods involved in creating and cross-linking with HTML DOM nodes
  /*
    They all expect an .htmlTemplate like
      '<span>&0</span>'
    or
      '<span><span>&0</span><span>&1</span></span>'

    See html.test.js for more examples.

    Requirements:
    - For each block of the command, there must be exactly one "block content
      marker" of the form '&<number>' where <number> is the 0-based index of the
      block. (Like the LaTeX \newcommand syntax, but with a 0-based rather than
      1-based index, because JavaScript because C because Dijkstra.)
    - The block content marker must be the sole contents of the containing
      element, there can't even be surrounding whitespace, or else we can't
      guarantee sticking to within the bounds of the block content marker when
      mucking with the HTML DOM.
    - The HTML not only must be well-formed HTML (of course), but also must
      conform to the XHTML requirements on tags, specifically all tags must
      either be self-closing (like '<br/>') or come in matching pairs.
      Close tags are never optional.

    Note that &<number> isn't well-formed HTML; if you wanted a literal '&123',
    your HTML template would have to have '&amp;123'.
  */
  _.numBlocks = function() {
    var matches = this.htmlTemplate.match(/&\d+/g);
    return matches ? matches.length : 0;
  };
  _.html = function() {
    // Render the entire math subtree rooted at this command, as HTML.
    // Expects .createBlocks() to have been called already, since it uses the
    // .blocks array of child blocks.
    //
    // See html.test.js for example templates and intended outputs.
    //
    // Given an .htmlTemplate as described above,
    // - insert the mathquill-command-id attribute into all top-level tags,
    //   which will be used to set this.jQ in .jQize().
    //   This is straightforward:
    //     * tokenize into tags and non-tags
    //     * loop through top-level tokens:
    //         * add #cmdId attribute macro to top-level self-closing tags
    //         * else add #cmdId attribute macro to top-level open tags
    //             * skip the matching top-level close tag and all tag pairs
    //               in between
    // - for each block content marker,
    //     + replace it with the contents of the corresponding block,
    //       rendered as HTML
    //     + insert the mathquill-block-id attribute into the containing tag
    //   This is even easier, a quick regex replace, since block tags cannot
    //   contain anything besides the block content marker.
    //
    // Two notes:
    // - The outermost loop through top-level tokens should never encounter any
    //   top-level close tags, because we should have first encountered a
    //   matching top-level open tag, all inner tags should have appeared in
    //   matching pairs and been skipped, and then we should have skipped the
    //   close tag in question.
    // - All open tags should have matching close tags, which means our inner
    //   loop should always encounter a close tag and drop nesting to 0. If
    //   a close tag is missing, the loop will continue until i >= tokens.length
    //   and token becomes undefined. This will not infinite loop, even in
    //   production without pray(), because it will then TypeError on .slice().

    var cmd = this;
    var blocks = cmd.blocks;
    var cmdId = ' mathquill-command-id=' + cmd.id;
    var tokens = cmd.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);

    pray('no unmatched angle brackets', tokens.join('') === this.htmlTemplate);

    // add cmdId to all top-level tags
    for (var i = 0, token = tokens[0]; token; i += 1, token = tokens[i]) {
      // top-level self-closing tags
      if (token.slice(-2) === '/>') {
        tokens[i] = token.slice(0,-2) + cmdId + '/>';
      }
      // top-level open tags
      else if (token.charAt(0) === '<') {
        pray('not an unmatched top-level close tag', token.charAt(1) !== '/');

        tokens[i] = token.slice(0,-1) + cmdId + '>';

        // skip matching top-level close tag and all tag pairs in between
        var nesting = 1;
        do {
          i += 1, token = tokens[i];
          pray('no missing close tags', token);
          // close tags
          if (token.slice(0,2) === '</') {
            nesting -= 1;
          }
          // non-self-closing open tags
          else if (token.charAt(0) === '<' && token.slice(-2) !== '/>') {
            nesting += 1;
          }
        } while (nesting > 0);
      }
    }
    return tokens.join('').replace(/>&(\d+)/g, function($0, $1) {
      return ' mathquill-block-id=' + blocks[$1].id + '>' + blocks[$1].join('html');
    });
  };

  // methods to export a string representation of the math tree
  _.latex = function() {
    return this.foldChildren(this.ctrlSeq, function(latex, child) {
      return latex + '{' + (child.latex() || ' ') + '}';
    });
  };
  _.textTemplate = [''];
  _.text = function() {
    var cmd = this, i = 0;
    return cmd.foldChildren(cmd.textTemplate[i], function(text, child) {
      i += 1;
      var child_text = child.text();
      if (text && cmd.textTemplate[i] === '('
          && child_text[0] === '(' && child_text.slice(-1) === ')')
        return text + child_text.slice(1, -1) + cmd.textTemplate[i];
      return text + child.text() + (cmd.textTemplate[i] || '');
    });
  };
});

/**
 * Lightweight command without blocks or children.
 */
var Symbol = P(MathCommand, function(_, super_) {
  _.init = function(ctrlSeq, html, text) {
    if (!text) text = ctrlSeq && ctrlSeq.length > 1 ? ctrlSeq.slice(1) : ctrlSeq;

    super_.init.call(this, ctrlSeq, html, [ text ]);
  };

  _.parser = function() { return Parser.succeed(this); };
  _.numBlocks = function() { return 0; };

  _.replaces = function(replacedFragment) {
    replacedFragment.remove();
  };
  _.createBlocks = noop;

  _.moveTowards = function(dir, cursor) {
    cursor.jQ.insDirOf(dir, this.jQ);
    cursor[-dir] = this;
    cursor[dir] = this[dir];
  };
  _.deleteTowards = function(dir, cursor) {
    cursor[dir] = this.remove()[dir];
  };
  _.seek = function(pageX, cursor) {
    // insert at whichever side the click was closer to
    if (pageX - this.jQ.offset().left < this.jQ.outerWidth()/2)
      cursor.insLeftOf(this);
    else
      cursor.insRightOf(this);
  };

  _.latex = function(){ return this.ctrlSeq; };
  _.text = function(){ return this.textTemplate; };
  _.placeCursor = noop;
  _.isEmpty = function(){ return true; };
});
var VanillaSymbol = P(Symbol, function(_, super_) {
  _.init = function(ch, html) {
    super_.init.call(this, ch, '<span>'+(html || ch)+'</span>');
  };
});
var BinaryOperator = P(Symbol, function(_, super_) {
  _.init = function(ctrlSeq, html, text) {
    super_.init.call(this,
      ctrlSeq, '<span class="mq-binary-operator">'+html+'</span>', text
    );
  };
});

/**
 * Children and parent of MathCommand's. Basically partitions all the
 * symbols and operators that descend (in the Math DOM tree) from
 * ancestor operators.
 */
var MathBlock = P(MathElement, function(_, super_) {
  _.join = function(methodName) {
    return this.foldChildren('', function(fold, child) {
      return fold + child[methodName]();
    });
  };
  _.html = function() { return this.join('html'); };
  _.latex = function() { return this.join('latex'); };
  _.text = function() {
    return (this.ends[L] === this.ends[R] && this.ends[L] !== 0) ?
      this.ends[L].text() :
      this.join('text')
    ;
  };

  _.keystroke = function(key, e, ctrlr) {
    if (ctrlr.options.spaceBehavesLikeTab
        && (key === 'Spacebar' || key === 'Shift-Spacebar')) {
      e.preventDefault();
      ctrlr.escapeDir(key === 'Shift-Spacebar' ? L : R, key, e);
      return;
    }
    return super_.keystroke.apply(this, arguments);
  };

  // editability methods: called by the cursor for editing, cursor movements,
  // and selection of the MathQuill tree, these all take in a direction and
  // the cursor
  _.moveOutOf = function(dir, cursor, updown) {
    var updownInto = updown && this.parent[updown+'Into'];
    if (!updownInto && this[dir]) cursor.insAtDirEnd(-dir, this[dir]);
    else cursor.insDirOf(dir, this.parent);
  };
  _.selectOutOf = function(dir, cursor) {
    cursor.insDirOf(dir, this.parent);
  };
  _.deleteOutOf = function(dir, cursor) {
    cursor.unwrapGramp();
  };
  _.seek = function(pageX, cursor) {
    var node = this.ends[R];
    if (!node || node.jQ.offset().left + node.jQ.outerWidth() < pageX) {
      return cursor.insAtRightEnd(this);
    }
    if (pageX < this.ends[L].jQ.offset().left) return cursor.insAtLeftEnd(this);
    while (pageX < node.jQ.offset().left) node = node[L];
    return node.seek(pageX, cursor);
  };
  _.chToCmd = function(ch) {
    var cons;
    // exclude f because it gets a dedicated command with more spacing
    if (ch.match(/^[a-eg-zA-Z]$/))
      return Letter(ch);
    else if (/^\d$/.test(ch))
      return Digit(ch);
    else if (cons = CharCmds[ch] || LatexCmds[ch])
      return cons(ch);
    else
      return VanillaSymbol(ch);
  };
  _.write = function(cursor, ch) {
    var cmd = this.chToCmd(ch);
    if (cursor.selection) cmd.replaces(cursor.replaceSelection());
    cmd.createLeftOf(cursor.show());
  };

  _.focus = function() {
    this.jQ.addClass('mq-hasCursor');
    this.jQ.removeClass('mq-empty');

    return this;
  };
  _.blur = function() {
    this.jQ.removeClass('mq-hasCursor');
    if (this.isEmpty())
      this.jQ.addClass('mq-empty');

    return this;
  };
});

API.StaticMath = function(APIClasses) {
  return P(APIClasses.AbstractMathQuill, function(_, super_) {
    this.RootBlock = MathBlock;
    _.__mathquillify = function() {
      super_.__mathquillify.call(this, 'mq-math-mode');
      this.__controller.delegateMouseEvents();
      this.__controller.staticMathTextareaEvents();
      return this;
    };
    _.init = function() {
      super_.init.apply(this, arguments);
      this.__controller.root.postOrder(
        'registerInnerField', this.innerFields = [], APIClasses.MathField);
    };
    _.latex = function() {
      var returned = super_.latex.apply(this, arguments);
      if (arguments.length > 0) {
        this.__controller.root.postOrder(
          'registerInnerField', this.innerFields = [], APIClasses.MathField);
      }
      return returned;
    };
  });
};

var RootMathBlock = P(MathBlock, RootBlockMixin);
API.MathField = function(APIClasses) {
  return P(APIClasses.EditableField, function(_, super_) {
    this.RootBlock = RootMathBlock;
    _.__mathquillify = function(opts, interfaceVersion) {
      this.config(opts);
      if (interfaceVersion > 1) this.__controller.root.reflow = noop;
      super_.__mathquillify.call(this, 'mq-editable-field mq-math-mode');
      delete this.__controller.root.reflow;
      return this;
    };
  });
};
/*************************************************
 * Abstract classes of text blocks
 ************************************************/

/**
 * Blocks of plain text, with one or two TextPiece's as children.
 * Represents flat strings of typically serif-font Roman characters, as
 * opposed to hierchical, nested, tree-structured math.
 * Wraps a single HTMLSpanElement.
 */
var TextBlock = P(Node, function(_, super_) {
  _.ctrlSeq = '\\text';

  _.replaces = function(replacedText) {
    if (replacedText instanceof Fragment)
      this.replacedText = replacedText.remove().jQ.text();
    else if (typeof replacedText === 'string')
      this.replacedText = replacedText;
  };

  _.jQadd = function(jQ) {
    super_.jQadd.call(this, jQ);
    if (this.ends[L]) this.ends[L].jQadd(this.jQ[0].firstChild);
  };

  _.createLeftOf = function(cursor) {
    var textBlock = this;
    super_.createLeftOf.call(this, cursor);

    if (textBlock[R].siblingCreated) textBlock[R].siblingCreated(cursor.options, L);
    if (textBlock[L].siblingCreated) textBlock[L].siblingCreated(cursor.options, R);
    textBlock.bubble('reflow');

    cursor.insAtRightEnd(textBlock);

    if (textBlock.replacedText)
      for (var i = 0; i < textBlock.replacedText.length; i += 1)
        textBlock.write(cursor, textBlock.replacedText.charAt(i));
  };

  _.parser = function() {
    var textBlock = this;

    // TODO: correctly parse text mode
    var string = Parser.string;
    var regex = Parser.regex;
    var optWhitespace = Parser.optWhitespace;
    return optWhitespace
      .then(string('{')).then(regex(/^[^}]*/)).skip(string('}'))
      .map(function(text) {
        // TODO: is this the correct behavior when parsing
        // the latex \text{} ?  This violates the requirement that
        // the text contents are always nonempty.  Should we just
        // disown the parent node instead?
        TextPiece(text).adopt(textBlock, 0, 0);
        return textBlock;
      })
    ;
  };

  _.textContents = function() {
    return this.foldChildren('', function(text, child) {
      return text + child.text;
    });
  };
  _.text = function() { return '"' + this.textContents() + '"'; };
  _.latex = function() { return '\\text{' + this.textContents() + '}'; };
  _.html = function() {
    return (
        '<span class="mq-text-mode" mathquill-command-id='+this.id+'>'
      +   this.textContents()
      + '</span>'
    );
  };

  // editability methods: called by the cursor for editing, cursor movements,
  // and selection of the MathQuill tree, these all take in a direction and
  // the cursor
  _.moveTowards = function(dir, cursor) { cursor.insAtDirEnd(-dir, this); };
  _.moveOutOf = function(dir, cursor) { cursor.insDirOf(dir, this); };
  _.unselectInto = _.moveTowards;

  // TODO: make these methods part of a shared mixin or something.
  _.selectTowards = MathCommand.prototype.selectTowards;
  _.deleteTowards = MathCommand.prototype.deleteTowards;

  _.selectOutOf = function(dir, cursor) {
    cursor.insDirOf(dir, this);
  };
  _.deleteOutOf = function(dir, cursor) {
    // backspace and delete at ends of block don't unwrap
    if (this.isEmpty()) cursor.insRightOf(this);
  };
  _.write = function(cursor, ch) {
    cursor.show().deleteSelection();

    if (ch !== '$') {
      if (!cursor[L]) TextPiece(ch).createLeftOf(cursor);
      else cursor[L].appendText(ch);
    }
    else if (this.isEmpty()) {
      cursor.insRightOf(this);
      VanillaSymbol('\\$','$').createLeftOf(cursor);
    }
    else if (!cursor[R]) cursor.insRightOf(this);
    else if (!cursor[L]) cursor.insLeftOf(this);
    else { // split apart
      var leftBlock = TextBlock();
      var leftPc = this.ends[L];
      leftPc.disown();
      leftPc.adopt(leftBlock, 0, 0);

      cursor.insLeftOf(this);
      super_.createLeftOf.call(leftBlock, cursor);
    }
  };

  _.seek = function(pageX, cursor) {
    cursor.hide();
    var textPc = fuseChildren(this);

    // insert cursor at approx position in DOMTextNode
    var avgChWidth = this.jQ.width()/this.text.length;
    var approxPosition = Math.round((pageX - this.jQ.offset().left)/avgChWidth);
    if (approxPosition <= 0) cursor.insAtLeftEnd(this);
    else if (approxPosition >= textPc.text.length) cursor.insAtRightEnd(this);
    else cursor.insLeftOf(textPc.splitRight(approxPosition));

    // move towards mousedown (pageX)
    var displ = pageX - cursor.show().offset().left; // displacement
    var dir = displ && displ < 0 ? L : R;
    var prevDispl = dir;
    // displ * prevDispl > 0 iff displacement direction === previous direction
    while (cursor[dir] && displ * prevDispl > 0) {
      cursor[dir].moveTowards(dir, cursor);
      prevDispl = displ;
      displ = pageX - cursor.offset().left;
    }
    if (dir*displ < -dir*prevDispl) cursor[-dir].moveTowards(-dir, cursor);

    if (!cursor.anticursor) {
      // about to start mouse-selecting, the anticursor is gonna get put here
      this.anticursorPosition = cursor[L] && cursor[L].text.length;
      // ^ get it? 'cos if there's no cursor[L], it's 0... I'm a terrible person.
    }
    else if (cursor.anticursor.parent === this) {
      // mouse-selecting within this TextBlock, re-insert the anticursor
      var cursorPosition = cursor[L] && cursor[L].text.length;;
      if (this.anticursorPosition === cursorPosition) {
        cursor.anticursor = Point.copy(cursor);
      }
      else {
        if (this.anticursorPosition < cursorPosition) {
          var newTextPc = cursor[L].splitRight(this.anticursorPosition);
          cursor[L] = newTextPc;
        }
        else {
          var newTextPc = cursor[R].splitRight(this.anticursorPosition - cursorPosition);
        }
        cursor.anticursor = Point(this, newTextPc[L], newTextPc);
      }
    }
  };

  _.blur = function() {
    MathBlock.prototype.blur.call(this);
    fuseChildren(this);
  };

  function fuseChildren(self) {
    self.jQ[0].normalize();

    var textPcDom = self.jQ[0].firstChild;
    pray('only node in TextBlock span is Text node', textPcDom.nodeType === 3);
    // nodeType === 3 has meant a Text node since ancient times:
    //   http://reference.sitepoint.com/javascript/Node/nodeType

    var textPc = TextPiece(textPcDom.data);
    textPc.jQadd(textPcDom);

    self.children().disown();
    return textPc.adopt(self, 0, 0);
  }

  _.focus = MathBlock.prototype.focus;
});

/**
 * Piece of plain text, with a TextBlock as a parent and no children.
 * Wraps a single DOMTextNode.
 * For convenience, has a .text property that's just a JavaScript string
 * mirroring the text contents of the DOMTextNode.
 * Text contents must always be nonempty.
 */
var TextPiece = P(Node, function(_, super_) {
  _.init = function(text) {
    super_.init.call(this);
    this.text = text;
  };
  _.jQadd = function(dom) { this.dom = dom; this.jQ = $(dom); };
  _.jQize = function() {
    return this.jQadd(document.createTextNode(this.text));
  };
  _.appendText = function(text) {
    this.text += text;
    this.dom.appendData(text);
  };
  _.prependText = function(text) {
    this.text = text + this.text;
    this.dom.insertData(0, text);
  };
  _.insTextAtDirEnd = function(text, dir) {
    prayDirection(dir);
    if (dir === R) this.appendText(text);
    else this.prependText(text);
  };
  _.splitRight = function(i) {
    var newPc = TextPiece(this.text.slice(i)).adopt(this.parent, this, this[R]);
    newPc.jQadd(this.dom.splitText(i));
    this.text = this.text.slice(0, i);
    return newPc;
  };

  function endChar(dir, text) {
    return text.charAt(dir === L ? 0 : -1 + text.length);
  }

  _.moveTowards = function(dir, cursor) {
    prayDirection(dir);

    var ch = endChar(-dir, this.text)

    var from = this[-dir];
    if (from) from.insTextAtDirEnd(ch, dir);
    else TextPiece(ch).createDir(-dir, cursor);

    return this.deleteTowards(dir, cursor);
  };

  _.latex = function() { return this.text; };

  _.deleteTowards = function(dir, cursor) {
    if (this.text.length > 1) {
      if (dir === R) {
        this.dom.deleteData(0, 1);
        this.text = this.text.slice(1);
      }
      else {
        // note that the order of these 2 lines is annoyingly important
        // (the second line mutates this.text.length)
        this.dom.deleteData(-1 + this.text.length, 1);
        this.text = this.text.slice(0, -1);
      }
    }
    else {
      this.remove();
      this.jQ.remove();
      cursor[dir] = this[dir];
    }
  };

  _.selectTowards = function(dir, cursor) {
    prayDirection(dir);
    var anticursor = cursor.anticursor;

    var ch = endChar(-dir, this.text)

    if (anticursor[dir] === this) {
      var newPc = TextPiece(ch).createDir(dir, cursor);
      anticursor[dir] = newPc;
      cursor.insDirOf(dir, newPc);
    }
    else {
      var from = this[-dir];
      if (from) from.insTextAtDirEnd(ch, dir);
      else {
        var newPc = TextPiece(ch).createDir(-dir, cursor);
        newPc.jQ.insDirOf(-dir, cursor.selection.jQ);
      }

      if (this.text.length === 1 && anticursor[-dir] === this) {
        anticursor[-dir] = this[-dir]; // `this` will be removed in deleteTowards
      }
    }

    return this.deleteTowards(dir, cursor);
  };
});

// CharCmds.$ =
LatexCmds.text =
LatexCmds.textnormal =
LatexCmds.textrm =
LatexCmds.textup =
LatexCmds.textmd = TextBlock;

function makeTextBlock(latex, tagName, attrs) {
  return P(TextBlock, {
    ctrlSeq: latex,
    htmlTemplate: '<'+tagName+' '+attrs+'>&0</'+tagName+'>'
  });
}

LatexCmds.em = LatexCmds.italic = LatexCmds.italics =
LatexCmds.emph = LatexCmds.textit = LatexCmds.textsl =
  makeTextBlock('\\textit', 'i', 'class="mq-text-mode"');
LatexCmds.strong = LatexCmds.bold = LatexCmds.textbf =
  makeTextBlock('\\textbf', 'b', 'class="mq-text-mode"');
LatexCmds.sf = LatexCmds.textsf =
  makeTextBlock('\\textsf', 'span', 'class="mq-sans-serif mq-text-mode"');
LatexCmds.tt = LatexCmds.texttt =
  makeTextBlock('\\texttt', 'span', 'class="mq-monospace mq-text-mode"');
LatexCmds.textsc =
  makeTextBlock('\\textsc', 'span', 'style="font-variant:small-caps" class="mq-text-mode"');
LatexCmds.uppercase =
  makeTextBlock('\\uppercase', 'span', 'style="text-transform:uppercase" class="mq-text-mode"');
LatexCmds.lowercase =
  makeTextBlock('\\lowercase', 'span', 'style="text-transform:lowercase" class="mq-text-mode"');


var RootMathCommand = P(MathCommand, function(_, super_) {
  _.init = function(cursor) {
    super_.init.call(this, '$');
    this.cursor = cursor;
  };
  _.htmlTemplate = '<span class="mq-math-mode">&0</span>';
  _.createBlocks = function() {
    super_.createBlocks.call(this);

    this.ends[L].cursor = this.cursor;
    this.ends[L].write = function(cursor, ch) {
      if (ch !== '$')
        MathBlock.prototype.write.call(this, cursor, ch);
      else if (this.isEmpty()) {
        cursor.insRightOf(this.parent);
        this.parent.deleteTowards(dir, cursor);
        VanillaSymbol('\\$','$').createLeftOf(cursor.show());
      }
      else if (!cursor[R])
        cursor.insRightOf(this.parent);
      else if (!cursor[L])
        cursor.insLeftOf(this.parent);
      else
        MathBlock.prototype.write.call(this, cursor, ch);
    };
  };
  _.latex = function() {
    return '$' + this.ends[L].latex() + '$';
  };
});

var RootTextBlock = P(RootMathBlock, function(_, super_) {
  _.keystroke = function(key) {
    if (key === 'Spacebar' || key === 'Shift-Spacebar') return;
    return super_.keystroke.apply(this, arguments);
  };
  _.write = function(cursor, ch) {
    cursor.show().deleteSelection();
    if (ch === '$')
      RootMathCommand(cursor).createLeftOf(cursor);
    else {
      var html;
      if (ch === '<') html = '&lt;';
      else if (ch === '>') html = '&gt;';
      VanillaSymbol(ch, html).createLeftOf(cursor);
    }
  };
});
API.TextField = function(APIClasses) {
  return P(APIClasses.EditableField, function(_, super_) {
    this.RootBlock = RootTextBlock;
    _.__mathquillify = function() {
      return super_.__mathquillify.call(this, 'mq-editable-field mq-text-mode');
    };
    _.latex = function(latex) {
      if (arguments.length > 0) {
        this.__controller.renderLatexText(latex);
        if (this.__controller.blurred) this.__controller.cursor.hide().parent.blur();
        return this;
      }
      return this.__controller.exportLatex();
    };
  });
};
/****************************************
 * Input box to type backslash commands
 ***************************************/

var LatexCommandInput =
CharCmds['\\'] = P(MathCommand, function(_, super_) {
  _.ctrlSeq = '\\';
  _.replaces = function(replacedFragment) {
    this._replacedFragment = replacedFragment.disown();
    this.isEmpty = function() { return false; };
  };
  _.htmlTemplate = '<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>';
  _.textTemplate = ['\\'];
  _.createBlocks = function() {
    super_.createBlocks.call(this);
    this.ends[L].focus = function() {
      this.parent.jQ.addClass('mq-hasCursor');
      if (this.isEmpty())
        this.parent.jQ.removeClass('mq-empty');

      return this;
    };
    this.ends[L].blur = function() {
      this.parent.jQ.removeClass('mq-hasCursor');
      if (this.isEmpty())
        this.parent.jQ.addClass('mq-empty');

      return this;
    };
    this.ends[L].write = function(cursor, ch) {
      cursor.show().deleteSelection();

      if (ch.match(/[a-z]/i)) VanillaSymbol(ch).createLeftOf(cursor);
      else {
        this.parent.renderCommand(cursor);
        if (ch !== '\\' || !this.isEmpty()) this.parent.parent.write(cursor, ch);
      }
    };
    this.ends[L].keystroke = function(key, e, ctrlr) {
      if (key === 'Tab' || key === 'Enter' || key === 'Spacebar') {
        this.parent.renderCommand(ctrlr.cursor);
        e.preventDefault();
        return;
      }
      return super_.keystroke.apply(this, arguments);
    };
  };
  _.createLeftOf = function(cursor) {
    super_.createLeftOf.call(this, cursor);

    if (this._replacedFragment) {
      var el = this.jQ[0];
      this.jQ =
        this._replacedFragment.jQ.addClass('mq-blur').bind(
          'mousedown mousemove', //FIXME: is monkey-patching the mousedown and mousemove handlers the right way to do this?
          function(e) {
            $(e.target = el).trigger(e);
            return false;
          }
        ).insertBefore(this.jQ).add(this.jQ);
    }
  };
  _.latex = function() {
    return '\\' + this.ends[L].latex() + ' ';
  };
  _.renderCommand = function(cursor) {
    this.jQ = this.jQ.last();
    this.remove();
    if (this[R]) {
      cursor.insLeftOf(this[R]);
    } else {
      cursor.insAtRightEnd(this.parent);
    }

    var latex = this.ends[L].latex();
    if (!latex) latex = ' ';
    var cmd = LatexCmds[latex];
    if (cmd) {
      cmd = cmd(latex);
      if (this._replacedFragment) cmd.replaces(this._replacedFragment);
      cmd.createLeftOf(cursor);
    }
    else {
      cmd = TextBlock();
      cmd.replaces(latex);
      cmd.createLeftOf(cursor);
      cursor.insRightOf(cmd);
      if (this._replacedFragment)
        this._replacedFragment.remove();
    }
  };
});

/************************************
 * Symbols for Advanced Mathematics
 ***********************************/

LatexCmds.notin =
LatexCmds.cong =
LatexCmds.equiv =
LatexCmds.oplus =
LatexCmds.otimes = P(BinaryOperator, function(_, super_) {
  _.init = function(latex) {
    super_.init.call(this, '\\'+latex+' ', '&'+latex+';');
  };
});

LatexCmds['\u2260'] = LatexCmds.ne = LatexCmds.neq = bind(BinaryOperator,'\\ne ','&ne;');

LatexCmds.ast = LatexCmds.star = LatexCmds.loast = LatexCmds.lowast =
  bind(BinaryOperator,'\\ast ','&lowast;');
  //case 'there4 = // a special exception for this one, perhaps?
LatexCmds.therefor = LatexCmds.therefore =
  bind(BinaryOperator,'\\therefore ','&there4;');

LatexCmds.cuz = // l33t
LatexCmds.because = bind(BinaryOperator,'\\because ','&#8757;');

LatexCmds.prop = LatexCmds.propto = bind(BinaryOperator,'\\propto ','&prop;');

LatexCmds['\u2248'] = LatexCmds.asymp = LatexCmds.approx = bind(BinaryOperator,'\\approx ','&asymp;');

LatexCmds.isin = LatexCmds['in'] = bind(BinaryOperator,'\\in ','&isin;');

LatexCmds.ni = LatexCmds.contains = bind(BinaryOperator,'\\ni ','&ni;');

LatexCmds.notni = LatexCmds.niton = LatexCmds.notcontains = LatexCmds.doesnotcontain =
  bind(BinaryOperator,'\\not\\ni ','&#8716;');

LatexCmds.sub = LatexCmds.subset = bind(BinaryOperator,'\\subset ','&sub;');

LatexCmds.sup = LatexCmds.supset = LatexCmds.superset =
  bind(BinaryOperator,'\\supset ','&sup;');

LatexCmds.nsub = LatexCmds.notsub =
LatexCmds.nsubset = LatexCmds.notsubset =
  bind(BinaryOperator,'\\not\\subset ','&#8836;');

LatexCmds.nsup = LatexCmds.notsup =
LatexCmds.nsupset = LatexCmds.notsupset =
LatexCmds.nsuperset = LatexCmds.notsuperset =
  bind(BinaryOperator,'\\not\\supset ','&#8837;');

LatexCmds.sube = LatexCmds.subeq = LatexCmds.subsete = LatexCmds.subseteq =
  bind(BinaryOperator,'\\subseteq ','&sube;');

LatexCmds.supe = LatexCmds.supeq =
LatexCmds.supsete = LatexCmds.supseteq =
LatexCmds.supersete = LatexCmds.superseteq =
  bind(BinaryOperator,'\\supseteq ','&supe;');

LatexCmds.nsube = LatexCmds.nsubeq =
LatexCmds.notsube = LatexCmds.notsubeq =
LatexCmds.nsubsete = LatexCmds.nsubseteq =
LatexCmds.notsubsete = LatexCmds.notsubseteq =
  bind(BinaryOperator,'\\not\\subseteq ','&#8840;');

LatexCmds.nsupe = LatexCmds.nsupeq =
LatexCmds.notsupe = LatexCmds.notsupeq =
LatexCmds.nsupsete = LatexCmds.nsupseteq =
LatexCmds.notsupsete = LatexCmds.notsupseteq =
LatexCmds.nsupersete = LatexCmds.nsuperseteq =
LatexCmds.notsupersete = LatexCmds.notsuperseteq =
  bind(BinaryOperator,'\\not\\supseteq ','&#8841;');


//the canonical sets of numbers
LatexCmds.N = LatexCmds.naturals = LatexCmds.Naturals =
  bind(VanillaSymbol,'\\N ','&#8469;');

LatexCmds.P =
LatexCmds.primes = LatexCmds.Primes =
LatexCmds.projective = LatexCmds.Projective =
LatexCmds.probability = LatexCmds.Probability =
  bind(VanillaSymbol,'\\P ','&#8473;');

LatexCmds.Z = LatexCmds.integers = LatexCmds.Integers =
  bind(VanillaSymbol,'\\Z ','&#8484;');

LatexCmds.Q = LatexCmds.rationals = LatexCmds.Rationals =
  bind(VanillaSymbol,'\\Q ','&#8474;');

LatexCmds.R = LatexCmds.reals = LatexCmds.Reals =
  bind(VanillaSymbol,'\\R ','&#8477;');

LatexCmds.C =
LatexCmds.complex = LatexCmds.Complex =
LatexCmds.complexes = LatexCmds.Complexes =
LatexCmds.complexplane = LatexCmds.Complexplane = LatexCmds.ComplexPlane =
  bind(VanillaSymbol,'\\C ','&#8450;');

LatexCmds.H = LatexCmds.Hamiltonian = LatexCmds.quaternions = LatexCmds.Quaternions =
  bind(VanillaSymbol,'\\H ','&#8461;');

//spacing
LatexCmds.quad = LatexCmds.emsp = bind(VanillaSymbol,'\\quad ','    ');
LatexCmds.qquad = bind(VanillaSymbol,'\\qquad ','        ');
/* spacing special characters, gonna have to implement this in LatexCommandInput::onText somehow
case ',':
  return VanillaSymbol('\\, ',' ');
case ':':
  return VanillaSymbol('\\: ','  ');
case ';':
  return VanillaSymbol('\\; ','   ');
case '!':
  return Symbol('\\! ','<span style="margin-right:-.2em"></span>');
*/

//binary operators
LatexCmds.diamond = bind(VanillaSymbol, '\\diamond ', '&#9671;');
LatexCmds.bigtriangleup = bind(VanillaSymbol, '\\bigtriangleup ', '&#9651;');
LatexCmds.ominus = bind(VanillaSymbol, '\\ominus ', '&#8854;');
LatexCmds.uplus = bind(VanillaSymbol, '\\uplus ', '&#8846;');
LatexCmds.bigtriangledown = bind(VanillaSymbol, '\\bigtriangledown ', '&#9661;');
LatexCmds.sqcap = bind(VanillaSymbol, '\\sqcap ', '&#8851;');
LatexCmds.triangleleft = bind(VanillaSymbol, '\\triangleleft ', '&#8882;');
LatexCmds.sqcup = bind(VanillaSymbol, '\\sqcup ', '&#8852;');
LatexCmds.triangleright = bind(VanillaSymbol, '\\triangleright ', '&#8883;');
//circledot is not a not real LaTex command see https://github.com/mathquill/mathquill/pull/552 for more details
LatexCmds.odot = LatexCmds.circledot = bind(VanillaSymbol, '\\odot ', '&#8857;');
LatexCmds.bigcirc = bind(VanillaSymbol, '\\bigcirc ', '&#9711;');
LatexCmds.dagger = bind(VanillaSymbol, '\\dagger ', '&#0134;');
LatexCmds.ddagger = bind(VanillaSymbol, '\\ddagger ', '&#135;');
LatexCmds.wr = bind(VanillaSymbol, '\\wr ', '&#8768;');
LatexCmds.amalg = bind(VanillaSymbol, '\\amalg ', '&#8720;');

//relationship symbols
LatexCmds.models = bind(VanillaSymbol, '\\models ', '&#8872;');
LatexCmds.prec = bind(VanillaSymbol, '\\prec ', '&#8826;');
LatexCmds.succ = bind(VanillaSymbol, '\\succ ', '&#8827;');
LatexCmds.preceq = bind(VanillaSymbol, '\\preceq ', '&#8828;');
LatexCmds.succeq = bind(VanillaSymbol, '\\succeq ', '&#8829;');
LatexCmds.simeq = bind(VanillaSymbol, '\\simeq ', '&#8771;');
LatexCmds.mid = bind(VanillaSymbol, '\\mid ', '&#8739;');
LatexCmds.ll = bind(VanillaSymbol, '\\ll ', '&#8810;');
LatexCmds.gg = bind(VanillaSymbol, '\\gg ', '&#8811;');
LatexCmds.parallel = bind(VanillaSymbol, '\\parallel ', '&#8741;');
LatexCmds.nparallel = bind(VanillaSymbol, '\\nparallel ', '&#8742;');
LatexCmds.bowtie = bind(VanillaSymbol, '\\bowtie ', '&#8904;');
LatexCmds.sqsubset = bind(VanillaSymbol, '\\sqsubset ', '&#8847;');
LatexCmds.sqsupset = bind(VanillaSymbol, '\\sqsupset ', '&#8848;');
LatexCmds.smile = bind(VanillaSymbol, '\\smile ', '&#8995;');
LatexCmds.sqsubseteq = bind(VanillaSymbol, '\\sqsubseteq ', '&#8849;');
LatexCmds.sqsupseteq = bind(VanillaSymbol, '\\sqsupseteq ', '&#8850;');
LatexCmds.doteq = bind(VanillaSymbol, '\\doteq ', '&#8784;');
LatexCmds.frown = bind(VanillaSymbol, '\\frown ', '&#8994;');
LatexCmds.vdash = bind(VanillaSymbol, '\\vdash ', '&#8870;');
LatexCmds.dashv = bind(VanillaSymbol, '\\dashv ', '&#8867;');
LatexCmds.nless = bind(VanillaSymbol, '\\nless ', '&#8814;');
LatexCmds.ngtr = bind(VanillaSymbol, '\\ngtr ', '&#8815;');

//arrows
LatexCmds.longleftarrow = bind(VanillaSymbol, '\\longleftarrow ', '&#8592;');
LatexCmds.longrightarrow = bind(VanillaSymbol, '\\longrightarrow ', '&#8594;');
LatexCmds.Longleftarrow = bind(VanillaSymbol, '\\Longleftarrow ', '&#8656;');
LatexCmds.Longrightarrow = bind(VanillaSymbol, '\\Longrightarrow ', '&#8658;');
LatexCmds.longleftrightarrow = bind(VanillaSymbol, '\\longleftrightarrow ', '&#8596;');
LatexCmds.updownarrow = bind(VanillaSymbol, '\\updownarrow ', '&#8597;');
LatexCmds.Longleftrightarrow = bind(VanillaSymbol, '\\Longleftrightarrow ', '&#8660;');
LatexCmds.Updownarrow = bind(VanillaSymbol, '\\Updownarrow ', '&#8661;');
LatexCmds.mapsto = bind(VanillaSymbol, '\\mapsto ', '&#8614;');
LatexCmds.nearrow = bind(VanillaSymbol, '\\nearrow ', '&#8599;');
LatexCmds.hookleftarrow = bind(VanillaSymbol, '\\hookleftarrow ', '&#8617;');
LatexCmds.hookrightarrow = bind(VanillaSymbol, '\\hookrightarrow ', '&#8618;');
LatexCmds.searrow = bind(VanillaSymbol, '\\searrow ', '&#8600;');
LatexCmds.leftharpoonup = bind(VanillaSymbol, '\\leftharpoonup ', '&#8636;');
LatexCmds.rightharpoonup = bind(VanillaSymbol, '\\rightharpoonup ', '&#8640;');
LatexCmds.swarrow = bind(VanillaSymbol, '\\swarrow ', '&#8601;');
LatexCmds.leftharpoondown = bind(VanillaSymbol, '\\leftharpoondown ', '&#8637;');
LatexCmds.rightharpoondown = bind(VanillaSymbol, '\\rightharpoondown ', '&#8641;');
LatexCmds.nwarrow = bind(VanillaSymbol, '\\nwarrow ', '&#8598;');

//Misc
LatexCmds.ldots = bind(VanillaSymbol, '\\ldots ', '&#8230;');
LatexCmds.cdots = bind(VanillaSymbol, '\\cdots ', '&#8943;');
LatexCmds.vdots = bind(VanillaSymbol, '\\vdots ', '&#8942;');
LatexCmds.ddots = bind(VanillaSymbol, '\\ddots ', '&#8945;');
LatexCmds.surd = bind(VanillaSymbol, '\\surd ', '&#8730;');
LatexCmds.triangle = bind(VanillaSymbol, '\\triangle ', '&#9651;');
LatexCmds.ell = bind(VanillaSymbol, '\\ell ', '&#8467;');
LatexCmds.top = bind(VanillaSymbol, '\\top ', '&#8868;');
LatexCmds.flat = bind(VanillaSymbol, '\\flat ', '&#9837;');
LatexCmds.natural = bind(VanillaSymbol, '\\natural ', '&#9838;');
LatexCmds.sharp = bind(VanillaSymbol, '\\sharp ', '&#9839;');
LatexCmds.wp = bind(VanillaSymbol, '\\wp ', '&#8472;');
LatexCmds.bot = bind(VanillaSymbol, '\\bot ', '&#8869;');
LatexCmds.clubsuit = bind(VanillaSymbol, '\\clubsuit ', '&#9827;');
LatexCmds.diamondsuit = bind(VanillaSymbol, '\\diamondsuit ', '&#9826;');
LatexCmds.heartsuit = bind(VanillaSymbol, '\\heartsuit ', '&#9825;');
LatexCmds.spadesuit = bind(VanillaSymbol, '\\spadesuit ', '&#9824;');
//not real LaTex command see https://github.com/mathquill/mathquill/pull/552 for more details
LatexCmds.parallelogram = bind(VanillaSymbol, '\\parallelogram ', '&#9649;');
LatexCmds.square = bind(VanillaSymbol, '\\square ', '&#11036;');

//variable-sized
LatexCmds.oint = bind(VanillaSymbol, '\\oint ', '&#8750;');
LatexCmds.bigcap = bind(VanillaSymbol, '\\bigcap ', '&#8745;');
LatexCmds.bigcup = bind(VanillaSymbol, '\\bigcup ', '&#8746;');
LatexCmds.bigsqcup = bind(VanillaSymbol, '\\bigsqcup ', '&#8852;');
LatexCmds.bigvee = bind(VanillaSymbol, '\\bigvee ', '&#8744;');
LatexCmds.bigwedge = bind(VanillaSymbol, '\\bigwedge ', '&#8743;');
LatexCmds.bigodot = bind(VanillaSymbol, '\\bigodot ', '&#8857;');
LatexCmds.bigotimes = bind(VanillaSymbol, '\\bigotimes ', '&#8855;');
LatexCmds.bigoplus = bind(VanillaSymbol, '\\bigoplus ', '&#8853;');
LatexCmds.biguplus = bind(VanillaSymbol, '\\biguplus ', '&#8846;');

//delimiters
LatexCmds.lfloor = bind(VanillaSymbol, '\\lfloor ', '&#8970;');
LatexCmds.rfloor = bind(VanillaSymbol, '\\rfloor ', '&#8971;');
LatexCmds.lceil = bind(VanillaSymbol, '\\lceil ', '&#8968;');
LatexCmds.rceil = bind(VanillaSymbol, '\\rceil ', '&#8969;');
LatexCmds.opencurlybrace = LatexCmds.lbrace = bind(VanillaSymbol, '\\lbrace ', '{');
LatexCmds.closecurlybrace = LatexCmds.rbrace = bind(VanillaSymbol, '\\rbrace ', '}');
LatexCmds.lbrack = bind(VanillaSymbol, '[');
LatexCmds.rbrack = bind(VanillaSymbol, ']');

//various symbols
LatexCmds['\u222b'] =
LatexCmds['int'] =
LatexCmds.integral = bind(Symbol,'\\int ','<big>&int;</big>');

LatexCmds.slash = bind(VanillaSymbol, '/');
LatexCmds.vert = bind(VanillaSymbol,'|');
LatexCmds.perp = LatexCmds.perpendicular = bind(VanillaSymbol,'\\perp ','&perp;');
LatexCmds.nabla = LatexCmds.del = bind(VanillaSymbol,'\\nabla ','&nabla;');
LatexCmds.hbar = bind(VanillaSymbol,'\\hbar ','&#8463;');

LatexCmds.AA = LatexCmds.Angstrom = LatexCmds.angstrom =
  bind(VanillaSymbol,'\\text\\AA ','&#8491;');

LatexCmds.ring = LatexCmds.circ = LatexCmds.circle =
  bind(VanillaSymbol,'\\circ ','&#8728;');

LatexCmds.bull = LatexCmds.bullet = bind(VanillaSymbol,'\\bullet ','&bull;');

LatexCmds.setminus = LatexCmds.smallsetminus =
  bind(VanillaSymbol,'\\setminus ','&#8726;');

LatexCmds.not = //bind(Symbol,'\\not ','<span class="not">/</span>');
LatexCmds['\u00ac'] = LatexCmds.neg = bind(VanillaSymbol,'\\neg ','&not;');

LatexCmds['\u2026'] = LatexCmds.dots = LatexCmds.ellip = LatexCmds.hellip =
LatexCmds.ellipsis = LatexCmds.hellipsis =
  bind(VanillaSymbol,'\\dots ','&hellip;');

LatexCmds.converges =
LatexCmds.darr = LatexCmds.dnarr = LatexCmds.dnarrow = LatexCmds.downarrow =
  bind(VanillaSymbol,'\\downarrow ','&darr;');

LatexCmds.dArr = LatexCmds.dnArr = LatexCmds.dnArrow = LatexCmds.Downarrow =
  bind(VanillaSymbol,'\\Downarrow ','&dArr;');

LatexCmds.diverges = LatexCmds.uarr = LatexCmds.uparrow =
  bind(VanillaSymbol,'\\uparrow ','&uarr;');

LatexCmds.uArr = LatexCmds.Uparrow = bind(VanillaSymbol,'\\Uparrow ','&uArr;');

LatexCmds.to = bind(BinaryOperator,'\\to ','&rarr;');

LatexCmds.rarr = LatexCmds.rightarrow = bind(VanillaSymbol,'\\rightarrow ','&rarr;');

LatexCmds.implies = bind(BinaryOperator,'\\Rightarrow ','&rArr;');

LatexCmds.rArr = LatexCmds.Rightarrow = bind(VanillaSymbol,'\\Rightarrow ','&rArr;');

LatexCmds.gets = bind(BinaryOperator,'\\gets ','&larr;');

LatexCmds.larr = LatexCmds.leftarrow = bind(VanillaSymbol,'\\leftarrow ','&larr;');

LatexCmds.impliedby = bind(BinaryOperator,'\\Leftarrow ','&lArr;');

LatexCmds.lArr = LatexCmds.Leftarrow = bind(VanillaSymbol,'\\Leftarrow ','&lArr;');

LatexCmds.harr = LatexCmds.lrarr = LatexCmds.leftrightarrow =
  bind(VanillaSymbol,'\\leftrightarrow ','&harr;');

LatexCmds.iff = bind(BinaryOperator,'\\Leftrightarrow ','&hArr;');

LatexCmds.hArr = LatexCmds.lrArr = LatexCmds.Leftrightarrow =
  bind(VanillaSymbol,'\\Leftrightarrow ','&hArr;');

LatexCmds.Re = LatexCmds.Real = LatexCmds.real = bind(VanillaSymbol,'\\Re ','&real;');

LatexCmds.Im = LatexCmds.imag =
LatexCmds.image = LatexCmds.imagin = LatexCmds.imaginary = LatexCmds.Imaginary =
  bind(VanillaSymbol,'\\Im ','&image;');

LatexCmds.part = LatexCmds.partial = bind(VanillaSymbol,'\\partial ','&part;');

LatexCmds.infty = LatexCmds.infin = LatexCmds.infinity =
  bind(VanillaSymbol,'\\infty ','&infin;');

LatexCmds.alef = LatexCmds.alefsym = LatexCmds.aleph = LatexCmds.alephsym =
  bind(VanillaSymbol,'\\aleph ','&alefsym;');

LatexCmds.xist = //LOL
LatexCmds.xists = LatexCmds.exist = LatexCmds.exists =
  bind(VanillaSymbol,'\\exists ','&exist;');

LatexCmds.and = LatexCmds.land = LatexCmds.wedge =
  bind(VanillaSymbol,'\\wedge ','&and;');

LatexCmds.or = LatexCmds.lor = LatexCmds.vee = bind(VanillaSymbol,'\\vee ','&or;');

LatexCmds.o = LatexCmds.O =
LatexCmds.empty = LatexCmds.emptyset =
LatexCmds.oslash = LatexCmds.Oslash =
LatexCmds.nothing = LatexCmds.varnothing =
  bind(BinaryOperator,'\\varnothing ','&empty;');

LatexCmds.cup = LatexCmds.union = bind(BinaryOperator,'\\cup ','&cup;');

LatexCmds.cap = LatexCmds.intersect = LatexCmds.intersection =
  bind(BinaryOperator,'\\cap ','&cap;');

// FIXME: the correct LaTeX would be ^\circ but we can't parse that
LatexCmds.deg = LatexCmds.degree = bind(VanillaSymbol,'\\degree ','&deg;');

LatexCmds.ang = LatexCmds.angle = bind(VanillaSymbol,'\\angle ','&ang;');
LatexCmds.measuredangle = bind(VanillaSymbol,'\\measuredangle ','&#8737;');
/*********************************
 * Symbols for Basic Mathematics
 ********************************/

var Digit = P(VanillaSymbol, function(_, super_) {
  _.createLeftOf = function(cursor) {
    if (cursor.options.autoSubscriptNumerals
        && cursor.parent !== cursor.parent.parent.sub
        && ((cursor[L] instanceof Variable && cursor[L].isItalic !== false)
            || (cursor[L] instanceof SupSub
                && cursor[L][L] instanceof Variable
                && cursor[L][L].isItalic !== false))) {
      LatexCmds._().createLeftOf(cursor);
      super_.createLeftOf.call(this, cursor);
      cursor.insRightOf(cursor.parent.parent);
    }
    else super_.createLeftOf.call(this, cursor);
  };
});

var Variable = P(Symbol, function(_, super_) {
  _.init = function(ch, html) {
    super_.init.call(this, ch, '<var>'+(html || ch)+'</var>');
  };
  _.text = function() {
    var text = this.ctrlSeq;
    if (this[L] && !(this[L] instanceof Variable)
        && !(this[L] instanceof BinaryOperator)
        && this[L].ctrlSeq !== "\\ ")
      text = '*' + text;
    if (this[R] && !(this[R] instanceof BinaryOperator)
        && !(this[R] instanceof SupSub))
      text += '*';
    return text;
  };
});

Options.p.autoCommands = { _maxLength: 0 };
optionProcessors.autoCommands = function(cmds) {
  if (!/^[a-z]+(?: [a-z]+)*$/i.test(cmds)) {
    throw '"'+cmds+'" not a space-delimited list of only letters';
  }
  var list = cmds.split(' '), dict = {}, maxLength = 0;
  for (var i = 0; i < list.length; i += 1) {
    var cmd = list[i];
    if (cmd.length < 2) {
      throw 'autocommand "'+cmd+'" not minimum length of 2';
    }
    if (LatexCmds[cmd] === OperatorName) {
      throw '"' + cmd + '" is a built-in operator name';
    }
    dict[cmd] = 1;
    maxLength = max(maxLength, cmd.length);
  }
  dict._maxLength = maxLength;
  return dict;
};

var Letter = P(Variable, function(_, super_) {
  _.init = function(ch) { return super_.init.call(this, this.letter = ch); };
  _.createLeftOf = function(cursor) {
    var autoCmds = cursor.options.autoCommands, maxLength = autoCmds._maxLength;
    if (maxLength > 0) {
      // want longest possible autocommand, so join together longest
      // sequence of letters
      var str = this.letter, l = cursor[L], i = 1;
      while (l instanceof Letter && i < maxLength) {
        str = l.letter + str, l = l[L], i += 1;
      }
      // check for an autocommand, going thru substrings longest to shortest
      while (str.length) {
        if (autoCmds.hasOwnProperty(str)) {
          for (var i = 2, l = cursor[L]; i < str.length; i += 1, l = l[L]);
          Fragment(l, cursor[L]).remove();
          cursor[L] = l[L];
          return LatexCmds[str](str).createLeftOf(cursor);
        }
        str = str.slice(1);
      }
    }
    super_.createLeftOf.apply(this, arguments);
  };
  _.italicize = function(bool) {
    this.isItalic = bool;
    this.jQ.toggleClass('mq-operator-name', !bool);
    return this;
  };
  _.finalizeTree = _.siblingDeleted = _.siblingCreated = function(opts, dir) {
    // don't auto-un-italicize if the sibling to my right changed (dir === R or
    // undefined) and it's now a Letter, it will un-italicize everyone
    if (dir !== L && this[R] instanceof Letter) return;
    this.autoUnItalicize(opts);
  };
  _.autoUnItalicize = function(opts) {
    var autoOps = opts.autoOperatorNames;
    if (autoOps._maxLength === 0) return;
    // want longest possible operator names, so join together entire contiguous
    // sequence of letters
    var str = this.letter;
    for (var l = this[L]; l instanceof Letter; l = l[L]) str = l.letter + str;
    for (var r = this[R]; r instanceof Letter; r = r[R]) str += r.letter;

    // removeClass and delete flags from all letters before figuring out
    // which, if any, are part of an operator name
    Fragment(l[R] || this.parent.ends[L], r[L] || this.parent.ends[R]).each(function(el) {
      el.italicize(true).jQ.removeClass('mq-first mq-last');
      el.ctrlSeq = el.letter;
    });

    // check for operator names: at each position from left to right, check
    // substrings from longest to shortest
    outer: for (var i = 0, first = l[R] || this.parent.ends[L]; i < str.length; i += 1, first = first[R]) {
      for (var len = min(autoOps._maxLength, str.length - i); len > 0; len -= 1) {
        var word = str.slice(i, i + len);
        if (autoOps.hasOwnProperty(word)) {
          for (var j = 0, letter = first; j < len; j += 1, letter = letter[R]) {
            letter.italicize(false);
            var last = letter;
          }

          var isBuiltIn = BuiltInOpNames.hasOwnProperty(word);
          first.ctrlSeq = (isBuiltIn ? '\\' : '\\operatorname{') + first.ctrlSeq;
          last.ctrlSeq += (isBuiltIn ? ' ' : '}');
          if (TwoWordOpNames.hasOwnProperty(word)) last[L][L][L].jQ.addClass('mq-last');
          if (nonOperatorSymbol(first[L])) first.jQ.addClass('mq-first');
          if (nonOperatorSymbol(last[R])) last.jQ.addClass('mq-last');

          i += len - 1;
          first = last;
          continue outer;
        }
      }
    }
  };
  function nonOperatorSymbol(node) {
    return node instanceof Symbol && !(node instanceof BinaryOperator);
  }
});
var BuiltInOpNames = {}; // the set of operator names like \sin, \cos, etc that
  // are built-into LaTeX: http://latex.wikia.com/wiki/List_of_LaTeX_symbols#Named_operators:_sin.2C_cos.2C_etc.
  // MathQuill auto-unitalicizes some operator names not in that set, like 'hcf'
  // and 'arsinh', which must be exported as \operatorname{hcf} and
  // \operatorname{arsinh}. Note: over/under line/arrow \lim variants like
  // \varlimsup are not supported
var AutoOpNames = Options.p.autoOperatorNames = { _maxLength: 9 }; // the set
  // of operator names that MathQuill auto-unitalicizes by default; overridable
var TwoWordOpNames = { limsup: 1, liminf: 1, projlim: 1, injlim: 1 };
(function() {
  var mostOps = ('arg deg det dim exp gcd hom inf ker lg lim ln log max min sup'
                 + ' limsup liminf injlim projlim Pr').split(' ');
  for (var i = 0; i < mostOps.length; i += 1) {
    BuiltInOpNames[mostOps[i]] = AutoOpNames[mostOps[i]] = 1;
  }

  var builtInTrigs = // why coth but not sech and csch, LaTeX?
    'sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth'.split(' ');
  for (var i = 0; i < builtInTrigs.length; i += 1) {
    BuiltInOpNames[builtInTrigs[i]] = 1;
  }

  var autoTrigs = 'sin cos tan sec cosec csc cotan cot ctg'.split(' ');
  for (var i = 0; i < autoTrigs.length; i += 1) {
    AutoOpNames[autoTrigs[i]] =
    AutoOpNames['arc'+autoTrigs[i]] =
    AutoOpNames[autoTrigs[i]+'h'] =
    AutoOpNames['ar'+autoTrigs[i]+'h'] =
    AutoOpNames['arc'+autoTrigs[i]+'h'] = 1;
  }

  // compat with some of the nonstandard LaTeX exported by MathQuill
  // before #247. None of these are real LaTeX commands so, seems safe
  var moreNonstandardOps = 'gcf hcf lcm proj span'.split(' ');
  for (var i = 0; i < moreNonstandardOps.length; i += 1) {
    AutoOpNames[moreNonstandardOps[i]] = 1;
  }
}());
optionProcessors.autoOperatorNames = function(cmds) {
  if (!/^[a-z]+(?: [a-z]+)*$/i.test(cmds)) {
    throw '"'+cmds+'" not a space-delimited list of only letters';
  }
  var list = cmds.split(' '), dict = {}, maxLength = 0;
  for (var i = 0; i < list.length; i += 1) {
    var cmd = list[i];
    if (cmd.length < 2) {
      throw '"'+cmd+'" not minimum length of 2';
    }
    dict[cmd] = 1;
    maxLength = max(maxLength, cmd.length);
  }
  dict._maxLength = maxLength;
  return dict;
};
var OperatorName = P(Symbol, function(_, super_) {
  _.init = function(fn) { this.ctrlSeq = fn; };
  _.createLeftOf = function(cursor) {
    var fn = this.ctrlSeq;
    for (var i = 0; i < fn.length; i += 1) {
      Letter(fn.charAt(i)).createLeftOf(cursor);
    }
  };
  _.parser = function() {
    var fn = this.ctrlSeq;
    var block = MathBlock();
    for (var i = 0; i < fn.length; i += 1) {
      Letter(fn.charAt(i)).adopt(block, block.ends[R], 0);
    }
    return Parser.succeed(block.children());
  };
});
for (var fn in AutoOpNames) if (AutoOpNames.hasOwnProperty(fn)) {
  LatexCmds[fn] = OperatorName;
}
LatexCmds.operatorname = P(MathCommand, function(_) {
  _.createLeftOf = noop;
  _.numBlocks = function() { return 1; };
  _.parser = function() {
    return latexMathParser.block.map(function(b) { return b.children(); });
  };
});

LatexCmds.f = P(Letter, function(_, super_) {
  _.init = function() {
    Symbol.p.init.call(this, this.letter = 'f', '<var class="mq-f">f</var>');
  };
  _.italicize = function(bool) {
    this.jQ.html('f').toggleClass('mq-f', bool);
    return super_.italicize.apply(this, arguments);
  };
});

// VanillaSymbol's
LatexCmds[' '] = LatexCmds.space = bind(VanillaSymbol, '\\ ', '&nbsp;');

LatexCmds["'"] = LatexCmds.prime = bind(VanillaSymbol, "'", '&prime;');

LatexCmds.backslash = bind(VanillaSymbol,'\\backslash ','\\');
if (!CharCmds['\\']) CharCmds['\\'] = LatexCmds.backslash;

LatexCmds.$ = bind(VanillaSymbol, '\\$', '$');

// does not use Symbola font
var NonSymbolaSymbol = P(Symbol, function(_, super_) {
  _.init = function(ch, html) {
    super_.init.call(this, ch, '<span class="mq-nonSymbola">'+(html || ch)+'</span>');
  };
});

LatexCmds['@'] = NonSymbolaSymbol;
LatexCmds['&'] = bind(NonSymbolaSymbol, '\\&', '&amp;');
LatexCmds['%'] = bind(NonSymbolaSymbol, '\\%', '%');

//the following are all Greek to me, but this helped a lot: http://www.ams.org/STIX/ion/stixsig03.html

//lowercase Greek letter variables
LatexCmds.alpha =
LatexCmds.beta =
LatexCmds.gamma =
LatexCmds.delta =
LatexCmds.zeta =
LatexCmds.eta =
LatexCmds.theta =
LatexCmds.iota =
LatexCmds.kappa =
LatexCmds.mu =
LatexCmds.nu =
LatexCmds.xi =
LatexCmds.rho =
LatexCmds.sigma =
LatexCmds.tau =
LatexCmds.chi =
LatexCmds.psi =
LatexCmds.omega = P(Variable, function(_, super_) {
  _.init = function(latex) {
    super_.init.call(this,'\\'+latex+' ','&'+latex+';');
  };
});

//why can't anybody FUCKING agree on these
LatexCmds.phi = //W3C or Unicode?
  bind(Variable,'\\phi ','&#981;');

LatexCmds.phiv = //Elsevier and 9573-13
LatexCmds.varphi = //AMS and LaTeX
  bind(Variable,'\\varphi ','&phi;');

LatexCmds.epsilon = //W3C or Unicode?
  bind(Variable,'\\epsilon ','&#1013;');

LatexCmds.epsiv = //Elsevier and 9573-13
LatexCmds.varepsilon = //AMS and LaTeX
  bind(Variable,'\\varepsilon ','&epsilon;');

LatexCmds.piv = //W3C/Unicode and Elsevier and 9573-13
LatexCmds.varpi = //AMS and LaTeX
  bind(Variable,'\\varpi ','&piv;');

LatexCmds.sigmaf = //W3C/Unicode
LatexCmds.sigmav = //Elsevier
LatexCmds.varsigma = //LaTeX
  bind(Variable,'\\varsigma ','&sigmaf;');

LatexCmds.thetav = //Elsevier and 9573-13
LatexCmds.vartheta = //AMS and LaTeX
LatexCmds.thetasym = //W3C/Unicode
  bind(Variable,'\\vartheta ','&thetasym;');

LatexCmds.upsilon = //AMS and LaTeX and W3C/Unicode
LatexCmds.upsi = //Elsevier and 9573-13
  bind(Variable,'\\upsilon ','&upsilon;');

//these aren't even mentioned in the HTML character entity references
LatexCmds.gammad = //Elsevier
LatexCmds.Gammad = //9573-13 -- WTF, right? I dunno if this was a typo in the reference (see above)
LatexCmds.digamma = //LaTeX
  bind(Variable,'\\digamma ','&#989;');

LatexCmds.kappav = //Elsevier
LatexCmds.varkappa = //AMS and LaTeX
  bind(Variable,'\\varkappa ','&#1008;');

LatexCmds.rhov = //Elsevier and 9573-13
LatexCmds.varrho = //AMS and LaTeX
  bind(Variable,'\\varrho ','&#1009;');

//Greek constants, look best in non-italicized Times New Roman
LatexCmds.pi = LatexCmds['\u03c0'] = bind(NonSymbolaSymbol,'\\pi ','&pi;');
LatexCmds.lambda = bind(NonSymbolaSymbol,'\\lambda ','&lambda;');

//uppercase greek letters

LatexCmds.Upsilon = //LaTeX
LatexCmds.Upsi = //Elsevier and 9573-13
LatexCmds.upsih = //W3C/Unicode "upsilon with hook"
LatexCmds.Upsih = //'cos it makes sense to me
  bind(Symbol,'\\Upsilon ','<var style="font-family: serif">&upsih;</var>'); //Symbola's 'upsilon with a hook' is a capital Y without hooks :(

//other symbols with the same LaTeX command and HTML character entity reference
LatexCmds.Gamma =
LatexCmds.Delta =
LatexCmds.Theta =
LatexCmds.Lambda =
LatexCmds.Xi =
LatexCmds.Pi =
LatexCmds.Sigma =
LatexCmds.Phi =
LatexCmds.Psi =
LatexCmds.Omega =
LatexCmds.forall = P(VanillaSymbol, function(_, super_) {
  _.init = function(latex) {
    super_.init.call(this,'\\'+latex+' ','&'+latex+';');
  };
});

// symbols that aren't a single MathCommand, but are instead a whole
// Fragment. Creates the Fragment from a LaTeX string
var LatexFragment = P(MathCommand, function(_) {
  _.init = function(latex) { this.latex = latex; };
  _.createLeftOf = function(cursor) {
    var block = latexMathParser.parse(this.latex);
    block.children().adopt(cursor.parent, cursor[L], cursor[R]);
    cursor[L] = block.ends[R];
    block.jQize().insertBefore(cursor.jQ);
    block.finalizeInsert(cursor.options, cursor);
    if (block.ends[R][R].siblingCreated) block.ends[R][R].siblingCreated(cursor.options, L);
    if (block.ends[L][L].siblingCreated) block.ends[L][L].siblingCreated(cursor.options, R);
    cursor.parent.bubble('reflow');
  };
  _.parser = function() {
    var frag = latexMathParser.parse(this.latex).children();
    return Parser.succeed(frag);
  };
});

// for what seems to me like [stupid reasons][1], Unicode provides
// subscripted and superscripted versions of all ten Arabic numerals,
// as well as [so-called "vulgar fractions"][2].
// Nobody really cares about most of them, but some of them actually
// predate Unicode, dating back to [ISO-8859-1][3], apparently also
// known as "Latin-1", which among other things [Windows-1252][4]
// largely coincides with, so Microsoft Word sometimes inserts them
// and they get copy-pasted into MathQuill.
//
// (Irrelevant but funny story: though not a superset of Latin-1 aka
// ISO-8859-1, Windows-1252 **is** a strict superset of the "closely
// related but distinct"[3] "ISO 8859-1" -- see the lack of a dash
// after "ISO"? Completely different character set, like elephants vs
// elephant seals, or "Zombies" vs "Zombie Redneck Torture Family".
// What kind of idiot would get them confused.
// People in fact got them confused so much, it was so common to
// mislabel Windows-1252 text as ISO-8859-1, that most modern web
// browsers and email clients treat the MIME charset of ISO-8859-1
// as actually Windows-1252, behavior now standard in the HTML5 spec.)
//
// [1]: http://en.wikipedia.org/wiki/Unicode_subscripts_andsuper_scripts
// [2]: http://en.wikipedia.org/wiki/Number_Forms
// [3]: http://en.wikipedia.org/wiki/ISO/IEC_8859-1
// [4]: http://en.wikipedia.org/wiki/Windows-1252
LatexCmds['\u00b9'] = bind(LatexFragment, '^1');
LatexCmds['\u00b2'] = bind(LatexFragment, '^2');
LatexCmds['\u00b3'] = bind(LatexFragment, '^3');
LatexCmds['\u00bc'] = bind(LatexFragment, '\\frac14');
LatexCmds['\u00bd'] = bind(LatexFragment, '\\frac12');
LatexCmds['\u00be'] = bind(LatexFragment, '\\frac34');

var PlusMinus = P(BinaryOperator, function(_) {
  _.init = VanillaSymbol.prototype.init;

  _.contactWeld = _.siblingCreated = _.siblingDeleted = function(opts, dir) {
    if (dir === R) return; // ignore if sibling only changed on the right
    if(typeof this.jQ[0] != "undefined")
    this.jQ[0].className =
      (!this[L] || this[L] instanceof BinaryOperator ? '' : 'mq-binary-operator');
    return this;
  };
});

LatexCmds['+'] = bind(PlusMinus, '+', '+');
//yes, these are different dashes, I think one is an en dash and the other is a hyphen
LatexCmds['\u2013'] = LatexCmds['-'] = bind(PlusMinus, '-', '&minus;');
LatexCmds['\u00b1'] = LatexCmds.pm = LatexCmds.plusmn = LatexCmds.plusminus =
  bind(PlusMinus,'\\pm ','&plusmn;');
LatexCmds.mp = LatexCmds.mnplus = LatexCmds.minusplus =
  bind(PlusMinus,'\\mp ','&#8723;');

CharCmds['*'] = LatexCmds.sdot = LatexCmds.cdot =
  bind(BinaryOperator, '\\cdot ', '&middot;', '*');
//semantically should be &sdot;, but &middot; looks better

var Inequality = P(BinaryOperator, function(_, super_) {
  _.init = function(data, strict) {
    this.data = data;
    this.strict = strict;
    var strictness = (strict ? 'Strict' : '');
    super_.init.call(this, data['ctrlSeq'+strictness], data['html'+strictness],
                     data['text'+strictness]);
  };
  _.swap = function(strict) {
    this.strict = strict;
    var strictness = (strict ? 'Strict' : '');
    this.ctrlSeq = this.data['ctrlSeq'+strictness];
    this.jQ.html(this.data['html'+strictness]);
    this.textTemplate = [ this.data['text'+strictness] ];
  };
  _.deleteTowards = function(dir, cursor) {
    if (dir === L && !this.strict) {
      this.swap(true);
      this.bubble('reflow');
      return;
    }
    super_.deleteTowards.apply(this, arguments);
  };
});

var less = { ctrlSeq: '\\le ', html: '&le;', text: '\u2264',
             ctrlSeqStrict: '<', htmlStrict: '&lt;', textStrict: '<' };
var greater = { ctrlSeq: '\\ge ', html: '&ge;', text: '\u2265',
                ctrlSeqStrict: '>', htmlStrict: '&gt;', textStrict: '>' };

LatexCmds['<'] = LatexCmds.lt = bind(Inequality, less, true);
LatexCmds['>'] = LatexCmds.gt = bind(Inequality, greater, true);
LatexCmds['\u2264'] = LatexCmds.le = LatexCmds.leq = bind(Inequality, less, false);
LatexCmds['\u2265'] = LatexCmds.ge = LatexCmds.geq = bind(Inequality, greater, false);

var Equality = P(BinaryOperator, function(_, super_) {
  _.init = function() {
    super_.init.call(this, '=', '=');
  };
  _.createLeftOf = function(cursor) {
    if (cursor[L] instanceof Inequality && cursor[L].strict) {
      cursor[L].swap(false);
      cursor[L].bubble('reflow');
      return;
    }
    super_.createLeftOf.apply(this, arguments);
  };
});
LatexCmds['='] = Equality;

LatexCmds['\u00d7'] = LatexCmds.times = bind(BinaryOperator, '\\times ', '&times;', '[x]');

LatexCmds['\u00f7'] = LatexCmds.div = LatexCmds.divide = LatexCmds.divides =
  bind(BinaryOperator,'\\div ','&divide;', '[/]');

CharCmds['~'] = LatexCmds.sim = bind(BinaryOperator, '\\sim ', '~', '~');
/***************************
 * Commands and Operators.
 **************************/

var scale, // = function(jQ, x, y) { ... }
//will use a CSS 2D transform to scale the jQuery-wrapped HTML elements,
//or the filter matrix transform fallback for IE 5.5-8, or gracefully degrade to
//increasing the fontSize to match the vertical Y scaling factor.

//ideas from http://github.com/louisremi/jquery.transform.js
//see also http://msdn.microsoft.com/en-us/library/ms533014(v=vs.85).aspx

  forceIERedraw = noop,
  div = document.createElement('div'),
  div_style = div.style,
  transformPropNames = {
    transform:1,
    WebkitTransform:1,
    MozTransform:1,
    OTransform:1,
    msTransform:1
  },
  transformPropName;

for (var prop in transformPropNames) {
  if (prop in div_style) {
    transformPropName = prop;
    break;
  }
}

if (transformPropName) {
  scale = function(jQ, x, y) {
    jQ.css(transformPropName, 'scale('+x+','+y+')');
  };
}
else if ('filter' in div_style) { //IE 6, 7, & 8 fallback, see https://github.com/laughinghan/mathquill/wiki/Transforms
  forceIERedraw = function(el){ el.className = el.className; };
  scale = function(jQ, x, y) { //NOTE: assumes y > x
    x /= (1+(y-1)/2);
    jQ.css('fontSize', y + 'em');
    if (!jQ.hasClass('mq-matrixed-container')) {
      jQ.addClass('mq-matrixed-container')
      .wrapInner('<span class="mq-matrixed"></span>');
    }
    var innerjQ = jQ.children()
    .css('filter', 'progid:DXImageTransform.Microsoft'
        + '.Matrix(M11=' + x + ",SizingMethod='auto expand')"
    );
    function calculateMarginRight() {
      jQ.css('marginRight', (innerjQ.width()-1)*(x-1)/x + 'px');
    }
    calculateMarginRight();
    var intervalId = setInterval(calculateMarginRight);
    $(window).load(function() {
      clearTimeout(intervalId);
      calculateMarginRight();
    });
  };
}
else {
  scale = function(jQ, x, y) {
    jQ.css('fontSize', y + 'em');
  };
}

var Style = P(MathCommand, function(_, super_) {
  _.init = function(ctrlSeq, tagName, attrs) {
    super_.init.call(this, ctrlSeq, '<'+tagName+' '+attrs+'>&0</'+tagName+'>');
  };
});

//fonts
LatexCmds.mathrm = bind(Style, '\\mathrm', 'span', 'class="mq-roman mq-font"');
LatexCmds.mathit = bind(Style, '\\mathit', 'i', 'class="mq-font"');
LatexCmds.mathbf = bind(Style, '\\mathbf', 'b', 'class="mq-font"');
LatexCmds.mathsf = bind(Style, '\\mathsf', 'span', 'class="mq-sans-serif mq-font"');
LatexCmds.mathtt = bind(Style, '\\mathtt', 'span', 'class="mq-monospace mq-font"');
//text-decoration
LatexCmds.underline = bind(Style, '\\underline', 'span', 'class="mq-non-leaf mq-underline"');
LatexCmds.overline = LatexCmds.bar = bind(Style, '\\overline', 'span', 'class="mq-non-leaf mq-overline"');
LatexCmds.overrightarrow = bind(Style, '\\overrightarrow', 'span', 'class="mq-non-leaf mq-overarrow mq-arrow-right"');
LatexCmds.overleftarrow = bind(Style, '\\overleftarrow', 'span', 'class="mq-non-leaf mq-overarrow mq-arrow-left"');

// `\textcolor{color}{math}` will apply a color to the given math content, where
// `color` is any valid CSS Color Value (see [SitePoint docs][] (recommended),
// [Mozilla docs][], or [W3C spec][]).
//
// [SitePoint docs]: http://reference.sitepoint.com/css/colorvalues
// [Mozilla docs]: https://developer.mozilla.org/en-US/docs/CSS/color_value#Values
// [W3C spec]: http://dev.w3.org/csswg/css3-color/#colorunits
var TextColor = LatexCmds.textcolor = P(MathCommand, function(_, super_) {
  _.setColor = function(color) {
    this.color = color;
    this.htmlTemplate =
      '<span class="mq-textcolor" style="color:' + color + '">&0</span>';
  };
  _.latex = function() {
    return '\\textcolor{' + this.color + '}{' + this.blocks[0].latex() + '}';
  };
  _.parser = function() {
    var self = this;
    var optWhitespace = Parser.optWhitespace;
    var string = Parser.string;
    var regex = Parser.regex;

    return optWhitespace
      .then(string('{'))
      .then(regex(/^[#\w\s.,()%-]*/))
      .skip(string('}'))
      .then(function(color) {
        self.setColor(color);
        return super_.parser.call(self);
      })
    ;
  };
});

// Very similar to the \textcolor command, but will add the given CSS class.
// Usage: \class{classname}{math}
// Note regex that whitelists valid CSS classname characters:
// https://github.com/mathquill/mathquill/pull/191#discussion_r4327442
var Class = LatexCmds['class'] = P(MathCommand, function(_, super_) {
  _.parser = function() {
    var self = this, string = Parser.string, regex = Parser.regex;
    return Parser.optWhitespace
      .then(string('{'))
      .then(regex(/^[-\w\s\\\xA0-\xFF]*/))
      .skip(string('}'))
      .then(function(cls) {
        self.htmlTemplate = '<span class="mq-class '+cls+'">&0</span>';
        return super_.parser.call(self);
      })
    ;
  };
});

var SupSub = P(MathCommand, function(_, super_) {
  _.ctrlSeq = '_{...}^{...}';
  _.createLeftOf = function(cursor) {
    if (!cursor[L] && cursor.options.supSubsRequireOperand) return;
    return super_.createLeftOf.apply(this, arguments);
  };
  _.contactWeld = function(cursor) {
    // Look on either side for a SupSub, if one is found compare my
    // .sub, .sup with its .sub, .sup. If I have one that it doesn't,
    // then call .addBlock() on it with my block; if I have one that
    // it also has, then insert my block's children into its block,
    // unless my block has none, in which case insert the cursor into
    // its block (and not mine, I'm about to remove myself) in the case
    // I was just typed.
    // TODO: simplify

    // equiv. to [L, R].forEach(function(dir) { ... });
    for (var dir = L; dir; dir = (dir === L ? R : false)) {
      if (this[dir] instanceof SupSub) {
        // equiv. to 'sub sup'.split(' ').forEach(function(supsub) { ... });
        for (var supsub = 'sub'; supsub; supsub = (supsub === 'sub' ? 'sup' : false)) {
          var src = this[supsub], dest = this[dir][supsub];
          if (!src) continue;
          if (!dest) this[dir].addBlock(src.disown());
          else if (!src.isEmpty()) { // ins src children at -dir end of dest
            src.jQ.children().insAtDirEnd(-dir, dest.jQ);
            var children = src.children().disown();
            var pt = Point(dest, children.ends[R], dest.ends[L]);
            if (dir === L) children.adopt(dest, dest.ends[R], 0);
            else children.adopt(dest, 0, dest.ends[L]);
          }
          else var pt = Point(dest, 0, dest.ends[L]);
          this.placeCursor = (function(dest, src) { // TODO: don't monkey-patch
            return function(cursor) { cursor.insAtDirEnd(-dir, dest || src); };
          }(dest, src));
        }
        this.remove();
        if (cursor && cursor[L] === this) {
          if (dir === R && pt) {
            pt[L] ? cursor.insRightOf(pt[L]) : cursor.insAtLeftEnd(pt.parent);
          }
          else cursor.insRightOf(this[dir]);
        }
        break;
      }
    }
    this.respace();
  };
  Options.p.charsThatBreakOutOfSupSub = '';
  _.finalizeTree = function() {
    this.ends[L].write = function(cursor, ch) {
      if (cursor.options.autoSubscriptNumerals && this === this.parent.sub) {
        if (ch === '_') return;
        var cmd = this.chToCmd(ch);
        if (cmd instanceof Symbol) cursor.deleteSelection();
        else cursor.clearSelection().insRightOf(this.parent);
        return cmd.createLeftOf(cursor.show());
      }
      if (cursor[L] && !cursor[R] && !cursor.selection
          && cursor.options.charsThatBreakOutOfSupSub.indexOf(ch) > -1) {
        cursor.insRightOf(this.parent);
      }
      MathBlock.p.write.apply(this, arguments);
    };
  };
  _.moveTowards = function(dir, cursor, updown) {
    if (cursor.options.autoSubscriptNumerals && !this.sup) {
      cursor.insDirOf(dir, this);
    }
    else super_.moveTowards.apply(this, arguments);
  };
  _.deleteTowards = function(dir, cursor) {
    if (cursor.options.autoSubscriptNumerals && this.sub) {
      var cmd = this.sub.ends[-dir];
      if (cmd instanceof Symbol) cmd.remove();
      else if (cmd) cmd.deleteTowards(dir, cursor.insAtDirEnd(-dir, this.sub));

      // TODO: factor out a .removeBlock() or something
      if (this.sub.isEmpty()) {
        this.sub.deleteOutOf(L, cursor.insAtLeftEnd(this.sub));
        if (this.sup) cursor.insDirOf(-dir, this);
        // Note `-dir` because in e.g. x_1^2| want backspacing (leftward)
        // to delete the 1 but to end up rightward of x^2; with non-negated
        // `dir` (try it), the cursor appears to have gone "through" the ^2.
      }
    }
    else super_.deleteTowards.apply(this, arguments);
  };
  _.latex = function() {
    function latex(prefix, block) {
      var l = block && block.latex();
      return block ? prefix + (l.length === 1 ? l : '{' + (l || ' ') + '}') : '';
    }
    return latex('_', this.sub) + latex('^', this.sup);
  };
  _.respace = _.siblingCreated = _.siblingDeleted = function(opts, dir) {
    if (dir === R) return; // ignore if sibling only changed on the right
    this.jQ.toggleClass('mq-limit', this[L].ctrlSeq === '\\int ');
  };
  _.addBlock = function(block) {
    if (this.supsub === 'sub') {
      this.sup = this.upInto = this.sub.upOutOf = block;
      block.adopt(this, this.sub, 0).downOutOf = this.sub;
      block.jQ = $('<span class="mq-sup"/>').append(block.jQ.children())
        .attr(mqBlockId, block.id).prependTo(this.jQ);
    }
    else {
      this.sub = this.downInto = this.sup.downOutOf = block;
      block.adopt(this, 0, this.sup).upOutOf = this.sup;
      block.jQ = $('<span class="mq-sub"></span>').append(block.jQ.children())
        .attr(mqBlockId, block.id).appendTo(this.jQ.removeClass('mq-sup-only'));
      this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>');
    }
    // like 'sub sup'.split(' ').forEach(function(supsub) { ... });
    for (var i = 0; i < 2; i += 1) (function(cmd, supsub, oppositeSupsub, updown) {
      cmd[supsub].deleteOutOf = function(dir, cursor) {
        cursor.insDirOf((this[dir] ? -dir : dir), this.parent);
        if (!this.isEmpty()) {
          var end = this.ends[dir];
          this.children().disown()
            .withDirAdopt(dir, cursor.parent, cursor[dir], cursor[-dir])
            .jQ.insDirOf(-dir, cursor.jQ);
          cursor[-dir] = end;
        }
        cmd.supsub = oppositeSupsub;
        delete cmd[supsub];
        delete cmd[updown+'Into'];
        cmd[oppositeSupsub][updown+'OutOf'] = insLeftOfMeUnlessAtEnd;
        delete cmd[oppositeSupsub].deleteOutOf;
        if (supsub === 'sub') $(cmd.jQ.addClass('mq-sup-only')[0].lastChild).remove();
        this.remove();
      };
    }(this, 'sub sup'.split(' ')[i], 'sup sub'.split(' ')[i], 'down up'.split(' ')[i]));
  };
});

function insLeftOfMeUnlessAtEnd(cursor) {
  // cursor.insLeftOf(cmd), unless cursor at the end of block, and every
  // ancestor cmd is at the end of every ancestor block
  var cmd = this.parent, ancestorCmd = cursor;
  do {
    if (ancestorCmd[R]) return cursor.insLeftOf(cmd);
    ancestorCmd = ancestorCmd.parent.parent;
  } while (ancestorCmd !== cmd);
  cursor.insRightOf(cmd);
}

LatexCmds.subscript =
LatexCmds._ = P(SupSub, function(_, super_) {
  _.supsub = 'sub';
  _.htmlTemplate =
      '<span class="mq-supsub mq-non-leaf">'
    +   '<span class="mq-sub">&0</span>'
    +   '<span style="display:inline-block;width:0">&#8203;</span>'
    + '</span>'
  ;
  _.textTemplate = [ '_' ];
  _.finalizeTree = function() {
    this.downInto = this.sub = this.ends[L];
    this.sub.upOutOf = insLeftOfMeUnlessAtEnd;
    super_.finalizeTree.call(this);
  };
});

LatexCmds.superscript =
LatexCmds.supscript =
LatexCmds['^'] = P(SupSub, function(_, super_) {
  _.supsub = 'sup';
  _.htmlTemplate =
      '<span class="mq-supsub mq-non-leaf mq-sup-only">'
    +   '<span class="mq-sup">&0</span>'
    + '</span>'
  ;
  _.textTemplate = [ '^' ];
  _.finalizeTree = function() {
    this.upInto = this.sup = this.ends[R];
    this.sup.downOutOf = insLeftOfMeUnlessAtEnd;
    super_.finalizeTree.call(this);
  };
});

var SummationNotation = P(MathCommand, function(_, super_) {
  _.init = function(ch, html) {
    var htmlTemplate =
      '<span class="mq-large-operator mq-non-leaf">'
    +   '<span class="mq-to"><span>&1</span></span>'
    +   '<big>'+html+'</big>'
    +   '<span class="mq-from"><span>&0</span></span>'
    + '</span>'
    ;
    Symbol.prototype.init.call(this, ch, htmlTemplate);
  };
  _.createLeftOf = function(cursor) {
    super_.createLeftOf.apply(this, arguments);
    if (cursor.options.sumStartsWithNEquals) {
      Letter('n').createLeftOf(cursor);
      Equality().createLeftOf(cursor);
    }
  };
  _.latex = function() {
    function simplify(latex) {
      return latex.length === 1 ? latex : '{' + (latex || ' ') + '}';
    }
    return this.ctrlSeq + '_' + simplify(this.ends[L].latex()) +
      '^' + simplify(this.ends[R].latex());
  };
  _.parser = function() {
    var string = Parser.string;
    var optWhitespace = Parser.optWhitespace;
    var succeed = Parser.succeed;
    var block = latexMathParser.block;

    var self = this;
    var blocks = self.blocks = [ MathBlock(), MathBlock() ];
    for (var i = 0; i < blocks.length; i += 1) {
      blocks[i].adopt(self, self.ends[R], 0);
    }

    return optWhitespace.then(string('_').or(string('^'))).then(function(supOrSub) {
      var child = blocks[supOrSub === '_' ? 0 : 1];
      return block.then(function(block) {
        block.children().adopt(child, child.ends[R], 0);
        return succeed(self);
      });
    }).many().result(self);
  };
  _.finalizeTree = function() {
    this.downInto = this.ends[L];
    this.upInto = this.ends[R];
    this.ends[L].upOutOf = this.ends[R];
    this.ends[R].downOutOf = this.ends[L];
  };
});

LatexCmds['\u2211'] =
LatexCmds.sum =
LatexCmds.summation = bind(SummationNotation,'\\sum ','&sum;');

LatexCmds['\u220f'] =
LatexCmds.prod =
LatexCmds.product = bind(SummationNotation,'\\prod ','&prod;');

LatexCmds.coprod =
LatexCmds.coproduct = bind(SummationNotation,'\\coprod ','&#8720;');

var Fraction =
LatexCmds.frac =
LatexCmds.dfrac =
LatexCmds.cfrac =
LatexCmds.fraction = P(MathCommand, function(_, super_) {
  _.ctrlSeq = '\\frac';
  _.htmlTemplate =
      '<span class="mq-fraction mq-non-leaf">'
    +   '<span class="mq-numerator">&0</span>'
    +   '<span class="mq-denominator">&1</span>'
    +   '<span style="display:inline-block;width:0">&#8203;</span>'
    + '</span>'
  ;
  _.textTemplate = ['(', ')/(', ')'];
  _.finalizeTree = function() {
    this.upInto = this.ends[R].upOutOf = this.ends[L];
    this.downInto = this.ends[L].downOutOf = this.ends[R];
  };
});

var LiveFraction =
LatexCmds.over =
CharCmds['/'] = P(Fraction, function(_, super_) {
  _.createLeftOf = function(cursor) {
    if (!this.replacedFragment) {
      var leftward = cursor[L];
      while (leftward &&
        !(
          leftward instanceof BinaryOperator ||
          leftward instanceof (LatexCmds.text || noop) ||
          leftward instanceof SummationNotation ||
          leftward.ctrlSeq === '\\ ' ||
          /^[,;:]$/.test(leftward.ctrlSeq)
        ) //lookbehind for operator
      ) leftward = leftward[L];

      if (leftward instanceof SummationNotation && leftward[R] instanceof SupSub) {
        leftward = leftward[R];
        if (leftward[R] instanceof SupSub && leftward[R].ctrlSeq != leftward.ctrlSeq)
          leftward = leftward[R];
      }

      if (leftward !== cursor[L]) {
        this.replaces(Fragment(leftward[R] || cursor.parent.ends[L], cursor[L]));
        cursor[L] = leftward;
      }
    }
    super_.createLeftOf.call(this, cursor);
  };
});

var SquareRoot =
LatexCmds.sqrt =
LatexCmds['\u221a'] = P(MathCommand, function(_, super_) {
  _.ctrlSeq = '\\sqrt';
  _.htmlTemplate =
      '<span class="mq-non-leaf">'
    +   '<span class="mq-scaled mq-sqrt-prefix">&radic;</span>'
    +   '<span class="mq-non-leaf mq-sqrt-stem">&0</span>'
    + '</span>'
  ;
  _.textTemplate = ['sqrt(', ')'];
  _.parser = function() {
    return latexMathParser.optBlock.then(function(optBlock) {
      return latexMathParser.block.map(function(block) {
        var nthroot = NthRoot();
        nthroot.blocks = [ optBlock, block ];
        optBlock.adopt(nthroot, 0, 0);
        block.adopt(nthroot, optBlock, 0);
        return nthroot;
      });
    }).or(super_.parser.call(this));
  };
  _.reflow = function() {
    var block = this.ends[R].jQ;
    if(typeof block != "undefined" && block.length)
    scale(block.prev(), 1, block.innerHeight()/+block.css('fontSize').slice(0,-2) - .1);
  };
});

var Vec = LatexCmds.vec = P(MathCommand, function(_, super_) {
  _.ctrlSeq = '\\vec';
  _.htmlTemplate =
      '<span class="mq-non-leaf">'
    +   '<span class="mq-vector-prefix">&rarr;</span>'
    +   '<span class="mq-vector-stem">&0</span>'
    + '</span>'
  ;
  _.textTemplate = ['vec(', ')'];
});

var NthRoot =
LatexCmds.nthroot = P(SquareRoot, function(_, super_) {
  _.htmlTemplate =
      '<sup class="mq-nthroot mq-non-leaf">&0</sup>'
    + '<span class="mq-scaled">'
    +   '<span class="mq-sqrt-prefix mq-scaled">&radic;</span>'
    +   '<span class="mq-sqrt-stem mq-non-leaf">&1</span>'
    + '</span>'
  ;
  _.textTemplate = ['sqrt[', '](', ')'];
  _.latex = function() {
    return '\\sqrt['+this.ends[L].latex()+']{'+this.ends[R].latex()+'}';
  };
});

function DelimsMixin(_, super_) {
  _.jQadd = function() {
    super_.jQadd.apply(this, arguments);
    this.delimjQs = this.jQ.children(':first').add(this.jQ.children(':last'));
    this.contentjQ = this.jQ.children(':eq(1)');
  };
  _.reflow = function() {
    if(typeof this.contentjQ != "undefined"){
      var height = this.contentjQ.outerHeight()
      / parseFloat(this.contentjQ.css('fontSize'));
scale(this.delimjQs, min(1 + .2*(height - 1), 1.2), 1.2*height);
    }
  };
}

// Round/Square/Curly/Angle Brackets (aka Parens/Brackets/Braces)
//   first typed as one-sided bracket with matching "ghost" bracket at
//   far end of current block, until you type an opposing one
var Bracket = P(P(MathCommand, DelimsMixin), function(_, super_) {
  _.init = function(side, open, close, ctrlSeq, end) {
    super_.init.call(this, '\\left'+ctrlSeq, undefined, [open, close]);
    this.side = side;
    this.sides = {};
    this.sides[L] = { ch: open, ctrlSeq: ctrlSeq };
    this.sides[R] = { ch: close, ctrlSeq: end };
  };
  _.numBlocks = function() { return 1; };
  _.html = function() { // wait until now so that .side may
    this.htmlTemplate = // be set by createLeftOf or parser
        '<span class="mq-non-leaf">'
      +   '<span class="mq-scaled mq-paren'+(this.side === R ? ' mq-ghost' : '')+'">'
      +     this.sides[L].ch
      +   '</span>'
      +   '<span class="mq-non-leaf">&0</span>'
      +   '<span class="mq-scaled mq-paren'+(this.side === L ? ' mq-ghost' : '')+'">'
      +     this.sides[R].ch
      +   '</span>'
      + '</span>'
    ;
    return super_.html.call(this);
  };
  _.latex = function() {
    return '\\left'+this.sides[L].ctrlSeq+this.ends[L].latex()+'\\right'+this.sides[R].ctrlSeq;
  };
  _.oppBrack = function(opts, node, expectedSide) {
    // return node iff it's a 1-sided bracket of expected side (if any, may be
    // undefined), and of opposite side from me if I'm not a pipe
    return node instanceof Bracket && node.side && node.side !== -expectedSide
      && (this.sides[this.side].ch === '|' || node.side === -this.side)
      && (!opts.restrictMismatchedBrackets
        || OPP_BRACKS[this.sides[this.side].ch] === node.sides[node.side].ch
        || { '(': ']', '[': ')' }[this.sides[L].ch] === node.sides[R].ch) && node;
  };
  _.closeOpposing = function(brack) {
    brack.side = 0;
    brack.sides[this.side] = this.sides[this.side]; // copy over my info (may be
    brack.delimjQs.eq(this.side === L ? 0 : 1) // mismatched, like [a, b))
      .removeClass('mq-ghost').html(this.sides[this.side].ch);
  };
  _.createLeftOf = function(cursor) {
    if (!this.replacedFragment) { // unless wrapping seln in brackets,
        // check if next to or inside an opposing one-sided bracket
        // (must check both sides 'cos I might be a pipe)
      var opts = cursor.options;
      var brack = this.oppBrack(opts, cursor[L], L)
                  || this.oppBrack(opts, cursor[R], R)
                  || this.oppBrack(opts, cursor.parent.parent);
    }
    if (brack) {
      var side = this.side = -brack.side; // may be pipe with .side not yet set
      this.closeOpposing(brack);
      if (brack === cursor.parent.parent && cursor[side]) { // move the stuff between
        Fragment(cursor[side], cursor.parent.ends[side], -side) // me and ghost outside
          .disown().withDirAdopt(-side, brack.parent, brack, brack[side])
          .jQ.insDirOf(side, brack.jQ);
        brack.bubble('reflow');
      }
    }
    else {
      brack = this, side = brack.side;
      if (brack.replacedFragment) brack.side = 0; // wrapping seln, don't be one-sided
      else if (cursor[-side]) { // elsewise, auto-expand so ghost is at far end
        brack.replaces(Fragment(cursor[-side], cursor.parent.ends[-side], side));
        cursor[-side] = 0;
      }
      super_.createLeftOf.call(brack, cursor);
    }
    if (side === L) cursor.insAtLeftEnd(brack.ends[L]);
    else cursor.insRightOf(brack);
  };
  _.placeCursor = noop;
  _.unwrap = function() {
    this.ends[L].children().disown().adopt(this.parent, this, this[R])
      .jQ.insertAfter(this.jQ);
    this.remove();
  };
  _.deleteSide = function(side, outward, cursor) {
    var parent = this.parent, sib = this[side], farEnd = parent.ends[side];

    if (side === this.side) { // deleting non-ghost of one-sided bracket, unwrap
      this.unwrap();
      sib ? cursor.insDirOf(-side, sib) : cursor.insAtDirEnd(side, parent);
      return;
    }

    var opts = cursor.options, wasSolid = !this.side;
    this.side = -side;
    // if deleting like, outer close-brace of [(1+2)+3} where inner open-paren
    if (this.oppBrack(opts, this.ends[L].ends[this.side], side)) { // is ghost,
      this.closeOpposing(this.ends[L].ends[this.side]); // then become [1+2)+3
      var origEnd = this.ends[L].ends[side];
      this.unwrap();
      if (origEnd.siblingCreated) origEnd.siblingCreated(cursor.options, side);
      sib ? cursor.insDirOf(-side, sib) : cursor.insAtDirEnd(side, parent);
    }
    else { // if deleting like, inner close-brace of ([1+2}+3) where outer
      if (this.oppBrack(opts, this.parent.parent, side)) { // open-paren is
        this.parent.parent.closeOpposing(this); // ghost, then become [1+2+3)
        this.parent.parent.unwrap();
      } // else if deleting outward from a solid pair, unwrap
      else if (outward && wasSolid) {
        this.unwrap();
        sib ? cursor.insDirOf(-side, sib) : cursor.insAtDirEnd(side, parent);
        return;
      }
      else { // else deleting just one of a pair of brackets, become one-sided
        this.sides[side] = { ch: OPP_BRACKS[this.sides[this.side].ch],
                             ctrlSeq: OPP_BRACKS[this.sides[this.side].ctrlSeq] };
        this.delimjQs.removeClass('mq-ghost')
          .eq(side === L ? 0 : 1).addClass('mq-ghost').html(this.sides[side].ch);
      }
      if (sib) { // auto-expand so ghost is at far end
        var origEnd = this.ends[L].ends[side];
        Fragment(sib, farEnd, -side).disown()
          .withDirAdopt(-side, this.ends[L], origEnd, 0)
          .jQ.insAtDirEnd(side, this.ends[L].jQ.removeClass('mq-empty'));
        if (origEnd.siblingCreated) origEnd.siblingCreated(cursor.options, side);
        cursor.insDirOf(-side, sib);
      } // didn't auto-expand, cursor goes just outside or just inside parens
      else (outward ? cursor.insDirOf(side, this)
                    : cursor.insAtDirEnd(side, this.ends[L]));
    }
  };
  _.deleteTowards = function(dir, cursor) {
    this.deleteSide(-dir, false, cursor);
  };
  _.finalizeTree = function() {
    this.ends[L].deleteOutOf = function(dir, cursor) {
      this.parent.deleteSide(dir, true, cursor);
    };
    // FIXME HACK: after initial creation/insertion, finalizeTree would only be
    // called if the paren is selected and replaced, e.g. by LiveFraction
    this.finalizeTree = this.intentionalBlur = function() {
      this.delimjQs.eq(this.side === L ? 1 : 0).removeClass('mq-ghost');
      this.side = 0;
    };
  };
  _.siblingCreated = function(opts, dir) { // if something typed between ghost and far
    if (dir === -this.side) this.finalizeTree(); // end of its block, solidify
  };
});

var OPP_BRACKS = {
  '(': ')',
  ')': '(',
  '[': ']',
  ']': '[',
  '{': '}',
  '}': '{',
  '\\{': '\\}',
  '\\}': '\\{',
  '&lang;': '&rang;',
  '&rang;': '&lang;',
  '\\langle ': '\\rangle ',
  '\\rangle ': '\\langle ',
  '|': '|'
};

function bindCharBracketPair(open, ctrlSeq) {
  var ctrlSeq = ctrlSeq || open, close = OPP_BRACKS[open], end = OPP_BRACKS[ctrlSeq];
  CharCmds[open] = bind(Bracket, L, open, close, ctrlSeq, end);
  CharCmds[close] = bind(Bracket, R, open, close, ctrlSeq, end);
}
bindCharBracketPair('(');
bindCharBracketPair('[');
bindCharBracketPair('{', '\\{');
LatexCmds.langle = bind(Bracket, L, '&lang;', '&rang;', '\\langle ', '\\rangle ');
LatexCmds.rangle = bind(Bracket, R, '&lang;', '&rang;', '\\langle ', '\\rangle ');
CharCmds['|'] = bind(Bracket, L, '|', '|', '|', '|');

LatexCmds.left = P(MathCommand, function(_) {
  _.parser = function() {
    var regex = Parser.regex;
    var string = Parser.string;
    var succeed = Parser.succeed;
    var optWhitespace = Parser.optWhitespace;

    return optWhitespace.then(regex(/^(?:[([|]|\\\{)/))
      .then(function(ctrlSeq) { // TODO: \langle, \rangle
        var open = (ctrlSeq.charAt(0) === '\\' ? ctrlSeq.slice(1) : ctrlSeq);
        return latexMathParser.then(function (block) {
          return string('\\right').skip(optWhitespace)
            .then(regex(/^(?:[\])|]|\\\})/)).map(function(end) {
              var close = (end.charAt(0) === '\\' ? end.slice(1) : end);
              var cmd = Bracket(0, open, close, ctrlSeq, end);
              cmd.blocks = [ block ];
              block.adopt(cmd, 0, 0);
              return cmd;
            })
          ;
        });
      })
    ;
  };
});

LatexCmds.right = P(MathCommand, function(_) {
  _.parser = function() {
    return Parser.fail('unmatched \\right');
  };
});

var Binomial =
LatexCmds.binom =
LatexCmds.binomial = P(P(MathCommand, DelimsMixin), function(_, super_) {
  _.ctrlSeq = '\\binom';
  _.htmlTemplate =
      '<span class="mq-non-leaf">'
    +   '<span class="mq-paren mq-scaled">(</span>'
    +   '<span class="mq-non-leaf">'
    +     '<span class="mq-array mq-non-leaf">'
    +       '<span>&0</span>'
    +       '<span>&1</span>'
    +     '</span>'
    +   '</span>'
    +   '<span class="mq-paren mq-scaled">)</span>'
    + '</span>'
  ;
  _.textTemplate = ['choose(',',',')'];
});

var Choose =
LatexCmds.choose = P(Binomial, function(_) {
  _.createLeftOf = LiveFraction.prototype.createLeftOf;
});

LatexCmds.editable = // backcompat with before cfd3620 on #233
LatexCmds.MathQuillMathField = P(MathCommand, function(_, super_) {
  _.ctrlSeq = '\\MathQuillMathField';
  _.htmlTemplate =
      '<span class="mq-editable-field">'
    +   '<span class="mq-root-block">&0</span>'
    + '</span>'
  ;
  _.parser = function() {
    var self = this,
      string = Parser.string, regex = Parser.regex, succeed = Parser.succeed;
    return string('[').then(regex(/^[a-z][a-z0-9]*/i)).skip(string(']'))
      .map(function(name) { self.name = name; }).or(succeed())
      .then(super_.parser.call(self));
  };
  _.finalizeTree = function() {
    var ctrlr = Controller(this.ends[L], this.jQ, Options());
    ctrlr.KIND_OF_MQ = 'MathField';
    ctrlr.editable = true;
    ctrlr.createTextarea();
    ctrlr.editablesTextareaEvents();
    ctrlr.cursor.insAtRightEnd(ctrlr.root);
    RootBlockMixin(ctrlr.root);
  };
  _.registerInnerField = function(innerFields, MathField) {
    innerFields.push(innerFields[this.name] = MathField(this.ends[L].controller));
  };
  _.latex = function(){ return this.ends[L].latex(); };
  _.text = function(){ return this.ends[L].text(); };
});

// Embed arbitrary things
// Probably the closest DOM analogue would be an iframe?
// From MathQuill's perspective, it's a Symbol, it can be
// anywhere and the cursor can go around it but never in it.
// Create by calling public API method .dropEmbedded(),
// or by calling the global public API method .registerEmbed()
// and rendering LaTeX like \embed{registeredName} (see test).
var Embed = LatexCmds.embed = P(Symbol, function(_, super_) {
  _.setOptions = function(options) {
    function noop () { return ""; }
    this.text = options.text || noop;
    this.htmlTemplate = options.htmlString || "";
    this.latex = options.latex || noop;
    return this;
  };
  _.parser = function() {
    var self = this;
      string = Parser.string; var regex = Parser.regex; var succeed = Parser.succeed;
    return string('{').then(regex(/^[a-z][a-z0-9]*/i)).skip(string('}'))
      .then(function(name) {
        // the chars allowed in the optional data block are arbitrary other than
        // excluding curly braces and square brackets (which'd be too confusing)
        return string('[').then(regex(/^[-\w\s]*/)).skip(string(']'))
          .or(succeed()).map(function(data) {
            return self.setOptions(EMBEDS[name](data));
          })
        ;
      })
    ;
  };
});
var MQ1 = getInterface(1);
for (var key in MQ1) (function(key, val) {
  if (typeof val === 'function') {
    MathQuill[key] = function() {
      insistOnInterVer();
      return val.apply(this, arguments);
    };
    MathQuill[key].prototype = val.prototype;
  }
  else MathQuill[key] = val;
}(key, MQ1[key]));

}());

var temml=function(){"use strict";class e{constructor(t,r){let n,s=" "+t;const o=r&&r.loc;if(o&&o.start<=o.end){const e=o.lexer.input;n=o.start;const t=o.end;n===e.length?s+=" at end of input: ":s+=" at position "+(n+1)+": ";const r=e.slice(n,t).replace(/[^]/g,"$&");let a,i;a=n>15?""+e.slice(n-15,n):e.slice(0,n),i=t+15<e.length?e.slice(t,t+15)+"":e.slice(t),s+=a+r+i}const a=new Error(s);return a.name="ParseError",a.__proto__=e.prototype,a.position=n,a}}e.prototype.__proto__=Error.prototype;const t=/([A-Z])/g,r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},n=/[&><"']/g;const s=function(e){return"ordgroup"===e.type||"color"===e.type?1===e.body.length?s(e.body[0]):e:"font"===e.type?s(e.body):e};var o={deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(n,(e=>r[e]))},hyphenate:function(e){return e.replace(t,"-$1").toLowerCase()},getBaseElem:s,isCharacterBox:function(e){const t=s(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){const t=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return null!=t?t[1]:"_relative"},round:function(e){return+e.toFixed(4)}};class a{constructor(e){e=e||{},this.displayMode=o.deflt(e.displayMode,!1),this.annotate=o.deflt(e.annotate,!1),this.leqno=o.deflt(e.leqno,!1),this.throwOnError=o.deflt(e.throwOnError,!1),this.errorColor=o.deflt(e.errorColor,"#b22222"),this.macros=e.macros||{},this.wrap=o.deflt(e.wrap,"tex"),this.xml=o.deflt(e.xml,!1),this.colorIsTextColor=o.deflt(e.colorIsTextColor,!1),this.strict=o.deflt(e.strict,!1),this.trust=o.deflt(e.trust,!1),this.maxSize=void 0===e.maxSize?[1/0,1/0]:Array.isArray(e.maxSize)?e.maxSize:[1/0,1/0],this.maxExpand=Math.max(0,o.deflt(e.maxExpand,1e3))}isTrusted(e){e.url&&!e.protocol&&(e.protocol=o.protocolFromUrl(e.url));const t="function"==typeof this.trust?this.trust(e):this.trust;return Boolean(t)}}const i={},l={};function c({type:e,names:t,props:r,handler:n,mathmlBuilder:s}){const o={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:n};for(let e=0;e<t.length;++e)i[t[e]]=o;e&&s&&(l[e]=s)}function m({type:e,mathmlBuilder:t}){c({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},mathmlBuilder:t})}const u=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},p=function(e){return"ordgroup"===e.type?e.body:[e]};class d{constructor(e){this.children=e,this.classes=[],this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){const e=document.createDocumentFragment();for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){let e="";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map((e=>e.toText())).join("")}}const h=function(e){return e.filter((e=>e)).join(" ")},g=function(e,t){this.classes=e||[],this.attributes={},this.style=t||{}},f=function(e){const t=document.createElement(e);t.className=h(this.classes);for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t.style[e]=this.style[e]);for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(let e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},b=function(e){let t=`<${e}`;this.classes.length&&(t+=` class="${o.escape(h(this.classes))}"`);let r="";for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(r+=`${o.hyphenate(e)}:${this.style[e]};`);r&&(t+=` style="${r}"`);for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=` ${e}="${o.escape(this.attributes[e])}"`);t+=">";for(let e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t+=`</${e}>`,t};class y{constructor(e,t,r){g.call(this,e,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}toNode(){return f.call(this,"span")}toMarkup(){return b.call(this,"span")}}class x{constructor(e){this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return o.escape(this.text)}}class w{constructor(e,t,r){this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){const e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(const t in this.style)Object.prototype.hasOwnProperty.call(this.style,t)&&(e.style[t]=this.style[t]);return e}toMarkup(){let e=`<img src='${this.src}' alt='${this.alt}'`,t="";for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t+=`${o.hyphenate(e)}:${this.style[e]};`);return t&&(e+=` style="${o.escape(t)}"`),e+=">",e}}class k{constructor(e,t,r,n){this.type=e,this.attributes={},this.children=t||[],this.classes=r||[],this.style=n||{}}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){const e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=h(this.classes));for(const t in this.style)Object.prototype.hasOwnProperty.call(this.style,t)&&(e.style[t]=this.style[t]);for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){let e="<"+this.type;for(const t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=o.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=` class="${o.escape(h(this.classes))}"`);let t="";for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t+=`${o.hyphenate(e)}:${this.style[e]};`);t&&(e+=` style="${t}"`),e+=">";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map((e=>e.toText())).join("")}}class v{constructor(e){this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return o.escape(this.toText())}toText(){return this.text}}const A=e=>{let t;return 1===e.length&&"mrow"===e[0].type?(t=e.pop(),t.type="mstyle"):t=new k("mstyle",e),t};var N={MathNode:k,TextNode:v,newDocumentFragment:function(e){return new d(e)}};const T=e=>{let t=0;if(e.body)for(const r of e.body)t+=T(r);else if("supsub"===e.type)t+=T(e.base),e.sub&&(t+=.7*T(e.sub)),e.sup&&(t+=.7*T(e.sup));else if("mathord"===e.type||"textord"===e.type)for(const r of e.text.split("")){const e=r.codePointAt(0);t+=96<e&&e<123||944<e&&e<970?.56:47<e&&e<58?.5:.92}else t+=1;return t},q={widehat:"^",widecheck:"",widetilde:"~",wideparen:"",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",overparen:"",undergroup:"",underparen:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xrightleftarrows:"",yields:"",yieldsLeft:"",mesomerism:"",longrightharpoonup:"",longleftharpoondown:"",eqrightharpoonup:"",eqleftharpoondown:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},S=function(e){const t=new N.TextNode(q[e.slice(1)]),r=new N.MathNode("mo",[t]);return r.setAttribute("stretchy","true"),r},O=["\\widetilde","\\widehat","\\widecheck","\\utilde"];var B=S,M=e=>{const t=S(e.label);if(O.includes(e.label)){const r=T(e.base);1<r&&r<1.6?t.classes.push("tml-crooked-2"):1.6<=r&&r<2.5?t.classes.push("tml-crooked-3"):2.5<=r&&t.classes.push("tml-crooked-4")}return t};const C={bin:1,close:1,inner:1,open:1,punct:1,rel:1},z={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},E={math:{},text:{}};function I(e,t,r,n,s){E[e][n]={group:t,replace:r},s&&r&&(E[e][r]=E[e][n])}const $="math",L="text",F="accent-token",G="bin",D="close",P="inner",R="mathord",j="op-token",U="open",H="punct",V="rel",_="spacing",W="textord";I($,V,"","\\equiv",!0),I($,V,"","\\prec",!0),I($,V,"","\\succ",!0),I($,V,"","\\sim",!0),I($,V,"","\\perp",!0),I($,V,"","\\preceq",!0),I($,V,"","\\succeq",!0),I($,V,"","\\simeq",!0),I($,V,"","\\backcong",!0),I($,V,"|","\\mid",!0),I($,V,"","\\ll",!0),I($,V,"","\\gg",!0),I($,V,"","\\asymp",!0),I($,V,"","\\parallel"),I($,V,"","\\smile",!0),I($,V,"","\\sqsubseteq",!0),I($,V,"","\\sqsupseteq",!0),I($,V,"","\\doteq",!0),I($,V,"","\\frown",!0),I($,V,"","\\ni",!0),I($,V,"","\\notni",!0),I($,V,"","\\propto",!0),I($,V,"","\\vdash",!0),I($,V,"","\\dashv",!0),I($,V,"","\\owns"),I($,V,"","\\arceq",!0),I($,V,"","\\wedgeq",!0),I($,V,"","\\veeeq",!0),I($,V,"","\\stareq",!0),I($,V,"","\\eqdef",!0),I($,V,"","\\measeq",!0),I($,V,"","\\questeq",!0),I($,V,"","\\ne",!0),I($,V,"","\\neq"),I($,V,"","\\eqeq",!0),I($,V,"","\\eqeqeq",!0),I($,V,"","\\dblcolon",!0),I($,V,"","\\coloneqq",!0),I($,V,"","\\eqqcolon",!0),I($,V,"","\\eqcolon",!0),I($,V,"","\\Coloneqq",!0),I($,H,".","\\ldotp"),I($,H,"","\\cdotp"),I($,W,"#","\\#"),I(L,W,"#","\\#"),I($,W,"&","\\&"),I(L,W,"&","\\&"),I($,W,"","\\aleph",!0),I($,W,"","\\forall",!0),I($,W,"","\\hbar",!0),I($,W,"","\\exists",!0),I($,G,"","\\nabla",!0),I($,W,"","\\flat",!0),I($,W,"","\\ell",!0),I($,W,"","\\natural",!0),I($,W,"","\\Angstrom",!0),I(L,W,"","\\Angstrom",!0),I($,W,"","\\clubsuit",!0),I($,W,"","\\varclubsuit",!0),I($,W,"","\\wp",!0),I($,W,"","\\sharp",!0),I($,W,"","\\diamondsuit",!0),I($,W,"","\\vardiamondsuit",!0),I($,W,"","\\Re",!0),I($,W,"","\\heartsuit",!0),I($,W,"","\\varheartsuit",!0),I($,W,"","\\Im",!0),I($,W,"","\\spadesuit",!0),I($,W,"","\\varspadesuit",!0),I($,W,"","\\female",!0),I($,W,"","\\male",!0),I($,W,"","\\S",!0),I(L,W,"","\\S"),I($,W,"","\\P",!0),I(L,W,"","\\P"),I(L,W,"","\\smiley",!0),I($,W,"","\\smiley",!0),I($,W,"","\\dag"),I(L,W,"","\\dag"),I(L,W,"","\\textdagger"),I($,W,"","\\ddag"),I(L,W,"","\\ddag"),I(L,W,"","\\textdaggerdbl"),I($,D,"","\\rmoustache",!0),I($,U,"","\\lmoustache",!0),I($,D,"","\\rgroup",!0),I($,U,"","\\lgroup",!0),I($,G,"","\\mp",!0),I($,G,"","\\ominus",!0),I($,G,"","\\uplus",!0),I($,G,"","\\sqcap",!0),I($,G,"","\\ast"),I($,G,"","\\sqcup",!0),I($,G,"","\\bigcirc",!0),I($,G,"","\\bullet",!0),I($,G,"","\\ddagger"),I($,G,"","\\wr",!0),I($,G,"","\\amalg"),I($,G,"&","\\And"),I($,G,"","\\sslash",!0),I($,V,"","\\longleftarrow",!0),I($,V,"","\\Leftarrow",!0),I($,V,"","\\Longleftarrow",!0),I($,V,"","\\longrightarrow",!0),I($,V,"","\\Rightarrow",!0),I($,V,"","\\Longrightarrow",!0),I($,V,"","\\leftrightarrow",!0),I($,V,"","\\longleftrightarrow",!0),I($,V,"","\\Leftrightarrow",!0),I($,V,"","\\Longleftrightarrow",!0),I($,V,"","\\mapsfrom",!0),I($,V,"","\\mapsto",!0),I($,V,"","\\longmapsto",!0),I($,V,"","\\nearrow",!0),I($,V,"","\\hookleftarrow",!0),I($,V,"","\\hookrightarrow",!0),I($,V,"","\\searrow",!0),I($,V,"","\\leftharpoonup",!0),I($,V,"","\\rightharpoonup",!0),I($,V,"","\\swarrow",!0),I($,V,"","\\leftharpoondown",!0),I($,V,"","\\rightharpoondown",!0),I($,V,"","\\nwarrow",!0),I($,V,"","\\rightleftharpoons",!0),I($,R,"","\\lightning",!0),I($,R,"","\\QED",!0),I($,R,"","\\permil",!0),I(L,W,"","\\permil"),I($,R,"","\\astrosun",!0),I($,R,"","\\sun",!0),I($,R,"","\\leftmoon",!0),I($,R,"","\\rightmoon",!0),I($,V,"","\\nless",!0),I($,V,"","\\lneq",!0),I($,V,"","\\lneqq",!0),I($,V,"","\\lvertneqq"),I($,V,"","\\lnsim",!0),I($,V,"","\\lnapprox",!0),I($,V,"","\\nprec",!0),I($,V,"","\\npreceq",!0),I($,V,"","\\precnsim",!0),I($,V,"","\\precnapprox",!0),I($,V,"","\\nsim",!0),I($,V,"","\\nmid",!0),I($,V,"","\\nshortmid"),I($,V,"","\\nvdash",!0),I($,V,"","\\nvDash",!0),I($,V,"","\\ntriangleleft"),I($,V,"","\\ntrianglelefteq",!0),I($,V,"","\\nsubset",!0),I($,V,"","\\nsupset",!0),I($,V,"","\\subsetneq",!0),I($,V,"","\\varsubsetneq"),I($,V,"","\\subsetneqq",!0),I($,V,"","\\varsubsetneqq"),I($,V,"","\\ngtr",!0),I($,V,"","\\gneq",!0),I($,V,"","\\gneqq",!0),I($,V,"","\\gvertneqq"),I($,V,"","\\gnsim",!0),I($,V,"","\\gnapprox",!0),I($,V,"","\\nsucc",!0),I($,V,"","\\nsucceq",!0),I($,V,"","\\succnsim",!0),I($,V,"","\\succnapprox",!0),I($,V,"","\\ncong",!0),I($,V,"","\\nparallel",!0),I($,V,"","\\nshortparallel"),I($,V,"","\\nVDash",!0),I($,V,"","\\ntriangleright"),I($,V,"","\\ntrianglerighteq",!0),I($,V,"","\\supsetneq",!0),I($,V,"","\\varsupsetneq"),I($,V,"","\\supsetneqq",!0),I($,V,"","\\varsupsetneqq"),I($,V,"","\\nVdash",!0),I($,V,"","\\precneqq",!0),I($,V,"","\\succneqq",!0),I($,G,"","\\unlhd"),I($,G,"","\\unrhd"),I($,V,"","\\nleftarrow",!0),I($,V,"","\\nrightarrow",!0),I($,V,"","\\nLeftarrow",!0),I($,V,"","\\nRightarrow",!0),I($,V,"","\\nleftrightarrow",!0),I($,V,"","\\nLeftrightarrow",!0),I($,V,"","\\vartriangle"),I($,W,"","\\hslash"),I($,W,"","\\triangledown"),I($,W,"","\\lozenge"),I($,W,"","\\circledS"),I($,W,"","\\circledR",!0),I(L,W,"","\\circledR"),I(L,W,"","\\textregistered"),I($,W,"","\\measuredangle",!0),I($,W,"","\\nexists"),I($,W,"","\\mho"),I($,W,"","\\Finv",!0),I($,W,"","\\Game",!0),I($,W,"","\\backprime"),I($,W,"","\\backdprime"),I($,W,"","\\backtrprime"),I($,W,"","\\blacktriangle"),I($,W,"","\\blacktriangledown"),I($,W,"","\\blacksquare"),I($,W,"","\\blacklozenge"),I($,W,"","\\bigstar"),I($,W,"","\\sphericalangle",!0),I($,W,"","\\complement",!0),I($,W,"","\\eth",!0),I(L,W,"",""),I($,W,"","\\diagup"),I($,W,"","\\diagdown"),I($,W,"","\\square"),I($,W,"","\\Box"),I($,W,"","\\Diamond"),I($,W,"","\\yen",!0),I(L,W,"","\\yen",!0),I($,W,"","\\checkmark",!0),I(L,W,"","\\checkmark"),I($,W,"","\\ballotx",!0),I(L,W,"","\\ballotx"),I(L,W,"","\\textbullet"),I($,W,"","\\beth",!0),I($,W,"","\\daleth",!0),I($,W,"","\\gimel",!0),I($,W,"","\\digamma",!0),I($,W,"","\\varkappa"),I($,U,"","\\ulcorner",!0),I($,D,"","\\urcorner",!0),I($,U,"","\\llcorner",!0),I($,D,"","\\lrcorner",!0),I($,V,"","\\leqq",!0),I($,V,"","\\leqslant",!0),I($,V,"","\\eqslantless",!0),I($,V,"","\\lesssim",!0),I($,V,"","\\lessapprox",!0),I($,V,"","\\approxeq",!0),I($,G,"","\\lessdot"),I($,V,"","\\lll",!0),I($,V,"","\\lessgtr",!0),I($,V,"","\\lesseqgtr",!0),I($,V,"","\\lesseqqgtr",!0),I($,V,"","\\doteqdot"),I($,V,"","\\risingdotseq",!0),I($,V,"","\\fallingdotseq",!0),I($,V,"","\\backsim",!0),I($,V,"","\\backsimeq",!0),I($,V,"","\\subseteqq",!0),I($,V,"","\\Subset",!0),I($,V,"","\\sqsubset",!0),I($,V,"","\\preccurlyeq",!0),I($,V,"","\\curlyeqprec",!0),I($,V,"","\\precsim",!0),I($,V,"","\\precapprox",!0),I($,V,"","\\vartriangleleft"),I($,V,"","\\trianglelefteq"),I($,V,"","\\vDash",!0),I($,V,"","\\VDash",!0),I($,V,"","\\Vvdash",!0),I($,V,"","\\smallsmile"),I($,V,"","\\smallfrown"),I($,V,"","\\bumpeq",!0),I($,V,"","\\Bumpeq",!0),I($,V,"","\\geqq",!0),I($,V,"","\\geqslant",!0),I($,V,"","\\eqslantgtr",!0),I($,V,"","\\gtrsim",!0),I($,V,"","\\gtrapprox",!0),I($,G,"","\\gtrdot"),I($,V,"","\\ggg",!0),I($,V,"","\\gtrless",!0),I($,V,"","\\gtreqless",!0),I($,V,"","\\gtreqqless",!0),I($,V,"","\\eqcirc",!0),I($,V,"","\\circeq",!0),I($,V,"","\\triangleq",!0),I($,V,"","\\thicksim"),I($,V,"","\\thickapprox"),I($,V,"","\\supseteqq",!0),I($,V,"","\\Supset",!0),I($,V,"","\\sqsupset",!0),I($,V,"","\\succcurlyeq",!0),I($,V,"","\\curlyeqsucc",!0),I($,V,"","\\succsim",!0),I($,V,"","\\succapprox",!0),I($,V,"","\\vartriangleright"),I($,V,"","\\trianglerighteq"),I($,V,"","\\Vdash",!0),I($,V,"","\\shortmid"),I($,V,"","\\shortparallel"),I($,V,"","\\between",!0),I($,V,"","\\pitchfork",!0),I($,V,"","\\varpropto"),I($,V,"","\\blacktriangleleft"),I($,V,"","\\therefore",!0),I($,V,"","\\backepsilon"),I($,V,"","\\blacktriangleright"),I($,V,"","\\because",!0),I($,V,"","\\llless"),I($,V,"","\\gggtr"),I($,G,"","\\lhd"),I($,G,"","\\rhd"),I($,V,"","\\eqsim",!0),I($,V,"","\\Doteq",!0),I($,V,"","\\strictif",!0),I($,V,"","\\strictfi",!0),I($,G,"","\\dotplus",!0),I($,G,"","\\smallsetminus"),I($,G,"","\\Cap",!0),I($,G,"","\\Cup",!0),I($,G,"","\\doublebarwedge",!0),I($,G,"","\\boxminus",!0),I($,G,"","\\boxplus",!0),I($,G,"","\\divideontimes",!0),I($,G,"","\\ltimes",!0),I($,G,"","\\rtimes",!0),I($,G,"","\\leftthreetimes",!0),I($,G,"","\\rightthreetimes",!0),I($,G,"","\\curlywedge",!0),I($,G,"","\\curlyvee",!0),I($,G,"","\\circleddash",!0),I($,G,"","\\circledast",!0),I($,G,"","\\intercal",!0),I($,G,"","\\doublecap"),I($,G,"","\\doublecup"),I($,G,"","\\boxtimes",!0),I($,G,"","\\bowtie",!0),I($,G,"","\\Join"),I($,G,"","\\leftouterjoin",!0),I($,G,"","\\rightouterjoin",!0),I($,G,"","\\fullouterjoin",!0),I($,V,"","\\dashrightarrow",!0),I($,V,"","\\dashleftarrow",!0),I($,V,"","\\leftleftarrows",!0),I($,V,"","\\leftrightarrows",!0),I($,V,"","\\Lleftarrow",!0),I($,V,"","\\twoheadleftarrow",!0),I($,V,"","\\leftarrowtail",!0),I($,V,"","\\looparrowleft",!0),I($,V,"","\\leftrightharpoons",!0),I($,V,"","\\curvearrowleft",!0),I($,V,"","\\circlearrowleft",!0),I($,V,"","\\Lsh",!0),I($,V,"","\\upuparrows",!0),I($,V,"","\\upharpoonleft",!0),I($,V,"","\\downharpoonleft",!0),I($,V,"","\\origof",!0),I($,V,"","\\imageof",!0),I($,V,"","\\multimap",!0),I($,V,"","\\leftrightsquigarrow",!0),I($,V,"","\\rightrightarrows",!0),I($,V,"","\\rightleftarrows",!0),I($,V,"","\\twoheadrightarrow",!0),I($,V,"","\\rightarrowtail",!0),I($,V,"","\\looparrowright",!0),I($,V,"","\\curvearrowright",!0),I($,V,"","\\circlearrowright",!0),I($,V,"","\\Rsh",!0),I($,V,"","\\downdownarrows",!0),I($,V,"","\\upharpoonright",!0),I($,V,"","\\downharpoonright",!0),I($,V,"","\\rightsquigarrow",!0),I($,V,"","\\leadsto"),I($,V,"","\\Rrightarrow",!0),I($,V,"","\\restriction"),I($,W,"","`"),I($,W,"$","\\$"),I(L,W,"$","\\$"),I(L,W,"$","\\textdollar"),I($,W,"","\\cent"),I(L,W,"","\\cent"),I($,W,"%","\\%"),I(L,W,"%","\\%"),I($,W,"_","\\_"),I(L,W,"_","\\_"),I(L,W,"_","\\textunderscore"),I(L,W,"","\\textvisiblespace",!0),I($,W,"","\\angle",!0),I($,W,"","\\infty",!0),I($,W,"","\\prime"),I($,W,"","\\dprime"),I($,W,"","\\trprime"),I($,W,"","\\qprime"),I($,W,"","\\triangle"),I(L,W,"","\\Alpha",!0),I(L,W,"","\\Beta",!0),I(L,W,"","\\Gamma",!0),I(L,W,"","\\Delta",!0),I(L,W,"","\\Epsilon",!0),I(L,W,"","\\Zeta",!0),I(L,W,"","\\Eta",!0),I(L,W,"","\\Theta",!0),I(L,W,"","\\Iota",!0),I(L,W,"","\\Kappa",!0),I(L,W,"","\\Lambda",!0),I(L,W,"","\\Mu",!0),I(L,W,"","\\Nu",!0),I(L,W,"","\\Xi",!0),I(L,W,"","\\Omicron",!0),I(L,W,"","\\Pi",!0),I(L,W,"","\\Rho",!0),I(L,W,"","\\Sigma",!0),I(L,W,"","\\Tau",!0),I(L,W,"","\\Upsilon",!0),I(L,W,"","\\Phi",!0),I(L,W,"","\\Chi",!0),I(L,W,"","\\Psi",!0),I(L,W,"","\\Omega",!0),I($,R,"","\\Alpha",!0),I($,R,"","\\Beta",!0),I($,R,"","\\Gamma",!0),I($,R,"","\\Delta",!0),I($,R,"","\\Epsilon",!0),I($,R,"","\\Zeta",!0),I($,R,"","\\Eta",!0),I($,R,"","\\Theta",!0),I($,R,"","\\Iota",!0),I($,R,"","\\Kappa",!0),I($,R,"","\\Lambda",!0),I($,R,"","\\Mu",!0),I($,R,"","\\Nu",!0),I($,R,"","\\Xi",!0),I($,R,"","\\Omicron",!0),I($,R,"","\\Pi",!0),I($,R,"","\\Rho",!0),I($,R,"","\\Sigma",!0),I($,R,"","\\Tau",!0),I($,R,"","\\Upsilon",!0),I($,R,"","\\Phi",!0),I($,R,"","\\Chi",!0),I($,R,"","\\Psi",!0),I($,R,"","\\Omega",!0),I($,U,"","\\neg",!0),I($,U,"","\\lnot"),I($,W,"","\\top"),I($,W,"","\\bot"),I($,W,"","\\emptyset"),I($,W,"","\\varnothing"),I($,R,"","\\alpha",!0),I($,R,"","\\beta",!0),I($,R,"","\\gamma",!0),I($,R,"","\\delta",!0),I($,R,"","\\epsilon",!0),I($,R,"","\\zeta",!0),I($,R,"","\\eta",!0),I($,R,"","\\theta",!0),I($,R,"","\\iota",!0),I($,R,"","\\kappa",!0),I($,R,"","\\lambda",!0),I($,R,"","\\mu",!0),I($,R,"","\\nu",!0),I($,R,"","\\xi",!0),I($,R,"","\\omicron",!0),I($,R,"","\\pi",!0),I($,R,"","\\rho",!0),I($,R,"","\\sigma",!0),I($,R,"","\\tau",!0),I($,R,"","\\upsilon",!0),I($,R,"","\\phi",!0),I($,R,"","\\chi",!0),I($,R,"","\\psi",!0),I($,R,"","\\omega",!0),I($,R,"","\\varepsilon",!0),I($,R,"","\\vartheta",!0),I($,R,"","\\varpi",!0),I($,R,"","\\varrho",!0),I($,R,"","\\varsigma",!0),I($,R,"","\\varphi",!0),I($,R,"","\\Coppa",!0),I($,R,"","\\coppa",!0),I($,R,"","\\varcoppa",!0),I($,R,"","\\Koppa",!0),I($,R,"","\\koppa",!0),I($,R,"","\\Sampi",!0),I($,R,"","\\sampi",!0),I($,R,"","\\Stigma",!0),I($,R,"","\\stigma",!0),I($,R,"","\\Bot"),I($,G,"","",!0),I($,G,"+","+"),I($,G,"*","*"),I($,G,"","/",!0),I($,G,"",""),I($,G,"","-",!0),I($,G,"","\\cdot",!0),I($,G,"","\\circ",!0),I($,G,"","\\div",!0),I($,G,"","\\pm",!0),I($,G,"","\\times",!0),I($,G,"","\\cap",!0),I($,G,"","\\cup",!0),I($,G,"","\\setminus",!0),I($,G,"","\\land"),I($,G,"","\\lor"),I($,G,"","\\wedge",!0),I($,G,"","\\vee",!0),I($,U,"","\\llbracket",!0),I($,D,"","\\rrbracket",!0),I($,U,"","\\langle",!0),I($,U,"","\\lAngle",!0),I($,U,"","\\llangle",!0),I($,U,"|","\\lvert"),I($,U,"","\\lVert"),I($,W,"!","\\oc"),I($,W,"?","\\wn"),I($,W,"","\\shpos"),I($,W,"","\\shift"),I($,W,"","\\shneg"),I($,D,"?","?"),I($,D,"!","!"),I($,D,"",""),I($,D,"","\\rangle",!0),I($,D,"","\\rAngle",!0),I($,D,"","\\rrangle",!0),I($,D,"|","\\rvert"),I($,D,"","\\rVert"),I($,U,"","\\lBrace",!0),I($,D,"","\\rBrace",!0),I($,V,"=","\\equal",!0),I($,V,":",":"),I($,V,"","\\approx",!0),I($,V,"","\\cong",!0),I($,V,"","\\ge"),I($,V,"","\\geq",!0),I($,V,"","\\gets"),I($,V,">","\\gt",!0),I($,V,"","\\in",!0),I($,V,"","\\notin",!0),I($,V,"","\\@not"),I($,V,"","\\subset",!0),I($,V,"","\\supset",!0),I($,V,"","\\subseteq",!0),I($,V,"","\\supseteq",!0),I($,V,"","\\nsubseteq",!0),I($,V,"","\\nsubseteqq"),I($,V,"","\\nsupseteq",!0),I($,V,"","\\nsupseteqq"),I($,V,"","\\models"),I($,V,"","\\leftarrow",!0),I($,V,"","\\le"),I($,V,"","\\leq",!0),I($,V,"<","\\lt",!0),I($,V,"","\\rightarrow",!0),I($,V,"","\\to"),I($,V,"","\\ngeq",!0),I($,V,"","\\ngeqq"),I($,V,"","\\ngeqslant"),I($,V,"","\\nleq",!0),I($,V,"","\\nleqq"),I($,V,"","\\nleqslant"),I($,V,"","\\Perp",!0),I($,_,"","\\ "),I($,_,"","\\space"),I($,_,"","\\nobreakspace"),I(L,_,"","\\ "),I(L,_,""," "),I(L,_,"","\\space"),I(L,_,"","\\nobreakspace"),I($,_,null,"\\nobreak"),I($,_,null,"\\allowbreak"),I($,H,",",","),I(L,H,":",":"),I($,H,";",";"),I($,G,"","\\barwedge",!0),I($,G,"","\\veebar",!0),I($,G,"","\\odot",!0),I($,G,"","\\oplus"),I($,G,"","\\otimes",!0),I($,W,"","\\partial",!0),I($,G,"","\\oslash",!0),I($,G,"","\\circledcirc",!0),I($,G,"","\\boxdot",!0),I($,G,"","\\bigtriangleup"),I($,G,"","\\bigtriangledown"),I($,G,"","\\dagger"),I($,G,"","\\diamond"),I($,G,"","\\star"),I($,G,"","\\triangleleft"),I($,G,"","\\triangleright"),I($,U,"{","\\{"),I(L,W,"{","\\{"),I(L,W,"{","\\textbraceleft"),I($,D,"}","\\}"),I(L,W,"}","\\}"),I(L,W,"}","\\textbraceright"),I($,U,"{","\\lbrace"),I($,D,"}","\\rbrace"),I($,U,"[","\\lbrack",!0),I(L,W,"[","\\lbrack",!0),I($,D,"]","\\rbrack",!0),I(L,W,"]","\\rbrack",!0),I($,U,"(","\\lparen",!0),I($,D,")","\\rparen",!0),I($,U,"","\\llparenthesis",!0),I($,D,"","\\rrparenthesis",!0),I(L,W,"<","\\textless",!0),I(L,W,">","\\textgreater",!0),I($,U,"","\\lfloor",!0),I($,D,"","\\rfloor",!0),I($,U,"","\\lceil",!0),I($,D,"","\\rceil",!0),I($,W,"\\","\\backslash"),I($,W,"|","|"),I($,W,"|","\\vert"),I(L,W,"|","\\textbar",!0),I($,W,"","\\|"),I($,W,"","\\Vert"),I(L,W,"","\\textbardbl"),I(L,W,"~","\\textasciitilde"),I(L,W,"\\","\\textbackslash"),I(L,W,"^","\\textasciicircum"),I($,V,"","\\uparrow",!0),I($,V,"","\\Uparrow",!0),I($,V,"","\\downarrow",!0),I($,V,"","\\Downarrow",!0),I($,V,"","\\updownarrow",!0),I($,V,"","\\Updownarrow",!0),I($,j,"","\\coprod"),I($,j,"","\\bigvee"),I($,j,"","\\bigwedge"),I($,j,"","\\biguplus"),I($,j,"","\\bigcap"),I($,j,"","\\bigcup"),I($,j,"","\\int"),I($,j,"","\\intop"),I($,j,"","\\iint"),I($,j,"","\\iiint"),I($,j,"","\\prod"),I($,j,"","\\sum"),I($,j,"","\\bigotimes"),I($,j,"","\\bigoplus"),I($,j,"","\\bigodot"),I($,j,"","\\bigtimes"),I($,j,"","\\oint"),I($,j,"","\\oiint"),I($,j,"","\\oiiint"),I($,j,"","\\intclockwise"),I($,j,"","\\varointclockwise"),I($,j,"","\\iiiint"),I($,j,"","\\intbar"),I($,j,"","\\intBar"),I($,j,"","\\fint"),I($,j,"","\\rppolint"),I($,j,"","\\scpolint"),I($,j,"","\\pointint"),I($,j,"","\\sqint"),I($,j,"","\\intlarhk"),I($,j,"","\\intx"),I($,j,"","\\intcap"),I($,j,"","\\intcup"),I($,j,"","\\bigsqcap"),I($,j,"","\\bigsqcup"),I($,j,"","\\smallint"),I(L,P,"","\\textellipsis"),I($,P,"","\\mathellipsis"),I(L,P,"","\\ldots",!0),I($,P,"","\\ldots",!0),I($,P,"","\\iddots",!0),I($,P,"","\\@cdots",!0),I($,P,"","\\ddots",!0),I($,W,"","\\varvdots"),I($,F,"","\\acute"),I($,F,"`","\\grave"),I($,F,"","\\ddot"),I($,F,"","\\dddot"),I($,F,".","\\ddddot"),I($,F,"~","\\tilde"),I($,F,"","\\bar"),I($,F,"","\\breve"),I($,F,"","\\check"),I($,F,"^","\\hat"),I($,F,"","\\vec"),I($,F,"","\\dot"),I($,F,"","\\mathring"),I($,R,"","\\imath",!0),I($,R,"","\\jmath",!0),I($,W,"",""),I($,W,"",""),I(L,W,"","\\i",!0),I(L,W,"","\\j",!0),I(L,W,"","\\ss",!0),I(L,W,"","\\ae",!0),I(L,W,"","\\oe",!0),I(L,W,"","\\o",!0),I($,R,"","\\o",!0),I(L,W,"","\\AE",!0),I(L,W,"","\\OE",!0),I(L,W,"","\\O",!0),I($,R,"","\\O",!0),I(L,F,"","\\'"),I(L,F,"","\\`"),I(L,F,"","\\^"),I(L,F,"","\\~"),I(L,F,"","\\="),I(L,F,"","\\u"),I(L,F,"","\\."),I(L,F,"","\\c"),I(L,F,"","\\r"),I(L,F,"","\\v"),I(L,F,"",'\\"'),I(L,F,"","\\H"),I($,F,"","\\'"),I($,F,"","\\`"),I($,F,"","\\^"),I($,F,"","\\~"),I($,F,"","\\="),I($,F,"","\\u"),I($,F,"","\\."),I($,F,"","\\c"),I($,F,"","\\r"),I($,F,"","\\v"),I($,F,"",'\\"'),I($,F,"","\\H");const X={"--":!0,"---":!0,"``":!0,"''":!0};I(L,W,"","--",!0),I(L,W,"","\\textendash"),I(L,W,"","---",!0),I(L,W,"","\\textemdash"),I(L,W,"","`",!0),I(L,W,"","\\textquoteleft"),I(L,W,"","'",!0),I(L,W,"","\\textquoteright"),I(L,W,"","``",!0),I(L,W,"","\\textquotedblleft"),I(L,W,"","''",!0),I(L,W,"","\\textquotedblright"),I($,W,"","\\degree",!0),I(L,W,"","\\degree"),I(L,W,"","\\textdegree",!0),I($,W,"","\\pounds"),I($,W,"","\\mathsterling",!0),I(L,W,"","\\pounds"),I(L,W,"","\\textsterling",!0),I($,W,"","\\maltese"),I(L,W,"","\\maltese"),I($,W,"","\\euro",!0),I(L,W,"","\\euro",!0),I(L,W,"","\\texteuro"),I($,W,"","\\copyright",!0),I(L,W,"","\\textcopyright"),I($,W,"","\\diameter",!0),I(L,W,"","\\diameter"),I($,W,"","\\varGamma"),I($,W,"","\\varDelta"),I($,W,"","\\varTheta"),I($,W,"","\\varLambda"),I($,W,"","\\varXi"),I($,W,"","\\varPi"),I($,W,"","\\varSigma"),I($,W,"","\\varUpsilon"),I($,W,"","\\varPhi"),I($,W,"","\\varPsi"),I($,W,"","\\varOmega"),I(L,W,"","\\varGamma"),I(L,W,"","\\varDelta"),I(L,W,"","\\varTheta"),I(L,W,"","\\varLambda"),I(L,W,"","\\varXi"),I(L,W,"","\\varPi"),I(L,W,"","\\varSigma"),I(L,W,"","\\varUpsilon"),I(L,W,"","\\varPhi"),I(L,W,"","\\varPsi"),I(L,W,"","\\varOmega");const Z='0123456789/@."';for(let e=0;e<14;e++){const t=Z.charAt(e);I($,W,t,t)}const Y='0123456789!@*()-=+";:?/.,';for(let e=0;e<25;e++){const t=Y.charAt(e);I(L,W,t,t)}const K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let e=0;e<52;e++){const t=K.charAt(e);I($,R,t,t),I(L,W,t,t)}const J="";for(let e=0;e<30;e++){const t=J.charAt(e);I($,R,t,t),I(L,W,t,t)}let Q="";for(let e=0;e<52;e++){Q=String.fromCharCode(55349,56320+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56372+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56424+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56580+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56736+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56788+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56840+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56944+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,56632+e),I($,R,Q,Q),I(L,W,Q,Q);const t=K.charAt(e);Q=String.fromCharCode(55349,56476+e),I($,R,t,Q),I(L,W,t,Q)}for(let e=0;e<10;e++)Q=String.fromCharCode(55349,57294+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,57314+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,57324+e),I($,R,Q,Q),I(L,W,Q,Q),Q=String.fromCharCode(55349,57334+e),I($,R,Q,Q),I(L,W,Q,Q);const ee="([{",te=")]}";const re=function(e,t,r){return!E[t][e]||!E[t][e].replace||55349===e.charCodeAt(0)||Object.prototype.hasOwnProperty.call(X,e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.slice(4,6)||r.font&&"tt"===r.font.slice(4,6))||(e=E[t][e].replace),new N.TextNode(e)},ne=e=>{if("mrow"!==e.type&&"mstyle"!==e.type)return e;if(0===e.children.length)return e;if(!e.children[0].attributes||"mtext"!==e.children[0].type)return e;const t=e.children[0].attributes.mathvariant||"",r=new N.MathNode("mtext",[new N.TextNode(e.children[0].children[0].text)]);for(let n=1;n<e.children.length;n++){const s=e.children[n].attributes.mathvariant||"";if("mrow"===e.children[n].type){const s=e.children[n];for(let n=0;n<s.children.length;n++){if((s.children[n].attributes.mathvariant||"")!==t||"mtext"!==s.children[n].type)return e;r.children[0].text+=s.children[n].children[0].text}}else{if(s!==t||"mtext"!==e.children[n].type)return e;r.children[0].text+=e.children[n].children[0].text}}" "===r.children[0].text.charAt(0)&&(r.children[0].text=""+r.children[0].text.slice(1));const n=r.children[0].text.length;n>0&&" "===r.children[0].text.charAt(n-1)&&(r.children[0].text=r.children[0].text.slice(0,-1)+"");for(const[t,n]of Object.entries(e.attributes))r.attributes[t]=n;return r},se=/^[0-9]$/,oe=function(e,t=!1){if(!(1!==e.length||e[0]instanceof d))return e[0];if(!t){e[0]instanceof k&&"mo"===e[0].type&&!e[0].attributes.fence&&(e[0].attributes.lspace="0em",e[0].attributes.rspace="0em");const t=e.length-1;e[t]instanceof k&&"mo"===e[t].type&&!e[t].attributes.fence&&(e[t].attributes.lspace="0em",e[t].attributes.rspace="0em")}return new N.MathNode("mrow",e)},ae=e=>"atom"===e.type&&"rel"===e.family||"mclass"===e.type&&"mrel"===e.mclass,ie=function(e,t,r=!1){if(!r&&1===e.length){const r=ce(e[0],t);return r instanceof k&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}(e=>{if(e.length<2)return;const t=[];let r=!1;for(let n=0;n<e.length;n++){const s=e[n];"textord"===s.type&&se.test(s.text)?(r||t.push({start:n}),r=!0):(r&&(t[t.length-1].end=n-1),r=!1)}r&&(t[t.length-1].end=e.length-1);for(let r=t.length-1;r>0;r--)t[r-1].end===t[r].start-2&&("atom"===(n=e[t[r].start-1]).type&&","===n.text||"textord"===n.type&&"."===n.text)&&(t[r-1].end=t[r].end,t.splice(r,1));var n;for(let r=t.length-1;r>=0;r--){for(let n=t[r].start+1;n<=t[r].end;n++)e[t[r].start].text+=e[n].text;if(e.splice(t[r].start+1,t[r].end-t[r].start),e.length>t[r].start+1){const n=e[t[r].start+1];"supsub"===n.type&&n.base&&"textord"===n.base.type&&se.test(n.base.text)&&(n.base.text=e[t[r].start].text+n.base.text,e.splice(t[r].start,1))}}})(e);const n=[];for(let r=0;r<e.length;r++){const s=ce(e[r],t);r<e.length-1&&ae(e[r])&&ae(e[r+1])&&s.setAttribute("rspace","0em"),r>0&&ae(e[r])&&ae(e[r-1])&&s.setAttribute("lspace","0em"),n.push(s)}return n},le=function(e,t,r=!1){return oe(ie(e,t,r),r)},ce=function(t,r){if(!t)return new N.MathNode("mrow");if(l[t.type]){return l[t.type](t,r)}throw new e("Got group of unknown type: '"+t.type+"'")},me=e=>new N.MathNode("mtd",[],[],{padding:"0",width:"50%"});function ue(e,t,r,n){let s=null;1===e.length&&"tag"===e[0].type&&(s=e[0].tag,e=e[0].body);const o=ie(e,r),a=n.displayMode||n.annotate?"none":n.wrap,i=0===o.length?null:o[0];let l=1===o.length&&null===s&&i instanceof k?o[0]:function(e,t,r){const n=[];let s=[],o=[],a=0,i=0,l=0;for(;i<e.length;){for(;e[i]instanceof d;)e.splice(i,1,...e[i].children);const r=e[i];if(r.attributes&&r.attributes.linebreak&&"newline"===r.attributes.linebreak){o.length>0&&s.push(new N.MathNode("mrow",o)),s.push(r),o=[];const e=new N.MathNode("mtd",s);e.style.textAlign="left",n.push(new N.MathNode("mtr",[e])),s=[],i+=1}else{if(o.push(r),r.type&&"mo"===r.type&&1===r.children.length&&!Object.hasOwn(r.attributes,"movablelimits")){const n=r.children[0].text;if(ee.indexOf(n)>-1)l+=1;else if(te.indexOf(n)>-1)l-=1;else if(0===l&&"="===t&&"="===n){if(a+=1,a>1){o.pop();const e=new N.MathNode("mrow",o);s.push(e),o=[r]}}else if(0===l&&"tex"===t&&""!==n){const t=i<e.length-1?e[i+1]:null;let r=!0;if(!t||"mtext"!==t.type||!t.attributes.linebreak||"nobreak"!==t.attributes.linebreak)for(let t=i+1;t<e.length;t++){const n=e[t];if(!n.type||"mspace"!==n.type||n.attributes.linebreak&&"newline"===n.attributes.linebreak)break;o.push(n),i+=1,n.attributes&&n.attributes.linebreak&&"nobreak"===n.attributes.linebreak&&(r=!1)}if(r){const e=new N.MathNode("mrow",o);s.push(e),o=[]}}}i+=1}}if(o.length>0){const e=new N.MathNode("mrow",o);s.push(e)}if(n.length>0){const e=new N.MathNode("mtd",s);e.style.textAlign="left";const t=new N.MathNode("mtr",[e]);n.push(t);const o=new N.MathNode("mtable",n);return r||(o.setAttribute("columnalign","left"),o.setAttribute("rowspacing","0em")),o}return N.newDocumentFragment(s)}(o,a,n.displayMode);if(s&&(l=((e,t,r,n)=>{t=le(t[0].body,r),(t=ne(t)).classes.push("tml-tag"),e=new N.MathNode("mtd",[e]);const s=[me(),e,me()];s[n?0:2].classes.push(n?"tml-left":"tml-right"),s[n?0:2].children.push(t);const o=new N.MathNode("mtr",s,["tml-tageqn"]),a=new N.MathNode("mtable",[o]);return a.style.width="100%",a.setAttribute("displaystyle","true"),a})(l,s,r,n.leqno)),n.annotate){const e=new N.MathNode("annotation",[new N.TextNode(t)]);e.setAttribute("encoding","application/x-tex"),l=new N.MathNode("semantics",[l,e])}const c=new N.MathNode("math",[l]);return n.xml&&c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n.displayMode&&(c.setAttribute("display","block"),c.style.display="block math",c.classes=["tml-display"]),c}const pe="ABCDEFGHIJKLMNOPQRSTUVWXYZbdfhklt",de=new Set(["\\alpha","\\gamma","\\delta","\\epsilon","\\eta","\\iota","\\kappa","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\chi","\\psi","\\omega","\\imath","\\jmath"]),he=new Set(["\\Gamma","\\Delta","\\Sigma","\\Omega","\\beta","\\delta","\\lambda","\\theta","\\psi"]),ge=(e,t)=>{const r=e.isStretchy?M(e):new N.MathNode("mo",[re(e.label,e.mode)]);if("\\vec"===e.label)r.style.transform="scale(0.75) translate(10%, 30%)";else if(r.style.mathStyle="normal",r.style.mathDepth="0",be.has(e.label)&&o.isCharacterBox(e.base)){let t="";const n=e.base.text;("acegmnopqrsuvwxyz".indexOf(n)>-1||de.has(n))&&(t="tml-xshift"),(pe.indexOf(n)>-1||he.has(n))&&(t="tml-capshift"),t&&r.classes.push(t)}e.isStretchy||r.setAttribute("stretchy","false");return new N.MathNode("\\c"===e.label?"munder":"mover",[ce(e.base,t),r])},fe=new Set(["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"]),be=new Set(["\\acute","\\bar","\\breve","\\check","\\dot","\\ddot","\\grave","\\hat","\\mathring","\\'","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v"]);c({type:"accent",names:["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\overparen","\\widecheck","\\widehat","\\wideparen","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{const r=u(t[0]),n=!fe.has(e.funcName);return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,base:r}},mathmlBuilder:ge}),c({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\c","\\u","\\.",'\\"',"\\r","\\H","\\v"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{const r=u(t[0]),n=e.parser.mode;return"math"===n&&e.parser.settings.strict&&console.log(`Temml parse error: Command ${e.funcName} is invalid in math mode.`),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,base:r}},mathmlBuilder:ge}),c({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underparen","\\utilde"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>{const n=r[0];return{type:"accentUnder",mode:e.mode,label:t,base:n}},mathmlBuilder:(e,t)=>{const r=M(e);r.style["math-depth"]=0;return new N.MathNode("munder",[ce(e.base,t),r])}});const ye={pt:800/803,pc:9600/803,dd:1238/1157*800/803,cc:12.792133216944668,nd:685/642*800/803,nc:1370/107*800/803,sp:1/65536*800/803,mm:25.4/72,cm:2.54/72,in:1/72,px:96/72},xe=["em","ex","mu","pt","mm","cm","in","px","bp","pc","dd","cc","nd","nc","sp"],we=function(e){return"string"!=typeof e&&(e=e.unit),xe.indexOf(e)>-1},ke=e=>[1,.7,.5][Math.max(e-1,0)],ve=function(t,r){let n=t.number;if(r.maxSize[0]<0&&n>0)return{number:0,unit:"em"};const s=t.unit;switch(s){case"mm":case"cm":case"in":case"px":return n*ye[s]>r.maxSize[1]?{number:r.maxSize[1],unit:"pt"}:{number:n,unit:s};case"em":case"ex":return"ex"===s&&(n*=.431),n=Math.min(n/ke(r.level),r.maxSize[0]),{number:o.round(n),unit:"em"};case"bp":return n>r.maxSize[1]&&(n=r.maxSize[1]),{number:n,unit:"pt"};case"pt":case"pc":case"dd":case"cc":case"nd":case"nc":case"sp":return n=Math.min(n*ye[s],r.maxSize[1]),{number:o.round(n),unit:"pt"};case"mu":return n=Math.min(n/18,r.maxSize[0]),{number:o.round(n),unit:"em"};default:throw new e("Invalid unit: '"+s+"'")}},Ae=e=>{const t=new N.MathNode("mspace");return t.setAttribute("width",e+"em"),t},Ne=(e,t=.3,r=0)=>{if(null==e&&0===r)return Ae(t);const n=e?[e]:[];return 0!==t&&n.unshift(Ae(t)),r>0&&n.push(Ae(r)),new N.MathNode("mrow",n)},Te=(e,t)=>Number(e)/ke(t),qe=(e,t,r,n)=>{const s=B(e),o="eq"===e.slice(1,3),a="x"===e.charAt(1)?"1.75":"cd"===e.slice(2,4)?"3.0":o?"1.0":"2.0";s.setAttribute("lspace","0"),s.setAttribute("rspace",o?"0.5em":"0");const i=n.withLevel(n.level<2?2:3),l=Te(a,i.level),c=Te(a,3),m=Ne(null,l.toFixed(4),0),u=Ne(null,c.toFixed(4),0),p=Te(o?0:.3,i.level).toFixed(4);let d,h;const g=t&&t.body&&(t.body.body||t.body.length>0);if(g){let e=ce(t,i);e=Ne(e,p,p),d=new N.MathNode("mover",[e,u])}const f=r&&r.body&&(r.body.body||r.body.length>0);if(f){let e=ce(r,i);e=Ne(e,p,p),h=new N.MathNode("munder",[e,u])}let b;return b=g||f?g&&f?new N.MathNode("munderover",[s,h,d]):g?new N.MathNode("mover",[s,d]):new N.MathNode("munder",[s,h]):new N.MathNode("mover",[s,m]),"3.0"===a&&(b.style.height="1em"),b.setAttribute("accent","false"),b};c({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\yields","\\yieldsLeft","\\mesomerism","\\longrightharpoonup","\\longleftharpoondown","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:({parser:e,funcName:t},r,n)=>({type:"xArrow",mode:e.mode,name:t,body:r[0],below:n[0]}),mathmlBuilder(e,t){const r=[qe(e.name,e.body,e.below,t)];return r.unshift(Ae(.2778)),r.push(Ae(.2778)),new N.MathNode("mrow",r)}});const Se={"\\xtofrom":["\\xrightarrow","\\xleftarrow"],"\\xleftrightharpoons":["\\xleftharpoonup","\\xrightharpoondown"],"\\xrightleftharpoons":["\\xrightharpoonup","\\xleftharpoondown"],"\\yieldsLeftRight":["\\yields","\\yieldsLeft"],"\\equilibrium":["\\longrightharpoonup","\\longleftharpoondown"],"\\equilibriumRight":["\\longrightharpoonup","\\eqleftharpoondown"],"\\equilibriumLeft":["\\eqrightharpoonup","\\longleftharpoondown"]};function Oe(e,t){if(!e||e.type!==t)throw new Error(`Expected node of type ${t}, but got `+(e?`node of type ${e.type}`:String(e)));return e}function Be(e){const t=Me(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?`node of type ${e.type}`:String(e)));return t}function Me(e){return e&&("atom"===e.type||Object.prototype.hasOwnProperty.call(z,e.type))?e:null}c({type:"stackedArrow",names:["\\xtofrom","\\xleftrightharpoons","\\xrightleftharpoons","\\yieldsLeftRight","\\equilibrium","\\equilibriumRight","\\equilibriumLeft"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e,funcName:t},r,n){const s=r[0]?{type:"hphantom",mode:e.mode,body:r[0]}:null,o=n[0]?{type:"hphantom",mode:e.mode,body:n[0]}:null;return{type:"stackedArrow",mode:e.mode,name:t,body:r[0],upperArrowBelow:o,lowerArrowBody:s,below:n[0]}},mathmlBuilder(e,t){const r=Se[e.name][0],n=Se[e.name][1],s=qe(r,e.body,e.upperArrowBelow,t),o=qe(n,e.lowerArrowBody,e.below,t);let a;const i=new N.MathNode("mpadded",[s]);if(i.setAttribute("voffset","0.3em"),i.setAttribute("height","+0.3em"),i.setAttribute("depth","-0.3em"),"\\equilibriumLeft"===e.name){const e=new N.MathNode("mpadded",[o]);e.setAttribute("width","0.5em"),a=new N.MathNode("mpadded",[Ae(.2778),e,i,Ae(.2778)])}else i.setAttribute("width","\\equilibriumRight"===e.name?"0.5em":"0"),a=new N.MathNode("mpadded",[Ae(.2778),i,o,Ae(.2778)]);return a.setAttribute("voffset","-0.18em"),a.setAttribute("height","-0.18em"),a.setAttribute("depth","+0.18em"),a}});const Ce={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},ze=e=>"textord"===e.type&&"@"===e.text;function Ee(e,t,r){const n=Ce[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{const e={type:"atom",text:n,mode:"math",family:"rel"},s={type:"ordgroup",mode:"math",body:[r.callFunction("\\\\cdleft",[t[0]],[]),r.callFunction("\\Big",[e],[]),r.callFunction("\\\\cdright",[t[1]],[])],semisimple:!0};return r.callFunction("\\\\cdparent",[s],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const e={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[e],[])}default:return{type:"textord",text:" ",mode:"math"}}}c({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>({type:"cdlabel",mode:e.mode,side:t.slice(4),label:r[0]}),mathmlBuilder(e,t){let r=new N.MathNode("mrow",[ce(e.label,t)]);return r=new N.MathNode("mpadded",[r]),r.setAttribute("width","0"),"left"===e.side&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new N.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),c({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:({parser:e},t)=>({type:"cdlabelparent",mode:e.mode,fragment:t[0]}),mathmlBuilder:(e,t)=>new N.MathNode("mrow",[ce(e.fragment,t)])}),c({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler({parser:t,token:r},n){const s=Oe(n[0],"ordgroup").body;let o="";for(let e=0;e<s.length;e++){o+=Oe(s[e],"textord").text}const a=parseInt(o);if(isNaN(a))throw new e(`\\@char has non-numeric argument ${o}`,r);return{type:"textord",mode:t.mode,text:String.fromCodePoint(a)}}});const Ie=/^(#[a-f0-9]{3}|#?[a-f0-9]{6})$/i,$e=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i,Le=/^ *\d{1,3} *(?:, *\d{1,3} *){2}$/,Fe=/^ *[10](?:\.\d*)? *(?:, *[10](?:\.\d*)? *){2}$/,Ge=/^[a-f0-9]{6}$/i,De=e=>{let t=e.toString(16);return 1===t.length&&(t="0"+t),t},Pe=JSON.parse('{\n  "Apricot": "#ffb484",\n  "Aquamarine": "#08b4bc",\n  "Bittersweet": "#c84c14",\n  "blue": "#0000FF",\n  "Blue": "#303494",\n  "BlueGreen": "#08b4bc",\n  "BlueViolet": "#503c94",\n  "BrickRed": "#b8341c",\n  "brown": "#BF8040",\n  "Brown": "#802404",\n  "BurntOrange": "#f8941c",\n  "CadetBlue": "#78749c",\n  "CarnationPink": "#f884b4",\n  "Cerulean": "#08a4e4",\n  "CornflowerBlue": "#40ace4",\n  "cyan": "#00FFFF",\n  "Cyan": "#08acec",\n  "Dandelion": "#ffbc44",\n  "darkgray": "#404040",\n  "DarkOrchid": "#a8548c",\n  "Emerald": "#08ac9c",\n  "ForestGreen": "#089c54",\n  "Fuchsia": "#90348c",\n  "Goldenrod": "#ffdc44",\n  "gray": "#808080",\n  "Gray": "#98949c",\n  "green": "#00FF00",\n  "Green": "#08a44c",\n  "GreenYellow": "#e0e474",\n  "JungleGreen": "#08ac9c",\n  "Lavender": "#f89cc4",\n  "lightgray": "#c0c0c0",\n  "lime": "#BFFF00",\n  "LimeGreen": "#90c43c",\n  "magenta": "#FF00FF",\n  "Magenta": "#f0048c",\n  "Mahogany": "#b0341c",\n  "Maroon": "#b03434",\n  "Melon": "#f89c7c",\n  "MidnightBlue": "#086494",\n  "Mulberry": "#b03c94",\n  "NavyBlue": "#086cbc",\n  "olive": "#7F7F00",\n  "OliveGreen": "#407c34",\n  "orange": "#FF8000",\n  "Orange": "#f8843c",\n  "OrangeRed": "#f0145c",\n  "Orchid": "#b074ac",\n  "Peach": "#f8945c",\n  "Periwinkle": "#8074bc",\n  "PineGreen": "#088c74",\n  "pink": "#ff7f7f",\n  "Plum": "#98248c",\n  "ProcessBlue": "#08b4ec",\n  "purple": "#BF0040",\n  "Purple": "#a0449c",\n  "RawSienna": "#983c04",\n  "red": "#ff0000",\n  "Red": "#f01c24",\n  "RedOrange": "#f86434",\n  "RedViolet": "#a0246c",\n  "Rhodamine": "#f0549c",\n  "Royallue": "#0874bc",\n  "RoyalPurple": "#683c9c",\n  "RubineRed": "#f0047c",\n  "Salmon": "#f8948c",\n  "SeaGreen": "#30bc9c",\n  "Sepia": "#701404",\n  "SkyBlue": "#48c4dc",\n  "SpringGreen": "#c8dc64",\n  "Tan": "#e09c74",\n  "teal": "#007F7F",\n  "TealBlue": "#08acb4",\n  "Thistle": "#d884b4",\n  "Turquoise": "#08b4cc",\n  "violet": "#800080",\n  "Violet": "#60449c",\n  "VioletRed": "#f054a4",\n  "WildStrawberry": "#f0246c",\n  "yellow": "#FFFF00",\n  "Yellow": "#fff404",\n  "YellowGreen": "#98cc6c",\n  "YellowOrange": "#ffa41c"\n}'),Re=(t,r)=>{let n="";if("HTML"===t){if(!Ie.test(r))throw new e("Invalid HTML input.");n=r}else if("RGB"===t){if(!Le.test(r))throw new e("Invalid RGB input.");r.split(",").map((e=>{n+=De(Number(e.trim()))}))}else{if(!Fe.test(r))throw new e("Invalid rbg input.");r.split(",").map((t=>{const r=Number(t.trim());if(r>1)throw new e("Color rgb input must be < 1.");n+=De(Number((255*r).toFixed(0)))}))}return"#"!==n.charAt(0)&&(n="#"+n),n},je=(t,r,n)=>{const s=`\\\\color@${t}`;if(!$e.exec(t))throw new e("Invalid color: '"+t+"'",n);return Ge.test(t)?"#"+t:("#"===t.charAt(0)||(r.has(s)?t=r.get(s).tokens[0].text:Pe[t]&&(t=Pe[t])),t)},Ue=(e,t)=>{let r=ie(e.body,t.withColor(e.color));return r=r.map((t=>(t.style.color=e.color,t))),N.newDocumentFragment(r)};c({type:"color",names:["\\textcolor"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","original"]},handler({parser:e,token:t},r,n){const s=n[0]&&Oe(n[0],"raw").string;let o="";if(s){const e=Oe(r[0],"raw").string;o=Re(s,e)}else o=je(Oe(r[0],"raw").string,e.gullet.macros,t);const a=r[1];return{type:"color",mode:e.mode,color:o,body:p(a)}},mathmlBuilder:Ue}),c({type:"color",names:["\\color"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw"]},handler({parser:e,breakOnTokenText:t,token:r},n,s){const o=s[0]&&Oe(s[0],"raw").string;let a="";if(o){const e=Oe(n[0],"raw").string;a=Re(o,e)}else a=je(Oe(n[0],"raw").string,e.gullet.macros,r);const i=e.parseExpression(!0,t,!0);return{type:"color",mode:e.mode,color:a,body:i}},mathmlBuilder:Ue}),c({type:"color",names:["\\definecolor"],props:{numArgs:3,allowedInText:!0,argTypes:["raw","raw","raw"]},handler({parser:t,funcName:r,token:n},s){const o=Oe(s[0],"raw").string;if(!/^[A-Za-z]+$/.test(o))throw new e("Color name must be latin letters.",n);const a=Oe(s[1],"raw").string;if(!["HTML","RGB","rgb"].includes(a))throw new e("Color model must be HTML, RGB, or rgb.",n);const i=Oe(s[2],"raw").string,l=Re(a,i);return t.gullet.macros.set(`\\\\color@${o}`,{tokens:[{text:l}],numArgs:0}),{type:"internal",mode:t.mode}}}),c({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler({parser:e},t,r){const n="["===e.gullet.future().text?e.parseSizeGroup(!0):null,s=!e.settings.displayMode;return{type:"cr",mode:e.mode,newLine:s,size:n&&Oe(n,"size").value}},mathmlBuilder(e,t){const r=new N.MathNode("mo");if(e.newLine&&(r.setAttribute("linebreak","newline"),e.size)){const n=ve(e.size,t);r.setAttribute("height",n.number+n.unit)}return r}});const He={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Ve=t=>{const r=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new e("Expected a control sequence",t);return r},_e=(e,t,r,n)=>{let s=e.gullet.macros.get(r.text);null==s&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};c({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler({parser:t,funcName:r}){t.consumeSpaces();const n=t.fetch();if(He[n.text])return"\\global"!==r&&"\\\\globallong"!==r||(n.text=He[n.text]),Oe(t.parseFunction(),"internal");throw new e("Invalid token after macro prefix",n)}}),c({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:r}){let n=t.gullet.popToken();const s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new e("Expected a control sequence",n);let o,a=0;const i=[[]];for(;"{"!==t.gullet.future().text;)if(n=t.gullet.popToken(),"#"===n.text){if("{"===t.gullet.future().text){o=t.gullet.future(),i[a].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new e(`Invalid argument number "${n.text}"`);if(parseInt(n.text)!==a+1)throw new e(`Argument number "${n.text}" out of order`);a++,i.push([])}else{if("EOF"===n.text)throw new e("Expected a macro definition");i[a].push(n.text)}let{tokens:l}=t.gullet.consumeArg();return o&&l.unshift(o),"\\edef"!==r&&"\\xdef"!==r||(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(s,{tokens:l,numArgs:a,delimiters:i},r===He[r]),{type:"internal",mode:t.mode}}}),c({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=Ve(e.gullet.popToken());e.gullet.consumeSpaces();const n=(e=>{let t=e.gullet.popToken();return"="===t.text&&(t=e.gullet.popToken()," "===t.text&&(t=e.gullet.popToken())),t})(e);return _e(e,r,n,"\\\\globallet"===t),{type:"internal",mode:e.mode}}}),c({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=Ve(e.gullet.popToken()),n=e.gullet.popToken(),s=e.gullet.popToken();return _e(e,r,s,"\\\\globalfuture"===t),e.gullet.pushToken(s),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}}),c({type:"internal",names:["\\newcommand","\\renewcommand","\\providecommand"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:r}){let n="";const s=t.gullet.popToken();"{"===s.text?(n=Ve(t.gullet.popToken()),t.gullet.popToken()):n=Ve(s);const o=t.gullet.isDefined(n);if(o&&"\\newcommand"===r)throw new e(`\\newcommand{${n}} attempting to redefine ${n}; use \\renewcommand`);if(!o&&"\\renewcommand"===r)throw new e(`\\renewcommand{${n}} when command ${n} does not yet exist; use \\newcommand`);let a=0;if("["===t.gullet.future().text){let r=t.gullet.popToken();if(r=t.gullet.popToken(),!/^[0-9]$/.test(r.text))throw new e(`Invalid number of arguments: "${r.text}"`);if(a=parseInt(r.text),r=t.gullet.popToken(),"]"!==r.text)throw new e(`Invalid argument "${r.text}"`)}const{tokens:i}=t.gullet.consumeArg();return t.gullet.macros.set(n,{tokens:i,numArgs:a},!t.settings.strict),{type:"internal",mode:t.mode}}});const We={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Xe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","","\\llparenthesis","","\\rrparenthesis","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lAngle","","\\rAngle","","\\llangle","","\\rrangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","\\llbracket","\\rrbracket","","","\\lBrace","\\rBrace","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],Ze=["}","\\left","\\middle","\\right"],Ye=e=>e.length>0&&(Xe.includes(e)||We[e]||Ze.includes(e)),Ke=[0,1.2,1.8,2.4,3];function Je(t,r){const n=Me(t);if(n&&Xe.includes(n.text))return["/",""].includes(n.text)&&(n.text=""),["<","\\lt"].includes(n.text)&&(n.text=""),[">","\\gt"].includes(n.text)&&(n.text=""),"\\backslash"===n.text&&(n.text=""),n;throw new e(n?`Invalid delimiter '${n.text}' after '${r.funcName}'`:`Invalid delimiter type '${t.type}'`,t)}c({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=Je(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:We[e.funcName].size,mclass:We[e.funcName].mclass,delim:r.text}},mathmlBuilder:e=>{const t=[];"."===e.delim&&(e.delim=""),t.push(re(e.delim,e.mode));const r=new N.MathNode("mo",t);return"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),(""===e.delim||"\\vert"===e.delim||"|"===e.delim||e.delim.indexOf("arrow")>-1)&&r.setAttribute("stretchy","true"),r.setAttribute("symmetric","true"),r.setAttribute("minsize",Ke[e.size]+"em"),r.setAttribute("maxsize",Ke[e.size]+"em"),r}}),c({type:"leftright-right",names:["\\right"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>({type:"leftright-right",mode:e.parser.mode,delim:Je(t[0],e).text})}),c({type:"leftright",names:["\\left"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,r)=>{const n=Je(r[0],t),s=t.parser;++s.leftrightDepth;let o=s.parseExpression(!1,null,!0),a=s.fetch();for(;"\\middle"===a.text;){s.consume();const t=s.fetch().text;if(!E.math[t])throw new e(`Invalid delimiter '${t}' after '\\middle'`);Je({type:"atom",mode:"math",text:t},{funcName:"\\middle"}),o.push({type:"middle",mode:"math",delim:t}),s.consume(),o=o.concat(s.parseExpression(!1,null,!0)),a=s.fetch()}--s.leftrightDepth,s.expect("\\right",!1);const i=Oe(s.parseFunction(),"leftright-right");return{type:"leftright",mode:s.mode,body:o,left:n.text,right:i.delim}},mathmlBuilder:(e,t)=>{!function(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}(e);const r=ie(e.body,t);"."===e.left&&(e.left="");const n=new N.MathNode("mo",[re(e.left,e.mode)]);n.setAttribute("fence","true"),n.setAttribute("form","prefix"),(""===e.left||e.left.indexOf("arrow")>-1)&&n.setAttribute("stretchy","true"),r.unshift(n),"."===e.right&&(e.right="");const s=new N.MathNode("mo",[re(e.right,e.mode)]);return s.setAttribute("fence","true"),s.setAttribute("form","postfix"),(""===e.right||e.right.indexOf("arrow")>-1)&&s.setAttribute("stretchy","true"),r.push(s),oe(r)}}),c({type:"middle",names:["\\middle"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,r)=>{const n=Je(r[0],t);if(!t.parser.leftrightDepth)throw new e("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},mathmlBuilder:(e,t)=>{const r=re(e.delim,e.mode),n=new N.MathNode("mo",[r]);return n.setAttribute("fence","true"),e.delim.indexOf("arrow")>-1&&n.setAttribute("stretchy","true"),n.setAttribute("form","prefix"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});const Qe=e=>{const t=new N.MathNode("mspace");return t.setAttribute("width","3pt"),t},et=(e,t)=>{let r;switch(r=e.label.indexOf("colorbox")>-1||"\\boxed"===e.label?new N.MathNode("mrow",[Qe(),ce(e.body,t),Qe()]):new N.MathNode("mrow",[ce(e.body,t)]),e.label){case"\\overline":r.style.padding="0.1em 0 0 0",r.style.borderTop="0.065em solid";break;case"\\underline":r.style.padding="0 0 0.1em 0",r.style.borderBottom="0.065em solid";break;case"\\cancel":r.classes.push("tml-cancel");break;case"\\bcancel":r.classes.push("tml-bcancel");break;case"\\angl":r.style.padding="0.03889em 0.03889em 0 0.03889em",r.style.borderTop="0.049em solid",r.style.borderRight="0.049em solid",r.style.marginRight="0.03889em";break;case"\\sout":r.style.backgroundImage="linear-gradient(black, black)",r.style.backgroundRepeat="no-repeat",r.style.backgroundSize="100% 1.5px",r.style.backgroundPosition="0 center";break;case"\\boxed":r.style={padding:"3pt 0 3pt 0",border:"1px solid"},r.setAttribute("scriptlevel","0"),r.setAttribute("displaystyle","true");break;case"\\fbox":r.style={padding:"3pt",border:"1px solid"};break;case"\\fcolorbox":case"\\colorbox":{const t={padding:"3pt 0 3pt 0"};"\\fcolorbox"===e.label&&(t.border="0.06em solid "+String(e.borderColor)),r.style=t;break}case"\\xcancel":r.classes.push("tml-xcancel")}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};c({type:"enclose",names:["\\colorbox"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","text"]},handler({parser:e,funcName:t},r,n){const s=n[0]&&Oe(n[0],"raw").string;let o="";if(s){const e=Oe(r[0],"raw").string;o=Re(s,e)}else o=je(Oe(r[0],"raw").string,e.gullet.macros);const a=r[1];return{type:"enclose",mode:e.mode,label:t,backgroundColor:o,body:a}},mathmlBuilder:et}),c({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","raw","text"]},handler({parser:e,funcName:t},r,n){const s=n[0]&&Oe(n[0],"raw").string;let o,a="";if(s){const e=Oe(r[0],"raw").string,t=Oe(r[0],"raw").string;a=Re(s,e),o=Re(s,t)}else a=je(Oe(r[0],"raw").string,e.gullet.macros),o=je(Oe(r[1],"raw").string,e.gullet.macros);const i=r[2];return{type:"enclose",mode:e.mode,label:t,backgroundColor:o,borderColor:a,body:i}},mathmlBuilder:et}),c({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:({parser:e},t)=>({type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]})}),c({type:"enclose",names:["\\angl","\\cancel","\\bcancel","\\xcancel","\\sout","\\overline","\\boxed"],props:{numArgs:1},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:et}),c({type:"enclose",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:et});const tt={};function rt({type:e,names:t,props:r,handler:n,mathmlBuilder:s}){const o={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n};for(let e=0;e<t.length;++e)tt[t[e]]=o;s&&(l[e]=s)}const nt=0,st=1,ot=2,at=3;function it(e){const t=[];e.consumeSpaces();let r=e.fetch().text;for("\\relax"===r&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}const lt=t=>{if(!t.parser.settings.displayMode)throw new e(`{${t.envName}} can be used only in display mode.`)},ct=(e,t,r)=>{let n;const s=e.tags.shift();if(s){if(!s.body)return n=new N.MathNode("mtext",[],[]),n;n=le(s.body,t,!0),n.classes=["tml-tag"]}else{if(e.envClasses.includes("multline")&&(e.leqno&&0!==r||!e.leqno&&r!==e.body.length-1))return n=new N.MathNode("mtext",[],[]),n;n=new N.MathNode("mtext",[new y(["tml-eqn"])])}return n};function mt(t,{cols:r,envClasses:n,addEqnNum:s,singleRow:o,emptySingleRow:a,maxNumCols:i,leqno:l},c){t.gullet.beginGroup(),o||t.gullet.macros.set("\\cr","\\\\\\relax"),s&&(t.gullet.macros.set("\\tag","\\@ifstar\\envtag@literal\\envtag@paren"),t.gullet.macros.set("\\envtag@paren","\\env@tag{{(\\text{#1})}}"),t.gullet.macros.set("\\envtag@literal","\\env@tag{\\text{#1}}"),t.gullet.macros.set("\\notag","\\env@notag"),t.gullet.macros.set("\\nonumber","\\env@notag")),t.gullet.beginGroup();let m=[];const u=[m],p=[],d=[];let h;const g=[];for(g.push(it(t));;){let r=t.parseExpression(!1,o?"\\end":"\\\\");if(s&&!h)for(let e=0;e<r.length;e++)if("envTag"===r[e].type||"noTag"===r[e].type){h="envTag"===r[e].type?r.splice(e,1)[0].body.body[0]:{body:null};break}t.gullet.endGroup(),t.gullet.beginGroup(),r={type:"ordgroup",mode:t.mode,body:r,semisimple:!0},m.push(r);const l=t.fetch().text;if("&"===l){if(i&&m.length===i){if(!n.includes("array"))throw new e(2===i?"The split environment accepts no more than two columns":"The equation environment accepts only one column",t.nextToken);if(t.settings.strict)throw new e("Too few columns specified in the {array} column argument.",t.nextToken)}t.consume()}else{if("\\end"===l){1===m.length&&0===r.body.length&&(u.length>1||!a)&&u.pop(),g.length<u.length+1&&g.push([]);break}if("\\\\"!==l)throw new e("Expected & or \\\\ or \\cr or \\end",t.nextToken);{let e;t.consume()," "!==t.gullet.future().text&&(e=t.parseSizeGroup(!0)),p.push(e?e.value:null),d.push(h),g.push(it(t)),m=[],h=null,u.push(m)}}}return t.gullet.endGroup(),t.gullet.endGroup(),d.push(h),{type:"array",mode:t.mode,body:u,cols:r,rowGaps:p,hLinesBeforeRow:g,envClasses:n,addEqnNum:s,scriptLevel:c,tags:d,leqno:l}}function ut(e){return"d"===e.slice(0,1)?"display":"text"}const pt={c:"center ",l:"left ",r:"right "},dt=e=>{const t=new N.MathNode("mtd",[]);return t.style={padding:"0",width:"50%"},e.envClasses.includes("multline")&&(t.style.width="7.5%"),t},ht=function(e,t){const r=[],n=e.body.length,s=e.hLinesBeforeRow;for(let o=0;o<n;o++){const a=e.body[o],i=[],l="text"===e.scriptLevel?st:"script"===e.scriptLevel?ot:nt;for(let r=0;r<a.length;r++){const s=new N.MathNode("mtd",[ce(a[r],t.withLevel(l))]);if(e.envClasses.includes("multline")){const e=0===o?"left":o===n-1?"right":"center";s.setAttribute("columnalign",e),"center"!==e&&s.classes.push("tml-"+e)}i.push(s)}if(e.addEqnNum){i.unshift(dt(e)),i.push(dt(e));const r=ct(e,t.withLevel(l),o);e.leqno?(i[0].children.push(r),i[0].classes.push("tml-left")):(i[i.length-1].children.push(r),i[i.length-1].classes.push("tml-right"))}const c=new N.MathNode("mtr",i,[]);0===o&&s[0].length>0&&(2===s[0].length?c.children.forEach((e=>{e.style.borderTop="0.15em double"})):c.children.forEach((e=>{e.style.borderTop=s[0][0]?"0.06em dashed":"0.06em solid"}))),s[o+1].length>0&&(2===s[o+1].length?c.children.forEach((e=>{e.style.borderBottom="0.15em double"})):c.children.forEach((e=>{e.style.borderBottom=s[o+1][0]?"0.06em dashed":"0.06em solid"}))),r.push(c)}if(e.envClasses.length>0){const t=e.envClasses.includes("jot")?"0.7":e.envClasses.includes("small")?"0.35":"0.5",n=e.envClasses.includes("abut")||e.envClasses.includes("cases")?"0":e.envClasses.includes("small")?"0.1389":e.envClasses.includes("cd")?"0.25":"0.4",s=0===r.length?0:r[0].children.length,o=(t,r)=>0===t&&0===r||t===s-1&&1===r?"0":"align"!==e.envClasses[0]?n:1===r?"0":e.addEqnNum?t%2?"1":"0":t%2?"0":"1";for(let e=0;e<r.length;e++)for(let n=0;n<r[e].children.length;n++)r[e].children[n].style.padding=`${t}ex ${o(n,1)}em ${t}ex ${o(n,0)}em`;const a=e.envClasses.includes("align")||e.envClasses.includes("alignat");for(let t=0;t<r.length;t++){const n=r[t];if(a){for(let e=0;e<n.children.length;e++)n.children[e].classes=["tml-"+(e%2?"left":"right")];if(e.addEqnNum){const t=e.leqno?0:n.children.length-1;n.children[t].classes=["tml-"+(e.leqno?"left":"right")]}}if(n.children.length>1&&e.envClasses.includes("cases")&&(n.children[1].style.padding=n.children[1].style.padding.replace(/0em$/,"1em")),e.envClasses.includes("cases")||e.envClasses.includes("subarray"))for(const e of n.children)e.classes.push("tml-left")}}else for(let e=0;e<r.length;e++)r[e].children[0].style.paddingLeft="0em",r[e].children.length===r[0].children.length&&(r[e].children[r[e].children.length-1].style.paddingRight="0em");let o=new N.MathNode("mtable",r);"display"===e.scriptLevel&&o.setAttribute("displaystyle","true"),(e.addEqnNum||e.envClasses.includes("multline"))&&(o.style.width="100%");let a="";if(e.cols&&e.cols.length>0){const t=e.cols;let r=!1,n=0,s=t.length;for(;"separator"===t[n].type;)n+=1;for(;"separator"===t[s-1].type;)s-=1;if("separator"===t[0].type){const e="separator"===t[1].type?"0.15em double":"|"===t[0].separator?"0.06em solid ":"0.06em dashed ";for(const t of o.children)t.children[0].style.borderLeft=e}let i=e.addEqnNum?0:-1;for(let e=n;e<s;e++)if("align"===t[e].type){const n=pt[t[e].align];a+=n,i+=1;for(const e of o.children)"center"!==n.trim()&&i<e.children.length&&(e.children[i].classes=["tml-"+n.trim()]);r=!0}else if("separator"===t[e].type){if(r){const r="separator"===t[e+1].type?"0.15em double":"|"===t[e].separator?"0.06em solid":"0.06em dashed";for(const e of o.children)i<e.children.length&&(e.children[i].style.borderRight=r)}r=!1}if("separator"===t[t.length-1].type){const e="separator"===t[t.length-2].type?"0.15em double":"|"===t[t.length-1].separator?"0.06em solid":"0.06em dashed";for(const t of o.children)t.children[t.children.length-1].style.borderRight=e,t.children[t.children.length-1].style.paddingRight="0.4em"}}return e.addEqnNum&&(a="left "+(a.length>0?a:"center ")+"right "),a&&o.setAttribute("columnalign",a.trim()),e.envClasses.includes("small")&&(o=new N.MathNode("mstyle",[o]),o.setAttribute("scriptlevel","1")),o},gt=function(t,r){-1===t.envName.indexOf("ed")&&lt(t);const n=[],s=mt(t.parser,{cols:n,addEqnNum:"align"===t.envName||"alignat"===t.envName,emptySingleRow:!0,envClasses:["abut","jot"],maxNumCols:"split"===t.envName?2:void 0,leqno:t.parser.settings.leqno},"display");let o,a=0;const i=t.envName.indexOf("at")>-1;if(r[0]&&i){let t="";for(let e=0;e<r[0].body.length;e++){t+=Oe(r[0].body[e],"textord").text}if(isNaN(t))throw new e("The alignat enviroment requires a numeric first argument.");o=Number(t),a=2*o}s.body.forEach((function(t){if(i){const r=t.length/2;if(o<r)throw new e(`Too many math in a row: expected ${o}, but got ${r}`,t[0])}else a<t.length&&(a=t.length)}));for(let e=0;e<a;++e){let t="r";e%2==1&&(t="l"),n[e]={type:"align",align:t}}return"split"===t.envName||(i?s.envClasses.push("alignat"):s.envClasses[0]="align"),s};rt({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,r){const n=(Me(r[0])?[r[0]]:Oe(r[0],"ordgroup").body).map((function(t){const r=Be(t).text;if(-1!=="lcr".indexOf(r))return{type:"align",align:r};if("|"===r)return{type:"separator",separator:"|"};if(":"===r)return{type:"separator",separator:":"};throw new e("Unknown column alignment: "+r,t)})),s={cols:n,envClasses:["array"],maxNumCols:n.length};return mt(t.parser,s,ut(t.envName))},mathmlBuilder:ht}),rt({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){const r={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")];let n="c";const s={envClasses:[],cols:[]};if("*"===t.envName.charAt(t.envName.length-1)){const r=t.parser;if(r.consumeSpaces(),"["===r.fetch().text){if(r.consume(),r.consumeSpaces(),n=r.fetch().text,-1==="lcr".indexOf(n))throw new e("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),s.cols=[]}}const o=mt(t.parser,s,"text");return o.cols=new Array(o.body[0].length).fill({type:"align",align:n}),r?{type:"leftright",mode:t.mode,body:[o],left:r[0],right:r[1],rightColor:void 0}:o},mathmlBuilder:ht}),rt({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){const t=mt(e.parser,{type:"small"},"script");return t.envClasses=["small"],t},mathmlBuilder:ht}),rt({type:"array",names:["subarray"],props:{numArgs:1},handler(t,r){const n=(Me(r[0])?[r[0]]:Oe(r[0],"ordgroup").body).map((function(t){const r=Be(t).text;if(-1!=="lc".indexOf(r))return{type:"align",align:r};throw new e("Unknown column alignment: "+r,t)}));if(n.length>1)throw new e("{subarray} can contain only one column");let s={cols:n,envClasses:["small"]};if(s=mt(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new e("{subarray} can contain only one column");return s},mathmlBuilder:ht}),rt({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){const t=mt(e.parser,{cols:[],envClasses:["cases"]},ut(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},mathmlBuilder:ht}),rt({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:gt,mathmlBuilder:ht}),rt({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:gt,mathmlBuilder:ht}),rt({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){"gathered"!==e.envName&&lt(e);const t={cols:[],envClasses:["abut","jot"],addEqnNum:"gather"===e.envName,emptySingleRow:!0,leqno:e.parser.settings.leqno};return mt(e.parser,t,"display")},mathmlBuilder:ht}),rt({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){lt(e);const t={addEqnNum:"equation"===e.envName,emptySingleRow:!0,singleRow:!0,maxNumCols:1,envClasses:["align"],leqno:e.parser.settings.leqno};return mt(e.parser,t,"display")},mathmlBuilder:ht}),rt({type:"array",names:["multline","multline*"],props:{numArgs:0},handler(e){lt(e);const t={addEqnNum:"multline"===e.envName,maxNumCols:1,envClasses:["jot","multline"],leqno:e.parser.settings.leqno};return mt(e.parser,t,"display")},mathmlBuilder:ht}),rt({type:"array",names:["CD"],props:{numArgs:0},handler:t=>(lt(t),function(t){const r=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){r.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();const n=t.fetch().text;if("&"!==n&&"\\\\"!==n){if("\\end"===n){0===r[r.length-1].length&&r.pop();break}throw new e("Expected \\\\ or \\cr or \\end",t.nextToken)}t.consume()}let n=[];const s=[n];for(let i=0;i<r.length;i++){const l=r[i];let c={type:"styling",body:[],mode:"math",scriptLevel:"display"};for(let r=0;r<l.length;r++)if(ze(l[r])){n.push(c),r+=1;const s=Be(l[r]).text,i=new Array(2);if(i[0]={type:"ordgroup",mode:"math",body:[]},i[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(s)>-1);else{if(!("<>AV".indexOf(s)>-1))throw new e('Expected one of "<>AV=|." after @.');for(let t=0;t<2;t++){let n=!0;for(let c=r+1;c<l.length;c++){if(a=s,("mathord"===(o=l[c]).type||"atom"===o.type)&&o.text===a){n=!1,r=c;break}if(ze(l[c]))throw new e("Missing a "+s+" character to complete a CD arrow.",l[c]);i[t].body.push(l[c])}if(n)throw new e("Missing a "+s+" character to complete a CD arrow.",l[r])}}const m=Ee(s,i,t);n.push(m),c={type:"styling",body:[],mode:"math",scriptLevel:"display"}}else c.body.push(l[r]);i%2==0?n.push(c):n.shift(),n=[],s.push(n)}var o,a;return s.pop(),t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:"math",body:s,envClasses:["jot","cd"],cols:[],hLinesBeforeRow:new Array(s.length+1).fill([])}}(t.parser)),mathmlBuilder:ht}),c({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,r){throw new e(`${t.funcName} valid only within array environment`)}});const ft=tt;c({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler({parser:t,funcName:r},n){const s=n[0];if("ordgroup"!==s.type)throw new e("Invalid environment name",s);let o="";for(let e=0;e<s.body.length;++e)o+=Oe(s.body[e],"textord").text;if("\\begin"===r){if(!Object.prototype.hasOwnProperty.call(ft,o))throw new e("No such environment: "+o,s);const r=ft[o],{args:n,optArgs:a}=t.parseArguments("\\begin{"+o+"}",r),i={mode:t.mode,envName:o,parser:t},l=r.handler(i,n,a);t.expect("\\end",!1);const c=t.nextToken,m=Oe(t.parseFunction(),"environment");if(m.name!==o)throw new e(`Mismatch: \\begin{${o}} matched by \\end{${m.name}}`,c);return l}return{type:"environment",mode:t.mode,name:o,nameGroup:s}}}),c({type:"envTag",names:["\\env@tag"],props:{numArgs:1,argTypes:["math"]},handler:({parser:e},t)=>({type:"envTag",mode:e.mode,body:t[0]}),mathmlBuilder:(e,t)=>new N.MathNode("mrow")}),c({type:"noTag",names:["\\env@notag"],props:{numArgs:0},handler:({parser:e})=>({type:"noTag",mode:e.mode}),mathmlBuilder:(e,t)=>new N.MathNode("mrow")});const bt=(e,t)=>{const r=e.font,n=t.withFont(r),s=ce(e.body,n);if(0===s.children.length)return s;if("boldsymbol"===r&&["mo","mpadded","mrow"].includes(s.type))return s.style.fontWeight="bold",s;let o="mo"===s.children[0].type;for(let e=1;e<s.children.length;e++){"mo"===s.children[e].type&&"boldsymbol"===r&&(s.children[e].style.fontWeight="bold"),"mi"!==s.children[e].type&&(o=!1);"normal"!==(s.children[e].attributes&&s.children[e].attributes.mathvariant||"")&&(o=!1)}if(!o)return s;const a=s.children[0];for(let e=1;e<s.children.length;e++)a.children.push(s.children[e].children[0]);if(a.attributes.mathvariant&&"normal"===a.attributes.mathvariant){const e=new N.MathNode("mtext",new N.TextNode(""));return new N.MathNode("mrow",[e,a])}return a},yt={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};c({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\up@greek","\\boldsymbol","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bm","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=u(r[0]);let s=t;return s in yt&&(s=yt[s]),{type:"font",mode:e.mode,font:s.slice(1),body:n}},mathmlBuilder:bt}),c({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:({parser:e,funcName:t,breakOnTokenText:r},n)=>{const{mode:s}=e,o=e.parseExpression(!0,r,!0);return{type:"font",mode:s,font:`math${t.slice(1)}`,body:{type:"ordgroup",mode:e.mode,body:o}}},mathmlBuilder:bt});const xt=["display","text","script","scriptscript"],wt={auto:-1,display:0,text:0,script:1,scriptscript:2},kt=(e,t)=>{const r="auto"===e.scriptLevel?t.incrementLevel():"display"===e.scriptLevel?t.withLevel(st):"text"===e.scriptLevel?t.withLevel(ot):t.withLevel(at);let n=new N.MathNode("mfrac",[ce(e.numer,r),ce(e.denom,r)]);if(e.hasBarLine){if(e.barSize){const r=ve(e.barSize,t);n.setAttribute("linethickness",r.number+r.unit)}}else n.setAttribute("linethickness","0px");if(null!=e.leftDelim||null!=e.rightDelim){const t=[];if(null!=e.leftDelim){const r=new N.MathNode("mo",[new N.TextNode(e.leftDelim.replace("\\",""))]);r.setAttribute("fence","true"),t.push(r)}if(t.push(n),null!=e.rightDelim){const r=new N.MathNode("mo",[new N.TextNode(e.rightDelim.replace("\\",""))]);r.setAttribute("fence","true"),t.push(r)}n=oe(t)}return"auto"!==e.scriptLevel&&(n=new N.MathNode("mstyle",[n]),n.setAttribute("displaystyle",String("display"===e.scriptLevel)),n.setAttribute("scriptlevel",wt[e.scriptLevel])),n};c({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=r[1];let o=!1,a=null,i=null,l="auto";switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a="(",i=")";break;case"\\\\bracefrac":a="\\{",i="\\}";break;case"\\\\brackfrac":a="[",i="]";break;default:throw new Error("Unrecognized genfrac command")}switch(t){case"\\dfrac":case"\\dbinom":l="display";break;case"\\tfrac":case"\\tbinom":l="text"}return{type:"genfrac",mode:e.mode,continued:!1,numer:n,denom:s,hasBarLine:o,leftDelim:a,rightDelim:i,scriptLevel:l,barSize:null}},mathmlBuilder:kt}),c({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=r[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:n,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,scriptLevel:"display",barSize:null}}}),c({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler({parser:e,funcName:t,token:r}){let n;switch(t){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:n,token:r}}});const vt=function(e){let t=null;return e.length>0&&(t=e,t="."===t?null:t),t};c({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler({parser:e},t){const r=t[4],n=t[5],s=u(t[0]),o="atom"===s.type&&"open"===s.family?vt(s.text):null,a=u(t[1]),i="atom"===a.type&&"close"===a.family?vt(a.text):null,l=Oe(t[2],"size");let c,m=null;l.isBlank?c=!0:(m=l.value,c=m.number>0);let p="auto",d=t[3];if("ordgroup"===d.type){if(d.body.length>0){const e=Oe(d.body[0],"textord");p=xt[Number(e.text)]}}else d=Oe(d,"textord"),p=xt[Number(d.text)];return{type:"genfrac",mode:e.mode,numer:r,denom:n,continued:!1,hasBarLine:c,barSize:m,leftDelim:o,rightDelim:i,scriptLevel:p}},mathmlBuilder:kt}),c({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:({parser:e,funcName:t,token:r},n)=>({type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",barSize:Oe(n[0],"size").value,token:r})}),c({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(Oe(r[1],"infix").barSize),o=r[2],a=s.number>0;return{type:"genfrac",mode:e.mode,numer:n,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,scriptLevel:"auto"}},mathmlBuilder:kt}),c({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["hbox"],allowedInArgument:!0,allowedInText:!1},handler:({parser:e},t)=>({type:"hbox",mode:e.mode,body:p(t[0])}),mathmlBuilder(e,t){const r=t.withLevel(st),n=le(e.body,r);return ne(n)}});c({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>({type:"horizBrace",mode:e.mode,label:t,isOver:/^\\over/.test(t),base:r[0]}),mathmlBuilder:(e,t)=>{const r=B(e.label);return r.style["math-depth"]=0,new N.MathNode(e.isOver?"mover":"munder",[ce(e.base,t),r])}}),c({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:({parser:t,token:r},n)=>{const s=n[1],o=Oe(n[0],"url").url;if(!t.settings.isTrusted({command:"\\href",url:o}))throw new e('Function "\\href" is not trusted',r);return{type:"href",mode:t.mode,href:o,body:p(s)}},mathmlBuilder:(e,t)=>{let r=le(e.body,t);return r instanceof k||(r=new k("mrow",[r])),r.setAttribute("href",e.href),r}}),c({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:({parser:t,token:r},n)=>{const s=Oe(n[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:s}))throw new e('Function "\\url" is not trusted',r);const o=[];for(let e=0;e<s.length;e++){let t=s[e];"~"===t&&(t="\\textasciitilde"),o.push({type:"textord",mode:"text",text:t})}const a={type:"text",mode:t.mode,font:"\\texttt",body:o};return{type:"href",mode:t.mode,href:s,body:p(a)}}}),c({type:"html",names:["\\class","\\id","\\style","\\data"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:({parser:t,funcName:r,token:n},s)=>{const o=Oe(s[0],"raw").string,a=s[1];if(t.settings.strict)throw new e(`Function "${r}" is disabled in strict mode`,n);let i;const l={};switch(r){case"\\class":l.class=o,i={command:"\\class",class:o};break;case"\\id":l.id=o,i={command:"\\id",id:o};break;case"\\style":l.style=o,i={command:"\\style",style:o};break;case"\\data":{const t=o.split(",");for(let r=0;r<t.length;r++){const n=t[r].split("=");if(2!==n.length)throw new e("Error parsing key-value for \\data");l["data-"+n[0].trim()]=n[1].trim()}i={command:"\\data",attributes:l};break}default:throw new Error("Unrecognized html command")}if(!t.settings.isTrusted(i))throw new e(`Function "${r}" is not trusted`,n);return{type:"html",mode:t.mode,attributes:l,body:p(a)}},mathmlBuilder:(e,t)=>{const r=le(e.body,t),n=[];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/)),r.classes=n;for(const t in e.attributes)"class"!==t&&Object.prototype.hasOwnProperty.call(e.attributes,t)&&r.setAttribute(t,e.attributes[t]);return r}});const At=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};{const r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new e("Invalid size: '"+t+"' in \\includegraphics");const n={number:+(r[1]+r[2]),unit:r[3]};if(!we(n))throw new e("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n}};c({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:({parser:t,token:r},n,s)=>{let o={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},l="";if(s[0]){const t=Oe(s[0],"raw").string.split(",");for(let r=0;r<t.length;r++){const n=t[r].split("=");if(2===n.length){const t=n[1].trim();switch(n[0].trim()){case"alt":l=t;break;case"width":o=At(t);break;case"height":a=At(t);break;case"totalheight":i=At(t);break;default:throw new e("Invalid key: '"+n[0]+"' in \\includegraphics.")}}}}const c=Oe(n[0],"url").url;if(""===l&&(l=c,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),!t.settings.isTrusted({command:"\\includegraphics",url:c}))throw new e('Function "\\includegraphics" is not trusted',r);return{type:"includegraphics",mode:t.mode,alt:l,width:o,height:a,totalheight:i,src:c}},mathmlBuilder:(e,t)=>{const r=ve(e.height,t),n={number:0,unit:"em"};e.totalheight.number>0&&e.totalheight.unit===r.unit&&e.totalheight.number>r.number&&(n.number=e.totalheight.number-r.number,n.unit=r.unit);let s=0;e.width.number>0&&(s=ve(e.width,t));const o={height:r.number+n.number+"em"};s.number>0&&(o.width=s.number+s.unit),n.number>0&&(o.verticalAlign=-n.number+n.unit);const a=new w(e.src,e.alt,o);return a.height=r,a.depth=n,new N.MathNode("mtext",[a])}}),c({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler({parser:t,funcName:r,token:n},s){const o=Oe(s[0],"size");if(t.settings.strict){const s="m"===r[1],a="mu"===o.value.unit;if(s){if(!a)throw new e(`LaTeX's ${r} supports only mu units, not ${o.value.unit} units`,n);if("math"!==t.mode)throw new e(`LaTeX's ${r} works only in math mode`,n)}else if(a)throw new e(`LaTeX's ${r} doesn't support mu units`,n)}return{type:"kern",mode:t.mode,dimension:o.value}},mathmlBuilder(e,t){const r=ve(e.dimension,t),n="em"===r.unit?Nt(r.number):"";if("text"===e.mode&&n.length>0){const e=new N.TextNode(n);return new N.MathNode("mtext",[e])}{const e=new N.MathNode("mspace");return e.setAttribute("width",r.number+r.unit),r.number<0&&(e.style.marginLeft=r.number+r.unit),e}}});const Nt=function(e){return e>=.05555&&e<=.05556?"":e>=.1666&&e<=.1667?"":e>=.2222&&e<=.2223?"":e>=.2777&&e<=.2778?"":""},Tt=/[^A-Za-z_0-9-]/g;c({type:"label",names:["\\label"],props:{numArgs:1,argTypes:["raw"]},handler:({parser:e},t)=>({type:"label",mode:e.mode,string:t[0].string.replace(Tt,"")}),mathmlBuilder(e,t){const r=new N.MathNode("mrow",[],["tml-label"]);return e.string.length>0&&r.setAttribute("id",e.string),r}});const qt=["\\clap","\\llap","\\rlap"];c({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap","\\clap","\\llap","\\rlap"],props:{numArgs:1,allowedInText:!0},handler:({parser:t,funcName:r,token:n},s)=>{if(qt.includes(r)){if(t.settings.strict&&"text"!==t.mode)throw new e(`{${r}} can be used only in text mode.\n Try \\math${r.slice(1)}`,n);r=r.slice(1)}else r=r.slice(5);const o=s[0];return{type:"lap",mode:t.mode,alignment:r,body:o}},mathmlBuilder:(e,t)=>{let r;if("llap"===e.alignment){const n=ie(p(e.body),t),s=new N.MathNode("mphantom",n);r=new N.MathNode("mpadded",[s]),r.setAttribute("width","0px")}const n=ce(e.body,t);let s;if("llap"===e.alignment?(n.style.position="absolute",n.style.right="0",n.style.bottom="0",s=new N.MathNode("mpadded",[r,n])):s=new N.MathNode("mpadded",[n]),"rlap"===e.alignment)e.body.body.length>0&&"genfrac"===e.body.body[0].type&&s.setAttribute("lspace","0.16667em");else{const t="llap"===e.alignment?"-1":"-0.5";s.setAttribute("lspace",t+"width"),"llap"===e.alignment?s.style.position="relative":(s.style.display="flex",s.style.justifyContent="center")}return s.setAttribute("width","0px"),s}}),c({type:"ordgroup",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler({funcName:e,parser:t},r){const n=t.mode;t.switchMode("math");const s="\\("===e?"\\)":"$",o=t.parseExpression(!1,s);return t.expect(s),t.switchMode(n),{type:"ordgroup",mode:t.mode,body:o}}}),c({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,r){throw new e(`Mismatched ${t.funcName}`,r)}});c({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:({parser:e},t)=>({type:"mathchoice",mode:e.mode,display:p(t[0]),text:p(t[1]),script:p(t[2]),scriptscript:p(t[3])}),mathmlBuilder:(e,t)=>{const r=((e,t)=>{switch(t.level){case nt:return e.display;case st:return e.text;case ot:return e.script;case at:return e.scriptscript;default:return e.text}})(e,t);return le(r,t)}});const St=["text","textord","mathord","atom"],Ot=e=>{const t=new N.MathNode("mspace");return t.setAttribute("width",e+"em"),t};function Bt(e,t){let r;const n=ie(e.body,t);if("minner"===e.mclass)r=new N.MathNode("mpadded",n);else if("mord"===e.mclass)e.isCharacterBox||"mathord"===n[0].type?(r=n[0],r.type="mi",1===r.children.length&&r.children[0].text&&""===r.children[0].text&&r.setAttribute("mathvariant","normal")):r=new N.MathNode("mi",n);else{r=new N.MathNode("mrow",n),e.mustPromote?(r=n[0],r.type="mo",e.isCharacterBox&&e.body[0].text&&/[A-Za-z]/.test(e.body[0].text)&&r.setAttribute("mathvariant","italic")):r=new N.MathNode("mrow",n);const s=t.level<2;"mrow"===r.type?s&&("mbin"===e.mclass?(r.children.unshift(Ot(.2222)),r.children.push(Ot(.2222))):"mrel"===e.mclass?(r.children.unshift(Ot(.2778)),r.children.push(Ot(.2778))):"mpunct"===e.mclass?r.children.push(Ot(.1667)):"minner"===e.mclass&&(r.children.unshift(Ot(.0556)),r.children.push(Ot(.0556)))):"mbin"===e.mclass?(r.attributes.lspace=s?"0.2222em":"0",r.attributes.rspace=s?"0.2222em":"0"):"mrel"===e.mclass?(r.attributes.lspace=s?"0.2778em":"0",r.attributes.rspace=s?"0.2778em":"0"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace=s?"0.1667em":"0"):"mopen"===e.mclass||"mclose"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0em"):"minner"===e.mclass&&s&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em"),"mopen"!==e.mclass&&"mclose"!==e.mclass&&(delete r.attributes.stretchy,delete r.attributes.form)}return r}c({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler({parser:e,funcName:t},r){const n=r[0],s=o.isCharacterBox(n);let a=!0;const i={type:"mathord",text:"",mode:e.mode},l=n.body?n.body:[n];for(const t of l){if(!St.includes(t.type)){a=!1;break}E[e.mode][t.text]?i.text+=E[e.mode][t.text].replace:t.text?i.text+=t.text:t.body&&t.body.map((e=>{i.text+=e.text}))}return{type:"mclass",mode:e.mode,mclass:"m"+t.slice(5),body:p(a?i:n),isCharacterBox:s,mustPromote:a}},mathmlBuilder:Bt});const Mt=e=>{const t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};c({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:({parser:e},t)=>({type:"mclass",mode:e.mode,mclass:Mt(t[0]),body:p(t[1]),isCharacterBox:o.isCharacterBox(t[1])})}),c({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler({parser:e,funcName:t},r){const n=r[1],s=r[0],o={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,stack:!0,suppressBaseShift:"\\stackrel"!==t,body:p(n)};return{type:"supsub",mode:s.mode,base:o,sup:"\\underset"===t?null:s,sub:"\\underset"===t?s:null}},mathmlBuilder:Bt});const Ct=(e,t,r)=>{if(!e)return r;const n=ce(e,t);return"mrow"===n.type&&0===n.children.length?r:n};c({type:"multiscript",names:["\\sideset","\\pres@cript"],props:{numArgs:3},handler({parser:t,funcName:r,token:n},s){if(0===s[2].body.length)throw new e(r+"cannot parse an empty base.");const o=s[2].body[0];if(t.settings.strict&&"\\sideset"===r&&!o.symbol)throw new e("The base of \\sideset must be a big operator. Try \\prescript.");if(s[0].body.length>0&&"supsub"!==s[0].body[0].type||s[1].body.length>0&&"supsub"!==s[1].body[0].type)throw new e("\\sideset can parse only subscripts and superscripts in its first two arguments",n);const a=s[0].body.length>0?s[0].body[0]:null,i=s[1].body.length>0?s[1].body[0]:null;return a||i?a?{type:"multiscript",mode:t.mode,isSideset:"\\sideset"===r,prescripts:a,postscripts:i,base:o}:{type:"styling",mode:t.mode,scriptLevel:"text",body:[{type:"supsub",mode:t.mode,base:o,sup:i.sup,sub:i.sub}]}:o},mathmlBuilder(e,t){const r=ce(e.base,t),n=new N.MathNode("mprescripts"),s=new N.MathNode("none");let o=[];const a=Ct(e.prescripts.sub,t,s),i=Ct(e.prescripts.sup,t,s);if(e.isSideset&&(a.setAttribute("style","text-align: left;"),i.setAttribute("style","text-align: left;")),e.postscripts){o=[r,Ct(e.postscripts.sub,t,s),Ct(e.postscripts.sup,t,s),n,a,i]}else o=[r,n,a,i];return new N.MathNode("mmultiscripts",o)}}),c({type:"not",names:["\\not"],props:{numArgs:1,primitive:!0,allowedInText:!1},handler({parser:e},t){const r=o.isCharacterBox(t[0]);let n;if(r)n=p(t[0]),"\\"===n[0].text.charAt(0)&&(n[0].text=E.math[n[0].text].replace),n[0].text=n[0].text.slice(0,1)+""+n[0].text.slice(1);else{n=[{type:"textord",mode:"math",text:""},{type:"kern",mode:"math",dimension:{number:-.6,unit:"em"}},t[0]]}return{type:"not",mode:e.mode,body:n,isCharacterBox:r}},mathmlBuilder(e,t){if(e.isCharacterBox){return ie(e.body,t,!0)[0]}return le(e.body,t)}});const zt=["textord","mathord","atom"],Et=["\\smallint"],It=["textord","mathord","ordgroup","close","leftright"],$t=e=>{e.attributes.lspace="0.1667em",e.attributes.rspace="0.1667em"},Lt=(e,t)=>{let r;if(e.symbol)r=new k("mo",[re(e.name,e.mode)]),Et.includes(e.name)?r.setAttribute("largeop","false"):r.setAttribute("movablelimits","false"),e.fromMathOp&&$t(r);else if(e.body)r=new k("mo",ie(e.body,t)),e.fromMathOp&&$t(r);else if(r=new k("mi",[new v(e.name.slice(1))]),!e.parentIsSupSub){const t=[r,new k("mo",[re("","text")])];if(e.needsLeadingSpace){const e=new k("mspace");e.setAttribute("width","0.1667em"),t.unshift(e)}if(!e.isFollowedByDelimiter){const e=new k("mspace");e.setAttribute("width","0.1667em"),t.push(e)}r=new k("mrow",t)}return r},Ft={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcap","":"\\bigsqcup","":"\\bigtimes"};c({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcap","\\bigsqcup","\\bigtimes","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:({parser:e,funcName:t},r)=>{let n=t;return 1===n.length&&(n=Ft[n]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,stack:!1,name:n}},mathmlBuilder:Lt}),c({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:({parser:e},t)=>{const r=t[0],n=r.body?r.body:[r],s=1===n.length&&zt.includes(n[0].type);return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:s,fromMathOp:!0,stack:!1,name:s?n[0].text:null,body:s?null:p(r)}},mathmlBuilder:Lt});const Gt={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint","":"\\intclockwise","":"\\varointclockwise","":"\\iiiint","":"\\intbar","":"\\intBar","":"\\fint","":"\\rppolint","":"\\scpolint","":"\\pointint","":"\\sqint","":"\\intlarhk","":"\\intx","":"\\intcap","":"\\intcup"};c({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\sgn","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:Ye(n),needsLeadingSpace:r.length>0&&It.includes(r),name:t}},mathmlBuilder:Lt}),c({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:Ye(n),needsLeadingSpace:r.length>0&&It.includes(r),name:t}},mathmlBuilder:Lt}),c({type:"op",names:["\\int","\\iint","\\iiint","\\iiiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\intbar","\\intBar","\\fint","\\rppolint","\\scpolint","\\pointint","\\sqint","\\intlarhk","\\intx","\\intcap","\\intcup","","","","","","","","","","","","","","","","","","","",""],props:{numArgs:0},handler({parser:e,funcName:t}){let r=t;return 1===r.length&&(r=Gt[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,stack:!1,name:r}},mathmlBuilder:Lt});const Dt={};function Pt(e,t){Dt[e]=t}c({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=e.prevAtomType,o=e.gullet.future().text;return{type:"operatorname",mode:e.mode,body:p(n),alwaysHandleSupSub:"\\operatornamewithlimits"===t,limits:!1,parentIsSupSub:!1,isFollowedByDelimiter:Ye(o),needsLeadingSpace:s.length>0&&It.includes(s)}},mathmlBuilder:(e,t)=>{let r,n=ie(e.body,t.withFont("mathrm")),s=!0;for(let e=0;e<n.length;e++){let t=n[e];if(t instanceof N.MathNode)switch("mrow"===t.type&&1===t.children.length&&t.children[0]instanceof N.MathNode&&(t=t.children[0]),t.type){case"mi":case"mn":case"ms":case"mtext":break;case"mspace":if(t.attributes.width){const r=t.attributes.width.replace("em",""),o=Nt(Number(r));""===o?s=!1:n[e]=new N.MathNode("mtext",[new N.TextNode(o)])}break;case"mo":{const e=t.children[0];1===t.children.length&&e instanceof N.TextNode?e.text=e.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):s=!1;break}default:s=!1}else s=!1}if(s){const e=n.map((e=>e.toText())).join("");n=[new N.TextNode(e)]}else if(1===n.length&&["mover","munder"].includes(n[0].type)&&("mi"===n[0].children[0].type||"mtext"===n[0].children[0].type)){if(n[0].children[0].type="mi",e.parentIsSupSub)return new N.MathNode("mrow",n);{const e=new N.MathNode("mo",[re("","text")]);return N.newDocumentFragment([n[0],e])}}if(s?(r=new N.MathNode("mi",n),1===n[0].text.length&&r.setAttribute("mathvariant","normal")):r=new N.MathNode("mrow",n),!e.parentIsSupSub){const t=[r,new N.MathNode("mo",[re("","text")])];if(e.needsLeadingSpace){const e=new N.MathNode("mspace");e.setAttribute("width","0.1667em"),t.unshift(e)}if(!e.isFollowedByDelimiter){const e=new N.MathNode("mspace");e.setAttribute("width","0.1667em"),t.push(e)}return N.newDocumentFragment(t)}return r}}),Pt("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),m({type:"ordgroup",mathmlBuilder:(e,t)=>le(e.body,t,e.semisimple)}),c({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"phantom",mode:e.mode,body:p(r)}},mathmlBuilder:(e,t)=>{const r=ie(e.body,t);return new N.MathNode("mphantom",r)}}),c({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"hphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=ie(p(e.body),t),n=new N.MathNode("mphantom",r),s=new N.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}}),c({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"vphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=ie(p(e.body),t),n=new N.MathNode("mphantom",r),s=new N.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}}),c({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>({type:"pmb",mode:e.mode,body:p(t[0])}),mathmlBuilder(e,t){const r=ie(e.body,t),n=A(r);return n.setAttribute("style","font-weight:bold"),n}});const Rt=(e,t)=>{const r=t.withLevel(st),n=new N.MathNode("mpadded",[ce(e.body,r)]),s=ve(e.dy,t);return n.setAttribute("voffset",s.number+s.unit),s.number>0?n.style.padding=s.number+s.unit+" 0 0 0":n.style.padding="0 0 "+Math.abs(s.number)+s.unit+" 0",n};c({type:"raise",names:["\\raise","\\lower"],props:{numArgs:2,argTypes:["size","primitive"],primitive:!0},handler({parser:e,funcName:t},r){const n=Oe(r[0],"size").value;"\\lower"===t&&(n.number*=-1);const s=r[1];return{type:"raise",mode:e.mode,dy:n,body:s}},mathmlBuilder:Rt}),c({type:"raise",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler({parser:e,funcName:t},r){const n=Oe(r[0],"size").value,s=r[1];return{type:"raise",mode:e.mode,dy:n,body:s}},mathmlBuilder:Rt}),c({type:"ref",names:["\\ref","\\eqref"],props:{numArgs:1,argTypes:["raw"]},handler:({parser:e,funcName:t},r)=>({type:"ref",mode:e.mode,funcName:t,string:r[0].string.replace(Tt,"")}),mathmlBuilder(e,t){const r="\\ref"===e.funcName?["tml-ref"]:["tml-ref","tml-eqref"],n=new N.MathNode("mtext",[new N.TextNode("")],r);return n.setAttribute("href","#"+e.string),n}}),c({type:"reflect",names:["\\reflectbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:({parser:e},t)=>({type:"reflect",mode:e.mode,body:t[0]}),mathmlBuilder(e,t){const r=ce(e.body,t);return r.style.transform="scaleX(-1)",r}}),c({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler:({parser:e})=>({type:"internal",mode:e.mode})}),c({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler({parser:e},t,r){const n=r[0],s=Oe(t[0],"size"),o=Oe(t[1],"size");return{type:"rule",mode:e.mode,shift:n&&Oe(n,"size").value,width:s.value,height:o.value}},mathmlBuilder(e,t){const r=ve(e.width,t),n=ve(e.height,t),s=e.shift?ve(e.shift,t):{number:0,unit:"em"},o=t.color&&t.getColor()||"black",a=new N.MathNode("mspace");if(r.number>0&&n.number>0&&a.setAttribute("mathbackground",o),a.setAttribute("width",r.number+r.unit),a.setAttribute("height",n.number+n.unit),0===s.number)return a;const i=new N.MathNode("mpadded",[a]);return s.number>=0?i.setAttribute("height","+"+s.number+s.unit):(i.setAttribute("height",s.number+s.unit),i.setAttribute("depth","+"+-s.number+s.unit)),i.setAttribute("voffset",s.number+s.unit),i}});const jt={"\\tiny":.5,"\\sixptsize":.6,"\\Tiny":.6,"\\scriptsize":.7,"\\footnotesize":.8,"\\small":.9,"\\normalsize":1,"\\large":1.2,"\\Large":1.44,"\\LARGE":1.728,"\\huge":2.074,"\\Huge":2.488};c({type:"sizing",names:["\\tiny","\\sixptsize","\\Tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],props:{numArgs:0,allowedInText:!0},handler:({breakOnTokenText:e,funcName:t,parser:r},n)=>{r.settings.strict&&"math"===r.mode&&console.log(`Temml strict-mode warning: Command ${t} is invalid in math mode.`);const s=r.parseExpression(!1,e,!0);return{type:"sizing",mode:r.mode,funcName:t,body:s}},mathmlBuilder:(e,t)=>{const r=t.withFontSize(jt[e.funcName]),n=ie(e.body,r),s=A(n),o=(jt[e.funcName]/t.fontSize).toFixed(4);return s.setAttribute("mathsize",o+"em"),s}}),c({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:({parser:e},t,r)=>{let n=!1,s=!1;const o=r[0]&&Oe(r[0],"ordgroup");if(o){let e="";for(let t=0;t<o.body.length;++t){if(e=o.body[t].text,"t"===e)n=!0;else{if("b"!==e){n=!1,s=!1;break}s=!0}}}else n=!0,s=!0;const a=t[0];return{type:"smash",mode:e.mode,body:a,smashHeight:n,smashDepth:s}},mathmlBuilder:(e,t)=>{const r=new N.MathNode("mpadded",[ce(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),c({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e},t,r){const n=r[0],s=t[0];return{type:"sqrt",mode:e.mode,body:s,index:n}},mathmlBuilder(e,t){const{body:r,index:n}=e;return n?new N.MathNode("mroot",[ce(r,t),ce(n,t.incrementLevel())]):new N.MathNode("msqrt",[ce(r,t)])}});const Ut={display:0,text:1,script:2,scriptscript:3},Ht={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]};c({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({breakOnTokenText:e,funcName:t,parser:r},n){const s=r.parseExpression(!0,e,!0),o=t.slice(1,t.length-5);return{type:"styling",mode:r.mode,scriptLevel:o,body:s}},mathmlBuilder(e,t){const r=t.withLevel(Ut[e.scriptLevel]),n=ie(e.body,r),s=A(n),o=Ht[e.scriptLevel];return s.setAttribute("scriptlevel",o[0]),s.setAttribute("displaystyle",o[1]),s}});const Vt=/^m(over|under|underover)$/;m({type:"supsub",mathmlBuilder(e,t){let r,n,s=!1,o=!1,a=!1,i=!1;e.base&&"horizBrace"===e.base.type&&(n=!!e.sup,n===e.base.isOver&&(s=!0,r=e.base.isOver)),!e.base||e.base.stack||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0,o=!e.base.symbol,a=o&&!e.isFollowedByDelimiter,i=e.base.needsLeadingSpace);const l=e.base&&e.base.stack?[ce(e.base.body[0],t)]:[ce(e.base,t)],c=t.inSubOrSup();if(e.sub&&l.push(ce(e.sub,c)),e.sup){const t=ce(e.sup,c),r="mrow"===t.type?t.children[0]:t;"mo"===r.type&&r.classes.includes("tml-prime")&&e.base&&e.base.text&&"f"===e.base.text&&r.classes.push("prime-pad"),l.push(t)}let m;if(s)m=r?"mover":"munder";else if(e.sub)if(e.sup){const r=e.base;m=r&&("op"===r.type&&r.limits||"multiscript"===r.type)&&(t.level===nt||r.alwaysHandleSupSub)||r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(t.level===nt||r.limits)?"munderover":"msubsup"}else{const r=e.base;m=r&&"op"===r.type&&r.limits&&(t.level===nt||r.alwaysHandleSupSub)||r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(r.limits||t.level===nt)?"munder":"msub"}else{const r=e.base;m=r&&"op"===r.type&&r.limits&&(t.level===nt||r.alwaysHandleSupSub)||r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(r.limits||t.level===nt)?"mover":"msup"}let u=new N.MathNode(m,l);if(o){const e=new N.MathNode("mo",[re("","text")]);if(i){const t=new N.MathNode("mspace");t.setAttribute("width","0.1667em"),u=N.newDocumentFragment([t,u,e])}else u=N.newDocumentFragment([u,e]);if(a){const e=new N.MathNode("mspace");e.setAttribute("width","0.1667em"),u.children.push(e)}}else Vt.test(m)&&(u=new N.MathNode("mrow",[u]));return u}});const _t=["\\shortmid","\\nshortmid","\\shortparallel","\\nshortparallel","\\smallsetminus"],Wt=["\\Rsh","\\Lsh","\\restriction"];m({type:"atom",mathmlBuilder(e,t){const r=new N.MathNode("mo",[re(e.text,e.mode)]);return"punct"===e.family?r.setAttribute("separator","true"):"open"===e.family||"close"===e.family?"open"===e.family?(r.setAttribute("form","prefix"),r.setAttribute("stretchy","false")):"close"===e.family&&(r.setAttribute("form","postfix"),r.setAttribute("stretchy","false")):"\\mid"===e.text?(r.setAttribute("lspace","0.22em"),r.setAttribute("rspace","0.22em"),r.setAttribute("stretchy","false")):"rel"===e.family&&(e=>{if(1===e.length){const t=e.codePointAt(0);return 8591<t&&t<8704}return e.indexOf("arrow")>-1||e.indexOf("harpoon")>-1||Wt.includes(e)})(e.text)?r.setAttribute("stretchy","false"):_t.includes(e.text)?r.setAttribute("mathsize","70%"):":"===e.text&&(r.attributes.lspace="0.2222em",r.attributes.rspace="0.2222em"),r}});const Xt={mathbf:"bold",mathrm:"normal",textit:"italic",mathit:"italic",mathnormal:"italic",mathbb:"double-struck",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"},Zt=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsc"===t.fontFamily)return"normal";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"sans-serif-bold":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";const r=t.font;if(!r||"mathnormal"===r)return null;const n=e.mode;switch(r){case"mathit":case"greekItalic":return"italic";case"mathrm":{const t=e.text.codePointAt(0);return 939<t&&t<975?"italic":"normal"}case"up@greek":return"normal";case"boldsymbol":case"mathboldsymbol":return"bold-italic";case"mathbf":return"bold";case"mathbb":return"double-struck";case"mathfrak":return"fraktur";case"mathscr":case"mathcal":return"script";case"mathsf":return"sans-serif";case"mathtt":return"monospace"}let s=e.text;return E[n][s]&&E[n][s].replace&&(s=E[n][s].replace),Object.prototype.hasOwnProperty.call(Xt,r)?Xt[r]:null},Yt=Object.freeze({B:8426,E:8427,F:8427,H:8387,I:8391,L:8390,M:8422,R:8393,e:8394,g:8355,o:8389}),Kt=Object.freeze({C:8426,H:8388,I:8392,R:8394,Z:8398}),Jt=Object.freeze({C:8383,H:8389,N:8391,P:8393,Q:8393,R:8395,Z:8394}),Qt=Object.freeze({"":119527,"":119564,"":119534,"":119577,"":119535,"":119563}),er=Object.freeze({"":119643,"":119680,"":119650,"":119693,"":119651,"":119679}),tr=Object.freeze({"":119701,"":119738,"":119708,"":119751,"":119709,"":119737}),rr=Object.freeze({"":119759,"":119796,"":119766,"":119809,"":119767,"":119795}),nr=Object.freeze({upperCaseLatin:{normal:e=>0,bold:e=>119743,italic:e=>119795,"bold-italic":e=>119847,script:e=>Yt[e]||119899,"script-bold":e=>119951,fraktur:e=>Kt[e]||120003,"fraktur-bold":e=>120107,"double-struck":e=>Jt[e]||120055,"sans-serif":e=>120159,"sans-serif-bold":e=>120211,"sans-serif-italic":e=>120263,"sans-serif-bold-italic":e=>120380,monospace:e=>120367},lowerCaseLatin:{normal:e=>0,bold:e=>119737,italic:e=>"h"===e?8358:119789,"bold-italic":e=>119841,script:e=>Yt[e]||119893,"script-bold":e=>119945,fraktur:e=>119997,"fraktur-bold":e=>120101,"double-struck":e=>120049,"sans-serif":e=>120153,"sans-serif-bold":e=>120205,"sans-serif-italic":e=>120257,"sans-serif-bold-italic":e=>120309,monospace:e=>120361},upperCaseGreek:{normal:e=>0,bold:e=>119575,italic:e=>119633,"bold-italic":e=>119575,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119749,"sans-serif-bold":e=>119749,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119807,monospace:e=>0},lowerCaseGreek:{normal:e=>0,bold:e=>119569,italic:e=>119627,"bold-italic":e=>""===e?119678:119685,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119743,"sans-serif-bold":e=>119743,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119801,monospace:e=>0},varGreek:{normal:e=>0,bold:e=>Qt[e]||-51,italic:e=>0,"bold-italic":e=>er[e]||58,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>tr[e]||116,"sans-serif-bold":e=>tr[e]||116,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>rr[e]||174,monospace:e=>0},numeral:{normal:e=>0,bold:e=>120734,italic:e=>0,"bold-italic":e=>0,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>120744,"sans-serif":e=>120754,"sans-serif-bold":e=>120764,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>0,monospace:e=>120774}}),sr=(e,t)=>{const r=e.codePointAt(0),n=64<r&&r<91?"upperCaseLatin":96<r&&r<123?"lowerCaseLatin":912<r&&r<938?"upperCaseGreek":944<r&&r<970||""===e?"lowerCaseGreek":120545<r&&r<120572||Qt[e]?"varGreek":47<r&&r<58?"numeral":"other";return"other"===n?e:String.fromCodePoint(r+nr[n][t](e))},or=Object.freeze({a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"s",t:"",u:"",v:"",w:"",x:"x",y:"",z:""}),ar=/^\d(?:[\d,.]*\d)?$/,ir=/[A-Ba-z]/,lr=new Set(["\\prime","\\dprime","\\trprime","\\qprime","\\backprime","\\backdprime","\\backtrprime"]);m({type:"mathord",mathmlBuilder(e,t){const r=re(e.text,e.mode,t),n=r.text.codePointAt(0),s=912<n&&n<938?"normal":"italic",o=Zt(e,t)||s;if("script"===o)return r.text=sr(r.text,o),new N.MathNode("mi",[r],[t.font]);"italic"!==o&&(r.text=sr(r.text,o));let a=new N.MathNode("mi",[r]);return"normal"===o&&(a.setAttribute("mathvariant","normal"),1===r.text.length&&(a=new N.MathNode("mrow",[a]))),a}}),m({type:"textord",mathmlBuilder(e,t){let r=e.text;const n=r.codePointAt(0);"textsc"===t.fontFamily&&96<n&&n<123&&(r=or[r]);const s=re(r,e.mode,t),o=Zt(e,t)||"normal";let a;if(ar.test(e.text)){const t="text"===e.mode?"mtext":"mn";if("italic"===o||"bold-italic"===o)return((e,t,r)=>{const n=new N.MathNode(r,[e]),s=new N.MathNode("mstyle",[n]);return s.style["font-style"]="italic",s.style["font-family"]="Cambria, 'Times New Roman', serif","bold-italic"===t&&(s.style["font-weight"]="bold"),s})(s,o,t);"normal"!==o&&(s.text=s.text.split("").map((e=>sr(e,o))).join("")),a=new N.MathNode(t,[s])}else if("text"===e.mode)"normal"!==o&&(s.text=sr(s.text,o)),a=new N.MathNode("mtext",[s]);else if(lr.has(e.text))a=new N.MathNode("mo",[s]),a.classes.push("tml-prime");else{const e=s.text;"italic"!==o&&(s.text=sr(s.text,o)),a=new N.MathNode("mi",[s]),s.text===e&&ir.test(e)&&a.setAttribute("mathvariant","italic")}return a}});const cr={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},mr={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};m({type:"spacing",mathmlBuilder(t,r){let n;if(Object.prototype.hasOwnProperty.call(mr,t.text))n=new N.MathNode("mtext",[new N.TextNode("")]);else{if(!Object.prototype.hasOwnProperty.call(cr,t.text))throw new e(`Unknown type of space "${t.text}"`);n=new N.MathNode("mo"),"\\nobreak"===t.text&&n.setAttribute("linebreak","nobreak")}return n}}),m({type:"tag"});const ur={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm","\\textsc":"textsc"},pr={"\\textbf":"textbf","\\textmd":"textmd"},dr={"\\textit":"textit","\\textup":"textup"};c({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textsc","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"text",mode:e.mode,body:p(n),font:t}},mathmlBuilder(e,t){const r=((e,t)=>{const r=e.font;return r?ur[r]?t.withTextFontFamily(ur[r]):pr[r]?t.withTextFontWeight(pr[r]):t.withTextFontShape(dr[r]):t})(e,t),n=le(e.body,r);return ne(n)}}),c({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,r,n){throw new e("\\verb ended by end of line instead of matching delimiter")},mathmlBuilder(e,t){const r=new N.TextNode(hr(e)),n=new N.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});const hr=e=>e.body.replace(/ /g,e.star?"":""),gr=i;class fr{constructor(e,t,r){this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new fr(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class br{constructor(e,t){this.text=e,this.loc=t}range(e,t){return new br(t,fr.range(this,e))}}const yr="[ \r\n\t]",xr=`(\\\\[a-zA-Z@]+)${yr}*`,wr="[-]",kr=new RegExp(`${wr}+$`),vr=`(${yr}+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]---]${wr}*|[\ud800-\udbff][\udc00-\udfff]${wr}*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|${xr}|\\\\[^\ud800-\udfff])`;class Ar{constructor(e,t){this.input=e,this.settings=t,this.tokenRegex=new RegExp(vr,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){const t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new br("EOF",new fr(this,r,r));const n=this.tokenRegex.exec(t);if(null===n||n.index!==r)throw new e(`Unexpected character: '${t[r]}'`,new br(t[r],new fr(this,r,r+1)));const s=n[6]||n[3]||(n[2]?"\\ ":" ");if(14===this.catcodes[s]){const r=t.indexOf("\n",this.tokenRegex.lastIndex);if(-1===r){if(this.tokenRegex.lastIndex=t.length,this.settings.strict)throw new e("% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode")}else this.tokenRegex.lastIndex=r+1;return this.lex()}return new br(s,new fr(this,r,this.tokenRegex.lastIndex))}}class Nr{constructor(e={},t={}){this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new e("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const t=this.undefStack.pop();for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(void 0===t[e]?delete this.current[e]:this.current[e]=t[e])}has(e){return Object.prototype.hasOwnProperty.call(this.current,e)||Object.prototype.hasOwnProperty.call(this.builtins,e)}get(e){return Object.prototype.hasOwnProperty.call(this.current,e)?this.current[e]:this.builtins[e]}set(e,t,r=!1){if(r){for(let t=0;t<this.undefStack.length;t++)delete this.undefStack[t][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{const t=this.undefStack[this.undefStack.length-1];t&&!Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=this.current[e])}this.current[e]=t}}const Tr=Dt;Pt("\\noexpand",(function(e){const t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}})),Pt("\\expandafter",(function(e){const t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}})),Pt("\\@firstoftwo",(function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}})),Pt("\\@secondoftwo",(function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}})),Pt("\\@ifnextchar",(function(e){const t=e.consumeArgs(3);e.consumeSpaces();const r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}})),Pt("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Pt("\\TextOrMath",(function(e){const t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}));const qr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},Sr=e=>{const t=e.future().text;return"EOF"===t?[null,""]:[qr[t.charAt(0)],t]},Or=(e,t,r)=>{for(let n=1;n<t.length;n++){e*=r,e+=qr[t.charAt(n)]}return e};function Br(e){const t=e.consumeArgs(1)[0];let r="",n=t[t.length-1].loc.start;for(let e=t.length-1;e>=0;e--){const s=t[e].loc.start;s>n&&(r+=" ",n=s),r+=t[e].text,n+=t[e].text.length}return r}Pt("\\char",(function(t){let r,n=t.popToken(),s="";if("'"===n.text)r=8,n=t.popToken();else if('"'===n.text)r=16,n=t.popToken();else if("`"===n.text)if(n=t.popToken(),"\\"===n.text[0])s=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new e("\\char` missing argument");s=n.text.charCodeAt(0)}else r=10;if(r){let o,a=n.text;if(s=qr[a.charAt(0)],null==s||s>=r)throw new e(`Invalid base-${r} digit ${n.text}`);for(s=Or(s,a,r),[o,a]=Sr(t);null!=o&&o<r;)s*=r,s+=o,s=Or(s,a,r),t.popToken(),[o,a]=Sr(t)}return`\\@char{${s}}`})),Pt("\\surd","\\sqrt{\\vphantom{|}}"),Pt("","\\oplus"),Pt("\\long",""),Pt("\\bgroup","{"),Pt("\\egroup","}"),Pt("~","\\nobreakspace"),Pt("\\lq","`"),Pt("\\rq","'"),Pt("\\aa","\\r a"),Pt("\\Bbbk","\\Bbb{k}"),Pt("\\mathstrut","\\vphantom{(}"),Pt("\\underbar","\\underline{\\text{#1}}"),Pt("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),Pt("","\\vdots"),Pt("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Pt("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Pt("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Pt("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");const Mr={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcap":"\\dotsb","\\bigsqcup":"\\dotsb","\\bigtimes":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Pt("\\dots",(function(e){let t="\\dotso";const r=e.expandAfterFuture().text;return r in Mr?t=Mr[r]:("\\not"===r.slice(0,4)||r in E.math&&["bin","rel"].includes(E.math[r].group))&&(t="\\dotsb"),t}));const Cr={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Pt("\\dotso",(function(e){return e.future().text in Cr?"\\ldots\\,":"\\ldots"})),Pt("\\dotsc",(function(e){const t=e.future().text;return t in Cr&&","!==t?"\\ldots\\,":"\\ldots"})),Pt("\\cdots",(function(e){return e.future().text in Cr?"\\@cdots\\,":"\\@cdots"})),Pt("\\dotsb","\\cdots"),Pt("\\dotsm","\\cdots"),Pt("\\dotsi","\\!\\cdots"),Pt("\\idotsint","\\dotsi"),Pt("\\dotsx","\\ldots\\,"),Pt("\\DOTSI","\\relax"),Pt("\\DOTSB","\\relax"),Pt("\\DOTSX","\\relax"),Pt("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Pt("\\,","{\\tmspace+{3mu}{.1667em}}"),Pt("\\thinspace","\\,"),Pt("\\>","\\mskip{4mu}"),Pt("\\:","{\\tmspace+{4mu}{.2222em}}"),Pt("\\medspace","\\:"),Pt("\\;","{\\tmspace+{5mu}{.2777em}}"),Pt("\\thickspace","\\;"),Pt("\\!","{\\tmspace-{3mu}{.1667em}}"),Pt("\\negthinspace","\\!"),Pt("\\negmedspace","{\\tmspace-{4mu}{.2222em}}"),Pt("\\negthickspace","{\\tmspace-{5mu}{.277em}}"),Pt("\\enspace","\\kern.5em "),Pt("\\enskip","\\hskip.5em\\relax"),Pt("\\quad","\\hskip1em\\relax"),Pt("\\qquad","\\hskip2em\\relax"),Pt("\\AA","\\TextOrMath{\\Angstrom}{\\mathring{A}}\\relax"),Pt("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Pt("\\tag@paren","\\tag@literal{({#1})}"),Pt("\\tag@literal",(t=>{if(t.macros.get("\\df@tag"))throw new e("Multiple \\tag");return"\\def\\df@tag{\\text{#1}}"})),Pt("\\bmod","\\mathbin{\\text{mod}}"),Pt("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Pt("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Pt("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Pt("\\newline","\\\\\\relax"),Pt("\\TeX","\\textrm{T}\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125em\\textrm{X}"),Pt("\\LaTeX","\\textrm{L}\\kern-.35em\\raisebox{0.2em}{\\scriptstyle A}\\kern-.15em\\TeX"),Pt("\\Temml","\\textrm{T}\\kern-0.2em\\lower{0.2em}{\\textrm{E}}\\kern-0.08em{\\textrm{M}\\kern-0.08em\\raise{0.2em}\\textrm{M}\\kern-0.08em\\textrm{L}}"),Pt("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Pt("\\@hspace","\\hskip #1\\relax"),Pt("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Pt("\\colon",'\\mathpunct{\\char"3a}'),Pt("\\prescript","\\pres@cript{_{#1}^{#2}}{}{#3}"),Pt("\\ordinarycolon",'\\char"3a'),Pt("\\vcentcolon","\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}}"),Pt("\\coloneq",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2212}'),Pt("\\Coloneq",'\\mathrel{\\char"2237\\char"2212}'),Pt("\\Eqqcolon",'\\mathrel{\\char"3d\\char"2237}'),Pt("\\Eqcolon",'\\mathrel{\\char"2212\\char"2237}'),Pt("\\colonapprox",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2248}'),Pt("\\Colonapprox",'\\mathrel{\\char"2237\\char"2248}'),Pt("\\colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}'),Pt("\\Colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}'),Pt("\\ratio","\\vcentcolon"),Pt("\\coloncolon","\\dblcolon"),Pt("\\colonequals","\\coloneqq"),Pt("\\coloncolonequals","\\Coloneqq"),Pt("\\equalscolon","\\eqqcolon"),Pt("\\equalscoloncolon","\\Eqqcolon"),Pt("\\colonminus","\\coloneq"),Pt("\\coloncolonminus","\\Coloneq"),Pt("\\minuscolon","\\eqcolon"),Pt("\\minuscoloncolon","\\Eqcolon"),Pt("\\coloncolonapprox","\\Colonapprox"),Pt("\\coloncolonsim","\\Colonsim"),Pt("\\notni","\\mathrel{\\char`}"),Pt("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Pt("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Pt("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Pt("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Pt("\\varlimsup","\\DOTSB\\operatorname*{\\overline{\\text{lim}}}"),Pt("\\varliminf","\\DOTSB\\operatorname*{\\underline{\\text{lim}}}"),Pt("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{\\text{lim}}}"),Pt("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{\\text{lim}}}"),Pt("\\centerdot","{\\medspace\\rule{0.167em}{0.189em}\\medspace}"),Pt("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Pt("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Pt("\\plim","\\DOTSB\\operatorname*{plim}"),Pt("\\leftmodels","\\mathop{\\reflectbox{$\\models$}}"),Pt("\\bra","\\mathinner{\\langle{#1}|}"),Pt("\\ket","\\mathinner{|{#1}\\rangle}"),Pt("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Pt("\\Bra","\\left\\langle#1\\right|"),Pt("\\Ket","\\left|#1\\right\\rangle");const zr=(e,t)=>{const r=`}\\,\\middle${"|"===t[0]?"\\vert":"\\Vert"}\\,{`;return e.slice(0,t.index)+r+e.slice(t.index+t[0].length)};Pt("\\Braket",(function(e){let t=Br(e);const r=/\|\||\||\\\|/g;let n;for(;null!==(n=r.exec(t));)t=zr(t,n);return"\\left\\langle{"+t+"}\\right\\rangle"})),Pt("\\Set",(function(e){let t=Br(e);const r=/\|\||\||\\\|/.exec(t);return r&&(t=zr(t,r)),"\\left\\{\\:{"+t+"}\\:\\right\\}"})),Pt("\\set",(function(e){return"\\{{"+Br(e).replace(/\|/,"}\\mid{")+"}\\}"})),Pt("\\angln","{\\angl n}"),Pt("\\odv","\\@ifstar\\odv@next\\odv@numerator"),Pt("\\odv@numerator","\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}"),Pt("\\odv@next","\\frac{\\mathrm{d}}{\\mathrm{d}#2}#1"),Pt("\\pdv","\\@ifstar\\pdv@next\\pdv@numerator");const Er=e=>{const t=e[0][0].text,r=(e=>{let t="";for(let r=e.length-1;r>-1;r--)t+=e[r].text;return t})(e[1]).split(","),n=String(r.length),s="1"===n?"\\partial":`\\partial^${n}`;let o="";return r.map((e=>{o+="\\partial "+e.trim()+"\\,"})),[t,s,o.replace(/\\,$/,"")]};Pt("\\pdv@numerator",(function(e){const[t,r,n]=Er(e.consumeArgs(2));return`\\frac{${r} ${t}}{${n}}`})),Pt("\\pdv@next",(function(e){const[t,r,n]=Er(e.consumeArgs(2));return`\\frac{${r}}{${n}} ${t}`})),Pt("\\upalpha","\\up@greek{\\alpha}"),Pt("\\upbeta","\\up@greek{\\beta}"),Pt("\\upgamma","\\up@greek{\\gamma}"),Pt("\\updelta","\\up@greek{\\delta}"),Pt("\\upepsilon","\\up@greek{\\epsilon}"),Pt("\\upzeta","\\up@greek{\\zeta}"),Pt("\\upeta","\\up@greek{\\eta}"),Pt("\\uptheta","\\up@greek{\\theta}"),Pt("\\upiota","\\up@greek{\\iota}"),Pt("\\upkappa","\\up@greek{\\kappa}"),Pt("\\uplambda","\\up@greek{\\lambda}"),Pt("\\upmu","\\up@greek{\\mu}"),Pt("\\upnu","\\up@greek{\\nu}"),Pt("\\upxi","\\up@greek{\\xi}"),Pt("\\upomicron","\\up@greek{\\omicron}"),Pt("\\uppi","\\up@greek{\\pi}"),Pt("\\upalpha","\\up@greek{\\alpha}"),Pt("\\uprho","\\up@greek{\\rho}"),Pt("\\upsigma","\\up@greek{\\sigma}"),Pt("\\uptau","\\up@greek{\\tau}"),Pt("\\upupsilon","\\up@greek{\\upsilon}"),Pt("\\upphi","\\up@greek{\\phi}"),Pt("\\upchi","\\up@greek{\\chi}"),Pt("\\uppsi","\\up@greek{\\psi}"),Pt("\\upomega","\\up@greek{\\omega}"),Pt("\\invamp",'\\mathbin{\\char"214b}'),Pt("\\parr",'\\mathbin{\\char"214b}'),Pt("\\with",'\\mathbin{\\char"26}'),Pt("\\multimapinv",'\\mathrel{\\char"27dc}'),Pt("\\multimapboth",'\\mathrel{\\char"29df}'),Pt("\\scoh",'{\\mkern5mu\\char"2322\\mkern5mu}'),Pt("\\sincoh",'{\\mkern5mu\\char"2323\\mkern5mu}'),Pt("\\coh",'{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2322}}}\n{\\smash{\\lower4mu{\\char"2323}}}\\mkern5mu}'),Pt("\\incoh",'{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2323}}}\n{\\smash{\\lower4mu{\\char"2322}}}\\mkern5mu}'),Pt("\\standardstate","\\text{\\tiny\\char`}");const Ir={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class $r{constructor(e,t,r){this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Nr(Tr,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new Ar(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){let t,r,n;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),({tokens:n,end:r}=this.consumeArg(["]"]))}else({tokens:n,start:t,end:r}=this.consumeArg());return this.pushToken(new br("EOF",r.loc)),this.pushTokens(n),t.range(r,"")}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(t){const r=[],n=t&&t.length>0;n||this.consumeSpaces();const s=this.future();let o,a=0,i=0;do{if(o=this.popToken(),r.push(o),"{"===o.text)++a;else if("}"===o.text){if(--a,-1===a)throw new e("Extra }",o)}else if("EOF"===o.text)throw new e("Unexpected end of input in a macro argument, expected '"+(t&&n?t[i]:"}")+"'",o);if(t&&n)if((0===a||1===a&&"{"===t[i])&&o.text===t[i]){if(++i,i===t.length){r.splice(-i,i);break}}else i=0}while(0!==a||n);return"{"===s.text&&"}"===r[r.length-1].text&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:o}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new e("The length of delimiters doesn't match the number of args!");const n=r[0];for(let t=0;t<n.length;t++){const r=this.popToken();if(n[t]!==r.text)throw new e("Use of the macro doesn't match its definition",r)}}const n=[];for(let e=0;e<t;e++)n.push(this.consumeArg(r&&r[e+1]).tokens);return n}expandOnce(t){const r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(null==s||t&&s.unexpandable){if(t&&null==s&&"\\"===n[0]&&!this.isDefined(n))throw new e("Undefined control sequence: "+n);return this.pushToken(r),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new e("Too many expansions: infinite loop or need to increase maxExpand setting");let o=s.tokens;const a=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){o=o.slice();for(let t=o.length-1;t>=0;--t){let r=o[t];if("#"===r.text){if(0===t)throw new e("Incomplete placeholder at end of macro body",r);if(r=o[--t],"#"===r.text)o.splice(t+1,1);else{if(!/^[1-9]$/.test(r.text))throw new e("Not a valid argument number",r);o.splice(t,2,...a[+r.text-1])}}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){const e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new br(e)]):void 0}expandTokens(e){const t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(!1===this.expandOnce(!0)){const e=this.stack.pop();e.treatAsRelax&&(e.noexpand=!1,e.treatAsRelax=!1),t.push(e)}return t}expandMacroAsText(e){const t=this.expandMacro(e);return t?t.map((e=>e.text)).join(""):t}_getExpansion(e){const t=this.macros.get(e);if(null==t)return t;if(1===e.length){const t=this.lexer.catcodes[e];if(null!=t&&13!==t)return}const r="function"==typeof t?t(this):t;if("string"==typeof r){let e=0;if(-1!==r.indexOf("#")){const t=r.replace(/##/g,"");for(;-1!==t.indexOf("#"+(e+1));)++e}const t=new Ar(r,this.settings),n=[];let s=t.lex();for(;"EOF"!==s.text;)n.push(s),s=t.lex();n.reverse();return{tokens:n,numArgs:e}}return r}isDefined(e){return this.macros.has(e)||Object.prototype.hasOwnProperty.call(gr,e)||Object.prototype.hasOwnProperty.call(E.math,e)||Object.prototype.hasOwnProperty.call(E.text,e)||Object.prototype.hasOwnProperty.call(Ir,e)}isExpandable(e){const t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:Object.prototype.hasOwnProperty.call(gr,e)&&!gr[e].primitive}}const Lr=/^[]/,Fr=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"w","":"x","":"y","":"z","":"","":"","":"","":"","":"","":""}),Gr=Object.freeze({"":"A","":"B","":"C","":"D","":"E","":"F","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"Q","":"R","":"S","":"T","":"U","":"V","":"W","":"X","":"Y","":"Z"});var Dr={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Pr={"":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"b","":"c","":"c","":"c","":"c","":"d","":"d","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"k","":"k","":"l","":"l","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"p","":"p","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"B","":"C","":"C","":"C","":"C","":"D","":"D","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"K","":"K","":"L","":"L","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"P","":"P","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};const Rr=["bin","op","open","punct","rel"];class jr{constructor(e,t,r=!1){this.mode="math",this.gullet=new $r(e,t,this.mode),this.settings=t,this.isPreamble=r,this.leftrightDepth=0,this.prevAtomType=""}expect(t,r=!0){if(this.fetch().text!==t)throw new e(`Expected '${t}', got '${this.fetch().text}'`,this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");const e=this.parseExpression(!1);if(this.expect("EOF"),this.isPreamble){const e=Object.create(null);return Object.entries(this.gullet.macros.current).forEach((([t,r])=>{e[t]=r})),this.gullet.endGroup(),e}const t=this.gullet.macros.get("\\df@tag");return this.gullet.endGroup(),t&&(this.gullet.macros.current["\\df@tag"]=t),e}static get endOfExpression(){return["}","\\endgroup","\\end","\\right","\\endtoggle","&"]}subparse(e){const t=this.nextToken;this.consume(),this.gullet.pushToken(new br("}")),this.gullet.pushTokens(e);const r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t,r){const n=[];for(;;){"math"===this.mode&&this.consumeSpaces();const s=this.fetch();if(-1!==jr.endOfExpression.indexOf(s.text))break;if(t&&s.text===t)break;if(r&&"\\middle"===s.text)break;if(e&&gr[s.text]&&gr[s.text].infix)break;const o=this.parseAtom(t);if(!o)break;"internal"!==o.type&&(n.push(o),this.prevAtomType="atom"===o.type?o.family:o.type)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){let r,n=-1;for(let s=0;s<t.length;s++)if("infix"===t[s].type){if(-1!==n)throw new e("only one infix operator per group",t[s].token);n=s,r=t[s].replaceWith}if(-1!==n&&r){let e,s;const o=t.slice(0,n),a=t.slice(n+1);let i;return e=1===o.length&&"ordgroup"===o[0].type?o[0]:{type:"ordgroup",mode:this.mode,body:o},s=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},i="\\\\abovefrac"===r?this.callFunction(r,[e,t[n],s],[]):this.callFunction(r,[e,s],[]),[i]}return t}handleSupSubscript(t){const r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();const s=this.parseGroup(t);if(!s)throw new e("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(e){const t=[];for(let r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});const r={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]}}parseAtom(t){const r=this.parseGroup("atom",t);if("text"===this.mode)return r;let n,s;for(;;){this.consumeSpaces();const t=this.fetch();if("\\limits"===t.text||"\\nolimits"===t.text){if(r&&"op"===r.type){const e="\\limits"===t.text;r.limits=e,r.alwaysHandleSupSub=!0}else{if(!r||"operatorname"!==r.type)throw new e("Limit controls must follow a math operator",t);r.alwaysHandleSupSub&&(r.limits="\\limits"===t.text)}this.consume()}else if("^"===t.text){if(n)throw new e("Double superscript",t);n=this.handleSupSubscript("superscript")}else if("_"===t.text){if(s)throw new e("Double subscript",t);s=this.handleSupSubscript("subscript")}else if("'"===t.text){if(n)throw new e("Double superscript",t);const r={type:"textord",mode:this.mode,text:"\\prime"},s=[r];for(this.consume();"'"===this.fetch().text;)s.push(r),this.consume();"^"===this.fetch().text&&s.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:s}}else{if(!Fr[t.text])break;{const e=Lr.test(t.text),r=[];for(r.push(new br(Fr[t.text])),this.consume();;){const t=this.fetch().text;if(!Fr[t])break;if(Lr.test(t)!==e)break;r.unshift(new br(Fr[t])),this.consume()}const o=this.subparse(r);e?s={type:"ordgroup",mode:"math",body:o}:n={type:"ordgroup",mode:"math",body:o}}}}if(n||s){if(r&&"multiscript"===r.type&&!r.postscripts)return r.postscripts={sup:n,sub:s},r;{const e=!r||"op"!==r.type&&"operatorname"!==r.type?void 0:Ye(this.nextToken.text);return{type:"supsub",mode:this.mode,base:r,sup:n,sub:s,isFollowedByDelimiter:e}}}return r}parseFunction(t,r){const n=this.fetch(),s=n.text,o=gr[s];if(!o)return null;if(this.consume(),r&&"atom"!==r&&!o.allowedInArgument)throw new e("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if("text"===this.mode&&!o.allowedInText)throw new e("Can't use function '"+s+"' in text mode",n);if("math"===this.mode&&!1===o.allowedInMath)throw new e("Can't use function '"+s+"' in math mode",n);const a=this.prevAtomType,{args:i,optArgs:l}=this.parseArguments(s,o);return this.prevAtomType=a,this.callFunction(s,i,l,n,t)}callFunction(t,r,n,s,o){const a={funcName:t,parser:this,token:s,breakOnTokenText:o},i=gr[t];if(i&&i.handler)return i.handler(a,r,n);throw new e(`No function handler for ${t}`)}parseArguments(t,r){const n=r.numArgs+r.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};const s=[],o=[];for(let a=0;a<n;a++){let n=r.argTypes&&r.argTypes[a];const i=a<r.numOptionalArgs;(r.primitive&&null==n||"sqrt"===r.type&&1===a&&null==o[0])&&(n="primitive");const l=this.parseGroupOfType(`argument to '${t}'`,n,i);if(i)o.push(l);else{if(null==l)throw new e("Null argument, please report this as a bug");s.push(l)}}return{args:s,optArgs:o}}parseGroupOfType(t,r,n){switch(r){case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{const e=this.parseArgumentGroup(n,"text");return null!=e?{type:"styling",mode:e.mode,body:[e],scriptLevel:"text"}:null}case"raw":{const e=this.parseStringGroup("raw",n);return null!=e?{type:"raw",mode:"text",string:e.text}:null}case"primitive":{if(n)throw new e("A primitive argument cannot be optional");const r=this.parseGroup(t);if(null==r)throw new e("Expected group as "+t,this.fetch());return r}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new e("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;;){const e=this.fetch().text;if(" "!==e&&""!==e&&""!==e)break;this.consume()}}parseStringGroup(e,t){const r=this.gullet.scanArgument(t);if(null==r)return null;let n,s="";for(;"EOF"!==(n=this.fetch()).text;)s+=n.text,this.consume();return this.consume(),r.text=s,r}parseRegexGroup(t,r){const n=this.fetch();let s,o=n,a="";for(;"EOF"!==(s=this.fetch()).text&&t.test(a+s.text);)o=s,a+=o.text,this.consume();if(""===a)throw new e("Invalid "+r+": '"+n.text+"'",n);return n.range(o,a)}parseSizeGroup(t){let r,n=!1;if(this.gullet.consumeSpaces(),r=t||"{"===this.gullet.future().text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"),!r)return null;t||0!==r.text.length||(r.text="0pt",n=!0);const s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new e("Invalid size: '"+r.text+"'",r);const o={number:+(s[1]+s[2]),unit:s[3]};if(!we(o))throw new e("Invalid unit: '"+o.unit+"'",r);return{type:"size",mode:this.mode,value:o,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;let r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return r=t.text.replace(/{\u2044}/g,"/"),{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){const r=this.gullet.scanArgument(e);if(null==r)return null;const n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();const s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return t&&this.switchMode(n),o}parseGroup(e,t){const r=this.fetch(),n=r.text;let s;if("{"===n||"\\begingroup"===n||"\\toggle"===n){this.consume();const e="{"===n?"}":"\\begingroup"===n?"\\endgroup":"\\endtoggle";this.gullet.beginGroup();const t=this.parseExpression(!1,e),o=this.fetch();this.expect(e),this.gullet.endGroup(),s={type:"\\endtoggle"===o.text?"toggle":"ordgroup",mode:this.mode,loc:fr.range(r,o),body:t,semisimple:"\\begingroup"===n||void 0}}else s=this.parseFunction(t,e)||this.parseSymbol(),null!=s||"\\"!==n[0]||Object.prototype.hasOwnProperty.call(Ir,n)||(s=this.formatUnsupportedCmd(n),this.consume());return s}formLigatures(e){let t=e.length-1;for(let r=0;r<t;++r){const n=e[r],s=n.text;"-"===s&&"-"===e[r+1].text&&(r+1<t&&"-"===e[r+2].text?(e.splice(r,3,{type:"textord",mode:"text",loc:fr.range(n,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:fr.range(n,e[r+1]),text:"--"}),t-=1)),"'"!==s&&"`"!==s||e[r+1].text!==s||(e.splice(r,2,{type:"textord",mode:"text",loc:fr.range(n,e[r+1]),text:s+s}),t-=1)}}parseSymbol(){const t=this.fetch();let r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();let t=r.slice(5);const n="*"===t.charAt(0);if(n&&(t=t.slice(1)),t.length<2||t.charAt(0)!==t.slice(-1))throw new e("\\verb assertion failed --\n                    please report what input caused this bug");return t=t.slice(1,-1),{type:"verb",mode:"text",body:t,star:n}}if(Object.prototype.hasOwnProperty.call(Pr,r[0])&&!E[this.mode][r[0]]){if(this.settings.strict&&"math"===this.mode)throw new e(`Accented Unicode text character "${r[0]}" used in math mode`,t);r=Pr[r[0]]+r.slice(1)}const n=kr.exec(r);let s;if(n&&(r=r.substring(0,n.index),"i"===r?r="":"j"===r&&(r="")),E[this.mode][r]){let e=E[this.mode][r].group;"bin"===e&&Rr.includes(this.prevAtomType)&&(e="open");const n=fr.range(t);let o;if(Object.prototype.hasOwnProperty.call(C,e)){const t=e;o={type:"atom",mode:this.mode,family:t,loc:n,text:r}}else{if(Gr[r]){this.consume();const e=this.fetch().text.charCodeAt(0),t=65025===e?"mathscr":"mathcal";return 65024!==e&&65025!==e||this.consume(),{type:"font",mode:"math",font:t,body:{type:"mathord",mode:"math",loc:n,text:Gr[r]}}}o={type:e,mode:this.mode,loc:n,text:r}}s=o}else{if(!(r.charCodeAt(0)>=128))return null;if(this.settings.strict&&"math"===this.mode)throw new e(`Unicode text character "${r[0]}" used in math mode`,t);s={type:"textord",mode:"text",loc:fr.range(t),text:r}}if(this.consume(),n)for(let r=0;r<n[0].length;r++){const o=n[0][r];if(!Dr[o])throw new e(`Unknown accent ' ${o}'`,t);const a=Dr[o][this.mode]||Dr[o].text;if(!a)throw new e(`Accent ${o} unsupported in ${this.mode} mode`,t);s={type:"accent",mode:this.mode,loc:fr.range(t),label:a,isStretchy:!1,base:s}}return s}}const Ur=function(t,r){if(!("string"==typeof t||t instanceof String))throw new TypeError("Temml can only parse string typed expression");const n=new jr(t,r);delete n.gullet.macros.current["\\df@tag"];let s=n.parse();if(!(s.length>0&&s[0].type&&"array"===s[0].type&&s[0].addEqnNum)&&n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new e("\\tag works only in display mode");n.gullet.feed("\\df@tag"),s=[{type:"tag",mode:"text",body:s,tag:n.parse()}]}return s},Hr=[2,2,3,3];class Vr{constructor(e){this.level=e.level,this.color=e.color,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontSize=e.fontSize||1,this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.maxSize=e.maxSize}extend(e){const t={level:this.level,color:this.color,font:this.font,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return new Vr(t)}withLevel(e){return this.extend({level:e})}incrementLevel(){return this.extend({level:Math.min(this.level+1,3)})}inSubOrSup(){return this.extend({level:Hr[this.level]})}withColor(e){return this.extend({color:e})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withFontSize(e){return this.extend({fontSize:e})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}getColor(){return this.color}}let _r=function(e,t,r={}){t.textContent="";const n="math"===t.tagName.toLowerCase();n&&(r.wrap="none");const s=Wr(e,r);n||s.children.length>1?(t.textContent="",s.children.forEach((e=>{t.appendChild(e.toNode())}))):t.appendChild(s.toNode())};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: Temml doesn't work in quirks mode. Make sure your website has a suitable doctype."),_r=function(){throw new e("Temml doesn't work in quirks mode.")});const Wr=function(t,r){const n=new a(r);try{const e=Ur(t,n);return ue(e,t,new Vr({level:n.displayMode?nt:st,maxSize:n.maxSize}),n)}catch(r){return function(t,r,n){if(n.throwOnError||!(t instanceof e))throw t;const s=new y(["temml-error"],[new x(r+"\n"+t.toString())]);return s.style.color=n.errorColor,s.style.whiteSpace="pre-line",s}(r,t,n)}};return{version:"0.10.22",render:_r,renderToString:function(e,t){return Wr(e,t).toMarkup()},postProcess:function(e){const t={};let r=0;const n=e.getElementsByClassName("tml-tageqn");for(const e of n){const n=e.getElementsByClassName("tml-eqn");n.length>0&&(r+=1,n[0].id="tml-eqn-"+r);const s=e.getElementsByClassName("tml-label");if(0!==s.length)if(n.length>0)t[s[0].id]=String(r);else{const r=e.getElementsByClassName("tml-tag");r.length>0&&(t[s[0].id]=r[0].textContent)}}[...e.getElementsByClassName("tml-ref")].forEach((e=>{let r=t[e.getAttribute("href").slice(1)];-1===e.className.indexOf("tml-eqref")&&(r=r.replace(/^\(/,""),r=r.replace(/\($/,"")),"("!==r.charAt(0)&&(r="("+r),")"!==r.slice(-1)&&(r+=")"),e.textContent=r}))},ParseError:e,definePreamble:function(e,t){const r=new a(t);if(r.macros={},!("string"==typeof e||e instanceof String))throw new TypeError("Temml can only parse string typed expression");const n=new jr(e,r,!0);delete n.gullet.macros.current["\\df@tag"];return n.parse()},__parse:function(e,t){const r=new a(t);return Ur(e,r)},__renderToMathMLTree:Wr,__defineSymbol:I,__defineMacro:Pt}}();
$(function(){var t=!1;let e=[];$$orginal="";setTimeout(function(){$inputs=$("div.shortAnsText"),$inputs.each(function(t,e){$(e).attr("contenteditable",!0)})},500);var n=$(".previewed-html",window.parent.document)[0];$(n).parents("body");function a(t){var e=(t.target?$(t.target):$(t)).parents("form"),n=e.parent(),a=e.find("div.shortAnsText,textarea"),o=!1;a.each(function(t,e){$(e).hasClass("shortAnsText")?(""!==e.innerHTML.trim()&&(o=!0),n.attr("scorm-saved-ans",e.innerHTML)):(""!==e.value.trim()&&(o=!0),n.attr("scorm-saved-ans",e.value))});var s=n.siblings(".SLA-submit").find(".submit-btn"),i=n.siblings(".SLA-submit").find(".reset-btn");o?(s.removeClass("disabled"),e.addClass("attempted-question"),i.removeClass("disabled")):(s.addClass("disabled"),e.removeClass("attempted-question"),i.addClass("disabled"));var c=e.parents(".group-interactivity-container");c.find("form.attempted-question").length===c.find("form").length?c.addClass("enableSubmit"):c.removeClass("enableSubmit");var l=$(t.target).parents('.customClass[data-type="shortLongAns"]');if(!l.attr("latencyTime")||l.attr("activityStartTime")===l.attr("latencyTime")){let t=new Date,e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();l.attr("latencyTime",e)}"undefined"!=typeof apiHandle&&r(t)}$(document).on("keyup paste",".characters_count",function(t){t.target.value.length>0?$(this).siblings().find(".current_characters").removeClass("hide").html(t.target.value.length+" /"):$(this).siblings().find(".current_characters").addClass("hide")}),$(document).on("input",'.customClass[data-type="shortLongAns"] div.shortAnsText',function(t){a(t)}),$(document).on("keyup",'.customClass[data-type="shortLongAns"] textarea.longAnsText',function(t){a(t)}),$(document).on("keyup paste",".characters_count_extended_response_about_media",function(t){t.target.value&&t.target.value.length>0?$(this).siblings().find(".current_characters").removeClass("hide").html(t.target.value.length+" /"):$(this).siblings().find(".current_characters").addClass("hide")});function o(t){try{let e=t;for(;"string"==typeof e;){if(!e.trim().startsWith("{")&&!e.trim().startsWith("["))return t;if("object"==typeof(e=JSON.parse(e))&&null!==e)return e}}catch(t){}return t}function s(){$(".customClass[data-type='shortLongAns'] .shortLongAns-math-field-Author .auth-mathfield-holder").each(function(t,e){const n=$(e);n.html("");const a=n.attr("data-equation-latex");if(a){const e=MathLive.convertLatexToMathMl(a),o=(new DOMParser).parseFromString(`<math mode='display' style="max-width:100%;border-width: 0px; background: transparent; outline: none; display: inline-flex; overflow-x: auto; overflow-y: hidden;" class="mathFieldEq" id="shortLongAnsMathEq${t}" xmlns="http://www.w3.org/1998/Math/MathML">\n                    <semantics>${e}</semantics>\n                </math>`,"application/xml").documentElement;n.html(o)}})}function r(t){let e={},n="",a="",o="";if($(t.container).hasClass("jodit-container")?(n=$(t.element),a=$(t.element).parents().closest(".shortLongAnsComponent")):a=0!=(n=$(t.target)).closest(".SLA-submit").parent().find(".shortLongAnsComponent").length?n.closest(".SLA-submit").parent().find(".shortLongAnsComponent"):t.closest(".shortLongAnsComponent"),0===a.length){var s=n.closest("section"),r=s.find("form");a=s.find(".shortLongAnsComponent")}else{o=(r=a.find("form")).parent().attr("scorm-saved-ans")}var i=a.hasClass("enableSubmit");if(e={isSubmitEnable:i=!r.hasClass("submitted"),componentId:a.closest('.customClass[data-type="shortLongAns"]').attr("data-saved-index"),dirtyBit:"true"},r.find("textarea.ansJODIT").length>0){const t=r.find("textarea.ansJODIT")[0];if(t){const n=t.__jodit||$(t).data("editorInstance");if(n){const t=n.value&&n.value.trim();e={isSubmitEnable:i,componentId:$(a.parent()).closest('.customClass[data-type="shortLongAns"]').attr("data-saved-index"),dirtyBit:"true"},t&&"<p><br></p>"!==t?e.inputSeleced=t.replace(/<br([^>]*)>/gi,"<br$1 />").replace(/&nbsp;/g," ").replace(/&(?!amp;|lt;|gt;|quot;|apos;|#[0-9]+;)/g,"&amp;"):e={isSubmitEnable:i,componentId:a.closest('.customClass[data-type="shortLongAns"]').attr("data-saved-index"),dirtyBit:"true"}}}}else{var c=!t.target||"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName?o:t.target.value;e.inputSeleced=c||t.context.value}saveAction(t,e)}function i(t,e,n){let a={};a.inputSeleced=t,a.componentId=n.parents('.customClass[data-type="shortLongAns"]').eq(0).attr("data-saved-index"),a.dirtyBit="true",saveAction(e,a)}$(".customClass[data-type='shortLongAns']").each(function(){let t=$(this).find(".shortLongAnsComponent");if(t&&t.attr("data-usersubjectlangformathqa")&&t.attr("data-usersubjectlangformathqa"),"RTE"!==t.attr("answer-type")&&void 0===t.attr("scorm-saved-ans")){let e=t.attr("data-pretext")||"";e=o(e),t.find("input, textarea").each(function(){$(this).val(e)})}if("RTE"==t.attr("answer-type")&&"JODIT"==t.attr("keyboard-type")){let e=$(t).closest(".customClass").attr("data-saved-index").split("-");e.shift();let n=e.join("-"),a=($(t).closest(".customClass").attr("data-no"),$(t).find(".ansJODIT").attr("id"));console.log(n),$(".jodit-container").remove();const o={ELA:["bold","italic","underline","strikethrough","eraser","ul","ol","font","fontsize","paragraph","lineHeight","spellcheck","indent","outdent","align","brush","superscript","subscript","cut","copy","paste","selectall","hr","table","link","symbols","find","fullsize","preview","print","undo","redo"],Math:["bold","italic","underline","strikethrough","eraser","ul","ol","font","fontsize","paragraph","lineHeight","spellcheck","indent","outdent","align","brush","superscript","subscript","cut","copy","paste","selectall","hr","table","link","symbols","find","fullsize","preview","print","undo","redo","customMathField"],WL:[],Notes:[]};setTimeout(function(){const e=`textarea#${a}`,n=document.querySelector(e);let s=function(t){if(!t)return"";let e=t;return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<br\s*\/\s*\/\s*\/?>/gi,"<br />")).replace(/<br(?![a-zA-Z])>/gi,"<br />")).replace(/\/\s*\/>/g,"/>")).replace(/ ng-[a-zA-Z-]+="[^"]*"/g,"")).replace(/<br\s*\/?>\s*[\/\\]*\s*(&gt;)?/gi,"<br />")).replace(/<\/?(s|em|strong|sup|sub|span|u|b|i)(.*?)\/?>/gi,t=>t.replace(/\s*\/?>$/,">"))).replace(/<img([^>]*)>/gi,"<img$1 />")).replace(/<hr([^>]*)>/gi,"<hr$1 />")).replace(/&(?!amp;|lt;|gt;|quot;|apos;|#[0-9]+;)/g,"&amp;")).replace(/<(?=[^a-zA-Z!\/])/g,"&lt;")).replace(/<span[^>]*>\s*<\/span>/gi,"")).replace(/<font[^>]*>\s*<\/font>/gi,"")).replace(/<br(?!\s*\/)>/gi,"<br />")).replace(/<img([^>]*)>/gi,"<img$1 />")).replace(/<\/(s|sup|sub|strong|em|span)>[\s\n]*<\/(s|sup|sub|strong|em|span)>/gi,"</$1></$2>")).replace(/&(?!amp;|lt;|gt;|quot;|apos;|#\d+;)/g,"&amp;")).replace(/&nbsp;/g,"&#160;")).replace(/<span[^>]*>\s*<\/span>/gi,"")).replace(/<div[^>]*>\s*<\/div>/gi,"")).replace(/<\/?[^a-zA-Z0-9]+>/g,"")).replace(/<(?=[^\/a-zA-Z!])/g,"&lt;")}(t.attr("data-pretext"));if(!n)return;n.__jodit&&n.__jodit.destruct();const i=Jodit.make(n,{buttons:[...o.ELA],showXPathInStatusbar:!1,showCharsCounter:!1,showWordsCounter:!1,showStatusbar:!1,toolbarAdaptive:!1,toolbarSticky:!1,events:{afterInit:function(t){t.value=""!=s?s:"",$(".scrollContainer").find(".preview-container").hasClass("preview-container")&&t.e.on("toggleFullSize",function(t){const e=new URL(document.referrer).origin;window.parent.postMessage({type:"JODIT_FULLSCREEN_TOGGLE",isFullSize:t},e)})}}});$(n).data("editorInstance",i),i.events.on("change",function(t){const e=$(i.element.closest("form"));if(e.length){const t=e.parent(),n=i.value.trim(),a=i.editor.textContent.trim();n&&a&&"<p><br></p>"!==n?(e.addClass("attempted-question"),t.siblings(".SLA-submit").find(".submit-btn, .reset-btn").removeClass("disabled")):(e.removeClass("attempted-question"),t.siblings(".SLA-submit").find(".submit-btn, .reset-btn").addClass("disabled"));const o=e.parents(".group-interactivity-container");o.find("form.attempted-question").length===o.find("form").length?o.addClass("enableSubmit"):o.removeClass("enableSubmit");const s=n.replace(/<br([^>]*)>/gi,"<br$1 />").replace(/&nbsp;/g," ").replace(/&(?!amp;|lt;|gt;|quot;|apos;|#[0-9]+;)/g,"&amp;");t.attr("scorm-saved-ans",s),t.attr("data-pretext",s),"undefined"!=typeof apiHandle&&r(i.currentPlace)}}),$(s).find(".auth-mathfield-holder").each(function(t,e){const n=$(e).attr("data-equation-latex"),a=$(e).find("math-field").attr("id"),o=document.getElementById(a);o&&(o.setValue(n),o.virtualKeyboardTargetOrigin="*",window.mathVirtualKeyboard.targetOrigin="*",o.mathModeSpace="\\:")}),$(n).data("editorInstance",i)},0)}}),function(){if("undefined"!=typeof MathLive)s();else{!function(t){if(!document.querySelector(`script[src="${t}"]`)){const e=document.createElement("script");e.src=t,e.async=!0,document.head.appendChild(e)}}("https://cdn.jsdelivr.net/npm/mathlive/mathlive.min.js");const t=setInterval(()=>{"undefined"!=typeof MathLive?(clearInterval(t),s()):console.log("MathLive still not loaded for ShortLongAns, retrying...")},1e3)}}(),$(document).on("click",".SLA-submit .submit-btn",function(t){t.preventDefault(),function(t){if(t.preventDefault(),t){var e=t.target?$(t.target):$(t),n=e.closest("section"),a=n.find("form");$formParent=a.parent(),$inputs=a.find("input, textarea"),$shotInputs=a.find("div.shortAnsText");var o=!1;a.find("textarea.ansJODIT").each(function(){let t=this.__jodit;t||(t=new Jodit(this,{showXPathInStatusbar:!1,showCharsCounter:!1,showWordsCounter:!1,height:200,toolbarAdaptive:!1,toolbarSticky:!1}),$(this).data("editorInstance",t)),t.setDisabled(!0)}),$inputs.each(function(t,e){var n=e.value.trim();""!==n&&(o=!0),$formParent.attr("scorm-saved-ans",n)}),$shotInputs.each(function(t,e){var n=e.innerHTML.trim();""!==n&&(o=!0),$formParent.attr("scorm-saved-ans",n)}),o?a.addClass("attempted-question"):a.removeClass("attempted-question");var s=a.closest(".group-interactivity-container");s.find("form.attempted-question").length===s.find("form").length&&s.remove("enableSubmit");var i=$(t.target).closest('.customClass[data-type="shortLongAns"]');if(!i.attr("latencyTime")||i.attr("activityStartTime")===i.attr("latencyTime")){let t=(new Date).toLocaleTimeString();i.attr("latencyTime",t)}var c=$formParent.siblings(".SLA-submit").find(".submit-btn");c.addClass("disabled"),a.addClass("submitted");var l=$formParent.siblings(".SLA-custKeybCont");l.addClass("btn disabled"),$inputs.each(function(t,e){e.setAttribute("disabled",!0),$(e).attr("contenteditable",!1);const n=$(e).closest(".cazary");$(e).hasClass("ansRTE")&&(n.addClass("disabled-rte"),n.parent().find(".cazary").addClass("disabled-rte"))}),"undefined"!=typeof apiHandle&&r(t)}}(t)});let c=$(".customClass[data-type='shortLongAns']").find(".ansRTE");for(let n=0;n<c.length;n++)setTimeout(()=>{!function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery"),window):t(jQuery,window)}(function(n,s,r){"use strict";const c=s.document;function l(){const t=c.getElementsByClassName("cazary-edit");Array.from(t).forEach(t=>{const e=()=>{try{const n=t.contentDocument||t.contentWindow.document;if(!n||!n.body)return void setTimeout(e,100);const a=Math.max(n.body.scrollHeight,n.body.offsetHeight,n.body.clientHeight,n.documentElement.offsetHeight);t.style.height=`${Math.max(a,150)}px`}catch(t){console.error("Error adjusting iframe height:",t)}};setTimeout(e,50),setTimeout(e,300),setTimeout(e,600)})}setTimeout(()=>{l()},5e3);const u=function(){const t={},e=function(){let e=function(){try{const t=s.navigator;return t.browserLanguage||t.language||t.userLanguage}catch(t){return r}}().toLowerCase(),n=t[e];if(n!==r)return n;if(e=e.split("-")[0],(n=t[e])!==r)return n;return{}}();return function(t){return e[t]===r?t:e[t]}}(),f=function(){const t=/^[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~](\.?[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~])*@([\w\-]+\.)+(\w+)$/;return function(e){return!(e.length>256)&&(!(e.indexOf("@")>64)&&null!==e.match(t))}}(),m=function(){const t=/^https?:\/\//;return function(e){return null!==e.match(t)}}(),p=function(){const t={NORMAL:0,ACTIVE:1,DISABLED:2},e={FONTNAME:"fontname",FONTSIZE:"fontsize",BOLD:"bold",ITALIC:"italic",UNDERLINE:"underline",STRIKETHROUGH:"strikethrough",REMOVEFORMAT:"removeformat",FORECOLOR:"forecolor",BACKCOLOR:"backcolor",HILITECOLOR:"hilitecolor",SUPERSCRIPT:"superscript",SUBSCRIPT:"subscript",JUSTIFYLEFT:"justifyleft",JUSTIFYCENTER:"justifycenter",JUSTIFYRIGHT:"justifyright",JUSTIFYFULL:"justifyfull",INDENT:"indent",OUTDENT:"outdent",ORDEREDLIST:"insertorderedlist",UNORDEREDLIST:"insertunorderedlist",INSERTHORIZONTALRULE:"inserthorizontalrule",INSERTIMAGE:"insertimage",CREATELINK:"createlink",UNLINK:"unlink",UNDO:"undo",REDO:"redo"};return function(a,o,s,i){let c=a.contentWindow,d=c.document;a.contentDocument&&(d=a.contentDocument);let u=null;function f(t,n){t===e.BACKCOLOR&&m(e.HILITECOLOR)&&(t=e.HILITECOLOR),C(),d.execCommand(t,!1,n)}function m(t){try{return d.queryCommandEnabled(t)}catch(t){return!1}}function p(t){d.body.innerHTML=t,setTimeout(()=>{l()},100)}function h(){return c.getSelection?c.getSelection().anchorNode:d.selection.createRange().parentElement()}function g(){if(c.getSelection){const t=c.getSelection();return null===t||0===t.rangeCount?"":t.getRangeAt(0).toString()}return d.selection.createRange().text}function C(){c.focus(),l(),null!==u&&u.select()}this.STATUS=t,this.COMMAND=e,this.contentWindow=c,this.contentDocument=d,this.getCurrentStatus=function(){const a={fontname:null,fontsize:null,forecolor:null,backcolor:null,bold:t.NORMAL,italic:t.NORMAL,underline:t.NORMAL,strikethrough:t.NORMAL,superscript:t.NORMAL,subscript:t.NORMAL,justifyleft:t.NORMAL,justifycenter:t.NORMAL,justifyright:t.NORMAL,justifyfull:t.NORMAL,insertorderedlist:t.NORMAL,insertunorderedlist:t.NORMAL,createlink:t.NORMAL,unlink:t.NORMAL,undo:t.NORMAL,redo:t.NORMAL};""===g()&&(a[e.CREATELINK]=t.DISABLED,a[e.UNLINK]=t.DISABLED);n.each([e.CREATELINK,e.UNLINK,e.UNDO,e.REDO],function(e,n){m(n)||(a[n]=t.DISABLED)});let o=h();for(;null!==o;){if(o.tagName!==r){const n=o.tagName.toLowerCase();switch(n){case"b":case"strong":a[e.BOLD]=t.ACTIVE;break;case"i":case"em":a[e.ITALIC]=t.ACTIVE;break;case"u":a[e.UNDERLINE]=t.ACTIVE;break;case"s":case"strike":case"del":a[e.STRIKETHROUGH]=t.ACTIVE;break;case"sup":a[e.SUPERSCRIPT]=t.ACTIVE;break;case"sub":a[e.SUBSCRIPT]=t.ACTIVE;break;case"ol":a[e.ORDEREDLIST]=t.ACTIVE;break;case"ul":a[e.UNORDEREDLIST]=t.ACTIVE;break;case"font":o.face.length>0&&null===a[e.FONTNAME]&&(a[e.FONTNAME]=o.face),o.size.length>0&&null===a[e.FONTSIZE]&&(a[e.FONTSIZE]=o.size),o.color.length>0&&null===a[e.FORECOLOR]&&(a[e.FORECOLOR]=o.color)}}if(o.align!==r){const n=o.align.toLowerCase();switch(n){case"left":a[e.JUSTIFYLEFT]=t.ACTIVE;break;case"center":a[e.JUSTIFYCENTER]=t.ACTIVE;break;case"right":a[e.JUSTIFYRIGHT]=t.ACTIVE;break;case"justify":a[e.JUSTIFYFULL]=t.ACTIVE}}if(o.style!==r){const n=o.style;if(n.fontFamily!==r){const t=n.fontFamily;t.length>0&&null===a[e.FONTNAME]&&(a[e.FONTNAME]=t)}if(n.fontWeight!==r){const o=n.fontWeight.toLowerCase();switch(o){case"bold":case"bolder":a[e.BOLD]=t.ACTIVE}}if(n.fontStyle!==r){const o=n.fontStyle.toLowerCase();switch(o){case"italic":case"oblique":a[e.ITALIC]=t.ACTIVE}}if(n.textDecoration!==r){const o=n.textDecoration.toLowerCase();-1!==o.indexOf("underline")&&(a[e.UNDERLINE]=t.ACTIVE),-1!==o.indexOf("line-through")&&(a[e.STRIKETHROUGH]=t.ACTIVE)}if(n.color!==r){const t=n.color;t.length>0&&null===a[e.FORECOLOR]&&(a[e.FORECOLOR]=t)}if(n.backgroundColor!==r){const t=n.backgroundColor;t.length>0&&null===a[e.BACKCOLOR]&&(a[e.BACKCOLOR]=t)}if(n.verticalAlign!==r){const o=n.verticalAlign.toLowerCase();switch(o){case"super":a[e.SUPERSCRIPT]=t.ACTIVE;break;case"sub":a[e.SUBSCRIPT]=t.ACTIVE}}if(n.textAlign!==r){const o=n.textAlign.toLowerCase();switch(o){case"left":a[e.JUSTIFYLEFT]=t.ACTIVE;break;case"center":a[e.JUSTIFYCENTER]=t.ACTIVE;break;case"right":a[e.JUSTIFYRIGHT]=t.ACTIVE;break;case"justify":a[e.JUSTIFYFULL]=t.ACTIVE}}}o=o.parentNode}d.selection&&(u=d.selection.createRange());return a},this.execCommand=f,this.canExecCommand=m,this.value=function(t){if(t===r)return function(){let t=d.body.innerHTML;return t=t.replace(/(<\/?)p\b/gi,"$1div").replace(/(<\/?)em\b/gi,"$1i").replace(/(<\/?)strong\b/gi,"$1b").replace(/(<\/?)del\b/gi,"$1s")}();p(t)},this.getSelectedText=g,this.insertText=function(t,n){if(c.getSelection){const e=d.createTextNode(t),n=c.getSelection();n.deleteFromDocument(),n.getRangeAt(0).insertNode(e)}else d.selection.createRange().text=t;n?f(e.REMOVEFORMAT):C()},this.setFocus=C,function(t){const e=`<!DOCTYPE html><html><head><meta charset="UTF-8" /><style type="text/css">${s}</style><script type="text/javascript" src="${i}" async><\/script></head><body></body></html>`;d.designMode="on",n=e,d.open(),d.write(n),d.close(),setTimeout(()=>{l()},100),p(t);var n}(o)}}();return n.fn.extend({cazary:function(n){const h=27,g={separator:"",fontname:"Font",fontsize:"Size",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",removeformat:"Remove Format",forecolor:"Foreground Color",backcolor:"Background Color",superscript:"Superscript",subscript:"Subscript",justifyleft:"Justify Left",justifycenter:"Justify Center",justifyright:"Justify Right",justifyfull:"Justify Full",indent:"Indent",outdent:"Outdent",insertorderedlist:"Ordered List",insertunorderedlist:"Unordered List",inserthorizontalrule:"Horizontal Rule",insertimage:"Insert Image",createlink:"Insert Link",unlink:"Unlink",undo:"Undo",redo:"Redo",source:"Show Source"},C={1:"Size 1",2:"Size 2",3:"Size 3",4:"Size 4",5:"Size 5",6:"Size 6",7:"Size 7"},b={MINIMAL:["bold italic underline","insertorderedlist insertunorderedlist"],STANDARD:["fontname fontsize","bold italic underline strikethrough removeformat | forecolor backcolor | superscript subscript","source"],FULL:["fontname fontsize","bold italic underline strikethrough removeformat | forecolor backcolor | superscript subscript","justifyleft justifycenter justifyright justifyfull | indent outdent | insertorderedlist insertunorderedlist","inserthorizontalrule insertimage createlink unlink","undo redo","source"]};return n(function(t){t(c).on("click",function(){y()}).on("keydown",function(t){t.keyCode===h&&y()})}),function(A){return A=n.extend({mode:"rte",style:"body{margin:0px;padding:8px;word-wrap:break-word;}p{margin:0px;padding:0px;}.auth-mathfield-holder  {-webkit-user-modify: read-only !important;max-width: 100%;padding: 0;overflow-y: hidden;}math-field {border-width: 0px;background: transparent;overflow: hidden;color: inherit;max-width: 300px;}span.auth-mathfield-holder {display: inline-flex;}math-field::part(content){overflow-x: auto;}math-field::part(menu-toggle){display: flex !important;}",mathLiveScript:"./js/math-live.js",fontnames:["sans-serif","serif","cursive","fantasy","monospace","Arial","Arial Black","Comic Sans MS","Courier New","Narrow","Garamond","Georgia","Impact","Tahoma","Times New Roman","Trebuchet MS","Verdana"],colors:[["#ffffff","#ffcccc","#ffcc99","#ffff99","#ffffcc","#99ff99","#99ffff","#ccffff","#ccccff","#ffccff"],["#cccccc","#ff6666","#ff9966","#ffff66","#ffff33","#66ff99","#33ffff","#66ffff","#9999ff","#ff99ff"],["#bbbbbb","#ff0000","#ff9900","#ffcc66","#ffff00","#33ff33","#66cccc","#33ccff","#6666cc","#cc66cc"],["#999999","#cc0000","#ff6600","#ffcc33","#ffcc00","#33cc00","#00cccc","#3366ff","#6633ff","#cc33cc"],["#666666","#990000","#cc6600","#cc9933","#999900","#009900","#339999","#3333ff","#6600cc","#993399"],["#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366"],["#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]],commands:"STANDARD"},A),this.each(function(){const T=parseInt(1e4*Math.random()),v=n(this),L=n('<div class="cazary"><iframe class="cazary-edit" src="javascript:" style="display:none;"></iframe></div>').css({width:v.width()});L.prepend(function(e){"string"==typeof e&&(e=b[e]!==r?b[e]:[e]);const a=n("<div />").addClass("cazary-commands-wrapper");return n.each(e,function(){const e=n("<ul />").addClass("cazary-commands-list"),o=this.toLowerCase().split(" ");n.each(o,function(){let a=this.toString();if("|"===a&&(a="separator"),g[a]===r)return;const o=u(g[a]),s=`cazary-command-${a}`,i=n("<li />").attr({unselectable:"on",title:o}).addClass(s).text(o);"matheditor"===a?(n("<span />").addClass("icon-Root_a"),t=!0,i.on("click",function(){var t=n($$orginal.contentDocument.body).find(".auth-mathfield-holder").length+1;$$orginal.contentDocument.execCommand("insertHTML",!1,"<span class='temp-math-holder'><span  class='auth-mathfield-holder' data-extract='"+t+"'><math-field class='mathFieldEq' id='mathEq"+t+"'></math-field></span></span>"),setTimeout(function(){let e=$$orginal.contentWindow.document.getElementById("mathEq"+t);n(e).on("input",d)},1e3)})):(t=!1,i.on("click",function(){executeCommand(a)})),e.append(i)}),a.append(e)}),a}(A.commands));const I=L.find(".cazary-edit").css({height:"100%"}),E=L.find("ul.cazary-commands-list li.cazary-command-source"),O=L.find("ul.cazary-commands-list li:not(.cazary-command-source)");v.hide().before(L).insertAfter(I).addClass("cazary-source");let N=A.style,R=A.mathLiveScript,S=v.attr("placeholder");S!==r&&(N+=`body.empty:before{position:fixed;color:#888;content:'${S=S.replace("'","\\'")}';}`);const M=new p(I.get(0),v.val(),N,R);$$orginal=M,M.SLA_RTE_orderNo=e.length+1,n(M.contentDocument).find("body").css("font-family","'Roboto-Regular', Helvetica, Arial, Verdana, Tahoma, sans-serif;word-break: break-word;");const w=[M.COMMAND.BOLD,M.COMMAND.ITALIC,M.COMMAND.UNDERLINE,M.COMMAND.STRIKETHROUGH,M.COMMAND.REMOVEFORMAT,M.COMMAND.SUPERSCRIPT,M.COMMAND.SUBSCRIPT,M.COMMAND.JUSTIFYLEFT,M.COMMAND.JUSTIFYCENTER,M.COMMAND.JUSTIFYRIGHT,M.COMMAND.JUSTIFYFULL,M.COMMAND.INDENT,M.COMMAND.OUTDENT,M.COMMAND.ORDEREDLIST,M.COMMAND.UNORDEREDLIST,M.COMMAND.INSERTHORIZONTALRULE,M.COMMAND.UNLINK,M.COMMAND.UNDO,M.COMMAND.REDO],$=[M.COMMAND.FONTNAME,M.COMMAND.FONTSIZE,M.COMMAND.FORECOLOR,M.COMMAND.BACKCOLOR,M.COMMAND.INSERTIMAGE,M.COMMAND.CREATELINK];if("html"===A.mode?k():D(),v.parents(".shortLongAnsComponent").attr("scorm-saved-ans")==r&&v.parents(".shortLongAnsComponent").attr("data-pretext")&&v.parents(".shortLongAnsComponent").attr("scorm-saved-ans",o(v.parents(".shortLongAnsComponent").attr("data-pretext"))),v.parents(".shortLongAnsComponent").attr("scorm-saved-ans")){let t=v.parents(".shortLongAnsComponent").attr("scorm-saved-ans");M.value(t),n(M.contentDocument).find("body").html(t),v.html(t),setTimeout(function(){let t=`<span>${M.value()}</span>`;n(t).find(".auth-mathfield-holder").each(function(t,e){let a=n(e).attr("data-equation-latex");n(e).find("math-field").attr("contenteditable","false");let o=n(e).find("math-field").attr("id"),s=$$orginal.contentWindow.document.getElementById(o);s.setAttribute("contenteditable","false"),s.setValue(a)})},500)}function x(t,e){y(),M.execCommand(t,e),F()}function D(){v.hide(),I.css("display",""),O.removeClass("cazary-disabled"),E.removeClass("cazary-active"),F()}function k(){const t=M.value();v.val(t),I.hide(),v.css("display",""),O.addClass("cazary-disabled"),E.addClass("cazary-active")}function z(){return E.hasClass("cazary-active")}function F(){const t=M.getCurrentStatus();l();for(const e in t){let n=t[e];const a=L.find(`.cazary-command-${e}`);if(e!==M.COMMAND.FONTNAME)if(e!==M.COMMAND.FONTSIZE)if(e!==M.COMMAND.FORECOLOR&&e!==M.COMMAND.BACKCOLOR)n===M.STATUS.ACTIVE?a.addClass("cazary-active"):a.removeClass("cazary-active"),n===M.STATUS.DISABLED?a.addClass("cazary-disabled"):a.removeClass("cazary-disabled");else{const t=null===n?"":n;L.find(`.cazary-command-${e}`).css("background-color",t)}else{let t=n;null===t?(n="",t=a.attr("title")):t=u(C[t]),a.text(t)}else{let t=n;null===t&&(n="",t=a.attr("title")),a.css({"font-family":n+", Helvetica, Arial, Verdana, Tahoma, sans-serif"}).text(t)}}}function U(){z()?v.trigger("focus"):M.setFocus()}function q(){const t=n(M.contentDocument.body);""===t.html()||"<br>"==t.html()?t.addClass("empty"):t.removeClass("empty")}v.on("change",function(){const t=n(this).val();M.value(t),q()}),n(M.contentDocument).on("select",function(){F()}).on("mouseup",function(){y(),F()}).on("keydown",function(t){t.keyCode===h&&y()}).on("input",function(t){let e=v.parents(".shortLongAnsComponent").find("iframe").contents().find("body").text();e.length&&v.parents(".shortLongAnsComponent").find("iframe").contents().find("body").removeClass("empty"),e.length>5e3&&(e=e.substring(0,5e3),M.value(e),v.val(e),v.parents(".shortLongAnsComponent").find("iframe").contents().find("body").attr("style","font-family:'Roboto-Regular', Helvetica, Arial, Verdana, Tahoma, sans-serif;word-break: break-word;")),s.setTimeout(function(){F(),q(),v.val(M.value()),v.parents(".shortLongAnsComponent").attr("scorm-saved-ans",M.value()),a(v),"undefined"!=typeof apiHandle&&i(M.value(),t,v)},10)}),n(M.contentWindow).on("focus",function(){y(),F(),v.trigger("click"),!0,n(".cazary-command-matheditor").removeClass("disableMathEditorIcon"),n(".cursorNotAllowedInITC").addClass("cusorAllowedInRTEITC"),n(".cursorNotAllowedInITC #equation").addClass("disableLinkIconRTEITC")}).on("blur",function(){v.val(M.value()),v.trigger("blur"),t?n(".cazary-command-matheditor").removeClass("disableMathEditorIcon"):n(".cazary-command-matheditor").addClass("disableMathEditorIcon"),setTimeout(()=>{n(".cursorNotAllowedInITC").removeClass("cusorAllowedInRTEITC"),n(".cursorNotAllowedInITC #equation").removeClass("disableLinkIconRTEITC")},100)}),L.on("click","ul.cazary-commands-list li",function(t){n(this).hasClass("cazary-disabled")&&(t.stopImmediatePropagation(),U())}),n(c).off("click",".key_button").on("click",".key__button",function(t){if(n(this).parents(".keys").attr("data-SLA_RTE_orderNo")&&Number(n(this).parents(".keys").attr("data-SLA_RTE_orderNo"))==M.SLA_RTE_orderNo&&n(t.target).parents('.customClass[data-type="shortLongAns"]').eq(0).find("iframe").length){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let e=n(t.target).parents('.customClass[data-type="shortLongAns"]').eq(0).find("iframe")[0].contentDocument;n(t.target).parents('.customClass[data-type="shortLongAns"]').eq(0).find("iframe")[0].contentWindow.focus(),e.execCommand("insertText",!1,t.currentTarget.textContent),s.setTimeout(function(){F(),q()},10)}}),E.on("click",function(){z()?D():k(),U()}),n.each(w,function(){const t=this.toLowerCase();L.on("click",`.cazary-command-${t}`,function(){x(t)})}),n.each($,function(){const t=this.toLowerCase();L.on("click",`.cazary-command-${t}`,function(){const e=n(this);return function(t,e,a){let o=n(".cazary-panel");if(o.length>0){const e=o.data("id"),n=o.data("command");if(y(),n===t&&e===T)return void U()}let r=!1;switch(t){case M.COMMAND.FONTNAME:o=function(t,e){const a=n("<ul />").addClass("cazary-widget-select");return n.each(e,function(){const t=this.toString(),e=n("<li />").attr({unselectable:"on",title:t}).css({"font-family":t+", Helvetica, Arial, Verdana, Tahoma, sans-serif"}).data("param",t).text(t);a.append(e)}),n("<div>").append(a)}(0,e.fontnames),r=!0;break;case M.COMMAND.FONTSIZE:o=function(t){const e=n("<ul />").addClass("cazary-widget-select");return n.each(C,function(t,a){const o=u(a),s=n("<li />").attr({unselectable:"on",title:o}).data("param",t),r=n("<font />").attr({size:t}).text(a);e.append(s.append(r))}),n("<div>").append(e)}(),r=!0;break;case M.COMMAND.FORECOLOR:case M.COMMAND.BACKCOLOR:o=function(t,e){const a=n("<div>");return n.each(e,function(){const t=n("<ul />").addClass("cazary-widget-select-color");n.each(this,function(){const e=this.toString(),a=n("<li />").attr({unselectable:"on",title:e}).css({"background-color":e}).data("param",e).text(e);t.append(a)}),a.append(t)}),a}(0,e.colors),r=!0;break;case M.COMMAND.INSERTIMAGE:o=function(t){const e=n("<div>").append(n("<form />").attr("action","#").append(n("<div />").append(n("<fieldset />").append(n("<legend />").text(u("Input image URL"))).append(n('<input type="text" />').addClass("cazary-widget-insertimage-url").attr({required:"required",placeholder:u("http://example.com/path/to/image.jpg")}))).append(n('<input type="submit" />').addClass("cazary-widget-submit").val(u("Insert")))).append(n("<fieldset />").addClass("cazary-widget-preview").append(n("<legend />").text(u("Preview"))).append(n("<img />").addClass("cazary-widget-preview-insertimage"))));return e.on("submit","form",a).on("click",".cazary-widget-submit",a).on("keydown paste",".cazary-widget-insertimage-url",function(){const t=n(this);s.setTimeout(function(){const n=t.val(),a=t.data("url_old");if(n===a)return;t.data("url_old",n);const o=e.find(".cazary-widget-preview");m(n)?(o.show(),e.find(".cazary-widget-preview-insertimage").attr("src",n)):o.hide()},10)});function a(){const n=e.find(".cazary-widget-insertimage-url"),a=n.val();return m(a)?(x(t,a),!1):(n.trigger("focus"),!1)}}(t);break;case M.COMMAND.CREATELINK:o=function(t){const e=n("<div>").append(n("<form />").attr("action","#").append(n("<div />").append(n("<fieldset />").append(n("<legend />").text(u("Input link URL or E-mail address"))).append(n('<input type="text" />').addClass("cazary-widget-createlink-url").attr({required:"required",placeholder:u("http://example.com/, someone@example.com")}))).append(n('<input type="button" />').addClass("cazary-widget-submit").val(u("Insert")))).append(n("<fieldset />").addClass("cazary-widget-preview").append(n("<legend />").text(u("Preview"))).append(n("<iframe />").addClass("cazary-widget-preview-createlink"))));return e.on("submit","form",a).on("click",".cazary-widget-submit",a).on("keydown paste",".cazary-widget-createlink-url",function(){const t=n(this);s.setTimeout(function(){const n=t.val(),a=t.data("url_old");if(n===a)return;t.data("url_old",n);const o=e.find(".cazary-widget-preview");m(n)?(o.show(),e.find(".cazary-widget-preview-createlink").attr("src",n)):o.hide()},10)});function a(){const n=e.find(".cazary-widget-createlink-url");let a=n.val();if(f(a))a=`mailto:${a}`;else if(!m(a))return n.trigger("focus"),!1;return x(t,a),!1}}(t);break;default:return null}r&&o.on("click","li",function(){const e=n(this),a=e.data("param");x(t,a)});const i=a.addClass("cazary-active").offset();i.top+=a.outerHeight(),o.addClass("cazary-panel").addClass(`cazary-panel-${t}`).data("id",T).data("command",t).css({left:`${i.left}px`,top:`${i.top}px`}).on("click",function(){return!1}).appendTo(n(c.body)).find(":text:first").trigger("focus")}(t,A,e),!1})})})};function y(){n(".cazary-panel").each(function(){const t=n(this).data("command");n(`.cazary-command-${t}`).removeClass("cazary-active")}).remove()}}(n)}),n}),$("textarea#"+$(c[n]).attr("id")).cazary({commands:"MINIMAL"}),e.push($('.customClass[data-type="shortLongAns"] textarea.cazary-source').eq(e.length)),$('.customClass[data-type="shortLongAns"] textarea.cazary-source').eq(e.length-1).parents('.customClass[data-type="shortLongAns"]').find(".keyboard-parent .keys").attr("data-SLA_RTE_orderNo",e.length),$(".shortLongAnsComponent").each(function(){let t=$(this).attr("cust-keyb-enabled");$(this).find("div.cazary").css("border-radius","true"==t?"8px 8px 0 0":"8px")}),$("textarea#"+$(c[n]).attr("id")).on("blur",function(t){"undefined"!=typeof apiHandle&&r(t)})},200);$(".shortLongAnsComponent .customKeybord-cantsiner").on("click",function(t){setTimeout(function(){$(".customKeybord-cantsiner .keys").find(".key__button").on("click",function(t){$(t.currentTarget).parents('.customClass[data-type="shortLongAns"]').find("textArea.ansRTE").length<1&&($(document.getSelection().anchorNode).find("textarea.longAnsTextArea").length>=1||$(document.getSelection().anchorNode).find("input").length>=1)&&l(t)})},100)});var l=function(t){document.execCommand("insertText",!1,t.currentTarget.textContent),t.preventDefault(),t.stopImmediatePropagation()},d=function(t){var e=t.target.value?t.target.value:t.value;const n=$$orginal.contentDocument?$$orginal.contentDocument.getSelection():window.editor.contentDocument.getSelection();let a;if(!n.getRangeAt||!n.rangeCount)return console.warn("No selection range found in mathFieldChange."),!1;const o=(a=n.getRangeAt(0)).startContainer,s=$(o).closest(".auth-mathfield-holder");$(s).attr("data-equation-latex",e),$($$orginal.contentDocument.body).removeClass("empty"),$(".ansRTE")[0].value=$$orginal.value(),$($$orginal.contentDocument).trigger("input"),scope.fieldData.answerText=$$orginal.value()};$('.customClass[data-type="shortLongAns"]').each(function(t,e){window.isActivityInprogress&&setTimeout(function(){var t=$(e).find("form");t.find(".shortAnsText").addClass("disabledInput"),t.find(".longAnsText").addClass("disabledInput"),t.find(".cazary").addClass("disabledInput")},1e3)})});
$(function(){function showAnswerGroupActivity(t){var e=$(t.target).parents(".group-interactivity-container");0==e.length&&(e=$(t.target).parents("#group-interactivity-container")),e.find(".save-html.column-content .showme-btn").each(function(t){$(this).trigger("click")}),e.find(".group-interactivity-alert").removeClass("showAlert"),e.removeClass("enableSubmit enableReset enableTryAgain"),e.find(".incorrect-question").removeClass("incorrect-question"),e.find(".correct-question").removeClass("correct-question"),e.find(".attempted-question").removeClass("attempted-question"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .reset-btn").addClass("disabled"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").addClass("disabled"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .tryagn-btn").addClass("disabled"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .showme-btn").addClass("disabled");let i=parseInt(e.parents('.customClass[data-type="group-interactivity-template"]').find(".style2NavigationBtns .number.active").eq(0).html()),n=$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find(".question-container-box .question-container").length;e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").hasClass("style2")?i==n&&e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").css("display",""):e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").css("display",""),"undefined"!=typeof apiHandle&&stateMainatainGroupActiviy(t)}function scrollStyle2GroupNavigation(t,e){$(t.target).parents(".group-interactivity-container").find(".bottomCounter .presentSlideNum").html(e);var i=225*(Math.ceil(e/5)-1);$(t.target).parents(".group-interactivity-container").find(".style2NavigationBtns .numbersContainer").animate({scrollLeft:i},300),window.highlightGroupBullets&&window.highlightGroupBullets($(t.target).parents(".group-interactivity-container")),window.stopAudioVideo(),$(t.target).parents(".group-interactivity-container").find(".question-container-box .question-container").length==e?$(t.target).parents(".group-interactivity-container.style2").hasClass("enableTryAgain")||("CL"==window.client||"CL"==window.parent.client?$(t.target).parents(".group-interactivity-container.style2").find(".group-interactivity-btn .submit-btn").hide():$(t.target).parents(".group-interactivity-container.style2").find(".group-interactivity-btn .submit-btn").show()):$(t.target).parents(".group-interactivity-container.style2").find(".group-interactivity-btn .submit-btn").hide()}function tryagainGroupActivity(t){var e=$(t.target).parents(".group-interactivity-container");0==e.length&&(e=$(t.target).parents("#group-interactivity-container")),e.hasClass("submitted")&&e.removeClass("submitted"),$(t.target).parents('.customClass[data-type="group-interactivity-template"]').length&&$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find(".customClass .individual-feedback").each(function(t,e){let i=$(e).find(".template-instruction").eq(0).text(),n=$(e).find(".individual-feedback-text").eq(0).text(),a=btoa(unescape(encodeURIComponent(i))),r=btoa(unescape(encodeURIComponent(n)));$(e).find(".template-instruction").eq(0).text(a),$(e).find(".individual-feedback-text").eq(0).text(r),$(e).css({display:"none"})}),e.find(".save-html.column-content .tryagn-btn").each(function(t){$(this).trigger("click")}),$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="shortLongAns"]').find("input,textarea").val("").removeAttr("disabled").trigger("keyup"),$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="identify-the-clip"]').find("input,textarea").val("").removeAttr("disabled").trigger("keyup"),e.find(".group-interactivity-alert").removeClass("showAlert"),e.removeClass("enableTryAgain"),e.addClass("enableReset"),e.addClass("enableSubmit"),e.find(".incorrect-question").removeClass("incorrect-question"),e.find(".correct-question").removeClass("correct-question"),e.find(".attempted-question").removeClass("attempted-question"),$(".group-interactivity-container .group-interactivity-btn .reset-btn").addClass("disabled"),$(".group-interactivity-container .group-interactivity-btn .submit-btn").addClass("disabled"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .tryagn-btn").addClass("disabled"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").css("display",""),"undefined"!=typeof apiHandle&&stateMainatainGroupActiviy(t),goToFirstSlide(t)}function goToFirstSlide(t){let e=100/$(t.target).parents(".group-interactivity-container").find(".question-container-box .question-container").length*0;$(t.target).parents(".group-interactivity-container").find(".question-container-box").css("transform","translateX(-"+e+"%)"),$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".numbersContainer").find(".number").removeClass("active"),$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".numbersContainer").find(".number").eq(0).addClass("active"),$(t.target).parents(".group-interactivity-container.style2").find(".group-interactivity-btn .prev-btn").addClass("disabled"),$(t.target).parents(".group-interactivity-container.style2").find(".group-interactivity-btn .next-btn").removeClass("disabled"),scrollStyle2GroupNavigation(t,1)}function resetAnswerGroupActivity(t){if(!$(t.target).parents(".group-interactivity-container").hasClass("enableSubmit")&&!$(t.target).parents(".group-interactivity-container").hasClass("enableReset"))return!1;var e=$(t.target).parents(".group-interactivity-container");0==e.length&&(e=$(t.target).parents("#group-interactivity-container")),e.find(".save-html.column-content .reset-btn").each(function(t){$(this).trigger("click")}),e.find(".group-interactivity-btn .submit-btn").addClass("disabled"),e.find(".group-interactivity-btn .reset-btn").addClass("disabled"),$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="shortLongAns"]').find(".shortAnsText").html("").attr("contenteditable",!0).trigger("keyup"),$(t.target).parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="identify-the-clip"]').find(".shortAnsText").html("").attr("contenteditable",!0).trigger("keyup"),e.find(".group-interactivity-alert").removeClass("showAlert"),e.find(".incorrect-question").removeClass("incorrect-question"),e.find(".correct-question").removeClass("correct-question"),e.find(".attempted-question").removeClass("attempted-question"),"undefined"!=typeof apiHandle&&stateMainatainGroupActiviy(t),goToFirstSlide(t)}function SubmitAnswerGroupActivity(t){var e=$(t.target).parents(".group-interactivity-container");0==e.length&&(e=$(t.target).parents("#group-interactivity-container")),e.addClass("submitted"),e.removeClass("enableSubmit");e.attr("data-maxTries");var i=Number($(t.target).attr("data-no-of-attempts")),n=$(t.target).attr("data-attempts");n?n++:n=1,$(t.target).attr("data-attempts",n),e.find(".save-html.column-content .submit-btn").each(function(t){$(this).trigger("click")}),window.isGradableActivity||e.find(".group-interactivity-alert").addClass("showAlert");let a=0,r=0,s=0,o=0,c=0;e.find(".group-interactivity-btn .reset-btn").addClass("disabled"),e.find(".group-interactivity-btn .submit-btn").addClass("disabled");let l=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="multiple-choice-template"]').length,d=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="true-false-template"]').length,p=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="mtp-multiple"]').length,u=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="fill-in-the-blank"]').length,g=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="match-the-pairs"]').length,m=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="imagelabelling"]').length,f=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="shortLongAns"]').length,v=e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="identify-the-clip"]').length;var b=l+d+p+u+g+m+f+e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="highlight"] .form-row').length+e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="correction"] .form-row').length+v+e.parents('.customClass[data-type="group-interactivity-template"]').find('.customClass[data-type="Categorize"]').length;"CL"==window.client||"CL"==window.parent.client?$(t.target).parents(".customClass").eq(0).find(".question-container-box .customClass").each(function(t,e){if("multiple-choice-template"==$(e).attr("data-type")){let t=$(e).find(".correct-question").length,i=$(e).find(".incorrect-question").length,n=$(e).find(".question-select-wrap").hasClass("multiple-questions");if(t)a++,c++;else if(i)if(n){console.log("do it here");let t=btoa("true"),i=$(e).attr("result").split(",").map(Number),n=$(e).find('input[data-iscorrect="'+t+'"]').length,a=i[1];c=+(c+1/n*a).toFixed(2),0==a?r++:(s++,console.log("multiple-choice-template partialCorrect--\x3e",s),console.log("multiple-choice-template corr--\x3e",a))}else r++}else if("true-false-template"==$(e).attr("data-type")){let t=$(e).find(".correct-question").length,i=$(e).find(".incorrect-question").length;t?(a++,c++):i&&r++}else if("mtp-multiple"==$(e).attr("data-type")){let t=$(e).find(".mtp-pair2-block").length,i=$(e).find(".mtp-pair2-block.mtp-correct-pair").length,n=$(e).find(".mtp-pair2-block.mtp-incorrect-pair").length;a+=i,r+=n,b+=t-1,c+=i}else if("fill-in-the-blank"==$(e).attr("data-type")){let t=0,i=0;$(e).find(".js-form-row").each(function(){($(this).hasClass("correct-attempt")||$(this).find(".correct-attempt").length>0||$(this).find(".correct-tick").length>0)&&(t++,c++),($(this).hasClass("incorrect-attempt")||$(this).find(".incorrect-tick").length>0)&&i++}),a+=t,r+=i,b+=t+i-1,console.log("fill-in-the-blank correctBlanks---\x3e",b)}else if("match-the-pairs"==$(e).attr("data-type")){if($(e).find(".component-holder.mtp").hasClass("correct-question"))a++,c++;else{let t=$(e).find(".mtp-pair2 .mtp-pair2-block").length,i=$(e).find(".mtp-pair2 .mtp-pair2-block.mtp-incorrect-pair").length,n=$(e).find(".mtp-pair2 .mtp-pair2-block.mtp-correct-pair").length;c=+(c+1/t*n).toFixed(2),t==i?r++:"CL"==window.parent.client&&0==i?r++:(s++,console.log("match-the-pairs partialCorrect---\x3e",s))}}else if("imagelabelling"==$(e).attr("data-type")){if($(e).find(".component-holder.imageLabelling").hasClass("correct-question"))a++,c++;else{let t=$(e).find(".mainLabelDiv").length,i=$(e).find(".mainLabelDiv .labelInCorrect").length,n=$(e).find(".mainLabelDiv .labelCorrect").length;c=+(c+1/t*n).toFixed(2),t==i?r++:(s++,console.log("imagelabelling partialCorrect---\x3e",s))}}else if("shortLongAns"==$(e).attr("data-type"))$(e).find("input, textarea").prop("disabled",!0),o++;else if("identify-the-clip"==$(e).attr("data-type"))$(e).find("input, textarea").prop("disabled",!0),$(e).find(".shortAnsText").attr("contenteditable",!1),$(e).find("input, textarea, .shortAnsText").hasClass("itcCorrect")?(a++,c++):$(e).find("input, textarea,.shortAnsText").hasClass("itcIncorrect")?r++:o++,$(e).find(".itc-alert").css("display","none");else if("highlight"==$(e).attr("data-type"))$(e).find(".form-row").each(function(t,e){let i=$(e).find(".selectedHighlightWord").length;i=i?parseInt(i):0;let n=$(e).find(".myWords").length,o=$(e).find(".wrongWords").length;if(i==n)a++,c++;else{let t=i,e=o;c=+(c+1/t*n).toFixed(2),t==e||0==n?r++:(s++,console.log("highlight partialCorrect---\x3e",s))}});else if("correction"==$(e).attr("data-type"))$(e).find(".form-row").each(function(t,e){let i=$(e).find(".selectedStrikeWord").length;i=i?parseInt(i):0;let n=$(e).find(".myWords").length,o=$(e).find(".wrongWords").length;if(i==n)a++,c++;else{let t=i,e=o;c=+(c+1/t*n).toFixed(2),t==e||0==n?r++:(s++,console.log("correction partialCorrect----\x3e",s))}});else if("Categorize"==$(e).attr("data-type")){let t=$(e).find(".categorize-body .categories-container.isCorrect").length,i=$(e).find(".categorize-body .categories-container.isInCorrect").length,n=$(e).find(".categorize-body .categories-container.isPartialCorrect").length;$(e).find(".categories-container .cat_single_option").length;t?(a++,c++):(i||n)&&r++}}):$(t.target).parents(".customClass").eq(0).find(".question-container-box .customClass").each(function(t,e){if("multiple-choice-template"==$(e).attr("data-type")){let t=$(e).find(".correct-question").length,i=$(e).find(".incorrect-question").length,n=$(e).find(".question-select-wrap").hasClass("multiple-questions");if(t)a++,c++;else if(i)if(n){console.log("do it here");let t=btoa("true"),i=$(e).attr("result").split(",").map(Number),n=$(e).find('input[data-iscorrect="'+t+'"]').length,a=i[1];c=+(c+1/n*a).toFixed(2),0==a?r++:(s++,console.log("multiple-choice-template partialCorrect--\x3e",s),console.log("multiple-choice-template corr--\x3e",a))}else r++}else if("true-false-template"==$(e).attr("data-type")){let t=$(e).find(".correct-question").length,i=$(e).find(".incorrect-question").length;t?(a++,c++):i&&r++}else if("fill-in-the-blank"==$(e).attr("data-type")){let t=0,i=0;$(e).find(".js-form-row").each(function(){($(this).hasClass("correct-attempt")||$(this).find(".correct-attempt").length>0||$(this).find(".correct-tick").length>0)&&(t++,c++),($(this).hasClass("incorrect-attempt")||$(this).find(".incorrect-tick").length>0)&&i++}),a+=t,r+=i,b+=t+i-1,console.log("fill-in-the-blank totalQuestion---\x3e",b)}else if("match-the-pairs"==$(e).attr("data-type")){if($(e).find(".component-holder.mtp").hasClass("correct-question"))a++,c++;else{let t=$(e).find(".mtp-pair2 .mtp-pair2-block").length,i=$(e).find(".mtp-pair2 .mtp-pair2-block.mtp-incorrect-pair").length,n=$(e).find(".mtp-pair2 .mtp-pair2-block.mtp-correct-pair").length;c=+(c+1/t*n).toFixed(2),t==i?r++:(s++,console.log("match-the-pairs partialCorrect---\x3e",s))}}else if("imagelabelling"==$(e).attr("data-type")){if($(e).find(".component-holder.imageLabelling").hasClass("correct-question"))a++,c++;else{let t=$(e).find(".mainLabelDiv").length,i=$(e).find(".mainLabelDiv .labelInCorrect").length,n=$(e).find(".mainLabelDiv .labelCorrect").length;c=+(c+1/t*n).toFixed(2),t==i?r++:(s++,console.log("imagelabelling partialCorrect---\x3e",s))}}else if("shortLongAns"==$(e).attr("data-type"))$(e).find(".shortAnsText").attr("contenteditable",!1),o++;else if("identify-the-clip"==$(e).attr("data-type"))$(e).find(".shortAnsText").attr("contenteditable",!1),o++;else if("highlight"==$(e).attr("data-type"))$(e).find(".form-row").each(function(t,e){let i=$(e).find(".selectedHighlightWord").length;i=i?parseInt(i):0;let n=$(e).find(".myWords").length,o=$(e).find(".wrongWords").length;if(i==n)a++,c++;else{let t=i,e=o;c=+(c+1/t*n).toFixed(2),t==e||0==n?r++:(s++,console.log("highlight partialCorrect---\x3e",s))}});else if("correction"==$(e).attr("data-type"))$(e).find(".form-row").each(function(t,e){let i=$(e).find(".selectedStrikeWord").length;i=i?parseInt(i):0;let n=$(e).find(".myWords").length,o=$(e).find(".wrongWords").length;if(i==n)a++,c++;else{let t=i,e=o;c=+(c+1/t*n).toFixed(2),t==e||0==n?r++:(s++,console.log("correction partialCorrect----\x3e",s))}});else if("Categorize"==$(e).attr("data-type")){let t=$(e).find(".categorize-body .categories-container.isCorrect").length,i=$(e).find(".categorize-body .categories-container.isInCorrect").length,n=$(e).find(".categorize-body .categories-container.isPartialCorrect").length,o=$(e).find(".categories-container .cat_single_option").length;if(t)a++,c++;else if(i)r++;else if(n){let t=1/o,i=$(e).find(".categorize-body .categories-container .ans_correct").length;c=+(c+t*i).toFixed(2),s++,console.log("Categorize partialCorrect---\x3e",s)}}}),(a+o==b&&0==r||i==n||e.find(".group-interactivity-btn .tryagn-btn").hasClass("nghidedata"))&&e.removeClass("enableSubmit enableReset enableTryAgain"),!window.isGradableActivity&&i>n&&b!=a+o&&!e.find(".group-interactivity-btn .tryagn-btn").hasClass("nghidedata")&&(e.addClass("enableTryAgain"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .tryagn-btn").removeClass("disabled"),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").css("display","none")),e.parents('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").addClass("disabled"),e.removeClass("enableSubmit"),e.removeClass("enableReset"),"CL"!=window.client&&"CL"!=window.parent.client||(r+=s,s=0),e.find(".correct-grp-question").text(a),e.find(".incorrect-grp-question").text(r),"CL"==window.client||"CL"==window.parent.client?(e.find(".partial-grp-question").parent(".group-interactivity-result").addClass("hide"),e.find(".group-interactivity-alert").removeClass("showAlert")):(e.find(".partial-grp-question").text(s),e.find(".group-interactivity-alert").addClass("showAlert")),e.find(".total-grp-question").text(Number(a)+Number(r)+Number(s)),$(".preview-row-container").css("height",""),$(".group-interactivity-container .group-interactivity-btn .reset-btn").addClass("disabled");let y={};y.correct=Number(a),y.incorrect=Number(r),y.partialCorrect=Number(s),y.unanticipated=Number(o),y.total=Number(b),y.marks=Number(c),"undefined"!=typeof apiHandle&&stateMainatainGroupActiviy(t,y)}function stateMainatainGroupActiviy(t,e){var i=$(t.target).parents(".group-interactivity-container"),n=i.hasClass("enableSubmit"),a=i.hasClass("enableTryAgain"),r=i.hasClass("enableReset"),s=Number(i.attr("data-maxtries")),o=1;$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").attr("data-attempts")&&(o=Number($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .submit-btn").attr("data-attempts")));let c={};c.isSubmitEnable=n,c.isShowMeEnable=!0,c.isTryAgainEnable=a,c.isResetEnable=r,c.totalNoOfAttempt=s,c.attemptsDone=o,c.marks=e,c.componentId=$(t.target).parents(".group-interactivity-container").parents(".customClass").eq(0).attr("data-saved-index"),window.isGradableActivity&&(c.gradableActivitySettingsJSON=window.gradableActivitySettingsJSON),saveAction(t,c)}$(".group-interactivity-container[data-maxtries]").each(function(){window.isGradableActivity?$(this).find(".group-interactivity-btn .submit-btn").attr("data-no-of-attempts","1"):$(this).find(".group-interactivity-btn .submit-btn").attr("data-no-of-attempts",$(this).attr("data-maxtries"))}),$(".group-interactivity-container.style2").each(function(){const t=$(this).find(".table-go-answertext-popup-div");$(this).find(".style2NavigationBtns").before(t)}),$(".group-interactivity-container.style2").each(function(){let t=$(this).find(".group-interactivity-btn .btnPrev.prev-btn"),e=$(this).find(".question-container-box .question-container").length;$('<div class="bottomCounter"><span class="presentSlideNum">1</span>/<span class="totalSlides">'+e+"</span></div>").insertAfter(t),$(this).find(".group-interactivity-btn .submit-btn").addClass("disabled"),1!=e&&$(this).find(".group-interactivity-btn .submit-btn").css("display","none")}),$(".group-interactivity-container .group-interactivity-btn .showme-btn").off("click").click(function(event){var function_name=$(this).attr("data-showmeattr"),event=event;void 0===function_name&&(function_name=$(this).attr("showmeattr")),eval(function_name)}),$(".group-interactivity-container.workedExample").each(function(){$(this).find(".showhide").off("click").click(function(t){t.preventDefault();var e=$(this).parents(".group-interactivity-container.workedExample").find(".question-container-box"),i=$(this).parents(".group-interactivity-container.workedExample").find(".showhideButton");"none"==e.css("display")||"flex"==e.css("display")?(e.css("display","block"),i.html("Hide")):(e.css("display","none"),i.html("Show"))})}),$(document).on("click",".group-interactivity-container.style2 .style2NavigationBtns .leftArr",function(t){if(!(1>=$(t.target).parents(".style2NavigationBtns").find(".numbersContainer").find(".active").text())){var e=$(t.target).parents(".style2NavigationBtns").find(".numbersContainer").scrollLeft();$(t.target).parents(".style2NavigationBtns").find(".numbersContainer").animate({scrollLeft:e-225},300),$(t.target).parents(".group-interactivity-container.style2").find(".prev-btn").trigger("click")}}),$(document).on("click",".group-interactivity-container.style2 .style2NavigationBtns .rightArr",function(t){if(!($(t.target).parents(".style2NavigationBtns").find(".numbersContainer").find(".number").length<=$(t.target).parents(".style2NavigationBtns").find(".numbersContainer").find(".active").text())){var e=$(t.target).parents(".style2NavigationBtns").find(".numbersContainer").scrollLeft();$(t.target).parents(".style2NavigationBtns").find(".numbersContainer").animate({scrollLeft:e+225},300),$(t.target).parents(".group-interactivity-container.style2").find(".next-btn").trigger("click")}}),$(document).on("click",".group-interactivity-container.style2 .group-interactivity-btn .prev-btn",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let e=parseInt($(t.target).parents(".group-interactivity-container").find(".style2NavigationBtns .number.active").eq(0).html()),i=e-2;if(1!=e){let e=100/$(t.target).parents(".group-interactivity-container").find(".question-container-box .question-container").length*i;$(t.target).parents(".group-interactivity-container").find(".question-container-box").css("transform","translateX(-"+e+"%)"),$(t.target).parents(".group-interactivity-container").find(".numbersContainer .number").removeClass("active"),$(t.target).parents(".group-interactivity-container").find(".numbersContainer .number").eq(i).addClass("active")}0==i?$(t.target).parents(".group-interactivity-btn").find(".prev-btn").addClass("disabled"):$(t.target).parents(".group-interactivity-btn").find(".prev-btn").removeClass("disabled"),$(t.target).parents(".group-interactivity-btn").find(".next-btn").removeClass("disabled"),scrollStyle2GroupNavigation(t,e-1)}),$(document).on("click",".group-interactivity-container.style2 .group-interactivity-btn .next-btn",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let e=parseInt($(t.target).parents(".group-interactivity-container").find(".style2NavigationBtns .number.active").eq(0).html()),i=$(t.target).parents(".group-interactivity-container").find(".question-container-box .question-container").length;if(e<i){let n=100/i*e;$(t.target).parents(".group-interactivity-container").find(".question-container-box").css("transform","translateX(-"+n+"%)"),$(t.target).parents(".group-interactivity-container").find(".numbersContainer .number").removeClass("active"),$(t.target).parents(".group-interactivity-container").find(".numbersContainer .number").eq(e).addClass("active")}e==i-1?$(t.target).parents(".group-interactivity-btn").find(".next-btn").addClass("disabled"):$(t.target).parents(".group-interactivity-btn").find(".next-btn").removeClass("disabled"),$(t.target).parents(".group-interactivity-btn").find(".prev-btn").removeClass("disabled"),scrollStyle2GroupNavigation(t,e+1)}),$(document).on("click",".group-interactivity-container.style2 .style2NavigationBtns .numbersContainer .number",function(t){let e=$(t.target).html(),i=parseInt(e)-1,n=$(t.target).parents(".group-interactivity-container").find(".question-container-box .question-container").length,a=100/n*i;$(t.target).parents(".group-interactivity-container").find(".question-container-box").css("transform","translateX(-"+a+"%)"),$(t.target).parents(".numbersContainer").find(".number").removeClass("active"),$(t.target).addClass("active"),parseInt(e)==n?($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .prev-btn").removeClass("disabled"),$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .next-btn").addClass("disabled")):1==parseInt(e)?($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .prev-btn").addClass("disabled"),$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .next-btn").removeClass("disabled")):($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .prev-btn").removeClass("disabled"),$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .next-btn").removeClass("disabled")),scrollStyle2GroupNavigation(t,e)}),$(document).on("click",".group-interactivity-container .remainingQuestionsReminder .remainingContent .yesAttempt",function(t){$(t.target).parents(".group-interactivity-container").find(".remainingQuestionsReminder").hide();let e=$(t.target).parents(".remainingQuestionsReminder").find(".skippedQuestions .unattemptedNoOfPages").html(),i=parseInt(e.split(",")[0])-1;if(""!=e&&$(t.target).parents(".group-interactivity-container").hasClass("style2")){let e=$(t.target).parents(".group-interactivity-container").find(".question-container-box .question-container").length;if(i<e){let n=100/e*i;$(t.target).parents(".group-interactivity-container").find(".question-container-box").css("transform","translateX(-"+n+"%)"),$(t.target).parents(".group-interactivity-container").find(".numbersContainer .number").removeClass("active"),$(t.target).parents(".group-interactivity-container").find(".numbersContainer .number").eq(i).addClass("active")}i==e-1?($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .next-btn").addClass("disabled"),$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .prev-btn").removeClass("disabled")):0==i?($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .prev-btn").addClass("disabled"),$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .next-btn").removeClass("disabled")):($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .next-btn").removeClass("disabled"),$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .prev-btn").removeClass("disabled")),1==e&&($(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .next-btn").addClass("disabled"),$(t.target).parents(".group-interactivity-container").find(".group-interactivity-btn .prev-btn").addClass("disabled")),scrollStyle2GroupNavigation(t,i+1)}else console.log("scroll feature not available for style1")}),window.highlightGroupBullets=function(t){t.find(".question-container-box .question-container").each(function(e,i){$(i).find("form").hasClass("attempted-question")?($(i).parents(".group-interactivity-container").find(".style2NavigationBtns .numbersContainer .number").eq(e).addClass("attempted"),$(i).parents(".group-interactivity-container").hasClass("submitted")||t.find(".group-interactivity-btn .reset-btn").removeClass("disabled")):$(i).parents(".group-interactivity-container").find(".style2NavigationBtns .numbersContainer .number").eq(e).removeClass("attempted")}),t.find(".question-container-box .question-container").each(function(e,i){if($(i).find("form").length&&!$(i).find("form").hasClass("attempted-question")&&!$(i).find("form").hasClass("non-interactive"))return t.find(".group-interactivity-btn .submit-btn").addClass("disabled"),$(i).parents(".group-interactivity-container").removeClass("enableSubmit"),!1;t.find(".group-interactivity-btn .submit-btn").removeClass("disabled"),$(i).parents(".group-interactivity-container").addClass("enableSubmit")}),t.find(".group-interactivity-btn .submit-btn")[0==t.find(".question-container .submit-btn.disabled").length?"removeClass":"addClass"]("disabled"),t.find(".group-interactivity-btn .submit-btn").attr("data-attempts")>=t.find(".group-interactivity-btn .submit-btn").attr("data-no-of-attempts")&&t.find(".group-interactivity-btn .submit-btn").addClass("disabled"),t.hasClass("submitted")&&t.find(".group-interactivity-btn .submit-btn").addClass("disabled"),t.find(".question-container-box .question-container form").length,t.find(".question-container-box .question-container form.attempted-question").length},$(".group-interactivity-container .group-interactivity-btn .tryagn-btn").off("click").click(function(event){event.preventDefault();var function_name=$(this).attr("data-tryagainattr"),event=event;void 0===function_name&&(function_name=$(this).attr("tryagainattr")),eval(function_name)}),$(".group-interactivity-container .group-interactivity-btn .reset-btn").off("click").click(function(event){var function_name=$(this).attr("data-resetattr"),event=event;void 0===function_name&&(function_name=$(this).attr("resetattr")),eval(function_name)}),$(".group-interactivity-container .group-interactivity-btn .submit-btn").off("click").click(function(event){let noOfQuestions=$(event.target).parents(".group-interactivity-container").find(".question-container-box .question-container form:not(.non-interactive)").length,noOfAttempted=$(event.target).parents(".group-interactivity-container").find(".question-container-box .question-container form.attempted-question:not(.non-interactive)").length;if(noOfQuestions==noOfAttempted||"CL"==window.client||"CL"==window.parent.client){if(1==$(event.currentTarget).parents(".customClass").length){var function_name=$(this).attr("data-submitattr"),event=event;void 0===function_name&&(function_name=$(this).attr("submitattr")),eval(function_name)}}else{let t="";$(event.target).parents(".group-interactivity-container").find(".question-container-box .question-container form").each(function(e,i){$(i).hasClass("attempted-question")||(""==t?t=" "+parseInt(e+1):t+=", "+parseInt(e+1))}),$(event.target).parents(".group-interactivity-container").find(".remainingQuestionsReminder .skippedQuestions .unattemptedNoOfPages").html(t),$(event.target).parents(".group-interactivity-container").find(".remainingQuestionsReminder").show()}"CL"==window.client||"CL"==window.parent.client?$(".submit-btn").addClass("hide"):$(".submit-btn").removeClass("hide")})});var groupSubmitBtnCheckInterval=setInterval(()=>{window.isGradableActivity&&($(".viewGradableActivityResult").length?(clearInterval(groupSubmitBtnCheckInterval),$(".group-interactivity-container").removeClass("enableSubmit"),$(".group-interactivity-btn .submit-btn").addClass("disabled")):$('.customClass[data-type="group-interactivity-template"]').each((t,e)=>{$(e).find(".group-interactivity-container").addClass("enableSubmit"),$(e).find(".group-interactivity-btn").removeClass("disabled")})),$('.customClass[data-type="group-interactivity-template"]').length&&$('.customClass[data-type="group-interactivity-template"]').find(".group-interactivity-container").each(function(t,e){window.highlightGroupBullets&&window.highlightGroupBullets($(e))})},1e3);
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(e,i){var n,o,a,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&s(a)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,o=t(this[0]);o.length&&o[0]!==document;){if(s=o.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===s?["Left","Right"]:["Top","Bottom"],a=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(a,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)}})})(jQuery),function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),s===e)return o[i]===e?null:o[i];o[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,o,a=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=e.pageX,l=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,o=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var o=!1,a=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,o,a,r,h,l,c,u,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=i.offset.left,v=m+p.helperProportions.width,_=i.offset.top,b=_+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,h=r+p.snapElements[u].width,l=p.snapElements[u].top,c=l+p.snapElements[u].height,r-g>v||m>h+g||l-g>b||_>c+g||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=g>=Math.abs(l-b),n=g>=Math.abs(c-_),o=g>=Math.abs(r-v),a=g>=Math.abs(h-m),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||o||a,"outer"!==f.snapMode&&(s=g>=Math.abs(l-_),n=g>=Math.abs(c-b),o=g>=Math.abs(r-m),a=g>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||o||a||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||o||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)
},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,s){if(!i.offset)return!1;var n,o,a=(t.positionAbs||t.position.absolute).left,r=a+t.helperProportions.width,h=(t.positionAbs||t.position.absolute).top,l=h+t.helperProportions.height,c=i.offset.left,u=c+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return a>=c&&u>=r&&h>=d&&p>=l;case"intersect":return a+t.helperProportions.width/2>c&&u>r-t.helperProportions.width/2&&h+t.helperProportions.height/2>d&&p>l-t.helperProportions.height/2;case"pointer":return n=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(o,d,i.proportions.height)&&e(n,c,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(a>=c&&u>=a||r>=c&&u>=r||c>a&&r>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions.height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions={width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=t.ui.intersect(e,this,this.options.tolerance),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===n}),o.length&&(s=t.data(o[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,n,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)s=t.trim(e[i]),o="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+o+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,o,a=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=e(this.helper.css("left")),n=e(this.helper.css("top")),a.containment&&(s+=t(a.containment).scrollLeft()||0,n+=t(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,s=this.helper,n={},o=this.originalMousePosition,a=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,c=this.size.height,u=e.pageX-o.left||0,d=e.pageY-o.top||0,p=this._change[a];return p?(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,o,a,r=this.options;a={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,s=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),n>a.minHeight&&(a.minHeight=n),a.maxWidth>s&&(a.maxWidth=s),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,s=this.axis,n=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=i(t.width)&&e.minWidth&&e.minWidth>t.width,r=i(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);return a&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),a&&c&&(t.left=h-e.minWidth),n&&c&&(t.left=h-e.maxWidth),r&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,n,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(n=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);n.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,o,a,r,h,l=t(this).data("ui-resizable"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){s[t]=e(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:a,h=t.ui.hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(e){var i,s,n,o,a=t(this).data("ui-resizable"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?h.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,i=Math.abs((a._helper?a.offset.left-u.left:a.offset.left-u.left)+a.sizeDiff.width),s=Math.abs((a._helper?a.offset.top-u.top:a.offset.top-h.top)+a.sizeDiff.height),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o&&(i-=a.parentData.left),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("ui-resizable"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},a=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,u=Math.round((s.height-n.height)/l)*l,d=n.width+c,p=n.height+u,f=i.maxWidth&&d>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,m&&(d+=h),v&&(p+=l),f&&(d-=h),g&&(p-=l),/^(se|s|e)$/.test(a)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.top=o.top-u):/^(sw)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.left=o.left-c):(e.size.width=d,e.size.height=p,e.position.top=o.top-u,e.position.left=o.left-c)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):undefined}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||o>i.right||i.top>h||a>i.bottom):"fit"===n.tolerance&&(l=i.left>o&&r>i.right&&i.top>a&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):undefined}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;
this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,o,a=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&r.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){a.push(this)});return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function s(e,i){var s,n,a={};for(s in i)n=i[s],e[s]!==n&&(o[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(a[s]=n));return a}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").addBack():a;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),o=function(){t.each(n,function(t,i){e[i]&&a[i+"Class"](e[i])})},o(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,o,a,r){return"boolean"==typeof n||n===e?o?t.effects.animateClass.call(this,n?{add:s}:{remove:s},o,a,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,o,a)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,o;for(o=0;s.length>o;o++)null!==s[o]&&(n=t.data(i+s[o]),n===e&&(n=""),t.css(s[o],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(o)&&o.call(n[0]),t.isFunction(e)&&e()}var n=t(this),o=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):a.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,o=i.queue,a=t.effects.effect[i.effect];return t.fx.off||!a?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(e):this.queue(o||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))
},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),undefined):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e),undefined)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),s=i.attr("id"),n=i.next(),o=n.attr("id");s||(s=a+"-header-"+e,i.attr("id",s)),o||(o=a+"-panel-"+e,n.attr("id",o)),i.attr("aria-controls",o),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=o.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n[0]===s[0],a=o&&i.collapsible,r=a?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:a?t():n,newPanel:r};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=a?!1:this.headers.index(n),this.active=o?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var o,a,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(a=d),a=a||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:r,easing:a,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(s,{duration:r,easing:a,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-l),l=0)}}),undefined):e.animate(i,r,a,p):t.animate(s,r,a,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,undefined;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),undefined;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),undefined):(this._searchTimeout(t),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(t),this._change(t),undefined)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):undefined},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(s){i===e&&t.__response(s),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[t](e),undefined):(this.search(null,e),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e,i,s,n,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var e=a.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,a.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var o,a="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,a,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,o,r){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],a,p)),n(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,a);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,a),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,o){var a,r,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(a=s||{},"string"==typeof s&&(a={},a[s]=o),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,a),null!==h&&a.dateFormat!==e&&a.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&a.dateFormat!==e&&a.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;
case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,o=t.datepicker._getInst(i.target);return t.datepicker._get(o,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,o,a,r,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),o=s?s.apply(e,[e,i]):{},o!==!1&&(n(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],a=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,r=this._curInst;!r||e&&r!==t.data(e,a)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var o,a,r,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,_=-1,b=-1,y=!1,w=function(t){var e=i.length>o+1&&i.charAt(o+1)===t;return e&&o++,e},k=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),o=s.substring(l).match(n);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},x=function(i,n,o){var a=-1,r=t.map(w(i)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(a=i[0],l+=n.length,!1):e}),-1!==a)return a+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;i.length>o;o++)if(y)"'"!==i.charAt(o)||w("'")?D():y=!1;else switch(i.charAt(o)){case"d":_=k("d");break;case"D":x("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,g);break;case"y":m=k("y");break;case"@":h=new Date(k("@")),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":w("'")?D():y=!0;break;default:D()}if(s.length>l&&(r=s.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(v=1,_=b;;){if(a=this._getDaysInMonth(m,v-1),a>=_)break;v++,_-=a}if(h=this._daylightSavingAdjust(new Date(m,v-1,_)),h.getFullYear()!==m||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,v,_,b,y,w,k,x,D,C,I,P,T,M,S,z,A,H,E,N,W,O,F,R,L=new Date,j=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Q=this._get(t,"stepMonths"),X=1!==U[0]||1!==U[1],$=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-q,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-Q,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+Q,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?$:j,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,D=0;U[1]>D;D++){if(C=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),I=" ui-corner-all",P="",X){if(P+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:P+=" ui-datepicker-group-first",I=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:P+=" ui-datepicker-group-last",I=" ui-corner-"+(Y?"left":"right");break;default:P+=" ui-datepicker-group-middle",I=""}P+="'>"}for(P+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===k?Y?o:s:"")+(/all|right/.test(I)&&0===k?Y?s:o:"")+this._generateMonthYearHeader(t,Z,te,G,J,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,T+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[M]+"'>"+p[M]+"</span></th>";for(P+=T+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),z=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((z+S)/7),H=X?this.maxRows>A?this.maxRows:A:A,this.maxRows=H,E=this._daylightSavingAdjust(new Date(te,Z,1-z)),N=0;H>N;N++){for(P+="<tr>",W=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(E)+"</td>":"",w=0;7>w;w++)O=m?m.apply(t.input?t.input[0]:null,[E]):[!0,""],F=E.getMonth()!==Z,R=F&&!_||!O[0]||G&&G>E||J&&E>J,W+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(E.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===E.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+O[1]+(E.getTime()===$.getTime()?" "+this._currentClass:"")+(E.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===j.getTime()?" ui-state-highlight":"")+(E.getTime()===$.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);P+=W+"</tr>"}Z++,Z>11&&(Z=0,te++),P+="</tbody></table>"+(X?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=P}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(_||(b+=y+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!o&&m&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},o={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){s.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}
}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,o=!1,a={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(o=!0),t in i&&(a[t]=s)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var o,a,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),o=t.effects.createWrapper(h).css({overflow:"hidden"}),a=o[p](),r=parseFloat(o.css(f))||0,m[p]=v?a:0,g||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:a+r),v&&(o.css(p,0),g||o.css(f,r+a)),o.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"effect"),l="hide"===h,c="show"===h,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||l?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=a.queue(),y=b.length;for((c||l)&&r.push("opacity"),t.effects.save(a,r),a.show(),t.effects.createWrapper(a),d||(d=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,_?2*-d:2*d).animate(o,g,m)),l&&(d/=Math.pow(2,p-1)),o={},o[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m).animate(o,g,m),d=l?2*d:d/2;l&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m)),a.queue(function(){l&&a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),a.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"hide"),l="show"===h,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(a,r),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n="IMG"===a[0].tagName?s:a,o=n[d](),l&&(n.css(d,0),n.css(p,o/2)),f[d]=l?o:0,f[p]=l?0:o/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(n,e.mode||"hide"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,o),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===c?-s:s),u[l]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*_,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*v,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?l*v:0),top:h+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:l*v),top:h+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var s,n,o=t(this),a=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),h="show"===r,l="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(o,a),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),h&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=h?n[0]:c,v[f[1]]=h?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){l&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(s,e.mode||"show"),a={backgroundColor:s.css("backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,n),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),o=t.effects.setMode(n,e.mode||"show"),a="show"===o,r="hide"===o,h=a||"hide"===o,l=2*(e.times||5)+(h?1:0),c=e.duration/l,u=0,d=n.queue(),p=d.length;for((a||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;l>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,l+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),o="hide"===n,a=parseInt(e.percent,10)||150,r=a/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:o?a:100,from:o?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),o=t.effects.setMode(s,e.mode||"effect"),a=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==o&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===o&&(n.from.opacity=0,n.to.opacity=1),"hide"===o&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(a,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=a.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===e.mode&&"show"===p?(a.from=e.to||b,a.to=e.from||s):(a.from=e.from||("show"===p?b:s),a.to=e.to||("hide"===p?b:s)),o={from:{y:a.from.height/s.height,x:a.from.width/s.width},to:{y:a.to.height/s.height,x:a.to.width/s.width}},("box"===g||"both"===g)&&(o.from.y!==o.to.y&&(_=_.concat(u),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(_=_.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),("content"===g||"both"===g)&&o.from.y!==o.to.y&&(_=_.concat(c).concat(l),a.from=t.effects.setTransition(a,c,o.from.y,a.from),a.to=t.effects.setTransition(a,c,o.to.y,a.to)),t.effects.save(a,_),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),m&&(n=t.effects.getBaseline(m,s),a.from.top=(s.outerHeight-a.outerHeight())*n.y,a.from.left=(s.outerWidth-a.outerWidth())*n.x,a.to.top=(s.outerHeight-a.to.outerHeight)*n.y,a.to.left=(s.outerWidth-a.to.outerWidth)*n.x),a.css(a.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),a.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*o.from.y,width:s.width*o.from.x,outerHeight:s.outerHeight*o.from.y,outerWidth:s.outerWidth*o.from.x},i.to={height:s.height*o.to.y,width:s.width*o.to.x,outerHeight:s.height*o.to.y,outerWidth:s.width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,u,o.from.y,i.from),i.to=t.effects.setTransition(i,u,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),t.effects.restore(a,_),f||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,i){var s=parseInt(i,10),n=t?a.to.left:a.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",h=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,o),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+h,g[d]=(p?"+=":"-=")+2*h,m[d]=(p?"-=":"+=")+2*h,n.animate(f,u,e.easing),s=1;l>s;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(n,e.mode||"show"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,o),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,o,a,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===n?a=!0:o=n+o,r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=a&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(o=String.fromCharCode(e.keyCode),r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),i=a.offsetWidth,n.css("overflow","scroll"),s=a.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),o=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),k=(e.collision||"flip").split(" "),x={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,g=_.height,m=_.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=i(x.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,C=d+_+s(this,"marginBottom")+w.height,I=t.extend({},v),P=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?I.left-=u:"center"===e.my[0]&&(I.left-=u/2),"bottom"===e.my[1]?I.top-=d:"center"===e.my[1]&&(I.top-=d/2),I.left+=P[0],I.top+=P[1],t.support.offsetFractions||(I.left=h(I.left),I.top=h(I.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[k[i]]&&t.ui.position[k[i]][s](I,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:C,offset:[o[0]+P[0],o[1]+P[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=m.left-I.left,s=i+p-u,n=m.top-I.top,o=n+g-d,h={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:I.left,top:I.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>g&&g>r(n+o)&&(h.vertical="middle"),h.important=a(r(i),r(s))>a(r(n),r(o))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(I,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-o-n;e.collisionWidth>o?h>0&&0>=l?(i=t.left+h+e.collisionWidth-o-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+o-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=a(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-o-n;e.collisionHeight>o?h>0&&0>=l?(i=t.top+h+e.collisionHeight-o-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+o-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,a=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-a-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-a-o,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,a=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-a-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-a-o,t.top+p+f+g>c&&(0>s||r(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,t.top+p+f+g>u&&(i>0||u>r(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)e.style[o]=s[o];e.appendChild(r),i=a||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()
},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,o;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),o!==!1&&this.values(e,i,!0))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,o,a,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(a=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-a)}this._slide(i,r,o)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,this.element.val(this._format(i)),void 0}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(e(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var n=0,o=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,o){return t(o).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var o,a,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(o=n.hash,a=e.element.find(e._sanitizeSelector(o))):(r=e._tabId(l),o="#"+r,a=e.element.find(o),a.length||(a=e._createPanel(r),a.insertAfter(e.panels[i-1]||e.tablist)),a.attr("aria-live","polite")),a.length&&(e.panels=e.panels.add(a)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":o.substring(1),"aria-labelledby":h}),a.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),h={tab:o,panel:r};s(a[0])||(this.xhr=t.ajax(this._ajaxSettings(a,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);
if(n){if(a=this._find(s),a.length)return a.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),o.stop(!0),this._hide(o,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery);
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(e,i){var n,o,a,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&s(a)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,o=t(this[0]);o.length&&o[0]!==document;){if(s=o.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===s?["Left","Right"]:["Top","Bottom"],a=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(a,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)}})})(jQuery),function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),s===e)return o[i]===e?null:o[i];o[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,o,a=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=e.pageX,l=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,o=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var o=!1,a=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,o,a,r,h,l,c,u,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=i.offset.left,v=m+p.helperProportions.width,_=i.offset.top,b=_+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,h=r+p.snapElements[u].width,l=p.snapElements[u].top,c=l+p.snapElements[u].height,r-g>v||m>h+g||l-g>b||_>c+g||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=g>=Math.abs(l-b),n=g>=Math.abs(c-_),o=g>=Math.abs(r-v),a=g>=Math.abs(h-m),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||o||a,"outer"!==f.snapMode&&(s=g>=Math.abs(l-_),n=g>=Math.abs(c-b),o=g>=Math.abs(r-m),a=g>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||o||a||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||o||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)
},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,s){if(!i.offset)return!1;var n,o,a=(t.positionAbs||t.position.absolute).left,r=a+t.helperProportions.width,h=(t.positionAbs||t.position.absolute).top,l=h+t.helperProportions.height,c=i.offset.left,u=c+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return a>=c&&u>=r&&h>=d&&p>=l;case"intersect":return a+t.helperProportions.width/2>c&&u>r-t.helperProportions.width/2&&h+t.helperProportions.height/2>d&&p>l-t.helperProportions.height/2;case"pointer":return n=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(o,d,i.proportions.height)&&e(n,c,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(a>=c&&u>=a||r>=c&&u>=r||c>a&&r>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions.height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions={width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=t.ui.intersect(e,this,this.options.tolerance),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===n}),o.length&&(s=t.data(o[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,n,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)s=t.trim(e[i]),o="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+o+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,o,a=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=e(this.helper.css("left")),n=e(this.helper.css("top")),a.containment&&(s+=t(a.containment).scrollLeft()||0,n+=t(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,s=this.helper,n={},o=this.originalMousePosition,a=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,c=this.size.height,u=e.pageX-o.left||0,d=e.pageY-o.top||0,p=this._change[a];return p?(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,o,a,r=this.options;a={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,s=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),n>a.minHeight&&(a.minHeight=n),a.maxWidth>s&&(a.maxWidth=s),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,s=this.axis,n=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=i(t.width)&&e.minWidth&&e.minWidth>t.width,r=i(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);return a&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),a&&c&&(t.left=h-e.minWidth),n&&c&&(t.left=h-e.maxWidth),r&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,n,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(n=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);n.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,o,a,r,h,l=t(this).data("ui-resizable"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){s[t]=e(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:a,h=t.ui.hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(e){var i,s,n,o,a=t(this).data("ui-resizable"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?h.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,i=Math.abs((a._helper?a.offset.left-u.left:a.offset.left-u.left)+a.sizeDiff.width),s=Math.abs((a._helper?a.offset.top-u.top:a.offset.top-h.top)+a.sizeDiff.height),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o&&(i-=a.parentData.left),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("ui-resizable"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},a=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,u=Math.round((s.height-n.height)/l)*l,d=n.width+c,p=n.height+u,f=i.maxWidth&&d>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,m&&(d+=h),v&&(p+=l),f&&(d-=h),g&&(p-=l),/^(se|s|e)$/.test(a)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.top=o.top-u):/^(sw)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.left=o.left-c):(e.size.width=d,e.size.height=p,e.position.top=o.top-u,e.position.left=o.left-c)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):undefined}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||o>i.right||i.top>h||a>i.bottom):"fit"===n.tolerance&&(l=i.left>o&&r>i.right&&i.top>a&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):undefined}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;
this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,o,a=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&r.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){a.push(this)});return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function s(e,i){var s,n,a={};for(s in i)n=i[s],e[s]!==n&&(o[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(a[s]=n));return a}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").addBack():a;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),o=function(){t.each(n,function(t,i){e[i]&&a[i+"Class"](e[i])})},o(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,o,a,r){return"boolean"==typeof n||n===e?o?t.effects.animateClass.call(this,n?{add:s}:{remove:s},o,a,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,o,a)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,o;for(o=0;s.length>o;o++)null!==s[o]&&(n=t.data(i+s[o]),n===e&&(n=""),t.css(s[o],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(o)&&o.call(n[0]),t.isFunction(e)&&e()}var n=t(this),o=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):a.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,o=i.queue,a=t.effects.effect[i.effect];return t.fx.off||!a?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(e):this.queue(o||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))
},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),undefined):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e),undefined)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),s=i.attr("id"),n=i.next(),o=n.attr("id");s||(s=a+"-header-"+e,i.attr("id",s)),o||(o=a+"-panel-"+e,n.attr("id",o)),i.attr("aria-controls",o),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=o.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n[0]===s[0],a=o&&i.collapsible,r=a?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:a?t():n,newPanel:r};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=a?!1:this.headers.index(n),this.active=o?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var o,a,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(a=d),a=a||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:r,easing:a,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(s,{duration:r,easing:a,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-l),l=0)}}),undefined):e.animate(i,r,a,p):t.animate(s,r,a,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,undefined;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),undefined;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),undefined):(this._searchTimeout(t),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(t),this._change(t),undefined)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):undefined},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(s){i===e&&t.__response(s),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[t](e),undefined):(this.search(null,e),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e,i,s,n,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var e=a.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,a.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var o,a="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,a,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,o,r){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],a,p)),n(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,a);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,a),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,o){var a,r,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(a=s||{},"string"==typeof s&&(a={},a[s]=o),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,a),null!==h&&a.dateFormat!==e&&a.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&a.dateFormat!==e&&a.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;
case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,o=t.datepicker._getInst(i.target);return t.datepicker._get(o,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,o,a,r,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),o=s?s.apply(e,[e,i]):{},o!==!1&&(n(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],a=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,r=this._curInst;!r||e&&r!==t.data(e,a)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var o,a,r,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,_=-1,b=-1,y=!1,w=function(t){var e=i.length>o+1&&i.charAt(o+1)===t;return e&&o++,e},k=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),o=s.substring(l).match(n);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},x=function(i,n,o){var a=-1,r=t.map(w(i)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(a=i[0],l+=n.length,!1):e}),-1!==a)return a+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;i.length>o;o++)if(y)"'"!==i.charAt(o)||w("'")?D():y=!1;else switch(i.charAt(o)){case"d":_=k("d");break;case"D":x("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,g);break;case"y":m=k("y");break;case"@":h=new Date(k("@")),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":w("'")?D():y=!0;break;default:D()}if(s.length>l&&(r=s.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(v=1,_=b;;){if(a=this._getDaysInMonth(m,v-1),a>=_)break;v++,_-=a}if(h=this._daylightSavingAdjust(new Date(m,v-1,_)),h.getFullYear()!==m||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,v,_,b,y,w,k,x,D,C,I,P,T,M,S,z,A,H,E,N,W,O,F,R,L=new Date,j=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Q=this._get(t,"stepMonths"),X=1!==U[0]||1!==U[1],$=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-q,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-Q,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+Q,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?$:j,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,D=0;U[1]>D;D++){if(C=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),I=" ui-corner-all",P="",X){if(P+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:P+=" ui-datepicker-group-first",I=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:P+=" ui-datepicker-group-last",I=" ui-corner-"+(Y?"left":"right");break;default:P+=" ui-datepicker-group-middle",I=""}P+="'>"}for(P+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===k?Y?o:s:"")+(/all|right/.test(I)&&0===k?Y?s:o:"")+this._generateMonthYearHeader(t,Z,te,G,J,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,T+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[M]+"'>"+p[M]+"</span></th>";for(P+=T+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),z=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((z+S)/7),H=X?this.maxRows>A?this.maxRows:A:A,this.maxRows=H,E=this._daylightSavingAdjust(new Date(te,Z,1-z)),N=0;H>N;N++){for(P+="<tr>",W=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(E)+"</td>":"",w=0;7>w;w++)O=m?m.apply(t.input?t.input[0]:null,[E]):[!0,""],F=E.getMonth()!==Z,R=F&&!_||!O[0]||G&&G>E||J&&E>J,W+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(E.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===E.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+O[1]+(E.getTime()===$.getTime()?" "+this._currentClass:"")+(E.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===j.getTime()?" ui-state-highlight":"")+(E.getTime()===$.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);P+=W+"</tr>"}Z++,Z>11&&(Z=0,te++),P+="</tbody></table>"+(X?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=P}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(_||(b+=y+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!o&&m&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},o={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){s.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}
}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,o=!1,a={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(o=!0),t in i&&(a[t]=s)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var o,a,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),o=t.effects.createWrapper(h).css({overflow:"hidden"}),a=o[p](),r=parseFloat(o.css(f))||0,m[p]=v?a:0,g||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:a+r),v&&(o.css(p,0),g||o.css(f,r+a)),o.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"effect"),l="hide"===h,c="show"===h,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||l?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=a.queue(),y=b.length;for((c||l)&&r.push("opacity"),t.effects.save(a,r),a.show(),t.effects.createWrapper(a),d||(d=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,_?2*-d:2*d).animate(o,g,m)),l&&(d/=Math.pow(2,p-1)),o={},o[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m).animate(o,g,m),d=l?2*d:d/2;l&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m)),a.queue(function(){l&&a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),a.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"hide"),l="show"===h,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(a,r),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n="IMG"===a[0].tagName?s:a,o=n[d](),l&&(n.css(d,0),n.css(p,o/2)),f[d]=l?o:0,f[p]=l?0:o/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(n,e.mode||"hide"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,o),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===c?-s:s),u[l]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*_,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*v,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?l*v:0),top:h+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:l*v),top:h+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var s,n,o=t(this),a=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),h="show"===r,l="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(o,a),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),h&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=h?n[0]:c,v[f[1]]=h?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){l&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(s,e.mode||"show"),a={backgroundColor:s.css("backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,n),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),o=t.effects.setMode(n,e.mode||"show"),a="show"===o,r="hide"===o,h=a||"hide"===o,l=2*(e.times||5)+(h?1:0),c=e.duration/l,u=0,d=n.queue(),p=d.length;for((a||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;l>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,l+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),o="hide"===n,a=parseInt(e.percent,10)||150,r=a/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:o?a:100,from:o?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),o=t.effects.setMode(s,e.mode||"effect"),a=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==o&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===o&&(n.from.opacity=0,n.to.opacity=1),"hide"===o&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(a,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=a.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===e.mode&&"show"===p?(a.from=e.to||b,a.to=e.from||s):(a.from=e.from||("show"===p?b:s),a.to=e.to||("hide"===p?b:s)),o={from:{y:a.from.height/s.height,x:a.from.width/s.width},to:{y:a.to.height/s.height,x:a.to.width/s.width}},("box"===g||"both"===g)&&(o.from.y!==o.to.y&&(_=_.concat(u),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(_=_.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),("content"===g||"both"===g)&&o.from.y!==o.to.y&&(_=_.concat(c).concat(l),a.from=t.effects.setTransition(a,c,o.from.y,a.from),a.to=t.effects.setTransition(a,c,o.to.y,a.to)),t.effects.save(a,_),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),m&&(n=t.effects.getBaseline(m,s),a.from.top=(s.outerHeight-a.outerHeight())*n.y,a.from.left=(s.outerWidth-a.outerWidth())*n.x,a.to.top=(s.outerHeight-a.to.outerHeight)*n.y,a.to.left=(s.outerWidth-a.to.outerWidth)*n.x),a.css(a.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),a.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*o.from.y,width:s.width*o.from.x,outerHeight:s.outerHeight*o.from.y,outerWidth:s.outerWidth*o.from.x},i.to={height:s.height*o.to.y,width:s.width*o.to.x,outerHeight:s.height*o.to.y,outerWidth:s.width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,u,o.from.y,i.from),i.to=t.effects.setTransition(i,u,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),t.effects.restore(a,_),f||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,i){var s=parseInt(i,10),n=t?a.to.left:a.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",h=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,o),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+h,g[d]=(p?"+=":"-=")+2*h,m[d]=(p?"-=":"+=")+2*h,n.animate(f,u,e.easing),s=1;l>s;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(n,e.mode||"show"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,o),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,o,a,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===n?a=!0:o=n+o,r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=a&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(o=String.fromCharCode(e.keyCode),r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),i=a.offsetWidth,n.css("overflow","scroll"),s=a.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),o=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),k=(e.collision||"flip").split(" "),x={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,g=_.height,m=_.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=i(x.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,C=d+_+s(this,"marginBottom")+w.height,I=t.extend({},v),P=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?I.left-=u:"center"===e.my[0]&&(I.left-=u/2),"bottom"===e.my[1]?I.top-=d:"center"===e.my[1]&&(I.top-=d/2),I.left+=P[0],I.top+=P[1],t.support.offsetFractions||(I.left=h(I.left),I.top=h(I.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[k[i]]&&t.ui.position[k[i]][s](I,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:C,offset:[o[0]+P[0],o[1]+P[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=m.left-I.left,s=i+p-u,n=m.top-I.top,o=n+g-d,h={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:I.left,top:I.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>g&&g>r(n+o)&&(h.vertical="middle"),h.important=a(r(i),r(s))>a(r(n),r(o))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(I,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-o-n;e.collisionWidth>o?h>0&&0>=l?(i=t.left+h+e.collisionWidth-o-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+o-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=a(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-o-n;e.collisionHeight>o?h>0&&0>=l?(i=t.top+h+e.collisionHeight-o-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+o-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,a=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-a-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-a-o,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,a=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-a-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-a-o,t.top+p+f+g>c&&(0>s||r(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,t.top+p+f+g>u&&(i>0||u>r(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)e.style[o]=s[o];e.appendChild(r),i=a||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()
},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,o;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),o!==!1&&this.values(e,i,!0))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,o,a,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(a=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-a)}this._slide(i,r,o)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,this.element.val(this._format(i)),void 0}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(e(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var n=0,o=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,o){return t(o).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var o,a,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(o=n.hash,a=e.element.find(e._sanitizeSelector(o))):(r=e._tabId(l),o="#"+r,a=e.element.find(o),a.length||(a=e._createPanel(r),a.insertAfter(e.panels[i-1]||e.tablist)),a.attr("aria-live","polite")),a.length&&(e.panels=e.panels.add(a)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":o.substring(1),"aria-labelledby":h}),a.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),h={tab:o,panel:r};s(a[0])||(this.xhr=t.ajax(this._ajaxSettings(a,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);
if(n){if(a=this._find(s),a.length)return a.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),o.stop(!0),this._hide(o,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery);
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function ($) {

  // Detect touch support
  $.support.touch = 'ontouchend' in document;

  // Ignore browsers without touch support
  if (!$.support.touch) {
    return;
  }

  var mouseProto = $.ui.mouse.prototype,
      _mouseInit = mouseProto._mouseInit,
      _mouseDestroy = mouseProto._mouseDestroy,
      touchHandled;

  /**
   * Simulate a mouse event based on a corresponding touch event
   * @param {Object} event A touch event
   * @param {String} simulatedType The corresponding mouse event
   */
  function simulateMouseEvent (event, simulatedType) {

    // Ignore multi-touch events
    if (event.originalEvent.touches.length > 1) {
      return;
    }

    event.preventDefault();

    var touch = event.originalEvent.changedTouches[0],
        simulatedEvent = document.createEvent('MouseEvents');
    
    // Initialize the simulated mouse event using the touch event's coordinates
    simulatedEvent.initMouseEvent(
      simulatedType,    // type
      true,             // bubbles                    
      true,             // cancelable                 
      window,           // view                       
      1,                // detail                     
      touch.screenX,    // screenX                    
      touch.screenY,    // screenY                    
      touch.clientX,    // clientX                    
      touch.clientY,    // clientY                    
      false,            // ctrlKey                    
      false,            // altKey                     
      false,            // shiftKey                   
      false,            // metaKey                    
      0,                // button                     
      null              // relatedTarget              
    );

    // Dispatch the simulated event to the target element
    event.target.dispatchEvent(simulatedEvent);
  }

  /**
   * Handle the jQuery UI widget's touchstart events
   * @param {Object} event The widget element's touchstart event
   */
  mouseProto._touchStart = function (event) {

    var self = this;

    // Ignore the event if another widget is already being handled
    if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {
      return;
    }

    // Set the flag to prevent other widgets from inheriting the touch event
    touchHandled = true;

    // Track movement to determine if interaction was a click
    self._touchMoved = false;

    // Simulate the mouseover event
    simulateMouseEvent(event, 'mouseover');

    // Simulate the mousemove event
    simulateMouseEvent(event, 'mousemove');

    // Simulate the mousedown event
    simulateMouseEvent(event, 'mousedown');
  };

  /**
   * Handle the jQuery UI widget's touchmove events
   * @param {Object} event The document's touchmove event
   */
  mouseProto._touchMove = function (event) {

    // Ignore event if not handled
    if (!touchHandled) {
      return;
    }

    // Interaction was not a click
    this._touchMoved = true;

    // Simulate the mousemove event
    simulateMouseEvent(event, 'mousemove');
  };

  /**
   * Handle the jQuery UI widget's touchend events
   * @param {Object} event The document's touchend event
   */
  mouseProto._touchEnd = function (event) {

    // Ignore event if not handled
    if (!touchHandled) {
      return;
    }

    // Simulate the mouseup event
    simulateMouseEvent(event, 'mouseup');

    // Simulate the mouseout event
    simulateMouseEvent(event, 'mouseout');

    // If the touch interaction did not move, it should trigger a click
    if (!this._touchMoved) {

      // Simulate the click event
      simulateMouseEvent(event, 'click');
    }

    // Unset the flag to allow other widgets to inherit the touch event
    touchHandled = false;
  };

  /**
   * A duck punch of the $.ui.mouse _mouseInit method to support touch events.
   * This method extends the widget with bound touch event handlers that
   * translate touch events to mouse events and pass them to the widget's
   * original mouse event handling methods.
   */
  mouseProto._mouseInit = function () {
    
    var self = this;

    // Delegate the touch handlers to the widget's element
    self.element.bind({
      touchstart: $.proxy(self, '_touchStart'),
      touchmove: $.proxy(self, '_touchMove'),
      touchend: $.proxy(self, '_touchEnd')
    });

    // Call the original $.ui.mouse init method
    _mouseInit.call(self);
  };

  /**
   * Remove the touch event handlers
   */
  mouseProto._mouseDestroy = function () {
    
    var self = this;

    // Delegate the touch handlers to the widget's element
    self.element.unbind({
      touchstart: $.proxy(self, '_touchStart'),
      touchmove: $.proxy(self, '_touchMove'),
      touchend: $.proxy(self, '_touchEnd')
    });

    // Call the original $.ui.mouse destroy method
    _mouseDestroy.call(self);
  };

})(jQuery);
/*
== malihu jquery custom scrollbar plugin == 
Version: 3.1.5 
Plugin URI: http://manos.malihu.gr/jquery-custom-content-scroller 
Author: malihu
Author URI: http://manos.malihu.gr
License: MIT License (MIT)
*/

/*
Copyright Manos Malihutsakis (email: manos@malihu.gr)
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

/*
The code below is fairly long, fully commented and should be normally used in development. 
For production, use either the minified jquery.mCustomScrollbar.min.js script or 
the production-ready jquery.mCustomScrollbar.concat.min.js which contains the plugin 
and dependencies (minified). 
*/

(function(factory){
	if(typeof define==="function" && define.amd){
		define(["jquery"],factory);
	}else if(typeof module!=="undefined" && module.exports){
		module.exports=factory;
	}else{
		factory(jQuery,window,document);
	}
}(function($){
(function(init){
	var _rjs=typeof define==="function" && define.amd, /* RequireJS */
		_njs=typeof module !== "undefined" && module.exports, /* NodeJS */
		_dlp=("https:"==document.location.protocol) ? "https:" : "http:", /* location protocol */
		_url="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";
	if(!_rjs){
		if(_njs){
			require("jquery-mousewheel")($);
		}else{
			/* load jquery-mousewheel plugin (via CDN) if it's not present or not loaded via RequireJS 
			(works when mCustomScrollbar fn is called on window load) */
			// $.event.special.mousewheel || $("head").append(decodeURI("%3Cscript src="+_dlp+"//"+_url+"%3E%3C/script%3E"));
		}
	}
	init();
}(function(){
	
	/* 
	----------------------------------------
	PLUGIN NAMESPACE, PREFIX, DEFAULT SELECTOR(S) 
	----------------------------------------
	*/
	
	var pluginNS="mCustomScrollbar",
		pluginPfx="mCS",
		defaultSelector=".mCustomScrollbar",
	
	
		
	
	
	/* 
	----------------------------------------
	DEFAULT OPTIONS 
	----------------------------------------
	*/
	
		defaults={
			/*
			set element/content width/height programmatically 
			values: boolean, pixels, percentage 
				option						default
				-------------------------------------
				setWidth					false
				setHeight					false
			*/
			/*
			set the initial css top property of content  
			values: string (e.g. "-100px", "10%" etc.)
			*/
			setTop:0,
			/*
			set the initial css left property of content  
			values: string (e.g. "-100px", "10%" etc.)
			*/
			setLeft:0,
			/* 
			scrollbar axis (vertical and/or horizontal scrollbars) 
			values (string): "y", "x", "yx"
			*/
			axis:"y",
			/*
			position of scrollbar relative to content  
			values (string): "inside", "outside" ("outside" requires elements with position:relative)
			*/
			scrollbarPosition:"inside",
			/*
			scrolling inertia
			values: integer (milliseconds)
			*/
			scrollInertia:950,
			/* 
			auto-adjust scrollbar dragger length
			values: boolean
			*/
			autoDraggerLength:true,
			/*
			auto-hide scrollbar when idle 
			values: boolean
				option						default
				-------------------------------------
				autoHideScrollbar			false
			*/
			/*
			auto-expands scrollbar on mouse-over and dragging
			values: boolean
				option						default
				-------------------------------------
				autoExpandScrollbar			false
			*/
			/*
			always show scrollbar, even when there's nothing to scroll 
			values: integer (0=disable, 1=always show dragger rail and buttons, 2=always show dragger rail, dragger and buttons), boolean
			*/
			alwaysShowScrollbar:0,
			/*
			scrolling always snaps to a multiple of this number in pixels
			values: integer, array ([y,x])
				option						default
				-------------------------------------
				snapAmount					null
			*/
			/*
			when snapping, snap with this number in pixels as an offset 
			values: integer
			*/
			snapOffset:0,
			/* 
			mouse-wheel scrolling
			*/
			mouseWheel:{
				/* 
				enable mouse-wheel scrolling
				values: boolean
				*/
				enable:true,
				/* 
				scrolling amount in pixels
				values: "auto", integer 
				*/
				scrollAmount:"auto",
				/* 
				mouse-wheel scrolling axis 
				the default scrolling direction when both vertical and horizontal scrollbars are present 
				values (string): "y", "x" 
				*/
				axis:"y",
				/* 
				prevent the default behaviour which automatically scrolls the parent element(s) when end of scrolling is reached 
				values: boolean
					option						default
					-------------------------------------
					preventDefault				null
				*/
				/*
				the reported mouse-wheel delta value. The number of lines (translated to pixels) one wheel notch scrolls.  
				values: "auto", integer 
				"auto" uses the default OS/browser value 
				*/
				deltaFactor:"auto",
				/*
				normalize mouse-wheel delta to -1 or 1 (disables mouse-wheel acceleration) 
				values: boolean
					option						default
					-------------------------------------
					normalizeDelta				null
				*/
				/*
				invert mouse-wheel scrolling direction 
				values: boolean
					option						default
					-------------------------------------
					invert						null
				*/
				/*
				the tags that disable mouse-wheel when cursor is over them
				*/
				disableOver:["select","option","keygen","datalist","textarea"]
			},
			/* 
			scrollbar buttons
			*/
			scrollButtons:{ 
				/*
				enable scrollbar buttons
				values: boolean
					option						default
					-------------------------------------
					enable						null
				*/
				/*
				scrollbar buttons scrolling type 
				values (string): "stepless", "stepped"
				*/
				scrollType:"stepless",
				/*
				scrolling amount in pixels
				values: "auto", integer 
				*/
				scrollAmount:"auto"
				/*
				tabindex of the scrollbar buttons
				values: false, integer
					option						default
					-------------------------------------
					tabindex					null
				*/
			},
			/* 
			keyboard scrolling
			*/
			keyboard:{ 
				/*
				enable scrolling via keyboard
				values: boolean
				*/
				enable:true,
				/*
				keyboard scrolling type 
				values (string): "stepless", "stepped"
				*/
				scrollType:"stepless",
				/*
				scrolling amount in pixels
				values: "auto", integer 
				*/
				scrollAmount:"auto"
			},
			/*
			enable content touch-swipe scrolling 
			values: boolean, integer, string (number)
			integer values define the axis-specific minimum amount required for scrolling momentum
			*/
			contentTouchScroll:25,
			/*
			enable/disable document (default) touch-swipe scrolling 
			*/
			documentTouchScroll:true,
			/*
			advanced option parameters
			*/
			advanced:{
				/*
				auto-expand content horizontally (for "x" or "yx" axis) 
				values: boolean, integer (the value 2 forces the non scrollHeight/scrollWidth method, the value 3 forces the scrollHeight/scrollWidth method)
					option						default
					-------------------------------------
					autoExpandHorizontalScroll	null
				*/
				/*
				auto-scroll to elements with focus
				*/
				autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
				/*
				auto-update scrollbars on content, element or viewport resize 
				should be true for fluid layouts/elements, adding/removing content dynamically, hiding/showing elements, content with images etc. 
				values: boolean
				*/
				updateOnContentResize:true,
				/*
				auto-update scrollbars each time each image inside the element is fully loaded 
				values: "auto", boolean
				*/
				updateOnImageLoad:"auto",
				/*
				auto-update scrollbars based on the amount and size changes of specific selectors 
				useful when you need to update the scrollbar(s) automatically, each time a type of element is added, removed or changes its size 
				values: boolean, string (e.g. "ul li" will auto-update scrollbars each time list-items inside the element are changed) 
				a value of true (boolean) will auto-update scrollbars each time any element is changed
					option						default
					-------------------------------------
					updateOnSelectorChange		null
				*/
				/*
				extra selectors that'll allow scrollbar dragging upon mousemove/up, pointermove/up, touchend etc. (e.g. "selector-1, selector-2")
					option						default
					-------------------------------------
					extraDraggableSelectors		null
				*/
				/*
				extra selectors that'll release scrollbar dragging upon mouseup, pointerup, touchend etc. (e.g. "selector-1, selector-2")
					option						default
					-------------------------------------
					releaseDraggableSelectors	null
				*/
				/*
				auto-update timeout 
				values: integer (milliseconds)
				*/
				autoUpdateTimeout:60
			},
			/* 
			scrollbar theme 
			values: string (see CSS/plugin URI for a list of ready-to-use themes)
			*/
			theme:"light",
			/*
			user defined callback functions
			*/
			callbacks:{
				/*
				Available callbacks: 
					callback					default
					-------------------------------------
					onCreate					null
					onInit						null
					onScrollStart				null
					onScroll					null
					onTotalScroll				null
					onTotalScrollBack			null
					whileScrolling				null
					onOverflowY					null
					onOverflowX					null
					onOverflowYNone				null
					onOverflowXNone				null
					onImageLoad					null
					onSelectorChange			null
					onBeforeUpdate				null
					onUpdate					null
				*/
				onTotalScrollOffset:0,
				onTotalScrollBackOffset:0,
				alwaysTriggerOffsets:true
			}
			/*
			add scrollbar(s) on all elements matching the current selector, now and in the future 
			values: boolean, string 
			string values: "on" (enable), "once" (disable after first invocation), "off" (disable)
			liveSelector values: string (selector)
				option						default
				-------------------------------------
				live						false
				liveSelector				null
			*/
		},
	
	
	
	
	
	/* 
	----------------------------------------
	VARS, CONSTANTS 
	----------------------------------------
	*/
	
		totalInstances=0, /* plugin instances amount */
		liveTimers={}, /* live option timers */
		oldIE=(window.attachEvent && !window.addEventListener) ? 1 : 0, /* detect IE < 9 */
		touchActive=false,touchable, /* global touch vars (for touch and pointer events) */
		/* general plugin classes */
		classes=[
			"mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar",
			"mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer",
			"mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"
		],
		
	
	
	
	
	/* 
	----------------------------------------
	METHODS 
	----------------------------------------
	*/
	
		methods={
			
			/* 
			plugin initialization method 
			creates the scrollbar(s), plugin data object and options
			----------------------------------------
			*/
			
			init:function(options){
				
				var options=$.extend(true,{},defaults,options),
					selector=_selector.call(this); /* validate selector */
				
				/* 
				if live option is enabled, monitor for elements matching the current selector and 
				apply scrollbar(s) when found (now and in the future) 
				*/
				if(options.live){
					var liveSelector=options.liveSelector || this.selector || defaultSelector, /* live selector(s) */
						$liveSelector=$(liveSelector); /* live selector(s) as jquery object */
					if(options.live==="off"){
						/* 
						disable live if requested 
						usage: $(selector).mCustomScrollbar({live:"off"}); 
						*/
						removeLiveTimers(liveSelector);
						return;
					}
					liveTimers[liveSelector]=setTimeout(function(){
						/* call mCustomScrollbar fn on live selector(s) every half-second */
						$liveSelector.mCustomScrollbar(options);
						if(options.live==="once" && $liveSelector.length){
							/* disable live after first invocation */
							removeLiveTimers(liveSelector);
						}
					},500);
				}else{
					removeLiveTimers(liveSelector);
				}
				
				/* options backward compatibility (for versions < 3.0.0) and normalization */
				options.setWidth=(options.set_width) ? options.set_width : options.setWidth;
				options.setHeight=(options.set_height) ? options.set_height : options.setHeight;
				options.axis=(options.horizontalScroll) ? "x" : _findAxis(options.axis);
				options.scrollInertia=options.scrollInertia>0 && options.scrollInertia<17 ? 17 : options.scrollInertia;
				if(typeof options.mouseWheel!=="object" &&  options.mouseWheel==true){ /* old school mouseWheel option (non-object) */
					options.mouseWheel={enable:true,scrollAmount:"auto",axis:"y",preventDefault:false,deltaFactor:"auto",normalizeDelta:false,invert:false}
				}
				options.mouseWheel.scrollAmount=!options.mouseWheelPixels ? options.mouseWheel.scrollAmount : options.mouseWheelPixels;
				options.mouseWheel.normalizeDelta=!options.advanced.normalizeMouseWheelDelta ? options.mouseWheel.normalizeDelta : options.advanced.normalizeMouseWheelDelta;
				options.scrollButtons.scrollType=_findScrollButtonsType(options.scrollButtons.scrollType); 
				
				_theme(options); /* theme-specific options */
				
				/* plugin constructor */
				return $(selector).each(function(){
					
					var $this=$(this);
					
					if(!$this.data(pluginPfx)){ /* prevent multiple instantiations */
					
						/* store options and create objects in jquery data */
						$this.data(pluginPfx,{
							idx:++totalInstances, /* instance index */
							opt:options, /* options */
							scrollRatio:{y:null,x:null}, /* scrollbar to content ratio */
							overflowed:null, /* overflowed axis */
							contentReset:{y:null,x:null}, /* object to check when content resets */
							bindEvents:false, /* object to check if events are bound */
							tweenRunning:false, /* object to check if tween is running */
							sequential:{}, /* sequential scrolling object */
							langDir:$this.css("direction"), /* detect/store direction (ltr or rtl) */
							cbOffsets:null, /* object to check whether callback offsets always trigger */
							/* 
							object to check how scrolling events where last triggered 
							"internal" (default - triggered by this script), "external" (triggered by other scripts, e.g. via scrollTo method) 
							usage: object.data("mCS").trigger
							*/
							trigger:null,
							/* 
							object to check for changes in elements in order to call the update method automatically 
							*/
							poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}
						});
						
						var d=$this.data(pluginPfx),o=d.opt,
							/* HTML data attributes */
							htmlDataAxis=$this.data("mcs-axis"),htmlDataSbPos=$this.data("mcs-scrollbar-position"),htmlDataTheme=$this.data("mcs-theme");
						 
						if(htmlDataAxis){o.axis=htmlDataAxis;} /* usage example: data-mcs-axis="y" */
						if(htmlDataSbPos){o.scrollbarPosition=htmlDataSbPos;} /* usage example: data-mcs-scrollbar-position="outside" */
						if(htmlDataTheme){ /* usage example: data-mcs-theme="minimal" */
							o.theme=htmlDataTheme;
							_theme(o); /* theme-specific options */
						}
						
						_pluginMarkup.call(this); /* add plugin markup */
						
						if(d && o.callbacks.onCreate && typeof o.callbacks.onCreate==="function"){o.callbacks.onCreate.call(this);} /* callbacks: onCreate */
						
						$("#mCSB_"+d.idx+"_container img:not(."+classes[2]+")").addClass(classes[2]); /* flag loaded images */
						
						methods.update.call(null,$this); /* call the update method */
					
					}
					
				});
				
			},
			/* ---------------------------------------- */
			
			
			
			/* 
			plugin update method 
			updates content and scrollbar(s) values, events and status 
			----------------------------------------
			usage: $(selector).mCustomScrollbar("update");
			*/
			
			update:function(el,cb){
				
				var selector=el || _selector.call(this); /* validate selector */
				
				return $(selector).each(function(){
					
					var $this=$(this);
					
					if($this.data(pluginPfx)){ /* check if plugin has initialized */
						
						var d=$this.data(pluginPfx),o=d.opt,
							mCSB_container=$("#mCSB_"+d.idx+"_container"),
							mCustomScrollBox=$("#mCSB_"+d.idx),
							mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")];
						
						if(!mCSB_container.length){return;}
						
						if(d.tweenRunning){_stop($this);} /* stop any running tweens while updating */
						
						if(cb && d && o.callbacks.onBeforeUpdate && typeof o.callbacks.onBeforeUpdate==="function"){o.callbacks.onBeforeUpdate.call(this);} /* callbacks: onBeforeUpdate */
						
						/* if element was disabled or destroyed, remove class(es) */
						if($this.hasClass(classes[3])){$this.removeClass(classes[3]);}
						if($this.hasClass(classes[4])){$this.removeClass(classes[4]);}
						
						/* css flexbox fix, detect/set max-height */
						mCustomScrollBox.css("max-height","none");
						if(mCustomScrollBox.height()!==$this.height()){mCustomScrollBox.css("max-height",$this.height());}
						
						_expandContentHorizontally.call(this); /* expand content horizontally */
						
						if(o.axis!=="y" && !o.advanced.autoExpandHorizontalScroll){
							mCSB_container.css("width",_contentWidth(mCSB_container));
						}
						
						d.overflowed=_overflowed.call(this); /* determine if scrolling is required */
						
						_scrollbarVisibility.call(this); /* show/hide scrollbar(s) */
						
						/* auto-adjust scrollbar dragger length analogous to content */
						if(o.autoDraggerLength){_setDraggerLength.call(this);}
						
						_scrollRatio.call(this); /* calculate and store scrollbar to content ratio */
						
						_bindEvents.call(this); /* bind scrollbar events */
						
						/* reset scrolling position and/or events */
						var to=[Math.abs(mCSB_container[0].offsetTop),Math.abs(mCSB_container[0].offsetLeft)];
						if(o.axis!=="x"){ /* y/yx axis */
							if(!d.overflowed[0]){ /* y scrolling is not required */
								_resetContentPosition.call(this); /* reset content position */
								if(o.axis==="y"){
									_unbindEvents.call(this);
								}else if(o.axis==="yx" && d.overflowed[1]){
									_scrollTo($this,to[1].toString(),{dir:"x",dur:0,overwrite:"none"});
								}
							}else if(mCSB_dragger[0].height()>mCSB_dragger[0].parent().height()){
								_resetContentPosition.call(this); /* reset content position */
							}else{ /* y scrolling is required */
								_scrollTo($this,to[0].toString(),{dir:"y",dur:0,overwrite:"none"});
								d.contentReset.y=null;
							}
						}
						if(o.axis!=="y"){ /* x/yx axis */
							if(!d.overflowed[1]){ /* x scrolling is not required */
								_resetContentPosition.call(this); /* reset content position */
								if(o.axis==="x"){
									_unbindEvents.call(this);
								}else if(o.axis==="yx" && d.overflowed[0]){
									_scrollTo($this,to[0].toString(),{dir:"y",dur:0,overwrite:"none"});
								}
							}else if(mCSB_dragger[1].width()>mCSB_dragger[1].parent().width()){
								_resetContentPosition.call(this); /* reset content position */
							}else{ /* x scrolling is required */
								_scrollTo($this,to[1].toString(),{dir:"x",dur:0,overwrite:"none"});
								d.contentReset.x=null;
							}
						}
						
						/* callbacks: onImageLoad, onSelectorChange, onUpdate */
						if(cb && d){
							if(cb===2 && o.callbacks.onImageLoad && typeof o.callbacks.onImageLoad==="function"){
								o.callbacks.onImageLoad.call(this);
							}else if(cb===3 && o.callbacks.onSelectorChange && typeof o.callbacks.onSelectorChange==="function"){
								o.callbacks.onSelectorChange.call(this);
							}else if(o.callbacks.onUpdate && typeof o.callbacks.onUpdate==="function"){
								o.callbacks.onUpdate.call(this);
							}
						}
						
						_autoUpdate.call(this); /* initialize automatic updating (for dynamic content, fluid layouts etc.) */
						
					}
					
				});
				
			},
			/* ---------------------------------------- */
			
			
			
			/* 
			plugin scrollTo method 
			triggers a scrolling event to a specific value
			----------------------------------------
			usage: $(selector).mCustomScrollbar("scrollTo",value,options);
			*/
		
			scrollTo:function(val,options){
				
				/* prevent silly things like $(selector).mCustomScrollbar("scrollTo",undefined); */
				if(typeof val=="undefined" || val==null){return;}
				
				var selector=_selector.call(this); /* validate selector */
				
				return $(selector).each(function(){
					
					var $this=$(this);
					
					if($this.data(pluginPfx)){ /* check if plugin has initialized */
					
						var d=$this.data(pluginPfx),o=d.opt,
							/* method default options */
							methodDefaults={
								trigger:"external", /* method is by default triggered externally (e.g. from other scripts) */
								scrollInertia:o.scrollInertia, /* scrolling inertia (animation duration) */
								scrollEasing:"mcsEaseInOut", /* animation easing */
								moveDragger:false, /* move dragger instead of content */
								timeout:60, /* scroll-to delay */
								callbacks:true, /* enable/disable callbacks */
								onStart:true,
								onUpdate:true,
								onComplete:true
							},
							methodOptions=$.extend(true,{},methodDefaults,options),
							to=_arr.call(this,val),dur=methodOptions.scrollInertia>0 && methodOptions.scrollInertia<17 ? 17 : methodOptions.scrollInertia;
						
						/* translate yx values to actual scroll-to positions */
						to[0]=_to.call(this,to[0],"y");
						to[1]=_to.call(this,to[1],"x");
						
						/* 
						check if scroll-to value moves the dragger instead of content. 
						Only pixel values apply on dragger (e.g. 100, "100px", "-=100" etc.) 
						*/
						if(methodOptions.moveDragger){
							to[0]*=d.scrollRatio.y;
							to[1]*=d.scrollRatio.x;
						}
						
						methodOptions.dur=_isTabHidden() ? 0 : dur; //skip animations if browser tab is hidden
						
						setTimeout(function(){ 
							/* do the scrolling */
							if(to[0]!==null && typeof to[0]!=="undefined" && o.axis!=="x" && d.overflowed[0]){ /* scroll y */
								methodOptions.dir="y";
								methodOptions.overwrite="all";
								_scrollTo($this,to[0].toString(),methodOptions);
							}
							if(to[1]!==null && typeof to[1]!=="undefined" && o.axis!=="y" && d.overflowed[1]){ /* scroll x */
								methodOptions.dir="x";
								methodOptions.overwrite="none";
								_scrollTo($this,to[1].toString(),methodOptions);
							}
						},methodOptions.timeout);
						
					}
					
				});
				
			},
			/* ---------------------------------------- */
			
			
			
			/*
			plugin stop method 
			stops scrolling animation
			----------------------------------------
			usage: $(selector).mCustomScrollbar("stop");
			*/
			stop:function(){
				
				var selector=_selector.call(this); /* validate selector */
				
				return $(selector).each(function(){
					
					var $this=$(this);
					
					if($this.data(pluginPfx)){ /* check if plugin has initialized */
										
						_stop($this);
					
					}
					
				});
				
			},
			/* ---------------------------------------- */
			
			
			
			/*
			plugin disable method 
			temporarily disables the scrollbar(s) 
			----------------------------------------
			usage: $(selector).mCustomScrollbar("disable",reset); 
			reset (boolean): resets content position to 0 
			*/
			disable:function(r){
				
				var selector=_selector.call(this); /* validate selector */
				
				return $(selector).each(function(){
					
					var $this=$(this);
					
					if($this.data(pluginPfx)){ /* check if plugin has initialized */
						
						var d=$this.data(pluginPfx);
						
						_autoUpdate.call(this,"remove"); /* remove automatic updating */
						
						_unbindEvents.call(this); /* unbind events */
						
						if(r){_resetContentPosition.call(this);} /* reset content position */
						
						_scrollbarVisibility.call(this,true); /* show/hide scrollbar(s) */
						
						$this.addClass(classes[3]); /* add disable class */
					
					}
					
				});
				
			},
			/* ---------------------------------------- */
			
			
			
			/*
			plugin destroy method 
			completely removes the scrollbar(s) and returns the element to its original state
			----------------------------------------
			usage: $(selector).mCustomScrollbar("destroy"); 
			*/
			destroy:function(){
				
				var selector=_selector.call(this); /* validate selector */
				
				return $(selector).each(function(){
					
					var $this=$(this);
					
					if($this.data(pluginPfx)){ /* check if plugin has initialized */
					
						var d=$this.data(pluginPfx),o=d.opt,
							mCustomScrollBox=$("#mCSB_"+d.idx),
							mCSB_container=$("#mCSB_"+d.idx+"_container"),
							scrollbar=$(".mCSB_"+d.idx+"_scrollbar");
					
						if(o.live){removeLiveTimers(o.liveSelector || $(selector).selector);} /* remove live timers */
						
						_autoUpdate.call(this,"remove"); /* remove automatic updating */
						
						_unbindEvents.call(this); /* unbind events */
						
						_resetContentPosition.call(this); /* reset content position */
						
						$this.removeData(pluginPfx); /* remove plugin data object */
						
						_delete(this,"mcs"); /* delete callbacks object */
						
						/* remove plugin markup */
						scrollbar.remove(); /* remove scrollbar(s) first (those can be either inside or outside plugin's inner wrapper) */
						mCSB_container.find("img."+classes[2]).removeClass(classes[2]); /* remove loaded images flag */
						mCustomScrollBox.replaceWith(mCSB_container.contents()); /* replace plugin's inner wrapper with the original content */
						/* remove plugin classes from the element and add destroy class */
						$this.removeClass(pluginNS+" _"+pluginPfx+"_"+d.idx+" "+classes[6]+" "+classes[7]+" "+classes[5]+" "+classes[3]).addClass(classes[4]);
					
					}
					
				});
				
			}
			/* ---------------------------------------- */
			
		},
	
	
	
	
		
	/* 
	----------------------------------------
	FUNCTIONS
	----------------------------------------
	*/
	
		/* validates selector (if selector is invalid or undefined uses the default one) */
		_selector=function(){
			return (typeof $(this)!=="object" || $(this).length<1) ? defaultSelector : this;
		},
		/* -------------------- */
		
		
		/* changes options according to theme */
		_theme=function(obj){
			var fixedSizeScrollbarThemes=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],
				nonExpandedScrollbarThemes=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],
				disabledScrollButtonsThemes=["minimal","minimal-dark"],
				enabledAutoHideScrollbarThemes=["minimal","minimal-dark"],
				scrollbarPositionOutsideThemes=["minimal","minimal-dark"];
			obj.autoDraggerLength=$.inArray(obj.theme,fixedSizeScrollbarThemes) > -1 ? false : obj.autoDraggerLength;
			obj.autoExpandScrollbar=$.inArray(obj.theme,nonExpandedScrollbarThemes) > -1 ? false : obj.autoExpandScrollbar;
			obj.scrollButtons.enable=$.inArray(obj.theme,disabledScrollButtonsThemes) > -1 ? false : obj.scrollButtons.enable;
			obj.autoHideScrollbar=$.inArray(obj.theme,enabledAutoHideScrollbarThemes) > -1 ? true : obj.autoHideScrollbar;
			obj.scrollbarPosition=$.inArray(obj.theme,scrollbarPositionOutsideThemes) > -1 ? "outside" : obj.scrollbarPosition;
		},
		/* -------------------- */
		
		
		/* live option timers removal */
		removeLiveTimers=function(selector){
			if(liveTimers[selector]){
				clearTimeout(liveTimers[selector]);
				_delete(liveTimers,selector);
			}
		},
		/* -------------------- */
		
		
		/* normalizes axis option to valid values: "y", "x", "yx" */
		_findAxis=function(val){
			return (val==="yx" || val==="xy" || val==="auto") ? "yx" : (val==="x" || val==="horizontal") ? "x" : "y";
		},
		/* -------------------- */
		
		
		/* normalizes scrollButtons.scrollType option to valid values: "stepless", "stepped" */
		_findScrollButtonsType=function(val){
			return (val==="stepped" || val==="pixels" || val==="step" || val==="click") ? "stepped" : "stepless";
		},
		/* -------------------- */
		
		
		/* generates plugin markup */
		_pluginMarkup=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				expandClass=o.autoExpandScrollbar ? " "+classes[1]+"_expand" : "",
				scrollbar=["<div id='mCSB_"+d.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+d.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+expandClass+"'><div class='"+classes[12]+"'><div id='mCSB_"+d.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+d.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+d.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+expandClass+"'><div class='"+classes[12]+"'><div id='mCSB_"+d.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],
				wrapperClass=o.axis==="yx" ? "mCSB_vertical_horizontal" : o.axis==="x" ? "mCSB_horizontal" : "mCSB_vertical",
				scrollbars=o.axis==="yx" ? scrollbar[0]+scrollbar[1] : o.axis==="x" ? scrollbar[1] : scrollbar[0],
				contentWrapper=o.axis==="yx" ? "<div id='mCSB_"+d.idx+"_container_wrapper' class='mCSB_container_wrapper' />" : "",
				autoHideClass=o.autoHideScrollbar ? " "+classes[6] : "",
				scrollbarDirClass=(o.axis!=="x" && d.langDir==="rtl") ? " "+classes[7] : "";
			if(o.setWidth){$this.css("width",o.setWidth);} /* set element width */
			if(o.setHeight){$this.css("height",o.setHeight);} /* set element height */
			o.setLeft=(o.axis!=="y" && d.langDir==="rtl") ? "989999px" : o.setLeft; /* adjust left position for rtl direction */
			$this.addClass(pluginNS+" _"+pluginPfx+"_"+d.idx+autoHideClass+scrollbarDirClass).wrapInner("<div id='mCSB_"+d.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+wrapperClass+"'><div id='mCSB_"+d.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir='"+d.langDir+"' /></div>");
			var mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container");
			if(o.axis!=="y" && !o.advanced.autoExpandHorizontalScroll){
				mCSB_container.css("width",_contentWidth(mCSB_container));
			}
			if(o.scrollbarPosition==="outside"){
				if($this.css("position")==="static"){ /* requires elements with non-static position */
					$this.css("position","relative");
				}
				$this.css("overflow","visible");
				mCustomScrollBox.addClass("mCSB_outside").after(scrollbars);
			}else{
				mCustomScrollBox.addClass("mCSB_inside").append(scrollbars);
				mCSB_container.wrap(contentWrapper);
			}
			_scrollButtons.call(this); /* add scrollbar buttons */
			/* minimum dragger length */
			var mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")];
			mCSB_dragger[0].css("min-height",mCSB_dragger[0].height());
			mCSB_dragger[1].css("min-width",mCSB_dragger[1].width());
		},
		/* -------------------- */
		
		
		/* calculates content width */
		_contentWidth=function(el){
			var val=[el[0].scrollWidth,Math.max.apply(Math,el.children().map(function(){return $(this).outerWidth(true);}).get())],w=el.parent().width();
			return val[0]>w ? val[0] : val[1]>w ? val[1] : "100%";
		},
		/* -------------------- */
		
		
		/* expands content horizontally */
		_expandContentHorizontally=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				mCSB_container=$("#mCSB_"+d.idx+"_container");
			if(o.advanced.autoExpandHorizontalScroll && o.axis!=="y"){
				/* calculate scrollWidth */
				mCSB_container.css({"width":"auto","min-width":0,"overflow-x":"scroll"});
				var w=Math.ceil(mCSB_container[0].scrollWidth);
				if(o.advanced.autoExpandHorizontalScroll===3 || (o.advanced.autoExpandHorizontalScroll!==2 && w>mCSB_container.parent().width())){
					mCSB_container.css({"width":w,"min-width":"100%","overflow-x":"inherit"});
				}else{
					/* 
					wrap content with an infinite width div and set its position to absolute and width to auto. 
					Setting width to auto before calculating the actual width is important! 
					We must let the browser set the width as browser zoom values are impossible to calculate.
					*/
					mCSB_container.css({"overflow-x":"inherit","position":"absolute"})
						.wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />")
						.css({ /* set actual width, original position and un-wrap */
							/* 
							get the exact width (with decimals) and then round-up. 
							Using jquery outerWidth() will round the width value which will mess up with inner elements that have non-integer width
							*/
							"width":(Math.ceil(mCSB_container[0].getBoundingClientRect().right+0.4)-Math.floor(mCSB_container[0].getBoundingClientRect().left)),
							"min-width":"100%",
							"position":"relative"
						}).unwrap();
				}
			}
		},
		/* -------------------- */
		
		
		/* adds scrollbar buttons */
		_scrollButtons=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				mCSB_scrollTools=$(".mCSB_"+d.idx+"_scrollbar:first"),
				tabindex=!_isNumeric(o.scrollButtons.tabindex) ? "" : "tabindex='"+o.scrollButtons.tabindex+"'",
				btnHTML=[
					"<a href='#' class='"+classes[13]+"' "+tabindex+" />",
					"<a href='#' class='"+classes[14]+"' "+tabindex+" />",
					"<a href='#' class='"+classes[15]+"' "+tabindex+" />",
					"<a href='#' class='"+classes[16]+"' "+tabindex+" />"
				],
				btn=[(o.axis==="x" ? btnHTML[2] : btnHTML[0]),(o.axis==="x" ? btnHTML[3] : btnHTML[1]),btnHTML[2],btnHTML[3]];
			if(o.scrollButtons.enable){
				mCSB_scrollTools.prepend(btn[0]).append(btn[1]).next(".mCSB_scrollTools").prepend(btn[2]).append(btn[3]);
			}
		},
		/* -------------------- */
		
		
		/* auto-adjusts scrollbar dragger length */
		_setDraggerLength=function(){
			var $this=$(this),d=$this.data(pluginPfx),
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],
				ratio=[mCustomScrollBox.height()/mCSB_container.outerHeight(false),mCustomScrollBox.width()/mCSB_container.outerWidth(false)],
				l=[
					parseInt(mCSB_dragger[0].css("min-height")),Math.round(ratio[0]*mCSB_dragger[0].parent().height()),
					parseInt(mCSB_dragger[1].css("min-width")),Math.round(ratio[1]*mCSB_dragger[1].parent().width())
				],
				h=oldIE && (l[1]<l[0]) ? l[0] : l[1],w=oldIE && (l[3]<l[2]) ? l[2] : l[3];
			mCSB_dragger[0].css({
				"height":h,"max-height":(mCSB_dragger[0].parent().height()-10)
			}).find(".mCSB_dragger_bar").css({"line-height":l[0]+"px"});
			mCSB_dragger[1].css({
				"width":w,"max-width":(mCSB_dragger[1].parent().width()-10)
			});
		},
		/* -------------------- */
		
		
		/* calculates scrollbar to content ratio */
		_scrollRatio=function(){
			var $this=$(this),d=$this.data(pluginPfx),
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],
				scrollAmount=[mCSB_container.outerHeight(false)-mCustomScrollBox.height(),mCSB_container.outerWidth(false)-mCustomScrollBox.width()],
				ratio=[
					scrollAmount[0]/(mCSB_dragger[0].parent().height()-mCSB_dragger[0].height()),
					scrollAmount[1]/(mCSB_dragger[1].parent().width()-mCSB_dragger[1].width())
				];
			d.scrollRatio={y:ratio[0],x:ratio[1]};
		},
		/* -------------------- */
		
		
		/* toggles scrolling classes */
		_onDragClasses=function(el,action,xpnd){
			var expandClass=xpnd ? classes[0]+"_expanded" : "",
				scrollbar=el.closest(".mCSB_scrollTools");
			if(action==="active"){
				el.toggleClass(classes[0]+" "+expandClass); scrollbar.toggleClass(classes[1]); 
				el[0]._draggable=el[0]._draggable ? 0 : 1;
			}else{
				if(!el[0]._draggable){
					if(action==="hide"){
						el.removeClass(classes[0]); scrollbar.removeClass(classes[1]);
					}else{
						el.addClass(classes[0]); scrollbar.addClass(classes[1]);
					}
				}
			}
		},
		/* -------------------- */
		
		
		/* checks if content overflows its container to determine if scrolling is required */
		_overflowed=function(){
			var $this=$(this),d=$this.data(pluginPfx),
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				contentHeight=d.overflowed==null ? mCSB_container.height() : mCSB_container.outerHeight(false),
				contentWidth=d.overflowed==null ? mCSB_container.width() : mCSB_container.outerWidth(false),
				h=mCSB_container[0].scrollHeight,w=mCSB_container[0].scrollWidth;
			if(h>contentHeight){contentHeight=h;}
			if(w>contentWidth){contentWidth=w;}
			return [contentHeight>mCustomScrollBox.height(),contentWidth>mCustomScrollBox.width()];
		},
		/* -------------------- */
		
		
		/* resets content position to 0 */
		_resetContentPosition=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")];
			_stop($this); /* stop any current scrolling before resetting */
			if((o.axis!=="x" && !d.overflowed[0]) || (o.axis==="y" && d.overflowed[0])){ /* reset y */
				mCSB_dragger[0].add(mCSB_container).css("top",0);
				_scrollTo($this,"_resetY");
			}
			if((o.axis!=="y" && !d.overflowed[1]) || (o.axis==="x" && d.overflowed[1])){ /* reset x */
				var cx=0;
				var dx=0;
				if(d.langDir==="rtl"){ /* adjust left position for rtl direction */
					cx=mCustomScrollBox.width()-mCSB_container.outerWidth(false);
					dx=Math.abs(cx/d.scrollRatio.x);
				}
				mCSB_container.css("left",cx);
				mCSB_dragger[1].css("left",dx);
				_scrollTo($this,"_resetX");
			}
		},
		/* -------------------- */
		
		
		/* binds scrollbar events */
		_bindEvents=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt;
			if(!d.bindEvents){ /* check if events are already bound */
				_draggable.call(this);
				if(o.contentTouchScroll){_contentDraggable.call(this);}
				_selectable.call(this);
				if(o.mouseWheel.enable){ /* bind mousewheel fn when plugin is available */
					function _mwt(){
						mousewheelTimeout=setTimeout(function(){
							if(!$.event.special.mousewheel){
								_mwt();
							}else{
								clearTimeout(mousewheelTimeout);
								_mousewheel.call($this[0]);
							}
						},100);
					}
					var mousewheelTimeout;
					_mwt();
				}
				_draggerRail.call(this);
				_wrapperScroll.call(this);
				if(o.advanced.autoScrollOnFocus){_focus.call(this);}
				if(o.scrollButtons.enable){_buttons.call(this);}
				if(o.keyboard.enable){_keyboard.call(this);}
				d.bindEvents=true;
			}
		},
		/* -------------------- */
		
		
		/* unbinds scrollbar events */
		_unbindEvents=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				namespace=pluginPfx+"_"+d.idx,
				sb=".mCSB_"+d.idx+"_scrollbar",
				sel=$("#mCSB_"+d.idx+",#mCSB_"+d.idx+"_container,#mCSB_"+d.idx+"_container_wrapper,"+sb+" ."+classes[12]+",#mCSB_"+d.idx+"_dragger_vertical,#mCSB_"+d.idx+"_dragger_horizontal,"+sb+">a"),
				mCSB_container=$("#mCSB_"+d.idx+"_container");
			if(o.advanced.releaseDraggableSelectors){sel.add($(o.advanced.releaseDraggableSelectors));}
			if(o.advanced.extraDraggableSelectors){sel.add($(o.advanced.extraDraggableSelectors));}
			if(d.bindEvents){ /* check if events are bound */
				/* unbind namespaced events from document/selectors */
				$(document).add($(!_canAccessIFrame() || top.document)).unbind("."+namespace);
				sel.each(function(){
					$(this).unbind("."+namespace);
				});
				/* clear and delete timeouts/objects */
				clearTimeout($this[0]._focusTimeout); _delete($this[0],"_focusTimeout");
				clearTimeout(d.sequential.step); _delete(d.sequential,"step");
				clearTimeout(mCSB_container[0].onCompleteTimeout); _delete(mCSB_container[0],"onCompleteTimeout");
				d.bindEvents=false;
			}
		},
		/* -------------------- */
		
		
		/* toggles scrollbar visibility */
		_scrollbarVisibility=function(disabled){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				contentWrapper=$("#mCSB_"+d.idx+"_container_wrapper"),
				content=contentWrapper.length ? contentWrapper : $("#mCSB_"+d.idx+"_container"),
				scrollbar=[$("#mCSB_"+d.idx+"_scrollbar_vertical"),$("#mCSB_"+d.idx+"_scrollbar_horizontal")],
				mCSB_dragger=[scrollbar[0].find(".mCSB_dragger"),scrollbar[1].find(".mCSB_dragger")];
			if(o.axis!=="x"){
				if(d.overflowed[0] && !disabled){
					scrollbar[0].add(mCSB_dragger[0]).add(scrollbar[0].children("a")).css("display","block");
					content.removeClass(classes[8]+" "+classes[10]);
				}else{
					if(o.alwaysShowScrollbar){
						if(o.alwaysShowScrollbar!==2){mCSB_dragger[0].css("display","none");}
						content.removeClass(classes[10]);
					}else{
						scrollbar[0].css("display","none");
						content.addClass(classes[10]);
					}
					content.addClass(classes[8]);
				}
			}
			if(o.axis!=="y"){
				if(d.overflowed[1] && !disabled){
					scrollbar[1].add(mCSB_dragger[1]).add(scrollbar[1].children("a")).css("display","block");
					content.removeClass(classes[9]+" "+classes[11]);
				}else{
					if(o.alwaysShowScrollbar){
						if(o.alwaysShowScrollbar!==2){mCSB_dragger[1].css("display","none");}
						content.removeClass(classes[11]);
					}else{
						scrollbar[1].css("display","none");
						content.addClass(classes[11]);
					}
					content.addClass(classes[9]);
				}
			}
			if(!d.overflowed[0] && !d.overflowed[1]){
				$this.addClass(classes[5]);
			}else{
				$this.removeClass(classes[5]);
			}
		},
		/* -------------------- */
		
		
		/* returns input coordinates of pointer, touch and mouse events (relative to document) */
		_coordinates=function(e){
			var t=e.type,o=e.target.ownerDocument!==document && frameElement!==null ? [$(frameElement).offset().top,$(frameElement).offset().left] : null,
				io=_canAccessIFrame() && e.target.ownerDocument!==top.document && frameElement!==null ? [$(e.view.frameElement).offset().top,$(e.view.frameElement).offset().left] : [0,0];
			switch(t){
				case "pointerdown": case "MSPointerDown": case "pointermove": case "MSPointerMove": case "pointerup": case "MSPointerUp":
					return o ? [e.originalEvent.pageY-o[0]+io[0],e.originalEvent.pageX-o[1]+io[1],false] : [e.originalEvent.pageY,e.originalEvent.pageX,false];
					break;
				case "touchstart": case "touchmove": case "touchend":
					var touch=e.originalEvent.touches[0] || e.originalEvent.changedTouches[0],
						touches=e.originalEvent.touches.length || e.originalEvent.changedTouches.length;
					return e.target.ownerDocument!==document ? [touch.screenY,touch.screenX,touches>1] : [touch.pageY,touch.pageX,touches>1];
					break;
				default:
					return o ? [e.pageY-o[0]+io[0],e.pageX-o[1]+io[1],false] : [e.pageY,e.pageX,false];
			}
		},
		/* -------------------- */
		
		
		/* 
		SCROLLBAR DRAG EVENTS
		scrolls content via scrollbar dragging 
		*/
		_draggable=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				namespace=pluginPfx+"_"+d.idx,
				draggerId=["mCSB_"+d.idx+"_dragger_vertical","mCSB_"+d.idx+"_dragger_horizontal"],
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				mCSB_dragger=$("#"+draggerId[0]+",#"+draggerId[1]),
				draggable,dragY,dragX,
				rds=o.advanced.releaseDraggableSelectors ? mCSB_dragger.add($(o.advanced.releaseDraggableSelectors)) : mCSB_dragger,
				eds=o.advanced.extraDraggableSelectors ? $(!_canAccessIFrame() || top.document).add($(o.advanced.extraDraggableSelectors)) : $(!_canAccessIFrame() || top.document);
			mCSB_dragger.bind("contextmenu."+namespace,function(e){
				e.preventDefault(); //prevent right click
			}).bind("mousedown."+namespace+" touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace,function(e){
				e.stopImmediatePropagation();
				e.preventDefault();
				if(!_mouseBtnLeft(e)){return;} /* left mouse button only */
				touchActive=true;
				if(oldIE){document.onselectstart=function(){return false;}} /* disable text selection for IE < 9 */
				_iframe.call(mCSB_container,false); /* enable scrollbar dragging over iframes by disabling their events */
				_stop($this);
				draggable=$(this);
				var offset=draggable.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left,
					h=draggable.height()+offset.top,w=draggable.width()+offset.left;
				if(y<h && y>0 && x<w && x>0){
					dragY=y; 
					dragX=x;
				}
				_onDragClasses(draggable,"active",o.autoExpandScrollbar); 
			}).bind("touchmove."+namespace,function(e){
				e.stopImmediatePropagation();
				e.preventDefault();
				var offset=draggable.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left;
				_drag(dragY,dragX,y,x);
			});
			$(document).add(eds).bind("mousemove."+namespace+" pointermove."+namespace+" MSPointerMove."+namespace,function(e){
				if(draggable){
					var offset=draggable.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left;
					if(dragY===y && dragX===x){return;} /* has it really moved? */
					_drag(dragY,dragX,y,x);
				}
			}).add(rds).bind("mouseup."+namespace+" touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace,function(e){
				if(draggable){
					_onDragClasses(draggable,"active",o.autoExpandScrollbar); 
					draggable=null;
				}
				touchActive=false;
				if(oldIE){document.onselectstart=null;} /* enable text selection for IE < 9 */
				_iframe.call(mCSB_container,true); /* enable iframes events */
			});
			function _drag(dragY,dragX,y,x){
				mCSB_container[0].idleTimer=o.scrollInertia<233 ? 250 : 0;
				if(draggable.attr("id")===draggerId[1]){
					var dir="x",to=((draggable[0].offsetLeft-dragX)+x)*d.scrollRatio.x;
				}else{
					var dir="y",to=((draggable[0].offsetTop-dragY)+y)*d.scrollRatio.y;
				}
				_scrollTo($this,to.toString(),{dir:dir,drag:true});
			}
		},
		/* -------------------- */
		
		
		/* 
		TOUCH SWIPE EVENTS
		scrolls content via touch swipe 
		Emulates the native touch-swipe scrolling with momentum found in iOS, Android and WP devices 
		*/
		_contentDraggable=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				namespace=pluginPfx+"_"+d.idx,
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],
				draggable,dragY,dragX,touchStartY,touchStartX,touchMoveY=[],touchMoveX=[],startTime,runningTime,endTime,distance,speed,amount,
				durA=0,durB,overwrite=o.axis==="yx" ? "none" : "all",touchIntent=[],touchDrag,docDrag,
				iframe=mCSB_container.find("iframe"),
				events=[
					"touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace, //start
					"touchmove."+namespace+" pointermove."+namespace+" MSPointerMove."+namespace, //move
					"touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace //end
				],
				touchAction=document.body.style.touchAction!==undefined && document.body.style.touchAction!=="";
			mCSB_container.bind(events[0],function(e){
				_onTouchstart(e);
			}).bind(events[1],function(e){
				_onTouchmove(e);
			});
			mCustomScrollBox.bind(events[0],function(e){
				_onTouchstart2(e);
			}).bind(events[2],function(e){
				_onTouchend(e);
			});
			if(iframe.length){
				iframe.each(function(){
					$(this).bind("load",function(){
						/* bind events on accessible iframes */
						if(_canAccessIFrame(this)){
							$(this.contentDocument || this.contentWindow.document).bind(events[0],function(e){
								_onTouchstart(e);
								_onTouchstart2(e);
							}).bind(events[1],function(e){
								_onTouchmove(e);
							}).bind(events[2],function(e){
								_onTouchend(e);
							});
						}
					});
				});
			}
			function _onTouchstart(e){
				if(!_pointerTouch(e) || touchActive || _coordinates(e)[2]){touchable=0; return;}
				touchable=1; touchDrag=0; docDrag=0; draggable=1;
				$this.removeClass("mCS_touch_action");
				var offset=mCSB_container.offset();
				dragY=_coordinates(e)[0]-offset.top;
				dragX=_coordinates(e)[1]-offset.left;
				touchIntent=[_coordinates(e)[0],_coordinates(e)[1]];
			}
			function _onTouchmove(e){
				if(!_pointerTouch(e) || touchActive || _coordinates(e)[2]){return;}
				if(!o.documentTouchScroll){e.preventDefault();} 
				e.stopImmediatePropagation();
				if(docDrag && !touchDrag){return;}
				if(draggable){
					runningTime=_getTime();
					var offset=mCustomScrollBox.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left,
						easing="mcsLinearOut";
					touchMoveY.push(y);
					touchMoveX.push(x);
					touchIntent[2]=Math.abs(_coordinates(e)[0]-touchIntent[0]); touchIntent[3]=Math.abs(_coordinates(e)[1]-touchIntent[1]);
					if(d.overflowed[0]){
						var limit=mCSB_dragger[0].parent().height()-mCSB_dragger[0].height(),
							prevent=((dragY-y)>0 && (y-dragY)>-(limit*d.scrollRatio.y) && (touchIntent[3]*2<touchIntent[2] || o.axis==="yx"));
					}
					if(d.overflowed[1]){
						var limitX=mCSB_dragger[1].parent().width()-mCSB_dragger[1].width(),
							preventX=((dragX-x)>0 && (x-dragX)>-(limitX*d.scrollRatio.x) && (touchIntent[2]*2<touchIntent[3] || o.axis==="yx"));
					}
					if(prevent || preventX){ /* prevent native document scrolling */
						if(!touchAction){e.preventDefault();} 
						touchDrag=1;
					}else{
						docDrag=1;
						$this.addClass("mCS_touch_action");
					}
					if(touchAction){e.preventDefault();} 
					amount=o.axis==="yx" ? [(dragY-y),(dragX-x)] : o.axis==="x" ? [null,(dragX-x)] : [(dragY-y),null];
					mCSB_container[0].idleTimer=250;
					if(d.overflowed[0]){_drag(amount[0],durA,easing,"y","all",true);}
					if(d.overflowed[1]){_drag(amount[1],durA,easing,"x",overwrite,true);}
				}
			}
			function _onTouchstart2(e){
				if(!_pointerTouch(e) || touchActive || _coordinates(e)[2]){touchable=0; return;}
				touchable=1;
				e.stopImmediatePropagation();
				_stop($this);
				startTime=_getTime();
				var offset=mCustomScrollBox.offset();
				touchStartY=_coordinates(e)[0]-offset.top;
				touchStartX=_coordinates(e)[1]-offset.left;
				touchMoveY=[]; touchMoveX=[];
			}
			function _onTouchend(e){
				if(!_pointerTouch(e) || touchActive || _coordinates(e)[2]){return;}
				draggable=0;
				e.stopImmediatePropagation();
				touchDrag=0; docDrag=0;
				endTime=_getTime();
				var offset=mCustomScrollBox.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left;
				if((endTime-runningTime)>30){return;}
				speed=1000/(endTime-startTime);
				var easing="mcsEaseOut",slow=speed<2.5,
					diff=slow ? [touchMoveY[touchMoveY.length-2],touchMoveX[touchMoveX.length-2]] : [0,0];
				distance=slow ? [(y-diff[0]),(x-diff[1])] : [y-touchStartY,x-touchStartX];
				var absDistance=[Math.abs(distance[0]),Math.abs(distance[1])];
				speed=slow ? [Math.abs(distance[0]/4),Math.abs(distance[1]/4)] : [speed,speed];
				var a=[
					Math.abs(mCSB_container[0].offsetTop)-(distance[0]*_m((absDistance[0]/speed[0]),speed[0])),
					Math.abs(mCSB_container[0].offsetLeft)-(distance[1]*_m((absDistance[1]/speed[1]),speed[1]))
				];
				amount=o.axis==="yx" ? [a[0],a[1]] : o.axis==="x" ? [null,a[1]] : [a[0],null];
				durB=[(absDistance[0]*4)+o.scrollInertia,(absDistance[1]*4)+o.scrollInertia];
				var md=parseInt(o.contentTouchScroll) || 0; /* absolute minimum distance required */
				amount[0]=absDistance[0]>md ? amount[0] : 0;
				amount[1]=absDistance[1]>md ? amount[1] : 0;
				if(d.overflowed[0]){_drag(amount[0],durB[0],easing,"y",overwrite,false);}
				if(d.overflowed[1]){_drag(amount[1],durB[1],easing,"x",overwrite,false);}
			}
			function _m(ds,s){
				var r=[s*1.5,s*2,s/1.5,s/2];
				if(ds>90){
					return s>4 ? r[0] : r[3];
				}else if(ds>60){
					return s>3 ? r[3] : r[2];
				}else if(ds>30){
					return s>8 ? r[1] : s>6 ? r[0] : s>4 ? s : r[2];
				}else{
					return s>8 ? s : r[3];
				}
			}
			function _drag(amount,dur,easing,dir,overwrite,drag){
				if(!amount){return;}
				_scrollTo($this,amount.toString(),{dur:dur,scrollEasing:easing,dir:dir,overwrite:overwrite,drag:drag});
			}
		},
		/* -------------------- */
		
		
		/* 
		SELECT TEXT EVENTS 
		scrolls content when text is selected 
		*/
		_selectable=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,seq=d.sequential,
				namespace=pluginPfx+"_"+d.idx,
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				wrapper=mCSB_container.parent(),
				action;
			mCSB_container.bind("mousedown."+namespace,function(e){
				if(touchable){return;}
				if(!action){action=1; touchActive=true;}
			}).add(document).bind("mousemove."+namespace,function(e){
				if(!touchable && action && _sel()){
					var offset=mCSB_container.offset(),
						y=_coordinates(e)[0]-offset.top+mCSB_container[0].offsetTop,x=_coordinates(e)[1]-offset.left+mCSB_container[0].offsetLeft;
					if(y>0 && y<wrapper.height() && x>0 && x<wrapper.width()){
						if(seq.step){_seq("off",null,"stepped");}
					}else{
						if(o.axis!=="x" && d.overflowed[0]){
							if(y<0){
								_seq("on",38);
							}else if(y>wrapper.height()){
								_seq("on",40);
							}
						}
						if(o.axis!=="y" && d.overflowed[1]){
							if(x<0){
								_seq("on",37);
							}else if(x>wrapper.width()){
								_seq("on",39);
							}
						}
					}
				}
			}).bind("mouseup."+namespace+" dragend."+namespace,function(e){
				if(touchable){return;}
				if(action){action=0; _seq("off",null);}
				touchActive=false;
			});
			function _sel(){
				return 	window.getSelection ? window.getSelection().toString() : 
						document.selection && document.selection.type!="Control" ? document.selection.createRange().text : 0;
			}
			function _seq(a,c,s){
				seq.type=s && action ? "stepped" : "stepless";
				seq.scrollAmount=10;
				_sequentialScroll($this,a,c,"mcsLinearOut",s ? 60 : null);
			}
		},
		/* -------------------- */
		
		
		/* 
		MOUSE WHEEL EVENT
		scrolls content via mouse-wheel 
		via mouse-wheel plugin (https://github.com/brandonaaron/jquery-mousewheel)
		*/
		_mousewheel=function(){
			if(!$(this).data(pluginPfx)){return;} /* Check if the scrollbar is ready to use mousewheel events (issue: #185) */
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				namespace=pluginPfx+"_"+d.idx,
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],
				iframe=$("#mCSB_"+d.idx+"_container").find("iframe");
			if(iframe.length){
				iframe.each(function(){
					$(this).bind("load",function(){
						/* bind events on accessible iframes */
						if(_canAccessIFrame(this)){
							$(this.contentDocument || this.contentWindow.document).bind("mousewheel."+namespace,function(e,delta){
								_onMousewheel(e,delta);
							});
						}
					});
				});
			}
			mCustomScrollBox.bind("mousewheel."+namespace,function(e,delta){
				_onMousewheel(e,delta);
			});
			function _onMousewheel(e,delta){
				_stop($this);
				if(_disableMousewheel($this,e.target)){return;} /* disables mouse-wheel when hovering specific elements */
				var deltaFactor=o.mouseWheel.deltaFactor!=="auto" ? parseInt(o.mouseWheel.deltaFactor) : (oldIE && e.deltaFactor<100) ? 100 : e.deltaFactor || 100,
					dur=o.scrollInertia;
				if(o.axis==="x" || o.mouseWheel.axis==="x"){
					var dir="x",
						px=[Math.round(deltaFactor*d.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],
						amount=o.mouseWheel.scrollAmount!=="auto" ? px[1] : px[0]>=mCustomScrollBox.width() ? mCustomScrollBox.width()*0.9 : px[0],
						contentPos=Math.abs($("#mCSB_"+d.idx+"_container")[0].offsetLeft),
						draggerPos=mCSB_dragger[1][0].offsetLeft,
						limit=mCSB_dragger[1].parent().width()-mCSB_dragger[1].width(),
						dlt=o.mouseWheel.axis==="y" ? (e.deltaY || delta) : e.deltaX;
				}else{
					var dir="y",
						px=[Math.round(deltaFactor*d.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],
						amount=o.mouseWheel.scrollAmount!=="auto" ? px[1] : px[0]>=mCustomScrollBox.height() ? mCustomScrollBox.height()*0.9 : px[0],
						contentPos=Math.abs($("#mCSB_"+d.idx+"_container")[0].offsetTop),
						draggerPos=mCSB_dragger[0][0].offsetTop,
						limit=mCSB_dragger[0].parent().height()-mCSB_dragger[0].height(),
						dlt=e.deltaY || delta;
				}
				if((dir==="y" && !d.overflowed[0]) || (dir==="x" && !d.overflowed[1])){return;}
				if(o.mouseWheel.invert || e.webkitDirectionInvertedFromDevice){dlt=-dlt;}
				if(o.mouseWheel.normalizeDelta){dlt=dlt<0 ? -1 : 1;}
				if((dlt>0 && draggerPos!==0) || (dlt<0 && draggerPos!==limit) || o.mouseWheel.preventDefault){
					e.stopImmediatePropagation();
					e.preventDefault();
				}
				if(e.deltaFactor<5 && !o.mouseWheel.normalizeDelta){
					//very low deltaFactor values mean some kind of delta acceleration (e.g. osx trackpad), so adjusting scrolling accordingly
					amount=e.deltaFactor; dur=17;
				}
				_scrollTo($this,(contentPos-(dlt*amount)).toString(),{dir:dir,dur:dur});
			}
		},
		/* -------------------- */
		
		
		/* checks if iframe can be accessed */
		_canAccessIFrameCache=new Object(),
		_canAccessIFrame=function(iframe){
		    var result=false,cacheKey=false,html=null;
		    if(iframe===undefined){
				cacheKey="#empty";
		    }else if($(iframe).attr("id")!==undefined){
				cacheKey=$(iframe).attr("id");
		    }
			if(cacheKey!==false && _canAccessIFrameCache[cacheKey]!==undefined){
				return _canAccessIFrameCache[cacheKey];
			}
			if(!iframe){
				try{
					var doc=top.document;
					html=doc.body.innerHTML;
				}catch(err){/* do nothing */}
				result=(html!==null);
			}else{
				try{
					var doc=iframe.contentDocument || iframe.contentWindow.document;
					html=doc.body.innerHTML;
				}catch(err){/* do nothing */}
				result=(html!==null);
			}
			if(cacheKey!==false){_canAccessIFrameCache[cacheKey]=result;}
			return result;
		},
		/* -------------------- */
		
		
		/* switches iframe's pointer-events property (drag, mousewheel etc. over cross-domain iframes) */
		_iframe=function(evt){
			var el=this.find("iframe");
			if(!el.length){return;} /* check if content contains iframes */
			var val=!evt ? "none" : "auto";
			el.css("pointer-events",val); /* for IE11, iframe's display property should not be "block" */
		},
		/* -------------------- */
		
		
		/* disables mouse-wheel when hovering specific elements like select, datalist etc. */
		_disableMousewheel=function(el,target){
			var tag=target.nodeName.toLowerCase(),
				tags=el.data(pluginPfx).opt.mouseWheel.disableOver,
				/* elements that require focus */
				focusTags=["select","textarea"];
			return $.inArray(tag,tags) > -1 && !($.inArray(tag,focusTags) > -1 && !$(target).is(":focus"));
		},
		/* -------------------- */
		
		
		/* 
		DRAGGER RAIL CLICK EVENT
		scrolls content via dragger rail 
		*/
		_draggerRail=function(){
			var $this=$(this),d=$this.data(pluginPfx),
				namespace=pluginPfx+"_"+d.idx,
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				wrapper=mCSB_container.parent(),
				mCSB_draggerContainer=$(".mCSB_"+d.idx+"_scrollbar ."+classes[12]),
				clickable;
			mCSB_draggerContainer.bind("mousedown."+namespace+" touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace,function(e){
				touchActive=true;
				if(!$(e.target).hasClass("mCSB_dragger")){clickable=1;}
			}).bind("touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace,function(e){
				touchActive=false;
			}).bind("click."+namespace,function(e){
				if(!clickable){return;}
				clickable=0;
				if($(e.target).hasClass(classes[12]) || $(e.target).hasClass("mCSB_draggerRail")){
					_stop($this);
					var el=$(this),mCSB_dragger=el.find(".mCSB_dragger");
					if(el.parent(".mCSB_scrollTools_horizontal").length>0){
						if(!d.overflowed[1]){return;}
						var dir="x",
							clickDir=e.pageX>mCSB_dragger.offset().left ? -1 : 1,
							to=Math.abs(mCSB_container[0].offsetLeft)-(clickDir*(wrapper.width()*0.9));
					}else{
						if(!d.overflowed[0]){return;}
						var dir="y",
							clickDir=e.pageY>mCSB_dragger.offset().top ? -1 : 1,
							to=Math.abs(mCSB_container[0].offsetTop)-(clickDir*(wrapper.height()*0.9));
					}
					_scrollTo($this,to.toString(),{dir:dir,scrollEasing:"mcsEaseInOut"});
				}
			});
		},
		/* -------------------- */
		
		
		/* 
		FOCUS EVENT
		scrolls content via element focus (e.g. clicking an input, pressing TAB key etc.)
		*/
		_focus=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				namespace=pluginPfx+"_"+d.idx,
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				wrapper=mCSB_container.parent();
			mCSB_container.bind("focusin."+namespace,function(e){
				var el=$(document.activeElement),
					nested=mCSB_container.find(".mCustomScrollBox").length,
					dur=0;
				if(!el.is(o.advanced.autoScrollOnFocus)){return;}
				_stop($this);
				clearTimeout($this[0]._focusTimeout);
				$this[0]._focusTimer=nested ? (dur+17)*nested : 0;
				$this[0]._focusTimeout=setTimeout(function(){
					var	to=[_childPos(el)[0],_childPos(el)[1]],
						contentPos=[mCSB_container[0].offsetTop,mCSB_container[0].offsetLeft],
						isVisible=[
							(contentPos[0]+to[0]>=0 && contentPos[0]+to[0]<wrapper.height()-el.outerHeight(false)),
							(contentPos[1]+to[1]>=0 && contentPos[0]+to[1]<wrapper.width()-el.outerWidth(false))
						],
						overwrite=(o.axis==="yx" && !isVisible[0] && !isVisible[1]) ? "none" : "all";
					if(o.axis!=="x" && !isVisible[0]){
						_scrollTo($this,to[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:overwrite,dur:dur});
					}
					if(o.axis!=="y" && !isVisible[1]){
						_scrollTo($this,to[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:overwrite,dur:dur});
					}
				},$this[0]._focusTimer);
			});
		},
		/* -------------------- */
		
		
		/* sets content wrapper scrollTop/scrollLeft always to 0 */
		_wrapperScroll=function(){
			var $this=$(this),d=$this.data(pluginPfx),
				namespace=pluginPfx+"_"+d.idx,
				wrapper=$("#mCSB_"+d.idx+"_container").parent();
			wrapper.bind("scroll."+namespace,function(e){
				if(wrapper.scrollTop()!==0 || wrapper.scrollLeft()!==0){
					$(".mCSB_"+d.idx+"_scrollbar").css("visibility","hidden"); /* hide scrollbar(s) */
				}
			});
		},
		/* -------------------- */
		
		
		/* 
		BUTTONS EVENTS
		scrolls content via up, down, left and right buttons 
		*/
		_buttons=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,seq=d.sequential,
				namespace=pluginPfx+"_"+d.idx,
				sel=".mCSB_"+d.idx+"_scrollbar",
				btn=$(sel+">a");
			btn.bind("contextmenu."+namespace,function(e){
				e.preventDefault(); //prevent right click
			}).bind("mousedown."+namespace+" touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace+" mouseup."+namespace+" touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace+" mouseout."+namespace+" pointerout."+namespace+" MSPointerOut."+namespace+" click."+namespace,function(e){
				e.preventDefault();
				if(!_mouseBtnLeft(e)){return;} /* left mouse button only */
				var btnClass=$(this).attr("class");
				seq.type=o.scrollButtons.scrollType;
				switch(e.type){
					case "mousedown": case "touchstart": case "pointerdown": case "MSPointerDown":
						if(seq.type==="stepped"){return;}
						touchActive=true;
						d.tweenRunning=false;
						_seq("on",btnClass);
						break;
					case "mouseup": case "touchend": case "pointerup": case "MSPointerUp":
					case "mouseout": case "pointerout": case "MSPointerOut":
						if(seq.type==="stepped"){return;}
						touchActive=false;
						if(seq.dir){_seq("off",btnClass);}
						break;
					case "click":
						if(seq.type!=="stepped" || d.tweenRunning){return;}
						_seq("on",btnClass);
						break;
				}
				function _seq(a,c){
					seq.scrollAmount=o.scrollButtons.scrollAmount;
					_sequentialScroll($this,a,c);
				}
			});
		},
		/* -------------------- */
		
		
		/* 
		KEYBOARD EVENTS
		scrolls content via keyboard 
		Keys: up arrow, down arrow, left arrow, right arrow, PgUp, PgDn, Home, End
		*/
		_keyboard=function(){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,seq=d.sequential,
				namespace=pluginPfx+"_"+d.idx,
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				wrapper=mCSB_container.parent(),
				editables="input,textarea,select,datalist,keygen,[contenteditable='true']",
				iframe=mCSB_container.find("iframe"),
				events=["blur."+namespace+" keydown."+namespace+" keyup."+namespace];
			if(iframe.length){
				iframe.each(function(){
					$(this).bind("load",function(){
						/* bind events on accessible iframes */
						if(_canAccessIFrame(this)){
							$(this.contentDocument || this.contentWindow.document).bind(events[0],function(e){
								_onKeyboard(e);
							});
						}
					});
				});
			}
			mCustomScrollBox.attr("tabindex","0").bind(events[0],function(e){
				_onKeyboard(e);
			});
			function _onKeyboard(e){
				switch(e.type){
					case "blur":
						if(d.tweenRunning && seq.dir){_seq("off",null);}
						break;
					case "keydown": case "keyup":
						var code=e.keyCode ? e.keyCode : e.which,action="on";
						if((o.axis!=="x" && (code===38 || code===40)) || (o.axis!=="y" && (code===37 || code===39))){
							/* up (38), down (40), left (37), right (39) arrows */
							if(((code===38 || code===40) && !d.overflowed[0]) || ((code===37 || code===39) && !d.overflowed[1])){return;}
							if(e.type==="keyup"){action="off";}
							if(!$(document.activeElement).is(editables)){
								e.preventDefault();
								e.stopImmediatePropagation();
								_seq(action,code);
							}
						}else if(code===33 || code===34){
							/* PgUp (33), PgDn (34) */
							if(d.overflowed[0] || d.overflowed[1]){
								e.preventDefault();
								e.stopImmediatePropagation();
							}
							if(e.type==="keyup"){
								_stop($this);
								var keyboardDir=code===34 ? -1 : 1;
								if(o.axis==="x" || (o.axis==="yx" && d.overflowed[1] && !d.overflowed[0])){
									var dir="x",to=Math.abs(mCSB_container[0].offsetLeft)-(keyboardDir*(wrapper.width()*0.9));
								}else{
									var dir="y",to=Math.abs(mCSB_container[0].offsetTop)-(keyboardDir*(wrapper.height()*0.9));
								}
								_scrollTo($this,to.toString(),{dir:dir,scrollEasing:"mcsEaseInOut"});
							}
						}else if(code===35 || code===36){
							/* End (35), Home (36) */
							if(!$(document.activeElement).is(editables)){
								if(d.overflowed[0] || d.overflowed[1]){
									e.preventDefault();
									e.stopImmediatePropagation();
								}
								if(e.type==="keyup"){
									if(o.axis==="x" || (o.axis==="yx" && d.overflowed[1] && !d.overflowed[0])){
										var dir="x",to=code===35 ? Math.abs(wrapper.width()-mCSB_container.outerWidth(false)) : 0;
									}else{
										var dir="y",to=code===35 ? Math.abs(wrapper.height()-mCSB_container.outerHeight(false)) : 0;
									}
									_scrollTo($this,to.toString(),{dir:dir,scrollEasing:"mcsEaseInOut"});
								}
							}
						}
						break;
				}
				function _seq(a,c){
					seq.type=o.keyboard.scrollType;
					seq.scrollAmount=o.keyboard.scrollAmount;
					if(seq.type==="stepped" && d.tweenRunning){return;}
					_sequentialScroll($this,a,c);
				}
			}
		},
		/* -------------------- */
		
		
		/* scrolls content sequentially (used when scrolling via buttons, keyboard arrows etc.) */
		_sequentialScroll=function(el,action,trigger,e,s){
			var d=el.data(pluginPfx),o=d.opt,seq=d.sequential,
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				once=seq.type==="stepped" ? true : false,
				steplessSpeed=o.scrollInertia < 26 ? 26 : o.scrollInertia, /* 26/1.5=17 */
				steppedSpeed=o.scrollInertia < 1 ? 17 : o.scrollInertia;
			switch(action){
				case "on":
					seq.dir=[
						(trigger===classes[16] || trigger===classes[15] || trigger===39 || trigger===37 ? "x" : "y"),
						(trigger===classes[13] || trigger===classes[15] || trigger===38 || trigger===37 ? -1 : 1)
					];
					_stop(el);
					if(_isNumeric(trigger) && seq.type==="stepped"){return;}
					_on(once);
					break;
				case "off":
					_off();
					if(once || (d.tweenRunning && seq.dir)){
						_on(true);
					}
					break;
			}
			
			/* starts sequence */
			function _on(once){
				if(o.snapAmount){seq.scrollAmount=!(o.snapAmount instanceof Array) ? o.snapAmount : seq.dir[0]==="x" ? o.snapAmount[1] : o.snapAmount[0];} /* scrolling snapping */
				var c=seq.type!=="stepped", /* continuous scrolling */
					t=s ? s : !once ? 1000/60 : c ? steplessSpeed/1.5 : steppedSpeed, /* timer */
					m=!once ? 2.5 : c ? 7.5 : 40, /* multiplier */
					contentPos=[Math.abs(mCSB_container[0].offsetTop),Math.abs(mCSB_container[0].offsetLeft)],
					ratio=[d.scrollRatio.y>10 ? 10 : d.scrollRatio.y,d.scrollRatio.x>10 ? 10 : d.scrollRatio.x],
					amount=seq.dir[0]==="x" ? contentPos[1]+(seq.dir[1]*(ratio[1]*m)) : contentPos[0]+(seq.dir[1]*(ratio[0]*m)),
					px=seq.dir[0]==="x" ? contentPos[1]+(seq.dir[1]*parseInt(seq.scrollAmount)) : contentPos[0]+(seq.dir[1]*parseInt(seq.scrollAmount)),
					to=seq.scrollAmount!=="auto" ? px : amount,
					easing=e ? e : !once ? "mcsLinear" : c ? "mcsLinearOut" : "mcsEaseInOut",
					onComplete=!once ? false : true;
				if(once && t<17){
					to=seq.dir[0]==="x" ? contentPos[1] : contentPos[0];
				}
				_scrollTo(el,to.toString(),{dir:seq.dir[0],scrollEasing:easing,dur:t,onComplete:onComplete});
				if(once){
					seq.dir=false;
					return;
				}
				clearTimeout(seq.step);
				seq.step=setTimeout(function(){
					_on();
				},t);
			}
			/* stops sequence */
			function _off(){
				clearTimeout(seq.step);
				_delete(seq,"step");
				_stop(el);
			}
		},
		/* -------------------- */
		
		
		/* returns a yx array from value */
		_arr=function(val){
			var o=$(this).data(pluginPfx).opt,vals=[];
			if(typeof val==="function"){val=val();} /* check if the value is a single anonymous function */
			/* check if value is object or array, its length and create an array with yx values */
			if(!(val instanceof Array)){ /* object value (e.g. {y:"100",x:"100"}, 100 etc.) */
				vals[0]=val.y ? val.y : val.x || o.axis==="x" ? null : val;
				vals[1]=val.x ? val.x : val.y || o.axis==="y" ? null : val;
			}else{ /* array value (e.g. [100,100]) */
				vals=val.length>1 ? [val[0],val[1]] : o.axis==="x" ? [null,val[0]] : [val[0],null];
			}
			/* check if array values are anonymous functions */
			if(typeof vals[0]==="function"){vals[0]=vals[0]();}
			if(typeof vals[1]==="function"){vals[1]=vals[1]();}
			return vals;
		},
		/* -------------------- */
		
		
		/* translates values (e.g. "top", 100, "100px", "#id") to actual scroll-to positions */
		_to=function(val,dir){
			if(val==null || typeof val=="undefined"){return;}
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				wrapper=mCSB_container.parent(),
				t=typeof val;
			if(!dir){dir=o.axis==="x" ? "x" : "y";}
			var contentLength=dir==="x" ? mCSB_container.outerWidth(false)-wrapper.width() : mCSB_container.outerHeight(false)-wrapper.height(),
				contentPos=dir==="x" ? mCSB_container[0].offsetLeft : mCSB_container[0].offsetTop,
				cssProp=dir==="x" ? "left" : "top";
			switch(t){
				case "function": /* this currently is not used. Consider removing it */
					return val();
					break;
				case "object": /* js/jquery object */
					var obj=val.jquery ? val : $(val);
					if(!obj.length){return;}
					return dir==="x" ? _childPos(obj)[1] : _childPos(obj)[0];
					break;
				case "string": case "number":
					if(_isNumeric(val)){ /* numeric value */
						return Math.abs(val);
					}else if(val.indexOf("%")!==-1){ /* percentage value */
						return Math.abs(contentLength*parseInt(val)/100);
					}else if(val.indexOf("-=")!==-1){ /* decrease value */
						return Math.abs(contentPos-parseInt(val.split("-=")[1]));
					}else if(val.indexOf("+=")!==-1){ /* inrease value */
						var p=(contentPos+parseInt(val.split("+=")[1]));
						return p>=0 ? 0 : Math.abs(p);
					}else if(val.indexOf("px")!==-1 && _isNumeric(val.split("px")[0])){ /* pixels string value (e.g. "100px") */
						return Math.abs(val.split("px")[0]);
					}else{
						if(val==="top" || val==="left"){ /* special strings */
							return 0;
						}else if(val==="bottom"){
							return Math.abs(wrapper.height()-mCSB_container.outerHeight(false));
						}else if(val==="right"){
							return Math.abs(wrapper.width()-mCSB_container.outerWidth(false));
						}else if(val==="first" || val==="last"){
							var obj=mCSB_container.find(":"+val);
							return dir==="x" ? _childPos(obj)[1] : _childPos(obj)[0];
						}else{
							if($(val).length){ /* jquery selector */
								return dir==="x" ? _childPos($(val))[1] : _childPos($(val))[0];
							}else{ /* other values (e.g. "100em") */
								mCSB_container.css(cssProp,val);
								methods.update.call(null,$this[0]);
								return;
							}
						}
					}
					break;
			}
		},
		/* -------------------- */
		
		
		/* calls the update method automatically */
		_autoUpdate=function(rem){
			var $this=$(this),d=$this.data(pluginPfx),o=d.opt,
				mCSB_container=$("#mCSB_"+d.idx+"_container");
			if(rem){
				/* 
				removes autoUpdate timer 
				usage: _autoUpdate.call(this,"remove");
				*/
				clearTimeout(mCSB_container[0].autoUpdate);
				_delete(mCSB_container[0],"autoUpdate");
				return;
			}
			upd();
			function upd(){
				clearTimeout(mCSB_container[0].autoUpdate);
				if($this.parents("html").length===0){
					/* check element in dom tree */
					$this=null;
					return;
				}
				mCSB_container[0].autoUpdate=setTimeout(function(){
					/* update on specific selector(s) length and size change */
					if(o.advanced.updateOnSelectorChange){
						d.poll.change.n=sizesSum();
						if(d.poll.change.n!==d.poll.change.o){
							d.poll.change.o=d.poll.change.n;
							doUpd(3);
							return;
						}
					}
					/* update on main element and scrollbar size changes */
					if(o.advanced.updateOnContentResize){
						d.poll.size.n=$this[0].scrollHeight+$this[0].scrollWidth+mCSB_container[0].offsetHeight+$this[0].offsetHeight+$this[0].offsetWidth;
						if(d.poll.size.n!==d.poll.size.o){
							d.poll.size.o=d.poll.size.n;
							doUpd(1);
							return;
						}
					}
					/* update on image load */
					if(o.advanced.updateOnImageLoad){
						if(!(o.advanced.updateOnImageLoad==="auto" && o.axis==="y")){ //by default, it doesn't run on vertical content
							d.poll.img.n=mCSB_container.find("img").length;
							if(d.poll.img.n!==d.poll.img.o){
								d.poll.img.o=d.poll.img.n;
								mCSB_container.find("img").each(function(){
									imgLoader(this);
								});
								return;
							}
						}
					}
					if(o.advanced.updateOnSelectorChange || o.advanced.updateOnContentResize || o.advanced.updateOnImageLoad){upd();}
				},o.advanced.autoUpdateTimeout);
			}
			/* a tiny image loader */
			function imgLoader(el){
				if($(el).hasClass(classes[2])){doUpd(); return;}
				var img=new Image();
				function createDelegate(contextObject,delegateMethod){
					return function(){return delegateMethod.apply(contextObject,arguments);}
				}
				function imgOnLoad(){
					this.onload=null;
					$(el).addClass(classes[2]);
					doUpd(2);
				}
				img.onload=createDelegate(img,imgOnLoad);
				img.src=el.src;
			}
			/* returns the total height and width sum of all elements matching the selector */
			function sizesSum(){
				if(o.advanced.updateOnSelectorChange===true){o.advanced.updateOnSelectorChange="*";}
				var total=0,sel=mCSB_container.find(o.advanced.updateOnSelectorChange);
				if(o.advanced.updateOnSelectorChange && sel.length>0){sel.each(function(){total+=this.offsetHeight+this.offsetWidth;});}
				return total;
			}
			/* calls the update method */
			function doUpd(cb){
				clearTimeout(mCSB_container[0].autoUpdate);
				methods.update.call(null,$this[0],cb);
			}
		},
		/* -------------------- */
		
		
		/* snaps scrolling to a multiple of a pixels number */
		_snapAmount=function(to,amount,offset){
			return (Math.round(to/amount)*amount-offset); 
		},
		/* -------------------- */
		
		
		/* stops content and scrollbar animations */
		_stop=function(el){
			var d=el.data(pluginPfx),
				sel=$("#mCSB_"+d.idx+"_container,#mCSB_"+d.idx+"_container_wrapper,#mCSB_"+d.idx+"_dragger_vertical,#mCSB_"+d.idx+"_dragger_horizontal");
			sel.each(function(){
				_stopTween.call(this);
			});
		},
		/* -------------------- */
		
		
		/* 
		ANIMATES CONTENT 
		This is where the actual scrolling happens
		*/
		_scrollTo=function(el,to,options){
			var d=el.data(pluginPfx),o=d.opt,
				defaults={
					trigger:"internal",
					dir:"y",
					scrollEasing:"mcsEaseOut",
					drag:false,
					dur:o.scrollInertia,
					overwrite:"all",
					callbacks:true,
					onStart:true,
					onUpdate:true,
					onComplete:true
				},
				options=$.extend(defaults,options),
				dur=[options.dur,(options.drag ? 0 : options.dur)],
				mCustomScrollBox=$("#mCSB_"+d.idx),
				mCSB_container=$("#mCSB_"+d.idx+"_container"),
				wrapper=mCSB_container.parent(),
				totalScrollOffsets=o.callbacks.onTotalScrollOffset ? _arr.call(el,o.callbacks.onTotalScrollOffset) : [0,0],
				totalScrollBackOffsets=o.callbacks.onTotalScrollBackOffset ? _arr.call(el,o.callbacks.onTotalScrollBackOffset) : [0,0];
			d.trigger=options.trigger;
			if(wrapper.scrollTop()!==0 || wrapper.scrollLeft()!==0){ /* always reset scrollTop/Left */
				$(".mCSB_"+d.idx+"_scrollbar").css("visibility","visible");
				wrapper.scrollTop(0).scrollLeft(0);
			}
			if(to==="_resetY" && !d.contentReset.y){
				/* callbacks: onOverflowYNone */
				if(_cb("onOverflowYNone")){o.callbacks.onOverflowYNone.call(el[0]);}
				d.contentReset.y=1;
			}
			if(to==="_resetX" && !d.contentReset.x){
				/* callbacks: onOverflowXNone */
				if(_cb("onOverflowXNone")){o.callbacks.onOverflowXNone.call(el[0]);}
				d.contentReset.x=1;
			}
			if(to==="_resetY" || to==="_resetX"){return;}
			if((d.contentReset.y || !el[0].mcs) && d.overflowed[0]){
				/* callbacks: onOverflowY */
				if(_cb("onOverflowY")){o.callbacks.onOverflowY.call(el[0]);}
				d.contentReset.x=null;
			}
			if((d.contentReset.x || !el[0].mcs) && d.overflowed[1]){
				/* callbacks: onOverflowX */
				if(_cb("onOverflowX")){o.callbacks.onOverflowX.call(el[0]);}
				d.contentReset.x=null;
			}
			if(o.snapAmount){ /* scrolling snapping */
				var snapAmount=!(o.snapAmount instanceof Array) ? o.snapAmount : options.dir==="x" ? o.snapAmount[1] : o.snapAmount[0];
				to=_snapAmount(to,snapAmount,o.snapOffset);
			}
			switch(options.dir){
				case "x":
					var mCSB_dragger=$("#mCSB_"+d.idx+"_dragger_horizontal"),
						property="left",
						contentPos=mCSB_container[0].offsetLeft,
						limit=[
							mCustomScrollBox.width()-mCSB_container.outerWidth(false),
							mCSB_dragger.parent().width()-mCSB_dragger.width()
						],
						scrollTo=[to,to===0 ? 0 : (to/d.scrollRatio.x)],
						tso=totalScrollOffsets[1],
						tsbo=totalScrollBackOffsets[1],
						totalScrollOffset=tso>0 ? tso/d.scrollRatio.x : 0,
						totalScrollBackOffset=tsbo>0 ? tsbo/d.scrollRatio.x : 0;
					break;
				case "y":
					var mCSB_dragger=$("#mCSB_"+d.idx+"_dragger_vertical"),
						property="top",
						contentPos=mCSB_container[0].offsetTop,
						limit=[
							mCustomScrollBox.height()-mCSB_container.outerHeight(false),
							mCSB_dragger.parent().height()-mCSB_dragger.height()
						],
						scrollTo=[to,to===0 ? 0 : (to/d.scrollRatio.y)],
						tso=totalScrollOffsets[0],
						tsbo=totalScrollBackOffsets[0],
						totalScrollOffset=tso>0 ? tso/d.scrollRatio.y : 0,
						totalScrollBackOffset=tsbo>0 ? tsbo/d.scrollRatio.y : 0;
					break;
			}
			if(scrollTo[1]<0 || (scrollTo[0]===0 && scrollTo[1]===0)){
				scrollTo=[0,0];
			}else if(scrollTo[1]>=limit[1]){
				scrollTo=[limit[0],limit[1]];
			}else{
				scrollTo[0]=-scrollTo[0];
			}
			if(!el[0].mcs){
				_mcs();  /* init mcs object (once) to make it available before callbacks */
				if(_cb("onInit")){o.callbacks.onInit.call(el[0]);} /* callbacks: onInit */
			}
			clearTimeout(mCSB_container[0].onCompleteTimeout);
			_tweenTo(mCSB_dragger[0],property,Math.round(scrollTo[1]),dur[1],options.scrollEasing);
			if(!d.tweenRunning && ((contentPos===0 && scrollTo[0]>=0) || (contentPos===limit[0] && scrollTo[0]<=limit[0]))){return;}
			_tweenTo(mCSB_container[0],property,Math.round(scrollTo[0]),dur[0],options.scrollEasing,options.overwrite,{
				onStart:function(){
					if(options.callbacks && options.onStart && !d.tweenRunning){
						/* callbacks: onScrollStart */
						if(_cb("onScrollStart")){_mcs(); o.callbacks.onScrollStart.call(el[0]);}
						d.tweenRunning=true;
						_onDragClasses(mCSB_dragger);
						d.cbOffsets=_cbOffsets();
					}
				},onUpdate:function(){
					if(options.callbacks && options.onUpdate){
						/* callbacks: whileScrolling */
						if(_cb("whileScrolling")){_mcs(); o.callbacks.whileScrolling.call(el[0]);}
					}
				},onComplete:function(){
					if(options.callbacks && options.onComplete){
						if(o.axis==="yx"){clearTimeout(mCSB_container[0].onCompleteTimeout);}
						var t=mCSB_container[0].idleTimer || 0;
						mCSB_container[0].onCompleteTimeout=setTimeout(function(){
							/* callbacks: onScroll, onTotalScroll, onTotalScrollBack */
							if(_cb("onScroll")){_mcs(); o.callbacks.onScroll.call(el[0]);}
							if(_cb("onTotalScroll") && scrollTo[1]>=limit[1]-totalScrollOffset && d.cbOffsets[0]){_mcs(); o.callbacks.onTotalScroll.call(el[0]);}
							if(_cb("onTotalScrollBack") && scrollTo[1]<=totalScrollBackOffset && d.cbOffsets[1]){_mcs(); o.callbacks.onTotalScrollBack.call(el[0]);}
							d.tweenRunning=false;
							mCSB_container[0].idleTimer=0;
							_onDragClasses(mCSB_dragger,"hide");
						},t);
					}
				}
			});
			/* checks if callback function exists */
			function _cb(cb){
				return d && o.callbacks[cb] && typeof o.callbacks[cb]==="function";
			}
			/* checks whether callback offsets always trigger */
			function _cbOffsets(){
				return [o.callbacks.alwaysTriggerOffsets || contentPos>=limit[0]+tso,o.callbacks.alwaysTriggerOffsets || contentPos<=-tsbo];
			}
			/* 
			populates object with useful values for the user 
			values: 
				content: this.mcs.content
				content top position: this.mcs.top 
				content left position: this.mcs.left 
				dragger top position: this.mcs.draggerTop 
				dragger left position: this.mcs.draggerLeft 
				scrolling y percentage: this.mcs.topPct 
				scrolling x percentage: this.mcs.leftPct 
				scrolling direction: this.mcs.direction
			*/
			function _mcs(){
				var cp=[mCSB_container[0].offsetTop,mCSB_container[0].offsetLeft], /* content position */
					dp=[mCSB_dragger[0].offsetTop,mCSB_dragger[0].offsetLeft], /* dragger position */
					cl=[mCSB_container.outerHeight(false),mCSB_container.outerWidth(false)], /* content length */
					pl=[mCustomScrollBox.height(),mCustomScrollBox.width()]; /* content parent length */
				el[0].mcs={
					content:mCSB_container, /* original content wrapper as jquery object */
					top:cp[0],left:cp[1],draggerTop:dp[0],draggerLeft:dp[1],
					topPct:Math.round((100*Math.abs(cp[0]))/(Math.abs(cl[0])-pl[0])),leftPct:Math.round((100*Math.abs(cp[1]))/(Math.abs(cl[1])-pl[1])),
					direction:options.dir
				};
				/* 
				this refers to the original element containing the scrollbar(s)
				usage: this.mcs.top, this.mcs.leftPct etc. 
				*/
			}
		},
		/* -------------------- */
		
		
		/* 
		CUSTOM JAVASCRIPT ANIMATION TWEEN 
		Lighter and faster than jquery animate() and css transitions 
		Animates top/left properties and includes easings 
		*/
		_tweenTo=function(el,prop,to,duration,easing,overwrite,callbacks){
			if(!el._mTween){el._mTween={top:{},left:{}};}
			var callbacks=callbacks || {},
				onStart=callbacks.onStart || function(){},onUpdate=callbacks.onUpdate || function(){},onComplete=callbacks.onComplete || function(){},
				startTime=_getTime(),_delay,progress=0,from=el.offsetTop,elStyle=el.style,_request,tobj=el._mTween[prop];
			if(prop==="left"){from=el.offsetLeft;}
			var diff=to-from;
			tobj.stop=0;
			if(overwrite!=="none"){_cancelTween();}
			_startTween();
			function _step(){
				if(tobj.stop){return;}
				if(!progress){onStart.call();}
				progress=_getTime()-startTime;
				_tween();
				if(progress>=tobj.time){
					tobj.time=(progress>tobj.time) ? progress+_delay-(progress-tobj.time) : progress+_delay-1;
					if(tobj.time<progress+1){tobj.time=progress+1;}
				}
				if(tobj.time<duration){tobj.id=_request(_step);}else{onComplete.call();}
			}
			function _tween(){
				if(duration>0){
					tobj.currVal=_ease(tobj.time,from,diff,duration,easing);
					elStyle[prop]=Math.round(tobj.currVal)+"px";
				}else{
					elStyle[prop]=to+"px";
				}
				onUpdate.call();
			}
			function _startTween(){
				_delay=1000/60;
				tobj.time=progress+_delay;
				_request=(!window.requestAnimationFrame) ? function(f){_tween(); return setTimeout(f,0.01);} : window.requestAnimationFrame;
				tobj.id=_request(_step);
			}
			function _cancelTween(){
				if(tobj.id==null){return;}
				if(!window.requestAnimationFrame){clearTimeout(tobj.id);
				}else{window.cancelAnimationFrame(tobj.id);}
				tobj.id=null;
			}
			function _ease(t,b,c,d,type){
				switch(type){
					case "linear": case "mcsLinear":
						return c*t/d + b;
						break;
					case "mcsLinearOut":
						t/=d; t--; return c * Math.sqrt(1 - t*t) + b;
						break;
					case "easeInOutSmooth":
						t/=d/2;
						if(t<1) return c/2*t*t + b;
						t--;
						return -c/2 * (t*(t-2) - 1) + b;
						break;
					case "easeInOutStrong":
						t/=d/2;
						if(t<1) return c/2 * Math.pow( 2, 10 * (t - 1) ) + b;
						t--;
						return c/2 * ( -Math.pow( 2, -10 * t) + 2 ) + b;
						break;
					case "easeInOut": case "mcsEaseInOut":
						t/=d/2;
						if(t<1) return c/2*t*t*t + b;
						t-=2;
						return c/2*(t*t*t + 2) + b;
						break;
					case "easeOutSmooth":
						t/=d; t--;
						return -c * (t*t*t*t - 1) + b;
						break;
					case "easeOutStrong":
						return c * ( -Math.pow( 2, -10 * t/d ) + 1 ) + b;
						break;
					case "easeOut": case "mcsEaseOut": default:
						var ts=(t/=d)*t,tc=ts*t;
						return b+c*(0.499999999999997*tc*ts + -2.5*ts*ts + 5.5*tc + -6.5*ts + 4*t);
				}
			}
		},
		/* -------------------- */
		
		
		/* returns current time */
		_getTime=function(){
			if(window.performance && window.performance.now){
				return window.performance.now();
			}else{
				if(window.performance && window.performance.webkitNow){
					return window.performance.webkitNow();
				}else{
					if(Date.now){return Date.now();}else{return new Date().getTime();}
				}
			}
		},
		/* -------------------- */
		
		
		/* stops a tween */
		_stopTween=function(){
			var el=this;
			if(!el._mTween){el._mTween={top:{},left:{}};}
			var props=["top","left"];
			for(var i=0; i<props.length; i++){
				var prop=props[i];
				if(el._mTween[prop].id){
					if(!window.requestAnimationFrame){clearTimeout(el._mTween[prop].id);
					}else{window.cancelAnimationFrame(el._mTween[prop].id);}
					el._mTween[prop].id=null;
					el._mTween[prop].stop=1;
				}
			}
		},
		/* -------------------- */
		
		
		/* deletes a property (avoiding the exception thrown by IE) */
		_delete=function(c,m){
			try{delete c[m];}catch(e){c[m]=null;}
		},
		/* -------------------- */
		
		
		/* detects left mouse button */
		_mouseBtnLeft=function(e){
			return !(e.which && e.which!==1);
		},
		/* -------------------- */
		
		
		/* detects if pointer type event is touch */
		_pointerTouch=function(e){
			var t=e.originalEvent.pointerType;
			return !(t && t!=="touch" && t!==2);
		},
		/* -------------------- */
		
		
		/* checks if value is numeric */
		_isNumeric=function(val){
			return !isNaN(parseFloat(val)) && isFinite(val);
		},
		/* -------------------- */
		
		
		/* returns element position according to content */
		_childPos=function(el){
			var p=el.parents(".mCSB_container");
			return [el.offset().top-p.offset().top,el.offset().left-p.offset().left];
		},
		/* -------------------- */
		
		
		/* checks if browser tab is hidden/inactive via Page Visibility API */
		_isTabHidden=function(){
			var prop=_getHiddenProp();
			if(!prop) return false;
			return document[prop];
			function _getHiddenProp(){
				var pfx=["webkit","moz","ms","o"];
				if("hidden" in document) return "hidden"; //natively supported
				for(var i=0; i<pfx.length; i++){ //prefixed
				    if((pfx[i]+"Hidden") in document) 
				        return pfx[i]+"Hidden";
				}
				return null; //not supported
			}
		};
		/* -------------------- */
		
	
	
	
	
	/* 
	----------------------------------------
	PLUGIN SETUP 
	----------------------------------------
	*/
	
	/* plugin constructor functions */
	$.fn[pluginNS]=function(method){ /* usage: $(selector).mCustomScrollbar(); */
		if(methods[method]){
			return methods[method].apply(this,Array.prototype.slice.call(arguments,1));
		}else if(typeof method==="object" || !method){
			return methods.init.apply(this,arguments);
		}else{
			$.error("Method "+method+" does not exist");
		}
	};
	$[pluginNS]=function(method){ /* usage: $.mCustomScrollbar(); */
		if(methods[method]){
			return methods[method].apply(this,Array.prototype.slice.call(arguments,1));
		}else if(typeof method==="object" || !method){
			return methods.init.apply(this,arguments);
		}else{
			$.error("Method "+method+" does not exist");
		}
	};
	
	/* 
	allow setting plugin default options. 
	usage: $.mCustomScrollbar.defaults.scrollInertia=500; 
	to apply any changed default options on default selectors (below), use inside document ready fn 
	e.g.: $(document).ready(function(){ $.mCustomScrollbar.defaults.scrollInertia=500; });
	*/
	$[pluginNS].defaults=defaults;
	
	/* 
	add window object (window.mCustomScrollbar) 
	usage: if(window.mCustomScrollbar){console.log("custom scrollbar plugin loaded");}
	*/
	window[pluginNS]=true;
	
	$(window).bind("load",function(){
		
		$(defaultSelector)[pluginNS](); /* add scrollbars automatically on default selector */
		
		/* extend jQuery expressions */
		$.extend($.expr[":"],{
			/* checks if element is within scrollable viewport */
			mcsInView:$.expr[":"].mcsInView || function(el){
				var $el=$(el),content=$el.parents(".mCSB_container"),wrapper,cPos;
				if(!content.length){return;}
				wrapper=content.parent();
				cPos=[content[0].offsetTop,content[0].offsetLeft];
				return 	cPos[0]+_childPos($el)[0]>=0 && cPos[0]+_childPos($el)[0]<wrapper.height()-$el.outerHeight(false) && 
						cPos[1]+_childPos($el)[1]>=0 && cPos[1]+_childPos($el)[1]<wrapper.width()-$el.outerWidth(false);
			},
			/* checks if element or part of element is in view of scrollable viewport */
			mcsInSight:$.expr[":"].mcsInSight || function(el,i,m){
				var $el=$(el),elD,content=$el.parents(".mCSB_container"),wrapperView,pos,wrapperViewPct,
					pctVals=m[3]==="exact" ? [[1,0],[1,0]] : [[0.9,0.1],[0.6,0.4]];
				if(!content.length){return;}
				elD=[$el.outerHeight(false),$el.outerWidth(false)];
				pos=[content[0].offsetTop+_childPos($el)[0],content[0].offsetLeft+_childPos($el)[1]];
				wrapperView=[content.parent()[0].offsetHeight,content.parent()[0].offsetWidth];
				wrapperViewPct=[elD[0]<wrapperView[0] ? pctVals[0] : pctVals[1],elD[1]<wrapperView[1] ? pctVals[0] : pctVals[1]];
				return 	pos[0]-(wrapperView[0]*wrapperViewPct[0][0])<0 && pos[0]+elD[0]-(wrapperView[0]*wrapperViewPct[0][1])>=0 && 
						pos[1]-(wrapperView[1]*wrapperViewPct[1][0])<0 && pos[1]+elD[1]-(wrapperView[1]*wrapperViewPct[1][1])>=0;
			},
			/* checks if element is overflowed having visible scrollbar(s) */
			mcsOverflow:$.expr[":"].mcsOverflow || function(el){
				var d=$(el).data(pluginPfx);
				if(!d){return;}
				return d.overflowed[0] || d.overflowed[1];
			}
		});
	
	});

}))}));
function dragAndDropFIB(t,e,i){const n=$(t).clone();$('<span class="deleteBlankDragAndDropIcon" ><i class="icon-Delete"></i></span>').appendTo(n),$(n).appendTo(e),t.length>0&&($(e).addClass("dropped"),$(t).addClass("added")),$(e).find(".preview-drop").addClass("fibCorrectAnsDivHide"),$(".preview-sort").find(".added").removeClass("draggable-div"),$(".preview-sort").find(".added").css("opacity","0.5"),$(".sort-with-row").find(".inputbox-selected").css({width:"100%",margin:"0",float:"left",cursor:"pointer"}),$(".sort-with-row").find(".draggable-div").css("position","relative"),$(".sort-with-row").find(".draggable-div").removeClass("sortInput");if((s=$(t).parent().height())>=500){var s=s+50;$(e).css("height",s)}$(e).css({height:s,width:"100%","line-height":"unset"})}function FIBShowFeedback(t,e,i,n,s){fibAlert.show(t,e,i,n,s)}$(function(){var t;if($('.fib[data-fib-type="with-option"] .customKeybord-cantsiner').css("display","none"),$('.fib[data-fib-type="drag-and-drop"] .customKeybord-cantsiner').css("display","none"),$(".fib.drag-and-drop .preview-drop").addClass("inputbox-selected js-input sort-text-selected sort-select"),$(".fib.drag-and-drop .preview-drop").removeClass("draggable-div"),$('.fib[data-fib-type="without-option"] .inputbox-selected').attr("contenteditable",!0),$("#mathLiveFibStyles").length||$("head").append('\n            <style id="mathLiveFibStyles">\n                .fib .auth-mathfield-holder {\n                    display: inline-block;\n                    vertical-align: middle;\n                    min-width: 100px;\n                    min-height: 30px;\n                }\n                \n                .fib .mathFieldEq {\n                    border: 1px solid #ddd;\n                    border-radius: 4px;\n                    padding: 8px;\n                    min-height: 30px;\n                    font-size: 14px;\n                    background: white;\n                }\n                \n                .fib .mathFieldEq:focus {\n                    border-color: #007bff;\n                    outline: none;\n                    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n                }\n                \n                .fib .inputbox-selected.math-enabled {\n                    padding: 4px;\n                    min-height: 40px;\n                    display: inline-flex;\n                    align-items: center;\n                }\n                .fibSentence .auth-mathfield-holder, .distractor-text-data, .distractor-text-data .auth-mathfield-holder{\n                display: inline-flex;\n                }\n            </style>\n        '),!document.getElementById("mathlive-fib-styles")){const t=document.createElement("style");t.id="mathlive-fib-styles",t.textContent="\n            .auth-mathfield-holder {\n                display: inline-block;\n                min-width: 60px;\n                min-height: 30px;\n            }\n            \n            .mathFieldEq {\n                border: 1px solid #ccc;\n                padding: 4px;\n                min-height: 24px;\n                background: white;\n                border-radius: 3px;\n            }\n            \n            .mathFieldEq:focus {\n                outline: 2px solid #007bff;\n                outline-offset: 1px;\n            }\n            \n            /* Ensure keyboard icon is visible */\n            .ML__keyboard-toggle {\n                display: inline-block !important;\n                opacity: 1 !important;\n            }\n        ",document.head.appendChild(t)}if($(".fib.drag-and-drop .inputbox-selected").css("border-bottom","none"),$(".fib.drag-and-drop .inputbox-selected").css({border:"1px solid",overflow:"hidden","word-wrap":"break-word"}),$(".fib.drag-and-drop .inputbox-selected").attr("readonly",!0),$(".fib.drag-and-drop .sorting-questions").css({width:"66.67%",display:"inline-block"}),$(".fib.drag-and-drop .preview-sort").css({display:"inline-block",position:"relative"}),$(".fib.drag-and-drop .sort-text-selected").css({padding:"","text-align":"center"}),$(".fib.drag-and-drop .sort-img-selected").css("padding","0px 10px"),$(".fib.drag-and-drop .preview-drop").css({overflow:"visible"}),$(".fib.drag-and-drop .sort-in").hide(),$(".fib.drag-and-drop .preview-drop .inputbox-selected").css({"min-height":"30px","font-size":"16px"}),$(".fib.drag-and-drop .inputbox-selected .img-sort-upload").css({width:"",height:""}),$(".fib.drag-and-drop .inputbox-selected .img-sort-img").css({"max-width":"234px","max-height":"30px"}),$(".fib.drag-and-drop .form-control-wrap").css({width:"auto"}),$(".distractor-parent .distractor-close-icon").addClass("hide"),$(".deleteBlank").addClass("hide"),$(".form-row .fib-delete-sentence").addClass("hide"),$(".fib.drag-and-drop .js-form-row").addClass("fib-blank-spaces"),$(".open__custom__keyBoard").removeClass("hide"),$(".keyboard-parent, .close__custom__keyBoard").addClass("hide"),$(".dropdown-menu, .icon-Up").css({display:"none"}),$(".icon-Down").css({display:"block"}),$(".fib .sentence-text").css("width","100%"),$(".ansTextHint").addClass("hide"),$(".fib").on("keypress","div.inputbox-selected",function(t){13===(t.keyCode||t.which)&&(t.preventDefault(),t.stopPropagation())}),($(".keyboard_btn").hasClass("drag_drop_enable")||$(".keyboard_btn").hasClass("dropdown_enable"))&&$(".drag_drop_enable, .dropdown_enable").addClass("hide"),$('.fib[data-fib-type="with-option"]').find(".dropdown.fib-with-option").each(function(){$(this).find("ul.dropdown-menu").hide(),$(this).find(".dropdownbtn .icon-Down.dropdown-arrow").show(),$(this).find(".dropdownbtn .icon-Up.dropdown-arrow").hide()}),$(".fib select").length>0&&($("select.inputbox-selected.js-input option[value]").each(function(){var t=$(this).attr("value").replace(/>/g,"&gt;").replace(/</g,"&lt;");$(this).attr("value",t)}),$(".js-form-row.fib-without-option div.inputbox-selected[data-correct-answer]").each(function(){const t=$(this).attr("data-correct-answer");if(t&&(t.includes("<div")||t.includes("<math-field"))){const e=extractLatexFromHTML(t);e?(console.log("Extracted LaTeX from data-correct-answer:",e),$(this).attr("data-correct-answer",e)):(console.warn("Could not extract LaTeX from HTML in data-correct-answer:",t),$(this).attr("data-correct-answer",""))}else{var e=t.replace(/>/g,"&gt;").replace(/</g,"&lt;");$(this).attr("data-correct-answer",e)}})),$(".fib .submit-btn").off("click").click(function(t){t.preventDefault();var e=$(this).attr("data-submitattr");t=t;void 0===e&&(e=$(this).attr("submitattr")),function(t){click=!0,t.preventDefault(),"without-option"==(s=$(t.target).parents("form")).parents(".fib").attr("data-fib-type")&&(s.find("div.inputbox-selected.FIB_style_inputbox").attr("disabled","disabled"),s.find("div.inputbox-selected.FIB_style_inputbox").attr("contenteditable",!1));var e=s.find("[data-correct-text]").attr("data-correct-text"),i=s.find("[data-incorrect-text]").attr("data-incorrect-text");if(window.localeJson)window.localeJson.incorrect_message;else;!window.localeJson||void 0===e&&void 0===i||(window.localeJson.correct=e,window.localeJson.incorrect_last_try=i);window.localeJson&&void 0===e&&(e=window.localeJson.correct);window.localeJson&&void 0===i&&(i=window.localeJson.incorrect_last_try);s.find(".Case_Sensitive");if(s.find(".alert.fib-pop-up").css("display","none"),$(t.target).parents(".drag-and-drop").length>0){var n=$(t.target),s=n.parents("form");s.find(".reset-btn").attr("click",!0);var r=n.attr("data-attempts"),a=!1,o=!1,l=Number(n.attr("data-no-of-attempts"));r?r++:r=1,n.data("no-of-attempts",l),s.find(".tryagn-btn").removeClass("disabled"),a=s.find(".tryagn-btn:visible").length;var c=!1,p=s.find(".sort-with-row").length,f=s.find(".dropped").length;n.attr("data-attempts",r),p===f&&(c=!0),s.find(".tryagn-btn").hasClass("nghidedata")||r===l||a?(c&&(s.find(".sort-select").each(function(t){if(u=s.find(this).attr("data-id"),w=s.find(this).next().attr("data-id"),u===w){s.find(this).next().addClass("sort-correct");var e=new DOMParser,i=e.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),n=$(i).contents()[0].childNodes[1].childNodes[0];s.find(this).next().parent().append(n)}else{s.find(this).next().addClass("sort-incorrect");var e=new DOMParser,i=e.parseFromString('<span class="incorrect-tick icon-close-filled" style="position:absolute;"></span>',"text/html"),n=$(i).contents()[0].childNodes[1].childNodes[0];s.find(this).next().parent().append(n)}}),s.parents(".component-holder.drag-and-drop").find(".correct-tick.sort-correct,.incorrect-tick.sort-incorrect").removeClass("sort-correct sort-incorrect"),s.find(".submit-btn").addClass("disabled"),s.find(".reset-btn").addClass("disabled")),s.find(".submit-btn").css("display","none"),(s.find(".tryagn-btn").hasClass("nghidedata")||r===l)&&s.find(".submit-btn").css("display",""),0!==s.find(".sort-incorrect").length&&n.data("no-of-attempts")):(c&&(s.find(".sort-select").each(function(t){if(u=s.find(this).attr("data-id"),w=s.find(this).next().attr("data-id"),u===w){s.find(this).next().addClass("sort-correct");var e=new DOMParser,i=e.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),n=$(i).contents()[0].childNodes[1].childNodes[0];s.find(this).next().parent().append(n)}else s.find(this).next().remove(),s.find(this).parents(".dropped").css("height","unset"),s.find(this).parents(".dropped").removeClass("dropped"),$(".added").each(function(t){dragId=$(this).attr("data-id"),u===dragId&&(s.find(this).css("opacity","1"),$(this).draggable("enable"),s.find(this).addClass("draggable-div ui-draggable"),s.find(this).removeClass("added"))})}),s.find(".submit-btn").addClass("disabled")),s.find(".submit-btn").css("display","none"),s.find(".reset-btn").addClass("disabled"))}else{var n=$(t.target),s=n.parents("form"),r=n.attr("data-attempts"),a=!1,o=!1,l=Number(n.attr("data-no-of-attempts"));r?r++:r=1,n.data("no-of-attempts",l),a=s.find(".tryagn-btn:visible").length,s.find(".correct,.incorrect").removeClass("correct incorrect"),s.find(".correct-tick,.incorrect-tick").remove(),s.find(".alert.fib-pop-up").css("display","none");var h,b,u,m,w,g,v=s.find(".form-row"),C=!1;for(s.find(".fib-body").hasClass("with-option-body")?(C=!0,g="ul,.previewList"):g="div.inputbox-selected",b=0;b<v.length;b++)for(h=$(v[b]).find(".js-form-row"),m=0;m<h.length;m++){if(C)u=$(h[m]).find(g).attr("data-correctoption-index"),w=$(h[m]).find(g).attr("data-selected-index");else if(s.find(".without-option-body").hasClass("Case_Sensitive"))u=(u=decodeURIComponent(escape(window.atob(String($(h[m]).find(g).data("correct-answer")))))).trim(),w=$(h[m]).find(g).html();else{correctAnswer1=decodeURIComponent(escape(window.atob(String($(h[m]).find(g).data("correct-answer")))));var x=document.createElement("div"),y=new DOMParser,k=y.parseFromString(correctAnswer1.toLowerCase(),"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];$(x).html(A),u=(u=x.innerText).trim(),currenrAnswer1=$(h[m]).find(g).html(),w=currenrAnswer1.toLowerCase()}if($(h[m]).find(".carat").addClass("hide-carat"),u)var D=u.toLowerCase().split("|").map(t=>t.trim());if(D&&w&&""!==w&&D.includes(w.toLowerCase().trim()))if(C){$(h[m]).find(".dropdownbtn").addClass("correct"),$(h[m]).addClass("disabled"),$(h[m]).find(".dropdownbtn .dropdown-arrow").css("display","none");var y=new DOMParser,k=y.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];$(h[m]).append(A).addClass("correct-attempt")}else{$(h[m]).find(g).addClass("correct").prop("disabled",!0);var y=new DOMParser,k=y.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];$(h[m]).find(".form-control-wrap").append(A).addClass("correct-attempt")}else if(C){if(u!==w){$(h[m]).find(".dropdownbtn").addClass("incorrect"),$(h[m]).addClass("disabled"),$(h[m]).find(".dropdownbtn .dropdown-arrow").css("display","none");var y=new DOMParser,k=y.parseFromString('<span class="incorrect-tick icon-close-filled" style="position:absolute;"></span>',"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];$(h[m]).append(A).addClass("incorrect-attempt")}}else{var S=!0;if(w.split("/;").length>1){var _=u.split("/;"),T=_[0].trim();_.forEach(function(t,e){e>0&&(_[e]=t.trim(),T=T+"/;"+_[e])});var I=w.split("/;"),F=I[0].trim();if(I.forEach(function(t,e){e>0&&(F=F+"/;"+t.trim())}),T===F&&!0===S){S=!1,$(h[m]).find(g).addClass("correct").prop("disabled",!0),$(h[m]).find("select").easyDropDown("disable");var y=new DOMParser,k=y.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];$(h[m]).find(".form-control-wrap").append(A).addClass("correct-attempt")}}var _=u.split("/;");if(_.forEach(function(t,e){if(t.trim()===w.trim()&&!0===S&&!u.includes("|")){S=!1,$(h[m]).find(g).addClass("correct").prop("disabled",!0),$(h[m]).find("select").easyDropDown("disable");var i=new DOMParser,n=i.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),s=$(n).contents()[0].childNodes[1].childNodes[0];$(h[m]).find(".form-control-wrap").append(s).addClass("correct-attempt")}}),u!==w&&!0===S||u.includes("|")){$(h[m]).find(g).addClass("incorrect");var y=new DOMParser,k=y.parseFromString('<span class="incorrect-tick icon-close-filled" style="position:absolute;"></span>',"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];$(h[m]).find(".form-control-wrap").append(A).addClass("incorrect-attempt")}S=!0}}if(0===s.find(".incorrect").length&&(r=l,o=!0,s.find(".reset").addClass("disabled"),s.find(".showme-btn").addClass("disabled")),r===l||a){if(s.find(g).prop("disabled",!0),s.find("select").easyDropDown("disable"),s.find(".submit-btn").addClass("disabled"),0!==s.find(".incorrect").length&&n.data("no-of-attempts")&&!a&&1!==l&&!o){s.find(".alert.fib-pop-up").css("display","block");var y=new DOMParser,N='<div><span class="icon-close-filled"></span>&emsp;'+i+"</div>",k=y.parseFromString(N,"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];s.find(".alert.fib-pop-up").html(A)}}else{s.parents(".customClass").length>1&&(s.find(g).prop("disabled",!0),s.find("select").easyDropDown("disable"),s.find(".submit-btn").addClass("disabled")),s.find(".alert.fib-pop-up").css("display","block");var y=new DOMParser,N='<div><span class="icon-close-filled"></span>&emsp;'+i+"</div>",k=y.parseFromString(N,"text/html"),A=$(k).contents()[0].childNodes[1].childNodes[0];s.find(".alert.fib-pop-up").html(A)}s.find(".tryagn-btn").removeClass("disabled"),s.find(".submit-btn").css("display","none"),s.find(".reset").removeClass("disabled"),n.attr("data-attempts",r).addClass("disabled"),s.find(".reset").addClass("disabled"),s.find(".alert.fib-pop-up").css("display","block")}s.parents(".component-holder.drag-and-drop").find(".distractor-parent").find(".sort-incorrect, .incorrect-attempt, .incorrect-tick").removeClass("sort-incorrect incorrect-attempt incorrect-tick").css("display","none");var q=s.find(".fib-alert").attr("data-generic-correct-feedback"),H=s.find(".fib-alert").attr("data-generic-incorrect-feedback"),M=s.find(".fib-alert").hasClass("genericFeedbackEnable");s.parents(".component-holder").addClass("incorrect-question"),s.find(".preview-sort .inputbox-selected").css("pointerEvents","none"),s.find(".tryagn-btn").hasClass("nghidedata")&&s.find(".sort-incorrect, .incorrect-attempt").length>0?(M?fibAlert.show("Incorrect!","",s,null,H):fibAlert.show("Incorrect!","",s,"incorrect_last_try","Oops! You have selected the wrong answer."),s.find(".submit-btn").css("display","")):r==l&&s.find(".sort-incorrect, .incorrect-attempt").length>0?(M?fibAlert.show("Incorrect!","",s,null,H):fibAlert.show("Incorrect!","",s,"incorrect_last_try","Oops! You have selected the wrong answer."),s.find(".tryagn-btn").addClass("disabled"),s.find(".submit-btn").css("display","")):s.find(".sort-correct, .correct-attempt").length!==s.find(".js-form-row").length?fibAlert.show("Incorrect!","",s,"incorrect_message","Please try again."):s.find(".sort-correct, .correct-attempt").length===s.find(".js-form-row").length&&(s.parents(".component-holder").removeClass("incorrect-question"),s.parents(".component-holder").addClass("correct-question"),M?fibAlert.show("Correct!","",s,null,q):fibAlert.show("Correct!","",s,"correct","Congratulations! You have selected the right answer."),s.find(".showme-btn").addClass("disabled"),s.find(".tryagn-btn").addClass("disabled"),s.find(".submit-btn").css("display",""));"undefined"!=typeof apiHandle&&d(t)}(t)}),$(".fib.drag-and-drop .sentence-text").each(function(t){$(this).find(".form-control-wrap").each(function(t){var e=$(this).html(),i=(new DOMParser).parseFromString(e,"text/html"),n=$(i).contents()[0].childNodes[1].childNodes[0];if($(this).parents("form").find(".preview-sort").append(n),$(n).find(".sort-text-selected").length){let t=$(n).find(".sort-text-selected").html();$(n).find(".sort-text-selected").html(t)}$(".fib .preview-sort").find(".inputbox-selected").css({width:"auto",height:"auto","min-width":"106px",margin:"0%",float:"left",cursor:"pointer",background:"white !important",display:"flex","align-items":"center"}),$(".fib .preview-sort").find(".inputbox-selected").addClass("draggable-div")})}),$(".fib.drag-and-drop .preview-sort.shuffle-choices").each(function(){for(var t=$(this).find(".preview-drop"),e=0;e<t.length;e++)$(t[e]).remove();if(0==(e=t.length))return!1;for(;--e;){var i=Math.floor(Math.random()*(e+1)),n=t[e],s=t[i];t[e]=s,t[i]=n}for(e=0;e<t.length;e++)$(t[e]).appendTo(this)}),$(".fib").find(".fib-body").hasClass("with-option-body")){var e,i,n,s=$(".fib").find(".shuffle-choices .js-form-row.fib-with-option");for(e=0;e<s.length;e++)0!==$(".fib").find(".fib-body.shuffle-choices").length&&(i=$(s[e]).find(".dropdown-menu.previewList").data("correctoption-index"),$($(s[e]).find(".dropdown-menu.previewList li[data-id="+i+"]")).attr("correct",!0),n=shuffle($(s[e]).find(".dropdown-menu.previewList li")),$(s[e]).find(".dropdown-menu.previewList").html(n),$(s[e]).find(".dropdown-menu.previewList").attr("data-correctoption-index",$(s[e]).find(".dropdown-menu.previewList").find("li[correct]").attr("data-id")),$(s[e]).find(".dropdown-menu.previewList li").removeAttr("correct"))}$(".fib.drag-and-drop .preview-sort .inputbox-selected").addClass("draggable-div ui-draggable sortInput"),$(".fib.drag-and-drop .preview-sort .preview-drop").addClass("draggable-div");$(document).ready(function(){function t(t){$(t).find(".auth-mathfield-holder").each(function(){$(this).css({width:"max-content",height:"max-content",display:"inline-block","white-space":"nowrap"}),$(this).attr("contenteditable","false");let t=$(this).attr("data-equation-latex"),e=$(this).find("math-field")[0];$(this).find("math-field").each(function(t,e){$(this).attr("contenteditable","false")}),e&&"function"==typeof e.setValue?(e.setValue(t),window.mathVirtualKeyboard.targetOrigin="*",e.virtualKeyboardTargetOrigin="*"):console.log("math-field not upgraded:",e)})}window.self!==window.top&&$(".fib").each(function(){var t=$(this).closest("article");if(0!==t.length){var e=t.height(),i=e/2;t.find(".dropdown.js-form-row").each(function(t,e){var n=$(e).position().top;n<i?$(this).addClass("inUpperHalf").removeClass("inBottomHalf"):$(this).addClass("inBottomHalf").removeClass("inUpperHalf")})}}),$(".preview-drop .inputbox-selected").click(function(t){$(".blankSelected").removeClass("blankSelected"),$(this).hasClass("draggable-div")&&$(this).addClass("blankSelected")}),$(".fib-with-option .dropdownbtn").click(function(e){if($(this).hasClass("dropdownbtn")){if($(this).parents(".dropdown").hasClass("disabled"))return;{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let i=$(this).parents(".fib-with-option").find("ul.dropdown-menu:visible").length;if($(this).parents(".customClass").find("ul.dropdown-menu").hide(),$(this).parents(".customClass").find(".dropdownbtn .icon-Down.dropdown-arrow").show(),$(this).parents(".customClass").find(".dropdownbtn .icon-Up.dropdown-arrow").hide(),i)$(this).parents(".fib-with-option").find("ul.dropdown-menu").hide(),$(this).parents(".fib-with-option").find(".dropdownbtn .icon-Down.dropdown-arrow").show(),$(this).parents(".fib-with-option").find(".dropdownbtn .icon-Up.dropdown-arrow").hide();else{$(this).parents(".fib-with-option").find("ul.dropdown-menu").show();let t=$(this).parents("article").width();if($(this).parents(".fib-with-option").find("ul.dropdown-menu").width()>=t/2){$(this).parents("article")[0].getBoundingClientRect().x,this.getBoundingClientRect().y,this.getBoundingClientRect().height;let t=$(this).parents("article")[0].getBoundingClientRect().width;$(this).parents(".fib-with-option").find("ul.dropdown-menu").css({position:"relative",width:t,"max-width":"100%"})}$(this).parents(".fib-with-option").find(".dropdownbtn .icon-Down.dropdown-arrow").hide(),$(this).parents(".fib-with-option").find(".dropdownbtn .icon-Up.dropdown-arrow").show()}setTimeout(()=>{t($(e.currentTarget).siblings("ul"))},0)}}}),$(".fib-with-option ul.dropdown-menu li").click(function(e){$(this).parents("ul.dropdown-menu").hide(),$(this).parents(".fib-with-option").find(".dropdownbtn .icon-Down.dropdown-arrow").show(),$(this).parents(".fib-with-option").find(".dropdownbtn .icon-Up.dropdown-arrow").hide();let i=e.currentTarget.innerHTML,n=$(this).parents(".fib-with-option").find(".dropdownbtn .chosenAns");$(n).html(i),t(n);let s=$(this).data("id");$(this).parents("ul.dropdown-menu").attr("data-selected-index",s)}),$('.customClass[data-type="fill-in-the-blank"]').click(function(t){$(this).find(".fib-with-option ul.dropdown-menu").hide(),$(this).find(".fib-with-option.dropdown").hasClass("disabled")||($(this).find(".fib-with-option .dropdownbtn .icon-Down.dropdown-arrow").show(),$(this).find(".fib-with-option .dropdownbtn .icon-Up.dropdown-arrow").hide())})}),$(".fib .sort-with-row").click(function(t){var e=$(event.target).parents("form");if(!$(this).hasClass("dropped")&&e.find(".blankSelected").length>0){var i=$(this);a(e.find(".blankSelected"),i,e)}}),$(".fib .sort-with-row").droppable({accept:".fib .draggable-div",activeClass:"greedy",hoverClass:"ui-state-active",drop:function(t,e){$(".inputbox-selected.SortOptionView").each(function(t){$(this).removeClass("SortOptionView")});var i=$(t.target).parents("form"),n=$(this),s=$(e.draggable);$(this).hasClass("dropped")||a(s,n,i)}});var r=function(t,e){decodedLatex=JSON.parse(decodeURIComponent(e)).latex,$(t).text(decodedLatex),temml.render(decodedLatex,t)};function a(t,e,i){let n=e.parents(".customClass").eq(0).attr("data-saved-index");if($(".draggable-div.ui-draggable-dragging").attr("data-saved-index",n),$(".blankSelected").removeClass("blankSelected"),i.find(".reset-btn").removeClass("disabled"),dragAndDropFIB(t,e,i),$(".preview-sort").find(".added").draggable({disabled:!0}),$(".preview-sort").find(".added").addClass("ui-draggable-disabled ui-state-disabled").removeClass("draggable-div ui-draggable"),i.find(".fib-blank-spaces").length===i.find(".preview-sort .ui-draggable-disabled").length){if(i.find(".submit-btn").removeClass("disabled"),i.addClass("attempted-question"),!i.parents(".customClass").attr("latencyTime")||i.parents(".customClass").attr("activityStartTime")==i.parents(".customClass").attr("latencyTime")){let t=new Date,e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();i.parents(".customClass").attr("latencyTime",e)}i.parents(".group-interactivity-container").find("form.attempted-question").length==i.parents(".group-interactivity-container").find("form").length&&i.parents(".group-interactivity-container").addClass("enableSubmit")}"undefined"!=typeof apiHandle&&d(event)}function d(e){var i=$(e.target).parents("form");if(!$(e.target).parents(".customClass").length&&($(e.target).hasClass("draggable-div")||$(e.target).parents(".draggable-div").hasClass("draggable-div"))){let t=$(e.target).attr("data-id"),n=$(e.target).attr("data-saved-index");t||(t=$(e.target).parents(".draggable-div").attr("data-id"),n=$(e.target).parents(".draggable-div").attr("data-saved-index")),i=$('.customClass[data-saved-index="'+n+'"]').find("[data-id="+t+"].preview-drop.js-input").eq(0).parents("form")}var n=!i.find(".submit-btn").hasClass("disabled"),s=!i.find(".showme-btn").hasClass("disabled"),r=!i.find(".tryagn-btn").hasClass("disabled"),a=!i.find(".reset-btn").hasClass("disabled"),d=Number(i.find(".submit-btn").data("no-of-attempts")),o=i.find(".submit-btn").attr("data-attempts")?Number(i.find(".submit-btn").attr("data-attempts")):0,l=[],c=[],p=[],f={},h=t;i.parents(".component-holder").hasClass("drag-and-drop")?i.find(".js-form-row").each(function(t,e){$(this).find(".inputbox-selected.draggable-div").length>0?l.push($(this).find(".inputbox-selected.draggable-div").attr("data-id")):l.push(""),$(this).find(".sort-correct").length>0&&c.push(t),$(this).find(".sort-incorrect").length>0&&p.push(t)}):(i.find(".js-form-row.fib-with-option").each(function(t,e){l.push($(this).find(".dropdown-menu.previewList").attr("data-selected-index")),$(this).hasClass("correct-attempt")&&c.push(t),$(this).hasClass("incorrect-attempt")&&p.push(t)}),i.find(".js-form-row.fib-without-option").each(function(t,e){l.push($(this).find("div.inputbox-selected").html()),$(this).find(".correct-attempt").length>0&&c.push(t),$(this).find(".incorrect-attempt").length>0&&p.push(t)})),f.enable="block"==i.find(".fib-alert").css("display"),f.enable&&(f.symbol=i.find(".fib-alert-icon.icon-correct").length>0?"Correct!":"Incorrect!",f.message=i.find(".fib-alert-message").text()),$(e.target).hasClass("reset-btn")&&(l=[],c=[],p=[],f.enable=!1);let b={};b.isSubmitEnable=n,b.isShowMeEnable=s,b.isTryAgainEnable=r,b.isResetEnable=a,b.totalNoOfAttempt=d,b.attemptsDone=o,b.feedbackMessage=f,b.isIndFeedbackEnable=h,b.inputSeleced=l,b.inputCorrect=c,b.inputIncorrect=p,b.dataType=i.parents(".customClass").eq(0).attr("data-type"),b.componentId=i.parents(".customClass").eq(0).attr("data-saved-index"),saveAction(e,b)}$(".fib.drag-and-drop .preview-sort .sort-in").show(),$(".fib.drag-and-drop .preview-sort .preview-drop").css({border:"none",background:"transparent !important",padding:"0",float:"none",display:"inline-block"}),$(".fib.drag-and-drop .preview-sort .inputbox-selected").css("background","white"),$(".fib.drag-and-drop .preview-drop").addClass("sort-select"),$(".fib.drag-and-drop .preview-sort .preview-drop").removeClass("inputbox-selected js-input sort-select sort-in"),$(".fib.drag-and-drop .preview-sort .inputbox-selected").addClass("sortInput"),$(".fib").each(function(t,e){var i=$(e).data("assetcolor");if(i.indexOf("rgb")<0){var n=hexToRgbA(i,.1);$(e).find(".fib-with-option .selectbox, .FIB_style_inputbox.js-input, .preview-drop").css("background-color",n)}$(e).find(".fib-with-option .selectbox, .FIB_style_inputbox.js-input, .preview-drop, .preview-sort .preview-drop .inputbox-selected").css("border-color",i),($(e).hasClass("fibcard-style3")||$(e).hasClass("fibcard-style6"))&&($(e).find(".preview-drop, .preview-sort .preview-drop .inputbox-selected").css("border-bottom","2px solid"),$(e).find(".preview-drop, .preview-sort .preview-drop .inputbox-selected").css("border-bottom-color",i)),$(e).hasClass("fibcard-style4")&&($(e).find(".preview-drop, .preview-sort .preview-drop .inputbox-selected").css("border-bottom","2px dashed"),$(e).find(".preview-drop, .preview-sort .preview-drop .inputbox-selected").css("border-bottom-color",i)),$(e).hasClass("drag-and-drop")||$(e).find(".preview-sort").remove()}),$(".fib .showme-btn").off("click").click(function(e){e.preventDefault();var i=$(this).attr("data-showmeattr");e=e;void 0===i&&(i=$(this).attr("showmeattr")),function(e){if(e.preventDefault(),$(e.target).parents(".drag-and-drop").length>0){var i=$(e.target).parents("form");$(e.target);i.find(".fib-alert").removeAttr("style"),i.find(".correct-tick,.incorrect-tick").remove(),i.find(".alert.fib-pop-up").css("display","none"),i.find(".sort-select").each(function(t){if(a=$(this).attr("data-id"),currenrAnswer=$(this).next().attr("data-id"),!$(this).hasClass("distractor-text-data"))if(a===currenrAnswer){$(this).next().show(),$(this).next().addClass("sort-correct"),$(this).addClass("fibCorrectAnsDivHide"),$(this).next().hasClass("fibCorrectAnsDivHide")&&$(this).next().removeClass("fibCorrectAnsDivHide");var e=new DOMParser,i=e.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),n=$(i).contents()[0].childNodes[1].childNodes[0];$(this).next().parent().append(n)}else{if($(this).children().hasClass("sort-text-selected")){let t=$(this).children().html();$(this).children().html(t)}$(this).children().show(),$(this).css({border:"none",padding:"0"}),$(this).children().css("border","none"),$(this).next().hide(),$(this).addClass("sort-correct"),$(this).next().addClass("fibCorrectAnsDivHide"),$(this).hasClass("fibCorrectAnsDivHide")&&$(this).removeClass("fibCorrectAnsDivHide");var e=new DOMParser,i=e.parseFromString('<span class="correct-tick icon-correct" style="position:absolute;"></span>',"text/html"),n=$(i).contents()[0].childNodes[1].childNodes[0];$(this).parent().append(n),$(this).parent().css({width:"auto",height:"unset"})}}),i.find(".submit-btn").addClass("disabled"),i.find(".reset-btn").addClass("disabled"),i.find(".preview-sort .inputbox-selected").css("opacity","0.5"),i.find(".preview-sort .inputbox-selected").addClass("ui-draggable-disabled ui-state-disabled"),i.find(".preview-sort .inputbox-selected").removeClass("draggable-div ui-draggable"),i.find(".tryagn-btn").addClass("disabled"),i.find(".showme-btn").addClass("disabled"),i.find(".reset-btn").addClass("disabled"),i.find(".sort-text-selected").css("background-color",""),i.find(".sort-img-selected").css("background-color","")}else{var i=$(e.target).parents("form");i.find(".fib-alert").removeAttr("style"),i.find("select").prop("disabled",!0),i.find("div.inputbox-selected").attr("contenteditable",!1),i.find("select").easyDropDown("disable"),i.find(".alert.fib-pop-up").css("display","none"),i.find(".submit-btn,.tryagn-btn,.showme-btn,.reset").addClass("disabled");var n,s,a,o,l=i.find(".form-row");for(s=0;s<l.length;s++)for(n=$(l[s]).find(".js-form-row"),o=0;o<n.length;o++)if(i.find(".fib-body").hasClass("with-option-body")){a=$(n[o]).find("ul.previewList").attr("data-correctoption-index");let t=$(n[o]).find("ul.previewList li[data-id="+a+"]").html();$(this).parents(".fib-with-option").find(".dropdownbtn .chosenAns").html(t),$(n[o]).find(".dropdownbtn .chosenAns").html(t),$(n[o]).find("ul.dropdown-menu.previewList").attr("data-selected-index",a),$(n[o]).append('<span class="correct-tick icon-correct" style="position:absolute;"></span>'),$(n[o]).find(".incorrect-tick").removeClass("incorrect-tick icon-close-filled").addClass("correct-tick icon-correct"),$(n[o]).removeClass("incorrect-attempt").addClass("correct-attempt").addClass("disabled"),$(n[o]).find(".dropdownbtn").removeClass("incorrect").addClass("correct"),$(n[o]).find(".dropdownbtn .dropdown-arrow").css("display","none")}else{var c=document.createElement("div"),p=new DOMParser,f=p.parseFromString(decodeURIComponent(escape(window.atob(String($(n[o]).find("div.inputbox-selected").data("correct-answer"))))),"text/html"),h=$(f).contents()[0].childNodes[1].childNodes[0];$(c).html(h),a=c.innerText,$(n[o]).find("div.inputbox-selected").html(a),$(n[o]).find("div.inputbox-selected").removeClass("incorrect").addClass("correct").prop("disabled",!0),$(n[o]).find(".form-control-wrap").removeClass("incorrect-attempt").addClass("correct-attempt"),$(n[o]).find(".form-control-wrap").append('<span class="correct-tick icon-correct" style="position:absolute;"></span>'),$(n[o]).find(".incorrect-tick").removeClass("incorrect-tick icon-close-filled").addClass("correct-tick icon-correct")}}setTimeout(()=>{i.find(".auth-equation-holder").each(function(t){$(this).empty(),r(this,$(this).attr("data-equation-latex")),$(this).parents(".component-holder")&&$(this).parents(".component-holder").hasClass("drag-and-drop")&&setTimeout(()=>{let t=$(this).height()+20,e=$(this).width()+20;$(this).parents(".form-control-wrap").height(t).css("min-width",e),void 0!==$(this).parents(".form-control-wrap").attr("datadragwidth")?($(this).parents(".form-control-wrap").css("width",$(this).parents(".form-control-wrap").attr("datadragwidth")),$(this).parents(".form-control-wrap").css("max-width",$(this).parents(".form-control-wrap").attr("datadragwidth"))):$(this).parents(".form-control-wrap").css("width","auto")},1e3)})},0),i.find(".submit-btn").css("display",""),t=!0,"undefined"!=typeof apiHandle&&d(e);t=!1}(e)}),$(".fib .tryagn-btn").off("click").click(function(t){t.preventDefault();var e=$(this).attr("data-tryagainattr");t=t;void 0===e&&(e=$(this).attr("tryagainattr")),function(t){if(t.preventDefault(),$(t.target).parents("form").find(".fib-alert").removeAttr("style"),$(t.target).parents(".drag-and-drop").length>0){counter=0;$(t.target);var e=$(t.target).parents("form");e.find(".sort-with-row").each(function(t){$(this).find(".draggable-div").remove(),$(this).removeClass("dropped"),$(this).css("height","unset"),$(this).css("width","unset"),$(this).find(".fibCorrectAnsDivHide").removeClass("fibCorrectAnsDivHide")}),e.find(".preview-sort .inputbox-selected").css("opacity","1"),e.find(".preview-sort .inputbox-selected").addClass("draggable-div ui-draggable"),e.find(".preview-sort .added").draggable("enable"),e.find(".preview-sort .inputbox-selected").removeClass("added"),e.find(".correct-tick,.incorrect-tick").remove(),e.find(".submit-btn,.tryagn-btn").addClass("disabled"),e.find(".submit-btn").css("display","")}else{var e=$(t.target).parents("form");e.trigger("reset"),e.find("select").prop("disabled",!1),e.find("div.inputbox-selected").attr("contenteditable",!1),e.find(".hide-carat").removeClass("hide-carat"),e.find("select").easyDropDown("enable"),e.find(".fib-without-option .FIB_style_inputbox").attr("contenteditable","true"),e.find(".fib-without-option .FIB_style_inputbox").html(""),e.find(".submit-btn,.tryagn-btn").addClass("disabled"),e.find(".submit-btn").css("display",""),e.find(".correct,.incorrect").removeClass("correct incorrect"),e.find(".correct-tick,.incorrect-tick").remove(),e.find(".alert.fib-pop-up").css("display","none"),e.find(".correct-attempt,.incorrect-attempt").removeClass("correct-attempt incorrect-attempt"),e.find(".preview-sort .inputbox-selected").css("pointerEvents","auto"),window.localeJson?e.find(".fib-with-option .dropdownbtn").length>0&&$.each(e.find(".fib-with-option .dropdownbtn"),function(t,e){$($(e).find("span.chosenAns")[0]).text(window.localeJson.select_answer)}):e.find(".fib-with-option .dropdownbtn .chosenAns").text("Select Answer"),e.find(".dropdown.fib-with-option").each(function(t){$(this).find(".dropdownbtn .chosenAns span").remove(),$(this).find(".dropdownbtn .icon-Down.dropdown-arrow").css("display","block"),$(this).hasClass("disabled")&&$(this).removeClass("disabled")})}"undefined"!=typeof apiHandle&&d(t)}(t)}),$(".fib .form-row .previewList").on("click",function(t){var e=$(t.target),i=e.parents("form");i.find("select");if(!e.prop("disabled")){i.find(".incorrect-tick").parents(".form-control-wrap").find(".hide-carat").removeClass("hide-carat"),i.find(".incorrect-tick").remove(),0==t.currentTarget.selectedIndex&&(window.localeJson?$($(t.currentTarget).find(".dropdownbtn").find("span.chosenAns")[0]).text(window.localeJson.select_answer):$($(t.currentTarget).find(".dropdownbtn").find("span.chosenAns")[0]).text("Select Answer")),i.find(".submit-btn").removeClass("disabled");var n=!1;if(i.find(".dropdown").each(function(t,e){let i=$(e).find(".chosenAns").eq(0).text().trim(),s="Select Answer";window.localeJson&&window.localeJson.select_answer&&(s=window.localeJson.select_answer),"Select Answer"!==i&&i!==s&&(n=!0)}),n?i.addClass("attempted-question"):i.removeClass("attempted-question"),!i.parents(".customClass").attr("latencyTime")||i.parents(".customClass").attr("activityStartTime")==i.parents(".customClass").attr("latencyTime")){let t=new Date,e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();i.parents(".customClass").attr("latencyTime",e)}i.parents(".group-interactivity-container").find("form.attempted-question").length==i.parents(".group-interactivity-container").find("form").length&&i.parents(".group-interactivity-container").addClass("enableSubmit"),i.find(".reset").removeClass("disabled");for(var s=0;s<i.find(".dropdown").length;s++){let t=$(i.find(".dropdown")[s]).find(".chosenAns").eq(0).text().trim(),e="Select Answer";window.localeJson&&window.localeJson.select_answer&&(e=window.localeJson.select_answer),"Select Answer"!==t&&t!==e||(i.find(".submit-btn").addClass("disabled"),i.find(".attempted-question").removeClass("attempted-question"))}i.find(".alert.fib-pop-up").css("display","none"),"undefined"!=typeof apiHandle&&d(t)}}),$(".fib .reset").off("click").click(function(t){t.preventDefault();var e=$(this).attr("data-resetattr");void 0===e&&(e=$(this).attr("resetattr")),function(t){if(t.preventDefault(),$(t.target).parents(".drag-and-drop").length>0){counter=0;var e=$(t.target),i=$(t.target).parents("form");i.find(".fib-alert").removeAttr("style"),$(e).attr("click",!0)?i.find(".sort-select").each(function(t){i.find(this).hasClass("fibCorrectAnsDivHide")&&i.find(this).removeClass("fibCorrectAnsDivHide"),correctAnswer=i.find(this).attr("data-id"),currenrAnswer=i.find(this).next().attr("data-id"),i.find(this).next().hasClass("sort-correct")?i.find(this).css("opacity","0.5"):(i.find(this).next().remove(),i.find(this).parent().removeClass("dropped"),i.find(this).parent().css("height","unset"),i.find(this).parent().css("width","unset"),$(".added").each(function(t){dragId=$(this).attr("data-id"),correctAnswer===dragId&&(i.find(this).css("opacity","1"),$(this).draggable("enable"),i.find(this).addClass("draggable-div ui-draggable"),i.find(this).removeClass("added"))}),i.find(".reset").addClass("disabled"))}):i.find(".sort-with-row").each(function(t){$(this).find(".draggable-div").remove(),$(this).removeClass("dropped"),i.find(".preview-sort .inputbox-selected").css("opacity","1"),i.find(".preview-sort .inputbox-selected").addClass("draggable-div ui-draggable"),i.find(".preview-sort .added").draggable("enable"),i.find(".preview-sort .inputbox-selected").removeClass("added"),i.find(this).hasClass("fibCorrectAnsDivHide")&&i.find(this).removeClass("fibCorrectAnsDivHide")}),i.find(".incorrect-tick").remove()}else{var i=$(t.target).parents("form");i.find(".alert.fib-pop-up").css("display","none"),1==click?(i.find("div.inputbox-selected").each(function(t){$(this).hasClass("correct")||$(this).html("")}),i.find(".dropdown.fib-with-option").each(function(t){$(this).hasClass("correct")||(this.selectedIndex=0,window.localeJson?$($(this).find(".dropdownbtn").find("span.chosenAns")[0]).text(window.localeJson.select_answer):$($(this).find(".dropdownbtn").find("span.chosenAns")[0]).text("Select Answer"))}),i.find(".dropdown.fib-with-option").each(function(t){$(this).find(".dropdownbtn .chosenAns span").remove(),$(this).find(".dropdownbtn .icon-Down.dropdown-arrow").css("display","block"),$(this).hasClass("disabled")&&$(this).removeClass("disabled")})):(i.trigger("reset"),i.find(".dropdown.fib-with-option").each(function(t){$(this).hasClass("correct")||(this.selectedIndex=0,window.localeJson?$($(this).find(".dropdownbtn").find("span.chosenAns")[0]).text(window.localeJson.select_answer):$($(this).find(".dropdownbtn").find("span.chosenAns")[0]).text("Select Answer"))}),i.find(".dropdown.fib-with-option").each(function(t){$(this).find(".dropdownbtn .chosenAns span").remove(),$(this).find(".dropdownbtn .icon-Down.dropdown-arrow").css("display","block"),$(this).hasClass("disabled")&&$(this).removeClass("disabled")})),i.find(".reset").addClass("disabled"),i.find(".incorrect").removeClass("incorrect"),i.find(".incorrect-tick").remove()}i.find(".submit-btn").addClass("disabled"),"undefined"!=typeof apiHandle&&d(t)}(t)}),setTimeout(function(){$(".fib .form-row div.inputbox-selected").removeAttr("disabled"),$(".fib .form-row div.inputbox-selected.correct, .fib .form-row div.inputbox-selected.incorrect").prop("disabled",!0),$(".fib .preview-sort .inputbox-selected.draggable-div").draggable({cursor:"move",revert:"invalid",helper:"clone",appendTo:"body",cursorAt:{left:50,top:15}}),$(".preview-sort").find(".added").draggable({disabled:!0}),$(".preview-sort").find(".added").addClass("ui-draggable-disabled ui-state-disabled").removeClass("draggable-div ui-draggable"),$(".js-form-row .img-sort .img-sort-img").each(function(t){$(this).attr("src",$(this).attr("data-imgsrc"))})},1e3),$(".fib .preview-sort .inputbox-selected.draggable-div").draggable({cursor:"move",revert:"invalid",helper:"clone",appendTo:"body",start:function(t,e){$(this).draggable("option","cursorAt",{left:Math.floor($(this).width()/3),top:Math.floor(e.helper[0].offsetHeight+5)});var i=$(this).width()+20;e.helper[0].style.width=i+"px",e.helper[0].style.overflow="hidden"},stop:function(t,e){e.helper[0].style.overflow="auto"}}),$(".fib .form-row div.inputbox-selected").on("keyup",function(t){13==t.keycode&&t.preventDefault();var e=$(t.target).parents("form");e.find("div.inputbox-selected");e.find(".incorrect-tick").remove(),e.find(".incorrect-attempt").removeClass("incorrect-attempt"),e.find(".alert.fib-pop-up").css("display","none"),e.find(".submit-btn").removeClass("disabled"),e.find(".reset").removeClass("disabled");var i=!1;if(e.find("div.inputbox-selected").each(function(t,e){""!=e.innerHTML&&(i=!0)}),i?e.addClass("attempted-question"):e.removeClass("attempted-question"),!e.parents(".customClass").attr("latencyTime")||e.parents(".customClass").attr("activityStartTime")==e.parents(".customClass").attr("latencyTime")){let t=new Date,i=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();e.parents(".customClass").attr("latencyTime",i)}e.parents(".group-interactivity-container").find("form.attempted-question").length==e.parents(".group-interactivity-container").find("form").length&&e.parents(".group-interactivity-container").addClass("enableSubmit")}),$(".fib .form-row .fib-without-option div.FIB_style_inputbox").on("keyup",function(t){13==t.keycode&&t.preventDefault();var e=$(t.target).parents("form");e.find(".fib-without-option .FIB_style_inputbox");e.find(".incorrect-tick").remove(),e.find(".incorrect-attempt").removeClass("incorrect-attempt"),e.find(".alert.fib-pop-up").css("display","none"),e.find(".submit-btn").removeClass("disabled"),e.find(".reset").removeClass("disabled");var i=!1;if(e.find(".fib-without-option .FIB_style_inputbox").each(function(t,e){""!=e.innerHTML&&(i=!0)}),i?e.addClass("attempted-question"):e.removeClass("attempted-question"),!e.parents(".customClass").attr("latencyTime")||e.parents(".customClass").attr("activityStartTime")==e.parents(".customClass").attr("latencyTime")){let t=new Date,i=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();e.parents(".customClass").attr("latencyTime",i)}e.parents(".group-interactivity-container").find("form.attempted-question").length==e.parents(".group-interactivity-container").find("form").length&&e.parents(".group-interactivity-container").addClass("enableSubmit")})});var fibAlert=function(){"use strict";var t={show:function(t,e,i,n,s){$(i).find(".fib-alert").css("display","block"),$(i).find(".fib-alert-icon").removeClass("icon-correct icon-close-filled"),"Correct!"==t?$(i).find(".fib-alert-icon").addClass("icon-correct"):$(i).find(".fib-alert-icon").addClass("icon-close-filled"),$(i).find(".fib-alert-message").text(s),n&&window.localeJson&&$(i).find(".fib-alert-message").text(window.localeJson[n])}};return t}();function hexToRgbA(t,e){var i,n;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3==(i=t.substring(1).split("")).length&&(i=[i[0],i[0],i[1],i[1],i[2],i[2]]),n=e,e||(n=1),"rgba("+[(i="0x"+i.join(""))>>16&255,i>>8&255,255&i].join(",")+","+n+")"):(console.log("error: Bad Hex"),"rgba(126, 177, 235, 0.1)")}function shuffle(t){for(var e,i,n=t.length;0!==n;)i=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[i],t[i]=e;return t}function fibDragDropResizing(){$(document).find(".fib .preview-sort .inputbox-selected").each(function(t,e){let i=$(e).width()+25,n=$(e).height()+25,s=$(e).attr("data-id");$(e).parents(".customClass").eq(0).find(".form-row .inputbox-selected.sort-in.draggable-div[data-id="+s+"]").parents(".form-control-wrap.sort-with-row").width(i).height(n)})}$(".fib .customKeybord-cantsiner").on("click",function(t){setTimeout(function(){$(".customKeybord-cantsiner .keys").find(".key__button").on("click",function(t){$(t.currentTarget).parents(".customClass").find("textArea.ansRTE").length<1&&($(document.getSelection().anchorNode).find("textarea.longAnsTextArea").length>=1||$(document.getSelection().anchorNode).find("div.inputbox-selected").length>=1)?insertTextAtCursor(t):$(document.getSelection().anchorNode).parent("div.FIB_style_inputbox").length>=1&&insertTextAtCursor(t)})},100)});var insertTextAtCursor=function(t){document.execCommand("insertText",!1,t.currentTarget.textContent),$(t.currentTarget).parents("form").find(".form-row div.inputbox-selected").trigger("keyup"),t.preventDefault(),t.stopImmediatePropagation()};$('.customClass[data-type="fill-in-the-blank"]').each(function(t,e){if(window.isActivityInprogress){var i=$(e).find("form");i.find(".dropdown").addClass("disabledInput"),i.find(".inputbox-selected").addClass("disabledInput")}}),$(document).on("click",".deleteBlankDragAndDropIcon",function(t){const e=$(this).parent(),i=e.parents(".sort-with-row").eq(0),n=i.parents("form").eq(0),s=e.data("id");e.remove(),i.removeClass("dropped"),i.find(".preview-drop").removeClass("fibCorrectAnsDivHide"),i.css({height:"",width:"","line-height":""});const r=$(".added").filter(function(){return $(this).data("id")===s});r.length&&(r.removeClass("added"),r.draggable("enable"),r.addClass("draggable-div ui-draggable").removeClass("ui-draggable-disabled ui-state-disabled"),r.css({opacity:"",position:""}),r.addClass("sortInput"));const a=n.find(".fib-blank-spaces"),d=n.find(".sort-with-row.dropped").length;if(a.length===d){if(n.find(".submit-btn").removeClass("disabled"),n.addClass("attempted-question"),n.parents(".group-interactivity-container").length){const t=n.parents(".group-interactivity-container"),e=t.find("form").length;t.find("form.attempted-question").length==e&&t.addClass("enableSubmit")}}else if(n.find(".submit-btn").addClass("disabled"),n.removeClass("attempted-question"),n.parents(".group-interactivity-container").length){const t=n.parents(".group-interactivity-container"),e=t.find("form").length;t.find("form.attempted-question").length==e&&t.addClass("enableSubmit")}n.find(".reset-btn").removeClass("disabled"),"undefined"!=typeof apiHandle&&stateMainatainFIB(t)});
$(function(){let t=[];var e=!1;$$orginal="";var n="";function a(t,e){var n=t.target?$(t.target):$(t);$form=n.parents("form");var a=!1;if($form.find("input,textarea").each(function(t,e){""!=e.value&&"checkbox"!==e.type&&"<br>"!=e.value&&(a=!0),$form.parents(".shortLongAnsComponent").attr("scorm-saved-ans",e.value)}),$form.find("div.shortAnsText").each(function(t,e){""!=e.innerHTML&&"checkbox"!==e.type&&"<br>"!=e.innerHTML&&(a=!0),$form.parents(".shortLongAnsComponent").attr("scorm-saved-ans",e.innerHTML)}),a?($form.find(".submit-btn").removeClass("disabled"),$form.addClass("attempted-question"),$form.find(".reset-btn").removeClass("disabled")):($form.find(".submit-btn").addClass("disabled"),$form.removeClass("attempted-question")),$form.parents(".group-interactivity-container").find("form.attempted-question").length==$form.parents(".group-interactivity-container").find("form").length&&$form.parents(".group-interactivity-container").addClass("enableSubmit"),!$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("latencyTime")||$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("activityStartTime")==$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("latencyTime")){let e=new Date,n=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("latencyTime",n)}e||c(t)}function r(){$(".identifyTheClipComponent .identifyTheClip-math-field-Author .auth-mathfield-holder").each(function(t,e){const n=$(e);n.html("");const a=n.attr("data-equation-latex");if(a){const e=MathLive.convertLatexToMathMl(a),r=(new DOMParser).parseFromString(`<math mode='display' style="max-width:100%;border-width: 0px; background: transparent; outline: none; display: inline-flex; overflow-x: auto; overflow-y: hidden;" class="mathFieldEq" id="identifyTheClipMathEq${t}" xmlns="http://www.w3.org/1998/Math/MathML">\n                    <semantics>${e}</semantics>\n                </math>`,"application/xml").documentElement;n.html(r)}})}function i(t){return t.replace(/<[^>]*>/g,"").replace(/\s+/g,"").replace(/\&nbsp;/g,"").trim().toLowerCase()}function s(t){var e=$(t).parents("form").attr("allowresponse"),n=$(t).parents("form").attr("answermatch"),a=$(t).parents("form").find(".shortAnsText")[0]?$(t).parents("form").find(".shortAnsText")[0]:$(t)[0];if(JSON.parse(e)&&JSON.parse(n)){var r=$(a).attr("data-correct-answer").split("|");return(r=r.map(t=>i(t))).includes($(t).parents("form").find(".shortAnsText")[0]?i(a.innerHTML):a.value)}if(!JSON.parse(e)||JSON.parse(n))return"notValidate";if(($(t).parents("form").find(".shortAnsText")[0]?null==a.value||""==a.value:i(a.innerHTML))&&(null==$(a).attr("data-correct-answer")||""==$(a).attr("data-correct-answer")))return!1;if($(a).attr("data-correct-answer")){var s=$(a).attr("data-correct-answer").toLowerCase().replace(/\s/g,"").split("|");s=s.map(t=>i(t));var o=$(t).parents("form").find(".shortAnsText")[0]?i(a.innerHTML):a.value.toLowerCase().replace(/\s/g,"");return s.includes(o)}}function o(t){let e={};var n=[],a=[],r=[],i=!t.find(".submit-btn").hasClass("disabled"),s=!t.find(".showme-btn").hasClass("disabled"),o=!t.find(".tryagn-btn").hasClass("disabled"),c=!t.find(".reset-btn").hasClass("disabled"),d=Number(t.find(".submit-btn").attr("data-no-of-attempts")),l=Number(t.find(".submit-btn").attr("data-attempts")),f=t.hasClass("submitted");return t.find("input,textarea").each(function(t,e){n.push(e.value),$(e).hasClass("itcCorrect")&&a.push(t),$(e).hasClass("itcIncorrect")&&r.push(t)}),t.find("div.shortAnsText").each(function(t,e){n.push(e.innerHTML),$(e).hasClass("itcCorrect")&&a.push(t),$(e).hasClass("itcIncorrect")&&r.push(t)}),e.isSubmitEnable=i,e.isShowMeEnable=s,e.isTryAgainEnable=o,e.isResetEnable=c,e.totalNoOfAttempt=d,e.attemptsDone=l,e.feedbackMessage={},e.inputSeleced=n,e.inputCorrect=a,e.inputIncorrect=r,e.isSubmitted=f,e.dataType=t.parents('.customClass[data-type="identify-the-clip"]').eq(0).attr("data-type"),e.componentId=t.parents('.customClass[data-type="identify-the-clip"]').eq(0).attr("data-saved-index"),e}function c(t){var e=o($(t.target).parents("form"));"undefined"!=typeof apiHandle&&saveAction(t,e)}setTimeout(function(){$(".ITCForm").each(function(t,e){$(this).parent(".identifyTheClipComponent").attr("data-usersubjectlangformathitc")&&(n=$(this).parent(".identifyTheClipComponent").attr("data-usersubjectlangformathitc")),$(e).find(".ansRTE").each(function(t,e){$(e).parents(".ITCForm").attr("isRTEEnabled",!0),$(e).on("input",function(t){c(t)})}),$(e).hasClass("submitted")?($(e).find(".SLA-custKeybCont").addClass("btn disabled"),$(e).find("div.shortAnsText,textarea").each(function(t,e){e.setAttribute("disabled",!0),e.setAttribute("contenteditable",!1)})):($(e).find("div.shortAnsText,textarea").each(function(t,e){e.setAttribute("disabled",!1),e.setAttribute("contenteditable",!0),$(e).html("")}),$(e).find(".SLA-custKeybCont").removeClass("btn disabled"));var a=setInterval(function(){"true"==e.getAttribute("isRTEEnabled")?0==$(e).find(".cazary").length?($(e).find(".cazary-source").cazary({commands:"MINIMAL"}),clearInterval(a)):$(e).find(".cazary").length>0&&clearInterval(a):clearInterval(a)},1500)})},100),setTimeout(function(){$(".ITCForm").each(function(t,e){$(e).find(".ansRTE").each(function(t,e){var n,a;n=e,a=setInterval(function(){if(n&&(n.classList.contains("itcCorrect")||n.classList.contains("itcIncorrect"))){var t=n.closest("form");if(t){var e=t.querySelector(".cazary");e&&(n.classList.contains("itcCorrect")&&(e.classList.add("itcCorrect"),e.classList.add("disabled-rte")),n.classList.contains("itcIncorrect")&&(e.classList.add("itcIncorrect"),e.classList.add("disabled-rte")),(e.classList.contains("itcCorrect")||e.classList.contains("itcIncorrect"))&&clearInterval(a))}}},1e3)})})},1e3),$(".identifyTheClipComponent").on("keypress",".shortAnsText",function(t){13===(t.keyCode||t.which)&&(t.preventDefault(),t.stopPropagation())}),$(document).find('.customClass[data-type="identify-the-clip"] div.shortAnsText').each(function(t,e){$(e).html("")}),$(document).on("keyup paste",'.customClass[data-type="identify-the-clip"] textarea.longAnsText',function(t){a(t,!1)}),$(document).on("input paste",'.customClass[data-type="identify-the-clip"] div.shortAnsText',function(t){a(t,!1)}),$(document).on("keyup paste",".characters_count_extended_response_about_media",function(t){t.target.value&&t.target.value.length>0?$(this).siblings().find(".current_characters").removeClass("hide").html(t.target.value.length+" /"):$(this).siblings().find(".current_characters").addClass("hide")}),function(){if("undefined"!=typeof MathLive)r();else{!function(t){if(!document.querySelector(`script[src="${t}"]`)){const e=document.createElement("script");e.src=t,e.async=!0,document.head.appendChild(e)}}("https://cdn.jsdelivr.net/npm/mathlive/mathlive.min.js");const t=setInterval(()=>{"undefined"!=typeof MathLive?(clearInterval(t),r()):console.log("MathLive still not loaded for IdentifyTheClip, retrying...")},1e3)}}(),$(".identifyTheClipComponent").find("audio").each(function(t,e){audiojs.create(e)}),$(".identifyTheClipComponent").find("video").each(function(t,e){videojs(e)}),$(".identifyTheClipComponent .SLA-custKeybCont .keys").on("click",function(t){setTimeout(function(){$(t.currentTarget).parents('.customClass[data-type="identify-the-clip"]').find("div.shortAnsText").trigger("keyup")},0)}),$(".identifyTheClipComponent .submit-btn").off("click").click(function(t){!function(t){t.preventDefault();var e=$(t.target);$form=e.parents("form"),$form.find(".submit-btn").addClass("disabled"),$form.find(".reset-btn").addClass("disabled"),$form.addClass("attempted-question"),$form.addClass("submitted"),$form.find(".SLA-custKeybCont").addClass("btn disabled"),$inputs=$form.find("div.shortAnsText,textarea");var n=!1;$inputs.each(function(t,e){$(e).attr("disabled",!0),$(e).attr("contenteditable",!1),$(e).removeClass("itcCorrect"),$(e).removeClass("itcIncorrect");var a=$form.find(".itc-alert").attr("data-generic-correct-feedback"),r=$form.find(".itc-alert").attr("data-generic-incorrect-feedback");$(e).hasClass("shortAnsText")&&""!=e.innerHTML&&(n=!0),$(e).hasClass("shortAnsText")||""==e.value||(n=!0);var i=$(e).parents(".cazary");if(1==s(e))$(e).hasClass("ansRTE")&&i.addClass("itcCorrect disabled-rte"),$(e).addClass("itcCorrect"),$(e).closest("form").find(".itc-alert").css("display","block"),$(e).closest("form").find(".itc-alert-icon").removeClass("icon-close-filled"),$(e).closest("form").find(".itc-alert-icon").addClass("icon-correct"),$(e).closest("form").find(".itc-alert-message").text(a),$(e).closest("form").find(".showme-btn").addClass("disabled");else{if("notValidate"==s(e))return $(e).hasClass("ansRTE")&&i.addClass("notValidate disabled-rte"),$(e).addClass("notValidate"),void $(e).closest("form").find(".itc-alert").css("display","none");$(e).hasClass("ansRTE")&&i.addClass("itcIncorrect disabled-rte"),$(e).addClass("itcIncorrect"),$(e).closest("form").find(".itc-alert").css("display","block"),$(e).closest("form").find(".itc-alert-icon").addClass("icon-close-filled"),$(e).closest("form").find(".itc-alert-message").text(r)}}),n?$form.addClass("attempted-question"):$form.removeClass("attempted-question");$form.parents(".group-interactivity-container").find("form.attempted-question").length==$form.parents(".group-interactivity-container").find("form").length&&$form.parents(".group-interactivity-container").addClass("enableSubmit");if(!$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("latencyTime")||$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("activityStartTime")==$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("latencyTime")){let e=new Date,n=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();$(t.target).parents('.customClass[data-type="identify-the-clip"]').attr("latencyTime",n)}c(t),$form.find(".keyboard-parent").addClass("hide"),$form.find(".open__custom__keyBoard").removeClass("hide"),$form.find(".close__custom__keyBoard").addClass("hide")}(t)}),$(".identifyTheClipComponent .tryagn-btn").off("click").click(function(t){t.preventDefault();var e=$(this).attr("data-tryagainattr");t=t;void 0===e&&(e=$(this).attr("tryagainattr")),function(t){t.preventDefault();var e=$(t.target).parents("form");e.removeClass("submitted"),e.removeClass("attempted-question"),e.find(".reset-btn").addClass("disabled"),$(t.target).parents("form").find(".itc-alert").removeAttr("style"),$(t.target).parents("form").find(".itcCorrect,.itcIncorrect").removeClass("itcCorrect itcIncorrect"),e.find("div.shortAnsText,textarea").each(function(e,n){if($(n).hasClass("ansRTE")){var a=$(n).parents(".cazary");console.log("item in try again",n);const e=$(n).parents("form").find("iframe")[0],r=$(e.contentDocument.body);a.removeClass("itcIncorrect notValidate itcCorrect disabled-rte"),r.removeClass("empty");let i=e.contentDocument;i.body.innerHTML="",c(t)}else c(t)}),e.find(".submit-btn").removeClass("disabled"),e.find(".SLA-custKeybCont").removeClass("btn disabled")}(t)});let d=$(".customClass[data-type='identify-the-clip']").find(".ansRTE");for(let r=0;r<d.length;r++)setTimeout(()=>{!function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery"),window):t(jQuery,window)}(function(r,i,s){"use strict";const o=i.document;function c(){const t=o.getElementsByClassName("cazary-edit");Array.from(t).forEach(t=>{const e=()=>{try{const n=t.contentDocument||t.contentWindow.document;if(!n||!n.body)return void setTimeout(e,100);const a=Math.max(n.body.scrollHeight,n.body.offsetHeight,n.body.clientHeight,n.documentElement.offsetHeight);t.style.height=`${Math.max(a,150)}px`}catch(t){console.error("Error adjusting iframe height:",t)}};setTimeout(e,50),setTimeout(e,300),setTimeout(e,600)})}setTimeout(()=>{c()},5e3);const d=function(){const t={},e=function(){let e=function(){try{const t=i.navigator;return t.browserLanguage||t.language||t.userLanguage}catch(t){return s}}().toLowerCase(),n=t[e];if(n!==s)return n;if(e=e.split("-")[0],(n=t[e])!==s)return n;return{}}();return function(t){return e[t]===s?t:e[t]}}(),l=function(){const t=/^[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~](\.?[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~])*@([\w\-]+\.)+(\w+)$/;return function(e){return!(e.length>256)&&(!(e.indexOf("@")>64)&&null!==e.match(t))}}(),u=function(){const t=/^https?:\/\//;return function(e){return null!==e.match(t)}}(),m=function(){const t={NORMAL:0,ACTIVE:1,DISABLED:2},e={FONTNAME:"fontname",FONTSIZE:"fontsize",BOLD:"bold",ITALIC:"italic",UNDERLINE:"underline",STRIKETHROUGH:"strikethrough",REMOVEFORMAT:"removeformat",FORECOLOR:"forecolor",BACKCOLOR:"backcolor",HILITECOLOR:"hilitecolor",SUPERSCRIPT:"superscript",SUBSCRIPT:"subscript",JUSTIFYLEFT:"justifyleft",JUSTIFYCENTER:"justifycenter",JUSTIFYRIGHT:"justifyright",JUSTIFYFULL:"justifyfull",INDENT:"indent",OUTDENT:"outdent",ORDEREDLIST:"insertorderedlist",UNORDEREDLIST:"insertunorderedlist",INSERTHORIZONTALRULE:"inserthorizontalrule",INSERTIMAGE:"insertimage",CREATELINK:"createlink",UNLINK:"unlink",UNDO:"undo",REDO:"redo"};return function(n,a,i,o){let d=n.contentWindow,l=d.document;n.contentDocument&&(l=n.contentDocument);let f=null;function u(t,n){t===e.BACKCOLOR&&m(e.HILITECOLOR)&&(t=e.HILITECOLOR),y(),l.execCommand(t,!1,n)}function m(t){try{return l.queryCommandEnabled(t)}catch(t){return!1}}function p(t){l.body.innerHTML=t,c()}function h(){return d.getSelection?d.getSelection().anchorNode:l.selection.createRange().parentElement()}function C(){if(d.getSelection){const t=d.getSelection();return null===t||0===t.rangeCount?"":t.getRangeAt(0).toString()}return l.selection.createRange().text}function y(){d.focus(),c(),null!==f&&f.select()}this.STATUS=t,this.COMMAND=e,this.contentWindow=d,this.contentDocument=l,this.getCurrentStatus=function(){const n={fontname:null,fontsize:null,forecolor:null,backcolor:null,bold:t.NORMAL,italic:t.NORMAL,underline:t.NORMAL,strikethrough:t.NORMAL,superscript:t.NORMAL,subscript:t.NORMAL,justifyleft:t.NORMAL,justifycenter:t.NORMAL,justifyright:t.NORMAL,justifyfull:t.NORMAL,insertorderedlist:t.NORMAL,insertunorderedlist:t.NORMAL,createlink:t.NORMAL,unlink:t.NORMAL,undo:t.NORMAL,redo:t.NORMAL};""===C()&&(n[e.CREATELINK]=t.DISABLED,n[e.UNLINK]=t.DISABLED);r.each([e.CREATELINK,e.UNLINK,e.UNDO,e.REDO],function(e,a){m(a)||(n[a]=t.DISABLED)});let a=h();for(;null!==a;){if(a.tagName!==s){const r=a.tagName.toLowerCase();switch(r){case"b":case"strong":n[e.BOLD]=t.ACTIVE;break;case"i":case"em":n[e.ITALIC]=t.ACTIVE;break;case"u":n[e.UNDERLINE]=t.ACTIVE;break;case"s":case"strike":case"del":n[e.STRIKETHROUGH]=t.ACTIVE;break;case"sup":n[e.SUPERSCRIPT]=t.ACTIVE;break;case"sub":n[e.SUBSCRIPT]=t.ACTIVE;break;case"ol":n[e.ORDEREDLIST]=t.ACTIVE;break;case"ul":n[e.UNORDEREDLIST]=t.ACTIVE;break;case"font":a.face.length>0&&null===n[e.FONTNAME]&&(n[e.FONTNAME]=a.face),a.size.length>0&&null===n[e.FONTSIZE]&&(n[e.FONTSIZE]=a.size),a.color.length>0&&null===n[e.FORECOLOR]&&(n[e.FORECOLOR]=a.color)}}if(a.align!==s){const r=a.align.toLowerCase();switch(r){case"left":n[e.JUSTIFYLEFT]=t.ACTIVE;break;case"center":n[e.JUSTIFYCENTER]=t.ACTIVE;break;case"right":n[e.JUSTIFYRIGHT]=t.ACTIVE;break;case"justify":n[e.JUSTIFYFULL]=t.ACTIVE}}if(a.style!==s){const r=a.style;if(r.fontFamily!==s){const t=r.fontFamily;t.length>0&&null===n[e.FONTNAME]&&(n[e.FONTNAME]=t)}if(r.fontWeight!==s){const a=r.fontWeight.toLowerCase();switch(a){case"bold":case"bolder":n[e.BOLD]=t.ACTIVE}}if(r.fontStyle!==s){const a=r.fontStyle.toLowerCase();switch(a){case"italic":case"oblique":n[e.ITALIC]=t.ACTIVE}}if(r.textDecoration!==s){const a=r.textDecoration.toLowerCase();-1!==a.indexOf("underline")&&(n[e.UNDERLINE]=t.ACTIVE),-1!==a.indexOf("line-through")&&(n[e.STRIKETHROUGH]=t.ACTIVE)}if(r.color!==s){const t=r.color;t.length>0&&null===n[e.FORECOLOR]&&(n[e.FORECOLOR]=t)}if(r.backgroundColor!==s){const t=r.backgroundColor;t.length>0&&null===n[e.BACKCOLOR]&&(n[e.BACKCOLOR]=t)}if(r.verticalAlign!==s){const a=r.verticalAlign.toLowerCase();switch(a){case"super":n[e.SUPERSCRIPT]=t.ACTIVE;break;case"sub":n[e.SUBSCRIPT]=t.ACTIVE}}if(r.textAlign!==s){const a=r.textAlign.toLowerCase();switch(a){case"left":n[e.JUSTIFYLEFT]=t.ACTIVE;break;case"center":n[e.JUSTIFYCENTER]=t.ACTIVE;break;case"right":n[e.JUSTIFYRIGHT]=t.ACTIVE;break;case"justify":n[e.JUSTIFYFULL]=t.ACTIVE}}}a=a.parentNode}l.selection&&(f=l.selection.createRange());return n},this.execCommand=u,this.canExecCommand=m,this.value=function(t){if(t===s)return function(){let t=l.body.innerHTML;return t=t.replace(/(<\/?)p\b/gi,"$1div").replace(/(<\/?)em\b/gi,"$1i").replace(/(<\/?)strong\b/gi,"$1b").replace(/(<\/?)del\b/gi,"$1s")}();p(t)},this.getSelectedText=C,this.insertText=function(t,n){if(d.getSelection){const e=l.createTextNode(t),n=d.getSelection();n.deleteFromDocument(),n.getRangeAt(0).insertNode(e)}else l.selection.createRange().text=t;n?u(e.REMOVEFORMAT):y()},this.setFocus=y,function(t){const e=`<!DOCTYPE html><html><head><meta charset="UTF-8" /><style type="text/css">${i}</style><script type="text/javascript" src="${o}" async><\/script></head><body></body></html>`;l.designMode="on",n=e,l.open(),l.write(n),l.close(),p(t);var n}(a)}}();return r.fn.extend({cazary:function(r){const p=27,h={separator:"",fontname:"Font",fontsize:"Size",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",removeformat:"Remove Format",forecolor:"Foreground Color",backcolor:"Background Color",superscript:"Superscript",subscript:"Subscript",justifyleft:"Justify Left",justifycenter:"Justify Center",justifyright:"Justify Right",justifyfull:"Justify Full",indent:"Indent",outdent:"Outdent",insertorderedlist:"Ordered List",insertunorderedlist:"Unordered List",matheditor:"Math Editor",inserthorizontalrule:"Horizontal Rule",insertimage:"Insert Image",createlink:"Insert Link",unlink:"Unlink",undo:"Undo",redo:"Redo",source:"Show Source"},C={1:"Size 1",2:"Size 2",3:"Size 3",4:"Size 4",5:"Size 5",6:"Size 6",7:"Size 7"},y={MINIMAL:["bold italic underline",n&&"math"==n.trim().toLowerCase()?"insertorderedlist insertunorderedlist matheditor":"insertorderedlist insertunorderedlist"],STANDARD:["fontname fontsize","bold italic underline strikethrough removeformat | forecolor backcolor | superscript subscript","source"],FULL:["fontname fontsize","bold italic underline strikethrough removeformat | forecolor backcolor | superscript subscript","justifyleft justifycenter justifyright justifyfull | indent outdent | insertorderedlist insertunorderedlist","inserthorizontalrule insertimage createlink unlink","undo redo","source"]};return r(function(t){t(o).on("click",function(){g()}).on("keydown",function(t){t.keyCode===p&&g()})}),function(n){function T(t,e){(function(t){return new Promise(function(e){setTimeout(function(){const n=r(t);e(n)},1e3)})})(t).then(function(t){e(t)}).catch(function(t){console.error("An error occurred:",t)})}return n=r.extend({mode:"rte",style:"body{margin:0px;padding:8px;word-wrap:break-word;}p{margin:0px;padding:0px;}.auth-mathfield-holder  {-webkit-user-modify: read-only !important;max-width: 100%;padding: 0;overflow-y: hidden;}math-field {border-width: 0px;background: transparent;overflow: hidden;color: inherit;max-width: 300px;}span.auth-mathfield-holder {display: inline-flex;}math-field::part(content){overflow-x: auto;}math-field::part(menu-toggle){display: flex !important;}",mathLiveScript:"./js/math-live.js",fontnames:["sans-serif","serif","cursive","fantasy","monospace","Arial","Arial Black","Comic Sans MS","Courier New","Narrow","Garamond","Georgia","Impact","Tahoma","Times New Roman","Trebuchet MS","Verdana"],colors:[["#ffffff","#ffcccc","#ffcc99","#ffff99","#ffffcc","#99ff99","#99ffff","#ccffff","#ccccff","#ffccff"],["#cccccc","#ff6666","#ff9966","#ffff66","#ffff33","#66ff99","#33ffff","#66ffff","#9999ff","#ff99ff"],["#bbbbbb","#ff0000","#ff9900","#ffcc66","#ffff00","#33ff33","#66cccc","#33ccff","#6666cc","#cc66cc"],["#999999","#cc0000","#ff6600","#ffcc33","#ffcc00","#33cc00","#00cccc","#3366ff","#6633ff","#cc33cc"],["#666666","#990000","#cc6600","#cc9933","#999900","#009900","#339999","#3333ff","#6600cc","#993399"],["#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366"],["#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]],commands:"STANDARD"},n),this.each(function(){const b=parseInt(1e4*Math.random());T(this,function(T){const $=r('<div class="cazary"><iframe class="cazary-edit" src="javascript:" style="display:none;"></iframe></div>').css({width:T.width()});$.prepend(function(t){"string"==typeof t&&(t=y[t]!==s?y[t]:[t]);const n=r("<div />").addClass("cazary-commands-wrapper");return r.each(t,function(){const t=r("<ul />").addClass("cazary-commands-list"),a=this.toLowerCase().split(" ");r.each(a,function(){let n=this.toString();if("|"===n&&(n="separator"),h[n]===s)return;const a=d(h[n]),i=`cazary-command-${n}`,o=r("<li />").attr({unselectable:"on",title:a}).addClass(i).text(a);"matheditor"===n?(r("<span />").addClass("icon-Root_a"),e=!0,o.on("click",function(t){const e=r(t.target).parents(".cazary").find("iframe")[0].contentDocument;var n=r(e.body).find(".auth-mathfield-holder").length+1;e.execCommand("insertHTML",!1,"<span class='temp-math-holder'><span  class='auth-mathfield-holder' data-extract='"+n+"'><math-field class='mathFieldEq' id='mathEq"+n+"'></math-field></span></span>"),setTimeout(function(){let t=e.document.getElementById("mathEq"+n);r(t).on("input",f)},1e3)})):(e=!1,o.on("click",function(){executeCommand(n)})),t.append(o)}),n.append(t)}),n}(n.commands));const v=$.find(".cazary-edit").css({height:"100%"}),A=$.find("ul.cazary-commands-list li.cazary-command-source"),I=$.find("ul.cazary-commands-list li:not(.cazary-command-source)");T.hide().before($).insertAfter(v).addClass("cazary-source");let E=n.style,L=n.mathLiveScript,O=T.attr("placeholder");O!==s&&(E+=`body.empty:before{position:fixed;color:#888;content:'${O=O.replace("'","\\'")}';}`);const M=new m(v.get(0),T.val(),E,L);$$orginal=M,t.push(r('.customClass[data-type="identify-the-clip"] textarea.cazary-source').eq(t.length)),r('.customClass[data-type="identify-the-clip"] textarea.cazary-source').eq(t.length-1).parents('.customClass[data-type="identify-the-clip"]').find(".keyboard-parent .keys").attr("data-SLA_RTE_orderNo",t.length),M.SLA_RTE_orderNo=t.length,r(M.contentDocument).find("body").css("font-family","'Roboto-Regular', Helvetica, Arial, Verdana, Tahoma, sans-serif;word-break: break-word;");const N=[M.COMMAND.BOLD,M.COMMAND.ITALIC,M.COMMAND.UNDERLINE,M.COMMAND.STRIKETHROUGH,M.COMMAND.REMOVEFORMAT,M.COMMAND.SUPERSCRIPT,M.COMMAND.SUBSCRIPT,M.COMMAND.JUSTIFYLEFT,M.COMMAND.JUSTIFYCENTER,M.COMMAND.JUSTIFYRIGHT,M.COMMAND.JUSTIFYFULL,M.COMMAND.INDENT,M.COMMAND.OUTDENT,M.COMMAND.ORDEREDLIST,M.COMMAND.UNORDEREDLIST,M.COMMAND.INSERTHORIZONTALRULE,M.COMMAND.UNLINK,M.COMMAND.UNDO,M.COMMAND.REDO],R=[M.COMMAND.FONTNAME,M.COMMAND.FONTSIZE,M.COMMAND.FORECOLOR,M.COMMAND.BACKCOLOR,M.COMMAND.INSERTIMAGE,M.COMMAND.CREATELINK];if("html"===n.mode?x():S(),T.parents(".identifyTheClipComponent").attr("scorm-saved-ans")==s&&T.parents(".identifyTheClipComponent").attr("data-pretext")&&T.parents(".identifyTheClipComponent").attr("scorm-saved-ans",T.parents(".identifyTheClipComponent").attr("data-pretext")),T.parents(".identifyTheClipComponent").attr("scorm-saved-ans")){let t=T.parents(".identifyTheClipComponent").attr("scorm-saved-ans");M.value(t),r(M.contentDocument).find("body").html(t),T.html(t),setTimeout(function(){r(M.value()).find(".auth-mathfield-holder").each(function(t,e){let n=r(e).attr("data-equation-latex"),a=r(e).find("math-field").attr("id"),s=$$orginal.contentWindow.document.getElementById(a);s.setValue(n),i.mathVirtualKeyboard.targetOrigin="*",s.virtualKeyboardTargetOrigin="*",s.mathModeSpace="\\:"})},500)}function w(t,e){g(),M.execCommand(t,e),D()}function S(){T.hide(),v.css("display",""),I.removeClass("cazary-disabled"),A.removeClass("cazary-active"),D()}function x(){const t=M.value();T.val(t),v.hide(),T.css("display",""),I.addClass("cazary-disabled"),A.addClass("cazary-active")}function k(){return A.hasClass("cazary-active")}function D(){const t=M.getCurrentStatus();c();for(const e in t){let n=t[e];const a=$.find(`.cazary-command-${e}`);if(e!==M.COMMAND.FONTNAME)if(e!==M.COMMAND.FONTSIZE)if(e!==M.COMMAND.FORECOLOR&&e!==M.COMMAND.BACKCOLOR)n===M.STATUS.ACTIVE?a.addClass("cazary-active"):a.removeClass("cazary-active"),n===M.STATUS.DISABLED?a.addClass("cazary-disabled"):a.removeClass("cazary-disabled");else{const t=null===n?"":n;$.find(`.cazary-command-${e}`).css("background-color",t)}else{let t=n;null===t?(n="",t=a.attr("title")):t=d(C[t]),a.text(t)}else{let t=n;null===t&&(n="",t=a.attr("title")),a.css({"font-family":n}).text(t)}}}function z(){k()?T.trigger("focus"):M.setFocus()}function F(){const t=r(M.contentDocument.body);""===t.html()||"<br>"==t.html()?t.addClass("empty"):t.removeClass("empty")}T.on("change",function(){const t=r(this).val();M.value(t),F()}),r(M.contentDocument).on("select",function(){D()}).on("mouseup",function(){g(),D()}).on("keydown",function(t){t.keyCode===p&&g()}).on("input",function(t){let e=T.parents(".identifyTheClipComponent").find(".cazary iframe").contents().find("body").text();e.length>5e3&&(e=e.substring(0,5e3),M.value(e),T.val(e),T.parents(".identifyTheClipComponent").find(".cazary iframe").contents().find("body").attr("style","font-family:'Roboto-Regular', Helvetica, Arial, Verdana, Tahoma, sans-serif;word-break: break-word;")),i.setTimeout(function(){D(),F(),T.val(M.value()),T.parents(".identifyTheClipComponent").attr("scorm-saved-ans",M.value()),a(T,!0);const t=new Event("input",{bubbles:!0});T[0].dispatchEvent(t)},100)}),r(M.contentWindow).on("focus",function(){g(),D(),T.trigger("click"),!0,r(".cazary-command-matheditor").removeClass("disableMathEditorIcon"),r(".cursorNotAllowedInITC").addClass("cusorAllowedInRTEITC"),r(".cursorNotAllowedInITC #equation").addClass("disableLinkIconRTEITC")}).on("blur",function(){T.val(M.value()),T.trigger("blur"),e?r(".cazary-command-matheditor").removeClass("disableMathEditorIcon"):r(".cazary-command-matheditor").addClass("disableMathEditorIcon"),setTimeout(()=>{r(".cursorNotAllowedInITC").removeClass("cusorAllowedInRTEITC"),r(".cursorNotAllowedInITC #equation").removeClass("disableLinkIconRTEITC")},100)}),$.on("click","ul.cazary-commands-list li",function(t){r(this).hasClass("cazary-disabled")&&(t.stopImmediatePropagation(),z())}),r(o).off("click",".key_button").on("click",".key__button",function(t){if(r(this).parents(".keys").attr("data-SLA_RTE_orderNo")&&Number(r(this).parents(".keys").attr("data-SLA_RTE_orderNo"))==M.SLA_RTE_orderNo&&r(t.target).parents('.customClass[data-type="identify-the-clip"]').eq(0).find(".cazary iframe").length){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let e=r(t.target).parents('.customClass[data-type="identify-the-clip"]').eq(0).find(".cazary iframe")[0].contentDocument;r(t.target).parents('.customClass[data-type="identify-the-clip"]').eq(0).find(".cazary iframe")[0].contentWindow.focus(),e.execCommand("insertText",!1,t.currentTarget.textContent),i.setTimeout(function(){D(),F()},10)}}),A.on("click",function(){k()?S():x(),z()}),r.each(N,function(){const t=this.toLowerCase();$.on("click",`.cazary-command-${t}`,function(){w(t)})}),r.each(R,function(){const t=this.toLowerCase();$.on("click",`.cazary-command-${t}`,function(){const e=r(this);return function(t,e,n){let a=r(".cazary-panel");if(a.length>0){const e=a.data("id"),n=a.data("command");if(g(),n===t&&e===b)return void z()}let s=!1;switch(t){case M.COMMAND.FONTNAME:a=function(t,e){const n=r("<ul />").addClass("cazary-widget-select");return r.each(e,function(){const t=this.toString(),e=r("<li />").attr({unselectable:"on",title:t}).css({"font-family":t+", Helvetica, Arial, Verdana, Tahoma, sans-serif"}).data("param",t).text(t);n.append(e)}),r("<div>").append(n)}(0,e.fontnames),s=!0;break;case M.COMMAND.FONTSIZE:a=function(t){const e=r("<ul />").addClass("cazary-widget-select");return r.each(C,function(t,n){const a=d(n),i=r("<li />").attr({unselectable:"on",title:a}).data("param",t),s=r("<font />").attr({size:t}).text(n);e.append(i.append(s))}),r("<div>").append(e)}(),s=!0;break;case M.COMMAND.FORECOLOR:case M.COMMAND.BACKCOLOR:a=function(t,e){const n=r("<div>");return r.each(e,function(){const t=r("<ul />").addClass("cazary-widget-select-color");r.each(this,function(){const e=this.toString(),n=r("<li />").attr({unselectable:"on",title:e}).css({"background-color":e}).data("param",e).text(e);t.append(n)}),n.append(t)}),n}(0,e.colors),s=!0;break;case M.COMMAND.INSERTIMAGE:a=function(t){const e=r("<div>").append(r("<form />").attr("action","#").append(r("<div />").append(r("<fieldset />").append(r("<legend />").text(d("Input image URL"))).append(r('<input type="text" />').addClass("cazary-widget-insertimage-url").attr({required:"required",placeholder:d("http://example.com/path/to/image.jpg")}))).append(r('<input type="submit" />').addClass("cazary-widget-submit").val(d("Insert")))).append(r("<fieldset />").addClass("cazary-widget-preview").append(r("<legend />").text(d("Preview"))).append(r("<img />").addClass("cazary-widget-preview-insertimage"))));return e.on("submit","form",n).on("click",".cazary-widget-submit",n).on("keydown paste",".cazary-widget-insertimage-url",function(){const t=r(this);i.setTimeout(function(){const n=t.val(),a=t.data("url_old");if(n===a)return;t.data("url_old",n);const r=e.find(".cazary-widget-preview");u(n)?(r.show(),e.find(".cazary-widget-preview-insertimage").attr("src",n)):r.hide()},10)});function n(){const n=e.find(".cazary-widget-insertimage-url"),a=n.val();return u(a)?(w(t,a),!1):(n.trigger("focus"),!1)}}(t);break;case M.COMMAND.CREATELINK:a=function(t){const e=r("<div>").append(r("<form />").attr("action","#").append(r("<div />").append(r("<fieldset />").append(r("<legend />").text(d("Input link URL or E-mail address"))).append(r('<input type="text" />').addClass("cazary-widget-createlink-url").attr({required:"required",placeholder:d("http://example.com/, someone@example.com")}))).append(r('<input type="button" />').addClass("cazary-widget-submit").val(d("Insert")))).append(r("<fieldset />").addClass("cazary-widget-preview").append(r("<legend />").text(d("Preview"))).append(r("<iframe />").addClass("cazary-widget-preview-createlink"))));return e.on("submit","form",n).on("click",".cazary-widget-submit",n).on("keydown paste",".cazary-widget-createlink-url",function(){const t=r(this);i.setTimeout(function(){const n=t.val(),a=t.data("url_old");if(n===a)return;t.data("url_old",n);const r=e.find(".cazary-widget-preview");u(n)?(r.show(),e.find(".cazary-widget-preview-createlink").attr("src",n)):r.hide()},10)});function n(){const n=e.find(".cazary-widget-createlink-url");let a=n.val();if(l(a))a=`mailto:${a}`;else if(!u(a))return n.trigger("focus"),!1;return w(t,a),!1}}(t);break;default:return null}s&&a.on("click","li",function(){const e=r(this),n=e.data("param");w(t,n)});const c=n.addClass("cazary-active").offset();c.top+=n.outerHeight(),a.addClass("cazary-panel").addClass(`cazary-panel-${t}`).data("id",b).data("command",t).css({left:`${c.left}px`,top:`${c.top}px`}).on("click",function(){return!1}).appendTo(r(o.body)).find(":text:first").trigger("focus")}(t,n,e),!1})})})})};function g(){r(".cazary-panel").each(function(){const t=r(this).data("command");r(`.cazary-command-${t}`).removeClass("cazary-active")}).remove()}}(r)}),r}),$("textarea#"+$(d[r]).attr("id")).cazary({commands:"MINIMAL"}),$(".identifyTheClipComponent").each(function(){let t=$(this).attr("cust-keyb-enabled");$(this).find("div.cazary").css("border-radius","true"==t?"8px 8px 0 0":"8px")})},200);$(".identifyTheClipComponent .customKeybord-cantsiner").on("click",function(t){setTimeout(function(){$(".customKeybord-cantsiner .keys").find(".key__button").on("click",function(t){$(t.currentTarget).parents('.customClass[data-type="identify-the-clip"]').find("textArea.ansRTE").length<1&&($(document.getSelection().anchorNode).find("textarea.longAnsTextArea").length>=1||$(document.getSelection().anchorNode).find("input").length>=1)&&l(t)})},100)});var l=function(t){document.execCommand("insertText",!1,t.currentTarget.textContent),$(t.currentTarget).parents('.customClass[data-type="identify-the-clip"]').find("div.shortAnsText").trigger("keyup"),t.preventDefault(),t.stopImmediatePropagation()},f=function(t){var e=t.target.value?t.target.value:t.value;const n=$$orginal.contentDocument?$$orginal.contentDocument.getSelection():window.editor.contentDocument.getSelection();let a;if(!n.getRangeAt||!n.rangeCount)return console.warn("No selection range found in mathFieldChange."),!1;const r=(a=n.getRangeAt(0)).startContainer,i=$(r).closest(".auth-mathfield-holder");$(i).attr("data-equation-latex",e),$($$orginal.contentDocument.body).removeClass("empty"),$(".ansRTE")[0].value=$$orginal.value(),$($$orginal.contentDocument).trigger("input")};$(".identifyTheClipComponent .showme-btn").off("click").click(function(t){t.preventDefault();var e=$(this).attr("data-showmeattr");t=t;void 0===e&&(e=$(this).attr("showmeattr")),function(t){t.preventDefault(),$form=$(t.target).parents("form"),$form.find(".submit-btn").addClass("disabled"),$form.addClass("attempted-question"),$form.addClass("submitted"),$form.find(".reset-btn").addClass("disabled"),$form.find(".showme-btn").addClass("disabled"),$form.find(".SLA-custKeybCont").addClass("btn disabled"),$inputs=$form.find("div.shortAnsText,textarea"),$inputs.each(function(e,n){n.setAttribute("disabled",!0),n.setAttribute("contenteditable",!1),$(n).removeClass("itcCorrect"),$(n).removeClass("itcIncorrect");var a=$(n).parents("form").find(".shortAnsText")[0]?$(n).parents("form").find(".shortAnsText")[0]:$(n)[0],r=$(n).parents(".cazary");if(r.length){const t=$(n).parents("form").find("iframe")[0],e=$(t.contentDocument.body);e.removeClass("empty");let r=t.contentDocument;r.body.innerHTML=$(a).attr("data-correct-answer")}$(a).attr("data-correct-answer")&&(a.value=$(a).attr("data-correct-answer"),a.innerHTML=$(a).attr("data-correct-answer")),$(n).hasClass("ansRTE")&&(r.removeClass("itcIncorrect"),r.addClass("itcCorrect disabled-rte")),$(n).addClass("itcCorrect"),c(t)}),$form.addClass("attempted-question"),$form.find(".submit-btn").css("display","")}(t)}),$(".identifyTheClipComponent .reset").off("click").click(function(t){t.preventDefault();var e=$(this).attr("data-resetattr");void 0===e&&(e=$(this).attr("resetattr")),function(t){$form=$(t.target).parents("form"),$inputs=$form.find("input.shortAnsText,textarea"),$form.find(".reset-btn").addClass("disabled"),$inputs.each(function(t,e){var n=$(e).parents("form").find(".shortAnsText")[0]?$(e).parents("form").find(".shortAnsText")[0]:$(e)[0],a=$(e).parents(".cazary");if(a.length){const t=$(e).parents("form").find("iframe")[0],n=$(t.contentDocument.body);n.addClass("empty");let a=t.contentDocument;a.body.innerHTML=""}n.value=null,n.innerHTML=""})}(t)}),$('.customClass[data-type="identify-the-clip"]').each(function(t,e){window.isActivityInprogress&&setTimeout(function(){var t=$(e).find("form");t.find(".shortAnsText").addClass("disabledInput"),t.find(".longAnsText").addClass("disabledInput"),t.find(".cazary").addClass("disabledInput")},1600)})});
/*
* EASYDROPDOWN - A Drop-down Builder for Styleable Inputs and Menus
* Version: 2.1.4
* License: Creative Commons Attribution 3.0 Unported - CC BY 3.0
* http://creativecommons.org/licenses/by/3.0/
* This software may be used freely on commercial and non-commercial projects with attribution to the author/copyright holder.
* Author: Patrick Kunka
* Copyright 2013 Patrick Kunka, All Rights Reserved
*/

(function(d){function e(){this.isField=!0;this.keyboardMode=this.hasLabel=this.cutOff=this.disabled=this.inFocus=this.down=!1;this.nativeTouch=!0;this.wrapperClass="selectbox";this.onChange=null}e.prototype={constructor:e,instances:{},init:function(a,c){var b=this;d.extend(b,c);b.$select=d(a);b.id=a.id;b.options=[];b.$options=b.$select.find("option");b.isTouch="ontouchend"in document;b.$select.removeClass(b.wrapperClass+" dropdown");b.$select.is(":disabled")&&(b.disabled=!0);b.$options.length&&(b.$options.each(function(a){var c=
d(this);c.is(":selected")&&(b.selected={index:a,title:c.text()},b.focusIndex=a);c.hasClass("label")&&0==a?(b.hasLabel=!0,b.label=c.text(),c.attr("value","")):b.options.push({domNode:c[0],title:c.text(),value:c.val(),selected:c.is(":selected")})}),b.selected||(b.selected={index:0,title:b.$options.eq(0).text()},b.focusIndex=0),b.render())},render:function(){var a=this;a.$container=a.$select.wrap('<div class="'+a.wrapperClass+(a.isTouch&&a.nativeTouch?" touch":"")+(a.disabled?" disabled":"")+'" unselectable="on"><span class="old"></span></div>').parent().parent();
a.$active=d('<span class="selected">'+a.selected.title+"</span>").appendTo(a.$container);a.$carat=d('<span class="carat"><i class="icon-Down"></i></span>').appendTo(a.$container);a.$scrollWrapper=d("<div><ul></ul></div>").appendTo(a.$container);a.$dropDown=a.$scrollWrapper.find("ul");a.$form=a.$container.closest("form");d.each(a.options,function(){var x=d(this.domNode).attr("class")?d(this.domNode).attr("class"):"",y=d(this.domNode).attr("style")?d(this.domNode).attr("style"):"",z=this.selected?' class="active'+x+'"':' class="'+x+'"';z=z+" style='"+y+"'";
// original --> // a.$dropDown.append("<li"+z+">"+this.title+"</li>");

var valueText = this.title.replace(/>/g, "&gt;").replace(/</g, "&lt;");
// a.$dropDown.append("<li"+z+">"+valueText+"</li>");

var parser = new DOMParser(); 
var el = parser.parseFromString("<li"+z+">"+valueText+"</li>", "text/html");
var elem=$(el).contents()[0].childNodes[1].childNodes[0];
a.$dropDown.append(elem);

});a.$items=a.$dropDown.find("li");a.cutOff&&a.$items.length>a.cutOff&&a.$container.addClass("scrollable");
a.getMaxHeight();a.isTouch&&a.nativeTouch?a.bindTouchHandlers():a.bindHandlers()},getMaxHeight:function(){for(i=this.maxHeight=0;i<this.$items.length;i++){var a=this.$items.eq(i);this.maxHeight+=a.outerHeight();if(this.cutOff==i+1)break}},bindTouchHandlers:function(){var a=this;a.$container.on("click.easyDropDown",function(){});a.$select.on({change:function(){var c=d(this).find("option:selected"),b=c.text(),c=c.val();a.$active.text(b);"function"===typeof a.onChange&&a.onChange.call(a.$select[0],
{title:b,value:c})},focus:function(){a.$container.addClass("focus")},blur:function(){a.$container.removeClass("focus")}})},bindHandlers:function(){var a=this;a.query="";a.$container.on({"click.easyDropDown":function(){a.down||a.disabled?a.close():a.open()},"mousemove.easyDropDown":function(){a.keyboardMode&&(a.keyboardMode=!1)}});d("body").on("click.easyDropDown."+a.id,function(c){c=d(c.target);var b=a.wrapperClass.split(" ").join(".");!c.closest("."+b).length&&a.down&&a.close()});a.$items.on({"click.easyDropDown":function(){var c=
d(this).index();a.select(c);},"mouseover.easyDropDown":function(){if(!a.keyboardMode){var c=d(this);c.addClass("focus").siblings().removeClass("focus");a.focusIndex=c.index()}},"mouseout.easyDropDown":function(){a.keyboardMode||d(this).removeClass("focus")}});a.$select.on({"focus.easyDropDown":function(){a.$container.addClass("focus");a.inFocus=!0},"blur.easyDropDown":function(){a.$container.removeClass("focus");a.inFocus=!1},"keydown.easyDropDown":function(c){if(a.inFocus){a.keyboardMode=
!0;var b=c.keyCode;if(38==b||40==b||32==b)c.preventDefault(),38==b?(a.focusIndex--,a.focusIndex=0>a.focusIndex?a.$items.length-1:a.focusIndex):40==b&&(a.focusIndex++,a.focusIndex=a.focusIndex>a.$items.length-1?0:a.focusIndex),a.down||a.open(),a.$items.removeClass("focus").eq(a.focusIndex).addClass("focus"),a.cutOff&&a.scrollToView(),a.query="";if(a.down)if(9==b||27==b)a.close();else{if(13==b)return c.preventDefault(),a.select(a.focusIndex),a.close(),!1;if(8==b)return c.preventDefault(),a.query=a.query.slice(0,
-1),a.search(),clearTimeout(a.resetQuery),!1;38!=b&&40!=b&&(c=String.fromCharCode(b),a.query+=c,a.search(),clearTimeout(a.resetQuery))}}},"keyup.easyDropDown":function(){a.resetQuery=setTimeout(function(){a.query=""},1200)}});a.$dropDown.on("scroll.easyDropDown",function(c){a.$dropDown[0].scrollTop>=a.$dropDown[0].scrollHeight-a.maxHeight?a.$container.addClass("bottom"):a.$container.removeClass("bottom")});if(a.$form.length)a.$form.on("reset.easyDropDown",function(){a.$active.text(a.hasLabel?a.label:
a.options[0].title)})},unbindHandlers:function(){this.$container.add(this.$select).add(this.$items).add(this.$form).add(this.$dropDown).off(".easyDropDown");d("body").off("."+this.id)},open:function(){var a=window.scrollY||document.documentElement.scrollTop,c=window.scrollX||document.documentElement.scrollLeft,b=this.notInViewport(a);this.closeAll();this.getMaxHeight();window.scrollTo(c,a+b);this.$container.addClass("open");this.$scrollWrapper.css("height",this.maxHeight+"px");
this.down=!0},close:function(){this.$container.removeClass("open");this.$scrollWrapper.css("height","0px");this.focusIndex=this.selected.index;this.query="";this.down=!1},closeAll:function(){var a=Object.getPrototypeOf(this).instances,c;for(c in a)a[c].close()},select:function(a){"string"===typeof a&&(a=this.$select.find("option[value="+a+"]").index()-1);var c=this.options[a],b=this.hasLabel?a+1:a;this.$items.removeClass("active").eq(a).addClass("active");this.$active.text(c.title);this.$select.find("option").removeAttr("selected").eq(b).prop("selected",
!0).parent().trigger("change");this.selected={index:a,title:c.title};this.focusIndex=i;"function"===typeof this.onChange&&this.onChange.call(this.$select[0],{title:c.title,value:c.value})}
,onlySelect:function(a){"string"==typeof a&&(a=this.$select.find("option[value="+a+"]").index()-1);var c=this.options[a],b=this.hasLabel?a+1:a;this.$items.removeClass("active").eq(a).addClass("active");this.$active.text(c.title);this.$select.find("option").removeAttr("selected").eq(b).prop("selected",!0);this.selected={index:a,title:c.title};this.focusIndex=i},search:function(){var a=this,c=function(b){a.focusIndex=b;a.$items.removeClass("focus").eq(a.focusIndex).addClass("focus");a.scrollToView()};for(i=0;i<a.options.length;i++){var b=a.options[i].title.toUpperCase();if(0==b.indexOf(a.query)){c(i);return}}for(i=0;i<a.options.length;i++)if(b=a.options[i].title.toUpperCase(),
-1<b.indexOf(a.query)){c(i);break}},scrollToView:function(){if(this.focusIndex>=this.cutOff){var a=this.$items.eq(this.focusIndex).outerHeight()*(this.focusIndex+1)-this.maxHeight;this.$dropDown.scrollTop(a)}},notInViewport:function(a){var c=a+(window.innerHeight||document.documentElement.clientHeight),b=this.$dropDown.offset().top+this.maxHeight;return b>=a&&b<=c?0:b-c+5},destroy:function(){this.unbindHandlers();this.$select.unwrap().siblings().remove();this.$select.unwrap();delete Object.getPrototypeOf(this).instances[this.$select[0].id]},
disable:function(){this.disabled=!0;this.$container.addClass("disabled");this.$select.attr("disabled",!0);this.down||this.close()},enable:function(){this.disabled=!1;this.$container.removeClass("disabled");this.$select.attr("disabled",!1)}};var f=function(a,c){a.id=a.id?a.id:"EasyDropDown"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6).toUpperCase();var b=new e;b.instances[a.id]||(b.instances[a.id]=b,b.init(a,c))};d.fn.easyDropDown=function(){var a=arguments,c=[],b;b=this.each(function(){if(a&&
"string"===typeof a[0]){var b=e.prototype.instances[this.id][a[0]](a[1],a[2]);b&&c.push(b)}else f(this,a[0])});return c.length?1<c.length?c:c[0]:b};d(function(){"function"!==typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===typeof"test".__proto__?function(a){return a.__proto__}:function(a){return a.constructor.prototype});d("select.selectbox").each(function(){var a=d(this).attr("data-settings");settings=a?d.parseJSON(a):{};f(this,settings)})})})(jQuery);
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright 2015 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});
/**
 * @license
 * Video.js 7.13.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojs=t()}(this,function(){"use strict";var u="7.13.1",e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}for(var i,_="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},n="undefined"!=typeof e?e:"undefined"!=typeof window?window:{},r="undefined"!=typeof document?document:(r=n["__GLOBAL_DOCUMENT_CACHE@4"])||(n["__GLOBAL_DOCUMENT_CACHE@4"]={}),d=r,l={prefixed:!0},a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],s=a[0],o=0;o<a.length;o++)if(a[o][1]in d){i=a[o];break}if(i){for(var c=0;c<i.length;c++)l[s[c]]=i[c];l.prefixed=i[0]!==s[0]}var h=[],p=function(a,s){return function(e,t,i){var n,r=s.levels[t],t=new RegExp("^("+r+")$");"log"!==e&&i.unshift(e.toUpperCase()+":"),i.unshift(a+":"),h&&(h.push([].concat(i)),n=h.length-1e3,h.splice(0,0<n?n:0)),!_.console||(n=!(n=_.console[e])&&"debug"===e?_.console.info||_.console.log:n)&&r&&t.test(e)&&n[Array.isArray(i)?"apply":"call"](_.console,i)}};var f=function t(i){function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a("log",r,t)}var r="info",a=p(i,n);return n.createLogger=function(e){return t(i+": "+e)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(n.history=function(){return h?[].concat(h):[]}).filter=function(t){return(h||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},n.history.clear=function(){h&&(h.length=0)},n.history.disable=function(){null!==h&&(h.length=0,h=null)},n.history.enable=function(){null===h&&(h=[])},n.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return a("error",r,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return a("warn",r,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return a("debug",r,t)},n}("VIDEOJS"),m=f.createLogger,g=t(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.apply(this,arguments)}e.exports=t}),y=Object.prototype.toString,v=function(e){return S(e)?Object.keys(e):[]};function b(t,i){v(t).forEach(function(e){return i(t[e],e)})}function T(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?g.apply(void 0,[i].concat(t)):(t.forEach(function(e){e&&b(e,function(e,t){i[t]=e})}),i)}function S(e){return!!e&&"object"==typeof e}function E(e){return S(e)&&"[object Object]"===y.call(e)&&e.constructor===Object}function k(e,t){if(!e||!t)return"";if("function"!=typeof _.getComputedStyle)return"";var i;try{i=_.getComputedStyle(e)}catch(e){return""}return i?i.getPropertyValue(t)||i[t]:""}var C=_.navigator&&_.navigator.userAgent||"",w=/AppleWebKit\/([\d.]+)/i.exec(C),I=w?parseFloat(w.pop()):null,x=/iPod/i.test(C),A=(zt=C.match(/OS (\d+)_/i))&&zt[1]?zt[1]:null,P=/Android/i.test(C),L=function(){var e=C.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),D=P&&L<5&&I<537,O=/Firefox/i.test(C),R=/Edg/i.test(C),M=!R&&(/Chrome/i.test(C)||/CriOS/i.test(C)),N=(ii=C.match(/(Chrome|CriOS)\/(\d+)/))&&ii[2]?parseFloat(ii[2]):null,U=ni=!(ni=(ni=/MSIE\s(\d+)\.\d/.exec(C))&&parseFloat(ni[1]))&&/Trident\/7.0/i.test(C)&&/rv:11.0/.test(C)?11:ni,B=/Safari/i.test(C)&&!M&&!P&&!R,F=/Windows/i.test(C),j=Boolean(K()&&("ontouchstart"in _||_.navigator.maxTouchPoints||_.DocumentTouch&&_.document instanceof _.DocumentTouch)),H=/iPad/i.test(C)||B&&j&&!/iPhone/i.test(C),q=/iPhone/i.test(C)&&!H,V=q||H||x,W=(B||V)&&!M,z=Object.freeze({__proto__:null,IS_IPOD:x,IOS_VERSION:A,IS_ANDROID:P,ANDROID_VERSION:L,IS_NATIVE_ANDROID:D,IS_FIREFOX:O,IS_EDGE:R,IS_CHROME:M,CHROME_VERSION:N,IE_VERSION:U,IS_SAFARI:B,IS_WINDOWS:F,TOUCH_ENABLED:j,IS_IPAD:H,IS_IPHONE:q,IS_IOS:V,IS_ANY_SAFARI:W});function G(e){return"string"==typeof e&&Boolean(e.trim())}function X(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function K(){return d===_.document}function Y(e){return S(e)&&1===e.nodeType}function Q(){try{return _.parent!==_.self}catch(e){return!0}}function $(i){return function(e,t){if(!G(e))return d[i](null);t=Y(t=G(t)?d.querySelector(t):t)?t:d;return t[i]&&t[i](e)}}function J(e,i,t,n){void 0===i&&(i={}),void 0===t&&(t={});var r=d.createElement(e=void 0===e?"div":e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(f.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),r.setAttribute(e,t)):"textContent"===e?Z(r,t):r[e]===t&&"tabIndex"!==e||(r[e]=t)}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),n&&ve(r,n),r}function Z(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function ee(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function te(e,t){return X(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function ie(e,t){return e.classList?e.classList.add(t):te(e,t)||(e.className=(e.className+" "+t).trim()),e}function ne(e,t){return e.classList?e.classList.remove(t):(X(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function re(e,t,i){var n=te(e,t);if((i="boolean"!=typeof(i="function"==typeof i?i(e,t):i)?!n:i)!==n)return(i?ie:ne)(e,t),e}function ae(i,n){Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];null===t||"undefined"==typeof t||!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})}function se(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,r=n.length-1;0<=r;r--){var a=n[r].name,s=n[r].value;"boolean"!=typeof e[a]&&-1===i.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function oe(e,t){return e.getAttribute(t)}function ue(e,t,i){e.setAttribute(t,i)}function le(e,t){e.removeAttribute(t)}function ce(){d.body.focus(),d.onselectstart=function(){return!1}}function de(){d.onselectstart=function(){return!0}}function he(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(k(e,"height"))),i.width||(i.width=parseFloat(k(e,"width"))),i}}function pe(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,i=e.offsetHeight,n=0,r=0;e.offsetParent&&e!==d[l.fullscreenElement];)n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:n,top:r,width:t,height:i}}function fe(e,t){var i={x:0,y:0};if(V)for(var n=e;n&&"html"!==n.nodeName.toLowerCase();){var r,a=k(n,"transform");/^matrix/.test(a)?(r=a.slice(7,-1).split(/,\s/).map(Number),i.x+=r[4],i.y+=r[5]):/^matrix3d/.test(a)&&(a=a.slice(9,-1).split(/,\s/).map(Number),i.x+=a[12],i.y+=a[13]),n=n.parentNode}var s={},o=pe(t.target),u=pe(e),l=u.width,c=u.height,e=t.offsetY-(u.top-o.top),o=t.offsetX-(u.left-o.left);return t.changedTouches&&(o=t.changedTouches[0].pageX-u.left,e=t.changedTouches[0].pageY+u.top,V&&(o-=i.x,e-=i.y)),s.y=1-Math.max(0,Math.min(1,e/c)),s.x=Math.max(0,Math.min(1,o/l)),s}function me(e){return S(e)&&3===e.nodeType}function ge(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function ye(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return Y(e="function"==typeof e?e():e)||me(e)?e:"string"==typeof e&&/\S/.test(e)?d.createTextNode(e):void 0}).filter(function(e){return e})}function ve(t,e){return ye(e).forEach(function(e){return t.appendChild(e)}),t}function _e(e,t){return ve(ge(e),t)}function be(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var Te,Se=$("querySelector"),Ee=$("querySelectorAll"),ke=Object.freeze({__proto__:null,isReal:K,isEl:Y,isInFrame:Q,createEl:J,textContent:Z,prependTo:ee,hasClass:te,addClass:ie,removeClass:ne,toggleClass:re,setAttributes:ae,getAttributes:se,getAttribute:oe,setAttribute:ue,removeAttribute:le,blockTextSelection:ce,unblockTextSelection:de,getBoundingClientRect:he,findPosition:pe,getPointerPosition:fe,isTextNode:me,emptyEl:ge,normalizeContent:ye,appendContent:ve,insertContent:_e,isSingleLeftClick:be,$:Se,$$:Ee}),Ce=!1,we=function(){if(!1!==Te.options.autoSetup){var e=Array.prototype.slice.call(d.getElementsByTagName("video")),t=Array.prototype.slice.call(d.getElementsByTagName("audio")),i=Array.prototype.slice.call(d.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&0<n.length)for(var r=0,a=n.length;r<a;r++){var s=n[r];if(!s||!s.getAttribute){Ie(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&Te(s)}else Ce||Ie(1)}};function Ie(e,t){K()&&(t&&(Te=t),_.setTimeout(we,e))}function xe(){Ce=!0,_.removeEventListener("load",xe)}K()&&("complete"===d.readyState?xe():_.addEventListener("load",xe));function Ae(e){var t=d.createElement("style");return t.className=e,t}function Pe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}var Le=3;_.WeakMap||(rn=function(){function e(){this.vdata="vdata"+Math.floor(_.performance&&_.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var i=e[this.vdata]||Le++;return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];f("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var De,Oe=new(_.WeakMap?WeakMap:rn);function Re(e,t){var i;Oe.has(e)&&(0===(i=Oe.get(e)).handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&Oe.delete(e))}function Me(t,i,e,n){e.forEach(function(e){t(i,e,n)})}function Ne(e){if(e.fixed_)return e;function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var n,r,a,s=e||_.event;for(n in e={},s)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&("returnValue"===n&&s.preventDefault||(e[n]=s[n]));e.target||(e.target=e.srcElement||d),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){s.preventDefault&&s.preventDefault(),e.returnValue=!1,s.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),e.cancelBubble=!0,s.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX&&(r=d.documentElement,a=d.body,e.pageX=e.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var Ue=function(){if("boolean"!=typeof De){De=!1;try{var e=Object.defineProperty({},"passive",{get:function(){De=!0}});_.addEventListener("test",null,e),_.removeEventListener("test",null,e)}catch(e){}}return De},Be=["touchstart","touchmove"];function Fe(s,e,t){if(Array.isArray(e))return Me(Fe,s,e,t);Oe.has(s)||Oe.set(s,{});var o=Oe.get(s);o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=Le++),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,t){if(!o.disabled){e=Ne(e);var i=o.handlers[e.type];if(i)for(var n=i.slice(0),r=0,a=n.length;r<a&&!e.isImmediatePropagationStopped();r++)try{n[r].call(s,e,t)}catch(e){f.error(e)}}}),1===o.handlers[e].length&&(s.addEventListener?(t=!1,Ue()&&-1<Be.indexOf(e)&&(t={passive:!0}),s.addEventListener(e,o.dispatcher,t)):s.attachEvent&&s.attachEvent("on"+e,o.dispatcher))}function je(e,t,i){if(Oe.has(e)){var n=Oe.get(e);if(n.handlers){if(Array.isArray(t))return Me(je,e,t,i);var r=function(e,t){n.handlers[t]=[],Re(e,t)};if(void 0!==t){var a=n.handlers[t];if(a)if(i){if(i.guid)for(var s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);Re(e,t)}else r(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(e,o)}}}function He(e,t,i){var n=Oe.has(e)?Oe.get(e):{},r=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Ne(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles?He.call(null,r,t,i):!r&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(Oe.has(t.target)||Oe.set(t.target,{}),r=Oe.get(t.target),t.target[t.type]&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1)),!t.defaultPrevented}function qe(e,t,i){if(Array.isArray(t))return Me(qe,e,t,i);function n(){je(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||Le++,Fe(e,t,n)}function Ve(e,t,i){function n(){je(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||Le++,Fe(e,t,n)}function We(e,t,i){return t.guid||(t.guid=Le++),(e=t.bind(e)).guid=i?i+"_"+t.guid:t.guid,e}function ze(t,i){var n=_.performance.now();return function(){var e=_.performance.now();i<=e-n&&(t.apply(void 0,arguments),n=e)}}function Ge(n,r,a,s){var o;function e(){var e=this,t=arguments,i=function(){i=o=null,a||n.apply(e,t)};!o&&a&&n.apply(e,t),s.clearTimeout(o),o=s.setTimeout(i,r)}return void 0===s&&(s=_),e.cancel=function(){s.clearTimeout(o),o=null},e}function Xe(){}var Ke,Ye=Object.freeze({__proto__:null,fixEvent:Ne,on:Fe,off:je,trigger:He,one:qe,any:Ve});Xe.prototype.allowedEvents_={},Xe.prototype.addEventListener=Xe.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},Fe(this,e,t),this.addEventListener=i},Xe.prototype.removeEventListener=Xe.prototype.off=function(e,t){je(this,e,t)},Xe.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},qe(this,e,t),this.addEventListener=i},Xe.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},Ve(this,e,t),this.addEventListener=i},Xe.prototype.dispatchEvent=Xe.prototype.trigger=function(e){var t=e.type||e;e=Ne(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),He(this,e)},Xe.prototype.queueTrigger=function(e){var t=this;Ke=Ke||new Map;var i=e.type||e,n=Ke.get(this);n||(n=new Map,Ke.set(this,n));var r=n.get(i);n.delete(i),_.clearTimeout(r);r=_.setTimeout(function(){0===n.size&&(n=null,Ke.delete(t)),t.trigger(e)},0);n.set(i,r)};function Qe(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_||(e.constructor&&e.constructor.name?e.constructor.name:typeof e)}function $e(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function Je(e,t,i){if(!e||!e.nodeName&&!nt(e))throw new Error("Invalid target for "+Qe(t)+"#"+i+"; must be a DOM node or evented object.")}function Ze(e,t,i){if(!$e(e))throw new Error("Invalid event type for "+Qe(t)+"#"+i+"; must be a non-empty string or array.")}function et(e,t,i){if("function"!=typeof e)throw new Error("Invalid listener for "+Qe(t)+"#"+i+"; must be a function.")}function tt(e,t,i){var n,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_,t=a?(n=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],t[1]):(n=t[0],r=t[1],t[2]);return Je(n,e,i),Ze(r,e,i),et(t,e,i),{isTargetingSelf:a,target:n,type:r,listener:t=We(e,t)}}function it(e,t,i,n){Je(e,e,t),e.nodeName?Ye[t](e,i,n):e[t](i,n)}var nt=function(t){return t instanceof Xe||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},rt={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r,a=tt(this,i,"on"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;it(o,"on",u,l),s||((r=function(){return e.off(o,u,l)}).guid=l.guid,(s=function(){return e.off("dispose",r)}).guid=l.guid,it(this,"on","dispose",r),it(o,"on","dispose",s))},one:function(){for(var r=this,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=tt(this,t,"one"),a=n.isTargetingSelf,s=n.target,o=n.type,u=n.listener;a?it(s,"one",o,u):((a=function e(){r.off(s,o,e);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];u.apply(null,i)}).guid=u.guid,it(s,"one",o,a))},any:function(){for(var r=this,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=tt(this,t,"any"),a=n.isTargetingSelf,s=n.target,o=n.type,u=n.listener;a?it(s,"any",o,u):((a=function e(){r.off(s,o,e);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];u.apply(null,i)}).guid=u.guid,it(s,"any",o,a))},off:function(e,t,i){!e||$e(e)?je(this.eventBusEl_,e,t):(t=t,Je(e=e,this,"off"),Ze(t,this,"off"),et(i,this,"off"),i=We(this,i),this.off("dispose",i),e.nodeName?(je(e,t,i),je(e,"dispose",i)):nt(e)&&(e.off(t,i),e.off("dispose",i)))},trigger:function(e,t){Je(this.eventBusEl_,this,"trigger");var i=e&&"string"!=typeof e?e.type:e;if(!$e(i)){i="Invalid event type for "+Qe(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||f).error(i)}return He(this.eventBusEl_,e,t)}};function at(e,t){t=(t=void 0===t?{}:t).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=J("span",{className:"vjs-event-bus"});return T(e,rt),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),_.setTimeout(function(){e.eventBusEl_=null},0)}),e}var st={state:{},setState:function(e){var i,n=this;return b(e="function"==typeof e?e():e,function(e,t){n.state[t]!==e&&((i=i||{})[t]={from:n.state[t],to:e}),n.state[t]=e}),i&&nt(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function ot(e,t){return T(e,st),e.state=T({},e.state,t),"function"==typeof e.handleStateChanged&&nt(e)&&e.on("statechanged",e.handleStateChanged),e}function ut(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function lt(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function ct(){for(var i={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){e&&b(e,function(e,t){E(e)?(E(i[t])||(i[t]={}),i[t]=ct(i[t],e)):i[t]=e})}),i}var dt=_.Map||function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var i in this.map_)e.call(t,this.map_[i],i,this)},e}(),ht=_.Set||function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},e}(),pt=function(){function s(e,t,i){!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ct({},this.options_),t=this.options_=ct(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+Le++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&(at(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ot(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ht,this.setIntervalIds_=new ht,this.rafIds_=new ht,this.namedRafs_=new dt,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var e=s.prototype;return e.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Oe.has(this.el_)&&Oe.delete(this.el_),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(e){return e&&(this.options_=ct(this.options_,e)),this.options_},e.el=function(){return this.el_},e.createEl=function(e,t,i){return J(e,t,i)},e.localize=function(e,i,t){void 0===t&&(t=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],n=n&&n.split("-")[0],n=r&&r[n],t=t;return a&&a[e]?t=a[e]:n&&n[e]&&(t=n[e]),t=i?t.replace(/\{(\d+)\}/g,function(e,t){t=i[t-1];return"undefined"==typeof t?e:t}):t},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(e){return this.childIndex_[e]},e.getChild=function(e){if(e)return this.childNameIndex_[e]},e.getDescendant=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var t=t.reduce(function(e,t){return e.concat(t)},[]),n=this,r=0;r<t.length;r++)if(!(n=n.getChild(t[r]))||!n.getChild)return;return n},e.addChild=function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i=this.children_.length),"string"==typeof e){var n=lt(e),r=t.componentClass||n;t.name=n;var a=s.getComponent(r);if(!a)throw new Error("Component "+r+" does not exist");if("function"!=typeof a)return null;a=new a(this.player_||this,t)}else a=e;return a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(i,0,a),a.parentComponent_=this,"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(n=n||a.name&&lt(a.name()))&&(this.childNameIndex_[n]=a,this.childNameIndex_[ut(n)]=a),"function"==typeof a.el&&a.el()&&(n=null,this.children_[i+1]&&(this.children_[i+1].el_?n=this.children_[i+1].el_:Y(this.children_[i+1])&&(n=this.children_[i+1])),this.contentEl().insertBefore(a.el(),n)),a},e.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,i=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){i=!0,this.children_.splice(n,1);break}i&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[lt(e.name())]=null,this.childNameIndex_[ut(e.name())]=null,(t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el()))}},e.initChildren=function(){var i,t,e,n=this,r=this.options_.children;r&&(i=this.options_,t=s.getComponent("Tech"),(e=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t,e="string"==typeof e?r[t=e]||n.options_[t]||{}:(t=e.name,e);return{name:t,opts:e}}).filter(function(e){e=s.getComponent(e.opts.componentClass||lt(e.name));return e&&!t.isTech(e)}).forEach(function(e){var t=e.name,e=e.opts;!1!==(e=void 0!==i[t]?i[t]:e)&&((e=!0===e?{}:e).playerOptions=n.options_.playerOptions,(e=n.addChild(t,e))&&(n[t]=e))}))},e.buildCSSClass=function(){return""},e.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.$=function(e,t){return Se(e,t||this.contentEl())},e.$$=function(e,t){return Ee(e,t||this.contentEl())},e.hasClass=function(e){return te(this.el_,e)},e.addClass=function(e){ie(this.el_,e)},e.removeClass=function(e){ne(this.el_,e)},e.toggleClass=function(e,t){re(this.el_,e,t)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(e){return oe(this.el_,e)},e.setAttribute=function(e,t){ue(this.el_,e,t)},e.removeAttribute=function(e){le(this.el_,e)},e.width=function(e,t){return this.dimension("width",e,t)},e.height=function(e,t){return this.dimension("height",e,t)},e.dimensions=function(e,t){this.width(e,!0),this.height(t)},e.dimension=function(e,t,i){if(void 0!==t)return-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;t=this.el_.style[e],i=t.indexOf("px");return-1!==i?parseInt(t.slice(0,i),10):parseInt(this.el_["offset"+lt(e)],10)},e.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return t=k(this.el_,e),0!==(t=parseFloat(t))&&!isNaN(t)||(e="offset"+lt(e),t=this.el_[e]),t},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},e.handleKeyPress=function(e){this.handleKeyDown(e)},e.emitTapEvents=function(){var i,t=0,n=null;this.on("touchstart",function(e){1===e.touches.length&&(n={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=_.performance.now(),i=!0)}),this.on("touchmove",function(e){var t;1<e.touches.length?i=!1:n&&(t=e.touches[0].pageX-n.pageX,e=e.touches[0].pageY-n.pageY,10<Math.sqrt(t*t+e*e)&&(i=!1))});function e(){i=!1}this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(n=null)===i&&_.performance.now()-t<200&&(e.preventDefault(),this.trigger("tap"))})},e.enableTouchActivity=function(){var t,i,e;this.player()&&this.player().reportUserActivity&&(t=We(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){t(),this.clearInterval(i),i=this.setInterval(t,250)}),e=function(e){t(),this.clearInterval(i)},this.on("touchmove",t),this.on("touchend",e),this.on("touchcancel",e))},e.setTimeout=function(e,t){var i,n=this;return e=We(this,e),this.clearTimersOnDispose_(),i=_.setTimeout(function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i},e.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),_.clearTimeout(e)),e},e.setInterval=function(e,t){e=We(this,e),this.clearTimersOnDispose_();t=_.setInterval(e,t);return this.setIntervalIds_.add(t),t},e.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),_.clearInterval(e)),e},e.requestAnimationFrame=function(e){var t,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=We(this,e),t=_.requestAnimationFrame(function(){i.rafIds_.has(t)&&i.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},e.requestNamedAnimationFrame=function(e,t){var i=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=We(this,t);var n=this.requestAnimationFrame(function(){t(),i.namedRafs_.has(e)&&i.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}},e.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},e.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),_.cancelAnimationFrame(e)),e):this.clearTimeout(e)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],i=e[1];n[t].forEach(function(e,t){return n[i](t)})}),n.clearingTimersOnDispose_=!1}))},s.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=s.getComponent("Tech"),n=i&&i.isTech(t),i=s===t||s.prototype.isPrototypeOf(t.prototype);if(n||!i){var r=n?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+e+'"; '+r+".")}e=lt(e),s.components_||(s.components_={});r=s.getComponent("Player");if("Player"===e&&r&&r.players){var a=r.players,r=Object.keys(a);if(a&&0<r.length&&r.map(function(e){return a[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return s.components_[e]=t,s.components_[ut(e)]=t},s.getComponent=function(e){if(e&&s.components_)return s.components_[e]},s}();pt.prototype.supportsRaf_="function"==typeof _.requestAnimationFrame&&"function"==typeof _.cancelAnimationFrame,pt.registerComponent("Component",pt);var ft=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var mt=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t};function gt(e,t,i,n){return function(e,t,i){if("number"!=typeof t||t<0||i<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,n,i.length-1),i[n][t]}function yt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:gt.bind(null,"start",0,e),end:gt.bind(null,"end",1,e)}}function vt(e,t){return Array.isArray(e)?yt(e):void 0===e||void 0===t?yt():yt([[e,t]])}function _t(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=vt(0,0));for(var a=0;a<e.length;a++)i=e.start(a),r+=(n=t<(n=e.end(a))?t:n)-i;return r/t}function bt(e){if(e instanceof bt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:S(e)&&("number"==typeof e.code&&(this.code=e.code),T(this,e)),this.message||(this.message=bt.defaultMessages[this.code]||"")}bt.prototype.code=0,bt.prototype.message="",bt.prototype.status=null,bt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],bt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Tt=0;Tt<bt.errorTypes.length;Tt++)bt[bt.errorTypes[Tt]]=Tt,bt.prototype[bt.errorTypes[Tt]]=Tt;var St=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]};function Et(e){return null!=e&&"function"==typeof e.then}function kt(e){Et(e)&&e.then(null,function(e){})}function Ct(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,i){return n[t]&&(e[t]=n[t]),e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}var wt=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=Ct(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Ct))},It=function(e,i){return e.forEach(function(e){var t=i.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),i.textTracks()},xt=t(function(e,t){function i(e){if(!e||"object"!=typeof e||(t=e.which||e.keyCode||e.charCode)&&(e=t),"number"==typeof e)return o[e];var t=String(e),e=n[t.toLowerCase()];return e||((e=r[t.toLowerCase()])?e:1===t.length?t.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"==typeof e){var i=e.which||e.keyCode||e.charCode;if(null==i)return!1;if("string"==typeof t){e=n[t.toLowerCase()];if(e)return e===i;if(e=r[t.toLowerCase()])return e===i}else if("number"==typeof t)return t===i;return!1}};for(var n=(t=e.exports=i).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var s,o=t.names=t.title={};for(a in n)o[n[a]]=a;for(s in r)n[s]=r[s]});xt.code,xt.codes,xt.aliases,xt.names,xt.title;var At="vjs-modal-dialog",Pt=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.close_=function(e){return i.close(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=J("div",{className:At+"-content"},{role:"document"}),i.descEl_=J("p",{className:At+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),Z(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}mt(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return At+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},t.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},t.closeable=function(e){var t,i;return"boolean"==typeof e&&(t=this.closeable_=!!e,i=this.getChild("closeButton"),t&&!i&&(e=this.contentEl_,this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(i,"close",this.close_)),!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())),this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),_e(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);t=this.getChild("closeButton");t&&i.appendChild(t.el_)},t.empty=function(){this.trigger("beforemodalempty"),ge(this.contentEl()),this.trigger("modalempty")},t.content=function(e){return"undefined"!=typeof e&&(this.content_=e),this.content_},t.conditionalFocus_=function(){var e=d.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(e){if(e.stopPropagation(),xt.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(xt.isEventKey(e,"Tab")){for(var t,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){t=r;break}d.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||t!==i.length-1||(i[0].focus(),e.preventDefault())}},t.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof _.HTMLAnchorElement||e instanceof _.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof _.HTMLInputElement||e instanceof _.HTMLSelectElement||e instanceof _.HTMLTextAreaElement||e instanceof _.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof _.HTMLIFrameElement||e instanceof _.HTMLObjectElement||e instanceof _.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},e}(pt);Pt.prototype.options_={pauseOnOpen:!0,temporary:!0},pt.registerComponent("ModalDialog",Pt);var Lt,Dt=function(n){function e(e){var t;void 0===e&&(e=[]),(t=n.call(this)||this).tracks_=[],Object.defineProperty(ft(t),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)t.addTrack(e[i]);return t}mt(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},nt(e)&&e.addEventListener("labelchange",e.labelchange_)},t.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},t.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(Xe);for(Lt in Dt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Dt.prototype.allowedEvents_)Dt.prototype["on"+Lt]=null;function Ot(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)}function Rt(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)}function Mt(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=d.createElement("a");i.href=e;var n,r=""===i.host&&"file:"!==i.protocol;r&&((n=d.createElement("div")).innerHTML='<a href="'+e+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),d.body.appendChild(n));for(var a={},s=0;s<t.length;s++)a[t[s]]=i[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=_.location.protocol),r&&d.body.removeChild(n),a}function Nt(e){var t;return e.match(/^https?:\/\//)||((t=d.createElement("div")).innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href),e}function Ut(e){if("string"==typeof e){e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(e)return e.pop().toLowerCase()}return""}function Bt(e,t){return void 0===t&&(t=_.location),(":"===(e=Mt(e)).protocol?t:e).protocol+e.host!==t.protocol+t.host}var Ft=function(n){function e(e){for(var t,i=(e=void 0===e?[]:e).length-1;0<=i;i--)if(e[i].enabled){Ot(e,e[i]);break}return(t=n.call(this,e)||this).changing_=!1,t}mt(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this;e.enabled&&Ot(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Ot(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},t.removeTrack=function(e){n.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(Dt),e=function(n){function e(e){for(var t,i=(e=void 0===e?[]:e).length-1;0<=i;i--)if(e[i].selected){Rt(e,e[i]);break}return(t=n.call(this,e)||this).changing_=!1,Object.defineProperty(ft(t),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),t}mt(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this;e.selected&&Rt(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,Rt(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},t.removeTrack=function(e){n.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(Dt),n=function(i){function e(){return i.apply(this,arguments)||this}mt(e,i);var t=e.prototype;return t.addTrack=function(e){var t=this;i.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(e){i.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Dt),r=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),jt=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;function r(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(t<n)for(i=t;i<n;i++)r.call(this,i)},e.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(),Ht={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},qt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Vt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Wt={disabled:"disabled",hidden:"hidden",showing:"showing"},w=function(a){function e(e){void 0===e&&(e={});var t,i=a.call(this)||this,n={id:e.id||"vjs_track_"+Le++,kind:e.kind||"",language:e.language||""},r=e.label||"";for(t in n)!function(e){Object.defineProperty(ft(i),e,{get:function(){return n[e]},set:function(){}})}(t);return Object.defineProperty(ft(i),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),i}return mt(e,a),e}(Xe),zt=Object.freeze({__proto__:null,parseUrl:Mt,getAbsoluteURL:Nt,getFileExtension:Ut,isCrossOrigin:Bt}),Gt=function(e){if(!e)return!1;var t=Xt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}
/**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Bjrklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   */,Xt=Object.prototype.toString;var Kt=function(e){var n={};return e&&e.trim().split("\n").forEach(function(e){var t=e.indexOf(":"),i=e.slice(0,t).trim().toLowerCase(),t=e.slice(t+1).trim();"undefined"==typeof n[i]?n[i]=t:Array.isArray(n[i])?n[i].push(t):n[i]=[n[i],t]}),n},Yt=$t,I=$t;function Qt(e,t,i){var n=e;return Gt(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=g({},t,{uri:e}),n.callback=i,n}function $t(e,t,i){return Jt(t=Qt(e,t,i))}function Jt(n){if("undefined"==typeof n.callback)throw new Error("callback argument missing");var r=!1,a=function(e,t,i){r||(r=!0,n.callback(e,t,i))};function s(){var e=void 0,e=l.response||l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l);if(m)try{e=JSON.parse(e)}catch(e){}return e}function t(e){return clearTimeout(u),(e=!(e instanceof Error)?new Error(""+(e||"Unknown XMLHttpRequest Error")):e).statusCode=0,a(e,g)}function e(){if(!o){clearTimeout(u);var e=n.useXDR&&void 0===l.status?200:1223===l.status?204:l.status,t=g,i=null;return 0!==e?(t={body:s(),statusCode:e,method:d,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(t.headers=Kt(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),a(i,t,t.body)}}var i,o,u,l=n.xhr||null,c=(l=l||new(n.cors||n.useXDR?$t.XDomainRequest:$t.XMLHttpRequest)).url=n.uri||n.url,d=l.method=n.method||"GET",h=n.body||n.data,p=l.headers=n.headers||{},f=!!n.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:l};if("json"in n&&!1!==n.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(!0===n.json?h:n.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(e,0)},l.onload=e,l.onerror=t,l.onprogress=function(){},l.onabort=function(){o=!0},l.ontimeout=t,l.open(d,c,!f,n.username,n.password),f||(l.withCredentials=!!n.withCredentials),!f&&0<n.timeout&&(u=setTimeout(function(){var e;o||(o=!0,l.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",t(e))},n.timeout)),l.setRequestHeader)for(i in p)p.hasOwnProperty(i)&&l.setRequestHeader(i,p[i]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(l.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(l),l.send(h||null),l}$t.XMLHttpRequest=_.XMLHttpRequest||function(){},$t.XDomainRequest="withCredentials"in new $t.XMLHttpRequest?$t.XMLHttpRequest:_.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(n){$t["delete"===n?"del":n]=function(e,t,i){return(t=Qt(e,t,i)).method=n.toUpperCase(),Jt(t)}}),Yt.default=I;function Zt(e,t){var i=new _.WebVTT.Parser(_,_.vttjs,_.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),0<n.length&&(_.console&&_.console.groupCollapsed&&_.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return f.error(e)}),_.console&&_.console.groupEnd&&_.console.groupEnd()),i.flush()}function ei(e,n){var t={uri:e};(e=Bt(e))&&(t.cors=e),(e="use-credentials"===n.tech_.crossOrigin())&&(t.withCredentials=e),Yt(t,We(this,function(e,t,i){return e?f.error(e,t):(n.loaded_=!0,void("function"!=typeof _.WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],function(e){return"vttjserror"!==e.type?Zt(i,n):void f.error("vttjs failed to load, stopping trying to process "+n.src)}):Zt(i,n)))}))}var ti=function(u){function e(e){var t;if(!(e=void 0===e?{}:e).tech)throw new Error("A tech was not provided.");var e=ct(e,{kind:Vt[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=Wt[e.mode]||"disabled",n=e.default;"metadata"!==e.kind&&"chapters"!==e.kind||(i="hidden"),(t=u.call(this,e)||this).tech_=e.tech,t.cues_=[],t.activeCues_=[],t.preload_=!1!==t.tech_.preloadTextTracks;var r=new jt(t.cues_),s=new jt(t.activeCues_),o=!1,a=We(ft(t),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1))});return t.tech_.one("dispose",function(){t.tech_.off("timeupdate",a)}),"disabled"!==i&&t.tech_.on("timeupdate",a),Object.defineProperties(ft(t),{default:{get:function(){return n},set:function(){}},mode:{get:function(){return i},set:function(e){Wt[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||ei(this.src,this),this.tech_.off("timeupdate",a),"disabled"!==i&&this.tech_.on("timeupdate",a),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?r:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),e.src?(t.src=e.src,t.preload_||(t.loaded_=!0),(t.preload_||"subtitles"!==e.kind&&"captions"!==e.kind)&&ei(t.src,ft(t))):t.loaded_=!0,t}mt(e,u);var t=e.prototype;return t.addCue=function(e){var t=e;if(_.vttjs&&!(e instanceof _.vttjs.VTTCue)){for(var i in t=new _.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},e}(w);ti.prototype.allowedEvents_={cuechange:"cuechange"};var ii=function(n){function e(e){var t=ct(e=void 0===e?{}:e,{kind:qt[e.kind]||""}),e=n.call(this,t)||this,i=!1;return Object.defineProperty(ft(e),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),t.enabled&&(e.enabled=t.enabled),e.loaded_=!0,e}return mt(e,n),e}(w),ni=function(n){function e(e){var t=ct(e=void 0===e?{}:e,{kind:Ht[e.kind]||""}),e=n.call(this,t)||this,i=!1;return Object.defineProperty(ft(e),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),t.selected&&(e.selected=t.selected),e}return mt(e,n),e}(w),x=function(r){function e(e){var t;void 0===e&&(e={});var i=r.call(this)||this,n=new ti(e);return i.kind=n.kind,i.src=n.src,i.srclang=n.language,i.label=n.label,i.default=n.default,Object.defineProperties(ft(i),{readyState:{get:function(){return t}},track:{get:function(){return n}}}),t=0,n.addEventListener("loadeddata",function(){t=2,i.trigger({type:"load",target:ft(i)})}),i}return mt(e,r),e}(Xe);x.prototype.allowedEvents_={load:"load"},x.NONE=0,x.LOADING=1,x.LOADED=2,x.ERROR=3;var ri={audio:{ListClass:Ft,TrackClass:ii,capitalName:"Audio"},video:{ListClass:e,TrackClass:ni,capitalName:"Video"},text:{ListClass:n,TrackClass:ti,capitalName:"Text"}};Object.keys(ri).forEach(function(e){ri[e].getterName=e+"Tracks",ri[e].privateName=e+"Tracks_"});var ai={remoteText:{ListClass:n,TrackClass:ti,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:r,TrackClass:x,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},si=g({},ri,ai);ai.names=Object.keys(ai),ri.names=Object.keys(ri),si.names=[].concat(ai.names).concat(ri.names);var oi=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return ui.prototype=e,new ui};function ui(){}function li(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function ci(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}e=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function di(){this.values=oi(null)}function hi(e,t,i,n){var r,a,s=n?e.split(n):[e];for(r in s)"string"==typeof s[r]&&(2===(a=s[r].split(i)).length&&t(a[0],a[1]))}function pi(t,e,s){var i=t;function n(){var e=ci(t);if(null===e)throw new li(li.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}if(r(),e.startTime=n(),r(),"--\x3e"!==t.substr(0,3))throw new li(li.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),r(),e.endTime=n(),r(),function(e,t){var a=new di;hi(e,function(e,t){switch(e){case"region":for(var i=s.length-1;0<=i;i--)if(s[i].id===t){a.set(e,s[i].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),r=n[0];a.integer(e,r),a.percent(e,r)&&a.set("snapToLines",!1),a.alt(e,r,["auto"]),2===n.length&&a.alt("lineAlign",n[1],["start","center","end"]);break;case"position":n=t.split(","),a.percent(e,n[0]),2===n.length&&a.alt("positionAlign",n[1],["start","center","end"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=a.get("region",null),t.vertical=a.get("vertical","");try{t.line=a.get("line","auto")}catch(e){}t.lineAlign=a.get("lineAlign","start"),t.snapToLines=a.get("snapToLines",!0),t.size=a.get("size",100);try{t.align=a.get("align","center")}catch(e){t.align=a.get("align","middle")}try{t.position=a.get("position","auto")}catch(e){t.position=a.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=a.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(t,e)}((li.prototype=oi(Error.prototype)).constructor=li).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},di.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var fi=d.createElement&&d.createElement("textarea"),mi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},gi={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},yi={v:"title",lang:"lang"},vi={rt:"ruby"};function _i(e,t){for(var i,n,r,a,s,o,u,l,c,d,h=e.document.createElement("div"),p=h,f=[];null!==(i=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/);return e=e[1]||e[2],t=t.substr(e.length),e}());)"<"!==i[0]?p.appendChild(e.document.createTextNode((s=i,fi.innerHTML=s,s=fi.textContent,fi.textContent="",s))):"/"!==i[1]?(a=ci(i.substr(1,i.length-2)))?(n=e.document.createProcessingInstruction("timestamp",a),p.appendChild(n)):(r=i.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(l=r[1],c=r[3],d=void 0,d=mi[l],(n=d?(d=e.document.createElement(d),(l=yi[l])&&c&&(d[l]=c.trim()),d):null)&&(o=p,vi[(u=n).localName]&&vi[u.localName]!==o.localName||(r[2]&&((a=r[2].split(".")).forEach(function(e){var t=/^bg_/.test(e),e=t?e.slice(3):e;gi.hasOwnProperty(e)&&(e=gi[e],n.style[t?"background-color":"color"]=e)}),n.className=a.join(" ")),f.push(r[1]),p.appendChild(n),p=n))):f.length&&f[f.length-1]===i.substr(2).replace(">","")&&(f.pop(),p=p.parentNode);return h}var bi=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Ti(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function a(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}for(a(t,e);i=function e(t){if(!t||!t.length)return null;var i=t.pop(),n=i.textContent||i.innerText;if(n){var r=n.match(/^.*(\n|\r)/);return r?r[t.length=0]:n}return"ruby"===i.tagName?e(t):i.childNodes?(a(t,i),e(t)):void 0}(t);)for(var n=0;n<i.length;n++)if(function(e){for(var t=0;t<bi.length;t++){var i=bi[t];if(e>=i[0]&&e<=i[1])return 1}}(i.charCodeAt(n)))return"rtl";return"ltr"}function Si(){}function Ei(e,t,i){Si.call(this),this.cue=t,this.cueDiv=_i(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:Ti(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function ki(e){var t,i,n,r;e.div&&(t=e.div.offsetHeight,i=e.div.offsetWidth,n=e.div.offsetTop,r=(r=e.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects(),e=e.div.getBoundingClientRect(),r=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0),this.left=e.left,this.right=e.right,this.top=e.top||n,this.height=e.height||t,this.bottom=e.bottom||n+(e.height||t),this.width=e.width||i,this.lineHeight=void 0!==r?r:e.lineHeight}function Ci(e,t,o,u){var i,n=new ki(t),r=t.cue,a=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}(r),s=[];if(r.snapToLines){switch(r.vertical){case"":s=["+y","-y"],i="height";break;case"rl":s=["+x","-x"],i="width";break;case"lr":s=["-x","+x"],i="width"}var l=n.lineHeight,c=l*Math.round(a),d=o[i]+l,h=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/l)*l),a<0&&(c+=""===r.vertical?o.height:o.width,s=s.reverse()),n.move(h,c)}else{var p=n.lineHeight/o.height*100;switch(r.lineAlign){case"center":a-=p/2;break;case"end":a-=p}switch(r.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],n=new ki(t)}n=function(e,t){for(var i,n=new ki(e),r=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(o,t[a])||e.within(o)&&e.overlapsAny(u);)e.move(t[a]);if(e.within(o))return e;var s=e.intersectPercentage(o);s<r&&(i=new ki(e),r=s),e=new ki(n)}return i||n}(n,s);t.move(n.toCSSCompatValues(o))}function wi(){}Si.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},Si.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Ei.prototype=oi(Si.prototype)).constructor=Ei,ki.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},ki.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},ki.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},ki.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},ki.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},ki.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},ki.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},ki.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},wi.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},wi.convertCueToDOMTree=function(e,t){return e&&t?_i(e,t):null};wi.processCues=function(n,r,e){if(!n||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var a=n.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",e.appendChild(a),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(r)){var s=[],o=ki.getSimpleBoxPosition(a),u={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var e,t,i=0;i<r.length;i++)t=r[i],e=new Ei(n,t,u),a.appendChild(e.div),Ci(0,e,o,s),t.displayState=e.div,s.push(ki.getSimpleBoxPosition(e))}()}else for(var t=0;t<r.length;t++)a.appendChild(r[t].displayState)},(wi.Parser=function(e,t,i){i||(i=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof li))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var n=this;function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?hi(e,function(e,t){var i;"X-TIMESTAMP-MAP"===e&&(t=t,i=new di,hi(t,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",ci(t))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")}))},/=/):hi(e,function(e,t){var r;"Region"===e&&(t=t,r=new di,hi(t,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var n=new di;if(n.percent("x",i[0]),n.percent("y",i[1]),!n.has("x")||!n.has("y"))break;r.set(e+"X",n.get("x")),r.set(e+"Y",n.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")&&((t=new(n.vttjs.VTTRegion||n.window.VTTRegion)).width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),n.onregion&&n.onregion(t),n.regionList.push({id:r.get("id"),region:t})))},/:/)}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r,a=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new li(li.Errors.BadSignature);n.state="HEADER"}for(var s=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:r=t(),n.state){case"HEADER":/:/.test(r)?i(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{pi(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(s=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new li(li.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Ii=wi,xi={"":1,lr:1,rl:1},Ai={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Pi(e){return"string"==typeof e&&(!!Ai[e.toLowerCase()]&&e.toLowerCase())}function Li(e,t,i){this.hasBeenReset=!1;var n="",r=!1,a=e,s=t,o=i,u=null,l="",c=!0,d="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(e){e="string"==typeof(e=e)&&(!!xi[e.toLowerCase()]&&e.toLowerCase());if(!1===e)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){e=Pi(e);e&&(h=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){e=Pi(e);e&&(f=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){e=Pi(e);if(!e)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=e,this.hasBeenReset=!0}}}),this.displayState=void 0}Li.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Di=Li,Oi={"":!0,up:!0};function Ri(e){return"number"==typeof e&&0<=e&&e<=100}function Mi(){var t=100,i=3,n=0,r=100,a=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!Ri(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Ri(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Ri(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!Ri(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!Ri(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){e="string"==typeof(e=e)&&(!!Oi[e.toLowerCase()]&&e.toLowerCase());!1===e||(o=e)}}})}var Ni=t(function(e){e=e.exports={WebVTT:Ii,VTTCue:Di,VTTRegion:Mi};_.vttjs=e,_.WebVTT=e.WebVTT;var t=e.VTTCue,i=e.VTTRegion,n=_.VTTCue,r=_.VTTRegion;e.shim=function(){_.VTTCue=t,_.VTTRegion=i},e.restore=function(){_.VTTCue=n,_.VTTRegion=r},_.VTTCue||e.shim()});Ni.WebVTT,Ni.VTTCue,Ni.VTTRegion;var Ui=function(n){function i(t,e){var i;return void 0===e&&(e=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(i=n.call(this,null,t,e)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),si.names.forEach(function(e){e=si[e];t&&t[e.getterName]&&(i[e.privateName]=t[e.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new si.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}mt(i,n);var e=i.prototype;return e.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},e.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},e.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},e.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(We(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},e.onDurationChange=function(e){this.duration_=this.duration()},e.buffered=function(){return vt(0,0)},e.bufferedPercent=function(){return _t(this.buffered(),this.duration_)},e.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},e.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},e.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.dispose=function(){this.clearTracks(ri.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},e.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],i=t.length;i--;){var n=t[i];"text"===e&&r.removeRemoteTextTrack(n),t.removeTrack(n)}})},e.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},e.reset=function(){},e.crossOrigin=function(){},e.setCrossOrigin=function(){},e.error=function(e){return void 0!==e&&(this.error_=new bt(e),this.trigger("error")),this.error_},e.played=function(){return this.hasStarted_?vt(0,0):vt()},e.play=function(){},e.setScrubbing=function(){},e.scrubbing=function(){},e.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.initTrackListeners=function(){var r=this;ri.names.forEach(function(e){function t(){r.trigger(e+"trackchange")}var i=ri[e],n=r[i.getterName]();n.addEventListener("removetrack",t),n.addEventListener("addtrack",t),r.on("dispose",function(){n.removeEventListener("removetrack",t),n.removeEventListener("addtrack",t)})})},e.addWebVttScript_=function(){var e,t=this;_.WebVTT||(d.body.contains(this.el())?!this.options_["vtt.js"]&&E(Ni)&&0<Object.keys(Ni).length?this.trigger("vttjsloaded"):((e=d.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),_.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},e.emulateTextTracks=function(){function t(e){return n.addTrack(e.track)}function i(e){return n.removeTrack(e.track)}var e=this,n=this.textTracks(),r=this.remoteTextTracks();r.on("addtrack",t),r.on("removetrack",i),this.addWebVttScript_();function a(){return e.trigger("texttrackchange")}function s(){a();for(var e=0;e<n.length;e++){var t=n[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}}s(),n.addEventListener("change",s),n.addEventListener("addtrack",s),n.addEventListener("removetrack",s),this.on("dispose",function(){r.off("addtrack",t),r.off("removetrack",i),n.removeEventListener("change",s),n.removeEventListener("addtrack",s),n.removeEventListener("removetrack",s);for(var e=0;e<n.length;e++)n[e].removeEventListener("cuechange",a)})},e.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n,r){void 0===r&&(r={});var a=e.textTracks();return r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e,r=new si.text.TrackClass(r),a.addTrack(r),r}(this,e,t,i)},e.createRemoteTextTrack=function(e){e=ct(e,{tech:this});return new ai.remoteTextEl.TrackClass(e)},e.addRemoteTextTrack=function(e,t){var i=this,n=this.createRemoteTextTrack(e=void 0===e?{}:e);return!0!==t&&!1!==t&&(f.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},e.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},e.getVideoPlaybackQuality=function(){return{}},e.requestPictureInPicture=function(){var e=this.options_.Promise||_.Promise;if(e)return e.reject()},e.disablePictureInPicture=function(){return!0},e.setDisablePictureInPicture=function(){},e.setPoster=function(){},e.playsinline=function(){},e.setPlaysinline=function(){},e.overrideNativeAudioTracks=function(){},e.overrideNativeVideoTracks=function(){},e.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(e,t){return i.canPlayType(e.type)},i.isTech=function(e){return e.prototype instanceof i||e instanceof i||e===i},i.registerTech=function(e,t){if(i.techs_||(i.techs_={}),!i.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=lt(e),i.techs_[e]=t,i.techs_[ut(e)]=t,"Tech"!==e&&i.defaultTechOrder_.push(e),t},i.getTech=function(e){if(e)return i.techs_&&i.techs_[e]?i.techs_[e]:(e=lt(e),_&&_.videojs&&_.videojs[e]?(f.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),_.videojs[e]):void 0)},i}(pt);si.names.forEach(function(e){var t=si[e];Ui.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Ui.prototype.featuresVolumeControl=!0,Ui.prototype.featuresMuteControl=!0,Ui.prototype.featuresFullscreenResize=!1,Ui.prototype.featuresPlaybackRate=!1,Ui.prototype.featuresProgressEvents=!1,Ui.prototype.featuresSourceset=!1,Ui.prototype.featuresTimeupdateEvents=!1,Ui.prototype.featuresNativeTextTracks=!1,Ui.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var i=(i=r.sourceHandlers)||(r.sourceHandlers=[]);void 0===t&&(t=i.length),i.splice(t,0,e)},r.canPlayType=function(e){for(var t,i=r.sourceHandlers||[],n=0;n<i.length;n++)if(t=i[n].canPlayType(e))return t;return""},r.selectSourceHandler=function(e,t){for(var i=r.sourceHandlers||[],n=0;n<i.length;n++)if(i[n].canHandleSource(e,t))return i[n];return null},r.canPlaySource=function(e,t){var i=r.selectSourceHandler(e,t);return i?i.canHandleSource(e,t):""};["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:f.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},pt.registerComponent("Tech",Ui),Ui.registerTech("Tech",Ui),Ui.defaultTechOrder_=[];var Bi={},Fi={},ji={};function Hi(e,t,i){e.setTimeout(function(){return function i(n,e,r,a,s,o){void 0===n&&(n={});void 0===e&&(e=[]);void 0===s&&(s=[]);void 0===o&&(o=!1);var t=e,e=t[0],u=t.slice(1);if("string"==typeof e)i(n,Bi[e],r,a,s,o);else if(e){var l=Xi(a,e);if(!l.setSource)return s.push(l),i(n,u,r,a,s,o);l.setSource(T({},n),function(e,t){return e?i(n,u,r,a,s,o):(s.push(l),void i(t,n.type===t.type?u:Bi[t.type],r,a,s,o))})}else u.length?i(n,u,r,a,s,o):o?r(n,s):i(n,Bi["*"],r,a,s,!0)}(t,Bi[t.type],i,e)},1)}function qi(e,t,i,n){void 0===n&&(n=null);var r="call"+lt(i),r=e.reduce(Gi(r),n),n=r===ji,r=n?null:t[i](r);return function(e,t,i,n){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](n,i)}}(e,i,r,n),r}var Vi={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Wi={setCurrentTime:1,setMuted:1,setVolume:1},zi={play:1,pause:1};function Gi(i){return function(e,t){return e===ji?ji:t[i]?t[i](e):e}}function Xi(e,t){var i=Fi[e.id()],n=null;if(null==i)return n=t(e),Fi[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var a=i[r],s=a[0],a=a[1];s===t&&(n=a)}return null===n&&(n=t(e),i.push([t,n])),n}function Ki(e){return e=Ut(e=void 0===e?"":e),Qi[e.toLowerCase()]||""}function Yi(e){var t;return e=Array.isArray(e)?(t=[],e.forEach(function(e){e=Yi(e),Array.isArray(e)?t=t.concat(e):S(e)&&t.push(e)}),t):"string"==typeof e&&e.trim()?[$i({src:e})]:S(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[$i(e)]:[]}var Qi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function $i(e){var t;return e.type||(t=Ki(e.src))&&(e.type=t),e}A=function(u){function e(e,t,i){var n=ct({createEl:!1},t),i=u.call(this,e,n,i)||this;if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var r=0,a=t.playerOptions.techOrder;r<a.length;r++){var s=lt(a[r]),o=Ui.getTech(s);if((o=!s?pt.getComponent(s):o)&&o.isSupported()){e.loadTech_(s);break}}return i}return mt(e,u),e}(pt);pt.registerComponent("MediaLoader",A);B=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}mt(e,n);var t=e.prototype;return t.createEl=function(e,t,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={}),t=T({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&f.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=T({role:"button"},i),this.tabIndex_=t.tabIndex;i=n.prototype.createEl.call(this,e,t,i);return this.createControlTextEl(i),i},t.dispose=function(){this.controlTextEl_=null,n.prototype.dispose.call(this)},t.createControlTextEl=function(e){return this.controlTextEl_=J("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,Z(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",i)},t.buildCSSClass=function(){return"vjs-control vjs-button "+n.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(e){xt.isEventKey(e,"Space")||xt.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,e)},e}(pt);pt.registerComponent("ClickableComponent",B),pt.registerComponent("PosterImage",function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.update(),i.update_=function(e){return i.update(e)},e.on("posterchange",i.update_),i}mt(e,n);var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),n.prototype.dispose.call(this)},t.createEl=function(){return J("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.setSrc=function(e){this.el_.style.backgroundImage=e?'url("'+e+'")':""},t.handleClick=function(e){var t;this.player_.controls()&&(t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(U||R)&&t||this.player_.tech(!0).focus(),this.player_.paused()?kt(this.player_.play()):this.player_.pause())},e}(B));var Ji="#222",Zi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function en(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function tn(e,t,i){try{e.style[t]=i}catch(e){return}}pt.registerComponent("TextTrackDisplay",function(a){function e(i,e,t){function n(e){return r.updateDisplay(e)}var r=a.call(this,i,e,t)||this;return i.on("loadstart",function(e){return r.toggleDisplay(e)}),i.on("texttrackchange",n),i.on("loadedmetadata",function(e){return r.preselectTrack(e)}),i.ready(We(ft(r),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",n),i.on("playerresize",n),_.addEventListener("orientationchange",n),i.on("dispose",function(){return _.removeEventListener("orientationchange",n)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),r}mt(e,a);var t=e.prototype;return t.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in n?i=o.kind!==a.kind&&i||o:a&&!a.enabled?t=e=i=null:o.default&&("descriptions"!==o.kind||e?o.kind in n&&!t&&(t=o):e=o)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof _.WebVTT&&_.WebVTT.processCues(_,[],this.el_)},t.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var a=null,s=null,o=e.length;o--;){var u=e[o];"showing"===u.mode&&("descriptions"===u.kind?a=u:s=u)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},t.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;n--;){var r,a=i[n];a&&(r=a.displayState,t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&tn(r.firstChild,"color",en(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&tn(r.firstChild,"backgroundColor",en(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?tn(r,"backgroundColor",en(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?r.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Ji:"raised"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Ji:"depressed"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Ji:"uniform"===t.edgeStyle&&(r.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Ji)),t.fontPercent&&1!==t.fontPercent&&(a=_.parseFloat(r.style.fontSize),r.style.fontSize=a*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"),t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=Zi[t.fontFamily]))}},t.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof _.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],i=0;i<e.length;++i)for(var n=e[i],r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r]);_.WebVTT.processCues(_,t,this.el_);for(var a=0;a<e.length;++a){for(var s=e[a],o=0;o<s.activeCues.length;++o){var u=s.activeCues[o].displayState;ie(u,"vjs-text-track-cue"),ie(u,"vjs-text-track-cue-"+(s.language||a))}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},e}(pt)),pt.registerComponent("LoadingSpinner",function(i){function e(){return i.apply(this,arguments)||this}return mt(e,i),e.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),e=J("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),t=i.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return t.appendChild(e),t},e}(pt));var nn=function(t){function e(){return t.apply(this,arguments)||this}mt(e,t);var i=e.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t=T({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=T({type:"button"},i);i=pt.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(i),i},i.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return f.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),pt.prototype.addChild.call(this,e,t)},i.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(e){xt.isEventKey(e,"Space")||xt.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(B);pt.registerComponent("Button",nn);H=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.mouseused_=!1,i.on("mousedown",function(e){return i.handleMouseDown(e)}),i}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return kt(t),void(!this.player_.tech(!0)||(U||R)&&i||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");n?(i=function(){return n.focus()},Et(t)?t.then(i,function(){}):this.setTimeout(i,1)):this.player_.tech(!0).focus()},t.handleKeyDown=function(e){this.mouseused_=!1,n.prototype.handleKeyDown.call(this,e)},t.handleMouseDown=function(e){this.mouseused_=!0},e}(nn);H.prototype.controlText_="Play Video",pt.registerComponent("BigPlayButton",H),pt.registerComponent("CloseButton",function(i){function e(e,t){e=i.call(this,e,t)||this;return e.controlText(t&&t.controlText||e.localize("Close")),e}mt(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(e){xt.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,e)},e}(nn));var rn=function(n){function e(e,t){var i=n.call(this,e,t=void 0===t?{}:t)||this;return t.replay=void 0===t.replay||t.replay,i.on(e,"play",function(e){return i.handlePlay(e)}),i.on(e,"pause",function(e){return i.handlePause(e)}),t.replay&&i.on(e,"ended",function(e){return i.handleEnded(e)}),i}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.player_.paused()?kt(this.player_.play()):this.player_.pause()},t.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(e){return t.handleSeeked(e)})},e}(nn);rn.prototype.controlText_="Play",pt.registerComponent("PlayToggle",rn);function an(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),t=Math.floor(t/3600);return(r=0<(r=isNaN(e)||e===1/0?n=i="-":r)||0<t?r+":":"")+(n=((r||10<=a)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)}var sn=an;function on(e,t){return sn(e,t=void 0===t?e:t)}I=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.on(e,["timeupdate","ended"],function(e){return i.updateContent(e)}),i.updateTextNode_(),i}mt(e,n);var t=e.prototype;return t.createEl=function(){var e=this.buildCSSClass(),t=n.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"</span>"});return this.contentEl_=J("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t},t.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},t.updateTextNode_=function(e){var t=this;e=on(e=void 0===e?0:e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){var e;t.contentEl_&&((e=t.textNode_)&&t.contentEl_.firstChild!==e&&(e=null,f.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=d.createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_)))}))},t.updateContent=function(e){},e}(pt);I.prototype.labelText_="Time",I.prototype.controlText_="Time",pt.registerComponent("TimeDisplay",I);w=function(e){function t(){return e.apply(this,arguments)||this}mt(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(t)},t}(I);w.prototype.labelText_="Current Time",w.prototype.controlText_="Current Time",pt.registerComponent("CurrentTimeDisplay",w);Ft=function(n){function e(e,t){var i=n.call(this,e,t)||this,t=function(e){return i.updateContent(e)};return i.on(e,"durationchange",t),i.on(e,"loadstart",t),i.on(e,"loadedmetadata",t),i}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},e}(I);Ft.prototype.labelText_="Duration",Ft.prototype.controlText_="Duration",pt.registerComponent("DurationDisplay",Ft),pt.registerComponent("TimeDivider",function(e){function t(){return e.apply(this,arguments)||this}return mt(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(pt));e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.on(e,"durationchange",function(e){return i.updateContent(e)}),i}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var e=n.prototype.createEl.call(this);return e.insertBefore(J("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},t.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},e}(I);e.prototype.labelText_="Remaining Time",e.prototype.controlText_="Remaining Time",pt.registerComponent("RemainingTimeDisplay",e),pt.registerComponent("LiveDisplay",function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.updateShowing(),i.on(i.player(),"durationchange",function(e){return i.updateShowing(e)}),i}mt(e,n);var t=e.prototype;return t.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=J("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},e}(pt));n=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}mt(e,n);var t=e.prototype;return t.createEl=function(){var e=n.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=J("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,n.prototype.dispose.call(this)},e}(nn);n.prototype.controlText_="Seek to live, currently playing live",pt.registerComponent("SeekToLive",n);function un(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))}r=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}mt(e,n);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){var e;this.enabled()&&(e=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},t.createEl=function(e,t,i){return void 0===i&&(i={}),(t=void 0===t?{}:t).className=t.className+" vjs-slider",t=T({tabIndex:0},t),i=T({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),n.prototype.createEl.call(this,e,t,i)},t.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||M||e.preventDefault(),ce(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e)},t.handleMouseMove=function(e){},t.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;de(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var t=this;if(this.el_&&this.bar){var i=this.getProgress();return i===this.progress_?i:(this.progress_=i,this.requestNamedAnimationFrame("Slider#update",function(){var e=t.vertical()?"height":"width";t.bar.el().style[e]=(100*i).toFixed(2)+"%"}),i)}},t.getProgress=function(){return Number(un(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(e){e=fe(this.el_,e);return this.vertical()?e.y:e.x},t.handleKeyDown=function(e){xt.isEventKey(e,"Left")||xt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):xt.isEventKey(e,"Right")||xt.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):n.prototype.handleKeyDown.call(this,e)},t.handleClick=function(e){e.stopPropagation(),e.preventDefault()},t.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(pt);pt.registerComponent("Slider",r);function ln(e,t){return un(e/t*100,0,100).toFixed(2)+"%"}pt.registerComponent("LoadProgressBar",function(r){function e(e,t){var i=r.call(this,e,t)||this;return i.partEls_=[],i.on(e,"progress",function(e){return i.update(e)}),i}mt(e,r);var t=e.prototype;return t.createEl=function(){var e=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),t=J("span",{className:"vjs-control-text"}),i=J("span",{textContent:this.localize("Loaded")}),n=d.createTextNode(": ");return this.percentageEl_=J("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(n),t.appendChild(this.percentageEl_),e},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},t.update=function(e){var l=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=l.player_.liveTracker,t=l.player_.buffered(),e=e&&e.isLive()?e.seekableEnd():l.player_.duration(),i=l.player_.bufferedEnd(),n=l.partEls_,e=ln(i,e);l.percent_!==e&&(l.el_.style.width=e,Z(l.percentageEl_,e),l.percent_=e);for(var r=0;r<t.length;r++){var a=t.start(r),s=t.end(r),o=n[r];o||(o=l.el_.appendChild(J()),n[r]=o),o.dataset.start===a&&o.dataset.end===s||(o.dataset.start=a,o.dataset.end=s,o.style.left=ln(a,i),o.style.width=ln(s-a,i))}for(var u=n.length;u>t.length;u--)l.el_.removeChild(n[u-1]);n.length=t.length})},e}(pt)),pt.registerComponent("TimeTooltip",function(i){function e(e,t){t=i.call(this,e,t)||this;return t.update=ze(We(ft(t),t.update),30),t}mt(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(e,t,i){var n=pe(this.el_),r=he(this.player_.el()),a=e.width*t;r&&n&&(t=e.left-r.left+a,r=e.width-a+(r.right-e.right),t<(e=n.width/2)?e+=e-t:r<e&&(e=r),e<0?e=0:e>n.width&&(e=n.width),e=Math.round(e),this.el_.style.right="-"+e+"px",this.write(i))},t.write=function(e){Z(this.el_,e)},t.updateTime=function(n,r,a,s){var o=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var e,t,i=o.player_.duration();i=o.player_.liveTracker&&o.player_.liveTracker.isLive()?((t=(e=o.player_.liveTracker.liveWindow())-r*e)<1?"":"-")+on(t,e):on(a,i),o.update(n,r,i),s&&s()})},e}(pt));x=function(i){function e(e,t){t=i.call(this,e,t)||this;return t.update=ze(We(ft(t),t.update),30),t}mt(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(e,t){var i,n=this.getChild("timeTooltip");n&&(i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),n.updateTime(e,t,i))},e}(pt);x.prototype.options_={children:[]},V||P||x.prototype.options_.children.push("timeTooltip"),pt.registerComponent("PlayProgressBar",x);A=function(i){function e(e,t){t=i.call(this,e,t)||this;return t.update=ze(We(ft(t),t.update),30),t}mt(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){i.el_.style.left=e.width*t+"px"})},e}(pt);A.prototype.options_={children:["timeTooltip"]},pt.registerComponent("MouseTimeDisplay",A);H=function(a){function e(e,t){t=a.call(this,e,t)||this;return t.setEventHandlers_(),t}mt(e,a);var t=e.prototype;return t.setEventHandlers_=function(){var t=this;this.update_=We(this,this.update),this.update=ze(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(e){return t.enableInterval_(e)},this.disableIntervalHandler_=function(e){return t.disableInterval_(e)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in d&&"visibilityState"in d&&this.on(d,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(e){"hidden"===d.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},t.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(e){var n=this;if("hidden"!==d.visibilityState){var r=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,i=n.player_.duration();t&&t.isLive()&&(i=n.player_.liveTracker.liveCurrentTime()),n.percent_!==r&&(n.el_.setAttribute("aria-valuenow",(100*r).toFixed(2)),n.percent_=r),n.currentTime_===e&&n.duration_===i||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[on(e,i),on(i,i)],"{1} of {2}")),n.currentTime_=e,n.duration_=i),n.bar&&n.bar.update(he(n.el()),n.getProgress())}),r}},t.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},t.handleMouseDown=function(e){be(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,e))},t.handleMouseMove=function(e){if(be(e)){var t=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(.99<=t)return void i.seekToLiveEdge();var n,r=i.seekableStart(),e=i.liveCurrentTime();if((n=(n=e<=(n=r+t*i.liveWindow())?e:n)<=r?r+.1:n)===1/0)return}else(n=t*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}},t.enable=function(){a.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function(){a.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function(e){a.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?kt(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},t.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(e){var t,i=this.player_.liveTracker;xt.isEventKey(e,"Space")||xt.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.handleAction(e)):xt.isEventKey(e,"Home")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(0)):xt.isEventKey(e,"End")?(e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(xt(e))?(e.preventDefault(),e.stopPropagation(),t=10*(xt.codes[xt(e)]-xt.codes[0])/100,i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*t):this.userSeek_(this.player_.duration()*t)):xt.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):xt.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,e)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in d&&"visibilityState"in d&&this.off(d,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},e}(r);H.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},V||P||H.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),pt.registerComponent("SeekBar",H);rn=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.handleMouseMove=ze(We(ft(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=ze(We(ft(i),i.handleMouseSeek),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}mt(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(e){var t,i,n,r,a=this.getChild("seekBar");a&&(t=a.getChild("playProgressBar"),i=a.getChild("mouseTimeDisplay"),(t||i)&&(r=pe(n=a.el()),e=fe(n,e).x,e=un(e,0,1),i&&i.update(r,e),t&&t.update(r,a.getProgress())))},t.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.enabled=function(){return this.enabled_},t.disable=function(){var e;this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing()&&(e=this.getChild("seekBar"),this.player_.scrubbing(!1),e.videoWasPlaying&&kt(this.player_.play())))},t.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},e}(pt);rn.prototype.options_={children:["seekBar"]},pt.registerComponent("ProgressControl",rn);w=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.on(e,["enterpictureinpicture","leavepictureinpicture"],function(e){return i.handlePictureInPictureChange(e)}),i.on(e,["disablepictureinpicturechanged","loadedmetadata"],function(e){return i.handlePictureInPictureEnabledChange(e)}),i.disable(),i}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+n.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){d.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},t.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(nn);w.prototype.controlText_="Picture-in-Picture",pt.registerComponent("PictureInPictureToggle",w);Ft=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.on(e,"fullscreenchange",function(e){return i.handleFullscreenChange(e)}),!1===d[e.fsApi_.fullscreenEnabled]&&i.disable(),i}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(nn);Ft.prototype.controlText_="Fullscreen",pt.registerComponent("FullscreenToggle",Ft);pt.registerComponent("VolumeLevel",function(e){function t(){return e.apply(this,arguments)||this}return mt(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(pt)),pt.registerComponent("VolumeLevelTooltip",function(i){function e(e,t){t=i.call(this,e,t)||this;return t.update=ze(We(ft(t),t.update),30),t}mt(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(e,t,i,n){if(!i){var r=he(this.el_),a=he(this.player_.el()),i=e.width*t;if(!a||!r)return;t=e.left-a.left+i,a=e.width-i+(a.right-e.right),e=r.width/2;t<e?e+=e-t:a<e&&(e=a),e<0?e=0:e>r.width&&(e=r.width),this.el_.style.right="-"+e+"px"}this.write(n+"%")},t.write=function(e){Z(this.el_,e)},t.updateVolume=function(e,t,i,n,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){a.update(e,t,i,n.toFixed(0)),r&&r()})},e}(pt));I=function(i){function e(e,t){t=i.call(this,e,t)||this;return t.update=ze(We(ft(t),t.update),30),t}mt(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,t,i){var n=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,function(){i?n.el_.style.bottom=e.height*t+"px":n.el_.style.left=e.width*t+"px"})},e}(pt);I.prototype.options_={children:["volumeLevelTooltip"]},pt.registerComponent("MouseVolumeLevelDisplay",I);e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.on("slideractive",function(e){return i.updateLastVolume_(e)}),i.on(e,"volumechange",function(e){return i.updateARIAAttributes(e)}),e.ready(function(){return i.updateARIAAttributes()}),i}mt(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(e){be(e)&&n.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function(e){var t,i,n,r=this.getChild("mouseVolumeLevelDisplay");r&&(t=he(n=this.el()),i=this.vertical(),n=fe(n,e),n=i?n.y:n.x,n=un(n,0,1),r.update(t,n,i)),be(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},e}(r);e.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},V||P||e.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),e.prototype.playerEvent="volumechange",pt.registerComponent("VolumeBar",e);n=function(a){function e(e,t){var i,n,r;return(t=void 0===t?{}:t).vertical=t.vertical||!1,"undefined"!=typeof t.volumeBar&&!E(t.volumeBar)||(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),i=a.call(this,e,t)||this,n=ft(i),(r=e).tech_&&!r.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")}),i.throttledHandleMouseMove=ze(We(ft(i),i.handleMouseMove),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",function(e){return i.handleMouseDown(e)}),i.on("touchstart",function(e){return i.handleMouseDown(e)}),i.on("mousemove",function(e){return i.handleMouseMove(e)}),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}mt(e,a);var t=e.prototype;return t.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},e}(pt);n.prototype.options_={children:["volumeBar"]},pt.registerComponent("VolumeControl",n);x=function(a){function e(e,t){var i,n,r=a.call(this,e,t)||this;return i=ft(r),(n=e).tech_&&!n.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),r.on(e,["loadstart","volumechange"],function(e){return r.update(e)}),r}mt(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},t.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();0===t?(this.player_.volume(i<.1?.1:i),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},t.update=function(e){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var e=this.player_.volume(),t=3;V&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)ne(this.el_,"vjs-vol-"+i);ie(this.el_,"vjs-vol-"+t)},t.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e}(nn);x.prototype.controlText_="Mute",pt.registerComponent("MuteToggle",x);A=function(n){function e(e,t){var i;return"undefined"!=typeof(t=void 0===t?{}:t).inline?t.inline=t.inline:t.inline=!0,"undefined"!=typeof t.volumeControl&&!E(t.volumeControl)||(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(i=n.call(this,e,t)||this).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(e,["loadstart"],function(e){return i.volumePanelState_(e)}),i.on(i.muteToggle,"keyup",function(e){return i.handleKeyPress(e)}),i.on(i.volumeControl,"keyup",function(e){return i.handleVolumeControlKeyUp(e)}),i.on("keydown",function(e){return i.handleKeyPress(e)}),i.on("mouseover",function(e){return i.handleMouseOver(e)}),i.on("mouseout",function(e){return i.handleMouseOut(e)}),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}mt(e,n);var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},t.dispose=function(){this.handleMouseOut(),n.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(e){xt.isEventKey(e,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(e){this.addClass("vjs-hover"),Fe(d,"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(e){this.removeClass("vjs-hover"),je(d,"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(e){xt.isEventKey(e,"Esc")&&this.handleMouseOut()},e}(pt);A.prototype.options_={children:["muteToggle","volumeControl"]},pt.registerComponent("VolumePanel",A);var cn=function(n){function e(e,t){var i=n.call(this,e,t)||this;return t&&(i.menuButton_=t.menuButton),i.focusedChild_=-1,i.on("keydown",function(e){return i.handleKeyDown(e)}),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}mt(e,n);var t=e.prototype;return t.addEventListenerForItem=function(e){e instanceof pt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(e){e instanceof pt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),n.prototype.removeChild.call(this,e)},t.addItem=function(e){e=this.addChild(e);e&&this.addEventListenerForItem(e)},t.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=J(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");e=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),Fe(e,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),e},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,n.prototype.dispose.call(this)},t.handleBlur=function(e){var t=e.relatedTarget||d.activeElement;this.children().some(function(e){return e.el()===t})||(e=this.menuButton_)&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()},t.handleTapClick=function(t){var e;this.menuButton_&&(this.menuButton_.unpressButton(),e=this.children(),!Array.isArray(e)||(e=e.filter(function(e){return e.el()===t.target})[0])&&"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())},t.handleKeyDown=function(e){xt.isEventKey(e,"Left")||xt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(xt.isEventKey(e,"Right")||xt.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},t.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},e}(pt);pt.registerComponent("Menu",cn);H=function(n){function e(e,t){var i;(i=n.call(this,e,t=void 0===t?{}:t)||this).menuButton_=new nn(e,t),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");t=nn.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+t,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;t=function(e){return i.handleClick(e)};return i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",t),i.on(i.menuButton_,"click",t),i.on(i.menuButton_,"keydown",function(e){return i.handleKeyDown(e)}),i.on(i.menuButton_,"mouseenter",function(){i.addClass("vjs-hover"),i.menu.show(),Fe(d,"keyup",i.handleMenuKeyUp_)}),i.on("mouseleave",function(e){return i.handleMouseLeave(e)}),i.on("keydown",function(e){return i.handleSubmenuKeyDown(e)}),i}mt(e,n);var t=e.prototype;return t.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.createMenu=function(){var e,t=new cn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(e=J("li",{className:"vjs-menu-title",innerHTML:lt(this.options_.title),tabIndex:-1}),e=new pt(this.player_,{el:e}),t.addItem(e)),this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)t.addItem(this.items[i]);return t},t.createItems=function(){},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+nn.prototype.buildCSSClass()+" "+n.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+n.prototype.buildCSSClass.call(this)},t.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},t.dispose=function(){this.handleMouseLeave(),n.prototype.dispose.call(this)},t.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(e){this.removeClass("vjs-hover"),je(d,"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(e){xt.isEventKey(e,"Esc")||xt.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),xt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(xt.isEventKey(e,"Up")||xt.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(e){(xt.isEventKey(e,"Esc")||xt.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},t.handleSubmenuKeyDown=function(e){(xt.isEventKey(e,"Esc")||xt.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),xt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),V&&Q()||this.menu.focus())},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(pt);pt.registerComponent("MenuButton",H);rn=function(r){function e(e,t){var i=t.tracks,t=r.call(this,e,t)||this;if(t.items.length<=1&&t.hide(),!i)return ft(t);var n=We(ft(t),t.update);return i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),i.addEventListener("labelchange",n),t.player_.on("ready",n),t.player_.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n),i.removeEventListener("labelchange",n)}),t}return mt(e,r),e}(H);pt.registerComponent("TrackButton",rn);var dn=["Tab","Esc","Up","Down","Right","Left"],w=function(n){function e(e,t){e=n.call(this,e,t)||this;return e.selectable=t.selectable,e.isSelected_=t.selected||!1,e.multiSelectable=t.multiSelectable,e.selected(e.isSelected_),e.selectable?e.multiSelectable?e.el_.setAttribute("role","menuitemcheckbox"):e.el_.setAttribute("role","menuitemradio"):e.el_.setAttribute("role","menuitem"),e}mt(e,n);var t=e.prototype;return t.createEl=function(e,t,i){return this.nonIconControl=!0,n.prototype.createEl.call(this,"li",T({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),i)},t.handleKeyDown=function(t){dn.some(function(e){return xt.isEventKey(t,e)})||n.prototype.handleKeyDown.call(this,t)},t.handleClick=function(e){this.selected(!0)},t.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(B);pt.registerComponent("MenuItem",w);var hn=function(u){function e(e,t){var n,i=t.track,r=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected="showing"===i.mode,(n=u.call(this,e,t)||this).track=i,n.kinds=(t.kinds||[t.kind||n.track.kind]).filter(Boolean);function a(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(ft(n),t)}function s(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleSelectedLanguageChange.apply(ft(n),t)}var o;return e.on(["loadstart","texttrackchange"],a),r.addEventListener("change",a),r.addEventListener("selectedlanguagechange",s),n.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),r.removeEventListener("change",a),r.removeEventListener("selectedlanguagechange",s)}),void 0===r.onchange&&n.on(["tap","click"],function(){if("object"!=typeof _.Event)try{o=new _.Event("change")}catch(e){}o||(o=d.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(o)}),n.handleTracksChange(),n}mt(e,u);var t=e.prototype;return t.handleClick=function(e){var t=this.track,i=this.player_.textTracks();if(u.prototype.handleClick.call(this,e),i)for(var n=0;n<i.length;n++){var r=i[n];-1!==this.kinds.indexOf(r.kind)&&(r===t?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}},t.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.handleSelectedLanguageChange=function(e){var t;"showing"===this.track.mode&&((t=this.player_.cache_.selectedLanguage)&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))},t.dispose=function(){this.track=null,u.prototype.dispose.call(this)},e}(w);pt.registerComponent("TextTrackMenuItem",hn);var pn=function(i){function e(e,t){return t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,i.call(this,e,t)||this}mt(e,i);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},t.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(hn);pt.registerComponent("OffTextTrackMenuItem",pn);Ft=function(i){function e(e,t){return(t=void 0===t?{}:t).tracks=e.textTracks(),i.call(this,e,t)||this}return mt(e,i),e.prototype.createItems=function(e,t){var i;void 0===t&&(t=hn),this.label_&&(i=this.label_+" off"),(e=void 0===e?[]:e).push(new pn(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var a,s=n[r];-1<this.kinds_.indexOf(s.kind)&&((a=new t(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass("vjs-"+s.kind+"-menu-item"),e.push(a))}return e},e}(rn);pt.registerComponent("TextTrackButton",Ft);var fn=function(a){function e(e,t){var i=t.track,n=t.cue,r=e.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=n.text,t.selected=n.startTime<=r&&r<n.endTime,(t=a.call(this,e,t)||this).track=i,t.cue=n,i.addEventListener("cuechange",We(ft(t),t.update)),t}mt(e,a);var t=e.prototype;return t.handleClick=function(e){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},e}(w);pt.registerComponent("ChaptersTrackMenuItem",fn);I=function(n){function e(e,t,i){return n.call(this,e,t,i)||this}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},t.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),n.prototype.update.call(this)},t.setTrack=function(e){var t;this.track_!==e&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.removeEventListener("load",this.updateHandler_),this.track_=null),this.track_=e,this.track_&&(this.track_.mode="hidden",(e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&e.addEventListener("load",this.updateHandler_)))},t.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var i=e[t];if(i.kind===this.kind_)return i}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(lt(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},t.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],r=new fn(this.player_,{track:this.track_,cue:r});e.push(r)}return e},e}(Ft);I.prototype.kind_="chapters",I.prototype.controlText_="Chapters",pt.registerComponent("ChaptersButton",I);r=function(a){function e(e,t,i){var i=a.call(this,e,t,i)||this,n=e.textTracks(),r=We(ft(i),i.handleTracksChange);return n.addEventListener("change",r),i.on("dispose",function(){n.removeEventListener("change",r)}),i}mt(e,a);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var a=t[n];if(a.kind!==this.kind_&&"showing"===a.mode){i=!0;break}}i?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},e}(Ft);r.prototype.kind_="descriptions",r.prototype.controlText_="Descriptions",pt.registerComponent("DescriptionsButton",r);e=function(n){function e(e,t,i){return n.call(this,e,t,i)||this}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},e}(Ft);e.prototype.kind_="subtitles",e.prototype.controlText_="Subtitles",pt.registerComponent("SubtitlesButton",e);var mn=function(i){function e(e,t){return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(e=i.call(this,e,t)||this).addClass("vjs-texttrack-settings"),e.controlText(", opens "+t.kind+" settings dialog"),e}return mt(e,i),e.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},e}(hn);pt.registerComponent("CaptionSettingsMenuItem",mn);n=function(n){function e(e,t,i){return n.call(this,e,t,i)||this}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new mn(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,e)},e}(Ft);n.prototype.kind_="captions",n.prototype.controlText_="Captions",pt.registerComponent("CaptionsButton",n);var gn=function(r){function e(){return r.apply(this,arguments)||this}return mt(e,r),e.prototype.createEl=function(e,t,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r.prototype.createEl.call(this,e,T({innerHTML:n+="</span>"},t),i)},e}(hn);pt.registerComponent("SubsCapsMenuItem",gn);x=function(i){function e(e,t){return(t=i.call(this,e,t=void 0===t?{}:t)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(t.player_.language_)&&(t.label_="captions"),t.menuButton_.controlText(lt(t.label_)),t}mt(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new mn(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=i.prototype.createItems.call(this,e,gn)},e}(Ft);x.prototype.kinds_=["captions","subtitles"],x.prototype.controlText_="Subtitles",pt.registerComponent("SubsCapsButton",x);var yn=function(s){function e(e,t){var n,i=t.track,r=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,(n=s.call(this,e,t)||this).track=i,n.addClass("vjs-"+i.kind+"-menu-item");function a(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(ft(n),t)}return r.addEventListener("change",a),n.on("dispose",function(){r.removeEventListener("change",a)}),n}mt(e,s);var t=e.prototype;return t.createEl=function(e,t,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),s.prototype.createEl.call(this,e,T({innerHTML:n+="</span>"},t),i)},t.handleClick=function(e){s.prototype.handleClick.call(this,e),this.track.enabled=!0},t.handleTracksChange=function(e){this.selected(this.track.enabled)},e}(w);pt.registerComponent("AudioTrackMenuItem",yn);A=function(i){function e(e,t){return(t=void 0===t?{}:t).tracks=e.audioTracks(),i.call(this,e,t)||this}mt(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new yn(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},e}(rn);A.prototype.controlText_="Audio Track",pt.registerComponent("AudioTrackButton",A);var vn=function(a){function e(e,t){var i,n=t.rate,r=parseFloat(n,10);return t.label=n,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,(i=a.call(this,e,t)||this).label=n,i.rate=r,i.on(e,"ratechange",function(e){return i.update(e)}),i}mt(e,a);var t=e.prototype;return t.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(e){this.selected(this.player().playbackRate()===this.rate)},e}(w);vn.prototype.contentElType="button",pt.registerComponent("PlaybackRateMenuItem",vn);B=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(e,"loadstart",function(e){return i.updateVisibility(e)}),i.on(e,"ratechange",function(e){return i.updateLabel(e)}),i.on(e,"playbackrateschange",function(e){return i.handlePlaybackRateschange(e)}),i}mt(e,n);var t=e.prototype;return t.createEl=function(){var e=n.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=J("div",{className:"vjs-playback-rate-value",id:this.labelElId_,innerHTML:"1x"}),e.appendChild(this.labelEl_),e},t.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var e=this.playbackRates(),t=[],i=e.length-1;0<=i;i--)t.push(new vn(this.player(),{rate:e[i]+"x"}));return t},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},t.handlePlaybackRateschange=function(e){this.update()},t.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},t.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(H);B.prototype.controlText_="Playback Rate",pt.registerComponent("PlaybackRateMenuButton",B);I=function(e){function t(){return e.apply(this,arguments)||this}mt(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(pt);pt.registerComponent("Spacer",I),pt.registerComponent("CustomControlSpacer",function(t){function e(){return t.apply(this,arguments)||this}mt(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="",e},e}(I));r=function(e){function t(){return e.apply(this,arguments)||this}return mt(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(pt);r.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in d&&r.prototype.options_.children.splice(r.prototype.options_.children.length-1,0,"pictureInPictureToggle"),pt.registerComponent("ControlBar",r);e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.on(e,"error",function(e){return i.open(e)}),i}mt(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},t.content=function(){var e=this.player().error();return e?this.localize(e.message):""},e}(Pt);e.prototype.options_=g({},Pt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),pt.registerComponent("ErrorDisplay",e);var _n="vjs-text-track-settings",n=["#000","Black"],Ft=["#00F","Blue"],x=["#0FF","Cyan"],rn=["#0F0","Green"],A=["#F0F","Magenta"],w=["#F00","Red"],H=["#FFF","White"],B=["#FF0","Yellow"],I=["1","Opaque"],r=["0.5","Semi-Transparent"],e=["0","Transparent"],bn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[n,H,w,rn,Ft,B,A,x]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[I,r,e]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[H,n,w,rn,Ft,B,A,x]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[I,r]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[e,r,I]}};function Tn(e,t){if((e=t?t(e):e)&&"none"!==e)return e}bn.windowColor.options=bn.backgroundColor.options,pt.registerComponent("TextTrackSettings",function(n){function e(e,t){var i;return t.temporary=!1,(i=n.call(this,e,t)||this).updateDisplay=i.updateDisplay.bind(ft(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=J("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===t.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),b(bn,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}mt(e,n);var t=e.prototype;return t.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var e=bn[e],r=e.id.replace("%s",this.id_),a=[t,r].join(" ").trim();return["<"+i+' id="'+r+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(e.label),"</"+i+">",'<select aria-labelledby="'+a+'">'].concat(e.options.map(function(e){var t=r+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+a+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return J("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return J("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var e=this.localize("restore all settings to the default values");return J("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var i,n,e,r=this;return n=function(e,t,i){var n,t=(n=r.$(t.selector),t=t.parser,Tn(n.options[n.options.selectedIndex].value,t));return void 0!==t&&(e[i]=t),e},void 0===(e={})&&(e=0),v(i=bn).reduce(function(e,t){return n(e,i[t],t)},e)},t.setValues=function(i){var n=this;b(bn,function(e,t){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(Tn(e.options[n].value,i)===t){e.selectedIndex=n;break}}(n.$(e.selector),i[t],e.parser)})},t.setDefaults=function(){var i=this;b(bn,function(e){var t=e.hasOwnProperty("default")?e.default:0;i.$(e.selector).selectedIndex=t})},t.restoreSettings=function(){var e;try{e=JSON.parse(_.localStorage.getItem(_n))}catch(e){f.warn(e)}e&&this.setValues(e)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?_.localStorage.setItem(_n,JSON.stringify(e)):_.localStorage.removeItem(_n)}catch(e){f.warn(e)}}},t.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,e=e&&e.captionsButton;t?t.focus():e&&e.focus()},e}(Pt)),pt.registerComponent("ResizeManager",function(a){function e(e,t){var i,n=t.ResizeObserver||_.ResizeObserver,r=ct({createEl:!(n=null===t.ResizeObserver?!1:n),reportTouchActivity:!1},t);return(i=a.call(this,e,r)||this).ResizeObserver=t.ResizeObserver||_.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=Ge(function(){i.resizeHandler()},100,!1,ft(i)),n?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(e.el())):(i.loadListener_=function(){var e,t;i.el_&&i.el_.contentWindow&&(e=i.debouncedHandler_,t=i.unloadListener_=function(){je(this,"resize",e),je(this,"unload",t),t=null},Fe(i.el_.contentWindow,"unload",t),Fe(i.el_.contentWindow,"resize",e))},i.one("load",i.loadListener_)),i}mt(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},t.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},e}(pt));var Sn={trackingThreshold:30,liveTolerance:15};pt.registerComponent("LiveTracker",function(n){function e(e,t){var t=ct(Sn,t,{createEl:!1}),i=n.call(this,e,t)||this;return i.handleVisibilityChange_=function(e){return i.handleVisibilityChange(e)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",function(e){return i.handleDurationchange(e)}),i.one(i.player_,"canplay",function(){return i.toggleTracking()}),U&&"hidden"in d&&"visibilityState"in d&&i.on(d,"visibilitychange",i.handleVisibilityChange_),i}mt(e,n);var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(d.hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var e,t=this.player_.seekable();t&&t.length&&(e=Number(_.performance.now().toFixed(4)),t=-1===this.lastTime_?0:(e-this.lastTime_)/1e3,this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+t,e=this.liveCurrentTime(),t=this.player_.currentTime(),t=this.player_.paused()||this.seekedBehindLive_||Math.abs(e-t)>this.options_.liveTolerance,(t=!this.timeupdateSeen_||e===1/0?!1:t)!==this.behindLiveEdge_&&(this.behindLiveEdge_=t,this.trigger("liveedgechange")))},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<e,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},t.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},t.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(d,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),n.prototype.dispose.call(this)},e}(pt));function En(e){if((n=e.el()).hasAttribute("src"))return e.triggerSourceset(n.src),1;var t=e.$$("source"),i=[],n="";if(t.length){for(var r=0;r<t.length;r++){var a=t[r].src;a&&-1===i.indexOf(a)&&i.push(a)}return!!i.length&&(1===i.length&&(n=i[0]),e.triggerSourceset(n),!0)}}function kn(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i}function Cn(a){var t,e,i,s=a.el();s.resetSourceWatch_||(t={},e=kn([a.el(),_.HTMLMediaElement.prototype,_.Element.prototype,An],"innerHTML"),i=function(r){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=r.apply(s,t);return En(a),n}},["append","appendChild","insertAdjacentHTML"].forEach(function(e){s[e]&&(t[e]=s[e],s[e]=i(t[e]))}),Object.defineProperty(s,"innerHTML",ct(e,{set:i(e.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.defineProperty(s,"innerHTML",e)},a.one("sourceset",s.resetSourceWatch_))}function wn(i){var n,t,r,a;i.featuresSourceset&&((n=i.el()).resetSourceset_||(t=kn([i.el(),_.HTMLMediaElement.prototype,Pn],"src"),r=n.setAttribute,a=n.load,Object.defineProperty(n,"src",ct(t,{set:function(e){e=t.set.call(n,e);return i.triggerSourceset(n.src),e}})),n.setAttribute=function(e,t){t=r.call(n,e,t);return/src/i.test(e)&&i.triggerSourceset(n.src),t},n.load=function(){var e=a.call(n);return En(i)||(i.triggerSourceset(""),Cn(i)),e},n.currentSrc?i.triggerSourceset(n.currentSrc):En(i)||Cn(i),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=a,n.setAttribute=r,Object.defineProperty(n,"src",t),n.resetSourceWatch_&&n.resetSourceWatch_()}))}function In(t,i,n,e){function r(e){return Object.defineProperty(t,i,{value:e,enumerable:!0,writable:!0})}var a={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return(e=void 0===e?!0:e)&&(a.set=r),Object.defineProperty(t,i,a)}var xn,An=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=d.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=d.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",_.Element.prototype.appendChild.call(this,i),this.innerHTML}}),Pn=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Nt(_.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return _.Element.prototype.setAttribute.call(this,"src",e),e}}),Ln=function(l){function s(e,t){var i=l.call(this,e,t)||this,t=e.source,n=!1;if(t&&(i.el_.currentSrc!==t.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(t):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var r=i.el_.childNodes,a=r.length,s=[];a--;){var o=r[a];"track"===o.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(o),i.remoteTextTracks().addTrack(o.track),i.textTracks().addTrack(o.track),n||i.el_.hasAttribute("crossorigin")||!Bt(o.src)||(n=!0)):s.push(o))}for(var u=0;u<s.length;u++)i.el_.removeChild(s[u])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&n&&f.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(j||q||D)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}mt(s,l);var e=s.prototype;return e.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),s.disposeMediaElement(this.el_),this.options_=null,l.prototype.dispose.call(this)},e.setupSourcesetHandling_=function(){wn(this)},e.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){i=[];for(var e=0;e<n.length;e++){var t=n[e];"metadata"===t.kind&&i.push({track:t,storedMode:t.mode})}}var i,n=this.textTracks();e(),n.addEventListener("change",e),this.on("dispose",function(){return n.removeEventListener("change",e)});function r(){for(var e=0;e<i.length;e++){var t=i[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}n.removeEventListener("change",r)}this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",e),n.removeEventListener("change",r),n.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",r)})},e.overrideNative_=function(e,t){var i,n=this;t===this["featuresNative"+e+"Tracks"]&&(this[(i=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i))},e.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},e.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},e.proxyNativeTracksForType_=function(i){var e,t,n=this,r=ri[i],a=this.el()[r.getterName],s=this[r.getterName]();this["featuresNative"+r.capitalName+"Tracks"]&&a&&a.addEventListener&&(t=function(){for(var e=[],t=0;t<s.length;t++){for(var i=!1,n=0;n<a.length;n++)if(a[n]===s[t]){i=!0;break}i||e.push(s[t])}for(;e.length;)s.removeTrack(e.shift())},this[r.getterName+"Listeners_"]=e={change:function(e){var t={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(t),"text"===i&&n[ai.remoteText.getterName]().trigger(t)},addtrack:function(e){s.addTrack(e.track)},removetrack:function(e){s.removeTrack(e.track)}},Object.keys(e).forEach(function(t){var i=e[t];a.addEventListener(t,i),n.on("dispose",function(e){return a.removeEventListener(t,i)})}),this.on("loadstart",t),this.on("dispose",function(e){return n.off("loadstart",t)}))},e.proxyNativeTracks_=function(){var t=this;ri.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},e.createEl=function(){var e,t=this.options_.tag;t&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(t?(e=t.cloneNode(!0),t.parentNode&&t.parentNode.insertBefore(e,t),s.disposeMediaElement(t),t=e):(t=d.createElement("video"),e=ct({},this.options_.tag&&se(this.options_.tag)),j&&!0===this.options_.nativeControlsForTouch||delete e.controls,ae(t,T(e,{id:this.options_.techId,class:"vjs-tech"}))),t.playerId=this.options_.playerId),"undefined"!=typeof this.options_.preload&&ue(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],n=0;n<i.length;n++){var r=i[n],a=this.options_[r];"undefined"!=typeof a&&(a?ue(t,r,r):le(t,r),t[r]=a)}return t},e.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},e.setScrubbing=function(e){this.isScrubbing_=e},e.scrubbing=function(){return this.isScrubbing_},e.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&W?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){f(e,"Video is not ready. (Video.js)")}},e.duration=function(){var t=this;return this.el_.duration===1/0&&P&&M&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},e.width=function(){return this.el_.offsetWidth},e.height=function(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=function(){var e,t,i=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))},this.on("webkitbeginfullscreen",t),this.on("dispose",function(){i.off("webkitbeginfullscreen",t),i.off("webkitendfullscreen",e)}))},e.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=_.navigator&&_.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},e.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)kt(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},e.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},e.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},e.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},e.reset=function(){s.resetMediaElement(this.el_)},e.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.setControls=function(e){this.el_.controls=!!e},e.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):l.prototype.addTextTrack.call(this,e,t,i)},e.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return l.prototype.createRemoteTextTrack.call(this,e);var t=d.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},e.addRemoteTextTrack=function(e,t){t=l.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(t),t},e.removeRemoteTextTrack=function(e){if(l.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},e.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),_.performance&&"function"==typeof _.performance.now?e.creationTime=_.performance.now():_.performance&&_.performance.timing&&"number"==typeof _.performance.timing.navigationStart&&(e.creationTime=_.Date.now()-_.performance.timing.navigationStart),e},s}(Ui);In(Ln,"TEST_VID",function(){if(K()){var e=d.createElement("video"),t=d.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),Ln.isSupported=function(){try{Ln.TEST_VID.volume=.5}catch(e){return!1}return!(!Ln.TEST_VID||!Ln.TEST_VID.canPlayType)},Ln.canPlayType=function(e){return Ln.TEST_VID.canPlayType(e)},Ln.canPlaySource=function(e,t){return Ln.canPlayType(e.type)},Ln.canControlVolume=function(){try{var e=Ln.TEST_VID.volume;return Ln.TEST_VID.volume=e/2+.1,e!==Ln.TEST_VID.volume}catch(e){return!1}},Ln.canMuteVolume=function(){try{var e=Ln.TEST_VID.muted;return Ln.TEST_VID.muted=!e,Ln.TEST_VID.muted?ue(Ln.TEST_VID,"muted","muted"):le(Ln.TEST_VID,"muted"),e!==Ln.TEST_VID.muted}catch(e){return!1}},Ln.canControlPlaybackRate=function(){if(P&&M&&N<58)return!1;try{var e=Ln.TEST_VID.playbackRate;return Ln.TEST_VID.playbackRate=e/2+.1,e!==Ln.TEST_VID.playbackRate}catch(e){return!1}},Ln.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(d.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ln.supportsNativeTextTracks=function(){return W||V&&M},Ln.supportsNativeVideoTracks=function(){return!(!Ln.TEST_VID||!Ln.TEST_VID.videoTracks)},Ln.supportsNativeAudioTracks=function(){return!(!Ln.TEST_VID||!Ln.TEST_VID.audioTracks)},Ln.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],i=e[1];In(Ln.prototype,t,function(){return Ln[i]()},!0)}),Ln.prototype.movingMediaElementInDOM=!V,Ln.prototype.featuresFullscreenResize=!0,Ln.prototype.featuresProgressEvents=!0,Ln.prototype.featuresTimeupdateEvents=!0,Ln.patchCanPlayType=function(){4<=L&&!O&&!M&&(xn=Ln.TEST_VID&&Ln.TEST_VID.constructor.prototype.canPlayType,Ln.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":xn.call(this,e)})},Ln.unpatchCanPlayType=function(){var e=Ln.TEST_VID.constructor.prototype.canPlayType;return xn&&(Ln.TEST_VID.constructor.prototype.canPlayType=xn),e},Ln.patchCanPlayType(),Ln.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ln.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Ln.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Ln.prototype["set"+lt(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){Ln.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Ln.prototype["set"+lt(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){Ln.prototype[e]=function(){return this.el_[e]()}}),Ui.withSourceHandlers(Ln),Ln.nativeSourceHandler={},Ln.nativeSourceHandler.canPlayType=function(e){try{return Ln.TEST_VID.canPlayType(e)}catch(e){return""}},Ln.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ln.nativeSourceHandler.canPlayType(e.type);if(e.src){e=Ut(e.src);return Ln.nativeSourceHandler.canPlayType("video/"+e)}return""},Ln.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},Ln.nativeSourceHandler.dispose=function(){},Ln.registerSourceHandler(Ln.nativeSourceHandler),Ui.registerTech("Html5",Ln);var Dn=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],On={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Rn=["tiny","xsmall","small","medium","large","xlarge","huge"],Mn={};Rn.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Mn[e]="vjs-layout-"+t});var Nn={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Un=function(c){function o(e,t,i){var n,r;if(e.id=e.id||t.id||"vjs_video_"+Le++,(t=T(o.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var a=e.closest("[lang]");a&&a.getAttribute&&(t.language=a.getAttribute("lang"))}else for(var s=e;s&&1===s.nodeType;){if(se(s).hasOwnProperty("lang")){t.language=s.getAttribute("lang");break}s=s.parentNode}if((n=c.call(this,null,t,i)||this).boundDocumentFullscreenChange_=function(e){return n.documentFullscreenChange_(e)},n.boundFullWindowOnEscKey_=function(e){return n.fullWindowOnEscKey(e)},n.boundUpdateStyleEl_=function(e){return n.updateStyleEl_(e)},n.boundApplyInitTime_=function(e){return n.applyInitTime_(e)},n.boundUpdateCurrentBreakpoint_=function(e){return n.updateCurrentBreakpoint_(e)},n.boundHandleTechClick_=function(e){return n.handleTechClick_(e)},n.boundHandleTechDoubleClick_=function(e){return n.handleTechDoubleClick_(e)},n.boundHandleTechTouchStart_=function(e){return n.handleTechTouchStart_(e)},n.boundHandleTechTouchMove_=function(e){return n.handleTechTouchMove_(e)},n.boundHandleTechTouchEnd_=function(e){return n.handleTechTouchEnd_(e)},n.boundHandleTechTap_=function(e){return n.handleTechTap_(e)},n.isFullscreen_=!1,n.log=m(n.id_),n.fsApi_=l,n.isPosterFromTech_=!1,n.queuedCallbacks_=[],n.isReady_=!1,n.hasStarted_=!1,n.userActive_=!1,n.debugEnabled_=!1,!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");n.tag=e,n.tagAttributes=e&&se(e),n.language(n.options_.language),t.languages?(r={},Object.getOwnPropertyNames(t.languages).forEach(function(e){r[e.toLowerCase()]=t.languages[e]}),n.languages_=r):n.languages_=o.prototype.options_.languages,n.resetCache_(),n.poster_=t.poster||"",n.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),n.changingSrc_=!1,n.playCallbacks_=[],n.playTerminatedQueue_=[],e.hasAttribute("autoplay")?n.autoplay(!0):n.autoplay(n.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(e){if("function"!=typeof n[e])throw new Error('plugin "'+e+'" does not exist')}),n.scrubbing_=!1,n.el_=n.createEl(),at(ft(n),{eventBusKey:"el_"}),n.fsApi_.requestFullscreen&&(Fe(d,n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_),n.on(n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_)),n.fluid_&&n.on(["playerreset","resize"],n.boundUpdateStyleEl_);i=ct(n.options_);t.plugins&&Object.keys(t.plugins).forEach(function(e){n[e](t.plugins[e])}),t.debug&&n.debug(!0),n.options_.playerOptions=i,n.middleware_=[],n.playbackRates(t.playbackRates),n.initChildren(),n.isAudio("audio"===e.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label",n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player")),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),j&&n.addClass("vjs-touch-enabled"),V||n.addClass("vjs-workinghover"),o.players[n.id_]=ft(n);e=u.split(".")[0];return n.addClass("vjs-v"+e),n.userActive(!0),n.reportUserActivity(),n.one("play",function(e){return n.listenForUserActivity_(e)}),n.on("stageclick",function(e){return n.handleStageClick_(e)}),n.on("keydown",function(e){return n.handleKeyDown(e)}),n.on("languagechange",function(e){return n.handleLanguagechange(e)}),n.breakpoints(n.options_.breakpoints),n.responsive(n.options_.responsive),n}mt(o,c);var e=o.prototype;return e.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),je(d,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),je(d,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),o.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Fi[this.id()]=null,si.names.forEach(function(e){e=si[e],e=t[e.getterName]();e&&e.off&&e.off()}),c.prototype.dispose.call(this)},e.createEl=function(){var t,i=this.tag,e=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();e?t=this.el_=i.parentNode:n||(t=this.el_=c.prototype.createEl.call(this,"div"));var r,a,s=se(i);if(n){for(t=this.el_=i,i=this.tag=d.createElement("video");t.children.length;)i.appendChild(t.firstChild);te(t,"video-js")||ie(t,"video-js"),t.appendChild(i),e=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{i[e]=t[e]}catch(e){}})}i.setAttribute("tabindex","-1"),s.tabindex="-1",(U||M&&F)&&(i.setAttribute("role","application"),s.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(e){n&&"class"===e||t.setAttribute(e,s[e]),n&&i.setAttribute(e,s[e])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",(i.player=t.player=this).addClass("vjs-paused"),!0!==_.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=Ae("vjs-styles-dimensions"),r=Se(".vjs-styles-defaults"),(a=Se("head")).insertBefore(this.styleEl_,r?r.nextSibling:a.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var o=i.getElementsByTagName("a"),u=0;u<o.length;u++){var l=o.item(u);ie(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!e&&i.parentNode.insertBefore(t,i),ee(i,t),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=t},e.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):f.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},e.width=function(e){return this.dimension("width",e)},e.height=function(e){return this.dimension("height",e)},e.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t||"auto"===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?f.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},e.fluid=function(e){var t,i=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,nt(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),t=function(){i.on(["playerreset","resize"],i.boundUpdateStyleEl_)},nt(e=this)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},e.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},e.updateStyleEl_=function(){var e,t,i,n;!0!==_.VIDEOJS_NO_DYNAMIC_STYLE?(n=(i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/i[0],e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/n:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*n,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Pe(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*n+"%;\n      }\n    ")):(t="number"==typeof this.width_?this.width_:this.options_.width,i="number"==typeof this.height_?this.height_:this.options_.height,(n=this.tech_&&this.tech_.el())&&(0<=t&&(n.width=t),0<=i&&(n.height=i)))},e.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=lt(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(Ui.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var a=this.autoplay(),s={source:t,autoplay:a="string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay?!1:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};si.names.forEach(function(e){e=si[e];s[e.getterName]=i[e.privateName]}),T(s,this.options_[n]),T(s,this.options_[r]),T(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime);e=Ui.getTech(e);if(!e)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new e(s),this.tech_.ready(We(this,this.handleTechReady_),!0),It(this.textTracksJson_||[],this.tech_),Dn.forEach(function(t){i.on(i.tech_,t,function(e){return i["handleTech"+lt(t)+"_"](e)})}),Object.keys(On).forEach(function(t){i.on(i.tech_,t,function(e){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+On[t]+"_"].bind(i),event:e}):i["handleTech"+On[t]+"_"](e)})}),this.on(this.tech_,"loadstart",function(e){return i.handleTechLoadStart_(e)}),this.on(this.tech_,"sourceset",function(e){return i.handleTechSourceset_(e)}),this.on(this.tech_,"waiting",function(e){return i.handleTechWaiting_(e)}),this.on(this.tech_,"ended",function(e){return i.handleTechEnded_(e)}),this.on(this.tech_,"seeking",function(e){return i.handleTechSeeking_(e)}),this.on(this.tech_,"play",function(e){return i.handleTechPlay_(e)}),this.on(this.tech_,"firstplay",function(e){return i.handleTechFirstPlay_(e)}),this.on(this.tech_,"pause",function(e){return i.handleTechPause_(e)}),this.on(this.tech_,"durationchange",function(e){return i.handleTechDurationChange_(e)}),this.on(this.tech_,"fullscreenchange",function(e,t){return i.handleTechFullscreenChange_(e,t)}),this.on(this.tech_,"fullscreenerror",function(e,t){return i.handleTechFullscreenError_(e,t)}),this.on(this.tech_,"enterpictureinpicture",function(e){return i.handleTechEnterPictureInPicture_(e)}),this.on(this.tech_,"leavepictureinpicture",function(e){return i.handleTechLeavePictureInPicture_(e)}),this.on(this.tech_,"error",function(e){return i.handleTechError_(e)}),this.on(this.tech_,"posterchange",function(e){return i.handleTechPosterChange_(e)}),this.on(this.tech_,"textdata",function(e){return i.handleTechTextData_(e)}),this.on(this.tech_,"ratechange",function(e){return i.handleTechRateChange_(e)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||ee(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.unloadTech_=function(){var t=this;si.names.forEach(function(e){e=si[e];t[e.privateName]=t[e.getterName]()}),this.textTracksJson_=wt(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.tech=function(e){return void 0===e&&f.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},e.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},e.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"mouseup",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},e.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},e.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},e.manualAutoplay_=function(t){var n=this;if(this.tech_&&"string"==typeof t){var e,i=function(){var e=n.muted();n.muted(!0);function t(){n.muted(e)}n.playTerminatedQueue_.push(t);var i=n.play();if(Et(i))return i.catch(t)};if("any"===t&&!0!==this.muted()?Et(e=this.play())&&(e=e.catch(i)):e="muted"===t&&!0!==this.muted()?i():this.play(),Et(e))return e.then(function(){n.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){n.trigger({type:"autoplay-failure",autoplay:t})})}},e.updateSourceCaches_=function(e){var t=e=void 0===e?"":e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var a=n[r];if(a.type&&a.src&&a.src===t)return a.type}return Ki(t)}(this,t)),this.cache_.source=ct({},e,{src:t,type:i});for(var i=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),n=[],r=this.$$("source"),a=[],s=0;s<r.length;s++){var o=se(r[s]);n.push(o),o.src&&o.src===t&&a.push(o.src)}a.length&&!i.length?this.cache_.sources=n:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},e.handleTechSourceset_=function(e){var t,i,n,r=this;this.changingSrc_||(t=function(e){return r.updateSourceCaches_(e)},i=this.currentSource().src,n=e.src,i&&!/^blob:/.test(i)&&/^blob:/.test(n)&&(this.lastSource_&&(this.lastSource_.tech===n||this.lastSource_.player===i)||(t=function(){})),t(n),e.src||this.tech_.any(["sourceset","loadstart"],function(e){"sourceset"!==e.type&&(e=r.techGet("currentSrc"),r.lastSource_.tech=e,r.updateSourceCaches_(e))})),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},e.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var i=this.currentTime();this.on("timeupdate",function e(){i!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",e))})},e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},e.handleTechFirstPlay_=function(){this.options_.starttime&&(f.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.handleTechClick_=function(e){be(e)&&this.controls_&&(this.paused()?kt(this.play()):this.pause())},e.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},e.handleTechTap_=function(){this.userActive(!this.userActive())},e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},e.handleStageClick_=function(){this.reportUserActivity()},e.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.documentFullscreenChange_=function(e){var t=e.target.player;t&&t!==this||(e=this.el(),!(t=d[this.fsApi_.fullscreenElement]===e)&&e.matches?t=e.matches(":"+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(t))},e.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},e.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},e.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},e.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},e.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},e.handleTechError_=function(){var e=this.tech_.error();this.error(e)},e.handleTechTextData_=function(){this.trigger("textdata",1<arguments.length?arguments[1]:null)},e.getCache=function(){return this.cache_},e.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},e.techCall_=function(n,r){this.ready(function(){if(n in Wi)return e=this.middleware_,t=this.tech_,i=r,t[t=n](e.reduce(Gi(t),i));if(n in zi)return qi(this.middleware_,this.tech_,n,r);var e,t,i;try{this.tech_&&this.tech_[n](r)}catch(e){throw f(e),e}},!0)},e.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Vi)return e=this.middleware_,i=this.tech_,n=t,e.reduceRight(Gi(n),i[n]());if(t in zi)return qi(this.middleware_,this.tech_,t);var e,i,n;try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw f("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw f("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw f(e),e}}},e.play=function(){var t=this,e=this.options_.Promise||_.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},e.play_=function(e){var t=this;this.playCallbacks_.push(e=void 0===e?kt:e);e=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!e)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(e||!W&&!V||this.load());e=this.techGet_("play");null===e?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(e)},e.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},e.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},e.pause=function(){this.techCall_("pause")},e.paused=function(){return!1!==this.techGet_("paused")},e.played=function(){return this.techGet_("played")||vt(0,0)},e.scrubbing=function(e){if("undefined"==typeof e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.currentTime=function(e){return"undefined"!=typeof e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},e.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},e.remainingTime=function(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.buffered=function(){var e;return e=!(e=this.techGet_("buffered"))||!e.length?vt(0,0):e},e.bufferedPercent=function(){return _t(this.buffered(),this.duration())},e.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),e=e.end(e.length-1);return e=t<e?t:e},e.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},e.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},e.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},e.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},e.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},e.requestFullscreen=function(s){var e=this.options_.Promise||_.Promise;if(e){var o=this;return new e(function(e,i){function n(){o.off("fullscreenerror",r),o.off("fullscreenchange",t)}function t(){n(),e()}function r(e,t){n(),i(t)}o.one("fullscreenchange",t),o.one("fullscreenerror",r);var a=o.requestFullscreenHelper_(s);if(a)return a.then(n,n),a})}return this.requestFullscreenHelper_()},e.requestFullscreenHelper_=function(e){var t=this;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(i=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](i);return i&&i.then(function(){return t.isFullscreen(!0)},function(){return t.isFullscreen(!1)}),i}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},e.exitFullscreen=function(){var e=this.options_.Promise||_.Promise;if(e){var s=this;return new e(function(e,i){function n(){s.off("fullscreenerror",r),s.off("fullscreenchange",t)}function t(){n(),e()}function r(e,t){n(),i(t)}s.one("fullscreenchange",t),s.one("fullscreenerror",r);var a=s.exitFullscreenHelper_();if(a)return a.then(n,n),a})}return this.exitFullscreenHelper_()},e.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=d[this.fsApi_.exitFullscreen]();return t&&t.then(function(){return e.isFullscreen(!1)}),t}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},e.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=d.documentElement.style.overflow,Fe(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow="hidden",ie(d.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.fullWindowOnEscKey=function(e){xt.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},e.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,je(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow=this.docOrigOverflow,ne(d.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},e.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},e.requestPictureInPicture=function(){if("pictureInPictureEnabled"in d&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},e.exitPictureInPicture=function(){if("pictureInPictureEnabled"in d)return d.exitPictureInPicture()},e.handleKeyDown=function(e){var t=this.options_.userActions;t&&t.hotkeys&&(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)}(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))},e.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},i=t.fullscreenKey,n=t.muteKey,n=void 0===n?function(e){return xt.isEventKey(e,"m")}:n,t=t.playPauseKey,t=void 0===t?function(e){return xt.isEventKey(e,"k")||xt.isEventKey(e,"Space")}:t;(void 0===i?function(e){return xt.isEventKey(e,"f")}:i).call(this,e)?(e.preventDefault(),e.stopPropagation(),i=pt.getComponent("FullscreenToggle"),!1!==d[this.fsApi_.fullscreenEnabled]&&i.prototype.handleClick.call(this,e)):n.call(this,e)?(e.preventDefault(),e.stopPropagation(),pt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):t.call(this,e)&&(e.preventDefault(),e.stopPropagation(),pt.getComponent("PlayToggle").prototype.handleClick.call(this,e))},e.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],a=Ui.getTech(r);if(a=a||pt.getComponent(r)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else f.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.selectSource=function(e){function t(e,i,n){var r;return e.some(function(t){return i.some(function(e){if(r=n(t,e))return!0})}),r}var i,n=this,r=this.options_.techOrder.map(function(e){return[e,Ui.getTech(e)]}).filter(function(e){var t=e[0],e=e[1];return e?e.isSupported():(f.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),a=function(e,t){var i=e[0];if(e[1].canPlaySource(t,n.options_[i.toLowerCase()]))return{source:t,tech:i}},a=this.options_.sourceOrder?t(e,r,(i=a,function(e,t){return i(t,e)})):t(r,e,a);return a||!1},e.handleSrc_=function(e,n){var r=this;if("undefined"==typeof e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var t,i,a=Yi(e);a.length?(this.changingSrc_=!0,n||(this.cache_.sources=a),this.updateSourceCaches_(a[0]),Hi(this,a[0],function(e,t){var i;return r.middleware_=t,n||(r.cache_.sources=a),r.updateSourceCaches_(e),r.src_(e)?1<a.length?r.handleSrc_(a.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady()):(t=t,i=r.tech_,void t.forEach(function(e){return e.setTech&&e.setTech(i)}))}),this.options_.retryOnError&&1<a.length&&(i=function(){r.off("error",t)},this.one("error",t=function(){r.error(null),r.handleSrc_(a.slice(1),!0)}),this.one("playing",i),this.resetRetryOnError_=function(){r.off("error",t),r.off("playing",i)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.src=function(e){return this.handleSrc_(e,!1)},e.src_=function(e){var t,i,n=this,r=this.selectSource([e]);return!r||(t=r.tech,i=this.techName_,lt(t)!==lt(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},e.load=function(){this.techCall_("load")},e.reset=function(){var e=this,t=this.options_.Promise||_.Promise;this.paused()||!t?this.doReset_():kt(this.play().then(function(){return e.doReset_()}))},e.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),nt(this)&&this.trigger("playerreset")},e.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},e.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,e=e.remainingTimeDisplay;t&&t.updateContent(),e&&e.updateContent()},e.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},e.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},e.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},e.currentSource=function(){return this.cache_.source||{}},e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},e.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t="undefined"==typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},e.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},e.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},e.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.handleTechPosterChange_=function(){var e;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},e.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new bt(e),this.addClass("vjs-error"),f.error("(CODE:"+this.error_.code+" "+bt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},e.reportUserActivity=function(e){this.userActivity_=!0},e.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.listenForUserActivity_=function(){var t,i,n,r=We(this,this.reportUserActivity),e=function(e){r(),this.clearInterval(t)};this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===i&&e.screenY===n||(i=e.screenX,n=e.screenY,r())}),this.on("mouseup",e),this.on("mouseleave",e);var a,e=this.getChild("controlBar");!e||V||P||(e.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a),(e=this.options_.inactivityTimeout)<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},e.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},e.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},e.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},e.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},e.removeRemoteTextTrack=function(e){var t=(t=(e=void 0===e?{}:e).track)||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),nt(this)&&this.trigger("languagechange"))},e.languages=function(){return ct(o.prototype.options_.languages,this.languages_)},e.toJSON=function(){var e=ct(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=ct(n)).player=void 0,e.tracks[i]=n}return e},e.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new Pt(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<Rn.length;i++){var n=Rn[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(Mn[e]),this.addClass(Mn[n]),this.breakpoint_=n;break}}},e.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},e.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=T({},Nn,e),this.updateCurrentBreakpoint_()),T(this.breakpoints_)},e.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},e.currentBreakpoint=function(){return this.breakpoint_},e.currentBreakpointClass=function(){return Mn[this.breakpoint_]||""},e.loadMedia=function(e,t){var i,n,r,a=this;e&&"object"==typeof e&&(this.reset(),this.cache_.media=ct(e),i=(r=this.cache_.media).artwork,n=r.poster,e=r.src,r=r.textTracks,!i&&n&&(this.cache_.media.artwork=[{src:n,type:Ki(n)}]),e&&this.src(e),n&&this.poster(n),Array.isArray(r)&&r.forEach(function(e){return a.addRemoteTextTrack(e,!1)}),this.ready(t))},e.getMedia=function(){if(this.cache_.media)return ct(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Ki(t.poster)}]),t},o.getTagSettings=function(e){var t,i={sources:[],tracks:[]},n=se(e),r=n["data-setup"];if(te(e,"vjs-fill")&&(n.fill=!0),te(e,"vjs-fluid")&&(n.fluid=!0),null!==r&&(r=(t=St(r||"{}"))[0],t=t[1],r&&f.error(r),T(n,t)),T(i,n),e.hasChildNodes())for(var a=e.childNodes,s=0,o=a.length;s<o;s++){var u=a[s],l=u.nodeName.toLowerCase();"source"===l?i.sources.push(se(u)):"track"===l&&i.tracks.push(se(u))}return i},e.flexNotSupported_=function(){var e=d.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},e.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},e.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(e){return"number"==typeof e})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},o}(pt);si.names.forEach(function(e){var t=si[e];Un.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Un.prototype.crossorigin=Un.prototype.crossOrigin,Un.players={};I=_.navigator;Un.prototype.options_={techOrder:Ui.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:I&&(I.languages&&I.languages[0]||I.userLanguage||I.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Un.prototype[e]=function(){return this.techGet_(e)}}),Dn.forEach(function(e){Un.prototype["handleTech"+lt(e)+"_"]=function(){return this.trigger(e)}}),pt.registerComponent("Player",Un);var Bn=t(function(i){function n(e,t){return i.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}i.exports=n});function Fn(e){return Kn.hasOwnProperty(e)}function jn(e){return Fn(e)?Kn[e]:void 0}function Hn(e,t,i){i=(i?"before":"")+"pluginsetup",e.trigger(i,t),e.trigger(i+":"+t.name,t)}function qn(t,i){function n(){Hn(this,{name:t,plugin:i,instance:null},!0);var e=i.apply(this,arguments);return Yn(this,t),Hn(this,{name:t,plugin:i,instance:e}),e}return Object.keys(i).forEach(function(e){n[e]=i[e]}),n}function Vn(r,a){return a.prototype.name=r,function(){Hn(this,{name:r,plugin:a,instance:null},!0);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=zn(a,[this].concat(t));return this[r]=function(){return n},Hn(this,n.getEventHash()),n}}var Wn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}},zn=t(function(n){function r(e,t,i){return Wn()?n.exports=r=Reflect.construct:n.exports=r=function(e,t,i){var n=[null];n.push.apply(n,t);n=new(Function.bind.apply(e,n));return i&&Bn(n,i.prototype),n},r.apply(null,arguments)}n.exports=r}),Gn="plugin",Xn="activePlugins_",Kn={},Yn=function(e,t){e[Xn]=e[Xn]||{},e[Xn][t]=!0},Qn=function(){function i(e){if(this.constructor===i)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),at(this),delete this.trigger,ot(this,this.constructor.defaultState),Yn(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}var e=i.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(e){return(e=void 0===e?{}:e).name=this.name,e.plugin=this.constructor,e.instance=this,e},e.trigger=function(e,t){return He(this.eventBusEl_,e,this.getEventHash(t=void 0===t?{}:t))},e.handleStateChanged=function(e){},e.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Xn][e]=!1,this.player=this.state=null,t[e]=Vn(e,Kn[e])},i.isBasic=function(e){e="string"==typeof e?jn(e):e;return"function"==typeof e&&!i.prototype.isPrototypeOf(e.prototype)},i.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Fn(e))f.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Un.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof t+".");return Kn[e]=t,e!==Gn&&(i.isBasic(t)?Un.prototype[e]=qn(e,t):Un.prototype[e]=Vn(e,t)),t},i.deregisterPlugin=function(e){if(e===Gn)throw new Error("Cannot de-register base plugin.");Fn(e)&&(delete Kn[e],delete Un.prototype[e])},i.getPlugins=function(e){var i;return(e=void 0===e?Object.keys(Kn):e).forEach(function(e){var t=jn(e);t&&((i=i||{})[e]=t)}),i},i.getPluginVersion=function(e){e=jn(e);return e&&e.VERSION||""},i}();Qn.getPlugin=jn,Qn.BASE_PLUGIN_NAME=Gn,Qn.registerPlugin(Gn,Qn),Un.prototype.usingPlugin=function(e){return!!this[Xn]&&!0===this[Xn][e]},Un.prototype.hasPlugin=function(e){return!!Fn(e)};var $n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)},Jn=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Zn(e,t,i){if(r=Zn.getPlayer(e))return t&&f.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&r.ready(i),r;var n="string"==typeof e?Se("#"+Jn(e)):e;if(!Y(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");n.ownerDocument.defaultView&&n.ownerDocument.body.contains(n)||f.warn("The element supplied is not included in the DOM"),t=t||{},Zn.hooks("beforesetup").forEach(function(e){e=e(n,ct(t));S(e)&&!Array.isArray(e)?t=ct(t,e):f.error("please return an object in beforesetup hooks")});var r=new(pt.getComponent("Player"))(n,t,i);return Zn.hooks("setup").forEach(function(e){return e(r)}),r}Zn.hooks_={},Zn.hooks=function(e,t){return Zn.hooks_[e]=Zn.hooks_[e]||[],t&&(Zn.hooks_[e]=Zn.hooks_[e].concat(t)),Zn.hooks_[e]},Zn.hook=function(e,t){Zn.hooks(e,t)},Zn.hookOnce=function(i,e){Zn.hooks(i,[].concat(e).map(function(t){return function e(){return Zn.removeHook(i,e),t.apply(void 0,arguments)}}))},Zn.removeHook=function(e,t){t=Zn.hooks(e).indexOf(t);return!(t<=-1)&&(Zn.hooks_[e]=Zn.hooks_[e].slice(),Zn.hooks_[e].splice(t,1),!0)},!0!==_.VIDEOJS_NO_DYNAMIC_STYLE&&K()&&((nr=Se(".vjs-styles-defaults"))||(nr=Ae("vjs-styles-defaults"),(I=Se("head"))&&I.insertBefore(nr,I.firstChild),Pe(nr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    "))),Ie(1,Zn),Zn.VERSION=u,Zn.options=Un.prototype.options_,Zn.getPlayers=function(){return Un.players},Zn.getPlayer=function(e){var t=Un.players;if("string"==typeof e){var i=Jn(e),n=t[i];if(n)return n;i=Se("#"+i)}else i=e;if(Y(i)){e=i.player,i=i.playerId;if(e||t[i])return e||t[i]}},Zn.getAllPlayers=function(){return Object.keys(Un.players).map(function(e){return Un.players[e]}).filter(Boolean)},Zn.players=Un.players,Zn.getComponent=pt.getComponent,Zn.registerComponent=function(e,t){Ui.isTech(t)&&f.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),pt.registerComponent.call(pt,e,t)},Zn.getTech=Ui.getTech,Zn.registerTech=Ui.registerTech,Zn.use=function(e,t){Bi[e]=Bi[e]||[],Bi[e].push(t)},Object.defineProperty(Zn,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Zn.middleware,"TERMINATOR",{value:ji,writeable:!1,enumerable:!0}),Zn.browser=z,Zn.TOUCH_ENABLED=j,Zn.extend=function(e,t){var i,n=function(){e.apply(this,arguments)},r={};for(i in"object"==typeof(t=void 0===t?{}:t)?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),$n(n,e),e&&(n.super_=e),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},Zn.mergeOptions=ct,Zn.bind=We,Zn.registerPlugin=Qn.registerPlugin,Zn.deregisterPlugin=Qn.deregisterPlugin,Zn.plugin=function(e,t){return f.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Qn.registerPlugin(e,t)},Zn.getPlugins=Qn.getPlugins,Zn.getPlugin=Qn.getPlugin,Zn.getPluginVersion=Qn.getPluginVersion,Zn.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),Zn.options.languages=ct(Zn.options.languages,((i={})[e]=t,i)),Zn.options.languages[e]},Zn.log=f,Zn.createLogger=m,Zn.createTimeRange=Zn.createTimeRanges=vt,Zn.formatTime=on,Zn.setFormatTime=function(e){sn=e},Zn.resetFormatTime=function(){sn=an},Zn.parseUrl=Mt,Zn.isCrossOrigin=Bt,Zn.EventTarget=Xe,Zn.on=Fe,Zn.one=qe,Zn.off=je,Zn.trigger=He,Zn.xhr=Yt,Zn.TextTrack=ti,Zn.AudioTrack=ii,Zn.VideoTrack=ni,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Zn[e]=function(){return f.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),ke[e].apply(null,arguments)}}),Zn.computedStyle=k,Zn.dom=ke,Zn.url=zt,Zn.defineLazyProperty=In,Zn.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});function er(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=_.location&&_.location.href||"");var i="function"==typeof _.URL,n=/^\/\//.test(e),r=!_.location&&!/\/\//i.test(e);if(i?e=new _.URL(e,_.location||ir):/\/\//i.test(e)||(e=tr.buildAbsoluteURL(_.location&&_.location.href||"",e)),i){i=new URL(t,e);return r?i.href.slice(ir.length):n?i.href.slice(i.protocol.length):i.href}return tr.buildAbsoluteURL(e,t)}var tr=t(function(e,t){var i,a,n,r,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,a=/^([^\/?#]*)([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}n=s.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=s.normalizePath(n.path),s.buildURLFromParts(n)):t;t=s.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(r=a.exec(t.path),t.netLoc=r[1],t.path=r[2]),t.netLoc&&!t.path&&(t.path="/");var r,e={scheme:t.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};return n.netLoc||(e.netLoc=t.netLoc,"/"!==n.path[0]&&(n.path?(r=(r=t.path).substring(0,r.lastIndexOf("/")+1)+n.path,e.path=s.normalizePath(r)):(e.path=t.path,n.params||(e.params=t.params,n.query||(e.query=t.query))))),null===e.path&&(e.path=i.alwaysNormalize?s.normalizePath(n.path):n.path),s.buildURLFromParts(e)},parseURL:function(e){e=i.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}),ir="http://example.com",nr=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;t=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),rr=function(e){return _.atob?_.atob(e):Buffer.from(e,"base64").toString("binary")};function ar(e){for(var t=rr(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}
/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */function sr(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),e={};return t[1]&&(e.length=parseInt(t[1],10)),t[2]&&(e.offset=parseInt(t[2],10)),e}function or(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n}function ur(t){var i={};return Object.keys(t).forEach(function(e){i[e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})]=t[e]}),i}function lr(e){var t,i,n,r,a=e.serverControl,s=e.targetDuration,o=e.partTargetDuration;a&&(t="#EXT-X-SERVER-CONTROL",i="holdBack",n="partHoldBack",r=s&&3*s,e=o&&2*o,s&&!a.hasOwnProperty(i)&&(a[i]=r,this.trigger("info",{message:t+" defaulting HOLD-BACK to targetDuration * 3 ("+r+")."})),r&&a[i]<r&&(this.trigger("warn",{message:t+" clamping HOLD-BACK ("+a[i]+") to targetDuration * 3 ("+r+")"}),a[i]=r),o&&!a.hasOwnProperty(n)&&(a[n]=3*o,this.trigger("info",{message:t+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+a[n]+")."})),o&&a[n]<e&&(this.trigger("warn",{message:t+" clamping PART-HOLD-BACK ("+a[n]+") to partTargetDuration * 2 ("+e+")."}),a[n]=e))}function cr(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})}function dr(e){var e=(e=void 0===e?"":e).split(","),a=[];return e.forEach(function(n){var r;n=n.trim(),Sr.forEach(function(e){var t,i=Tr[e].exec(n.toLowerCase());!i||i.length<=1||(r=e,t=n.substring(0,i[1].length),i=n.replace(t,""),a.push({type:t,details:i,mediaType:e}))}),r||a.push({type:n,details:"",mediaType:"unknown"})}),a}function hr(e){return Tr.audio.test((e=void 0===e?"":e).trim().toLowerCase())}function pr(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(e){return cr(e.trim())}),i="video";1===t.length&&hr(t[0])?i="audio":1===t.length&&(n=t[0],Tr.text.test((n=void 0===n?"":n).trim().toLowerCase()))&&(i="application");var n="mp4";return t.every(function(e){return Tr.mp4.test(e)})?n="mp4":t.every(function(e){return Tr.webm.test(e)})?n="webm":t.every(function(e){return Tr.ogg.test(e)})&&(n="ogg"),i+"/"+n+';codecs="'+e+'"'}}function fr(e){return void 0===e&&(e=""),_.MediaSource&&_.MediaSource.isTypeSupported&&_.MediaSource.isTypeSupported(pr(e))||!1}function mr(e){return(e=void 0===e?"":e).toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<Er.length;t++)if(Tr["muxer"+Er[t]].test(e))return!0;return!1})}function gr(e){return Cr.test(e)?"hls":wr.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}var yr=function(t){function e(){var e=t.call(this)||this;return e.buffer="",e}return mt(e,t),e.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},e}(nr),vr=String.fromCharCode(9),_r=function(t){function e(){var e=t.call(this)||this;return e.customParsers=[],e.tagMappers=[],e}mt(e,t);var i=e.prototype;return i.push=function(i){var r,a,s=this;0!==(i=i.trim()).length&&("#"===i[0]?this.tagMappers.reduce(function(e,t){t=t(i);return t===i?e:e.concat([t])},[i]).forEach(function(e){for(var t,i,n=0;n<s.customParsers.length;n++)if(s.customParsers[n].call(s,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),r=/^#EXTM3U/.exec(e))s.trigger("data",{type:"tag",tagType:"m3u"});else{if(r=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return a={type:"tag",tagType:"inf"},r[1]&&(a.duration=parseFloat(r[1])),r[2]&&(a.title=r[2]),void s.trigger("data",a);if(r=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return a={type:"tag",tagType:"targetduration"},r[1]&&(a.duration=parseInt(r[1],10)),void s.trigger("data",a);if(r=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return a={type:"tag",tagType:"version"},r[1]&&(a.version=parseInt(r[1],10)),void s.trigger("data",a);if(r=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return a={type:"tag",tagType:"media-sequence"},r[1]&&(a.number=parseInt(r[1],10)),void s.trigger("data",a);if(r=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return a={type:"tag",tagType:"discontinuity-sequence"},r[1]&&(a.number=parseInt(r[1],10)),void s.trigger("data",a);if(r=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return a={type:"tag",tagType:"playlist-type"},r[1]&&(a.playlistType=r[1]),void s.trigger("data",a);if(r=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return a=g(sr(r[1]),{type:"tag",tagType:"byterange"}),void s.trigger("data",a);if(r=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return a={type:"tag",tagType:"allow-cache"},r[1]&&(a.allowed=!/NO/.test(r[1])),void s.trigger("data",a);if(r=/^#EXT-X-MAP:?(.*)$/.exec(e))return a={type:"tag",tagType:"map"},r[1]&&((t=or(r[1])).URI&&(a.uri=t.URI),t.BYTERANGE&&(a.byterange=sr(t.BYTERANGE))),void s.trigger("data",a);if(r=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))return a={type:"tag",tagType:"stream-inf"},r[1]&&(a.attributes=or(r[1]),a.attributes.RESOLUTION&&(i={},(t=a.attributes.RESOLUTION.split("x"))[0]&&(i.width=parseInt(t[0],10)),t[1]&&(i.height=parseInt(t[1],10)),a.attributes.RESOLUTION=i),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10))),void s.trigger("data",a);if(r=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return a={type:"tag",tagType:"media"},r[1]&&(a.attributes=or(r[1])),void s.trigger("data",a);if(r=/^#EXT-X-ENDLIST/.exec(e))s.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(r=/^#EXT-X-DISCONTINUITY/.exec(e)))return(r=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(a={type:"tag",tagType:"program-date-time"},r[1]&&(a.dateTimeString=r[1],a.dateTimeObject=new Date(r[1])),void s.trigger("data",a)):(r=/^#EXT-X-KEY:?(.*)$/.exec(e))?(a={type:"tag",tagType:"key"},r[1]&&(a.attributes=or(r[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2).toLowerCase()&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),void s.trigger("data",a)):(r=/^#EXT-X-START:?(.*)$/.exec(e))?(a={type:"tag",tagType:"start"},r[1]&&(a.attributes=or(r[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),void s.trigger("data",a)):(r=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))?(a={type:"tag",tagType:"cue-out-cont"},r[1]?a.data=r[1]:a.data="",void s.trigger("data",a)):(r=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))?(a={type:"tag",tagType:"cue-out"},r[1]?a.data=r[1]:a.data="",void s.trigger("data",a)):(r=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))?(a={type:"tag",tagType:"cue-in"},r[1]?a.data=r[1]:a.data="",void s.trigger("data",a)):(r=/^#EXT-X-SKIP:(.*)$/.exec(e))&&r[1]?((a={type:"tag",tagType:"skip"}).attributes=or(r[1]),a.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(a.attributes["SKIPPED-SEGMENTS"]=parseInt(a.attributes["SKIPPED-SEGMENTS"],10)),a.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(a.attributes["RECENTLY-REMOVED-DATERANGES"]=a.attributes["RECENTLY-REMOVED-DATERANGES"].split(vr)),void s.trigger("data",a)):(r=/^#EXT-X-PART:(.*)$/.exec(e))&&r[1]?((a={type:"tag",tagType:"part"}).attributes=or(r[1]),["DURATION"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseFloat(a.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=/YES/.test(a.attributes[e]))}),a.attributes.hasOwnProperty("BYTERANGE")&&(a.attributes.byterange=sr(a.attributes.BYTERANGE)),void s.trigger("data",a)):(r=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&r[1]?((a={type:"tag",tagType:"server-control"}).attributes=or(r[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseFloat(a.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=/YES/.test(a.attributes[e]))}),void s.trigger("data",a)):(r=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&r[1]?((a={type:"tag",tagType:"part-inf"}).attributes=or(r[1]),["PART-TARGET"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseFloat(a.attributes[e]))}),void s.trigger("data",a)):(r=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&r[1]?((a={type:"tag",tagType:"preload-hint"}).attributes=or(r[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){var t;a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseInt(a.attributes[e],10),t="BYTERANGE-LENGTH"===e?"length":"offset",a.attributes.byterange=a.attributes.byterange||{},a.attributes.byterange[t]=a.attributes[e],delete a.attributes[e])}),void s.trigger("data",a)):(r=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&r[1]?((a={type:"tag",tagType:"rendition-report"}).attributes=or(r[1]),["LAST-MSN","LAST-PART"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseInt(a.attributes[e],10))}),void s.trigger("data",a)):void s.trigger("data",{type:"tag",data:e.slice(4)});s.trigger("data",{type:"tag",tagType:"discontinuity"})}}else s.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:i}))},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0})},i.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push(function(e){return t.test(e)?i(e):e})},e}(nr),br=function(t){function e(){var e=t.call(this)||this;e.lineStream=new yr,e.parseStream=new _r,e.lineStream.pipe(e.parseStream);var n,r,a=ft(e),o=[],u={},l=!1,c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var h=0,p=0;return e.on("end",function(){u.uri||!u.parts&&!u.preloadHints||(!u.map&&n&&(u.map=n),!u.key&&r&&(u.key=r),u.timeline||"number"!=typeof d||(u.timeline=d),e.manifest.preloadSegment=u)}),e.parseStream.on("data",function(s){var t,i;({tag:function(){({version:function(){s.version&&(this.manifest.version=s.version)},"allow-cache":function(){this.manifest.allowCache=s.allowed,"allowed"in s||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in s&&((u.byterange=e).length=s.length,"offset"in s||(s.offset=h)),"offset"in s&&((u.byterange=e).offset=s.offset),h=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<s.duration&&(u.duration=s.duration),0===s.duration&&(u.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(s.attributes)if("NONE"!==s.attributes.METHOD)if(s.attributes.URI){if("com.apple.streamingkeydelivery"===s.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:s.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===s.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(s.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===s.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==s.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):s.attributes.KEYID&&"0x"===s.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:s.attributes.KEYFORMAT,keyId:s.attributes.KEYID.substring(2)},pssh:ar(s.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));s.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:s.attributes.METHOD||"AES-128",uri:s.attributes.URI},"undefined"!=typeof s.attributes.IV&&(r.iv=s.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(s.number)?this.manifest.mediaSequence=s.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+s.number})},"discontinuity-sequence":function(){isFinite(s.number)?(this.manifest.discontinuitySequence=s.number,d=s.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+s.number})},"playlist-type":function(){/VOD|EVENT/.test(s.playlistType)?this.manifest.playlistType=s.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+s.playlist})},map:function(){n={},s.uri&&(n.uri=s.uri),s.byterange&&(n.byterange=s.byterange),r&&(n.key=r)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||c,s.attributes?(u.attributes||(u.attributes={}),g(u.attributes,s.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var e;this.manifest.mediaGroups=this.manifest.mediaGroups||c,s.attributes&&s.attributes.TYPE&&s.attributes["GROUP-ID"]&&s.attributes.NAME?((e=this.manifest.mediaGroups[s.attributes.TYPE])[s.attributes["GROUP-ID"]]=e[s.attributes["GROUP-ID"]]||{},t=e[s.attributes["GROUP-ID"]],(i={default:/yes/i.test(s.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(s.attributes.AUTOSELECT),s.attributes.LANGUAGE&&(i.language=s.attributes.LANGUAGE),s.attributes.URI&&(i.uri=s.attributes.URI),s.attributes["INSTREAM-ID"]&&(i.instreamId=s.attributes["INSTREAM-ID"]),s.attributes.CHARACTERISTICS&&(i.characteristics=s.attributes.CHARACTERISTICS),s.attributes.FORCED&&(i.forced=/yes/i.test(s.attributes.FORCED)),t[s.attributes.NAME]=i):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){d+=1,u.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=s.dateTimeString,this.manifest.dateTimeObject=s.dateTimeObject),u.dateTimeString=s.dateTimeString,u.dateTimeObject=s.dateTimeObject},targetduration:function(){!isFinite(s.duration)||s.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+s.duration}):(this.manifest.targetDuration=s.duration,lr.call(this,this.manifest))},start:function(){s.attributes&&!isNaN(s.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:s.attributes["TIME-OFFSET"],precise:s.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){u.cueOut=s.data},"cue-out-cont":function(){u.cueOutCont=s.data},"cue-in":function(){u.cueIn=s.data},skip:function(){this.manifest.skip=ur(s.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",s.attributes,["SKIPPED-SEGMENTS"])},part:function(){var i=this;l=!0;var e=this.manifest.segments.length,t=ur(s.attributes);u.parts=u.parts||[],u.parts.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=p),p=t.byterange.offset+t.byterange.length);var n=u.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+n+" for segment #"+e,s.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(e,t){e.hasOwnProperty("lastPart")||i.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+t+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var e=this.manifest.serverControl=ur(s.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),lr.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var e=this.manifest.segments.length,t=ur(s.attributes),i=t.type&&"PART"===t.type;u.preloadHints=u.preloadHints||[],u.preloadHints.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=i?p:0,i&&(p=t.byterange.offset+t.byterange.length)));var n=u.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e,s.attributes,["TYPE","URI"]),t.type)for(var r=0;r<u.preloadHints.length-1;r++){var a=u.preloadHints[r];a.type&&a.type===t.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e+" has the same TYPE "+t.type+" as preload hint #"+r})}},"rendition-report":function(){var e=ur(s.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);var t=this.manifest.renditionReports.length-1,e=["LAST-MSN","URI"];l&&e.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+t,s.attributes,e)},"part-inf":function(){this.manifest.partInf=ur(s.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",s.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),lr.call(this,this.manifest)}}[s.tagType]||function(){}).call(a)},uri:function(){u.uri=s.uri,o.push(u),!this.manifest.targetDuration||"duration"in u||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),u.duration=this.manifest.targetDuration),r&&(u.key=r),u.timeline=d,n&&(u.map=n),p=0,u={}},comment:function(){},custom:function(){s.segment?(u.custom=u.custom||{},u.custom[s.customType]=s.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[s.customType]=s.data)}})[s.type].call(a)}),e}mt(e,t);var i=e.prototype;return i.warnOnMissingAttributes_=function(e,t,i){var n=[];i.forEach(function(e){t.hasOwnProperty(e)||n.push(e)}),n.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+n.join(", ")})},i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n"),this.trigger("end")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},e}(nr),Tr={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Sr=["video","audio","text"],Er=["Video","Audio","Text"],kr="mp4a.40.2",Cr=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,wr=/^application\/dash\+xml/i,Ir={entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}},z=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ii=new RegExp("[\\-\\.0-9"+z.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),xr=new RegExp("^"+z.source+ii.source+"*(?::"+z.source+ii.source+"*)?$"),Ar=0,Pr=1,Lr=2,Dr=3,Or=4,Rr=5,Mr=6,Nr=7;function Ur(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,Ur)}function Br(){}function Fr(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function jr(e,t,i){for(var n=e.tagName,r=null,a=e.length;a--;){var s=e[a],o=s.qName,u=s.value,o=0<(c=o.indexOf(":"))?(l=s.prefix=o.slice(0,c),d=o.slice(c+1),"xmlns"===l&&d):(l=null,"xmlns"===(d=o)&&"");s.localName=d,!1!==o&&(null==r&&(r={},Hr(i,i={})),i[o]=r[o]=u,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(o,u))}for(var l,a=e.length;a--;)(l=(s=e[a]).prefix)&&("xml"===l&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(s.uri=i[l||""]));var c,d=0<(c=n.indexOf(":"))?(l=e.prefix=n.slice(0,c),e.localName=n.slice(c+1)):(l=null,e.localName=n),h=e.uri=i[l||""];if(t.startElement(h,d,n,e),!e.closed)return e.currentNSMap=i,e.localNSMap=r,1;if(t.endElement(h,d,n),r)for(l in r)t.endPrefixMapping(l)}function Hr(e,t){for(var i in e)t[i]=e[i]}function qr(){this.attributeNames={}}(Ur.prototype=new Error).name=Ur.name,Br.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),Hr(t,t={}),function(i,e,n,r,a){function s(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?65535<(t=parseInt(t.substr(1).replace("x","0x")))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(a.error("entity not found:"+e),e)}function t(e){var t;f<e&&(t=i.substring(f,e).replace(/&#?\w+;/g,s),d&&o(f),r.characters(t,0,e-f),f=e)}function o(e,t){for(;l<=e&&(t=c.exec(i));)u=t.index,l=u+t[0].length,d.lineNumber++;d.columnNumber=e-u+1}var u=0,l=0,c=/.*(?:\r\n?|\n)|.*$/g,d=r.locator,h=[{currentNSMap:e}],p={},f=0;for(;;){try{var m,g,y=i.indexOf("<",f);if(y<0)return i.substr(f).match(/^\s*$/)||(m=r.doc,g=m.createTextNode(i.substr(f)),m.appendChild(g),r.currentElement=g);switch(f<y&&t(y),i.charAt(y+1)){case"/":var v=i.indexOf(">",y+3),_=i.substring(y+2,v),b=h.pop();v<0?(_=i.substring(y+2).replace(/[\s<].*/,""),a.error("end tag name: "+_+" is not complete:"+b.tagName),v=y+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),a.error("end tag name: "+_+" maybe not complete"),v=y+1+_.length);var T=b.localNSMap,S=b.tagName==_;if(S||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase()){if(r.endElement(b.uri,b.localName,_),T)for(var E in T)r.endPrefixMapping(E);S||a.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else h.push(b);v++;break;case"?":d&&o(y),v=function(e,t,i){var n=e.indexOf("?>",t);if(n){t=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return t?(t[0].length,i.processingInstruction(t[1],t[2]),n+2):-1}return-1}(i,y,r);break;case"!":d&&o(y),v=function(e,t,i,n){{if("-"===e.charAt(t+2)){if("-"!==e.charAt(t+3))return-1;var r=e.indexOf("--\x3e",t+4);return t<r?(i.comment(e,t+4,r-t-4),r+3):(n.error("Unclosed comment"),-1)}if("CDATA["==e.substr(t+3,6)){r=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,r-t-9),i.endCDATA(),r+3}var a=function(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;i=r.exec(e);)if(n.push(i),i[1])return n}(e,t),n=a.length;if(1<n&&/!doctype/i.test(a[0][0])){r=a[1][0],e=!1,t=!1;3<n&&(/^public$/i.test(a[2][0])?(e=a[3][0],t=4<n&&a[4][0]):/^system$/i.test(a[2][0])&&(t=a[3][0]));n=a[n-1];return i.startDTD(r,e,t),i.endDTD(),n.index+n[0].length}}return-1}(i,y,r,a);break;default:d&&o(y);var k=new qr,C=h[h.length-1].currentNSMap,v=function(e,t,n,i,r,a){function s(e,t,i){e in n.attributeNames&&a.fatalError("Attribute "+e+" redefined"),n.addValue(e,t,i)}var o,u=++t,l=Ar;for(;;){var c=e.charAt(u);switch(c){case"=":if(l===Pr)o=e.slice(t,u),l=Dr;else{if(l!==Lr)throw new Error("attribute equal must after attrName");l=Dr}break;case"'":case'"':if(l===Dr||l===Pr){if(l===Pr&&(a.warning('attribute value must after "="'),o=e.slice(t,u)),t=u+1,!(0<(u=e.indexOf(c,t))))throw new Error("attribute value no end '"+c+"' match");d=e.slice(t,u).replace(/&#?\w+;/g,r),s(o,d,t-1),l=Rr}else{if(l!=Or)throw new Error('attribute value must after "="');d=e.slice(t,u).replace(/&#?\w+;/g,r),s(o,d,t),a.warning('attribute "'+o+'" missed start quot('+c+")!!"),t=u+1,l=Rr}break;case"/":switch(l){case Ar:n.setTagName(e.slice(t,u));case Rr:case Mr:case Nr:l=Nr,n.closed=!0;case Or:case Pr:case Lr:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),l==Ar&&n.setTagName(e.slice(t,u)),u;case">":switch(l){case Ar:n.setTagName(e.slice(t,u));case Rr:case Mr:case Nr:break;case Or:case Pr:"/"===(d=e.slice(t,u)).slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case Lr:l===Lr&&(d=o),l==Or?(a.warning('attribute "'+d+'" missed quot(")!'),s(o,d.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===i[""]&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),s(d,d,t));break;case Dr:throw new Error("attribute value missed!!")}return u;case"":c=" ";default:if(c<=" ")switch(l){case Ar:n.setTagName(e.slice(t,u)),l=Mr;break;case Pr:o=e.slice(t,u),l=Lr;break;case Or:var d=e.slice(t,u).replace(/&#?\w+;/g,r);a.warning('attribute "'+d+'" missed quot(")!!'),s(o,d,t);case Rr:l=Mr}else switch(l){case Lr:n.tagName,"http://www.w3.org/1999/xhtml"===i[""]&&o.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,t),t=u,l=Pr;break;case Rr:a.warning('attribute space is required"'+o+'"!!');case Mr:l=Pr,t=u;break;case Dr:l=Or,t=u;break;case Nr:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}(i,y,k,C,s,a),w=k.length;if(!k.closed&&function(e,t,i,n){var r=n[i];null==r&&((r=e.lastIndexOf("</"+i+">"))<t&&(r=e.lastIndexOf("</"+i)),n[i]=r);return r<t}(i,v,k.tagName,p)&&(k.closed=!0,n.nbsp||a.warning("unclosed xml attribute")),d&&w){for(var I=Fr(d,{}),x=0;x<w;x++){var A=k[x];o(A.offset),A.locator=Fr(d,{})}r.locator=I,jr(k,r,C)&&h.push(k),r.locator=d}else jr(k,r,C)&&h.push(k);"http://www.w3.org/1999/xhtml"!==k.uri||k.closed?v++:v=function(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var a=e.indexOf("</"+i+">",t),e=e.substring(t+1,a);if(/[&<]/.test(e))return/^script$/i.test(i)||(e=e.replace(/&#?\w+;/g,n)),r.characters(e,0,e.length),a}return t+1}(i,v,k.tagName,s,r)}}catch(e){if(e instanceof Ur)throw e;a.error("element parse error: "+e),v=-1}f<v?f=v:t(Math.max(y,f)+1)}}(e,t,i,n,this.errorHandler),n.endDocument()}},qr.prototype={setTagName:function(e){if(!xr.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,i){if(!xr.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};var Vr={XMLReader:Br,ParseError:Ur};function Wr(e,t){for(var i in e)t[i]=e[i]}function zr(e,t){var i,n=e.prototype;n instanceof t||((i=function(){}).prototype=t.prototype,Wr(n,i=new i),e.prototype=n=i),n.constructor!=e&&(n.constructor=e)}var Gr="http://www.w3.org/1999/xhtml",ni={},Xr=ni.ELEMENT_NODE=1,Kr=ni.ATTRIBUTE_NODE=2,Yr=ni.TEXT_NODE=3,Qr=ni.CDATA_SECTION_NODE=4,$r=ni.ENTITY_REFERENCE_NODE=5,Jr=(ni.ENTITY_NODE=6,ni.PROCESSING_INSTRUCTION_NODE=7),Zr=ni.COMMENT_NODE=8,ea=ni.DOCUMENT_NODE=9,ta=ni.DOCUMENT_TYPE_NODE=10,ia=ni.DOCUMENT_FRAGMENT_NODE=11,zt=(ni.NOTATION_NODE=12,{}),na={};zt.INDEX_SIZE_ERR=(na[1]="Index size error",1),zt.DOMSTRING_SIZE_ERR=(na[2]="DOMString size error",2);zt.HIERARCHY_REQUEST_ERR=(na[3]="Hierarchy request error",3);zt.WRONG_DOCUMENT_ERR=(na[4]="Wrong document",4),zt.INVALID_CHARACTER_ERR=(na[5]="Invalid character",5),zt.NO_DATA_ALLOWED_ERR=(na[6]="No data allowed",6),zt.NO_MODIFICATION_ALLOWED_ERR=(na[7]="No modification allowed",7);zt.NOT_FOUND_ERR=(na[8]="Not found",8);zt.NOT_SUPPORTED_ERR=(na[9]="Not supported",9);var ra;zt.INUSE_ATTRIBUTE_ERR=(na[10]="Attribute in use",10);function aa(e,t){var i;return t instanceof Error?i=t:(i=this,Error.call(this,na[e]),this.message=na[e],Error.captureStackTrace&&Error.captureStackTrace(this,aa)),i.code=e,t&&(this.message=this.message+": "+t),i}function sa(){}function oa(e,t){this._node=e,this._refresh=t,ua(this)}function ua(e){var t,i=e._node._inc||e._node.ownerDocument._inc;e._inc!=i&&(t=e._refresh(e._node),Ba(e,"length",t.length),Wr(t,e),e._inc=i)}function la(){}function ca(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function da(e,t,i,n){n?t[ca(t,n)]=i:t[t.length++]=i,!e||(t=(i.ownerElement=e).ownerDocument)&&(n&&va(t,e,n),e=e,i=i,(t=t)&&t._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&(e._nsMap[i.prefix?i.localName:""]=i.value))}function ha(e,t,i){var n=ca(t,i);if(!(0<=n))throw aa(8,new Error(e.tagName+"@"+i));for(var r,a=t.length-1;n<a;)t[n]=t[++n];t.length=a,!e||(r=e.ownerDocument)&&(va(r,e,i),i.ownerElement=null)}function pa(e){if(this._features={},e)for(var t in e)this._features=e[t]}function fa(){}function ma(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function ga(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(ga(e,t))return 1}while(e=e.nextSibling)}function ya(){}function va(e,t,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&delete t._nsMap[i.prefix?i.localName:""]}function _a(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{for(var r=t.firstChild,a=0;r;)r=(n[a++]=r).nextSibling;n.length=a}}}function ba(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,_a(e.ownerDocument,e),t}function Ta(e,t,i){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===ia){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;n=i?i.previousSibling:e.lastChild;for(r.previousSibling=n,a.nextSibling=i,n?n.nextSibling=r:e.firstChild=r,null==i?e.lastChild=a:i.previousSibling=a;r.parentNode=e,r!==a&&(r=r.nextSibling););return _a(e.ownerDocument||e,e),t.nodeType==ia&&(t.firstChild=t.lastChild=null),t}function Sa(){this._nsMap={}}function Ea(){}function ka(){}function Ca(){}function wa(){}function Ia(){}function xa(){}function Aa(){}function Pa(){}function La(){}function Da(){}function Oa(){}function Ra(){}function Ma(e,t){var i,n=[],r=9==this.nodeType&&this.documentElement||this,a=r.prefix,s=r.namespaceURI;return Ua(this,n,e,t,i=s&&null==a&&null==(a=r.lookupPrefix(s))?[{namespace:s,prefix:null}]:i),n.join("")}function Na(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if((n||r)&&("xml"!==n||"http://www.w3.org/XML/1998/namespace"!==r)&&"http://www.w3.org/2000/xmlns/"!=r){for(var a=i.length;a--;){var s=i[a];if(s.prefix==n)return s.namespace!=r}return 1}}function Ua(e,t,i,n,r){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case Xr:(r=r||[]).length;var a=e.attributes,s=a.length,o=e.firstChild,u=e.tagName;i=Gr===e.namespaceURI||i,t.push("<",u);for(var l=0;l<s;l++)"xmlns"==(c=a.item(l)).prefix?r.push({prefix:c.localName,namespace:c.value}):"xmlns"==c.nodeName&&r.push({prefix:"",namespace:c.value});for(var c,d,h,l=0;l<s;l++)Na(c=a.item(l),0,r)&&(d=c.prefix||"",h=c.namespaceURI,t.push(d?" xmlns:"+d:" xmlns",'="',h,'"'),r.push({prefix:d,namespace:h})),Ua(c,t,i,n,r);if(Na(e,0,r)&&(d=e.prefix||"",h=e.namespaceURI,t.push(d?" xmlns:"+d:" xmlns",'="',h,'"'),r.push({prefix:d,namespace:h})),o||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),i&&/^script$/i.test(u))for(;o;)o.data?t.push(o.data):Ua(o,t,i,n,r),o=o.nextSibling;else for(;o;)Ua(o,t,i,n,r),o=o.nextSibling;t.push("</",u,">")}else t.push("/>");return;case ea:case ia:for(o=e.firstChild;o;)Ua(o,t,i,n,r),o=o.nextSibling;return;case Kr:return t.push(" ",e.name,'="',e.value.replace(/[&"]/g,ma),'"');case Yr:return t.push(e.data.replace(/[<&]/g,ma).replace(/]]>/g,"]]&gt;"));case Qr:return t.push("<![CDATA[",e.data,"]]>");case Zr:return t.push("\x3c!--",e.data,"--\x3e");case ta:var p=e.publicId,u=e.systemId;return t.push("<!DOCTYPE ",e.name),void(p?(t.push(" PUBLIC ",p),u&&"."!=u&&t.push(" ",u),t.push(">")):u&&"."!=u?t.push(" SYSTEM ",u,">"):((u=e.internalSubset)&&t.push(" [",u,"]"),t.push(">")));case Jr:return t.push("<?",e.target," ",e.data,"?>");case $r:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Ba(e,t,i){e[t]=i}zt.INVALID_STATE_ERR=(na[11]="Invalid state",11),zt.SYNTAX_ERR=(na[12]="Syntax error",12),zt.INVALID_MODIFICATION_ERR=(na[13]="Invalid modification",13),zt.NAMESPACE_ERR=(na[14]="Invalid namespace",14),zt.INVALID_ACCESS_ERR=(na[15]="Invalid access",15),aa.prototype=Error.prototype,Wr(zt,aa),sa.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)Ua(this[n],i,e,t);return i.join("")}},oa.prototype.item=function(e){return ua(this),this[e]},zr(oa,sa),la.prototype={length:0,item:sa.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new aa(10);t=this.getNamedItem(e.nodeName);return da(this._ownerElement,this,e,t),t},setNamedItemNS:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new aa(10);return t=this.getNamedItemNS(e.namespaceURI,e.localName),da(this._ownerElement,this,e,t),t},removeNamedItem:function(e){e=this.getNamedItem(e);return ha(this._ownerElement,this,e),e},removeNamedItemNS:function(e,t){t=this.getNamedItemNS(e,t);return ha(this._ownerElement,this,t),t},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},pa.prototype={hasFeature:function(e,t){e=this._features[e.toLowerCase()];return!(!e||t&&!(t in e))},createDocument:function(e,t,i){var n=new ya;return n.implementation=this,n.childNodes=new sa,(n.doctype=i)&&n.appendChild(i),t&&(t=n.createElementNS(e,t),n.appendChild(t)),n},createDocumentType:function(e,t,i){var n=new xa;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=i,n}},fa.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Ta(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return ba(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,i,n){var r=new i.constructor;for(var a in i){var s=i[a];"object"!=typeof s&&s!=r[a]&&(r[a]=s)}i.childNodes&&(r.childNodes=new sa);r.ownerDocument=t;switch(r.nodeType){case Xr:var o=i.attributes,u=r.attributes=new la,l=o.length;u._ownerElement=r;for(var c=0;c<l;c++)r.setAttributeNode(e(t,o.item(c),!0));break;case Kr:n=!0}if(n)for(var d=i.firstChild;d;)r.appendChild(e(t,d,n)),d=d.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Yr&&e.nodeType==Yr?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var n in i)if(i[n]==e)return n;t=t.nodeType==Kr?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&e in i)return i[e];t=t.nodeType==Kr?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Wr(ni,fa),Wr(ni,fa.prototype),ya.prototype={nodeName:"#document",nodeType:ea,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=ia)return null==this.documentElement&&e.nodeType==Xr&&(this.documentElement=e),Ta(this,e,t),e.ownerDocument=this,e;for(var i=e.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),ba(this,e)},importNode:function(e,t){return function e(t,i,n){var r;switch(i.nodeType){case Xr:(r=i.cloneNode(!1)).ownerDocument=t;case ia:break;case Kr:n=!0}r=r||i.cloneNode(!1);r.ownerDocument=t;r.parentNode=null;if(n)for(var a=i.firstChild;a;)r.appendChild(e(t,a,n)),a=a.nextSibling;return r}(this,e,t)},getElementById:function(t){var i=null;return ga(this.documentElement,function(e){if(e.nodeType==Xr&&e.getAttribute("id")==t)return i=e,!0}),i},getElementsByClassName:function(e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)");return new oa(this,function(t){var i=[];return ga(t.documentElement,function(e){e!==t&&e.nodeType==Xr&&n.test(e.getAttribute("class"))&&i.push(e)}),i})},createElement:function(e){var t=new Sa;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new sa,(t.attributes=new la)._ownerElement=t},createDocumentFragment:function(){var e=new Da;return e.ownerDocument=this,e.childNodes=new sa,e},createTextNode:function(e){var t=new Ca;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new wa;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Ia;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new Oa;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new Ea;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new La;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new Sa,n=t.split(":"),r=i.attributes=new la;return i.childNodes=new sa,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i},createAttributeNS:function(e,t){var i=new Ea,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},zr(ya,fa),ya.prototype.getElementsByTagName=(Sa.prototype={nodeType:Xr,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){e=this.getAttributeNode(e);return e&&e.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){e=this.ownerDocument.createAttribute(e);e.value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(e){e=this.getAttributeNode(e);e&&this.removeAttributeNode(e)},appendChild:function(e){return e.nodeType===ia?this.insertBefore(e,null):function(e,t){var i=t.parentNode;i&&(n=e.lastChild,i.removeChild(t),n=e.lastChild);var n=e.lastChild;return t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,_a(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){t=this.getAttributeNodeNS(e,t);t&&this.removeAttributeNode(t)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){t=this.getAttributeNodeNS(e,t);return t&&t.value||""},setAttributeNS:function(e,t,i){t=this.ownerDocument.createAttributeNS(e,t);t.value=t.nodeValue=""+i,this.setAttributeNode(t)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(n){return new oa(this,function(t){var i=[];return ga(t,function(e){e===t||e.nodeType!=Xr||"*"!==n&&e.tagName!=n||i.push(e)}),i})},getElementsByTagNameNS:function(n,r){return new oa(this,function(t){var i=[];return ga(t,function(e){e===t||e.nodeType!==Xr||"*"!==n&&e.namespaceURI!==n||"*"!==r&&e.localName!=r||i.push(e)}),i})}}).getElementsByTagName,ya.prototype.getElementsByTagNameNS=Sa.prototype.getElementsByTagNameNS,zr(Sa,fa),Ea.prototype.nodeType=Kr,zr(Ea,fa),ka.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(na[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){var n=this.data.substring(0,e),t=this.data.substring(e+t);this.nodeValue=this.data=i=n+i+t,this.length=i.length}},zr(ka,fa),Ca.prototype={nodeName:"#text",nodeType:Yr,splitText:function(e){var t=(i=this.data).substring(e),i=i.substring(0,e);this.data=this.nodeValue=i,this.length=i.length;t=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}},zr(Ca,ka),wa.prototype={nodeName:"#comment",nodeType:Zr},zr(wa,ka),Ia.prototype={nodeName:"#cdata-section",nodeType:Qr},zr(Ia,ka),xa.prototype.nodeType=ta,zr(xa,fa),Aa.prototype.nodeType=12,zr(Aa,fa),Pa.prototype.nodeType=6,zr(Pa,fa),La.prototype.nodeType=$r,zr(La,fa),Da.prototype.nodeName="#document-fragment",Da.prototype.nodeType=ia,zr(Da,fa),Oa.prototype.nodeType=Jr,zr(Oa,fa),Ra.prototype.serializeToString=function(e,t,i){return Ma.call(e,t,i)},fa.prototype.toString=Ma;try{Object.defineProperty&&(ra=function e(t){switch(t.nodeType){case Xr:case ia:var i=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&i.push(e(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}},Object.defineProperty(oa.prototype,"length",{get:function(){return ua(this),this.$$length}}),Object.defineProperty(fa.prototype,"textContent",{get:function(){return ra(this)},set:function(e){switch(this.nodeType){case Xr:case ia:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Ba=function(e,t,i){e["$$"+t]=i})}catch(e){}var Fa={Node:fa,DOMException:aa,DOMImplementation:pa,XMLSerializer:Ra},nr=t(function(e,t){function i(e){this.options=e||{locator:{}}}function l(){this.cdata=!1}function c(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function d(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function r(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function h(e,t){(e.currentElement||e.doc).appendChild(t)}i.prototype.parseFromString=function(e,t){var i=this.options,n=new p,r=i.domBuilder||new l,a=i.errorHandler,s=i.locator,o=i.xmlns||{},u=/\/x?html?$/.test(t),t=u?Ir.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&r.setDocumentLocator(s),n.errorHandler=function(n,e,r){if(!n){if(e instanceof l)return e;n=e}var a={},s=n instanceof Function;function t(t){var i=n[t];!i&&s&&(i=2==n.length?function(e){n(t,e)}:n),a[t]=i?function(e){i("[xmldom "+t+"]\t"+e+d(r))}:function(){}}return r=r||{},t("warning"),t("error"),t("fatalError"),a}(a,r,s),n.domBuilder=i.domBuilder||r,u&&(o[""]="http://www.w3.org/1999/xhtml"),o.xml=o.xml||"http://www.w3.org/XML/1998/namespace",e&&"string"==typeof e?n.parse(e,o,t):n.errorHandler.error("invalid doc source"),r.doc},l.prototype={startDocument:function(){this.doc=(new a).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var r=this.doc,a=r.createElementNS(e,i||t),s=n.length;h(this,a),this.currentElement=a,this.locator&&c(this.locator,a);for(var o=0;o<s;o++){var e=n.getURI(o),u=n.getValue(o),i=n.getQName(o),l=r.createAttributeNS(e,i);this.locator&&c(n.getLocator(o),l),l.value=l.nodeValue=u,a.setAttributeNode(l)}},endElement:function(e,t,i){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){t=this.doc.createProcessingInstruction(e,t);this.locator&&c(this.locator,t),h(this,t)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){var n;(e=r.apply(this,arguments))&&(n=this.cdata?this.doc.createCDATASection(e):this.doc.createTextNode(e),this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&c(this.locator,n))},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=r.apply(this,arguments);e=this.doc.createComment(e);this.locator&&c(this.locator,e),h(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;n&&n.createDocumentType&&(i=n.createDocumentType(e,t,i),this.locator&&c(this.locator,i),h(this,i))},warning:function(e){},error:function(e){},fatalError:function(e){throw new n(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){l.prototype[e]=function(){return null}});var p=Vr.XMLReader,n=Vr.ParseError,a=t.DOMImplementation=Fa.DOMImplementation;t.XMLSerializer=Fa.XMLSerializer,t.DOMParser=i,t.__DOMHandler=l});nr.DOMImplementation,nr.XMLSerializer;var ja=nr.DOMParser;nr.__DOMHandler;function Ha(e){return!!e&&"object"==typeof e}function qa(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(t,i){return"object"!=typeof i||Object.keys(i).forEach(function(e){Array.isArray(t[e])&&Array.isArray(i[e])?t[e]=t[e].concat(i[e]):Ha(t[e])&&Ha(i[e])?t[e]=qa(t[e],i[e]):t[e]=i[e]}),t},{})}function Va(e){return e.reduce(function(e,t){return e.concat(t)},[])}function Wa(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}function za(e){var t=e.baseUrl,i=void 0===(n=e.source)?"":n,n=void 0===(n=e.range)?"":n,e=void 0===(e=e.indexRange)?"":e,i={uri:i,resolvedUri:er((void 0===t?"":t)||"",i)};return(n||e)&&(n=(n||e).split("-"),e=parseInt(n[0],10),n=parseInt(n[1],10),i.byterange={length:n-e+1,offset:e}),i}function Ga(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e}function Xa(e){var s,t=void 0===(a=e.type)?"static":a,i=e.duration,n=e.timescale,r=void 0===n?1:n,a=e.sourceDuration,e=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}((n=Fs[t](e)).start,n.end).map((s=e,function(e,t){var i=s.duration,n=s.timescale,r=s.periodIndex,a=s.startNumber;return{number:(void 0===a?1:a)+e,duration:i/(void 0===n?1:n),timeline:r,time:t*i}}));return"static"===t&&(e[t=e.length-1].duration=a-i/r*t),e}function Ka(e){var t=e.baseUrl,i=void 0===(r=e.initialization)?{}:r,n=e.sourceDuration,r=void 0===(a=e.indexRange)?"":a,a=e.duration;if(!t)throw new Error(Ns);return i=za({baseUrl:t,source:i.sourceURL,range:i.range}),(r=za({baseUrl:t,source:t,indexRange:r})).map=i,a?(e=Xa(e)).length&&(r.duration=e[0].duration,r.timeline=e[0].timeline):n&&(r.duration=n,r.timeline=0),r.number=0,[r]}function Ya(e,t,i){for(var n=e.sidx.map||null,r=e.sidx.duration,a=e.timeline||0,s=(s=e.sidx.byterange).offset+s.length,o=t.timescale,u=t.references.filter(function(e){return 1!==e.referenceType}),l=[],c=s+t.firstOffset,d=0;d<u.length;d++){var h=t.references[d],p=h.referencedSize,h=h.subsegmentDuration,h=Ka({baseUrl:i,timescale:o,timeline:a,periodIndex:a,duration:h,sourceDuration:r,indexRange:c+"-"+(c+p-1)})[0];n&&(h.map=n),l.push(h),c+=p}return e.segments=l,e}function Qa(e){return e&&e.uri+"-"+(t=e.byterange,e=t.offset+t.length-1,t.offset+"-"+e);var t}function $a(e){var t;return(t=e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){var t,n;return e.discontinuityStarts=(t=e.segments,n="discontinuity",t.reduce(function(e,t,i){return t[n]&&e.push(i),e},[])),e})}function Ja(e,t){var i=Qa(e.sidx);return(i=i&&t[i]&&t[i].sidx)&&Ya(e,i,e.sidx.resolvedUri),e}function Za(e,l,c){var d;return void 0===l&&(l={}),void 0===c&&(c=!1),e=e.reduce(function(e,t){var i=t.attributes.role&&t.attributes.role.value||"",n=t.attributes.lang||"",r=t.attributes.label||"main";e[r=n&&!t.attributes.label?t.attributes.lang+(i?" ("+i+")":""):r]||(e[r]={language:n,autoselect:!0,default:"main"===i,playlists:[],uri:""});var a,s,o,u,u=Ja((s=c,o=(a=t).attributes,u=a.segments,n=a.sidx,u={attributes:((a={NAME:o.id,BANDWIDTH:o.bandwidth,CODECS:o.codecs})["PROGRAM-ID"]=1,a),uri:"",endList:"static"===(o.type||"static"),timeline:o.periodIndex,resolvedUri:"",targetDuration:o.duration,segments:u,mediaSequence:u.length?u[0].number:1},o.contentProtection&&(u.contentProtection=o.contentProtection),n&&(u.sidx=n),s&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u),l);return e[r].playlists.push(u),"undefined"==typeof d&&"main"===i&&((d=t).default=!0),e},{}),d||(e[Object.keys(e)[0]].default=!0),e}function es(e){var t=e.attributes,i=e.segments,n=e.sidx,i={attributes:((e={NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(t.type||"static"),timeline:t.periodIndex,resolvedUri:"",targetDuration:t.duration,segments:i,mediaSequence:i.length?i[0].number:1};return t.contentProtection&&(i.contentProtection=t.contentProtection),n&&(i.sidx=n),i}function ts(e){return"video/mp4"===(e=e.attributes).mimeType||"video/webm"===e.mimeType||"video"===e.contentType}function is(e){return"audio/mp4"===(e=e.attributes).mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType}function ns(e){return"text/vtt"===(e=e.attributes).mimeType||"text"===e.contentType}function rs(e,t,i){if(void 0===i&&(i={}),!e.length)return{};var n=(c=e[0].attributes).sourceDuration,r=void 0===(l=c.type)?"static":l,a=c.suggestedPresentationDelay,s=c.minimumUpdatePeriod,o=$a(e.filter(ts)).map(es),u=$a(e.filter(is)),l=e.filter(ns),c=e.map(function(e){return e.attributes.captionServices}).filter(Boolean),o={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((e={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:n,playlists:function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e)e[i]=Ja(e[i],t);return e}(o,i)};0<=s&&(o.minimumUpdatePeriod=1e3*s),t&&(o.locations=t),"dynamic"===r&&(o.suggestedPresentationDelay=a);var d,a=0===o.playlists.length;return u.length&&(o.mediaGroups.AUDIO.audio=Za(u,i,a)),l.length&&(o.mediaGroups.SUBTITLES.subs=(void 0===(d=i)&&(d={}),l.reduce(function(e,t){var i=t.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(Ja(function(e){var t=e.attributes,i=e.segments;"undefined"==typeof i&&(i=[{uri:t.baseUrl,timeline:t.periodIndex,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);(e={NAME:t.id,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1;return t.codecs&&(e.CODECS=t.codecs),{attributes:e,uri:"",endList:"static"===(t.type||"static"),timeline:t.periodIndex,resolvedUri:t.baseUrl||"",targetDuration:t.duration,segments:i,mediaSequence:i.length?i[0].number:1}}(t),d)),e},{}))),c.length&&(o.mediaGroups["CLOSED-CAPTIONS"].cc=c.reduce(function(n,e){return e&&e.forEach(function(e){var t=e.channel,i=e.language;n[i]={autoselect:!1,default:!1,instreamId:t,language:i},e.hasOwnProperty("aspectRatio")&&(n[i].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(n[i].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(n[i]["3D"]=e["3D"])}),n},{})),o}function as(e,t){for(var i,n,r,a,s,o,u=e.type,l=void 0===u?"static":u,c=void 0===(u=e.minimumUpdatePeriod)?0:u,d=void 0===(u=e.media)?"":u,h=e.sourceDuration,p=void 0===(u=e.timescale)?1:u,f=void 0===(u=e.startNumber)?1:u,m=e.periodIndex,g=[],y=-1,v=0;v<t.length;v++){var _=t[v],b=_.d,T=_.r||0,S=_.t||0;y<0&&(y=S),S&&y<S&&(y=S);var E,k=void 0;k=T<0?(E=v+1)===t.length?"dynamic"===l&&0<c&&0<d.indexOf("$Number$")?(i=y,n=b,_=o=s=a=r=void 0,r=(S=e).NOW,a=S.clientOffset,s=S.availabilityStartTime,o=S.timescale,_=S.start,S=S.minimumUpdatePeriod,Math.ceil((((r+a)/1e3+(void 0===S?0:S)-(s+(void 0===_?0:_)))*(void 0===o?1:o)-i)/n)):(h*p-y)/b:(t[E].t-y)/b:T+1;for(var C=f+g.length+k,w=f+g.length;w<C;)g.push({number:w,duration:b/p,time:y,timeline:m}),y+=b,w++}return g}function ss(e,t){return e.replace(js,(r=t,function(e,t,i,n){if("$$"===e)return"$";if("undefined"==typeof r[t])return e;e=""+r[t];return"RepresentationID"===t||(n=i?parseInt(n,10):1)<=e.length?e:new Array(n-e.length+1).join("0")+e}));var r}function os(i,e){var n={RepresentationID:i.id,Bandwidth:i.bandwidth||0},t=void 0===(t=i.initialization)?{sourceURL:"",range:""}:t,r=za({baseUrl:i.baseUrl,source:ss(t.sourceURL,n),range:t.range});return(t=e,(e=i).duration||t?e.duration?Xa(e):as(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]).map(function(e){n.Number=e.number,n.Time=e.time;var t=ss(i.media||"",n),e={uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:er(i.baseUrl||"",t),map:r,number:e.number};return i.presentationTimeOffset&&(e.presentationTimeOffset=i.presentationTimeOffset),e})}function us(n,e){var t=n.duration,i=void 0===(i=n.segmentUrls)?[]:i;if(!t&&!e||t&&e)throw new Error(Us);var r,a=i.map(function(e){return i=e,e=(t=n).baseUrl,t=t.initialization,t=za({baseUrl:e,source:(t=void 0===t?{}:t).sourceURL,range:t.range}),(i=za({baseUrl:e,source:i.media,range:i.mediaRange})).map=t,i;var t,i});return t&&(r=Xa(n)),(r=e?as(n,e):r).map(function(e,t){if(a[t]){t=a[t];return t.timeline=e.timeline,t.duration=e.duration,t.number=e.number,t}}).filter(function(e){return e})}function ls(e){var t,i=e.attributes,n=e.segmentInfo;n.template?(a=os,t=qa(i,n.template),n.template.presentationTimeOffset&&(t.presentationTimeOffset=n.template.presentationTimeOffset/n.template.timescale)):n.base?(a=Ka,t=qa(i,n.base)):n.list&&(a=us,t=qa(i,n.list));var r={attributes:i};if(!a)return r;var a,e=a(t,n.timeline);return t.duration?(i=t.duration,a=t.timescale,t.duration=i/(void 0===a?1:a)):e.length?t.duration=e.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0,r.attributes=t,r.segments=e,n.base&&t.indexRange&&(r.sidx=e[0],r.segments=[]),r}function cs(e,t){return Wa(e.childNodes).filter(function(e){return e.tagName===t})}function ds(e){return e.textContent.trim()}function hs(e){if(!(r=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e)))return 0;var t=(a=r.slice(1))[0],i=a[1],n=a[2],e=a[3],r=a[4],a=a[5];return 31536e3*parseFloat(t||0)+2592e3*parseFloat(i||0)+86400*parseFloat(n||0)+3600*parseFloat(e||0)+60*parseFloat(r||0)+parseFloat(a||0)}function ps(e){return e&&e.attributes?Wa(e.attributes).reduce(function(e,t){var i=Hs[t.name]||Hs.DEFAULT;return e[t.name]=i(t.value),e},{}):{}}function fs(e,i){return i.length?Va(e.map(function(t){return i.map(function(e){return er(t,ds(e))})})):e}function ms(e){var t=cs(e,"SegmentTemplate")[0],i=cs(e,"SegmentList")[0],n=i&&cs(i,"SegmentURL").map(function(e){return qa({tag:"SegmentURL"},ps(e))}),r=cs(e,"SegmentBase")[0],e=(a=i||t)&&cs(a,"SegmentTimeline")[0],a=(a=i||r||t)&&cs(a,"Initialization")[0];(t=t&&ps(t))&&a?t.initialization=a&&ps(a):t&&t.initialization&&(t.initialization={sourceURL:t.initialization});var s={template:t,timeline:e&&cs(e,"S").map(ps),list:i&&qa(ps(i),{segmentUrls:n,initialization:ps(a)}),base:r&&qa(ps(r),{initialization:ps(a)})};return Object.keys(s).forEach(function(e){s[e]||delete s[e]}),s}function gs(u,l,c){return function(e){var t=ps(e),i=fs(l,cs(e,"BaseURL")),n=cs(e,"Role")[0],n={role:ps(n)},t=qa(u,t,n),n=cs(e,"Accessibility")[0],n="urn:scte:dash:cc:cea-608:2015"===(n=ps(n)).schemeIdUri?n.value.split(";").map(function(e){var t,i,n;return/^CC\d=/.test(n=e)?(i=(t=e.split("="))[0],n=t[1]):/^CC\d$/.test(e)&&(i=e),{channel:i,language:n}}):"urn:scte:dash:cc:cea-708:2015"===n.schemeIdUri?n.value.split(";").map(function(e){var t,i,n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};return/=/.test(e)?(t=(i=e.split("="))[0],i=void 0===(i=i[1])?"":i,n.channel=t,n.language=e,i.split(",").forEach(function(e){var t=e.split(":"),e=t[0],t=t[1];"lang"===e?n.language=t:"er"===e?n.easyReader=Number(t):"war"===e?n.aspectRatio=Number(t):"3D"===e&&(n["3D"]=Number(t))})):n.language=e,n.channel&&(n.channel="SERVICE"+n.channel),n}):void 0;n&&(t=qa(t,{captionServices:n}));n=cs(e,"Label")[0];n&&n.childNodes.length&&(r=n.childNodes[0].nodeValue.trim(),t=qa(t,{label:r}));var r=cs(e,"ContentProtection").reduce(function(e,t){var i=ps(t),n=qs[i.schemeIdUri];return n&&(e[n]={attributes:i},(t=cs(t,"cenc:pssh")[0])&&(t=(t=ds(t))&&ar(t),e[n].pssh=t)),e},{});Object.keys(r).length&&(t=qa(t,{contentProtection:r}));var a,s,o,r=ms(e),e=cs(e,"Representation"),r=qa(c,r);return Va(e.map((a=t,s=i,o=r,function(e){var t=cs(e,"BaseURL"),t=fs(s,t),i=qa(a,ps(e)),n=ms(e);return t.map(function(e){return{segmentInfo:qa(o,n),attributes:qa(i,{baseUrl:e})}})})))}}function ys(e,t){var i=t=void 0===t?{}:t,n=void 0===(s=i.manifestUri)?"":s,r=i.NOW,a=void 0===r?Date.now():r,s=void 0===(t=i.clientOffset)?0:t;if(!(r=cs(e,"Period")).length)throw new Error(Os);var o,u,i=cs(e,"Location"),t=ps(e),e=fs([n],cs(e,"BaseURL"));return t.sourceDuration=t.mediaPresentationDuration||0,t.NOW=a,t.clientOffset=s,i.length&&(t.locations=i.map(ds)),{locations:t.locations,representationInfo:Va(r.map((o=t,u=e,function(e,t){var i=fs(u,cs(e,"BaseURL")),n=ps(e),n=parseInt(n.id,10),t=_.isNaN(n)?t:n,n=qa(o,{periodIndex:t}),t=cs(e,"AdaptationSet"),e=ms(e);return Va(t.map(gs(n,i,e)))})))}}function vs(e){if(""===e)throw new Error(Rs);var t,i,n=new ja;try{i=(t=n.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!i||i&&0<i.getElementsByTagName("parsererror").length)throw new Error(Ms);return i}function _s(e,t){void 0===t&&(t={});var i=ys(vs(e),t),e=i.representationInfo.map(ls);return rs(e,i.locations,t.sidxMapping)}function bs(e){return function(e){e=cs(e,"UTCTiming")[0];if(!e)return null;var t=ps(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Bs)}return t}(vs(e))}function Ts(e){return e instanceof Uint8Array?e:(Array.isArray(e)||(t=e,ArrayBuffer.isView(t))||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0));var t}function Ss(e,t){var i=void 0!==(t=(void 0===t?{}:t).le)&&t;e=zs(e="bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e?0:e);for(var n=(t=e,Math.ceil(t.toString(2).length/8)),r=new Uint8Array(new ArrayBuffer(n)),a=0;a<n;a++){var s=i?a:Math.abs(a+1-r.length);r[s]=Number(e/Gs[a]&zs(255)),e<0&&(r[s]=Math.abs(~r[s]),r[s]-=0===a?1:2)}return r}function Es(e,t){if("string"!=typeof(e="string"!=typeof e&&e&&"function"==typeof e.toString?e.toString():e))return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}function ks(i,e,t){var n=void 0===t?{}:t,r=void 0===(t=n.offset)?0:t,a=void 0===(n=n.mask)?[]:n;return i=Ts(i),n=(e=Ts(e)).every||Array.prototype.every,e.length&&i.length-r>=e.length&&n.call(e,function(e,t){return e===(a[t]?a[t]&i[r+t]:i[r+t])})}function Cs(e,t){return void 0===t&&(t=0),(e=Ts(e)).length-t<10||!ks(e,Xs,{offset:t})?t:Cs(e,t+=function(e,t){void 0===t&&(t=0);var i=(e=Ts(e))[t+5],t=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&i)>>4?20+t:10+t}(e,t))}function ws(e){return"string"==typeof e?Es(e):e}function Is(e,t,i){var n;void 0===i&&(i=!1),n=t,t=Array.isArray(n)?n.map(ws):[ws(n)],e=Ts(e);var r=[];if(!t.length)return r;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(0==s)break;var u=a+s;if(u>e.length){if(i)break;u=e.length}s=e.subarray(a+8,u);ks(o,t[0])&&(1===t.length?r.push(s):r.push.apply(r,Is(s,t.slice(1),i))),a=u}return r}function xs(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=function(e){for(var t=1,i=0;i<Ys.length&&!(e&Ys[i]);i++)t++;return t}(e[t]),a=e.subarray(t,t+r);return i&&((a=Array.prototype.slice.call(e,t,t+r))[0]^=Ys[r-1]),{length:r,value:function(n,e){var t=void 0===e?{}:e,e=t.signed,e=void 0!==e&&e,t=t.le,r=void 0!==t&&t;n=Ts(n);t=r?"reduce":"reduceRight",t=(n[t]||Array.prototype[t]).call(n,function(e,t,i){i=r?i:Math.abs(i+1-n.length);return e+zs(t)*Gs[i]},zs(0));return!e||(e=Gs[n.length]/zs(2)-zs(1))<(t=zs(t))&&(t-=e,t-=e,t-=zs(2)),Number(t)}(a,{signed:n}),bytes:a}}function As(e){return"string"==typeof e?e.match(/.{1,2}/g).map(As):"number"==typeof e?Ss(e):e}function Ps(e,t,i){if(i>=t.length)return t.length;var n=xs(t,i,!1);if(ks(e.bytes,n.bytes))return i;var r=xs(t,i+n.length);return Ps(e,t,i+r.length+r.value+n.length)}function Ls(e,t){var i;i=t,t=Array.isArray(i)?i.map(As):[As(i)],e=Ts(e);var n=[];if(!t.length)return n;for(var r=0;r<e.length;){var a=xs(e,r,!1),s=xs(e,r+a.length),o=r+a.length+s.length;127===s.value&&(s.value=Ps(a,e,o),s.value!==e.length&&(s.value-=o));var u=o+s.value>e.length?e.length:o+s.value,u=e.subarray(o,u);ks(t[0],a.bytes)&&(1===t.length?n.push(u):n=n.concat(Ls(u,t.slice(1)))),r+=a.length+s.length+u.length}return n}function Ds(e,t,i,n){void 0===n&&(n=1/0),e=Ts(e),i=[].concat(i);for(var r,a=0,s=0;a<e.length&&(s<n||r);){var o=void 0;if(ks(e.subarray(a),Qs)?o=4:ks(e.subarray(a),$s)&&(o=3),o){if(s++,r)return function(e){for(var t=[],i=1;i<e.length-2;)ks(e.subarray(i,i+3),Js)&&(t.push(i+2),i++),i++;if(0===t.length)return e;for(var n=e.length-t.length,r=new Uint8Array(n),a=0,i=0;i<n;a++,i++)a===t[0]&&(a++,t.shift()),r[i]=e[a];return r}(e.subarray(r,a));var u=void 0;"h264"===t?u=31&e[a+o]:"h265"===t&&(u=e[a+o]>>1&63),-1!==i.indexOf(u)&&(r=a+o),a+=o+("h264"===t?1:2)}else a++}return e.subarray(0,0)}
/*! @name mpd-parser @version 0.17.0 @license Apache-2.0 */
var Os="INVALID_NUMBER_OF_PERIOD",Rs="DASH_EMPTY_MANIFEST",Ms="DASH_INVALID_XML",Ns="NO_BASE_URL",Us="SEGMENT_TIME_UNSPECIFIED",Bs="UNSUPPORTED_UTC_TIMING_SCHEME",Fs={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,i=e.sourceDuration,e=Ga(e.endNumber);return{start:0,end:"number"==typeof e?e:Math.ceil(i/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.start,u=void 0===o?0:o,r=e.minimumUpdatePeriod,o=void 0===r?0:r,r=e.timeShiftBufferDepth,r=void 0===r?1/0:r,e=Ga(e.endNumber),i=(t+i)/1e3,u=n+u,o=Math.ceil((i+o-u)*a/s),r=Math.floor((i-u-r)*a/s),s=Math.floor((i-u)*a/s);return{start:Math.max(0,r),end:"number"==typeof e?e:Math.min(o,s)}}},js=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Hs={mediaPresentationDuration:hs,availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=e)&&(e+="Z"),Date.parse(e)/1e3},minimumUpdatePeriod:hs,suggestedPresentationDelay:hs,type:function(e){return e},timeShiftBufferDepth:hs,start:hs,width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?hs(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},qs={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Vs=Math.pow(2,32),Ws=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},n=12;0===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+4),n+=8):(i.earliestPresentationTime=t.getUint32(n)*Vs+t.getUint32(n+4),i.firstOffset=t.getUint32(n+8)*Vs+t.getUint32(n+12),n+=16);var r=t.getUint16(n+=2);for(n+=2;0<r;n+=12,r--)i.references.push({referenceType:(128&e[n])>>>7,referencedSize:2147483647&t.getUint32(n),subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(128&e[n+8]),sapType:(112&e[n+8])>>>4,sapDeltaTime:268435455&t.getUint32(n+8)});return i},zs=_.BigInt||Number,Gs=[zs("0x1"),zs("0x100"),zs("0x10000"),zs("0x1000000"),zs("0x100000000"),zs("0x10000000000"),zs("0x1000000000000"),zs("0x100000000000000"),zs("0x10000000000000000")],Xs=Ts([73,68,51]),Ks={EBML:Ts([26,69,223,163]),DocType:Ts([66,130]),Segment:Ts([24,83,128,103]),SegmentInfo:Ts([21,73,169,102]),Tracks:Ts([22,84,174,107]),Track:Ts([174]),TrackNumber:Ts([215]),DefaultDuration:Ts([35,227,131]),TrackEntry:Ts([174]),TrackType:Ts([131]),FlagDefault:Ts([136]),CodecID:Ts([134]),CodecPrivate:Ts([99,162]),VideoTrack:Ts([224]),AudioTrack:Ts([225]),Cluster:Ts([31,67,182,117]),Timestamp:Ts([231]),TimestampScale:Ts([42,215,177]),BlockGroup:Ts([160]),BlockDuration:Ts([155]),Block:Ts([161]),SimpleBlock:Ts([163])},Ys=[128,64,32,16,8,4,2,1],Qs=Ts([0,0,0,1]),$s=Ts([0,0,1]),Js=Ts([0,0,3]),Zs={webm:Ts([119,101,98,109]),matroska:Ts([109,97,116,114,111,115,107,97]),flac:Ts([102,76,97,67]),ogg:Ts([79,103,103,83]),ac3:Ts([11,119]),riff:Ts([82,73,70,70]),avi:Ts([65,86,73]),wav:Ts([87,65,86,69]),"3gp":Ts([102,116,121,112,51,103]),mp4:Ts([102,116,121,112]),fmp4:Ts([115,116,121,112]),mov:Ts([102,116,121,112,113,116])},eo={aac:function(e){var t=Cs(e);return ks(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Cs(e);return ks(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){e=Ls(e,[Ks.EBML,Ks.DocType])[0];return ks(e,Zs.webm)},mkv:function(e){e=Ls(e,[Ks.EBML,Ks.DocType])[0];return ks(e,Zs.matroska)},mp4:function(e){return!eo["3gp"](e)&&!eo.mov(e)&&(ks(e,Zs.mp4,{offset:4})||ks(e,Zs.fmp4,{offset:4}))},mov:function(e){return ks(e,Zs.mov,{offset:4})},"3gp":function(e){return ks(e,Zs["3gp"],{offset:4})},ac3:function(e){var t=Cs(e);return ks(e,Zs.ac3,{offset:t})},ts:function(e){if(e.length<189&&1<=e.length)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Cs(e);return ks(e,Zs.flac,{offset:t})},ogg:function(e){return ks(e,Zs.ogg)},avi:function(e){return ks(e,Zs.riff)&&ks(e,Zs.avi,{offset:8})},wav:function(e){return ks(e,Zs.riff)&&ks(e,Zs.wav,{offset:8})},h264:function(e){return Ds(e,"h264",7,3).length},h265:function(e){return Ds(e,"h265",[32,33],3).length}},to=Object.keys(eo).filter(function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e}).concat(["ts","h264","h265"]);to.forEach(function(e){var t=eo[e];eo[e]=function(e){return t(Ts(e))}});function io(e){e=Ts(e);for(var t=0;t<to.length;t++){var i=to[t];if(Ou[i](e))return i}return""}function no(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t}function ro(e){return Zn.log.debug?Zn.log.debug.bind(Zn,"VHS:",e+" >"):function(){}}function ao(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Zn.createTimeRanges(n)}function so(e,i){return ao(e,function(e,t){return e-.1<=i&&i<=t+.1})}function oo(e,t){return ao(e,function(e){return t<=e-Nu})}function uo(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")}function lo(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}function co(e){if(e&&e.length&&e.end)return e.end(e.length-1)}function ho(e){return(e.segments||[]).reduce(function(i,n,r){return n.parts?n.parts.forEach(function(e,t){i.push({duration:e.duration,segmentIndex:r,partIndex:t,part:e,segment:n})}):i.push({duration:n.duration,segmentIndex:r,partIndex:null,segment:n,part:null}),i},[])}function po(e){return(e=e.segments&&e.segments.length&&e.segments[e.segments.length-1])&&e.parts||[]}function fo(e){var t=e.preloadSegment;if(t){e=t.parts,t=(t.preloadHints||[]).reduce(function(e,t){return e+("PART"===t.type?1:0)},0);return t+=e&&e.length?e.length:0}}function mo(e,t){return t.endList?0:e&&e.suggestedPresentationDelay?e.suggestedPresentationDelay:(e=0<po(t).length)&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:e&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0}function go(e,t,i){if((t="undefined"==typeof t?e.mediaSequence+e.segments.length:t)<e.mediaSequence)return 0;var n=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if("undefined"!=typeof r.start)return{result:r.start,precise:!0};if("undefined"!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if("undefined"!=typeof(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,"undefined"!=typeof r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(e,t);return n.precise?n.result:(t=function(e,t){for(var i,n=0,r=t-e.mediaSequence;r<e.segments.length;r++){if("undefined"!=typeof(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!=typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?t.result:n.result+i}function yo(e,t,i){if(!e)return 0;if("undefined"==typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return _.Infinity}return go(e,t,i="number"!=typeof i?0:i)}function vo(e){var t=e.defaultDuration,i=e.durationList,n=e.startIndex,r=e.endIndex,a=0;if(r<n&&(n=(e=[r,n])[0],r=e[1]),n<0){for(var s=n;s<Math.min(0,r);s++)a+=t;n=0}for(var o=n;o<r;o++)a+=i[o].duration;return a}function _o(e,t,i,n){return e&&e.segments?e.endList?yo(e):null===t?null:(t=go(e,e.mediaSequence+e.segments.length,t=t||0),i&&(t-=n="number"==typeof n?n:mo(null,e)),Math.max(0,t)):null}function bo(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function To(e){return e.excludeUntil&&e.excludeUntil===1/0}function So(e){var t=bo(e);return!e.disabled&&!t}function Eo(e,t){return t.attributes&&t.attributes[e]}function ko(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!So(e)&&(e.attributes.BANDWIDTH||0)<i}).length}function Co(e,t){return!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri))))}function wo(e,t){var i,n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(i in n){for(var a in n[i])if(r=t(n[i][a]))break;if(r)break}return!!r}function Io(i){if(!i||!i.playlists||!i.playlists.length)return wo(i,function(e){return e.playlists&&e.playlists.length||e.uri});for(var e=0;e<i.playlists.length;e++){var t=function(e){var t=i.playlists[e],e=t.attributes&&t.attributes.CODECS;return e&&e.split(",").every(hr)||wo(i,function(e){return Co(t,e)})?"continue":{v:!1}}(e);if("continue"!==t&&"object"==typeof t)return t.v}return!0}function xo(e,t){return e+"-"+t}function Ao(r,a){r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(e){if(r.mediaGroups[e])for(var t in r.mediaGroups[e])for(var i in r.mediaGroups[e][t]){var n=r.mediaGroups[e][t][i];a(n,e,t,i)}})}function Po(e){var t=e.playlist,i=e.uri,e=e.id;t.id=e,t.playlistErrors_=0,i&&(t.uri=i),t.attributes=t.attributes||{}}function Lo(a,e){a.uri=e;for(var t,i=0;i<a.playlists.length;i++)a.playlists[i].uri||(a.playlists[i].uri="placeholder-uri-"+i);Ao(a,function(e,t,i,n){var r="placeholder-uri-"+t+"-"+i+"-"+n;e.playlists&&e.playlists.length||(e.playlists=[g({},e)]),e.playlists.forEach(function(e,t){var i=xo(t,r);e.uri?e.resolvedUri=e.resolvedUri||Mu(a.uri,e.uri):(e.uri=0===t?r:i,e.resolvedUri=e.uri),e.id=e.id||i,e.attributes=e.attributes||{},a.playlists[e.id]=e,a.playlists[e.uri]=e})}),function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];Po({playlist:i,id:xo(t,i.uri)}),i.resolvedUri=Mu(e.uri,i.uri),e.playlists[i.id]=i,(e.playlists[i.uri]=i).attributes.BANDWIDTH||Fu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(a),Ao(t=a,function(e){e.uri&&(e.resolvedUri=Mu(t.uri,e.uri))})}function Do(e,t,i){var n=e.slice(),r=t.slice();i=i||0;for(var a,s=[],o=0;o<r.length;o++){var u=n[o+i],l=r[o];u?(a=u.map||a,s.push(function(e,t){if(!e)return t;var i=ju(e,t);if(e.preloadHints&&!t.preloadHints&&delete i.preloadHints,e.parts&&!t.parts)delete i.parts;else if(e.parts&&t.parts)for(var n=0;n<t.parts.length;n++)e.parts&&e.parts[n]&&(i.parts[n]=ju(e.parts[n],t.parts[n]));return!e.skipped&&t.skipped&&(i.skipped=!1),e.preload&&!t.preload&&(i.preload=!1),i}(u,l))):(a&&!l.map&&(l.map=a),s.push(l))}return s}function Oo(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=Mu(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Mu(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Mu(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Mu(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(e){e.resolvedUri||(e.resolvedUri=Mu(t,e.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(e){e.resolvedUri||(e.resolvedUri=Mu(t,e.uri))})}function Ro(e){var t=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(var n=0;n<i.preloadHints.length;n++)if("MAP"===i.preloadHints[n].type)return t;i.duration=e.targetDuration,i.preload=!0,t.push(i)}return t}function Mo(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence}function No(e,a,t){void 0===t&&(t=Mo);var i=ju(e,{}),n=i.playlists[a.id];if(!n)return null;if(t(n,a))return null;a.segments=Ro(a);var r=ju(n,a);if(r.preloadSegment&&!a.preloadSegment&&delete r.preloadSegment,n.segments){if(a.skip){a.segments=a.segments||[];for(var s=0;s<a.skip.skippedSegments;s++)a.segments.unshift({skipped:!0})}r.segments=Do(n.segments,a.segments,a.mediaSequence-n.mediaSequence)}r.segments.forEach(function(e){Oo(e,r.resolvedUri)});for(var o=0;o<i.playlists.length;o++)i.playlists[o].id===a.id&&(i.playlists[o]=r);return i.playlists[a.id]=r,i.playlists[a.uri]=r,Ao(e,function(e,t,i,n){if(e.playlists)for(var r=0;r<e.playlists.length;r++)a.id===e.playlists[r].id&&(e.playlists[r]=a)}),i}function Uo(e,t){var i=(n=e.segments[e.segments.length-1])&&n.parts&&n.parts[n.parts.length-1],n=i&&i.duration||n&&n.duration;return t&&n?1e3*n:500*(e.partTargetDuration||e.targetDuration||10)}function Bo(e,t,i,n){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),n(t=!t&&!e.aborted&&200!==i.statusCode&&206!==i.statusCode&&0!==i.statusCode?new Error("XHR Failed with a response of: "+(e&&(r||e.responseText))):t,e)}function Fo(){function a(e,i){e=Vu({timeout:45e3},e);var t=a.beforeRequest||Zn.Vhs.xhr.beforeRequest;!t||"function"!=typeof t||(t=t(e))&&(e=t);var n=(!0===Zn.Vhs.xhr.original?qu:Zn.Vhs.xhr)(e,function(e,t){return Bo(n,e,t,i)}),r=n.abort;return n.abort=function(){return n.aborted=!0,r.apply(n,arguments)},n.uri=e.uri,n.requestTime=Date.now(),n}return a.original=!0,a}function jo(e){var t,i={};return e.byterange&&(i.Range=(t=e.byterange,e=t.offset+t.length-1,"bytes="+t.offset+"-"+e)),i}function Ho(e,t){return e=e.toString(16),"00".substring(0,2-e.length)+e+(t%2?" ":"")}function qo(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Vo(i){var n={};return Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n}function Wo(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function zo(e){return e.resolvedUri}function Go(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(Ho).join("")+" "+t.slice(16*n,16*n+16).map(qo).join("")+"\n";return i}function Xo(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i;if(!(i=e.callback))throw new Error("getProgramTime: callback must be provided");return t&&void 0!==n?(e=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(n<e){if(e>n+.25*a.duration)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(n,t))?"estimate"===e.type?i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:e.estimatedStart}):(t={mediaSeconds:n},(e=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+i);return new Date(t.dateTimeObject.getTime()+1e3*i)}(n,e.segment))&&(t.programDateTime=e.toISOString()),i(null,t)):i({message:"valid programTime was not found"}):i({message:"getProgramTime: playlist and time must be provided"})}function Ko(e){var t=e.programTime,i=e.playlist,n=e.retryCount,r=void 0===n?2:n,a=e.seekTo,s=e.pauseAfterSeek,o=void 0===s||s,u=e.tech,l=e.callback;if(!l)throw new Error("seekToProgramTime: callback must be provided");return"undefined"!=typeof t&&i&&a?i.endList||u.hasStarted_?function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i)?(n=function(e,t){var i;try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;if(i<(r=t.segments[0]).dateTimeObject)return null;for(var n=0;n<t.segments.length-1;n++){var r=t.segments[n];if(i<t.segments[n+1].dateTimeObject)break}var a,s=t.segments[t.segments.length-1],e=s.dateTimeObject,a=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return new Date(e.getTime()+1e3*a)<i?null:{segment:r=e<i?s:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Bu.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"}}(t,i))?(s=n.segment,e=function(e,t){var i;try{n=new Date(e),i=new Date(t)}catch(e){}var n=n.getTime();return(i.getTime()-n)/1e3}(s.dateTimeObject,t),"estimate"===n.type?0===r?l({message:t+" is not buffered yet. Try again"}):(a(n.estimatedStart+e),void u.one("seeked",function(){Ko({programTime:t,playlist:i,retryCount:r-1,seekTo:a,pauseAfterSeek:o,tech:u,callback:l})})):(e=s.start+e,u.one("seeked",function(){return l(null,u.currentTime())}),o&&u.pause(),void a(e))):l({message:t+" was not found in the stream"}):l({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri}):l({message:"player must be playing a live stream to start buffering"}):l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}function Yo(e,t){if(4===e.readyState)return t()}function Qo(e,t,r){function n(e,t,i,n){return t.abort(),o=!0,r(e,t,i,n)}function i(e,t){if(!o){if(e)return n(e,t,"",s);var i=t.responseText.substring(s&&s.byteLength||0,t.responseText.length);if(s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if((t=t.filter(function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})).length<=1)return Ts(t[0]);var n=t.reduce(function(e,t,i){return e+(t.byteLength||t.length)},0),r=new Uint8Array(n),a=0;return t.forEach(function(e){e=Ts(e),r.set(e,a),a+=e.byteLength}),r}(s,Es(i,!0)),a=a||Cs(s),s.length<10||a&&s.length<a+2)return Yo(t,function(){return n(e,t,"",s)});i=io(s);return"ts"===i&&s.length<188||!i&&s.length<376?Yo(t,function(){return n(e,t,"",s)}):n(null,t,i,s)}}var a,s=[],o=!1,u=t({uri:e,beforeSend:function(t){t.overrideMimeType("text/plain; charset=x-user-defined"),t.addEventListener("progress",function(e){return e.total,e.loaded,Bo(t,null,{statusCode:t.status},i)})}},function(e,t){return Bo(u,e,t,i)});return u}function $o(e,t){if(!Mo(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var i=0;i<e.segments.length;i++){var n=e.segments[i],r=t.segments[i];if(n.uri!==r.uri)return!1;if(n.byterange||r.byterange){n=n.byterange,r=r.byterange;if(n&&!r||!n&&r)return!1;if(n.offset!==r.offset||n.length!==r.length)return!1}}return!0}function Jo(e,t){var i,n={};for(i in e){var r=e[i].sidx;if(r){var a=Qa(r);if(!t[a])break;var s=t[a].sidxInfo;s=s,r=r,(Boolean(!s.map&&!r.map)||Boolean(s.map&&r.map&&s.map.byterange.offset===r.map.byterange.offset&&s.map.byterange.length===r.map.byterange.length))&&s.uri===r.uri&&s.byterange.offset===r.byterange.offset&&s.byterange.length===r.byterange.length&&(n[a]=t[a])}}return n}function Zo(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e}function eu(i){var n=i.transmuxer,e=i.bytes,t=i.audioAppendStart,r=i.gopsToAlignWith,a=i.remux,s=i.onData,o=i.onTrackInfo,u=i.onAudioTimingInfo,l=i.onVideoTimingInfo,c=i.onVideoSegmentTimingInfo,d=i.onAudioSegmentTimingInfo,h=i.onId3,p=i.onCaptions,f=i.onDone,m=i.onEndedTimeline,g=i.isEndOfTimeline,y={buffer:[]},v=g;n.onmessage=function(e){var t;n.currentTransmux===i&&("data"===e.data.action&&function(e,t,i){var n=e.data.segment,r=n.type,a=n.initSegment,s=n.captions,o=n.captionStreams,u=n.metadata,l=n.videoFrameDtsTime,n=n.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:o,metadata:u});e=e.data.segment.boxes||{data:e.data.segment.data},a={type:r,data:new Uint8Array(e.data,e.data.byteOffset,e.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};"undefined"!=typeof l&&(a.videoFrameDtsTime=l),"undefined"!=typeof n&&(a.videoFramePtsTime=n),i(a)}(e,y,s),"trackinfo"===e.data.action&&o(e.data.trackInfo),"gopInfo"===e.data.action&&(y.gopInfo=e.data.gopInfo),"audioTimingInfo"===e.data.action&&u(e.data.audioTimingInfo),"videoTimingInfo"===e.data.action&&l(e.data.videoTimingInfo),"videoSegmentTimingInfo"===e.data.action&&c(e.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===e.data.action&&d(e.data.audioSegmentTimingInfo),"id3Frame"===e.data.action&&h([e.data.id3Frame],e.data.id3Frame.dispatchType),"caption"===e.data.action&&p(e.data.caption),"endedtimeline"===e.data.action&&(v=!1,m()),"transmuxed"===e.data.type&&(v||(n.onmessage=null,e=(t={transmuxedData:y,callback:f}).transmuxedData,t=t.callback,e.buffer=[],t(e),Ku(n))))},t&&n.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(r)&&n.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),"undefined"!=typeof a&&n.postMessage({action:"setRemux",remux:a}),e.byteLength&&(r=e instanceof ArrayBuffer?e:e.buffer,a=e instanceof ArrayBuffer?0:e.byteOffset,n.postMessage({action:"push",data:r,byteOffset:a,byteLength:e.byteLength},[r])),g&&n.postMessage({action:"endTimeline"}),n.postMessage({action:"flush"})}function tu(e,t){e.postMessage({action:t}),Ku(e)}function iu(e,t){if(!t.currentTransmux)return t.currentTransmux=e,tu(t,e),0;t.transmuxQueue.push(tu.bind(null,t,e))}function nu(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void eu(e);e.transmuxer.transmuxQueue.push(e)}function ru(i){var n=i.transmuxer,r=i.endAction||i.action,a=i.callback,e=g({},i,{endAction:null,transmuxer:null,callback:null}),t=function e(t){t.data.action===r&&(n.removeEventListener("message",e),t.data.data&&(t.data.data=new Uint8Array(t.data.data,i.byteOffset||0,i.byteLength||t.data.data.byteLength),i.data&&(i.data=t.data.data)),a(t.data))};n.addEventListener("message",t),i.data?(t=i.data instanceof ArrayBuffer,e.byteOffset=t?0:i.data.byteOffset,e.byteLength=i.data.byteLength,t=[t?i.data:i.data.buffer],n.postMessage(e,t)):n.postMessage(e)}function au(e){e.forEach(function(e){e.abort()})}function su(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Ju,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Zu,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:$u,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:$u,xhr:t}:null}function ou(a,s,o){return function(e,t){var i=t.response,e=su(e,t);if(e)return o(e,a);if(16!==i.byteLength)return o({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:$u,xhr:t},a);for(var i=new DataView(i),n=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),r=0;r<s.length;r++)s[r].bytes=n;return o(null,a)}}function uu(i,n){var e=io(i.map.bytes);if("mp4"!==e){var t=i.map.resolvedUri||i.map.uri;return n({internal:!0,message:"Found unsupported "+(e||"unknown")+" container for initialization segment at URL: "+t,code:$u})}ru({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:function(e){var t=e.tracks,e=e.data;return i.map.bytes=e,t.forEach(function(e){i.map.tracks=i.map.tracks||{},i.map.tracks[e.type]||"number"==typeof(i.map.tracks[e.type]=e).id&&e.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[e.id]=e.timescale)}),n(null)}})}function lu(e){var i=e.segment,n=e.finishProcessingFn,r=e.responseType;return function(e,t){e=su(e,t);if(e)return n(e,i);e="arraybuffer"!==r&&t.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer}(t.responseText.substring(i.lastReachedChar||0)):t.response;return i.stats={bandwidth:(t=t).bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0},i.key?i.encryptedBytes=new Uint8Array(e):i.bytes=new Uint8Array(e),n(null,i)}}function cu(e){var i=e.segment,t=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,e=i.map&&i.map.tracks||{},p=Boolean(e.audio&&e.video),f=r.bind(null,i,"audio","start"),m=r.bind(null,i,"audio","end"),g=r.bind(null,i,"video","start"),y=r.bind(null,i,"video","end");ru({action:"probeTs",transmuxer:i.transmuxer,data:t,baseStartTime:i.baseStartTime,callback:function(e){i.bytes=t=e.data;e=e.result;e&&(n(i,{hasAudio:e.hasAudio,hasVideo:e.hasVideo,isMuxed:p}),n=null,e.hasAudio&&!p&&f(e.audioStart),e.hasVideo&&g(e.videoStart),g=f=null),nu({bytes:t,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:p,onData:function(e){e.type="combined"===e.type?"video":e.type,d(i,e)},onTrackInfo:function(e){n&&(p&&(e.isMuxed=!0),n(i,e))},onAudioTimingInfo:function(e){f&&"undefined"!=typeof e.start&&(f(e.start),f=null),m&&"undefined"!=typeof e.end&&m(e.end)},onVideoTimingInfo:function(e){g&&"undefined"!=typeof e.start&&(g(e.start),g=null),y&&"undefined"!=typeof e.end&&y(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){s(e)},onId3:function(e,t){o(i,e,t)},onCaptions:function(e){u(i,[e])},isEndOfTimeline:l,onEndedTimeline:function(){c()},onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,i,e))}})}})}function du(e){var i=e.segment,n=e.bytes,t=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=new Uint8Array(n);if(0<Is(p,["moof"]).length){i.isFmp4=!0;var f=i.map.tracks,m={isFmp4:!0,hasVideo:!!f.video,hasAudio:!!f.audio};f.audio&&f.audio.codec&&"enca"!==f.audio.codec&&(m.audioCodec=f.audio.codec),f.video&&f.video.codec&&"encv"!==f.video.codec&&(m.videoCodec=f.video.codec),f.video&&f.audio&&(m.isMuxed=!0),t(i,m);var g=function(e){d(i,{data:p,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),e&&e.length&&u(i,e),h(null,i,{})};ru({action:"probeMp4StartTime",timescales:i.map.timescales,data:p,transmuxer:i.transmuxer,callback:function(e){var t=e.data,e=e.startTime;n=t.buffer,i.bytes=p=t,m.hasAudio&&!m.isMuxed&&r(i,"audio","start",e),m.hasVideo&&r(i,"video","start",e),f.video&&t.byteLength&&i.transmuxer?ru({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:p,timescales:i.map.timescales,trackIds:[f.video.id],callback:function(e){n=e.data.buffer,i.bytes=p=e.data,g(e.captions)}}):g()}})}else if(i.transmuxer){if("undefined"==typeof i.container&&(i.container=io(p)),"ts"!==i.container&&"aac"!==i.container)return t(i,{hasAudio:!1,hasVideo:!1}),h(null,i,{}),0;cu({segment:i,bytes:n,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:d,doneFn:h})}else h(null,i,{})}function hu(e,i){var n=e.id,t=e.key,r=e.encryptedBytes,a=e.decryptionWorker,e=function e(t){t.data.source===n&&(a.removeEventListener("message",e),t=t.data.decrypted,i(new Uint8Array(t.bytes,t.byteOffset,t.byteLength)))};a.addEventListener("message",e),e=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),a.postMessage(Vo({source:n,encrypted:r,key:e,iv:t.iv}),[r.buffer,e.buffer])}function pu(e){var i=e.activeXhrs,f=e.decryptionWorker,m=e.trackInfoFn,g=e.timingInfoFn,y=e.videoSegmentTimingInfoFn,v=e.audioSegmentTimingInfoFn,_=e.id3Fn,b=e.captionsFn,T=e.isEndOfTimeline,S=e.endedTimelineFn,E=e.dataFn,k=e.doneFn,n=0,r=!1;return function(e,p){if(!r){if(e)return r=!0,au(i),k(e,p);if((n+=1)===i.length){var t=function(){if(p.encryptedBytes)return t=(e={decryptionWorker:f,segment:p,trackInfoFn:m,timingInfoFn:g,videoSegmentTimingInfoFn:y,audioSegmentTimingInfoFn:v,id3Fn:_,captionsFn:b,isEndOfTimeline:T,endedTimelineFn:S,dataFn:E,doneFn:k}).decryptionWorker,i=e.segment,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,void hu({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:t},function(e){i.bytes=e,du({segment:i,bytes:i.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:d,doneFn:h})});var e,t,i,n,r,a,s,o,u,l,c,d,h;du({segment:p,bytes:p.bytes,trackInfoFn:m,timingInfoFn:g,videoSegmentTimingInfoFn:y,audioSegmentTimingInfoFn:v,id3Fn:_,captionsFn:b,isEndOfTimeline:T,endedTimelineFn:S,dataFn:E,doneFn:k})};if(p.endOfAllRequests=Date.now(),p.map&&p.map.encryptedBytes&&!p.map.bytes)return hu({decryptionWorker:f,id:p.requestId+"-init",encryptedBytes:p.map.encryptedBytes,key:p.map.key},function(e){p.map.bytes=e,uu(p,function(e){return e?(au(i),k(e,p)):void t()})});t()}}}}function fu(e){var n=e.segment,r=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){var t,i=e.target;if(!i.aborted)return n.stats=Zn.mergeOptions(n.stats,(i=(t=e).target,(i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),r(e,n)}}function mu(e){var t,i,n,r=e.xhr,a=e.xhrOptions,s=e.decryptionWorker,o=e.segment,u=e.abortFn,l=e.progressFn,c=e.trackInfoFn,d=e.timingInfoFn,h=e.videoSegmentTimingInfoFn,p=e.audioSegmentTimingInfoFn,f=e.id3Fn,m=e.captionsFn,g=e.isEndOfTimeline,y=e.endedTimelineFn,v=e.dataFn,e=e.doneFn,_=[],s=pu({activeXhrs:_,decryptionWorker:s,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:p,id3Fn:f,captionsFn:m,isEndOfTimeline:g,endedTimelineFn:y,dataFn:v,doneFn:e});o.key&&!o.key.bytes&&(e=[o.key],o.map&&!o.map.bytes&&o.map.key&&o.map.key.resolvedUri===o.key.resolvedUri&&e.push(o.map.key),e=r(Zn.mergeOptions(a,{uri:o.key.resolvedUri,responseType:"arraybuffer"}),ou(o,e,s)),_.push(e)),o.map&&!o.map.bytes&&(!o.map.key||o.key&&o.key.resolvedUri===o.map.key.resolvedUri||(t=r(Zn.mergeOptions(a,{uri:o.map.key.resolvedUri,responseType:"arraybuffer"}),ou(o,[o.map.key],s)),_.push(t)),t=r(Zn.mergeOptions(a,{uri:o.map.resolvedUri,responseType:"arraybuffer",headers:jo(o.map)}),(i=(t={segment:o,finishProcessingFn:s}).segment,n=t.finishProcessingFn,function(e,t){e=su(e,t);if(e)return n(e,i);e=new Uint8Array(t.response);if(i.map.key)return i.map.encryptedBytes=e,n(null,i);i.map.bytes=e,uu(i,function(e){return e?(e.xhr=t,e.status=t.status,n(e,i)):void n(null,i)})})),_.push(t)),a=Zn.mergeOptions(a,{uri:o.part&&o.part.resolvedUri||o.resolvedUri,responseType:"arraybuffer",headers:jo(o)}),(a=r(a,lu({segment:o,finishProcessingFn:s,responseType:a.responseType}))).addEventListener("progress",fu({segment:o,progressFn:l,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:p,id3Fn:f,captionsFn:m,isEndOfTimeline:g,endedTimelineFn:y,dataFn:v})),_.push(a);var b={};return _.forEach(function(e){var t,i;e.addEventListener("loadend",(t=(e={loadendState:b,abortFn:u}).loadendState,i=e.abortFn,function(e){e.target.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}))}),function(){return au(_)}}function gu(e,t){return t=t.attributes||{},e&&e.mediaGroups&&e.mediaGroups.AUDIO&&t.AUDIO&&e.mediaGroups.AUDIO[t.AUDIO]}function yu(e){var n={};return e.forEach(function(e){var t=e.mediaType,i=e.type,e=e.details;n[t]=n[t]||[],n[t].push(cr(""+i+e))}),Object.keys(n).forEach(function(e){return 1<n[e].length?(el("multiple "+e+" codecs found as attributes: "+n[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(n[e]=null)):void(n[e]=n[e][0])}),n}function vu(e){var t=0;return e.audio&&t++,e.video&&t++,t}function _u(e,t){var i,n=t.attributes||{},r=yu(function(e){e=e.attributes||{};if(e.CODECS)return dr(e.CODECS)}(t)||[]);return gu(e,t)&&!r.audio&&!function(e,t){if(!gu(e,t))return!0;var i,t=t.attributes||{},n=e.mediaGroups.AUDIO[t.AUDIO];for(i in n)if(!n[i].uri&&!n[i].playlists)return!0;return!1}(e,t)&&(i=yu(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i,n=e.mediaGroups.AUDIO[t];if(!n)return null;for(i in n){var r=n[i];if(r.default&&r.playlists)return dr(r.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[])).audio&&(r.audio=i.audio),r}function bu(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}}function Tu(e,t){return(e=e&&_.getComputedStyle(e))?e[t]:""}function Su(e,n){var r=e.slice();e.sort(function(e,t){var i=n(e,t);return 0===i?r.indexOf(e)-r.indexOf(t):i})}function Eu(e,t){var i,n;return(i=(i=e.attributes.BANDWIDTH?e.attributes.BANDWIDTH:i)||_.Number.MAX_VALUE)-(n=(n=t.attributes.BANDWIDTH?t.attributes.BANDWIDTH:n)||_.Number.MAX_VALUE)}function ku(e,t,i,n,r,a){if(e){var s={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:r},o=e.playlists;Bu.isAudioOnly(e)&&(o=a.getAudioTrackPlaylists_(),s.audioOnly=!0);var u=o.map(function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,n=e.attributes&&e.attributes.BANDWIDTH;return{bandwidth:n||_.Number.MAX_VALUE,width:t,height:i,playlist:e}});Su(u,function(e,t){return e.bandwidth-t.bandwidth});var e=(u=u.filter(function(e){return!Bu.isIncompatible(e.playlist)})).filter(function(e){return Bu.isEnabled(e.playlist)}),a=(e=!e.length?u.filter(function(e){return!Bu.isDisabled(e.playlist)}):e).filter(function(e){return e.bandwidth*Gu.BANDWIDTH_VARIANCE<t}),l=a[a.length-1],o=a.filter(function(e){return e.bandwidth===l.bandwidth})[0];if(!1===r){var c=o||e[0]||u[0];if(c&&c.playlist){r=o?"bandwidthBestRep":"sortedPlaylistReps";return e[0]&&(r="enabledPlaylistReps"),tl("choosing "+bu(c)+" using "+r+" with options",s),c.playlist}return tl("could not choose a playlist with options",s),null}c=a.filter(function(e){return e.width&&e.height});Su(c,function(e,t){return e.width-t.width});var d,h,a=c.filter(function(e){return e.width===i&&e.height===n}),l=a[a.length-1],a=a.filter(function(e){return e.bandwidth===l.bandwidth})[0];a||(p=(d=c.filter(function(e){return e.width>i||e.height>n})).filter(function(e){return e.width===d[0].width&&e.height===d[0].height}),l=p[p.length-1],h=p.filter(function(e){return e.bandwidth===l.bandwidth})[0]);var p=h||a||o||e[0]||u[0];if(p&&p.playlist){u="sortedPlaylistReps";return h?u="resolutionPlusOneRep":a?u="resolutionBestRep":o?u="bandwidthBestRep":e[0]&&(u="enabledPlaylistReps"),tl("choosing "+bu(p)+" using "+u+" with options",s),p.playlist}return tl("could not choose a playlist with options",s),null}}function Cu(e){var t=e.inbandTextTracks,i=e.metadataArray,r=e.timestampOffset,n=e.videoDuration;if(i){var a=_.WebKitDataCue||_.VTTCue,s=t.metadataTrack_;if(s&&(i.forEach(function(e){var n=e.cueTime+r;!("number"!=typeof n||_.isNaN(n)||n<0)&&n<1/0&&e.frames.forEach(function(e){var t,i=new a(n,n,e.value||e.url||e.data||"");i.frame=e,i.value=e,t=i,Object.defineProperties(t.frame,{id:{get:function(){return Zn.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return Zn.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return Zn.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}}),s.addCue(i)})}),s.cues&&s.cues.length)){for(var o=s.cues,u=[],l=0;l<o.length;l++)o[l]&&u.push(o[l]);var c=u.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),d=Object.keys(c).sort(function(e,t){return Number(e)-Number(t)});d.forEach(function(e,t){var e=c[e],i=Number(d[t+1])||n;e.forEach(function(e){e.endTime=i})})}}}function wu(e,t,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=e&&r.endTime<=t&&i.removeCue(r)}function Iu(e){return"number"==typeof e&&isFinite(e)}function xu(e){var t=e.startOfSegment,i=e.duration,n=e.segment,r=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=e.mediaIndex,c=e.partIndex,d=e.timeline,h=(void 0===u?[]:u).length-1,p="mediaIndex/partIndex increment";return e.getMediaInfoForTime?p="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),a="number"==typeof c,u=e.segment.uri?"segment":"pre-segment",e=a?fo({preloadSegment:n})-1:0,u+" ["+(s+l)+"/"+(s+h)+"]"+(a?" part ["+c+"/"+e+"]":"")+" segment start/end ["+n.start+" => "+n.end+"]"+(a?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+i+"] timeline ["+d+"] selected by ["+p+"] playlist ["+o+"]"}function Au(e){return e+"TimingInfo"}function Pu(e){var t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,e=e.audioDisabled;if(i!==n){if("audio"===r){i=t.lastTimelineChange({type:"main"});return!i||i.to!==n}if("main"===r&&e){t=t.pendingTimelineChange({type:"audio"});return t&&t.to===n?!1:!0}}}function Lu(e){var t=e.segmentDuration,e=e.maxDuration;return!!t&&Math.round(t)>e+Nu}function Du(e,t){if("hls"!==t)return null;var i=function(e,t){e=e&&"number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:0,t=t&&"number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:0;return Math.max(e,t)}(e.audioTimingInfo,e.videoTimingInfo);if(!i)return null;var n=e.playlist.targetDuration,r=Lu({segmentDuration:i,maxDuration:2*n}),t=Lu({segmentDuration:i,maxDuration:n}),n="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+i+" when the reported duration is "+e.duration+" and the target duration is "+n+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||t?{severity:r?"warn":"info",message:n}:null}var Ou=eo,Ru=9e4,Mu=er,Nu=1/30,Uu=Zn.createTimeRange,Bu={liveEdgeDelay:mo,duration:yo,seekable:function(e,t,i){var n=t||0,i=_o(e,t,!0,i);return null===i?Uu():Uu(n,i)},getMediaInfoForTime:function(e){for(var t=e.playlist,i=e.currentTime,n=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,s=i-a,o=ho(t),u=0,l=0;l<o.length;l++){var c=o[l];if(n===c.segmentIndex&&("number"!=typeof r||"number"!=typeof c.partIndex||r===c.partIndex)){u=l;break}}if(s<0){if(0<u)for(var d=u-1;0<=d;d--){var h=o[d];if(0<(s+=h.duration)+Nu)return{partIndex:h.partIndex,segmentIndex:h.segmentIndex,startTime:a-vo({defaultDuration:t.targetDuration,durationList:o,startIndex:u,endIndex:d})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:i}}if(u<0){for(var p=u;p<0;p++)if((s-=t.targetDuration)<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:i};u=0}for(var f=u;f<o.length;f++){var m=o[f];if((s-=m.duration)-Nu<0)return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:a+vo({defaultDuration:t.targetDuration,durationList:o,startIndex:u,endIndex:f})}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:i}},isEnabled:So,isDisabled:function(e){return e.disabled},isBlacklisted:bo,isIncompatible:To,playlistEnd:_o,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Eo,estimateSegmentRequestTime:function(e,t,i,n){return Eo("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*(n=void 0===n?0:n))/t:NaN},isLowestEnabledRendition:ko,isAudioOnly:Io,playlistMatch:Co},Fu=Zn.log,ju=Zn.mergeOptions,z=Zn.EventTarget,Hu=function(a){function e(e,t,i){var n;if(void 0===i&&(i={}),n=a.call(this)||this,!e)throw new Error("A non-empty playlist URL or object is required");n.logger_=ro("PlaylistLoader");var r=i.withCredentials,r=void 0!==r&&r,i=i.handleManifestRedirects,i=void 0!==i&&i;n.src=e,n.vhs_=t,n.withCredentials=r,n.handleManifestRedirects=i;t=t.options_;return n.customTagParsers=t&&t.customTagParsers||[],n.customTagMappers=t&&t.customTagMappers||[],n.experimentalLLHLS=t&&t.experimentalLLHLS||!1,n.state="HAVE_NOTHING",n.handleMediaupdatetimeout_=n.handleMediaupdatetimeout_.bind(ft(n)),n.on("mediaupdatetimeout",n.handleMediaupdatetimeout_),n}mt(e,a);var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var e,t,i=this;"HAVE_METADATA"===this.state&&(e=this.media(),t=Mu(this.master.uri,e.uri),this.experimentalLLHLS&&(t=function(i,e){if(e.endList)return i;var t,n,r,a=[];return e.serverControl&&e.serverControl.canBlockReload&&(r=e.preloadSegment,t=e.mediaSequence+e.segments.length,r&&(n=r.parts||[],-1<(r=fo(e)-1)&&r!=n.length-1&&a.push("_HLS_part="+r),(-1<r||n.length)&&t--),a.unshift("_HLS_msn="+t)),e.serverControl&&e.serverControl.canSkipUntil&&a.unshift("_HLS_skip="+(e.serverControl.canSkipDateranges?"v2":"YES")),a.forEach(function(e,t){i+=(0===t?"?":"&")+e}),i}(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media(),"HAVE_METADATA"):void i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}))},t.playlistRequestError=function(e,t,i){var n=t.uri,t=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")},t.parseManifest_=function(e){var t=this,i=e.url;return function(e){var t=e.onwarn,i=e.oninfo,n=e.manifestString,r=e.customTagParsers,a=void 0===r?[]:r,r=e.customTagMappers,r=void 0===r?[]:r,e=e.experimentalLLHLS,s=new br;t&&s.on("warn",t),i&&s.on("info",i),a.forEach(function(e){return s.addParser(e)}),r.forEach(function(e){return s.addTagMapper(e)}),s.push(n),s.end();var o=s.manifest;e||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(e){o.hasOwnProperty(e)&&delete o[e]}),o.segments&&o.segments.forEach(function(t){["parts","preloadHints"].forEach(function(e){t.hasOwnProperty(e)&&delete t[e]})})),o.targetDuration||(u=10,o.segments&&o.segments.length&&(u=o.segments.reduce(function(e,t){return Math.max(e,t.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+u),o.targetDuration=u);var u=po(o);return u.length&&!o.partTargetDuration&&(u=u.reduce(function(e,t){return Math.max(e,t.duration)},0),t&&(t("manifest has no partTargetDuration defaulting to "+u),Fu.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u),o}({onwarn:function(e){e=e.message;return t.logger_("m3u8-parser warn for "+i+": "+e)},oninfo:function(e){e=e.message;return t.logger_("m3u8-parser info for "+i+": "+e)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(e){var t=this,i=e.playlistString,n=e.playlistObject,r=e.url,e=e.id;this.request=null,this.state="HAVE_METADATA";i=n||this.parseManifest_({url:r,manifestString:i});i.lastRequest=Date.now(),Po({playlist:i,uri:r,id:e});r=No(this.master,i);this.targetDuration=i.partTargetDuration||i.targetDuration,r?(this.master=r,this.media_=this.master.playlists[e]):this.trigger("playlistunchanged"),this.media().endList||(_.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=_.setTimeout(function(){t.trigger("mediaupdatetimeout")},Uo(this.media(),!!r))),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout),_.clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},t.media=function(i,e){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(_.clearTimeout(this.finalRenditionTimeout),e){var t=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=_.setTimeout(this.media.bind(this,i,!1),t)}else{var r=this.state,e=!this.media_||i.id!==this.media_.id,t=this.master.playlists[i.id];if(t&&t.endList||i.endList&&i.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(e&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(e){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(n.request){if(i.lastRequest=Date.now(),i.resolvedUri=no(n.handleManifestRedirects,i.resolvedUri,t),e)return n.playlistRequestError(n.request,i,r);n.haveMetadata({playlistString:t.responseText,url:i.uri,id:i.id}),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}},t.pause=function(){this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},t.load=function(e){var t=this;_.clearTimeout(this.mediaUpdateTimeout);var i=this.media();e?(e=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3,this.mediaUpdateTimeout=_.setTimeout(function(){return t.load()},e)):this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},t.start=function(){var i=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=_.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){i.setupInitialPlaylist(i.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.src=no(i.handleManifestRedirects,i.src,t);t=i.parseManifest_({manifestString:t.responseText,url:i.src});i.setupInitialPlaylist(t)}})},t.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},t.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,Lo(this.master,this.srcUri()),e.playlists.forEach(function(t){t.segments=Ro(t),t.segments.forEach(function(e){Oo(e,t.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t,i,n,r=this.srcUri()||_.location.href;this.master=(i=xo(0,t=r),(n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:_.location.href,resolvedUri:_.location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]}).playlists[i]=n.playlists[0],n.playlists[t]=n.playlists[0],n),this.haveMetadata({playlistObject:e,url:r,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(z),qu=Zn.xhr,Vu=Zn.mergeOptions,ii=Object.freeze({__proto__:null,createTransferableMessage:Vo,initSegmentId:Wo,segmentKeyId:zo,hexDump:Go,tagDump:function(e){e=e.bytes;return Go(e)},textRanges:function(e){for(var t,i,n="",r=0;r<e.length;r++)n+=(i=r,(t=e).start(i)+"-"+t.end(i)+" ");return n}}),zt=Zn.EventTarget,Wu=Zn.mergeOptions,zu=function(a){function e(e,t,i,n){var r;void 0===i&&(i={}),(r=a.call(this)||this).masterPlaylistLoader_=n||ft(r),n||(r.isMaster_=!0);n=i.withCredentials,n=void 0!==n&&n,i=i.handleManifestRedirects,i=void 0!==i&&i;if(r.vhs_=t,r.withCredentials=n,r.handleManifestRedirects=i,!e)throw new Error("A non-empty playlist URL or object is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_(r.media().id)}),r.state="HAVE_NOTHING",r.loadedPlaylists_={},r.logger_=ro("DashPlaylistLoader"),r.isMaster_?(r.masterPlaylistLoader_.srcUrl=e,r.masterPlaylistLoader_.sidxMapping_={}):r.childPlaylist_=e,r}mt(e,a);var t=e.prototype;return t.requestErrored_=function(e,t,i){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,i&&(this.state=i),this.trigger("error"),!0):void 0)},t.addSidxSegments_=function(a,n,r){var s,o,u=this,l=a.sidx&&Qa(a.sidx);a.sidx&&l&&!this.masterPlaylistLoader_.sidxMapping_[l]?(s=no(this.handleManifestRedirects,a.sidx.resolvedUri),o=function(e,t){if(!u.requestErrored_(e,t,n)){var i,e=u.masterPlaylistLoader_.sidxMapping_;try{i=Ws(Ts(t.response).subarray(8))}catch(e){return void u.requestErrored_(e,t,n)}return e[l]={sidxInfo:a.sidx,sidx:i},Ya(a,i,a.sidx.resolvedUri),r(!0)}},this.request=Qo(s,this.vhs_.xhr,function(e,t,i,n){if(e)return o(e,t);if(!i||"mp4"!==i)return o({status:t.status,message:"Unsupported "+(i||"unknown")+" container type for sidx segment at URL: "+s,response:"",playlist:a,internal:!0,blacklistDuration:1/0,code:2},t);var r=a.sidx.byterange,i=r.offset,r=r.length;if(n.length>=r+i)return o(e,{response:n.subarray(i,i+r),status:t.status,uri:t.uri});u.request=u.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:jo({byterange:a.sidx.byterange})},o)})):this.mediaRequest_=_.setTimeout(function(){return r(!1)},0)},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},_.clearTimeout(this.minimumUpdatePeriodTimeout_),_.clearTimeout(this.mediaRequest_),_.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},t.media=function(t){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var e=!this.media_||t.id!==this.media_.id;if(e&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));e&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,n,function(e){i.haveMetadata({startingState:n,playlist:t})}))},t.haveMetadata=function(e){var t=e.startingState,e=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[e.id]=e,this.mediaRequest_=null,this.refreshMedia_(e.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(_.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},t.load=function(e){var t=this;_.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var i=this.media();e?(e=i?i.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=_.setTimeout(function(){return t.load()},e)):this.started?i&&!i.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},t.start=function(){var i=this;this.started=!0,this.isMaster_?this.requestMaster_(function(e,t){i.haveMaster_(),i.hasPendingRequest()||i.media_||i.media(i.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=_.setTimeout(function(){return i.haveMaster_()},0)},t.requestMaster_=function(n){var r=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(e,t){if(!r.requestErrored_(e,t)){var i=t.responseText!==r.masterPlaylistLoader_.masterXml_;return r.masterPlaylistLoader_.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?r.masterLoaded_=Date.parse(t.responseHeaders.date):r.masterLoaded_=Date.now(),r.masterPlaylistLoader_.srcUrl=no(r.handleManifestRedirects,r.masterPlaylistLoader_.srcUrl,t),i?(r.handleMaster_(),void r.syncClientServerClock_(function(){return n(t,i)})):n(t,i)}"HAVE_NOTHING"===r.state&&(r.started=!1)})},t.syncClientServerClock_=function(i){var n=this,r=bs(this.masterPlaylistLoader_.masterXml_);return null===r?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===r.method?(this.masterPlaylistLoader_.clientOffset_=r.value-Date.now(),i()):void(this.request=this.vhs_.xhr({uri:Mu(this.masterPlaylistLoader_.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},function(e,t){if(n.request){if(e)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),i();t="HEAD"===r.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):n.masterLoaded_:Date.parse(t.responseText);n.masterPlaylistLoader_.clientOffset_=t-Date.now(),i()}}))},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var e,t,t=(n={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_},e=n.masterXml,i=n.srcUrl,t=n.clientOffset,n=n.sidxMapping,n=_s(e,{manifestUri:i,clientOffset:t,sidxMapping:n}),Lo(n,i),n),i=this.masterPlaylistLoader_.master;i&&(t=function(e,t,i){for(var a=!0,s=Wu(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),n=0;n<t.playlists.length;n++){var r,o=t.playlists[n];o.sidx&&(r=Qa(o.sidx),i&&i[r]&&i[r].sidx&&Ya(o,i[r].sidx,o.sidx.resolvedUri));o=No(s,o,$o);o&&(s=o,a=!1)}return Ao(t,function(e,t,i,n){var r;e.playlists&&e.playlists.length&&(r=e.playlists[0].id,(e=No(s,e.playlists[0],$o))&&((s=e).mediaGroups[t][i][n].playlists[0]=s.playlists[r],a=!1))}),(a=t.minimumUpdatePeriod===e.minimumUpdatePeriod&&a)?null:s}(i,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||i;var n=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return n&&n!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=n),(!i||t&&t.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},t.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(_.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},t.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=_.setTimeout(function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)},t.refreshXml_=function(){var i=this;this.requestMaster_(function(e,t){var r,a;t&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=(t=i.masterPlaylistLoader_.master,r=i.masterPlaylistLoader_.sidxMapping_,a=Jo(t.playlists,r),Ao(t,function(e,t,i,n){e.playlists&&e.playlists.length&&(e=e.playlists,a=Wu(a,Jo(e,r)))}),a),i.addSidxSegments_(i.media(),i.state,function(e){i.refreshMedia_(i.media().id)}))})},t.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[e];n?this.media_=i[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=_.setTimeout(function(){t.trigger("mediaupdatetimeout"),e()},Uo(t.media(),Boolean(n))))}(),this.trigger("loadedplaylist")},e}(zt),Gu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},ni=function(n){return function(){var e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch(e){var i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}}(n),t=Zo(new Worker(e));t.objURL=e;var i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},nr=function(e){return"var browserWorkerPolyFill = "+Zo.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},z=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Xu=ni(nr(z(function(){var e=function(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){return!!a[e]&&(t=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(t,1),-1<t)},this.trigger=function(e){var t,i,n,r=a[e];if(r)if(2===arguments.length)for(i=r.length,t=0;t<i;++t)r[t].call(this,arguments[1]);else{for(n=[],t=arguments.length,t=1;t<arguments.length;++t)n.push(arguments[t]);for(i=r.length,t=0;t<i;++t)r[t].apply(this,n)}},this.dispose=function(){a={}}}};e.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var u,t,i,n,r,a,s,o,l,c,d,h,p,f,m,g,y,v,_,b,T,S,E,k,C,w,I,x,A,P,L,D,O,R,M,N,U,B,F,j=e,H=Math.pow(2,32)-1;!function(){if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),w=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:C,audio:w},P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=L,O=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=L,x=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),u=function(e){for(var t,i=[],n=0,r=1;r<arguments.length;r++)i.push(arguments[r]);for(r=i.length;r--;)n+=i[r].byteLength;for(t=new Uint8Array(n+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),r=0,n=8;r<i.length;r++)t.set(i[r],n),n+=i[r].byteLength;return t},t=function(){return u(T.dinf,u(T.dref,P))},i=function(e){return u(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},f=function(e){return u(T.hdlr,I[e])},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),u(T.mdhd,t)},h=function(e){return u(T.mdia,p(e),f(e.type),a(e))},r=function(e){return u(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},a=function(e){return u(T.minf,"video"===e.type?u(T.vmhd,x):u(T.smhd,A),t(),g(e))},qe=function(e,t){for(var i=[],n=t.length;n--;)i[n]=v(t[n]);return u.apply(null,[T.moof,r(e)].concat(i))},s=function(e){for(var t=e.length,i=[];t--;)i[t]=c(e[t]);return u.apply(null,[T.moov,l(4294967295)].concat(i).concat(o(e)))},o=function(e){for(var t=e.length,i=[];t--;)i[t]=_(e[t]);return u.apply(null,[T.mvex].concat(i))},l=function(e){e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(T.mvhd,e)},m=function(e){for(var t,i=e.samples||[],n=new Uint8Array(4+i.length),r=0;r<i.length;r++)t=i[r].flags,n[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return u(T.sdtp,n)},g=function(e){return u(T.stbl,y(e),u(T.stts,R),u(T.stsc,D),u(T.stsz,O),u(T.stco,L))},y=function(e){return u(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?M:N)(e))},M=function(e){for(var t,i,n=e.sps||[],r=e.pps||[],a=[],s=[],o=0;o<n.length;o++)a.push((65280&n[o].byteLength)>>>8),a.push(255&n[o].byteLength),a=a.concat(Array.prototype.slice.call(n[o]));for(o=0;o<r.length;o++)s.push((65280&r[o].byteLength)>>>8),s.push(255&r[o].byteLength),s=s.concat(Array.prototype.slice.call(r[o]));return t=[T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(T.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length],a,[r.length],s))),u(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio&&(i=e.sarRatio[0],e=e.sarRatio[1],t.push(u(T.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),u.apply(null,t)},N=function(e){return u(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},d=function(e){e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return u(T.tkhd,e)},v=function(e){var t,i=u(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),n=Math.floor(e.baseMediaDecodeTime/(1+H)),r=Math.floor(e.baseMediaDecodeTime%(1+H)),n=u(T.tfdt,new Uint8Array([1,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r]));return"audio"===e.type?(t=b(e,92),u(T.traf,i,n,t)):(r=m(e),t=b(e,r.length+92),u(T.traf,i,n,t,r))},c=function(e){return e.duration=e.duration||4294967295,u(T.trak,d(e),h(e))},_=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),u(T.trex,t)},U=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,t){var i,n,r,a,s=e.samples||[];for(t+=20+16*s.length,t=U(s,t),(n=new Uint8Array(t.length+16*s.length)).set(t),i=t.length,a=0;a<s.length;a++)r=s[a],n[i++]=(4278190080&r.duration)>>>24,n[i++]=(16711680&r.duration)>>>16,n[i++]=(65280&r.duration)>>>8,n[i++]=255&r.duration,n[i++]=(4278190080&r.size)>>>24,n[i++]=(16711680&r.size)>>>16,n[i++]=(65280&r.size)>>>8,n[i++]=255&r.size,n[i++]=r.flags.isLeading<<2|r.flags.dependsOn,n[i++]=r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,n[i++]=61440&r.flags.degradationPriority,n[i++]=15&r.flags.degradationPriority,n[i++]=(4278190080&r.compositionTimeOffset)>>>24,n[i++]=(16711680&r.compositionTimeOffset)>>>16,n[i++]=(65280&r.compositionTimeOffset)>>>8,n[i++]=255&r.compositionTimeOffset;return u(T.trun,n)},F=function(e,t){var i,n,r,a,s=e.samples||[];for(t+=20+8*s.length,t=U(s,t),(i=new Uint8Array(t.length+8*s.length)).set(t),n=t.length,a=0;a<s.length;a++)r=s[a],i[n++]=(4278190080&r.duration)>>>24,i[n++]=(16711680&r.duration)>>>16,i[n++]=(65280&r.duration)>>>8,i[n++]=255&r.duration,i[n++]=(4278190080&r.size)>>>24,i[n++]=(16711680&r.size)>>>16,i[n++]=(65280&r.size)>>>8,i[n++]=255&r.size;return u(T.trun,i)},b=function(e,t){return("audio"===e.type?F:B)(e,t)};n=function(){return u(T.ftyp,S,E,S,k)};function q(e,t){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i}function V(e){for(var t=[];e--;)t.push(0);return t}function W(){var e,i;return z||(e={96e3:[ee,[227,64],V(154),[56]],88200:[ee,[231],V(170),[56]],64e3:[ee,[248,192],V(240),[56]],48e3:[ee,[255,192],V(268),[55,148,128],V(54),[112]],44100:[ee,[255,192],V(268),[55,163,128],V(84),[112]],32e3:[ee,[255,192],V(268),[55,234],V(226),[112]],24e3:[ee,[255,192],V(268),[55,255,128],V(268),[111,112],V(126),[224]],16e3:[ee,[255,192],V(268),[55,255,128],V(268),[111,255],V(269),[223,108],V(195),[1,192]],12e3:[te,V(268),[3,127,248],V(268),[6,255,240],V(268),[13,255,224],V(268),[27,253,128],V(259),[56]],11025:[te,V(268),[3,127,248],V(268),[6,255,240],V(268),[13,255,224],V(268),[27,255,192],V(268),[55,175,128],V(108),[112]],8e3:[te,V(268),[3,121,16],V(47),[7]]},i=e,z=Object.keys(i).reduce(function(e,t){return e[t]=new Uint8Array(i[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),z}var z,G=function(e){return u(T.mdat,e)},X=qe,K=function(e){var t=n(),i=s(e),e=new Uint8Array(t.byteLength+i.byteLength);return e.set(t),e.set(i,t.byteLength),e},Y=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=n.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},Q=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},$=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},J=function(e,t){for(var i,n,r,a=t||0,s=[],o=0;o<e.length;o++)for(n=e[o],i=0;i<n.length;i++)r=n[i],a+=(r=q(r,a)).size,s.push(r);return s},Z=function(e){for(var t,i,n,r,a,s=0,o=e.byteLength,u=e.nalCount,l=new Uint8Array(o+4*u),c=new DataView(l.buffer),d=0;d<e.length;d++)for(n=e[d],t=0;t<n.length;t++)for(r=n[t],i=0;i<r.length;i++)a=r[i],c.setUint32(s,a.data.byteLength),l.set(a.data,s+=4),s+=a.data.byteLength;return l},ee=[33,16,5,32,164,27],te=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ie=function(e){return 9e4*e},ne=function(e,t){return e*t},re=function(e){return e/9e4},ae=function(e,t){return e/t},se=9e4,oe=ie,ue=re,le=function(e,t){return ie(ae(e,t))},ce=function(e,t){return ne(re(e),t)},de=function(e,t,i){return re(i?e:e-t)},he=function(e,t,i,n){var r,a,s,o,u,l,c=0,d=0;if(t.length&&(r=le(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(se/(e.samplerate/1024)),i&&n&&(s=r-Math.max(i,n),d=(c=Math.floor(s/a))*a),!(c<1||se/2<d))){for(o=(o=W()[e.samplerate])||t[0].data,u=0;u<c;u++)l=t[0],t.splice(0,0,{data:o,dts:l.dts-a,pts:l.pts-a});return e.baseMediaDecodeTime-=Math.floor(ce(d,e.samplerate)),d}},pe=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},fe=function(e){for(var t,i=[],n=0;n<e.length;n++)t=e[n],i.push({size:t.data.byteLength,duration:1024});return i},me=function(e){for(var t,i=0,n=new Uint8Array(function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].data.byteLength;return t}(e)),r=0;r<e.length;r++)t=e[r],n.set(t.data,i),i+=t.data.byteLength;return n},ge=se,ye=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ve=function(e,t){var i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),t=e.timelineStartInfo.baseMediaDecodeTime,t+=i,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/ge,t=Math.floor(t)),t},_e=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},be=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}i.payload=void 0}t+=r,r=n=0}return i},Te=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Se=function(e,t){var i,n,r,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s},Ee=function(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;for(var r=t-i.length,a=new Uint8Array(r),s=0,n=0;n<r;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a},ke=4,Ce=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Me(0,0),new Me(0,1),new Me(1,0),new Me(1,1)],this.parse708captions_&&(this.cc708Stream_=new Pe),this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Ce.prototype=new j).push=function(e){var t,i;if("sei_rbsp"===e.nalUnitType&&(t=be(e.escapedRBSP)).payload&&t.payloadType===ke&&(i=Te(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=Se(e.pts,i),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Ce.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},Ce.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},Ce.prototype.flush=function(){return this.flushStream("flush")},Ce.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ce.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Ce.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Ce.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Ce.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Ce.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},Ce.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};function we(e){return 32<=e&&e<=127||160<=e&&e<=255}function Ie(e){this.windowNum=e,this.reset()}var xe={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};Ie.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ie.prototype.getText=function(){return this.rows.join("\n")},Ie.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ie.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ie.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Ie.prototype.addText=function(e){this.rows[this.rowIdx]+=e},Ie.prototype.backspace=function(){var e;this.isEmpty()||(e=this.rows[this.rowIdx],this.rows[this.rowIdx]=e.substr(0,e.length-1))};function Ae(e){this.serviceNum=e,this.text="",this.currentWindow=new Ie(-1),this.windows=[]}Ae.prototype.init=function(e,t){this.startPts=e;for(var i=0;i<8;i++)this.windows[i]=new Ie(i),"function"==typeof t&&(this.windows[i].beforeRowOverflow=t)},Ae.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]};var Pe=function e(){e.prototype.init.call(this);var t=this;this.current708Packet=null,this.services={},this.push=function(e){(3===e.type||null===t.current708Packet)&&t.new708Packet(),t.add708Bytes(e)}};Pe.prototype=new j,Pe.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Pe.prototype.add708Bytes=function(e){var t=e.ccData,i=t>>>8,t=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(t)},Pe.prototype.push708Packet=function(){var e,t=this.current708Packet,i=t.data,n=null,r=0,a=i[r++];for(t.seq=a>>6,t.sizeCode=63&a;r<i.length;r++)e=31&(a=i[r++]),7===(n=a>>5)&&0<e&&(n=i[r++]),this.pushServiceBlock(n,r,e),0<e&&(r+=e-1)},Pe.prototype.pushServiceBlock=function(e,t,i){for(var n,r=t,a=this.current708Packet.data,s=(s=this.services[e])||this.initService(e,r);r<t+i&&r<a.length;r++)n=a[r],we(n)?r=this.handleText(r,s):16===n?r=this.extendedCommands(r,s):128<=n&&n<=135?r=this.setCurrentWindow(r,s):152<=n&&n<=159?r=this.defineWindow(r,s):136===n?r=this.clearWindows(r,s):140===n?r=this.deleteWindows(r,s):137===n?r=this.displayWindows(r,s):138===n?r=this.hideWindows(r,s):139===n?r=this.toggleWindows(r,s):151===n?r=this.setWindowAttributes(r,s):144===n?r=this.setPenAttributes(r,s):145===n?r=this.setPenColor(r,s):146===n?r=this.setPenLocation(r,s):143===n?s=this.reset(r,s):8===n?s.currentWindow.backspace():12===n?s.currentWindow.clearText():13===n?s.currentWindow.pendingNewLine=!0:14===n?s.currentWindow.clearText():141===n&&r++},Pe.prototype.extendedCommands=function(e,t){var i=this.current708Packet.data[++e];return e=we(i)?this.handleText(e,t,!0):e},Pe.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Pe.prototype.initService=function(t,e){var i=this;return this.services[t]=new Ae(t),this.services[t].init(this.getPts(e),function(e){i.flushDisplayed(e,i.services[t])}),this.services[t]},Pe.prototype.handleText=function(e,t,i){var n=this.current708Packet.data[e],n=(n=xe[i=(i?4096:0)|n]||i,4096&i&&i===n?"":String.fromCharCode(n)),t=t.currentWindow;return t.pendingNewLine&&!t.isEmpty()&&t.newLine(this.getPts(e)),t.pendingNewLine=!1,t.addText(n),e},Pe.prototype.setCurrentWindow=function(e,t){var i=this.current708Packet.data[e];return t.setCurrentWindow(7&i),e},Pe.prototype.defineWindow=function(e,t){var i=this.current708Packet.data,n=i[e];t.setCurrentWindow(7&n);t=t.currentWindow,n=i[++e];return t.visible=(32&n)>>5,t.rowLock=(16&n)>>4,t.columnLock=(8&n)>>3,t.priority=7&n,n=i[++e],t.relativePositioning=(128&n)>>7,t.anchorVertical=127&n,n=i[++e],t.anchorHorizontal=n,n=i[++e],t.anchorPoint=(240&n)>>4,t.rowCount=15&n,n=i[++e],t.columnCount=63&n,n=i[++e],t.windowStyle=(56&n)>>3,t.penStyle=7&n,t.virtualRowCount=t.rowCount+1,e},Pe.prototype.setWindowAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],t=t.currentWindow.winAttr,n=i[++e];return t.fillOpacity=(192&n)>>6,t.fillRed=(48&n)>>4,t.fillGreen=(12&n)>>2,t.fillBlue=3&n,n=i[++e],t.borderType=(192&n)>>6,t.borderRed=(48&n)>>4,t.borderGreen=(12&n)>>2,t.borderBlue=3&n,n=i[++e],t.borderType+=(128&n)>>5,t.wordWrap=(64&n)>>6,t.printDirection=(48&n)>>4,t.scrollDirection=(12&n)>>2,t.justify=3&n,n=i[++e],t.effectSpeed=(240&n)>>4,t.effectDirection=(12&n)>>2,t.displayEffect=3&n,e},Pe.prototype.flushDisplayed=function(e,t){for(var i=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&i.push(t.windows[n].getText());t.endPts=e,t.text=i.join("\n\n"),this.pushCaption(t),t.startPts=e},Pe.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Pe.prototype.displayWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=1);return e},Pe.prototype.hideWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=0);return e},Pe.prototype.toggleWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible^=1);return e},Pe.prototype.clearWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].clearText();return e},Pe.prototype.deleteWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].reset();return e},Pe.prototype.setPenAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],t=t.currentWindow.penAttr,n=i[++e];return t.textTag=(240&n)>>4,t.offset=(12&n)>>2,t.penSize=3&n,n=i[++e],t.italics=(128&n)>>7,t.underline=(64&n)>>6,t.edgeType=(56&n)>>3,t.fontStyle=7&n,e},Pe.prototype.setPenColor=function(e,t){var i=this.current708Packet.data,n=i[e],t=t.currentWindow.penColor,n=i[++e];return t.fgOpacity=(192&n)>>6,t.fgRed=(48&n)>>4,t.fgGreen=(12&n)>>2,t.fgBlue=3&n,n=i[++e],t.bgOpacity=(192&n)>>6,t.bgRed=(48&n)>>4,t.bgGreen=(12&n)>>2,t.bgBlue=3&n,n=i[++e],t.edgeRed=(48&n)>>4,t.edgeGreen=(12&n)>>2,t.edgeBlue=3&n,e},Pe.prototype.setPenLocation=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,n=i[++e],r.row=15&n,n=i[++e],r.column=63&n,e},Pe.prototype.reset=function(e,t){var i=this.getPts(e);return this.flushDisplayed(i,t),this.initService(t.serviceNum,e)};function Le(e){return null===e?"":(e=Oe[e]||e,String.fromCharCode(e))}function De(){for(var e=[],t=15;t--;)e.push("");return e}var Oe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Re=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Me=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a=32639&e.ccData;a!==this.lastControlCode_?(4096==(61440&a)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null),t=a>>>8,i=255&a,a===this.PADDING_||(a===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":a===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts):a===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):a===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):a===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):a===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):a===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):a===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=De()):a===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=De():a===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=De()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(t,i)?(n=Le((t=(3&t)<<8)|i),this[this.mode_](e.pts,n),this.column_++):this.isExtCharacter(t,i)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),n=Le((t=(3&t)<<8)|i),this[this.mode_](e.pts,n),this.column_++):this.isMidRowCode(t,i)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(t,i)?this.column_+=3&i:this.isPAC(t,i)?(r=Re.indexOf(7968&a),"rollUp"===this.mode_&&(r-this.rollUpRows_+1<0&&(r=this.rollUpRows_-1),this.setRollUp(e.pts,r)),r!==this.row_&&(this.clearFormatting(e.pts),this.row_=r),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&a)&&(this.column_=4*((14&a)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(t)&&(0===i&&(i=null),n=Le(t),n+=Le(i),this[this.mode_](e.pts,n),this.column_+=n.length))):this.lastControlCode_=null}};Me.prototype=new j,Me.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Me.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=De(),this.nonDisplayed_=De(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Me.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Me.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Me.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Me.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Me.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Me.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Me.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Me.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Me.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=De(),this.displayed_=De()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Me.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);t=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,t)},Me.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},Me.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=i+=t},Me.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t},Me.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Me.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t};function Ne(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e}var Ue={CaptionStream:Ce,Cea608Stream:Me,Cea708Stream:Pe},Be={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},e=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Ne(e.dts,n),e.pts=Ne(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};e.prototype=new j;function Fe(e,t,i){for(var n="",r=t;r<i;r++)n+="%"+("00"+e[r].toString(16)).slice(-2);return n}function je(e,t,i){return decodeURIComponent(Fe(e,t,i))}function He(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var qe=e,Ce=Ne,Ve={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.value=je(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.url=je(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,i=0;i<e.data.length;i++)if(0===e.data[i]){e.owner=(t=e.data,unescape(Fe(t,0,i)));break}e.privateData=e.data.subarray(i+1),e.data=e.privateData}},We=function(e){var t,u={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},l=0,c=[],d=0;if(We.prototype.init.call(this),this.dispatchType=Be.METADATA_STREAM_TYPE.toString(16),u.descriptor)for(t=0;t<u.descriptor.length;t++)this.dispatchType+=("00"+u.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,n,r,a,s,o;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))u.debug;else if(c.push(e),d+=e.data.byteLength,1===c.length&&(l=He(e.data.subarray(6,10)),l+=10),!(d<l)){for(t={data:new Uint8Array(l),frames:[],pts:c[0].pts,dts:c[0].dts},r=0;r<l;)t.data.set(c[0].data.subarray(0,l-r),r),r+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();i=10,64&t.data[5]&&(i+=4,i+=He(t.data.subarray(10,14)),l-=He(t.data.subarray(16,20)));do{if((n=He(t.data.subarray(i+4,i+8)))<1)return}while((o={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+n+10)}).key=o.id,Ve[o.id]&&(Ve[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner&&(s=(1&(a=o.data)[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,s*=4,s+=3&a[7],o.timeStamp=s,void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o))),t.frames.push(o),i+=10,(i+=n)<l);this.trigger("data",t)}}};We.prototype=new j;var ze,Ge,e=We,qe=qe,Xe=function(){var r=new Uint8Array(188),a=0;Xe.prototype.init.call(this),this.push=function(e){var t,i=0,n=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;n<t.byteLength;)71!==t[i]||71!==t[n]?(i++,n++):(this.trigger("data",t.subarray(i,n)),i+=188,n+=188);i<t.byteLength&&(r.set(t.subarray(i),0),a=t.byteLength-i)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){a=0,this.trigger("reset")}};Xe.prototype=new j,(ze=function(){var n,r,a,s;ze.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,n=function(e,t){var i=0;t.payloadUnitStartIndicator&&(i+=e[i]+1),("pat"===t.type?r:a)(e.subarray(i),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},a=function(e,t){var i,n;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,n=12+((15&e[10])<<8|e[11]);n<i;){var r=e[n],a=(31&e[n+1])<<8|e[n+2];r===Be.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=a:r===Be.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=a:r===Be.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][a]=r),n+=5+((15&e[n+3])<<8|e[n+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},i=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(i+=e[i]+1),0===t.pid)t.type="pat",n(e.subarray(i),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",n(e.subarray(i),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,t]):this.processPes_(e,i,t)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=Be.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Be.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new j,ze.STREAM_TYPES={h264:27,adts:15},(Ge=function(){function n(e,t,i){var n,r,a,s,o=new Uint8Array(e.size),u={type:t},l=0,c=0;if(e.data.length&&!(e.size<9)){for(u.trackId=e.data[0].pid,l=0;l<e.data.length;l++)n=e.data[l],o.set(n.data,c),c+=n.data.byteLength;a=u,s=(r=o)[0]<<16|r[1]<<8|r[2],a.data=new Uint8Array,1==s&&(a.packetLength=6+(r[4]<<8|r[5]),a.dataAlignmentIndicator=0!=(4&r[6]),192&(s=r[7])&&(a.pts=(14&r[9])<<27|(255&r[10])<<20|(254&r[11])<<12|(255&r[12])<<5|(254&r[13])>>>3,a.pts*=4,a.pts+=(6&r[13])>>>1,a.dts=a.pts,64&s&&(a.dts=(14&r[14])<<27|(255&r[15])<<20|(254&r[16])<<12|(255&r[17])<<5|(254&r[18])>>>3,a.dts*=4,a.dts+=(6&r[18])>>>1)),a.data=r.subarray(9+r[8])),t="video"===t||u.packetLength<=e.size,(i||t)&&(e.size=0,e.data.length=0),t&&d.trigger("data",u)}}var t,d=this,r={data:[],size:0},a={data:[],size:0},s={data:[],size:0};Ge.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,t;switch(i.streamType){case Be.H264_STREAM_TYPE:e=r,t="video";break;case Be.ADTS_STREAM_TYPE:e=a,t="audio";break;case Be.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&n(e,t,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=i.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),d.trigger("data",e)}})[i.type]()},this.reset=function(){r.size=0,r.data.length=0,a.size=0,a.data.length=0,this.trigger("reset")},this.flushStreams_=function(){n(r,"video"),n(a,"audio"),n(s,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new j;var Ke,Ye={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Xe,TransportParseStream:ze,ElementaryStream:Ge,TimestampRolloverStream:qe,CaptionStream:Ue.CaptionStream,Cea608Stream:Ue.Cea608Stream,Cea708Stream:Ue.Cea708Stream,MetadataStream:e};for(Ke in Be)Be.hasOwnProperty(Ke)&&(Ye[Ke]=Be[Ke]);var Qe=Ye,$e=se,Je=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ze=function(o){var u,l=0;Ze.prototype.init.call(this),this.push=function(e){var t,i,n,r,a,s=0;if(o||(l=0),"audio"===e.type)for(u?(n=u,(u=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),u.set(e.data,n.byteLength)):u=e.data;s+5<u.length;)if(255===u[s]&&240==(246&u[s+1])){if(t=2*(1&~u[s+1]),i=(3&u[s+3])<<11|u[s+4]<<3|(224&u[s+5])>>5,a=(r=1024*(1+(3&u[s+6])))*$e/Je[(60&u[s+2])>>>2],u.byteLength<(i=s+i))return;if(this.trigger("data",{pts:e.pts+l*a,dts:e.dts+l*a,sampleCount:r,audioobjecttype:1+(u[s+2]>>>6&3),channelcount:(1&u[s+2])<<2|(192&u[s+3])>>>6,samplerate:Je[(60&u[s+2])>>>2],samplingfrequencyindex:(60&u[s+2])>>>2,samplesize:16,data:u.subarray(s+7+t,i)}),l++,u.byteLength===i)return void(u=void 0);u=u.subarray(i)}else s++},this.flush=function(){l=0,this.trigger("done")},this.reset=function(){u=void 0,this.trigger("reset")},this.endTimeline=function(){u=void 0,this.trigger("endedtimeline")}};Ze.prototype=new j;var et,tt,it=Ze,nt=function(n){var r=n.byteLength,a=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=n.byteLength-r,t=new Uint8Array(4),i=Math.min(4,r);if(0===i)throw new Error("no bytes available");t.set(n.subarray(e,e+i)),a=new DataView(t.buffer).getUint32(0),s=8*i,r-=i},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),i=a>>>32-t;return 0<(s-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?i<<t|this.readBits(t):i},this.skipLeadingZeros=function(){for(var e=0;e<s;++e)if(0!=(a&2147483648>>>e))return a<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},rt=function(){var n,r,a=0;rt.prototype.init.call(this),this.push=function(e){for(var t,i=(r=r?((t=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),t.set(e.data,r.byteLength),t):e.data).byteLength;a<i-3;a++)if(1===r[a+2]){n=a+5;break}for(;n<i;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}for(a+3!==n-2&&this.trigger("data",r.subarray(a+3,n-2));1!==r[++n]&&n<i;);a=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}this.trigger("data",r.subarray(a+3,n-2)),a=n-2,n+=3;break;default:n+=3}r=r.subarray(a),n-=a,a=0},this.reset=function(){r=null,a=0,this.trigger("reset")},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(a+3)),r=null,a=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};rt.prototype=new j,tt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(et=function(){var i,n,r,a,s,o,g,t=new rt;et.prototype.init.call(this),(i=this).push=function(e){"video"===e.type&&(n=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:n,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",t)}),t.on("done",function(){i.trigger("done")}),t.on("partialdone",function(){i.trigger("partialdone")}),t.on("reset",function(){i.trigger("reset")}),t.on("endedtimeline",function(){i.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},g=function(e,t){for(var i=8,n=8,r=0;r<e;r++)i=0===(n=0!==n?(i+t.readExpGolomb()+256)%256:n)?i:n},s=function(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;for(var r=t-i.length,a=new Uint8Array(r),s=0,n=0;n<r;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a},o=function(e){var t,i,n,r,a,s,o=0,u=0,l=0,c=0,d=1,h=new nt(e),p=h.readUnsignedByte(),f=h.readUnsignedByte(),m=h.readUnsignedByte();if(h.skipUnsignedExpGolomb(),tt[p]&&(3===(i=h.readUnsignedExpGolomb())&&h.skipBits(1),h.skipUnsignedExpGolomb(),h.skipUnsignedExpGolomb(),h.skipBits(1),h.readBoolean()))for(r=3!==i?8:12,s=0;s<r;s++)h.readBoolean()&&g(s<6?16:64,h);if(h.skipUnsignedExpGolomb(),0===(n=h.readUnsignedExpGolomb()))h.readUnsignedExpGolomb();else if(1===n)for(h.skipBits(1),h.skipExpGolomb(),h.skipExpGolomb(),t=h.readUnsignedExpGolomb(),s=0;s<t;s++)h.skipExpGolomb();if(h.skipUnsignedExpGolomb(),h.skipBits(1),e=h.readUnsignedExpGolomb(),i=h.readUnsignedExpGolomb(),0===(n=h.readBits(1))&&h.skipBits(1),h.skipBits(1),h.readBoolean()&&(o=h.readUnsignedExpGolomb(),u=h.readUnsignedExpGolomb(),l=h.readUnsignedExpGolomb(),c=h.readUnsignedExpGolomb()),h.readBoolean()&&h.readBoolean()){switch(h.readUnsignedByte()){case 1:a=[1,1];break;case 2:a=[12,11];break;case 3:a=[10,11];break;case 4:a=[16,11];break;case 5:a=[40,33];break;case 6:a=[24,11];break;case 7:a=[20,11];break;case 8:a=[32,11];break;case 9:a=[80,33];break;case 10:a=[18,11];break;case 11:a=[15,11];break;case 12:a=[64,33];break;case 13:a=[160,99];break;case 14:a=[4,3];break;case 15:a=[3,2];break;case 16:a=[2,1];break;case 255:a=[h.readUnsignedByte()<<8|h.readUnsignedByte(),h.readUnsignedByte()<<8|h.readUnsignedByte()]}a&&(d=a[0]/a[1])}return{profileIdc:p,levelIdc:m,profileCompatibility:f,width:Math.ceil((16*(e+1)-2*o-2*u)*d),height:(2-n)*(i+1)*16-2*l-2*c,sarRatio:a}}}).prototype=new j;function at(e,t){var i=0<=(i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9])?i:0;return(16&e[t+5])>>4?i+20:i+10}function st(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:st(e,t+=at(e,t))}function ot(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var qe={H264Stream:et,NalByteStream:rt},ut=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],lt={isLikelyAacData:function(e){var t=st(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:at,parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return ut[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i=10;64&e[5]&&(i+=4,i+=ot(e.subarray(10,14)));do{if((t=ot(e.subarray(i+4,i+8)))<1)return null;if("PRIV"===String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3]))for(var n=e.subarray(i+10,i+t+10),r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,i){for(var n="",r=t;r<i;r++)n+="%"+("00"+e[r].toString(16)).slice(-2);return n}(n,0,r)))break;var a=n.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}}while(i+=10,(i+=t)<e.byteLength);return null}},ct=function(){var a=new Uint8Array,s=0;ct.prototype.init.call(this),this.setTimestamp=function(e){s=e},this.push=function(e){var t,i,n=0,r=0;for(a.length?(i=a.length,(a=new Uint8Array(e.byteLength+i)).set(a.subarray(0,i)),a.set(e,i)):a=e;3<=a.length-r;)if(a[r]!=="I".charCodeAt(0)||a[r+1]!=="D".charCodeAt(0)||a[r+2]!=="3".charCodeAt(0))if(255!=(255&a[r])||240!=(240&a[r+1]))r++;else{if(a.length-r<7)break;if(r+(n=lt.parseAdtsSize(a,r))>a.length)break;t={type:"audio",data:a.subarray(r,r+n),pts:s,dts:s},this.trigger("data",t),r+=n}else{if(a.length-r<10)break;if(r+(n=lt.parseId3TagSize(a,r))>a.length)break;t={type:"timed-metadata",data:a.subarray(r,r+n)},this.trigger("data",t),r+=n}e=a.length-r,a=0<e?a.subarray(r):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}};ct.prototype=new j;function dt(e,t){var i;if(e.length===t.length){for(i=0;i<e.length;i++)if(e[i]!==t[i])return;return 1}}function ht(e,t,i,n,r,a){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:a,baseMediaDecodeTime:e}}var pt,ft,mt,gt=ct,yt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],vt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],_t=qe.H264Stream,bt=lt.isLikelyAacData,Tt=se,St=function(a,s){var o=[],u=0,l=0,c=0,d=1/0;s=s||{},St.prototype.init.call(this),this.push=function(t){_e(a,t),a&&yt.forEach(function(e){a[e]=t[e]}),o.push(t)},this.setEarliestDts=function(e){l=e},this.setVideoBaseMediaDecodeTime=function(e){d=e},this.setAudioAppendStart=function(e){c=e},this.flush=function(){var e,t,i,n,r;0!==o.length&&(e=pe(o,a,l),a.baseMediaDecodeTime=ve(a,s.keepOriginalTimestamps),r=he(a,e,c,d),a.samples=fe(e),t=G(me(e)),o=[],n=X(u,[a]),i=new Uint8Array(n.byteLength+t.byteLength),u++,i.set(n),i.set(t,n.byteLength),ye(a),n=Math.ceil(1024*Tt/a.samplerate),e.length&&(n=e.length*n,this.trigger("segmentTimingInfo",ht(le(a.baseMediaDecodeTime,a.samplerate),e[0].dts,e[0].pts,e[0].dts+n,e[0].pts+n,r||0)),this.trigger("timingInfo",{start:e[0].pts,end:e[0].pts+n})),this.trigger("data",{track:a,boxes:i})),this.trigger("done","AudioSegmentStream")},this.reset=function(){ye(a),o=[],this.trigger("reset")}};St.prototype=new j,(pt=function(s,a){var t,i,o=0,u=[],l=[];a=a||{},pt.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(e){_e(s,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,s.sps=[e.data],vt.forEach(function(e){s[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,s.pps=[e.data]),u.push(e)},this.flush=function(){for(var e,t,i,n=0;u.length&&"access_unit_delimiter_rbsp"!==u[0].nalUnitType;)u.shift();if(0===u.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=Y(u),(t=Q(e))[0][0].keyFrame||((i=this.getGopForFusion_(u[0],s))?(n=i.duration,t.unshift(i),t.byteLength+=i.byteLength,t.nalCount+=i.nalCount,t.pts=i.pts,t.dts=i.dts,t.duration+=i.duration):t=$(t)),l.length){var r=a.alignGopsAtEnd?this.alignGopsAtEnd_(t):this.alignGopsAtStart_(t);if(!r)return this.gopCache_.unshift({gop:t.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),u=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ye(s),t=r}_e(s,t),s.samples=J(t),e=G(Z(t)),s.baseMediaDecodeTime=ve(s,a.keepOriginalTimestamps),this.trigger("processedGopsInfo",t.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),i=t[0],r=t[t.length-1],this.trigger("segmentTimingInfo",ht(s.baseMediaDecodeTime,i.dts,i.pts,r.dts+r.duration,r.pts+r.duration,n)),this.trigger("timingInfo",{start:t[0].pts,end:t[t.length-1].pts+t[t.length-1].duration}),this.gopCache_.unshift({gop:t.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),u=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),n=X(o,[s]),t=new Uint8Array(n.byteLength+e.byteLength),o++,t.set(n),t.set(e,n.byteLength),this.trigger("data",{track:s,boxes:t}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),u=[],this.gopCache_.length=0,l.length=0,this.trigger("reset")},this.resetStream_=function(){ye(s),i=t=void 0},this.getGopForFusion_=function(e){for(var t,i,n,r=1/0,a=0;a<this.gopCache_.length;a++)i=(n=this.gopCache_[a]).gop,s.pps&&dt(s.pps[0],n.pps[0])&&s.sps&&dt(s.sps[0],n.sps[0])&&(i.dts<s.timelineStartInfo.dts||-1e4<=(i=e.dts-i.dts-i.duration)&&i<=45e3&&(!t||i<r)&&(t=n,r=i));return t?t.gop:null},this.alignGopsAtStart_=function(e){for(var t,i,n,r,a=e.byteLength,s=e.nalCount,o=e.duration,u=t=0;u<l.length&&t<e.length&&(i=l[u],n=e[t],i.pts!==n.pts);)n.pts>i.pts?u++:(t++,a-=n.byteLength,s-=n.nalCount,o-=n.duration);return 0===t?e:t===e.length?null:((r=e.slice(t)).byteLength=a,r.duration=o,r.nalCount=s,r.pts=r[0].pts,r.dts=r[0].dts,r)},this.alignGopsAtEnd_=function(e){for(var t,i,n=l.length-1,r=e.length-1,a=null,s=!1;0<=n&&0<=r;){if(t=l[n],i=e[r],t.pts===i.pts){s=!0;break}t.pts>i.pts?n--:(n===l.length-1&&(a=r),r--)}if(!s&&null===a)return null;if(0===(u=s?r:a))return e;var o=e.slice(u),u=o.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return o.byteLength=u.byteLength,o.duration=u.duration,o.nalCount=u.nalCount,o.pts=o[0].pts,o.dts=o[0].dts,o},this.alignGopsWith=function(e){l=e}}).prototype=new j,(mt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,mt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new j,mt.prototype.flush=function(e){var t,i,n,r=0,a={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,vt.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,yt.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,e=K(this.pendingTracks),a.initSegment=new Uint8Array(e.byteLength),a.initSegment.set(e),a.data=new Uint8Array(this.pendingBytes),n=0;n<this.pendingBoxes.length;n++)a.data.set(this.pendingBoxes[n],r),r+=this.pendingBoxes[n].byteLength;for(n=0;n<this.pendingCaptions.length;n++)(t=this.pendingCaptions[n]).startTime=de(t.startPts,s,this.keepOriginalTimestamps),t.endTime=de(t.endPts,s,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(n=0;n<this.pendingMetadata.length;n++)(i=this.pendingMetadata[n]).cueTime=de(i.pts,s,this.keepOriginalTimestamps),a.metadata.push(i);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),n=0;n<a.captions.length;n++)t=a.captions[n],this.trigger("caption",t);for(n=0;n<a.metadata.length;n++)i=a.metadata[n],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},mt.prototype.setRemux=function(e){this.remuxTracks=e},(ft=function(n){var r,a,s=this,i=!0;ft.prototype.init.call(this),this.baseMediaDecodeTime=(n=n||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new Qe.MetadataStream,t.aacStream=new gt,t.audioTimestampRolloverStream=new Qe.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Qe.TimestampRolloverStream("timed-metadata"),t.adtsStream=new it,t.coalesceStream=new mt(n,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type&&"audio"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new St(a,n),t.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream),s.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r}))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new Qe.MetadataStream,i.packetStream=new Qe.TransportPacketStream,i.parseStream=new Qe.TransportParseStream,i.elementaryStream=new Qe.ElementaryStream,i.timestampRolloverStream=new Qe.TimestampRolloverStream,i.adtsStream=new it,i.h264Stream=new _t,i.captionStream=new Qe.CaptionStream(n),i.coalesceStream=new mt(n,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new pt(r,n),i.videoSegmentStream.on("timelineStartInfo",function(e){a&&!n.keepOriginalTimestamps&&(a.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts-s.baseMediaDecodeTime))}),i.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.videoSegmentStream.on("timingInfo",s.trigger.bind(s,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),a&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new St(a,n),i.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r})}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",function(e){e.dispatchType=i.metadataStream.dispatchType,s.trigger("id3Frame",e)}),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;n.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,ye(a),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,ye(r),t.captionStream.reset()),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;n.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){var t;i&&((t=bt(e))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1),this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new j;function Et(e,c){var i=Lt(e,["moof","traf"]),e=Lt(e,["mdat"]),d={},n=[];return e.forEach(function(e,t){t=i[t];n.push({mdat:e,traf:t})}),n.forEach(function(e){var t,i,n,r,a,s=e.mdat,o=e.traf,u=Lt(o,["tfhd"]),l=Nt(u[0]),e=l.trackId,u=Lt(o,["tfdt"]),u=0<u.length?Ot(u[0]).baseMediaDecodeTime:0,o=Lt(o,["trun"]);c===e&&0<o.length&&(o=o,t=u,i=(l=l).defaultSampleDuration||0,n=l.defaultSampleSize||0,r=l.trackId,a=[],o.forEach(function(e){e=Mt(e).samples;e.forEach(function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=n),e.trackId=r,e.dts=t,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=t+e.compositionTimeOffset,t+=e.duration}),a=a.concat(e)}),s=function(e,t,i){for(var n,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s=[],o=0;o+4<e.length;o+=n)if(n=a.getUint32(o),o+=4,!(n<=0))switch(31&e[o]){case 6:var u=e.subarray(o+1,o+1+n),l=function(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null}(o,t),u={nalUnitType:"sei_rbsp",size:n,data:u,escapedRBSP:Ut(u),trackId:i};if(l)u.pts=l.pts,u.dts=l.dts,r=l;else{if(!r)break;u.pts=r.pts,u.dts=r.dts}s.push(u)}return s}(s,a,e),d[e]||(d[e]=[]),d[e]=d[e].concat(s))}),d}function kt(e){var t=31&e[1];return t<<=8,t|=e[2]}function Ct(e){return!!(64&e[1])}function wt(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function It(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}var xt={Transmuxer:ft,VideoSegmentStream:pt,AudioSegmentStream:St,AUDIO_PROPERTIES:yt,VIDEO_PROPERTIES:vt,generateSegmentTimingInfo:ht},e=function(e){return e>>>0},At=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Pt=e,Lt=function e(t,i){var n,r,a,s=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=Pt(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),a=At(t.subarray(n+4,n+8)),r=1<r?n+r:t.byteLength,a===i[0]&&(1===i.length?s.push(t.subarray(n+8,r)):(a=e(t.subarray(n+8,r),i.slice(1))).length&&(s=s.concat(a))),n=r;return s},Dt=e,Ot=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:Dt(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=Dt(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},Rt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Mt=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],u=4&i.flags[1],l=8&i.flags[1],c=n.getUint32(4),d=8;for(r&&(i.dataOffset=n.getInt32(d),d+=4),a&&c&&(t={flags:Rt(e.subarray(d,d+4))},d+=4,s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),l&&(1===i.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),c--);c--;)t={},s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),u&&(t.flags=Rt(e.subarray(d,d+4)),d+=4),l&&(1===i.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},Nt=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},n=1&i.flags[2],r=2&i.flags[2],a=8&i.flags[2],s=16&i.flags[2],o=32&i.flags[2],u=65536&i.flags[0],l=131072&i.flags[0],e=8;return n&&(e+=4,i.baseDataOffset=t.getUint32(12),e+=4),r&&(i.sampleDescriptionIndex=t.getUint32(e),e+=4),a&&(i.defaultSampleDuration=t.getUint32(e),e+=4),s&&(i.defaultSampleSize=t.getUint32(e),e+=4),o&&(i.defaultSampleFlags=t.getUint32(e)),u&&(i.durationIsEmpty=!0),!n&&l&&(i.baseDataOffsetIsMoof=!0),i},Ut=Ee,Bt=Ue.CaptionStream,Ft=function(){var t,s,o,u,l,i,n=!1;this.isInitialized=function(){return n},this.init=function(e){t=new Bt,n=!0,i=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/u,e.endTime=e.endPts/u,l.captions.push(e),l.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(o!==e[0]||u!==t[o])},this.parse=function(e,t,i){var n,r;if(!this.isInitialized())return null;if(!t||!i)return null;if(this.isNewInit(t,i))o=t[0],u=i[o];else if(null===o||!u)return s.push(e),null;for(;0<s.length;){var a=s.shift();this.parse(a,t,i)}return n=e,r=u,null!==(r=null===(e=o)?null:{seiNals:Et(n,e)[e],timescale:r})&&r.seiNals?(this.pushNals(r.seiNals),this.flushStream(),l):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;i?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){l.captions=[],l.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){s=[],u=o=null,l?this.clearParsedCaptions():l={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},jt=e,Ht=function(e){return("00"+e.toString(16)).slice(-2)},qe=function(e){return Lt(e,["moov","trak"]).reduce(function(e,t){var i,n,r=Lt(t,["tkhd"])[0];return r?(i=r[0],r=jt(r[n=0===i?12:20]<<24|r[1+n]<<16|r[2+n]<<8|r[3+n]),(t=Lt(t,["mdia","mdhd"])[0])?(i=t[0],e[r]=jt(t[n=0===i?12:20]<<24|t[1+n]<<16|t[2+n]<<8|t[3+n]),e):null):null},{})},j=function(n,e){var e=Lt(e,["moof","traf"]),e=[].concat.apply([],e.map(function(i){return Lt(i,["tfhd"]).map(function(e){var t=jt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),e=n[t]||9e4,t=Lt(i,["tfdt"]).map(function(e){var t=e[0],i=jt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);return 1===t&&(i*=Math.pow(2,32),i+=jt(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0];return(t="number"!=typeof t||isNaN(t)?1/0:t)/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},Ee=function(e,t){var i,n,r=Lt(t,["moof","traf"]),a=0,s=0;return r&&r.length&&(i=Lt(r[0],["tfhd"])[0],t=Lt(r[0],["trun"])[0],r=Lt(r[0],["tfdt"])[0],i&&(n=Nt(i).trackId),r&&(a=Ot(r).baseMediaDecodeTime),!t||(t=Mt(t)).samples&&t.samples.length&&(s=t.samples[0].compositionTimeOffset||0)),(a+s)/(e[n]||9e4)},qt=function(e){var t=0===e[0]?12:20;return jt(e[t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])},e=function(e){var e=Lt(e,["moov","trak"]),s=[];return e.forEach(function(e){var t={},i=Lt(e,["tkhd"])[0];i&&(i=(n=new DataView(i.buffer,i.byteOffset,i.byteLength)).getUint8(0),t.id=0===i?n.getUint32(12):n.getUint32(20));var n=Lt(e,["mdia","hdlr"])[0];n&&(a=At(n.subarray(8,12)),t.type="vide"===a?"video":"soun"===a?"audio":a);var r,a=Lt(e,["mdia","minf","stbl","stsd"])[0];a&&(a=a.subarray(8),t.codec=At(a.subarray(4,8)),(a=Lt(a,[t.codec])[0])&&(/^[a-z]vc[1-9]$/i.test(t.codec)?(r=a.subarray(78),"avcC"===At(r.subarray(4,8))&&11<r.length?(t.codec+=".",t.codec+=Ht(r[9]),t.codec+=Ht(r[10]),t.codec+=Ht(r[11])):t.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(t.codec)?(r=a.subarray(28),"esds"===At(r.subarray(4,8))&&20<r.length&&0!==r[19]?(t.codec+="."+Ht(r[19]),t.codec+="."+Ht(r[20]>>>2&63).replace(/^0/,"")):t.codec="mp4a.40.2"):t.codec=t.codec.toLowerCase()));e=Lt(e,["mdia","mdhd"])[0];e&&(t.timescale=qt(e)),s.push(t)}),s},Vt=j,Wt=e,zt=Ce,Gt={};Gt.ts={parseType:function(e,t){e=kt(e);return 0===e?"pat":e===t?"pmt":t?"pes":null},parsePat:function(e){var t=Ct(e),i=4+wt(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=Ct(e),n=4+wt(e);if(i&&(n+=e[n]+1),1&e[n+5]){for(var r=3+((15&e[n+1])<<8|e[n+2])-4,a=12+((15&e[n+10])<<8|e[n+11]);a<r;){var s=n+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Ct,parsePesType:function(e,t){switch(t[kt(e)]){case Be.H264_STREAM_TYPE:return"video";case Be.ADTS_STREAM_TYPE:return"audio";case Be.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Ct(e))return null;var t=4+wt(e);if(t>=e.byteLength)return null;var i=null,n=e[t+7];return 192&n&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+wt(e),i=e.subarray(t),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===It(31&i[r+3])&&(a=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===It(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,a=i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===It(31&i[r+3])?!0:a}},Gt.aac=lt;function Xt(e,t,i){for(var n,r,a,s,o=0,u=188,l=!1;u<=e.byteLength;)if(71!==e[o]||71!==e[u]&&u!==e.byteLength)o++,u++;else{if(n=e.subarray(o,u),"pes"===Gt.ts.parseType(n,t.pid)&&(r=Gt.ts.parsePesType(n,t.table),a=Gt.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Gt.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),l=!0)),l)break;o+=188,u+=188}for(o=(u=e.byteLength)-188,l=!1;0<=o;)if(71!==e[o]||71!==e[u]&&u!==e.byteLength)o--,u--;else{if(n=e.subarray(o,u),"pes"===Gt.ts.parseType(n,t.pid)&&(r=Gt.ts.parsePesType(n,t.table),a=Gt.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Gt.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),l=!0)),l)break;o-=188,u-=188}}function Kt(e){var t,i={pid:null,table:null},n={};for(t in!function(e,t){for(var i,n=0,r=188;r<e.byteLength;)if(71!==e[n]||71!==e[r])n++,r++;else{switch(i=e.subarray(n,r),Gt.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=Gt.ts.parsePat(i));break;case"pmt":t.table||(t.table=Gt.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=188,r+=188}}(e,i),i.table)if(i.table.hasOwnProperty(t))switch(i.table[t]){case Be.H264_STREAM_TYPE:n.video=[],function(e,t,i){for(var n,r,a,s,o,u,l,c,d=0,h=188,p=!1,f={data:[],size:0};h<e.byteLength;)if(71!==e[d]||71!==e[h])d++,h++;else{if(n=e.subarray(d,h),"pes"===Gt.ts.parseType(n,t.pid))if(r=Gt.ts.parsePesType(n,t.table),a=Gt.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!p&&(s=Gt.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),p=!0),!i.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),u=0;f.data.length;)l=f.data.shift(),o.set(l,u),u+=l.byteLength;!Gt.ts.videoPacketContainsKeyFrame(o)||(c=Gt.ts.parsePesTime(o))&&(i.firstKeyFrame=c,i.firstKeyFrame.type="video"),f.size=0}f.data.push(n),f.size+=n.byteLength}if(p&&i.firstKeyFrame)break;d+=188,h+=188}for(d=(h=e.byteLength)-188,p=!1;0<=d;)if(71!==e[d]||71!==e[h])d--,h--;else{if(n=e.subarray(d,h),"pes"===Gt.ts.parseType(n,t.pid)&&(r=Gt.ts.parsePesType(n,t.table),a=Gt.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(s=Gt.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),p=!0)),p)break;d-=188,h-=188}}(e,i,n),0===n.video.length&&delete n.video;break;case Be.ADTS_STREAM_TYPE:n.audio=[],Xt(e,i,n),0===n.audio.length&&delete n.audio}return n}var Yt=se,Qt=function(e,t){var i,n,r=(Gt.aac.isLikelyAacData(e)?function(e){for(var t,i=!1,n=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(Gt.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){i=!0;break}if((s=Gt.aac.parseId3TagSize(e,o))>e.length){i=!0;break}null===a&&(t=e.subarray(o,o+s),a=Gt.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){i=!0;break}if((s=Gt.aac.parseAdtsSize(e,o))>e.length){i=!0;break}null===r&&(t=e.subarray(o,o+s),r=Gt.aac.parseSampleRate(t)),n++,o+=s;break;default:o++}if(i)return null}if(null===r||null===a)return null;var u=Yt/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*u,pts:a+1024*n*u}]}}:Kt)(e);return r&&(r.audio||r.video)?(e=t,(t=r).audio&&t.audio.length&&("undefined"!=typeof(i=e)&&!isNaN(i)||(i=t.audio[0].dts),t.audio.forEach(function(e){e.dts=zt(e.dts,i),e.pts=zt(e.pts,i),e.dtsTime=e.dts/Yt,e.ptsTime=e.pts/Yt})),t.video&&t.video.length&&("undefined"!=typeof(n=e)&&!isNaN(n)||(n=t.video[0].dts),t.video.forEach(function(e){e.dts=zt(e.dts,n),e.pts=zt(e.pts,n),e.dtsTime=e.dts/Yt,e.ptsTime=e.pts/Yt}),t.firstKeyFrame&&((t=t.firstKeyFrame).dts=zt(t.dts,n),t.pts=zt(t.pts,n),t.dtsTime=t.dts/Yt,t.ptsTime=t.pts/Yt)),r):null},$t=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){var i,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new xt.Transmuxer(this.options),i=this.self,(e=this.transmuxer).on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};t=e.data;e.data=t.buffer,i.postMessage({action:"data",segment:e,byteOffset:t.byteOffset,byteLength:t.byteLength},[e.data])}),e.on("done",function(e){i.postMessage({action:"done"})}),e.on("gopInfo",function(e){i.postMessage({action:"gopInfo",gopInfo:e})}),e.on("videoSegmentTimingInfo",function(e){var t={start:{decode:ue(e.start.dts),presentation:ue(e.start.pts)},end:{decode:ue(e.end.dts),presentation:ue(e.end.pts)},baseMediaDecodeTime:ue(e.baseMediaDecodeTime)};e.prependedContentDuration&&(t.prependedContentDuration=ue(e.prependedContentDuration)),i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}),e.on("audioSegmentTimingInfo",function(e){var t={start:{decode:ue(e.start.dts),presentation:ue(e.start.pts)},end:{decode:ue(e.end.dts),presentation:ue(e.end.pts)},baseMediaDecodeTime:ue(e.baseMediaDecodeTime)};e.prependedContentDuration&&(t.prependedContentDuration=ue(e.prependedContentDuration)),i.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:t})}),e.on("id3Frame",function(e){i.postMessage({action:"id3Frame",id3Frame:e})}),e.on("caption",function(e){i.postMessage({action:"caption",caption:e})}),e.on("trackinfo",function(e){i.postMessage({action:"trackinfo",trackInfo:e})}),e.on("audioTimingInfo",function(e){i.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ue(e.start),end:ue(e.end)}})}),e.on("videoTimingInfo",function(e){i.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ue(e.start),end:ue(e.end)}})})},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new Ft,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),e=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:e&&e.captions||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,e=e.data,t=Vt(t,e);this.self.postMessage({action:"probeMp4StartTime",startTime:t,data:e},[e.buffer])},t.probeMp4Tracks=function(e){var t=e.data,e=Wt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:e,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,i=e.baseStartTime,e="number"!=typeof i||isNaN(i)?void 0:i*se,i=Qt(t,e),e=null;i&&((e={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1}).hasVideo&&(e.videoStart=i.video[0].ptsTime),e.hasAudio&&(e.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:e,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){e=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(e)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){e=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(oe(e)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(oe(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new $t(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new $t(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),Ku=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():eu(e.currentTransmux))},Yu=function(e){iu("reset",e)},Qu=function(e){var t=new Xu;t.currentTransmux=null,t.transmuxQueue=[];var i=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)},t.postMessage({action:"init",options:e}),t},$u=2,Ju=-101,Zu=-102,el=ro("CodecUtils"),tl=ro("PlaylistSelector"),zt=function(){var e=this.useDevicePixelRatio&&_.devicePixelRatio||1;return ku(this.playlists.master,this.systemBandwidth,parseInt(Tu(this.tech_.el(),"width"),10)*e,parseInt(Tu(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},il=function(n){function e(e,t){var i=n.call(this)||this;if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=e.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=e.hasPlayed,i.currentTime_=e.currentTime,i.seekable_=e.seekable,i.seeking_=e.seeking,i.duration_=e.duration,i.mediaSource_=e.mediaSource,i.vhs_=e.vhs,i.loaderType_=e.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=e.segmentMetadataTrack,i.goalBufferLength_=e.goalBufferLength,i.sourceType_=e.sourceType,i.sourceUpdater_=e.sourceUpdater,i.inbandTextTracks_=e.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=e.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=e.parse708captions,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=Zn.browser.IE_VERSION,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=e.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=e.decrypter,i.syncController_=e.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",function(){i.isEndOfStream_()||(i.ended_=!1)}),i.fetchAtBuffer_=!1,i.logger_=ro("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(ft(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),i}mt(e,n);var t=e.prototype;return t.createTransmuxer_=function(){return Qu({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&_.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,_.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},t.error=function(e){return"undefined"!=typeof e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Yu(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return Zn.createTimeRanges();if("main"===this.loaderType_){var e=this.startingMediaInfo_,t=e.hasAudio,i=e.hasVideo,e=e.isMuxed;if(i&&t&&!this.audioDisabled_&&!e)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Wo(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},t.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=zo(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});e={resolvedUri:(n||e).resolvedUri};return n&&(e.bytes=n.bytes),e},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(e,t){if(void 0===t&&(t={}),e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");t=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+t+"]"),null!==this.mediaIndex&&(this.mediaIndex-=t,this.mediaIndex<0?(this.mediaIndex=null,this.partIndex=null):(r=this.playlist_.segments[this.mediaIndex],!this.partIndex||r.parts&&r.parts.length&&r.parts[this.partIndex]||(r=this.mediaIndex,this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=r))),n&&(n.mediaIndex-=t,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(0<=n.mediaIndex&&(n.segment=e.segments[n.mediaIndex]),0<=n.partIndex&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}},t.pause=function(){this.checkBufferTimeout_&&(_.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return null===this.checkBufferTimeout_},t.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&Yu(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(e,t,i,n){if(void 0===i&&(i=function(){}),void 0===n&&(n=!1),(t=t===1/0?this.duration_():t)<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.startingMediaInfo_){var r,a=1,s=function(){0===--a&&i()};for(r in!n&&this.audioDisabled_||(a++,this.sourceUpdater_.removeAudio(e,t,s)),!n&&"main"!==this.loaderType_||(this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil((t-n)*Ru),a=Math.ceil((i-n)*Ru),n=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return n;for(var o=s+1;o--&&!(e[o].pts<=r););return o=Math.max(o,0),n.splice(o,s-o+1),n}(this.gopBuffer_,e,t,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,t,s)),this.inbandTextTracks_)wu(e,t,this.inbandTextTracks_[r]);wu(e,t,this.segmentMetadataTrack_),s()}else this.logger_("skipping remove because no source updater or starting media info")},t.monitorBuffer_=function(){this.checkBufferTimeout_&&_.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=_.setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&_.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=_.setTimeout(this.monitorBufferTick_.bind(this),500)},t.fillBuffer_=function(){var e;this.sourceUpdater_.updating()||(e=this.chooseNextRequest_())&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))},t.isEndOfStream_=function(e,t,i){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===i&&(i=this.partIndex),!t||!this.mediaSource_)return!1;var n="number"==typeof e&&t.segments[e],e=e+1===t.segments.length,n=!n||!n.parts||i+1===n.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&e&&n},t.chooseNextRequest_=function(){var e=co(this.buffered_())||0,t=Math.max(0,e-this.currentTime_()),i=!this.hasPlayed_()&&1<=t,n=t>=this.goalBufferLength_(),r=this.playlist_.segments;if(!r.length||i||n)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());t={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};t.isSyncRequest?t.mediaIndex=function(e,t,i){t=t||[];for(var n=[],r=0,a=0;a<t.length;a++){var s=t[a];if(e===s.timeline&&(n.push(a),i<(r+=s.duration)))return a}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,r,e):null!==this.mediaIndex?(i=r[this.mediaIndex],n="number"==typeof this.partIndex?this.partIndex:-1,t.startOfSegment=i.end||e,i.parts&&i.parts[n+1]?(t.mediaIndex=this.mediaIndex,t.partIndex=n+1):t.mediaIndex=this.mediaIndex+1):(e=(s=Bu.getMediaInfoForTime({playlist:this.playlist_,currentTime:this.fetchAtBuffer_?e:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time})).segmentIndex,a=s.startTime,s=s.partIndex,t.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",t.mediaIndex=e,t.startOfSegment=a,t.partIndex=s);var a=r[t.mediaIndex],s=a&&"number"==typeof t.partIndex&&a.parts&&a.parts[t.partIndex];if(!a||"number"==typeof t.partIndex&&!s)return null;"number"!=typeof t.partIndex&&a.parts&&(t.partIndex=0);a=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return t.mediaIndex>=r.length-1&&a&&!this.seeking_()?null:this.generateSegmentInfo_(t)},t.generateSegmentInfo_=function(e){var t=e.playlist,i=e.mediaIndex,n=e.startOfSegment,r=e.isSyncRequest,a=e.partIndex,s=e.forceTimestampOffset,o=e.getMediaInfoForTime,u=t.segments[i],e="number"==typeof a&&u.parts[a],o={requestId:"segment-loader-"+Math.random(),uri:e&&e.resolvedUri||u.resolvedUri,mediaIndex:i,partIndex:e?a:null,isSyncRequest:r,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:e&&e.duration||u.duration,segment:u,part:e,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:o},s="undefined"!=typeof s?s:this.isPendingTimestampOffset_;o.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:n,buffered:this.buffered_(),overrideCheck:s});s=co(this.sourceUpdater_.audioBuffered());return"number"==typeof s&&(o.audioAppendStart=s-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(o.gopsToAlignWith=function(e,t,i){if("undefined"==typeof t||null===t||!e.length)return[];for(var n=Math.ceil((t-i+3)*Ru),r=0;r<e.length&&!(e[r].pts>n);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),o},t.timestampOffsetForSegment_=function(e){return i=(t=e).segmentTimeline,n=t.currentTimeline,r=t.startOfSegment,e=t.buffered,t.overrideCheck||i!==n?!(i<n)&&e.length?e.end(e.length-1):r:null;var t,i,n,r},t.earlyAbortWhenNeeded_=function(e){var t,i,n,r,a,s,o,u,l,c,d,h,p;!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3||(t=this.currentTime_(),r=e.bandwidth,a=this.pendingSegment_.duration,p=Bu.estimateSegmentRequestTime(a,r,this.playlist_,e.bytesReceived),i=this.buffered_(),n=t,void 0===(e=this.vhs_.tech_.playbackRate())&&(e=1),p<=(e=((i.length?i.end(i.length-1):0)-n)/e-1)||(r={master:this.vhs_.playlists.master,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:a,timeUntilRebuffer:e,currentTimeline:this.currentTimeline_,syncController:this.syncController_},a=r.master,s=r.currentTime,o=r.bandwidth,u=r.duration,l=r.segmentDuration,c=r.timeUntilRebuffer,d=r.currentTimeline,h=r.syncController,a=(r=(a=!(a=(r=a.playlists.filter(function(e){return!Bu.isIncompatible(e)})).filter(Bu.isEnabled)).length?r.filter(function(e){return!Bu.isDisabled(e)}):a).filter(Bu.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=h.getSyncPoint(e,u,d,s)?1:2;return{playlist:e,rebufferingImpact:Bu.estimateSegmentRequestTime(l,o,e)*t-c}})).filter(function(e){return e.rebufferingImpact<=0}),Su(a,function(e,t){return Eu(t.playlist,e.playlist)}),(r=a.length?a[0]:(Su(r,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),r[0]||null))&&(p=p-e-r.rebufferingImpact,!r.playlist||r.playlist.uri===this.playlist_.uri||p<(e<=Nu?1:.5)||(this.bandwidth=r.playlist.attributes.BANDWIDTH*Gu.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))))))},t.handleAbort_=function(e){this.logger_("Aborting "+xu(e)),this.mediaRequestsAborted+=1},t.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},t.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var a=i[r];if(a!==n[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},t.handleTimingInfo_=function(e,t,i,n){var r;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||((r=this.pendingSegment_)[e=Au(t)]=r[e]||{},r[e][i]=n,this.logger_("timinginfo: "+t+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_())},t.handleCaptions_=function(e,t){var g,y,v=this;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(0!==t.length?this.pendingSegment_.hasAppendedData_?(g=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),y={},t.forEach(function(e){y[e.stream]=y[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=y[e.stream];t.startTime=Math.min(t.startTime,e.startTime+g),t.endTime=Math.max(t.endTime,e.endTime+g),t.captions.push(e)}),Object.keys(y).forEach(function(e){var t,i,n,r,a,s,o,u,l,c,d=y[e],h=d.startTime,p=d.endTime,f=d.captions,m=v.inbandTextTracks_;v.logger_("adding cues from "+h+" -> "+p+" for "+e),t=m,i=v.vhs_.tech_,t[n=e]||(i.trigger({type:"usage",name:"vhs-608"}),i.trigger({type:"usage",name:"hls-608"}),/^cc708_/.test(r=n)&&(r="SERVICE"+n.split("_")[1]),(o=i.textTracks().getTrackById(r))?t[n]=o:(s=a=n,d=!1,(o=(i.options_.vhs&&i.options_.vhs.captionServices||{})[r])&&(a=o.label,s=o.language,d=o.default),t[n]=i.addRemoteTextTrack({kind:"captions",id:r,default:d,label:a,language:s},!1).track)),wu(h,p,m[e]),l=(f={captionArray:f,inbandTextTracks:m,timestampOffset:g}).inbandTextTracks,m=f.captionArray,c=f.timestampOffset,m&&(u=_.WebKitDataCue||_.VTTCue,m.forEach(function(e){var t=e.stream;l[t].addCue(new u(e.startTime+c,e.endTime+c,e.text))}))}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})):this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t)):this.logger_("SegmentLoader received no captions from a caption event"))},t.handleId3_=function(e,t,i){var n,r,a,s;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?(n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r=this.inbandTextTracks_,a=i,s=this.vhs_.tech_,r.metadataTrack_||(r.metadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,r.metadataTrack_.inBandMetadataTrackDispatchType=a),Cu({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:this.duration_()})):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i)))},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(e){return e()})},t.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(e){return e()})},t.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.currentMediaInfo_||!Pu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,t=t.isMuxed;return!(n&&!e.videoTimingInfo)&&(!(i&&!this.audioDisabled_&&!t&&!e.audioTimingInfo)&&!Pu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i,n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4?(this.trigger("fmp4"),n.timingInfo.start=n[Au(t.type)].start):((i="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo)&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:i,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})),this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var r=this.chooseNextRequest_();if(r.mediaIndex!==n.mediaIndex||r.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},t.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},t.getInitSegmentAndUpdateState_=function(e){var t=e.type,i=e.initSegment,n=e.map,r=e.playlist;if(n){e=Wo(n);if(this.activeInitSegmentId_===e)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,i):null},t.handleQuotaExceededError_=function(e,t){var i=this,n=e.segmentInfo,r=e.type,a=e.bytes,s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();1<s.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+lo(s).join(", ")),1<o.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+lo(o).join(", "));var u=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,c=o.length?o.start(0):0,e=o.length?o.end(o.length-1):0;if(l-u<=1&&e-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+lo(s).join(", ")+", video buffer: "+lo(o).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:n,type:r,bytes:a}));a=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+a),this.remove(0,a,function(){i.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=_.setTimeout(function(){i.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),i.quotaExceededErrorRetryTimeout_=null,i.processCallQueue_()},1e3)},!0)},t.handleAppendError_=function(e,t){var i=e.segmentInfo,n=e.type,e=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(n+" append of "+e.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:i,type:n,bytes:e}))},t.appendToSourceBuffer_=function(e){var t,i,n=e.segmentInfo,r=e.type,a=e.initSegment,s=e.data,o=e.bytes;o||(e=[s],s=s.byteLength,a&&(e.unshift(a),s+=a.byteLength),i=0,(e={bytes:s,segments:e}).bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach(function(e){t.set(e,i),i+=e.byteLength})),o=t),this.sourceUpdater_.appendBuffer({segmentInfo:n,type:r,bytes:o},this.handleAppendError_.bind(this,{segmentInfo:n,type:r,bytes:o}))},t.handleSegmentTimingInfo_=function(e,t,i){this.pendingSegment_&&t===this.pendingSegment_.requestId&&((t=this.pendingSegment_.segment)[e=e+"TimingInfo"]||(t[e]={}),t[e].transmuxerPrependedSeconds=i.prependedContentDuration||0,t[e].transmuxedPresentationStart=i.start.presentation,t[e].transmuxedDecodeStart=i.start.decode,t[e].transmuxedPresentationEnd=i.end.presentation,t[e].transmuxedDecodeEnd=i.end.decode,t[e].baseMediaDecodeTime=i.baseMediaDecodeTime)},t.appendData_=function(e,t){var i=t.type,n=t.data;n&&n.byteLength&&("audio"===i&&this.audioDisabled_||(t=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:t,data:n})))},t.loadSegment_=function(t){var i=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var e=g({},t,{forceTimestampOffset:!0});g(t,i.generateSegmentInfo_(e)),i.isPendingTimestampOffset_=!1,i.updateTransmuxerAndRequestSegment_(t)})},t.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var i=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&0<e.timeline,a=n||r&&a;this.logger_("Requesting "+xu(e)),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=mu({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},t.trimBackBuffer_=function(e){var t,i,n,r,r=(t=this.seekable_(),i=this.currentTime_(),n=this.playlist_.targetDuration||10,r=i-Gu.BACK_BUFFER_LENGTH,t.length&&(r=Math.max(r,t.start(0))),Math.min(i-n,r));0<r&&this.remove(0,r)},t.createSimplifiedSegmentObj_=function(e){var t=e.segment,i=e.part,n={resolvedUri:(i||t).resolvedUri,byterange:(i||t).byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},i=e.playlist.segments[e.mediaIndex-1];return i&&i.timeline===t.timeline&&(i.videoTimingInfo?n.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(n.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key&&(e=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]),n.key=this.segmentKey(t.key),n.key.iv=e),t.map&&(n.map=this.initSegmentForMap(t.map)),n},t.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},t.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+1/60):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},t.segmentRequestFinished_=function(e,t,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Zu?void 0:(this.pause(),e.code===Ju?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));e=this.pendingSegment_;this.saveBandwidthRelatedStats_(e.duration,t.stats),e.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(e)}},t.setTimeMapping_=function(e){e=this.syncController_.mappingForTimeline(e);null!==e&&(this.timeMapping_=e)},t.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},t.trueSegmentStart_=function(e){var t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,e=e.audioTimingInfo;if("undefined"!=typeof t)return t;if(!s)return e.start;i=i.segments[n-1];return 0!==n&&i&&"undefined"!=typeof i.start&&i.end===r+a?o.start:r},t.waitForAppendsToComplete_=function(e){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,t=t.isMuxed,n="main"===this.loaderType_&&n,t=!this.audioDisabled_&&i&&!t;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);n&&e.waitingOnAppends++,t&&e.waitingOnAppends++,n&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),t&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},t.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(e){var t,i,e=(t=this.loaderType_,i=this.currentMediaInfo_,e=e,"main"===t&&i&&e?e.hasAudio||e.hasVideo?i.hasVideo&&!e.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&e.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);return!!e&&(this.error({message:e,blacklistDuration:1/0}),this.trigger("error"),!0)},t.updateSourceBufferTimestampOffset_=function(e){var t;null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_||(t=!1,e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset"))},t.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=Du(e,this.sourceType_);t&&("warn"===t.severity?Zn.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)?(this.logger_("Appended "+xu(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),(t=e.segment).end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())):this.logger_("Throwing away un-appended sync request "+xu(e))},t.recordThroughput_=function(e){var t,i;e.duration<1/60?this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+1/60):(t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/i*8*1e3),this.throughput.rate+=(i-t)/++this.throughput.count)},t.addSegmentMetadataCue_=function(e){var t,i,n,r;this.segmentMetadataTrack_&&(i=(t=e.segment).start,r=t.end,Iu(i)&&Iu(r)&&(wu(i,r,this.segmentMetadataTrack_),n=_.WebKitDataCue||_.VTTCue,e={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:r},(r=new n(i,r,JSON.stringify(e))).value=e,this.segmentMetadataTrack_.addCue(r)))},e}(Zn.EventTarget);function nl(){}function rl(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function al(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]}function sl(e,t){if(0!==t.queue.length){var i=0,n=t.queue[i];if("mediaSource"!==n.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!al(e,t)){if(n.type!==e){if(null===(i=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null}(e,t.queue)))return;n=t.queue[i]}t.queue.splice(i,1),(t.queuePending[e]=n).action(e,t),n.doneFn||(t.queuePending[e]=null,sl(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),n.action(t),n.doneFn&&n.doneFn(),sl("audio",t),sl("video",t))}}function ol(e,t){var i=t[e+"Buffer"],n=rl(e);i&&(i.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),i.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)}function ul(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)}function ll(e){var t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,e=e.name;i.queue.push({type:t,action:n,doneFn:r,name:e}),sl(t,i)}function cl(i,n){return function(e){var t;n.queuePending[i]&&(t=n.queuePending[i].doneFn,n.queuePending[i]=null,t&&t(n[i+"Error_"])),sl(i,n)}}function dl(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}function hl(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function pl(e,t){(t.activePlaylistLoader=e).load()}function fl(e,t){for(var i=0;i<e.length;i++){if(Co(t,e[i]))return!0;if(e[i].playlists&&fl(e[i].playlists,t))return!0}return!1}function ml(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){Fl[e](e,a)});var e,s=a.mediaTypes,t=a.masterPlaylistLoader,i=a.tech,n=a.vhs,r=a.segmentLoaders,o=r.AUDIO,u=r.main;function l(){s.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})}for(e in["AUDIO","SUBTITLES"].forEach(function(e){var u,l,o,c,t,i,d,h,n,r;s[e].activeGroup=(u=e,l=a,function(t){var e=l.masterPlaylistLoader,i=l.mediaTypes[u].groups,n=e.media();if(!n)return null;var r=null;n.attributes[u]&&(r=i[n.attributes[u]]);var a=Object.keys(i);if(!r)if("AUDIO"===u&&1<a.length&&Io(l.master))for(var s=0;s<a.length;s++){var o=i[a[s]];if(fl(o,n)){r=o;break}}else i.main?r=i.main:1===a.length&&(r=i[a[0]]);return"undefined"==typeof t?r:null!==t&&r&&r.filter(function(e){return e.id===t.id})[0]||null}),s[e].activeTrack=jl[e](e,a),s[e].onGroupChanged=(o=e,c=a,function(){var e=c.segmentLoaders,t=e[o],i=e.main,n=c.mediaTypes[o],r=n.activeTrack(),a=n.getActiveGroup(),s=n.activePlaylistLoader,e=n.lastGroup_;a&&e&&a.id===e.id||(n.lastGroup_=a,n.lastTrack_=r,hl(t,n),a&&!a.isMasterPlaylist&&(a.playlistLoader?(t.resyncLoader(),pl(a.playlistLoader,n)):s&&i.resetEverything()))}),s[e].onGroupChanging=(t=e,i=a,function(){var e=i.segmentLoaders[t];i.mediaTypes[t].lastGroup_=null,e.abort(),e.pause()}),s[e].onTrackChanged=(d=e,h=a,function(){var e=h.masterPlaylistLoader,t=h.segmentLoaders,i=t[d],n=t.main,r=h.mediaTypes[d],a=r.activeTrack(),s=r.getActiveGroup(),o=r.activePlaylistLoader,u=r.lastTrack_;if((!u||!a||u.id!==a.id)&&(r.lastGroup_=s,r.lastTrack_=a,hl(i,r),s)){if(s.isMasterPlaylist){if(!a||!u||a.id===u.id)return;var l=h.vhs.masterPlaylistController_,t=l.selectPlaylist();return l.media()===t?void 0:(r.logger_("track change. Switching master audio from "+u.id+" to "+a.id),e.pause(),n.resetEverything(),void l.fastQualityChange_(t))}if("AUDIO"===d){if(!s.playlistLoader)return n.setAudio(!0),void n.resetEverything();i.setAudio(!0),n.setAudio(!1)}o!==s.playlistLoader&&(i.track&&i.track(a),i.resetEverything()),pl(s.playlistLoader,r)}}),s[e].getActiveGroup=(n=e,r=a.mediaTypes,function(){var e=r[n].activeTrack();return e?r[n].activeGroup(e):null})}),(r=s.AUDIO.activeGroup())&&(r=(r.filter(function(e){return e.default})[0]||r[0]).id,s.AUDIO.tracks[r].enabled=!0,s.AUDIO.onGroupChanged(),s.AUDIO.onTrackChanged(),s.AUDIO.getActiveGroup().playlistLoader?(u.setAudio(!1),o.setAudio(!0)):u.setAudio(!0)),t.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return s[e].onGroupChanged()})}),t.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return s[e].onGroupChanging()})}),i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",s.SUBTITLES.onTrackChanged),n.on("dispose",function(){i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",s.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),s.AUDIO.tracks)i.audioTracks().addTrack(s.AUDIO.tracks[e])}function gl(e,t,i){var n,r,a,s,o=e.masterPlaylistController_,u=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);t.attributes&&(n=t.attributes.RESOLUTION,this.width=n&&n.width,this.height=n&&n.height,this.bandwidth=t.attributes.BANDWIDTH),this.codecs=_u(o.master(),t),this.playlist=t,this.id=i,this.enabled=(r=e.playlists,a=t.id,s=u,function(e){var t=r.master.playlists[a],i=To(t),n=So(t);return"undefined"==typeof e?n:(e?delete t.disabled:t.disabled=!0,e===n||i||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})}function yl(t,e){var i=0,n=0,r=Zn.mergeOptions(zl,e);function a(){n&&t.currentTime(n)}function s(e){null!=e&&(n=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())}function o(){return Date.now()-i<1e3*r.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):r.getSource&&"function"==typeof r.getSource?(i=Date.now(),r.getSource.call(t,s)):void Zn.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function u(){t.off("loadedmetadata",a),t.off("error",o),t.off("dispose",u)}t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}),t.on("error",o),t.on("dispose",u),t.reloadSourceOnError=function(e){u(),yl(t,e)}}var vl,_l=["video","audio"],bl=function(n,r,a){return function(t,i){var e=i[t+"Buffer"];if(ul(i.mediaSource,e)){i.logger_("Appending segment "+r.mediaIndex+"'s "+n.length+" bytes to "+t+"Buffer");try{e.appendBuffer(n)}catch(e){i.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+r.mediaIndex+" to "+t+"Buffer"),i.queuePending[t]=null,a(e)}}}},Tl=function(n,r){return function(t,i){var e=i[t+"Buffer"];if(ul(i.mediaSource,e)){i.logger_("Removing "+n+" to "+r+" from "+t+"Buffer");try{e.remove(n,r)}catch(e){i.logger_("Remove "+n+" to "+r+" from "+t+"Buffer failed")}}}},Sl=function(n){return function(e,t){var i=t[e+"Buffer"];ul(t.mediaSource,i)&&(t.logger_("Setting "+e+"timestampOffset to "+n),i.timestampOffset=n)}},El=function(i){return function(e,t){i()}},kl=function(t){return function(e){if("open"===e.mediaSource.readyState){e.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{e.mediaSource.endOfStream(t)}catch(e){Zn.log.warn("Failed to call media source endOfStream",e)}}}},Cl=function(t){return function(e){e.logger_("Setting mediaSource duration to "+t);try{e.mediaSource.duration=t}catch(e){Zn.log.warn("Failed to set media source duration",e)}}},wl=function(){return function(t,e){if("open"===e.mediaSource.readyState){var i=e[t+"Buffer"];if(ul(e.mediaSource,i)){e.logger_("calling abort on "+t+"Buffer");try{i.abort()}catch(e){Zn.log.warn("Failed to abort on "+t+"Buffer",e)}}}}},Il=function(n,r){return function(e){var t=rl(n),i=pr(r);e.logger_("Adding "+n+"Buffer with codec "+r+" to mediaSource");i=e.mediaSource.addSourceBuffer(i);i.addEventListener("updateend",e["on"+t+"UpdateEnd_"]),i.addEventListener("error",e["on"+t+"Error_"]),e.codecs[n]=r,e[n+"Buffer"]=i}},xl=function(i){return function(e){var t=e[i+"Buffer"];if(ol(i,e),ul(e.mediaSource,t)){e.logger_("Removing "+i+"Buffer with codec "+e.codecs[i]+" from mediaSource");try{e.mediaSource.removeSourceBuffer(t)}catch(e){Zn.log.warn("Failed to removeSourceBuffer "+i+"Buffer",e)}}}},Al=function(r){return function(e,t){var i=t[e+"Buffer"],n=pr(r);ul(t.mediaSource,i)&&t.codecs[e]!==r&&(t.logger_("changing "+e+"Buffer codec from "+t.codecs[e]+" to "+r),i.changeType(n),t.codecs[e]=r)}},Pl=function(i){function e(e){var t=i.call(this)||this;return t.mediaSource=e,t.sourceopenListener_=function(){return sl("mediaSource",ft(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=ro("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=cl("video",ft(t)),t.onAudioUpdateEnd_=cl("audio",ft(t)),t.onVideoError_=function(e){t.videoError_=e},t.onAudioError_=function(e){t.audioError_=e},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}mt(e,i);var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(e,t){ll({type:"mediaSource",sourceUpdater:this,action:Il(e,t),name:"addSourceBuffer"})},t.abort=function(e){ll({type:e,sourceUpdater:this,action:wl(e),name:"abort"})},t.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?ll({type:"mediaSource",sourceUpdater:this,action:xl(e),name:"removeSourceBuffer"}):Zn.log.error("removeSourceBuffer is not supported!")},t.canRemoveSourceBuffer=function(){return!Zn.browser.IE_VERSION&&!Zn.browser.IS_FIREFOX&&_.MediaSource&&_.MediaSource.prototype&&"function"==typeof _.MediaSource.prototype.removeSourceBuffer},e.canChangeType=function(){return _.SourceBuffer&&_.SourceBuffer.prototype&&"function"==typeof _.SourceBuffer.prototype.changeType},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(e,t){this.canChangeType()?ll({type:e,sourceUpdater:this,action:Al(t),name:"changeType"}):Zn.log.error("changeType is not supported!")},t.addOrChangeSourceBuffers=function(i){var n=this;if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(e){var t=i[e];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(e,t);n.canChangeType()&&n.changeType(e,t)})},t.appendBuffer=function(e,t){var i=this,n=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");ll({type:r,sourceUpdater:this,action:bl(a,n||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(r=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+r.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,r.forEach(function(e){i.appendBuffer.apply(i,e)})))},t.audioBuffered=function(){return ul(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered||Zn.createTimeRange()},t.videoBuffered=function(){return ul(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered||Zn.createTimeRange()},t.buffered=function(){var e=ul(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=ul(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var i=null,n=null,r=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return Zn.createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),o=0;o<a.length;o++)"start"===a[o].type?2===++r&&(i=a[o].time):"end"===a[o].type&&1===--r&&(n=a[o].time),null!==i&&null!==n&&(s.push([i,n]),n=i=null);return Zn.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(e,t){void 0===t&&(t=nl),ll({type:"mediaSource",sourceUpdater:this,action:Cl(e),name:"duration",doneFn:t})},t.endOfStream=function(e,t){void 0===t&&(t=nl),ll({type:"mediaSource",sourceUpdater:this,action:kl(e="string"!=typeof(e=void 0===e?null:e)?void 0:e),name:"endOfStream",doneFn:t})},t.removeAudio=function(e,t,i){void 0===i&&(i=nl),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?ll({type:"audio",sourceUpdater:this,action:Tl(e,t),doneFn:i,name:"remove"}):i()},t.removeVideo=function(e,t,i){void 0===i&&(i=nl),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?ll({type:"video",sourceUpdater:this,action:Tl(e,t),doneFn:i,name:"remove"}):i()},t.updating=function(){return!(!al("audio",this)&&!al("video",this))},t.audioTimestampOffset=function(e){return"undefined"!=typeof e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(ll({type:"audio",sourceUpdater:this,action:Sl(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},t.videoTimestampOffset=function(e){return"undefined"!=typeof e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(ll({type:"video",sourceUpdater:this,action:Sl(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},t.audioQueueCallback=function(e){this.audioBuffer&&ll({type:"audio",sourceUpdater:this,action:El(e),name:"callback"})},t.videoQueueCallback=function(e){this.videoBuffer&&ll({type:"video",sourceUpdater:this,action:El(e),name:"callback"})},t.dispose=function(){var t=this;this.trigger("dispose"),_l.forEach(function(e){t.abort(e),t.canRemoveSourceBuffer()?t.removeSourceBuffer(e):t[e+"QueueCallback"](function(){return ol(e,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(Zn.EventTarget),Ll=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),Dl=function(i){function e(e,t){return(t=i.call(this,e,t=void 0===t?{}:t)||this).mediaSource_=null,t.subtitlesTrack_=null,t.loaderType_="subtitle",t.featuresNativeTextTracks_=e.featuresNativeTextTracks,t.shouldSaveSegmentTimingInfo_=!1,t}mt(e,i);var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Zn.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,e=e[e.length-1].startTime;return Zn.createTimeRanges([[t,e]])},t.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Wo(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(t=Ll.byteLength+e.bytes.byteLength,(t=new Uint8Array(t)).set(e.bytes),t.set(Ll,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:t}),n||e},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(e){return"undefined"==typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},t.remove=function(e,t){wu(e,t,this.subtitlesTrack_)},t.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(i.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},t.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(e,t,i){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Ju&&this.handleTimeout_(),e.code===Zu?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof _.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var s=function(){n.subtitlesTrack_.tech_.off("vttjsloaded",o),n.stopForError({message:"Error loading vtt.js"})},o=function(){n.subtitlesTrack_.tech_.off("vttjserror",s),n.segmentRequestFinished_(e,t,i)};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",s)}a.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach(function(e){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new _.VTTCue(e.startTime,e.endTime,e.text):e)}),function(t){var e=t.cues;if(e)for(var i=0;i<e.length;i++){for(var n=[],r=0,a=0;a<e.length;a++)e[i].startTime===e[a].startTime&&e[i].endTime===e[a].endTime&&e[i].text===e[a].text&&1<++r&&n.push(e[a]);n.length&&n.forEach(function(e){return t.removeCue(e)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(t){var e=!1;"function"==typeof _.TextDecoder?i=new _.TextDecoder("utf8"):(i=_.WebVTT.StringDecoder(),e=!0);var i=new _.WebVTT.Parser(_,_.vttjs,i);t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){t.timestampmap=e},i.onparsingerror=function(e){Zn.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map&&(n=t.segment.map.bytes,e&&(n=dl(n)),i.parse(n));var n=t.bytes;e&&(n=dl(n)),i.parse(n),i.flush()},t.updateTimeMapping_=function(e,t,i){var n,r,a=e.segment;t&&(e.cues.length?(r=e.timestampmap,n=r.MPEGTS/Ru-r.LOCAL+t.mapping,e.cues.forEach(function(e){e.startTime+=n,e.endTime+=n}),i.syncInfo||(r=e.cues[0].startTime,t=e.cues[e.cues.length-1].startTime,i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(r,t-a.duration)})):a.empty=!0)},e}(il),Ol=[{name:"VOD",run:function(e,t,i,n,r){if(i===1/0)return null;return{time:0,segmentIndex:0,partIndex:null}}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,s=null,o=ho(t);r=r||0;for(var u=0;u<o.length;u++){var l=o[t.endList||0===r?u:o.length-(u+1)],c=l.segment,d=e.timelineToDatetimeMappings[c.timeline];if(d&&c.dateTimeObject){var h=c.dateTimeObject.getTime()/1e3+d;if(c.parts&&"number"==typeof l.partIndex)for(var p=0;p<l.partIndex;p++)h+=c.parts[p].duration;d=Math.abs(r-h);if(null!==s&&(0===d||s<d))break;s=d,a={time:h,segmentIndex:l.segmentIndex,partIndex:l.partIndex}}}return a}},{name:"Segment",run:function(e,t,i,n,r){var a=null,s=null;r=r||0;for(var o=ho(t),u=0;u<o.length;u++){var l=o[t.endList||0===r?u:o.length-(u+1)],c=l.segment,d=l.part&&l.part.start||c&&c.start;if(c.timeline===n&&"undefined"!=typeof d){c=Math.abs(r-d);if(null!==s&&s<c)break;(!a||null===s||c<=s)&&(s=c,a={time:d,segmentIndex:l.segmentIndex,partIndex:l.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,i,n,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,c=e.discontinuities[l];if(c){l=Math.abs(r-c.time);if(null!==s&&s<l)break;(!a||null===s||l<=s)&&(s=l,a={time:c.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],Rl=function(i){function e(e){var t=i.call(this)||this;return t.timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=ro("SyncController"),t}mt(e,i);var t=e.prototype;return t.getSyncPoint=function(e,t,i,n){i=this.runStrategies_(e,t,i,n);return i.length?this.selectSyncPoint_(i,{key:"time",value:n}):null},t.getExpiredTime=function(e,t){if(!e||!e.segments)return null;t=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!t.length)return null;t=this.selectSyncPoint_(t,{key:"segmentIndex",value:0});return 0<t.segmentIndex&&(t.time*=-1),Math.abs(t.time+vo({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.segmentIndex,endIndex:0}))},t.runStrategies_=function(e,t,i,n){for(var r=[],a=0;a<Ol.length;a++){var s=Ol[a],o=s.run(this,e,t,i,n);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r},t.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<n&&(n=s,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+("number"==typeof i.partIndex?",partIndex:"+i.partIndex:"")+"]"),i},t.saveExpiredSegmentInfo=function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;0<=i;i--){var n=e.segments[i];if(n&&"undefined"!=typeof n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(e){var t;this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject&&(e=(t=e.segments[0]).dateTimeObject.getTime()/1e3,this.timelineToDatetimeMappings[t.timeline]=-e)},t.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,i=e.shouldSaveTimelineMapping,n=this.calculateSegmentTimeMapping_(t,t.timingInfo,i),e=t.segment;n&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:e.start}));t=e.dateTimeObject;e.discontinuity&&i&&t&&(this.timelineToDatetimeMappings[e.timeline]=-t.getTime()/1e3)},t.timestampOffsetForTimeline=function(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].time},t.mappingForTimeline=function(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].mapping},t.calculateSegmentTimeMapping_=function(e,t,i){var n,r,a=e.segment,s=e.part,o=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+o.time+"] [mapping: "+o.mapping+"]")),n=e.startOfSegment,r=t.end+o.mapping;else{if(!o)return!1;n=t.start+o.mapping,r=t.end+o.mapping}return s&&(s.start=n,s.end=r),(!a.start||n<a.start)&&(a.start=n),a.end=r,!0},t.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r,a=t.discontinuityStarts[n],s=t.discontinuitySequence+n+1,o=a-e.mediaIndex,u=Math.abs(o);(!this.discontinuities[s]||this.discontinuities[s].accuracy>u)&&(r=void 0,r=o<0?i.start-vo({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:a}):i.end+vo({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[s]={time:r,accuracy:u})}},t.dispose=function(){this.trigger("dispose"),this.off()},e}(Zn.EventTarget),Ml=function(t){function e(){var e=t.call(this)||this;return e.pendingTimelineChanges_={},e.lastTimelineChanges_={},e}mt(e,t);var i=e.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var t=e.type,i=e.from,e=e.to;return"number"==typeof i&&"number"==typeof e&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:e},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},i.lastTimelineChange=function(e){var t=e.type,i=e.from,e=e.to;return"number"==typeof i&&"number"==typeof e&&(this.lastTimelineChanges_[t]={type:t,from:i,to:e},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(Zn.EventTarget),Nl=ni(nr(z(function(){function e(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var t=e(function(e){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0}),i=e(function(i){function n(e,t){return i.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i.exports.default=i.exports,i.exports.__esModule=!0,n(e,t)}i.exports=n,i.exports.default=i.exports,i.exports.__esModule=!0}),n=e(function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0}),r=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;t=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(t){this.on("data",function(e){t.push(e)})},e}();
/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */
var c=null,m=function(){function e(e){var t,i,n;c=c||function(){for(var e,t,i,n,r,a,s,o=[[[],[],[],[],[]],[[],[],[],[],[]]],u=o[0],l=o[1],c=u[4],d=l[4],h=[],p=[],f=0;f<256;f++)p[(h[f]=f<<1^283*(f>>7))^f]=f;for(e=t=0;!c[e];e^=i||1,t=p[t]||1)for(s=16843009*h[n=h[i=h[d[c[e]=r=(r=t^t<<1^t<<2^t<<3^t<<4)>>8^255&r^99]=e]]]^65537*n^257*i^16843008*e,a=257*h[r]^16843008*r,f=0;f<4;f++)u[f][e]=a=a<<24^a>>>8,l[f][r]=s=s<<24^s>>>8;for(f=0;f<5;f++)u[f]=u[f].slice(0),l[f]=l[f].slice(0);return o}(),this._tables=[[c[0][0].slice(),c[0][1].slice(),c[0][2].slice(),c[0][3].slice(),c[0][4].slice()],[c[1][0].slice(),c[1][1].slice(),c[1][2].slice(),c[1][3].slice(),c[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],s=e.length,o=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var u=e.slice(0),l=[];for(this._key=[u,l],t=s;t<4*s+28;t++)n=u[t-1],(t%s==0||8===s&&t%s==4)&&(n=r[n>>>24]<<24^r[n>>16&255]<<16^r[n>>8&255]<<8^r[255&n],t%s==0&&(n=n<<8^n>>>24^o<<24,o=o<<1^283*(o>>7))),u[t]=u[t-s]^n;for(i=0;t;i++,t--)n=u[3&i?t:t-4],l[i]=t<=4||i<4?n:a[0][r[n>>>24]]^a[1][r[n>>16&255]]^a[2][r[n>>8&255]]^a[3][r[255&n]]}return e.prototype.decrypt=function(e,t,i,n,r,a){for(var s,o,u,l=this._key[1],c=e^l[0],d=n^l[1],h=i^l[2],p=t^l[3],f=l.length/4-2,m=4,t=this._tables[1],g=t[0],y=t[1],v=t[2],_=t[3],b=t[4],T=0;T<f;T++)s=g[c>>>24]^y[d>>16&255]^v[h>>8&255]^_[255&p]^l[m],o=g[d>>>24]^y[h>>16&255]^v[p>>8&255]^_[255&c]^l[m+1],u=g[h>>>24]^y[p>>16&255]^v[c>>8&255]^_[255&d]^l[m+2],p=g[p>>>24]^y[c>>16&255]^v[d>>8&255]^_[255&h]^l[m+3],m+=4,c=s,d=o,h=u;for(T=0;T<4;T++)r[(3&-T)+a]=b[c>>>24]<<24^b[d>>16&255]<<16^b[h>>8&255]<<8^b[255&p]^l[m++],s=c,c=d,d=h,h=p,p=s},e}(),l=function(t){function e(){var e=t.call(this,r)||this;return e.jobs=[],e.delay=1,e.timeout_=null,e}n(e,t);var i=e.prototype;return i.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(r),g=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},a=function(){function u(e,t,i,n){var r=u.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,i,s)),o=r;o<a.length;o+=r)i=new Uint32Array([g(a[o-4]),g(a[o-3]),g(a[o-2]),g(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,i,s));this.asyncStream_.push(function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var e;n(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))})}return u.prototype.decryptChunk_=function(t,i,n,r){return function(){var e=function(e,t,i){for(var n,r,a,s,o=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),u=new m(Array.prototype.slice.call(t)),e=new Uint8Array(e.byteLength),l=new Int32Array(e.buffer),c=i[0],d=i[1],h=i[2],p=i[3],f=0;f<o.length;f+=4)n=g(o[f]),r=g(o[f+1]),a=g(o[f+2]),s=g(o[f+3]),u.decrypt(n,r,a,s,l,f),l[f]=g(l[f]^c),l[f+1]=g(l[f+1]^d),l[f+2]=g(l[f+2]^h),l[f+3]=g(l[f+3]^p),c=n,d=r,h=a,p=s;return e}(t,i,n);r.set(e,t.byteOffset)}},t(u,null,[{key:"STEP",get:function(){return 32e3}}]),u}();self.onmessage=function(e){var r=e.data,t=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),i=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),e=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new a(t,i,e,function(e,t){var i,n;self.postMessage((i={source:r.source,decrypted:t},n={},Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n),[t.buffer])})}}))),Ul={AUDIO:function(s,o){return function(){var e=o.segmentLoaders[s],t=o.mediaTypes[s],i=o.blacklistCurrentPlaylist;hl(e,t);var n=t.activeTrack(),e=t.activeGroup(),e=(e.filter(function(e){return e.default})[0]||e[0]).id,r=t.tracks[e];if(n!==r){for(var a in Zn.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[a].enabled=t.tracks[a]===r;t.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,n){return function(){var e=n.segmentLoaders[i],t=n.mediaTypes[i];Zn.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),hl(e,t);e=t.activeTrack();e&&(e.mode="disabled"),t.onTrackChanged()}}},Bl={AUDIO:function(e,t,i){var n,r,a;t&&(n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",Ul[e](e,i)))},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",Ul[e](e,i))}},Fl={AUDIO:function(e,t){var i,n,r=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,d=l.tracks,h=l.logger_,p=t.masterPlaylistLoader,f=Io(p.master);for(i in u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}}),u[e])for(var m in c[i]||(c[i]=[]),u[e][i]){var g=u[e][i][m],y=void 0,y=f?(h("AUDIO group '"+i+"' label '"+m+"' is a master playlist"),g.isMasterPlaylist=!0,null):"vhs-json"===a&&g.playlists?new Hu(g.playlists[0],r,o):g.resolvedUri?new Hu(g.resolvedUri,r,o):g.playlists&&"dash"===a?new zu(g.playlists[0],r,o,p):null,g=Zn.mergeOptions({id:m,playlistLoader:y},g);Bl[e](e,g.playlistLoader,t),c[i].push(g),"undefined"==typeof d[m]&&(g=new Zn.AudioTrack({id:m,kind:(n=void 0,n=(y=g).default?"main":"alternative",n=y.characteristics&&0<=y.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":n),enabled:!1,language:g.language,default:g.default,label:m}),d[m]=g)}s.on("error",Ul[e](e,t))},SUBTITLES:function(e,t){var i,n=t.tech,r=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,d=l.tracks,h=t.masterPlaylistLoader;for(i in u[e])for(var p in c[i]||(c[i]=[]),u[e][i])if(!u[e][i][p].forced){var f=u[e][i][p],m=void 0;if("hls"===a)m=new Hu(f.resolvedUri,r,o);else if("dash"===a){if(!f.playlists.filter(function(e){return e.excludeUntil!==1/0}).length)return;m=new zu(f.playlists[0],r,o,h)}else"vhs-json"===a&&(m=new Hu(f.playlists?f.playlists[0]:f.resolvedUri,r,o));f=Zn.mergeOptions({id:p,playlistLoader:m},f),Bl[e](e,f.playlistLoader,t),c[i].push(f),"undefined"==typeof d[p]&&(f=n.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track,d[p]=f)}s.on("error",Ul[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i,n=t.tech,r=t.master.mediaGroups,t=t.mediaTypes[e],a=t.groups,s=t.tracks;for(i in r[e])for(var o in a[i]||(a[i]=[]),r[e][i]){var u,l,c=r[e][i][o];/^(?:CC|SERVICE)/.test(c.instreamId)&&(void 0===(l=(u=n.options_.vhs&&n.options_.vhs.captionServices||{})[(l={label:o,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect}).instreamId]?Zn.mergeOptions(l,u[l.instreamId]):l).default&&delete l.default,a[i].push(Zn.mergeOptions({id:o},c)),"undefined"==typeof s[o]&&(l=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default,language:l.language,label:l.label},!1).track,s[o]=l))}}},jl={AUDIO:function(i,n){return function(){var e,t=n.mediaTypes[i].tracks;for(e in t)if(t[e].enabled)return t[e];return null}},SUBTITLES:function(i,n){return function(){var e,t=n.mediaTypes[i].tracks;for(e in t)if("showing"===t[e].mode||"hidden"===t[e].mode)return t[e];return null}}},Hl=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],ql=function(g){function e(e){var t,i=g.call(this)||this,n=e.src,r=e.handleManifestRedirects,a=e.withCredentials,s=e.tech,o=e.bandwidth,u=e.externVhs,l=e.useCueTags,c=e.maxPlaylistRetries,d=e.blacklistDuration,h=e.enableLowInitialPlaylist,p=e.sourceType,f=e.cacheEncryptionKeys,m=e.experimentalBufferBasedABR;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");vl=u,i.experimentalBufferBasedABR=Boolean(m),i.withCredentials=a,i.tech_=s,i.vhs_=s.vhs,i.sourceType_=p,i.useCueTags_=l,i.blacklistDuration=d,i.maxPlaylistRetries=c,i.enableLowInitialPlaylist=h,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,handleManifestRedirects:r,maxPlaylistRetries:c,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:nl,activeTrack:nl,getActiveGroup:nl,onGroupChanged:nl,onTrackChanged:nl,lastTrack_:null,logger_:ro("MediaGroups["+e+"]")}}),t),i.mediaSource=new _.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(ft(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(ft(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(ft(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Zn.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new Rl(e),i.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Nl,i.sourceUpdater_=new Pl(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new Ml;f={vhs:i.vhs_,parse708captions:e.parse708captions,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:o,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:f,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_};i.masterPlaylistLoader_=new("dash"===i.sourceType_?zu:Hu)(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new il(Zn.mergeOptions(f,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e),i.audioSegmentLoader_=new il(Zn.mergeOptions(f,{loaderType:"audio"}),e),i.subtitleSegmentLoader_=new Dl(Zn.mergeOptions(f,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),e),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),Hl.forEach(function(e){i[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(ft(i),e)}),i.logger_=ro("MPC"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;e="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one(e,function(){var e=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-e,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}mt(e,g);var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(){var e=this.selectPlaylist();this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},t.switchMedia_=function(e,t,i){var n=this.media(),r=n&&(n.id||n.uri),n=e.id||e.uri;r&&r!==n&&(this.logger_("switch media "+r+" -> "+n+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,i)},t.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=_.setInterval(function(){return e.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(_.clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var e=this.master();if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return e&&e.playlists||[];var t,i=e.mediaGroups.AUDIO,e=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)t=this.mediaTypes_.AUDIO.activeTrack();else{var n,r=i.main||e.length&&i[e[0]];for(n in r)if(r[n].default){t={label:n};break}}if(!t)return[];var a,s,o=[];for(a in i)i[a][t.label]&&((s=i[a][t.label]).playlists?o.push.apply(o,s.playlists):o.push(s));return o},t.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;ko(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,e.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load()),ml({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),e),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var e,t=i.masterPlaylistLoader_.media();if(!t){if(i.excludeUnsupportedVariants_(),!(e=(e=i.enableLowInitialPlaylist?i.selectInitialPlaylist():e)||i.selectPlaylist())||!i.shouldSwitchToMedia_(e))return;if(i.initialMedia_=e,i.switchMedia_(i.initialMedia_,"initial"),!("vhs-json"===i.sourceType_&&i.initialMedia_.segments))return;t=i.initialMedia_}i.handleUpdatedMediaPlaylist(t)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;ko(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=i.masterPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&i.stuckAtPlaylistEnd_(e)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(e,t){var i,n=e.mediaGroups||{},r=!0,e=Object.keys(n.AUDIO);for(i in n.AUDIO)for(var a in n.AUDIO[i])n.AUDIO[i][a].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),vl.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&1<Object.keys(n.AUDIO[e[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media(),i=this.tech_.buffered();return function(e){var t=e.currentPlaylist,i=e.nextPlaylist,n=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.bufferHighWaterLine,s=e.duration,o=e.experimentalBufferBasedABR,u=e.log;if(!i)return Zn.log.warn("We received no playlist to switch to. Please check your stream."),!1;var l="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t||!t.endList)return u(l+" as current playlist "+(t?"is live":"is not set")),!0;if(i.id===t.id)return!1;e=o?Gu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Gu.MAX_BUFFER_LOW_WATER_LINE;if(s<e)return u(l+" as duration < max low water line ("+s+" < "+e+")"),!0;e=i.attributes.BANDWIDTH,i=t.attributes.BANDWIDTH;if(e<i&&(!o||n<a)){t=l+" as next bandwidth < current bandwidth ("+e+" < "+i+")";return o&&(t+=" and forwardBuffer < bufferHighWaterLine ("+n+" < "+a+")"),u(t),!0}if((!o||i<e)&&r<=n){r=l+" as forwardBuffer >= bufferLowWaterLine ("+n+" >= "+r+")";return o&&(r+=" and next bandwidth > current bandwidth ("+e+" > "+i+")"),u(r),!0}return u("not "+l+" as no switching criteria met"),!1}({currentPlaylist:t,nextPlaylist:e,forwardBuffer:i.length?i.end(i.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist();t.shouldSwitchToMedia_(e)&&t.switchMedia_(e,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(e){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});function e(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var e=t.getCodecsOrExclude_();e&&t.sourceUpdater_.addOrChangeSourceBuffers(e)}this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},t.fastQualityChange_=function(e){var t=this;(e=void 0===e?this.selectPlaylist():e)!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){Zn.browser.IE_VERSION||Zn.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},t.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(Zn.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){var e;this.tryToCreateSourceBuffers_(),!this.tech_.autoplay()||"undefined"!=typeof(e=this.tech_.play())&&"function"==typeof e.then&&e.then(null,function(e){}),this.trigger("sourceopen")},t.handleSourceEnded_=function(){var e,t;!this.inbandTextTracks_.metadataTrack_||(e=this.inbandTextTracks_.metadataTrack_.cues)&&e.length&&(t=this.duration(),e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t)},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;(e=this.mediaTypes_.AUDIO.activePlaylistLoader?(this.mainSegmentLoader_.currentMediaInfo_&&!this.mainSegmentLoader_.currentMediaInfo_.hasVideo||e)&&this.audioSegmentLoader_.ended_:e)&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var i=vl.Playlist.playlistEnd(e,t),e=this.tech_.currentTime(),t=this.tech_.buffered();if(!t.length)return i-e<=.1;t=t.end(t.length-1);return t-e<=.1&&i-t<=.1},t.blacklistCurrentPlaylist=function(e,t){var i=(e=void 0===e?{}:e).playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!i)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));i.playlistErrors_++;var n,r=this.masterPlaylistLoader_.master.playlists,a=r.filter(So),s=1===a.length&&a[0]===i;if(1===r.length&&t!==1/0)return Zn.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);s&&(n=!1,r.forEach(function(e){var t;e===i||"undefined"!=typeof(t=e.excludeUntil)&&t!==1/0&&(n=!0,delete e.excludeUntil)}),n&&(Zn.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))),a=i.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,i.excludeUntil=a,e.reason&&(i.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});r=this.selectPlaylist();if(!r)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");t=e.internal?this.logger_:Zn.log.warn,a=e.message?" "+e.message:"";t((e.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+a+" Switching to playlist "+r.id+"."),r.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),r.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);a=r.targetDuration/2*1e3||5e3,a="number"==typeof r.lastRequest&&Date.now()-r.lastRequest<=a;return this.switchMedia_(r,"exclude",s||a)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(i,e){var n=this,r=[],t="all"===i;!t&&"main"!==i||r.push(this.masterPlaylistLoader_);var a=[];!t&&"audio"!==i||a.push("AUDIO"),!t&&"subtitle"!==i||(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(function(e){e=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;e&&r.push(e)}),["main","audio","subtitle"].forEach(function(e){var t=n[e+"SegmentLoader_"];!t||i!==e&&"all"!==i||r.push(t)}),r.forEach(function(t){return e.forEach(function(e){"function"==typeof t[e]&&t[e]()})})},t.setCurrentTime=function(e){var t=so(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:vl.Playlist.duration(e):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.duration());if(null!==i){var n,r,a=this.masterPlaylistLoader_.master,s=vl.Playlist.seekable(t,i,vl.Playlist.liveEdgeDelay(a,t));if(0!==s.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=vl.Playlist.seekable(t,i,vl.Playlist.liveEdgeDelay(a,t))).length)return}this.seekable_&&this.seekable_.length&&(n=this.seekable_.end(0),r=this.seekable_.start(0)),!e||e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=Zn.createTimeRanges([[(e.start(0)>s.start(0)?e:s).start(0),(e.end(0)<s.end(0)?e:s).end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===n&&this.seekable_.start(0)===r||(this.logger_("seekable updated ["+uo(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},t.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();return t.length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))):void 0}e=this.tech_.buffered(),t=vl.Playlist.duration(this.masterPlaylistLoader_.media());0<e.length&&(t=Math.max(t,e.end(e.length-1))),this.mediaSource.duration!==t&&this.sourceUpdater_.setDuration(t)},t.dispose=function(){var n=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(e){var t,i=n.mediaTypes_[e].groups;for(t in i)i[t].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||e&&!this.audioSegmentLoader_.currentMediaInfo_)},t.getCodecsOrExclude_=function(){var n=this,r={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};r.video=r.main;var e=_u(this.master(),this.media()),a={},t=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(r.main.hasVideo&&(a.video=e.video||r.main.videoCodec||"avc1.4d400d"),r.main.isMuxed&&(a.video+=","+(e.audio||r.main.audioCodec||kr)),(r.main.hasAudio&&!r.main.isMuxed||r.audio.hasAudio||t)&&(a.audio=e.audio||r.main.audioCodec||r.audio.audioCodec||kr,r.audio.isFmp4=(r.main.hasAudio&&!r.main.isMuxed?r.main:r.audio).isFmp4),a.audio||a.video){var s,i,o={};if(["video","audio"].forEach(function(e){var t,i;a.hasOwnProperty(e)&&(t=r[e].isFmp4,i=a[e],!(t?fr:mr)(i))&&(i=r[e].isFmp4?"browser":"muxer",o[i]=o[i]||[],o[i].push(a[e]),"audio"===e&&(s=i))}),t&&s&&this.media().attributes.AUDIO&&(i=this.media().attributes.AUDIO,this.master().playlists.forEach(function(e){(e.attributes&&e.attributes.AUDIO)===i&&e!==n.media()&&(e.excludeUntil=1/0)}),this.logger_("excluding audio group "+i+" as "+s+' does not support codec(s): "'+a.audio+'"')),!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach(function(e){var t=(dr(n.sourceUpdater_.codecs[e]||"")[0]||{}).type,i=(dr(a[e]||"")[0]||{}).type;t&&i&&t.toLowerCase()!==i.toLowerCase()&&u.push('"'+n.sourceUpdater_.codecs[e]+'" -> "'+a[e]+'"')}),u.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return a}t=Object.keys(o).reduce(function(e,t){return e&&(e+=", "),e+=t+' does not support codec(s): "'+o[t].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:t,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},t.tryToCreateSourceBuffers_=function(){var e;"open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_()||(e=this.getCodecsOrExclude_())&&(this.sourceUpdater_.createSourceBuffers(e),e=[e.video,e.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(e))},t.excludeUnsupportedVariants_=function(){var n=this,r=this.master().playlists,a=[];Object.keys(r).forEach(function(e){var t,i=r[e];-1===a.indexOf(i.id)&&(a.push(i.id),t=[],!(e=_u(n.master,i)).audio||mr(e.audio)||fr(e.audio)||t.push("audio codec "+e.audio),!e.video||mr(e.video)||fr(e.video)||t.push("video codec "+e.video),e.text&&"stpp.ttml.im1t"===e.text&&t.push("text codec "+e.text),t.length&&(i.excludeUntil=1/0,n.logger_("excluding "+i.id+" for unsupported: "+t.join(", "))))})},t.excludeIncompatibleVariants_=function(e){var r=this,a=[],s=this.master().playlists,e=yu(dr(e)),o=vu(e),u=e.video&&dr(e.video)[0]||null,l=e.audio&&dr(e.audio)[0]||null;Object.keys(s).forEach(function(e){var t,i,n=s[e];-1===a.indexOf(n.id)&&n.excludeUntil!==1/0&&(a.push(n.id),t=[],i=_u(r.masterPlaylistLoader_.master,n),e=vu(i),(i.audio||i.video)&&(e!==o&&t.push('codec count "'+e+'" !== "'+o+'"'),r.sourceUpdater_.canChangeType()||(e=i.video&&dr(i.video)[0]||null,i=i.audio&&dr(i.audio)[0]||null,e&&u&&e.type.toLowerCase()!==u.type.toLowerCase()&&t.push('video codec "'+e.type+'" !== "'+u.type+'"'),i&&l&&i.type.toLowerCase()!==l.type.toLowerCase()&&t.push('audio codec "'+i.type+'" !== "'+l.type+'"')),t.length&&(n.excludeUntil=1/0,r.logger_("blacklisting "+n.id+": "+t.join(" && ")))))})},t.updateAdCues_=function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t,i){if(void 0===i&&(i=0),e.segments)for(var n=i,r=0;r<e.segments.length;r++){var a,s,o,u=e.segments[r];if(o=o||function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null}(t,n+u.duration/2)){if("cueIn"in u){o.endTime=n,o.adEndTime=n,n+=u.duration,o=null;continue}if(n<o.endTime){n+=u.duration;continue}o.endTime+=u.duration}else"cueOut"in u&&((o=new _.VTTCue(n,n+u.duration,u.cueOut)).adStartTime=n,o.adEndTime=n+parseFloat(u.cueOut),t.addCue(o)),"cueOutCont"in u&&(a=(s=u.cueOutCont.split("/").map(parseFloat))[0],s=s[1],(o=new _.VTTCue(n,n+u.duration,"")).adStartTime=n-a,o.adEndTime=o.adStartTime+s,t.addCue(o));n+=u.duration}}(e,this.cueTagsTrack_,t)},t.goalBufferLength=function(){var e=this.tech_.currentTime(),t=Gu.GOAL_BUFFER_LENGTH,i=Gu.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Gu.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},t.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=Gu.BUFFER_LOW_WATER_LINE,i=Gu.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Gu.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,Gu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.experimentalBufferBasedABR?r:n)},t.bufferHighWaterLine=function(){return Gu.BUFFER_HIGH_WATER_LINE},e}(Zn.EventTarget),Vl=["seeking","seeked","pause","playing","error"],Wl=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=ro("PlaybackWatcher"),this.logger_("initialize");function i(){return t.monitorCurrentTime_()}function n(){return t.monitorCurrentTime_()}function r(){return t.techWaiting_()}function a(){return t.cancelTimer_()}function s(){return t.fixesBadSeeks_()}var o=this.masterPlaylistController_,u=["main","subtitle","audio"],l={};u.forEach(function(e){l[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},o[e+"SegmentLoader_"].on("appendsdone",l[e].updateend),o[e+"SegmentLoader_"].on("playlistupdate",l[e].reset),t.tech_.on(["seeked","seeking"],l[e].reset)}),this.tech_.on("seekablechanged",s),this.tech_.on("waiting",r),this.tech_.on(Vl,a),this.tech_.on("canplay",n),this.tech_.one("play",i),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",s),t.tech_.off("waiting",r),t.tech_.off(Vl,a),t.tech_.off("canplay",n),t.tech_.off("play",i),u.forEach(function(e){o[e+"SegmentLoader_"].off("appendsdone",l[e].updateend),o[e+"SegmentLoader_"].off("playlistupdate",l[e].reset),t.tech_.off(["seeked","seeking"],l[e].reset)}),t.checkCurrentTimeTimeout_&&_.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&_.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=_.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];0<this[e+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,i=t[e+"SegmentLoader_"],n=i.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:lo(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),"undefined"!=typeof(e=this.beforeSeekableWindow_(t,i)?(r=t.start(0))+(r===t.end(0)?0:.1):e))return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+uo(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;var n,r,a=this.tech_.buffered();return n={buffered:a,targetDuration:this.media().targetDuration,currentTime:i},r=n.buffered,t=n.targetDuration,n=n.currentTime,!(!r.length||r.end(0)-r.start(0)<2*t||n>r.start(0))&&r.start(0)-n<t&&(e=a.start(0)+.1,this.logger_("Buffered region starts ("+a.start(0)+")  just beyond seek point ("+i+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){var e,t;this.techWaiting_()||(e=this.tech_.currentTime(),t=this.tech_.buffered(),(t=so(t,e)).length&&e+3<=t.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})))},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}e=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:e.audioBuffered(),videoBuffered:e.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;e=oo(i,t);if(0<e.length){i=e.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+i+", seeking to "+e.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*i,t),!0}return!1},t.afterSeekableWindow_=function(e,t,i,n){if(void 0===n&&(n=!1),!e.length)return!1;var r=e.end(e.length-1)+.1;return(r=!i.endList&&n?e.end(e.length-1)+3*i.targetDuration:r)<t},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t,i,n=e.videoBuffered,r=e.audioBuffered,a=e.currentTime;if(n)return n.length&&r.length?(i=so(n,a-3),e=so(n,a),(r=so(r,a)).length&&!e.length&&i.length&&(t={start:i.end(0),end:r.end(0)})):oo(n,a).length||(t=this.gapFromVideoUnderflow_(n,a)),!!t&&(this.logger_("Encountered a gap in video from "+t.start+" to "+t.end+". Seeking to current time "+a),!0)},t.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),t=oo(t,i);this.cancelTimer_(),0!==t.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",t.start(0)),this.tech_.setCurrentTime(t.start(0)+Nu),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return Zn.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return Zn.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),a=i.end(n);if(t-r<4&&2<t-r)return{start:r,end:a}}return null},e}(),zl={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},z=function(e){yl(this,e)},Gl={PlaylistLoader:Hu,Playlist:Bu,utils:ii,STANDARD_PLAYLIST_SELECTOR:zt,INITIAL_PLAYLIST_SELECTOR:function(){var t=this,e=this.playlists.master.playlists.filter(Bu.isEnabled);return Su(e,Eu),e.filter(function(e){return!!_u(t.playlists.master,e).video})[0]||null},lastBandwidthSelector:zt,movingAverageBandwidthSelector:function(t){var i=-1;if(t<0||1<t)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&_.devicePixelRatio||1;return i<0&&(i=this.systemBandwidth),i=t*this.systemBandwidth+(1-t)*i,ku(this.playlists.master,i,parseInt(Tu(this.tech_.el(),"width"),10)*e,parseInt(Tu(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Eu,comparePlaylistResolution:function(e,t){var i,n;return(i=(i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width?e.attributes.RESOLUTION.width:i)||_.Number.MAX_VALUE)===(n=(n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width?t.attributes.RESOLUTION.width:n)||_.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},xhr:Fo()};Object.keys(Gu).forEach(function(t){Object.defineProperty(Gl,t,{get:function(){return Zn.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),Gu[t]},set:function(e){Zn.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?Zn.log.warn("value of Vhs."+t+" must be greater than or equal to 0"):Gu[t]=e}})});function Xl(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})}var Kl="videojs-vhs";Gl.canPlaySource=function(){return Zn.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};function Yl(e){var n=e.player,t=e.sourceKeySystems,i=e.audioMedia,e=e.mainPlaylists;if(!n.eme.initializeMediaKeys)return Promise.resolve();var r,e=(e=e=i?e.concat([i]):e,r=Object.keys(t),e.reduce(function(e,n){if(!n.contentProtection)return e;var t=r.reduce(function(e,t){var i=n.contentProtection[t];return i&&i.pssh&&(e[t]={pssh:i.pssh}),e},{});return Object.keys(t).length&&e.push(t),e},[])),a=[],s=[];return e.forEach(function(e){s.push(new Promise(function(e,t){n.tech_.one("keysessioncreated",e)})),a.push(new Promise(function(t,i){n.eme.initializeMediaKeys({keySystems:e},function(e){e?i(e):t()})}))}),Promise.race([Promise.all(a),Promise.race(s)])}function Ql(e){var t=e.player;return!!(e=function(e,t,i){if(!e)return e;var n={};t&&t.attributes&&t.attributes.CODECS&&(n=yu(dr(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);var r,a=pr(n.video),s=pr(n.audio),o={};for(r in e)o[r]={},s&&(o[r].audioContentType=s),a&&(o[r].videoContentType=a),t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(o[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(o[r].url=e[r]);return Zn.mergeOptions(e,o)}(e.sourceKeySystems,e.media,e.audioMedia))&&(!((t.currentSource().keySystems=e)&&!t.eme)||(Zn.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))}function $l(){if(!_.localStorage)return null;var e=_.localStorage.getItem(Kl);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}Gl.supportsNativeHls=function(){if(!d||!d.createElement)return!1;var t=d.createElement("video");if(!Zn.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}(),Gl.supportsNativeDash=!!(d&&d.createElement&&Zn.getTech("Html5").isSupported())&&/maybe|probably/i.test(d.createElement("video").canPlayType("application/dash+xml")),Gl.supportsTypeNatively=function(e){return"hls"===e?Gl.supportsNativeHls:"dash"===e&&Gl.supportsNativeDash},Gl.isSupported=function(){return Zn.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Jl=function(r){function e(e,t,i){var n=r.call(this,t,Zn.mergeOptions(i.hls,i.vhs))||this;if(i.hls&&Object.keys(i.hls).length&&Zn.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof i.initialBandwidth&&(n.options_.bandwidth=i.initialBandwidth),n.logger_=ro("VhsHandler"),t.options_&&t.options_.playerId&&((i=Zn(t.options_.playerId)).hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return Zn.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),ft(n)},configurable:!0}),i.hasOwnProperty("vhs")||Object.defineProperty(i,"vhs",{get:function(){return Zn.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),ft(n)},configurable:!0}),i.hasOwnProperty("dash")||Object.defineProperty(i,"dash",{get:function(){return Zn.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),ft(n)},configurable:!0}),n.player_=i),n.tech_=t,n.source_=e,n.stats={},n.ignoreNextSeekingEvent_=!1,n.setOptions_(),n.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(n.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return n.on(d,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement;t&&t.contains(n.tech_.el())?n.masterPlaylistController_.fastQualityChange_():n.masterPlaylistController_.checkABR_()}),n.on(n.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),n.on(n.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),n.on(n.tech_,"play",n.play),n}mt(e,r);var t=e.prototype;return t.setOptions_=function(){var e,t=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((e=$l())&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Gu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Gu.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS"].forEach(function(e){"undefined"!=typeof t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(e,t){var n=this;e&&(this.setOptions_(),this.options_.src=0===(e=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e,this.options_.tech=this.tech_,this.options_.externVhs=Gl,this.options_.sourceType=gr(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&Zn.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new ql(this.options_),t=Zn.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new Wl(t),this.masterPlaylistController_.on("error",function(){var e=Zn.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}),t=this.options_.experimentalBufferBasedABR?Gl.movingAverageBandwidthSelector(.55):Gl.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=(this.selectPlaylist||t).bind(this),this.masterPlaylistController_.selectInitialPlaylist=Gl.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=0<this.throughput?1/this.throughput:0;return Math.floor(1/(e+t))},set:function(){Zn.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return lo(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return lo(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!_.localStorage)return;var t=(t=$l())?Zn.mergeOptions(t,e):e;try{_.localStorage.setItem(Kl,JSON.stringify(t))}catch(e){return}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var i;(i=n).representations=function(){var e=i.masterPlaylistController_.master(),e=Io(e)?i.masterPlaylistController_.getAudioTrackPlaylists_():e.playlists;return e?e.filter(function(e){return!To(e)}).map(function(e,t){return new gl(i,e,e.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){n.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=_.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))},t.setupEme_=function(){var t=this,e=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=Ql({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});11!==Zn.browser.IE_VERSION&&i?(this.logger_("waiting for EME key session creation"),Yl({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(e){t.logger_("error while creating EME key session",e),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},t.setupQualityLevels_=function(){var i=this,e=Zn.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;t=i.qualityLevels_,(e=i).representations().forEach(function(e){t.addQualityLevel(e)}),Xl(t,e.playlists)}),this.playlists.on("mediachange",function(){Xl(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":"2.9.0","mux.js":"5.11.0","mpd-parser":"0.17.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return Pl.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&_.URL.revokeObjectURL&&(_.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),r.prototype.dispose.call(this)},t.convertToProgramTime=function(e,t){return Xo({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},t.seekToProgramTime=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),Ko({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},e}(Zn.getComponent("Component")),Zl={name:"videojs-http-streaming",VERSION:"2.9.0",canHandleSource:function(e,t){t=Zn.mergeOptions(Zn.options,t=void 0===t?{}:t);return Zl.canPlayType(e.type,t)},handleSource:function(e,t,i){i=Zn.mergeOptions(Zn.options,i=void 0===i?{}:i);return t.vhs=new Jl(e,t,i),Zn.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Zn.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Fo(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){t=Zn.mergeOptions(Zn.options,t=void 0===t?{}:t).vhs.overrideNative,t=void 0===t?!Zn.browser.IS_ANY_SAFARI:t,e=gr(e);return e&&(!Gl.supportsTypeNatively(e)||t)?"maybe":""}};return fr("avc1.4d400d,mp4a.40.2")&&Zn.getTech("Html5").registerSourceHandler(Zl,0),Zn.VhsHandler=Jl,Object.defineProperty(Zn,"HlsHandler",{get:function(){return Zn.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Jl},configurable:!0}),Zn.VhsSourceHandler=Zl,Object.defineProperty(Zn,"HlsSourceHandler",{get:function(){return Zn.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Zl},configurable:!0}),Zn.Vhs=Gl,Object.defineProperty(Zn,"Hls",{get:function(){return Zn.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Gl},configurable:!0}),Zn.use||(Zn.registerComponent("Hls",Gl),Zn.registerComponent("Vhs",Gl)),Zn.options.vhs=Zn.options.vhs||{},Zn.options.hls=Zn.options.hls||{},Zn.registerPlugin?Zn.registerPlugin("reloadSourceOnError",z):Zn.plugin("reloadSourceOnError",z),Zn});
(function(h, o, g) {
    var p = function() {
        for (var b = /audio(.min)?.js.*/, a = document.getElementsByTagName("script"), c = 0, d = a.length; c < d; c++) {
            var e = a[c].getAttribute("src");
            if (b.test(e)) return e.replace(b, "")
        }
    }();
    g[h] = {
        instanceCount: 0,
        instances: {},
        flashSource: '      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance=' + h + '.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance=' +
            h + '.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',
        settings: {
            autoplay: false,
            loop: false,
            preload: true,
            imageLocation: p + "player-graphics.gif",
            swfLocation: p + "audiojs.swf",
            useFlash: function() {
                var b = document.createElement("audio");
                return !(b.canPlayType && b.canPlayType("audio/mpeg;").replace(/no/, ""))
            }(),
            hasFlash: function() {
                if (navigator.plugins && navigator.plugins.length && navigator.plugins["Shockwave Flash"]) return true;
                else if (navigator.mimeTypes && navigator.mimeTypes.length) {
                    var b =
                        navigator.mimeTypes["application/x-shockwave-flash"];
                    return b && b.enabledPlugin
                } else try {
                    new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                    return true
                } catch (a) {}
                return false
            }(),
            createPlayer: {
                markup: '          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div><div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>                      <div class="error-message"></div>',
                playPauseClass: "play-pause",
                scrubberClass: "scrubber",
                progressClass: "progress",
                loaderClass: "loaded",
                timeClass: "time",
                durationClass: "duration",
                playedClass: "played",
                errorMessageClass: "error-message",
                playingClass: "playing",
                loadingClass: "loading",
                errorClass: "error"
            },
            css: '        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 38px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 30px; padding: 0px 15px; margin: 0px; line-height: 35px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 30px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 30px; line-height: 50px; font-size: 14px; margin: 4px 0px; padding: 0px 20px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',
            trackEnded: function() {},
            flashError: function() {
                var b = this.settings.createPlayer,
                    a = j(b.errorMessageClass, this.wrapper),
                    c = 'Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';
                if (this.mp3) c += ' <a href="' + this.mp3 + '">Download audio file</a>.';
                g[h].helpers.removeClass(this.wrapper, b.loadingClass);
                g[h].helpers.addClass(this.wrapper, b.errorClass);
                a.innerHTML = c
            },
            loadError: function() {
                var b = this.settings.createPlayer,
                    a = j(b.errorMessageClass, this.wrapper);
                g[h].helpers.removeClass(this.wrapper,
                    b.loadingClass);
                g[h].helpers.addClass(this.wrapper, b.errorClass);
                a.innerHTML = 'Error loading: "' + this.mp3 + '"'
            },
            init: function() {
                g[h].helpers.addClass(this.wrapper, this.settings.createPlayer.loadingClass)
            },
            loadStarted: function() {
                var b = this.settings.createPlayer,
                    a = j(b.durationClass, this.wrapper),
                    c = Math.floor(this.duration / 60),
                    d = Math.floor(this.duration % 60);
                g[h].helpers.removeClass(this.wrapper, b.loadingClass);
                if (c === Infinity) {
                    c = 0;
                    d = 0;
                }
                a.innerHTML = (c < 10 ? "0" : "") + c + ":" + (d < 10 ? "0" : "") + d
            },
            loadProgress: function(b) {
                var a = this.settings.createPlayer,
                    c = j(a.scrubberClass, this.wrapper);
                // j(a.loaderClass, this.wrapper).style.width = c.offsetWidth * b + "px"
            },
            playPause: function() {
                this.playing ? this.settings.play() : this.settings.pause()
            },
            play: function() {
                $(".component-holder div.audiojs").removeClass(this.settings.createPlayer.playingClass)
                g[h].helpers.addClass(this.wrapper, this.settings.createPlayer.playingClass)
            },
            pause: function() {
                g[h].helpers.removeClass(this.wrapper, this.settings.createPlayer.playingClass)
            },
            updatePlayhead: function(b) {
                var a = this.settings.createPlayer,
                    c = j(a.scrubberClass, this.wrapper);
                    if(j(a.progressClass, this.wrapper).length > 1){
                        j(a.progressClass, this.wrapper)[0].style.width =  c.offsetWidth * b + "px";
                    }else{
                        j(a.progressClass, this.wrapper).style.width = c.offsetWidth * b + "px";
                    }
                
                a = j(a.playedClass, this.wrapper);
                c = this.duration * b;
                if (this.duration === Infinity) {
                    c = 0;
                }
                b = Math.floor(c / 60);
                c = Math.floor(c % 60);
                a.innerHTML = (b < 10 ? "0" : "") + b + ":" + (c < 10 ? "0" : "") + c
            }
        },
        create: function(b, a) {
            a = a || {};
            return b.length ? this.createAll(a, b) : this.newInstance(b, a)
        },
        createAll: function(b, a) {
            var c = a || document.getElementsByTagName("audio"),
                d = [];
            b = b || {};
            for (var e = 0, i = c.length; e < i; e++) d.push(this.newInstance(c[e], b));
            return d
        },
        newInstance: function(b, a) {
            var c = this.helpers.clone(this.settings),
                d = "audiojs" + this.instanceCount,
                e = "audiojs_wrapper" + this.instanceCount;
            this.instanceCount++;
            if (b.getAttribute("autoplay") != null) c.autoplay = true;
            if (b.getAttribute("loop") != null) c.loop = true;
            if (b.getAttribute("preload") == "none") c.preload = false;
            a && this.helpers.merge(c, a);
            if (c.createPlayer.markup) b = this.createPlayer(b, c.createPlayer, e);
            else b.parentNode.setAttribute("id", e);
            e = new g[o](b, c);
            c.css && this.helpers.injectCss(e, c.css);
            if (c.useFlash && c.hasFlash) {
                this.injectFlash(e, d);
                this.attachFlashEvents(e.wrapper, e)
            } else c.useFlash && !c.hasFlash &&
                this.settings.flashError.apply(e);
            if (!c.useFlash || c.useFlash && c.hasFlash) this.attachEvents(e.wrapper, e);
            return this.instances[d] = e
        },
        createPlayer: function(b, a, c) {
            var d = document.createElement("div"),
                e = b.cloneNode(true);
            d.setAttribute("class", "audiojs");
            d.setAttribute("className", "audiojs");
            d.setAttribute("id", c);
            d.innerHTML = a.markup;
            b.parentNode ? b.parentNode.insertBefore(d, b) : '';
            d.insertBefore(b, d.firstChild);
            return d.getElementsByTagName("audio")[0]
        },
        attachEvents: function(b, a) {
            if (a.settings.createPlayer) {
                var c = a.settings.createPlayer,
                    d = j(c.playPauseClass, b),
                    e = j(c.scrubberClass, b);
                g[h].events.addListener(d, "click", function() {
                    if (!$(a.element).closest('.audiojs').hasClass('playing')) {
                        a.playing = false
                    }
                    a.playPause.apply(a)
                });
                g[h].events.addListener(e, "click", function(i) {
                    i = i.clientX;
                    var f = this,
                        k = 0;
                    if (f.offsetParent) {
                        do k += f.offsetLeft; while (f = f.offsetParent)
                    }
                    a.skipTo((i - k) / e.offsetWidth)
                });
                if (!a.settings.useFlash) {
                    g[h].events.trackLoadProgress(a);
                    g[h].events.addListener(a.element, "timeupdate", function() {
                        a.updatePlayhead.apply(a)
                    });
                    g[h].events.addListener(a.element, "ended", function() {
                        a.trackEnded.apply(a)
                    });
                    g[h].events.addListener(a.source, "error", function() {
                        clearInterval(a.readyTimer);
                        clearInterval(a.loadTimer);
                        a.settings.loadError.apply(a)
                    })
                }
            }
        },
        attachFlashEvents: function(b, a) {
            a.swfReady = false;
            a.load = function(c) {
                a.mp3 = c;
                a.swfReady && a.element.load(c)
            };
            a.loadProgress = function(c, d) {
                a.loadedPercent = c;
                a.duration = d;
                a.settings.loadStarted.apply(a);
                a.settings.loadProgress.apply(a, [c])
            };
            a.skipTo = function(c) {
             
                    a.updatePlayhead.call(a, [c]);
                    a.element.skipTo(c)
               
            };
            a.updatePlayhead = function(c) {
                a.settings.updatePlayhead.apply(a, [c])
            };
            a.play = function() {
                if (!a.settings.preload) {
                    a.settings.preload = true;
                    a.element.init(a.mp3)
                }
                a.playing = true;
                a.element.pplay();
                a.settings.play.apply(a)
            };
            a.pause = function() {
                a.playing = false;
                a.element.ppause();
                a.settings.pause.apply(a)
            };
            a.setVolume = function(c) {
                a.element.setVolume(c)
            };
            a.loadStarted = function() {
                a.swfReady =
                    true;
                a.settings.preload && a.element.init(a.mp3);
                a.settings.autoplay && a.play.apply(a)
            }
        },
        injectFlash: function(b, a) {
            var c = this.flashSource.replace(/\$1/g, a);
            c = c.replace(/\$2/g, b.settings.swfLocation);
            c = c.replace(/\$3/g, +new Date + Math.random());
            var d = b.wrapper.innerHTML,
                e = document.createElement("div");
            e.innerHTML = c + d;
            b.wrapper.innerHTML = e.innerHTML;
            b.element = this.helpers.getSwf(a)
        },
        helpers: {
            merge: function(b, a) {
                for (attr in a)
                    if (b.hasOwnProperty(attr) || a.hasOwnProperty(attr)) b[attr] = a[attr]
            },
            clone: function(b) {
                if (b ==
                    null || typeof b !== "object") return b;
                var a = new b.constructor,
                    c;
                for (c in b) a[c] = arguments.callee(b[c]);
                return a
            },
            addClass: function(b, a) {
                RegExp("(\\s|^)" + a + "(\\s|$)").test(b.className) || (b.className += " " + a)
            },
            removeClass: function(b, a) {
                b.className = b.className.replace(RegExp("(\\s|^)" + a + "(\\s|$)"), " ")
            },
            injectCss: function(b, a) {
                for (var c = "", d = document.getElementsByTagName("style"), e = a.replace(/\$1/g, b.settings.imageLocation), i = 0, f = d.length; i < f; i++) {
                    var k = d[i].getAttribute("title");
                    if (k && ~k.indexOf("audiojs")) {
                        f =
                            d[i];
                        if (f.innerHTML === e) return;
                        c = f.innerHTML;
                        break
                    }
                }
                d = document.getElementsByTagName("head")[0];
                i = d.firstChild;
                f = document.createElement("style");
                if (d) {
                    f.setAttribute("type", "text/css");
                    f.setAttribute("title", "audiojs");
                    if (f.styleSheet) f.styleSheet.cssText = c + e;
                    else f.appendChild(document.createTextNode(c + e));
                    i ? d.insertBefore(f, i) : d.appendChild(styleElement)
                }
            },
            cloneHtml5Node: function(b) {
                var a = document.createDocumentFragment(),
                    c = a.createElement ? a : document;
                c.createElement("audio");
                c = c.createElement("div");
                a.appendChild(c);
                c.innerHTML = b.outerHTML;
                return c.firstChild
            },
            getSwf: function(b) {
                b = document[b] || window[b];
                return b.length > 1 ? b[b.length - 1] : b
            }
        },
        events: {
            memoryLeaking: false,
            listeners: [],
            addListener: function(b, a, c) {
                if (b.addEventListener) b.addEventListener(a, c, false);
                else if (b.attachEvent) {
                    this.listeners.push(b);
                    if (!this.memoryLeaking) {
                        window.attachEvent("onunload", function() {
                            if (this.listeners)
                                for (var d = 0, e = this.listeners.length; d < e; d++) g[h].events.purge(this.listeners[d])
                        });
                        this.memoryLeaking = true
                    }
                    b.attachEvent("on" +
                        a,
                        function() {
                            c.call(b, window.event)
                        })
                }
            },
            trackLoadProgress: function(b) {
                if (b.settings.preload) {
                    var a, c;
                    b = b;
                    var d = /(ipod|iphone|ipad)/i.test(navigator.userAgent);
                    a = setInterval(function() {
                        if (b.element.readyState > -1) d || b.init.apply(b);
                        if (b.element.readyState > 1) {
                            b.settings.autoplay && b.play.apply(b);
                            clearInterval(a);
                            c = setInterval(function() {
                                b.loadProgress.apply(b);
                                b.loadedPercent >= 1 && clearInterval(c)
                            })
                        }
                    }, 10);
                    b.readyTimer = a;
                    b.loadTimer = c
                }
            },
            purge: function(b) {
                var a = b.attributes,
                    c;
                if (a)
                    for (c = 0; c < a.length; c +=
                        1)
                        if (typeof b[a[c].name] === "function") b[a[c].name] = null;
                if (a = b.childNodes)
                    for (c = 0; c < a.length; c += 1) purge(b.childNodes[c])
            },
            ready: function() {
                return function(b) {
                    var a = window,
                        c = false,
                        d = true,
                        e = a.document,
                        i = e.documentElement,
                        f = e.addEventListener ? "addEventListener" : "attachEvent",
                        k = e.addEventListener ? "removeEventListener" : "detachEvent",
                        n = e.addEventListener ? "" : "on",
                        m = function(l) {
                            if (!(l.type == "readystatechange" && e.readyState != "complete")) {
                                (l.type == "load" ? a : e)[k](n + l.type, m, false);
                                if (!c && (c = true)) b.call(a, l.type ||
                                    l)
                            }
                        },
                        q = function() {
                            try {
                                i.doScroll("left")
                            } catch (l) {
                                setTimeout(q, 50);
                                return
                            }
                            m("poll")
                        };
                    if (e.readyState == "complete") b.call(a, "lazy");
                    else {
                        if (e.createEventObject && i.doScroll) {
                            try {
                                d = !a.frameElement
                            } catch (r) {}
                            d && q()
                        }
                        e[f](n + "DOMContentLoaded", m, false);
                        e[f](n + "readystatechange", m, false);
                        a[f](n + "load", m, false)
                    }
                }
            }()
        }
    };
    g[o] = function(b, a) {
        this.element = b;
        this.wrapper = b.parentNode;
        this.source = b.getElementsByTagName("source")[0] || b;
        this.mp3 = function(c) {
            var d = c.getElementsByTagName("source")[0];
            return c.getAttribute("src") ||
                (d ? d.getAttribute("src") : null)
        }(b);
        this.settings = a;
        this.loadStartedCalled = false;
        this.loadedPercent = 0;
        this.duration = 1;
        this.playing = false;
        // this.element.currentTime=0;
    };
    g[o].prototype = {
        updatePlayhead: function() {
            this.settings.updatePlayhead.apply(this, [this.element.currentTime / this.duration])
        },
        skipTo: function(b) {
       
                this.element.currentTime=this.duration * b;
                this.updatePlayhead()
          
        },
        load: function(b) {
            this.loadStartedCalled = false;
            this.source.setAttribute("src", b);
            this.element.load();
            this.mp3 = b;
            g[h].events.trackLoadProgress(this)
        },
        loadError: function() {
            this.settings.loadError.apply(this)
        },
        init: function() {
            this.settings.init.apply(this)
        },
        loadStarted: function() {
            if (!this.element.duration) return false;
            this.duration = this.element.duration;
            this.updatePlayhead();
            this.settings.loadStarted.apply(this)
        },
        loadProgress: function() {
            if (this.element.buffered != null && this.element.buffered.length) {
                if (!this.loadStartedCalled) this.loadStartedCalled = this.loadStarted();
                this.loadedPercent = this.element.buffered.end(this.element.buffered.length - 1) / this.duration;
                this.settings.loadProgress.apply(this, [this.loadedPercent])
            }
        },
        playPause: function() {
            this.playing ? this.pause() : this.play()
        },
        play: function() {
            (/ipod|iphone|ipad/i).test(navigator.userAgent) && this.element.readyState == 0 && this.init.apply(this);
            if (!this.settings.preload) {
                this.settings.preload = true;
                this.element.setAttribute("preload", "auto");
                g[h].events.trackLoadProgress(this)
            }
            this.playing = true;
            this.element.play();
            this.settings.play.apply(this)
        },
        pause: function() {
            this.playing = false;
            this.element.pause();
            this.settings.pause.apply(this)
        },
        setVolume: function(b) {
            this.element.volume = b
        },
        trackEnded: function() {
            this.skipTo.apply(this, [0]);
            this.settings.loop || this.pause.apply(this);
            this.settings.trackEnded.apply(this)
        }
    };
    var j = function(b, a) {
        var c = [];
        a = a || document;
        if (a.getElementsByClassName) c = a.getElementsByClassName(b);
        else {
            var d, e, i = a.getElementsByTagName("*"),
                f = RegExp("(^|\\s)" + b + "(\\s|$)");
            d = 0;
            for (e = i.length; d < e; d++) f.test(i[d].className) && c.push(i[d])
        }
        return c.length > 1 ? c : c[0]
    }
})("audiojs", "audiojsInstance", this);