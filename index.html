<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Player with Learnosity</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://items.learnosity.com/?v2024.1.LTS"></script>
    
    <!-- 
      THE FINAL FIX IS HERE: A Mock SCORM 1.2 API.
      This script creates a placeholder 'API' object on the main window.
      The SCORM content inside the iframe looks for this object. Finding it
      prevents the content's internal scripts from crashing, which was causing
      the player to appear blank.
    -->
    <script>
        window.API = {
            LMSInitialize: function() {
                console.log("LMSInitialize called");
                return "true";
            },
            LMSGetValue: function(parameter) {
                console.log("LMSGetValue called with:", parameter);
                return "";
            },
            LMSSetValue: function(parameter, value) {
                console.log("LMSSetValue called with:", parameter, "Value:", value);
                return "true";
            },
            LMSCommit: function() {
                console.log("LMSCommit called");
                return "true";
            },
            LMSFinish: function() {
                console.log("LMSFinish called");
                return "true";
            },
            LMSGetLastError: function() {
                console.log("LMSGetLastError called");
                return "0";
            },
            LMSGetErrorString: function(errorCode) {
                console.log("LMSGetErrorString called with:", errorCode);
                return "No error";
            },
            LMSGetDiagnostic: function(errorCode) {
                console.log("LMSGetDiagnostic called with:", errorCode);
                return "No diagnostic information";
            }
        };
    </script>
</head>
<body>
    <div id="player-container">
        <header id="player-header">
            <h1 id="player-title">Lesson Title</h1>
            <div id="controls">
                <label for="activate-select">Select an Activate Activity:</label>
                <select id="activate-select"></select>
            </div>
            <button id="teacher-btn">Teacher Support</button>
        </header>
        
        <main id="content-window">
            <!-- We are removing the 'sandbox' attribute as it is no longer needed. -->
            <iframe id="content-frame" src="" title="Lesson Content"></iframe>
            
            <div id="learnosity-container"></div>
        </main>
        
        <footer id="player-navigation">
            <button id="prev-btn">&laquo; Previous</button>
            <span id="page-indicator">Page 0 of 0</span>
            <button id="next-btn">Next &raquo;</button>
        </footer>
    </div>

    <!-- The Teacher Pane structure -->
    <div id="teacher-pane">
        <div class="pane-header">
            <h2>Teacher Support</h2>
            <button id="close-pane-btn">&times;</button>
        </div>
        <div id="pane-content"></div>
    </div>
    <div id="pane-backdrop"></div>

    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>